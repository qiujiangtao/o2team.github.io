<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Aotu.io</title>
  <subtitle>å‡¹å‡¸å®éªŒå®¤</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://aotu.io/"/>
  <updated>2016-11-03T03:32:54.973Z</updated>
  <id>https://aotu.io/</id>
  
  <author>
    <name>å‡¹å‡¸å®éªŒå®¤</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javascript ä¸­çš„è£…é¥°å™¨</title>
    <link href="https://aotu.io/notes/2016/10/24/decorator/"/>
    <id>https://aotu.io/notes/2016/10/24/decorator/</id>
    <published>2016-10-24T12:49:11.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ ES6 ä¸­å¢åŠ äº†å¯¹ç±»å¯¹è±¡çš„ç›¸å…³å®šä¹‰å’Œæ“ä½œï¼ˆæ¯”å¦‚ <code>class</code> å’Œ <code>extends</code> ï¼‰ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬åœ¨å¤šä¸ªä¸åŒç±»ä¹‹é—´å…±äº«æˆ–è€…æ‰©å±•ä¸€äº›æ–¹æ³•æˆ–è€…è¡Œä¸ºçš„æ—¶å€™ï¼Œå˜å¾—å¹¶ä¸æ˜¯é‚£ä¹ˆä¼˜é›…ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ç§æ›´ä¼˜é›…çš„æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚</p>
<a id="more"></a>
<h2 id="Python-ä¸­çš„è£…é¥°å™¨"><a href="#Python-ä¸­çš„è£…é¥°å™¨" class="headerlink" title="Python ä¸­çš„è£…é¥°å™¨"></a>Python ä¸­çš„è£…é¥°å™¨</h2><p>decorators å³ è£…é¥°å™¨ï¼Œè¿™ä¸€ç‰¹æ€§çš„æå‡ºæ¥æºäº python ä¹‹ç±»çš„è¯­è¨€ï¼Œå¦‚æœä½ ç†Ÿæ‚‰ python çš„è¯ï¼Œå¯¹å®ƒä¸€å®šä¸ä¼šé™Œç”Ÿã€‚é‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ python é‡Œçš„è£…é¥°å™¨æ˜¯ä»€ä¹ˆæ ·å­çš„å§ï¼š</p>
<blockquote>
<p>A Python decorator is a function that takes another function, extending the behavior of the latter function without explicitly modifying it.</p>
</blockquote>
<p>è£…é¥°å™¨æ˜¯åœ¨ python 2.4 é‡Œå¢åŠ çš„åŠŸèƒ½ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç»™ä¸€ä¸ªå·²æœ‰çš„æ–¹æ³•æˆ–ç±»æ‰©å±•ä¸€äº›æ–°çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯å»ç›´æ¥ä¿®æ”¹å®ƒæœ¬èº«ã€‚</p>
<p>å¬èµ·æ¥æœ‰ç‚¹å„¿æ‡µğŸ˜³ï¼Œâ€œshow me the code !â€</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"my decorator"</span></div><div class="line">    <span class="keyword">return</span> f</div><div class="line"></div><div class="line"><span class="meta">@decorator</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"my function"</span></div><div class="line"></div><div class="line">myfunc()</div><div class="line"></div><div class="line"><span class="comment"># my decorator</span></div><div class="line"><span class="comment"># my function</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ <code>@decorator</code> å°±æ˜¯æˆ‘ä»¬è¯´çš„è£…é¥°å™¨ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨è£…é¥°å™¨ç»™æˆ‘ä»¬çš„ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰“å°å‡ºäº†ä¸€è¡Œæ–‡æœ¬ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰å¯¹åŸæ–¹æ³•åšä»»ä½•çš„ä¿®æ”¹ã€‚ä»£ç åŸºæœ¬ç­‰åŒäº</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"my decorator"</span></div><div class="line">        <span class="keyword">return</span> f()</div><div class="line">    <span class="keyword">return</span> wrapper</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"my function"</span></div><div class="line"></div><div class="line">myfunc = decorator(myfuc)</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä»£ç æˆ‘ä»¬ä¹Ÿä¸éš¾çœ‹å‡ºï¼Œè£…é¥°å™¨ decorator æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¢«è£…é¥°çš„ç›®æ ‡æ–¹æ³•ï¼Œå¤„ç†å®Œæ‰©å±•çš„å†…å®¹ä»¥åå†è¿”å›ä¸€ä¸ªæ–¹æ³•ï¼Œä¾›ä»¥åè°ƒç”¨ï¼ŒåŒæ—¶ä¹Ÿå¤±å»äº†å¯¹åŸæ–¹æ³•å¯¹è±¡çš„è®¿é—®ã€‚å½“æˆ‘ä»¬å¯¹æŸä¸ªåº”ç”¨äº†è£…é¥°ä»¥åï¼Œå…¶å®å°±æ”¹å˜äº†è¢«è£…é¥°æ–¹æ³•çš„å…¥å£å¼•ç”¨ï¼Œä½¿å…¶é‡æ–°æŒ‡å‘äº†è£…é¥°å™¨è¿”å›çš„æ–¹æ³•çš„å…¥å£ç‚¹ï¼Œä»è€Œæ¥å®ç°æˆ‘ä»¬å¯¹åŸå‡½æ•°çš„æ‰©å±•ã€ä¿®æ”¹ç­‰æ“ä½œã€‚</p>
<h2 id="å¼•å…¥åˆ°-Javascript-ä¸­"><a href="#å¼•å…¥åˆ°-Javascript-ä¸­" class="headerlink" title="å¼•å…¥åˆ° Javascript ä¸­"></a>å¼•å…¥åˆ° Javascript ä¸­</h2><p>é‚£ä¹ˆæˆ‘ä»¬äº†è§£åˆ°äº†è£…é¥°å™¨åœ¨ python ä¸­çš„è¡¨ç°ä»¥åï¼Œä¼šä¸ä¼šè§‰å¾—å…¶å®è£…é¥°å™¨å…¶å®è›®ç®€å•çš„ï¼Œå°±æ˜¯ä¸€ä¸ª wrapper å˜›ï¼Œå¯¹äº Javascript è¿™ç§è¯­è¨€æ¥è¯´ï¼Œè¿™ç§å½¢æ€ä¸æ˜¯å¾ˆå¸¸è§å—ï¼Œå¹²å˜›è¿˜è¦å¼•å…¥è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿å‘¢ï¼Ÿ</p>
<p>æ˜¯çš„ï¼Œåœ¨ ES6 ä¹‹å‰ï¼Œè£…é¥°å™¨å¯¹äº JS æ¥è¯´ç¡®å®æ˜¾å¾—ä¸å¤ªé‡è¦ï¼Œä½ åªæ˜¯éœ€è¦åŠ å‡ å±‚ wrapper åŒ…è£¹å°±å¥½äº†ï¼ˆè™½ç„¶ä¹Ÿä¼šæ˜¾å¾—ä¸é‚£ä¹ˆä¼˜é›…ï¼‰ã€‚ä½†æ˜¯æ­£å¦‚æ–‡ç« å¼€å¤´æ‰€è¯´ï¼Œåœ¨ ES6 æå‡ºä¹‹åï¼Œä½ ä¼šå‘ç°ï¼Œå¥½åƒäº‹æƒ…å˜å¾—æœ‰äº›ä¸åŒäº†ã€‚å½“æˆ‘ä»¬éœ€è¦åœ¨å¤šä¸ªä¸åŒçš„ç±»ä¹‹é—´å…±äº«æˆ–è€…æ‰©å±•ä¸€äº›æ–¹æ³•æˆ–è¡Œä¸ºçš„æ—¶å€™ï¼Œä»£ç ä¼šå˜å¾—é”™ç»¼å¤æ‚ï¼Œæå…¶ä¸ä¼˜é›…ï¼Œè¿™ä¹Ÿå°±æ˜¯è£…é¥°å™¨è¢«æå‡ºçš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ã€‚</p>
<p>è¯è¯´ä»è£…é¥°å™¨è¢«æå‡ºå·²ç»æœ‰ä¸€å¹´å¤šçš„æ—¶é—´äº†ï¼ŒåŒæ—¶æœŸçš„å¾ˆå¤šå…¶ä»–æ–°çš„ç‰¹æ€§å·²ç»éšç€ ES6 çš„æ¨è¿›è€Œè¢«å¤§å®¶å¹¿æ³›ä½¿ç”¨ï¼Œè€Œè¿™è´§ç°åœ¨å´è¿˜åœç•™åœ¨ stage 2 çš„é˜¶æ®µï¼Œä¹Ÿå¾ˆå°‘è¢«äººæåŠå’Œåº”ç”¨ã€‚é‚£ä¹ˆï¼Œè£…é¥°å™¨åˆ°åº•æ˜¯åœ¨  Javascript ä¸­æ˜¯æ€æ ·è¡¨ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸‹é¢æ¥ä¸€èµ·çœ‹ä¸€ä¸‹å§ï¼</p>
<h2 id="Javascript-ä¸­çš„è£…é¥°å™¨"><a href="#Javascript-ä¸­çš„è£…é¥°å™¨" class="headerlink" title="Javascript ä¸­çš„è£…é¥°å™¨"></a>Javascript ä¸­çš„è£…é¥°å™¨</h2><p>å…ˆæ¥çœ‹ä¸€ä¸‹è£…é¥°å™¨åœ¨ä»£ç ä¸­æ˜¯é•¿æˆä»€ä¹ˆæ ·å­å§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@decorator</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</div><div class="line">    @decorator</div><div class="line">    run() &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å—¯ï¼Œä»£ç ä¸­çš„ <code>@decorator</code> å°±æ˜¯ JS ä¸­çš„è£…é¥°å™¨ï¼Œçœ‹èµ·æ¥åŸºæœ¬å’Œ python ä¸­çš„æ ·å­ä¸€æ ·ï¼Œä»¥ <code>@</code> ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œå¯ä»¥ä½œç”¨äºç±»ï¼Œä¹Ÿå¯ä»¥ä½œç”¨äºç±»çš„å±æ€§ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒå…·ä½“çš„è¡¨ç°åŠè¿è¡ŒåŸç†å§ã€‚</p>
<h3 id="ES6-ä¸­çš„ç±»"><a href="#ES6-ä¸­çš„ç±»" class="headerlink" title="ES6 ä¸­çš„ç±»"></a>ES6 ä¸­çš„ç±»</h3><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å…³äº ES6 ä¸­çš„ç±»å§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</div><div class="line">    say() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"meow ~"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯ ES6 ä¸­å®šä¹‰ä¸€ä¸ªç±»çš„å†™æ³•ï¼Œå…¶å®åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè€Œå®é™…ä¸Šå½“æˆ‘ä»¬ç»™ä¸€ä¸ªç±»æ·»åŠ ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ°  <code>Object.defineProperty</code> è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š<code>target</code> ã€<code>name</code> å’Œ <code>descriptor</code> ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å®é™…ä¸Šåœ¨æ‰§è¡Œæ—¶æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="built_in">Object</span>.defineProperty(Cat.prototype, <span class="string">"say"</span>, &#123;</div><div class="line">    <span class="attr">value</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">"meow ~"</span>); &#125;,</div><div class="line">    <span class="attr">enumerable</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">writable</span>: <span class="literal">true</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œæœ‰äº†ä¸Šé¢è¿™æ®µä»£ç ä»¥åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹è£…é¥°å™¨åœ¨ JS ä¸­åˆ°åº•æ˜¯æ€ä¹ˆæ ·å·¥ä½œçš„å§ï¼</p>
<h3 id="ä½œç”¨äºç±»çš„è£…é¥°å™¨"><a href="#ä½œç”¨äºç±»çš„è£…é¥°å™¨" class="headerlink" title="ä½œç”¨äºç±»çš„è£…é¥°å™¨"></a>ä½œç”¨äºç±»çš„è£…é¥°å™¨</h3><p>å½“ä¸€ä¸ªè£…é¥°å™¨ä½œç”¨äºç±»çš„æ—¶å€™ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAnimal</span>(<span class="params">target</span>) </span>&#123;</div><div class="line">    target.isAnimal = <span class="literal">true</span>;</div><div class="line">  	<span class="keyword">return</span> target;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@isAnimal</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Cat.isAnimal);    <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯å¾ˆåƒä¹‹å‰æˆ‘ä»¬åœ¨ python ä¸­çœ‹åˆ°çš„è£…é¥°å™¨ï¼Ÿ</p>
<p>(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</p>
<p>æ‰€ä»¥è¿™æ®µä»£ç å®é™…ä¸ŠåŸºæœ¬ç­‰åŒäºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cat = isAnimal(<span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123; ... &#125;);</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä½œç”¨äºç±»çš„å•ä¸ªå±æ€§æ–¹æ³•çš„è£…é¥°å™¨</p>
<h3 id="ä½œç”¨äºç±»å±æ€§çš„è£…é¥°å™¨"><a href="#ä½œç”¨äºç±»å±æ€§çš„è£…é¥°å™¨" class="headerlink" title="ä½œç”¨äºç±»å±æ€§çš„è£…é¥°å™¨"></a>ä½œç”¨äºç±»å±æ€§çš„è£…é¥°å™¨</h3><p>æ¯”å¦‚æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæˆ‘ä»¬çš„éƒ¨åˆ†å±æ€§ç½®æˆåªè¯»ï¼Œä»¥é¿å…åˆ«äººå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æœä½¿ç”¨è£…é¥°å™¨çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥åšï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">readonly</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</div><div class="line">    discriptor.writable = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">return</span> discriptor;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</div><div class="line">    @readonly</div><div class="line">    say() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"meow ~"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> kitty = <span class="keyword">new</span> Cat();</div><div class="line"></div><div class="line">kitty.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"woof !"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">kitty.say()    <span class="comment">// meow ~</span></div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä»£ç æŠŠ <code>say</code> æ–¹æ³•è®¾ç½®æˆäº†åªè¯»ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬åé¢å†æ¬¡å¯¹å®ƒèµ‹å€¼çš„æ—¶å€™å°±ä¸ä¼šç”Ÿæ•ˆï¼Œè°ƒç”¨çš„è¿˜æ˜¯ä¹‹å‰çš„æ–¹æ³•ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰è£…é¥°å™¨çš„æ—¶å€™ï¼Œå‚æ•°æ˜¯æœ‰ä¸‰ä¸ªï¼Œ<code>target</code>ã€<code>name</code>ã€<code>descriptor</code> ã€‚</p>
<p>è¯¶ï¼Ÿç­‰ä¸€ä¸‹ï¼Œè¿™é‡Œæ€ä¹ˆè¿™ä¹ˆçœ¼ç†Ÿï¼ŸâŠ™_âŠ™</p>
<p>æ²¡é”™ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡æåˆ°è¿‡çš„å…³äºç±»çš„å®šä¹‰é‚£ä¸€å—å„¿çš„ <code>Object.defineProperty</code> çš„å‚æ•°ï¼Œæ‰€ä»¥å…¶å®è£…é¥°å™¨åœ¨ä½œç”¨äºå±æ€§çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ <code>Object.defineProperty</code> æ¥è¿›è¡Œæ‰©å±•å’Œå°è£…çš„ã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸Šé¢çš„è¿™æ®µä»£ç ä¸­ï¼Œè£…é¥°å™¨å®é™…çš„ä½œç”¨å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> descriptor = &#123;</div><div class="line">    <span class="attr">value</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"meow ~"</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">enumerable</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">writable</span>: <span class="literal">true</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">descriptor = readonly(Cat.prototype, <span class="string">"say"</span>, descriptor) || descriptor;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperty(Cat.prototype, <span class="string">"say"</span>, descriptor);</div></pre></td></tr></table></figure>
<p>å—¯å—¯ï¼Œæ˜¯ä¸æ˜¯è¿™æ ·çœ‹å°±æ¸…æ¥šå¾ˆå¤šäº†å‘¢ï¼Ÿè¿™é‡Œä¹Ÿæ˜¯ JS é‡Œè£…é¥°å™¨ä½œç”¨äºç±»å’Œä½œç”¨äºç±»çš„å±æ€§çš„ä¸åŒçš„åœ°æ–¹ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå½“è£…é¥°å™¨ä½œç”¨äºç±»æœ¬èº«çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ“ä½œçš„å¯¹è±¡ä¹Ÿæ˜¯è¿™ä¸ªç±»æœ¬èº«ï¼Œè€Œå½“è£…é¥°å™¨ä½œç”¨äºç±»çš„æŸä¸ªå…·ä½“çš„å±æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ“ä½œçš„å¯¹è±¡æ—¢ä¸æ˜¯ç±»æœ¬èº«ï¼Œä¹Ÿä¸æ˜¯ç±»çš„å±æ€§ï¼Œè€Œæ˜¯å®ƒçš„æè¿°ç¬¦ï¼ˆdescriptorï¼‰ï¼Œè€Œæè¿°ç¬¦é‡Œè®°å½•ç€æˆ‘ä»¬å¯¹è¿™ä¸ªå±æ€§çš„å…¨éƒ¨ä¿¡æ¯ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒè‡ªç”±çš„è¿›è¡Œæ‰©å±•å’Œå°è£…ï¼Œæœ€åè¾¾åˆ°çš„ç›®çš„å‘¢ï¼Œå°±å’Œä¹‹å‰è¯´è¿‡çš„è£…é¥°å™¨çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ å–œæ¬¢çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ <code>target</code> ä¸Šè¿›è¡Œæ‰©å±•å’Œå°è£…ï¼Œæ¯”å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fast</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</div><div class="line">    target.speed = <span class="number">20</span>;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> run = descriptor.value;</div><div class="line">    descriptor.value = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        run();</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`speed <span class="subst">$&#123;<span class="keyword">this</span>.speed&#125;</span>`</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> descriptor;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rabbit</span> </span>&#123;</div><div class="line">    @fast</div><div class="line">    run() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"running~"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bunny = <span class="keyword">new</span> Rabbit();</div><div class="line"></div><div class="line">bunny.run();</div><div class="line"><span class="comment">// running~</span></div><div class="line"><span class="comment">// speed 20</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(bunny.speed);   <span class="comment">// 20</span></div></pre></td></tr></table></figure>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>OKï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ JS é‡Œå¯¹äºè£…é¥°å™¨çš„æè¿°å§ï¼š</p>
<blockquote>
<p>Decorators make it possible to annotate and modify classes and properties at design time.</p>
<p>A decorator is:</p>
<ul>
<li>an expression</li>
<li>that evaluates to a function</li>
<li>that takes the target, name, and decorator descriptor as arguments</li>
<li>and optionally returns a decorator descriptor to install on the target object</li>
</ul>
</blockquote>
<p>è£…é¥°å™¨å…è®¸ä½ åœ¨ç±»å’Œæ–¹æ³•å®šä¹‰çš„æ—¶å€™å»æ³¨é‡Šæˆ–è€…ä¿®æ”¹å®ƒã€‚è£…é¥°å™¨æ˜¯ä¸€ä¸ªä½œç”¨äºå‡½æ•°çš„è¡¨è¾¾å¼ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•° <code>target</code>ã€ <code>name</code> å’Œ <code>descriptor</code> ï¼Œ ç„¶åå¯é€‰æ€§çš„è¿”å›è¢«è£…é¥°ä¹‹åçš„ <code>descriptor</code> å¯¹è±¡ã€‚</p>
<p>ç°åœ¨æ˜¯ä¸æ˜¯å¯¹è£…é¥°å™¨çš„ä½œç”¨åŠåŸç†éƒ½æ¸…æ¥šäº†å‘¢ï¼Ÿ</p>
<p>æœ€åä¸€ç‚¹å°±æ˜¯ï¼Œç°åœ¨è£…é¥°å™¨å› ä¸ºè¿˜åœ¨è‰æ¡ˆé˜¶æ®µï¼Œæ‰€ä»¥è¿˜æ²¡æœ‰è¢«å¤§éƒ¨åˆ†ç¯å¢ƒæ”¯æŒï¼Œå¦‚æœè¦ç”¨çš„è¯ï¼Œéœ€è¦ä½¿ç”¨ Babel è¿›è¡Œè½¬ç ï¼Œéœ€è¦ç”¨åˆ° <code>babel-plugin-transform-decorators-legacy</code> è¿™ä¸ªæ’ä»¶:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">babel --plugins transform-decorators-legacy es6.js &gt; es5.js</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹è½¬ç ä»¥åçš„ä»£ç ï¼Œæˆ‘è¿™é‡Œå°±ä¸åšè¯¦ç»†ä»‹ç»äº†ï¼Œå¾ˆæœ‰å¸®åŠ©å“¦~</p>
<p>å¦‚æœæœ¬æ–‡æè¿°çš„æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€~ ãƒ¾(oâ—•âˆ€â—•)ï¾‰</p>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®:"></a>å‚è€ƒæ–‡çŒ®:</h2><ul>
<li><a href="https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841#.cmajiy3p1" target="_blank" rel="external">https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841#.cmajiy3p1</a></li>
<li><a href="https://github.com/wycats/javascript-decorators" target="_blank" rel="external">https://github.com/wycats/javascript-decorators</a></li>
<li><a href="http://www.artima.com/weblogs/viewpost.jsp?thread=240808" target="_blank" rel="external">http://www.artima.com/weblogs/viewpost.jsp?thread=240808</a></li>
<li><a href="http://taobaofed.org/blog/2015/11/16/es7-decorator/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">http://taobaofed.org/blog/2015/11/16/es7-decorator/?utm_source=tuicool&amp;utm_medium=referral</a></li>
<li><a href="https://github.com/jayphelps/core-decorators.js" target="_blank" rel="external">https://github.com/jayphelps/core-decorators.js</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨ ES6 ä¸­å¢åŠ äº†å¯¹ç±»å¯¹è±¡çš„ç›¸å…³å®šä¹‰å’Œæ“ä½œï¼ˆæ¯”å¦‚ &lt;code&gt;class&lt;/code&gt; å’Œ &lt;code&gt;extends&lt;/code&gt; ï¼‰ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬åœ¨å¤šä¸ªä¸åŒç±»ä¹‹é—´å…±äº«æˆ–è€…æ‰©å±•ä¸€äº›æ–¹æ³•æˆ–è€…è¡Œä¸ºçš„æ—¶å€™ï¼Œå˜å¾—å¹¶ä¸æ˜¯é‚£ä¹ˆä¼˜é›…ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ç§æ›´ä¼˜é›…çš„æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›äº‹æƒ…ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="decorator" scheme="https://aotu.io/tags/decorator/"/>
    
      <category term="è£…é¥°å™¨" scheme="https://aotu.io/tags/%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>CSS3 Mask å®‰åˆ©æŠ¥å‘Š</title>
    <link href="https://aotu.io/notes/2016/10/19/css3-mask/"/>
    <id>https://aotu.io/notes/2016/10/19/css3-mask/</id>
    <published>2016-10-19T10:48:16.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‹å‹ï¼Œä½ å¬è¯´è¿‡ CSS3 Mask è¿™ä¸ªå±æ€§å—ï¼Ÿ<br>æ²¡å¬è¯´è¿‡ï¼Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Ÿ<br>æ²¡å…³ç³»ï¼Œå¬æˆ‘å¨“å¨“é“æ¥ã€‚</p>
<a id="more"></a>
<h2 id="1-Mask-ä»‹ç»"><a href="#1-Mask-ä»‹ç»" class="headerlink" title="1. Mask ä»‹ç»"></a>1. Mask ä»‹ç»</h2><blockquote>
<p>cssé®ç½©æ˜¯2008å¹´4æœˆç”±è‹¹æœå…¬å¸æ·»åŠ åˆ°webkitå¼•æ“ä¸­çš„ã€‚é®ç½©æä¾›ä¸€ç§åŸºäºåƒç´ çº§åˆ«çš„ï¼Œå¯ä»¥æ§åˆ¶å…ƒç´ é€æ˜åº¦çš„èƒ½åŠ›ï¼Œç±»ä¼¼äºpng24ä½æˆ–png32ä½ä¸­çš„alphaé€æ˜é€šé“çš„æ•ˆæœã€‚</p>
<p>2012å¹´11æœˆ15å·ï¼Œé®ç½©ç¬¬ä¸€æ¬¡å‡ºç°åœ¨W3Cå…¬å¸ƒçš„è‰æ¡ˆä¸­ã€‚ä½†æ˜¯è·Ÿè‹¹æœå…¬å¸çš„æ˜¯ä¸åŒçš„ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p><em>æ‘˜å½•è‡ª: <a href="http://www.w3cplus.com/css3/css-masking.html" target="_blank" rel="external">http://www.w3cplus.com/css3/css-masking.html</a></em></p>
<p>å½“å‰ï¼ˆ2016.10.19ï¼‰<code>mask</code> å¤„äº å€™é€‰æ ‡å‡†é˜¶æ®µï¼ˆCRï¼‰ï¼Œè¿˜ä¸æ˜¯æ­£å¼æ ‡å‡†ï¼ˆRECï¼‰ï¼Œ<strong>webkit/blink å†…æ ¸åŠ å‰ç¼€ <code>-webkit-</code> å¯ä½¿ç”¨</strong>ã€‚</p>
<h3 id="1-1-Mask-çš„å…¼å®¹æ€§"><a href="#1-1-Mask-çš„å…¼å®¹æ€§" class="headerlink" title="1.1 Mask çš„å…¼å®¹æ€§"></a>1.1 Mask çš„å…¼å®¹æ€§</h3><p>ä»¥ä¸‹æ˜¯æ¥è‡ª <a href="http://caniuse.com/#search=mask" target="_blank" rel="external">caniuse</a>çš„ç»Ÿè®¡ï¼š</p>
<p><img src="//misc.aotu.io/leeenx/1.png" alt="caniuse"></p>
<p>ie/edge å…¨é¢ä¸æ”¯æŒï¼ŒAndroid å’Œ iOS Safari é˜µè¥å‡ ä¹å…¨çº¿é£˜æµ…ç»¿ï¼Œæ„å‘³ç€æ”¯æŒéƒ¨åˆ†åŠŸèƒ½ ã€‚ä¸è¿‡ï¼ŒAndroid 4.0 åŠä»¥ä¸‹ç‰ˆæœ¬çš„å¯¹ <code>mask</code> çš„å…¼å®¹æ€§å¹¶ä¸å‹å¥½ï¼å¤šäºäº†è¿‘å‡ å¹´æ™ºèƒ½æ‰‹æœºå¸‚åœºçš„è‰¯(e)æ€§ç«äº‰ï¼Œç»™ç§»åŠ¨å‰ç«¯åˆ¶é€ äº†ä¸€ä¸ªç›¸å¯¹è‰¯å¥½çš„ç¯å¢ƒï¼Œä»¥ä¸‹æ˜¯ Android å„ç‰ˆæœ¬çš„å¸‚åœºå ç”¨ç‡ï¼š</p>
<p><img src="//misc.aotu.io/leeenx/2.jpg" alt="å®‰å“å„ç‰ˆæœ¬å¸‚åœºå æœ‰ç‡"></p>
<p>Android 4.0 ä»¥ä¸‹ç‰ˆæœ¬çš„å æœ‰ç‡ä¸è¶³ <strong>5%</strong>ï¼Œå·²ä¸åœ¨ä¸»æµæµ‹è¯•æœºå‹å†…å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p>
<h3 id="1-2-Mask-çš„åŸç†"><a href="#1-2-Mask-çš„åŸç†" class="headerlink" title="1.2 Mask çš„åŸç†"></a>1.2 Mask çš„åŸç†</h3><p>è’™æ¿å¯ä»¥æ˜¯ CSS3 æ¸å˜æˆ–è€…åŠé€æ˜çš„PNGå›¾ç‰‡ï¼Œè’™æ¿å…ƒç´ çš„alphaå€¼ä¸º0çš„æ—¶å€™ä¼šè¦†ç›–ä¸‹é¢çš„å…ƒç´ ï¼Œä¸º1çš„æ—¶å€™ä¼šå®Œå…¨æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹ã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="//misc.aotu.io/leeenx/4.jpg" alt="mask åŸç†"></p>
<h3 id="1-3-Mask-çš„å‘å±•"><a href="#1-3-Mask-çš„å‘å±•" class="headerlink" title="1.3 Mask çš„å‘å±•"></a>1.3 Mask çš„å‘å±•</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œmask åœ¨ W3C ä¸Šä¸€å…±æœ‰6ä¸ªç‰ˆæœ¬ï¼ˆ5ä¸ªè‰æ¡ˆ+1å€™é€‰æ ‡å‡†ï¼‰,å¦‚ä¸‹ï¼š</p>
<ul>
<li><a href="https://www.w3.org/TR/2012/WD-css-masking-20121115/" target="_blank" rel="external">W3C Working Draft 15 November 2012</a></li>
<li><a href="https://www.w3.org/TR/2013/WD-css-masking-20130620/" target="_blank" rel="external">W3C Working Draft 20 June 2013</a></li>
<li><a href="https://www.w3.org/TR/2013/WD-css-masking-1-20131029/" target="_blank" rel="external">W3C Last Call Working Draft, 29 October 2013</a></li>
<li><a href="https://www.w3.org/TR/2014/WD-css-masking-1-20140213/" target="_blank" rel="external">W3C Working Draft, 13 February 2014</a></li>
<li><a href="https://www.w3.org/TR/2014/WD-css-masking-1-20140522/" target="_blank" rel="external">W3C Last Call Working Draft, 22 May 2014</a></li>
<li><a href="https://www.w3.org/TR/2014/CR-css-masking-1-20140826/" target="_blank" rel="external">W3C Candidate Recommendation, 26 August 2014</a></li>
</ul>
<p>å½“å‰ <code>-webkit-mask</code> çš„æ ‡å‡†åŸºæœ¬ä¸Šç­‰åŒäºç¬¬ä¸€ä¸ªWDï¼ˆè‰æ¡ˆï¼‰ã€‚ï¼ˆæœ‰ç†ç”±ç›¸ä¿¡ã€<a href="https://www.w3.org/TR/2012/WD-css-masking-20121115/" target="_blank" rel="external">W3C Working Draft 15 November 2012</a>ã€å‚è€ƒäº† webkit.org çš„ ã€ <a href="https://webkit.org/blog/181/css-masks/" target="_blank" rel="external">CSS Masks</a>ã€ï¼‰</p>
<h3 id="1-4-Mask-è¯­æ³•"><a href="#1-4-Mask-è¯­æ³•" class="headerlink" title="1.4 Mask è¯­æ³•"></a>1.4 Mask è¯­æ³•</h3><blockquote>
<p>Definitions of CSS properties and values in this specification are analogous to definitions in CSS Backgrounds and Borders [CSS3BG].</p>
</blockquote>
<p><em>æ‘˜å½•è‡ª: <a href="https://www.w3.org/TR/css-masking-1/#terminology" target="_blank" rel="external">https://www.w3.org/TR/css-masking-1/#terminology</a></em></p>
<p>æŒ‰ W3C å®˜ç½‘çš„è¯´æ³•ï¼Œ<code>mask</code> çš„è¯­æ³•ä¸ <code>background</code> æ˜¯ç›¸ä»¿çš„ã€‚ä»¥ä¸‹æ˜¯ mask  ä¸ background å±æ€§çš„å¯¹ç…§è¡¨ï¼š </p>
<table>
<thead>
<tr>
<th style="text-align:left">mask</th>
<th style="text-align:left">background</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mask-clip</td>
<td style="text-align:left">background-clip</td>
</tr>
<tr>
<td style="text-align:left">*mask-composite</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td style="text-align:left">mask-image</td>
<td style="text-align:left">background-image</td>
</tr>
<tr>
<td style="text-align:left">*mask-mode</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td style="text-align:left">mask-origin</td>
<td style="text-align:left">background-origin</td>
</tr>
<tr>
<td style="text-align:left">mask-position</td>
<td style="text-align:left">background-position</td>
</tr>
<tr>
<td style="text-align:left">mask-repeat</td>
<td style="text-align:left">background-repeat</td>
</tr>
<tr>
<td style="text-align:left">mask-size</td>
<td style="text-align:left">background-size</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">background-attachment</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">background-color</td>
</tr>
</tbody>
</table>
<p>ä¸Šè¡¨ä¸­ï¼Œmask ä¸ background <strong>å¯¹åº”çš„å…­ä¸ªå±æ€§åœ¨ webkit/blink å†…æ ¸éƒ½èƒ½å®Œå…¨æ”¯æŒ</strong>ï¼Œå¹¶ä¸”ä¸W3Cçš„æ ‡å‡†ä¿æŒä¸€è‡´ï¼Œè¯­æ³•ä¸ <code>background</code> ç›¸é€šã€‚background çš„è¯­æ³•ä¸èµ˜è¿°ã€‚</p>
<p>å¦å¤–ä¸¤ä¸ªå±æ€§çš„æƒ…å†µå¦‚ä¸‹ï¼š</p>
<ul>
<li><code>mask-mode</code> å½“å‰æ²¡æœ‰ä»»ä½•æµè§ˆå™¨æ”¯æŒã€‚</li>
<li><code>-webkit-mask-composite</code> å±æ€§å€¼ä¸W3Cä¸åŒï¼Œ å‚è§ï¼šã€ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-composite" target="_blank" rel="external">-webkit-mask-composite - CSS | MDN</a>ã€ä¸ ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/mask-composite" target="_blank" rel="external">mask-composite - CSS | MDN</a>ã€</li>
</ul>
<h2 id="2-å›¾æ ‡çš„ä¸€ä¸ªä¾¿æ·é€‰é¡¹"><a href="#2-å›¾æ ‡çš„ä¸€ä¸ªä¾¿æ·é€‰é¡¹" class="headerlink" title="2. å›¾æ ‡çš„ä¸€ä¸ªä¾¿æ·é€‰é¡¹"></a>2. å›¾æ ‡çš„ä¸€ä¸ªä¾¿æ·é€‰é¡¹</h2><p>å›¾æ ‡çš„ä¸»æµæ–¹æ¡ˆæœ‰ä¸¤ç§ï¼šIcon-Font å’Œ SVG Spriteã€‚å‡¹å‡¸å®éªŒå®¤æ¨èä½¿ç”¨ SVG Spriteï¼Œå…·ä½“å‚è§ @é«˜å¤§å¸ˆ çš„å¤§ä½œã€ <a href="https://aotu.io/notes/2016/07/09/SVG-Symbol-component-practice/">æ‹¥æŠ±Webè®¾è®¡æ–°è¶‹åŠ¿ï¼šSVG Spriteså®è·µåº”ç”¨</a>ã€ã€‚</p>
<p>ç¬”è€…çœ‹æ¥ï¼Œè¿™ä¸¤ç§æ–¹æ¡ˆå­˜åœ¨ä¸€ä¸ªå‰æï¼š<strong>å›¾æ ‡å¿…é¡»æ˜¯çŸ¢é‡å›¾</strong>ã€‚è¿™å…¶å®æ˜¯é“é—¨æ§›ï¼Œä¸æ˜¯æ‰€æœ‰å›¢é˜Ÿ/ä¸ªäººéƒ½è·¨å¾—è¿‡å»çš„ã€‚<br>æœ¬èŠ‚å°†ä»‹ç»ä¸€ä¸ªä½æˆæœ¬çš„æ–¹æ¡ˆï¼š<strong>Mask Icon</strong></p>
<h3 id="2-1-Mask-Icon"><a href="#2-1-Mask-Icon" class="headerlink" title="2.1 Mask Icon"></a>2.1 Mask Icon</h3><p>ç´ æicon.png :  <img src="//misc.aotu.io/leeenx/form_sicon_select.png" alt="åŸå§‹png icon"></p>
<p>SASSæºç ï¼š<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç”Ÿæˆ é»‘ã€çº¢ã€é»„ã€è“å››ä¸ª iconã€‚</span></div><div class="line"><span class="selector-class">.icon</span> &#123;</div><div class="line">	<span class="attribute">display</span>: inline-block;</div><div class="line">	<span class="attribute">width</span>: <span class="number">30px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">	<span class="attribute">background-color</span>: black; <span class="comment">// æ§åˆ¶å›¾æ ‡çš„é¢œè‰²</span></div><div class="line">	-webkit-<span class="attribute">mask</span>: url(images/icon.png) <span class="number">0</span> <span class="number">0</span> no-repeat;</div><div class="line">	-webkit-<span class="attribute">mask</span>-size: <span class="number">100%</span> <span class="number">100%</span>;</div><div class="line">	&amp;<span class="selector-class">.red</span> &#123;</div><div class="line">		<span class="attribute">background-color</span>: red;</div><div class="line">	&#125;</div><div class="line">	&amp;<span class="selector-class">.yellow</span> &#123;</div><div class="line">		<span class="attribute">background-color</span>: yellow;</div><div class="line">	&#125;</div><div class="line">	&amp;<span class="selector-class">.blue</span> &#123;</div><div class="line">		<span class="attribute">background-color</span>: blue;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>HTMLæºç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon red"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon yellow"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon blue"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æˆªå›¾å¦‚ä¸‹ï¼š<br><img src="//misc.aotu.io/leeenx/5.jpg" alt="å››è‰²icon"></p>
<p>ä½¿ç”¨èµ·æ¥è·Ÿ Icon-Font æ˜¯å¾ˆç±»ä¼¼ï¼Œä¸è¿‡ <code>mask</code>æ–¹æ¡ˆæ˜¯é€šè¿‡ <code>background-color</code> æ§åˆ¶ icon é¢œè‰²ï¼Œè€Œ Icon-Font æ˜¯é€šè¿‡ <code>color</code>ã€‚ <code>color</code> æ¯” <code>background-color</code> æœ‰ä¼˜åŠ¿ï¼Œå®ƒå¯ä»¥ç»§æ‰¿å½“å‰æ–‡æœ¬çš„è‰²å€¼ï¼Œè€Œ background-color å´æ— æ³•ç»§æ‰¿æ–‡æœ¬è‰²å€¼ï¼ˆå› ä¸ºç»§æ‰¿å½“å‰æ–‡æœ¬çš„èƒŒæ™¯è‰²ç­‰åŒäºé€æ˜ï¼‰ã€‚</p>
<h3 id="2-2-Mask-Icon-improve"><a href="#2-2-Mask-Icon-improve" class="headerlink" title="2.2 Mask Icon improve"></a>2.2 Mask Icon improve</h3><p>èƒ½å®ç°é€šè¿‡ <code>color</code> æ¥æ”¹å˜ <code>mask</code> icon çš„é¢œè‰²å—ï¼Ÿ</p>
<p>å¤§ç¥å¼ é‘«æ—­åœ¨ã€<a href="http://www.zhangxinxu.com/wordpress/2014/10/currentcolor-css3-powerful-css-keyword/" target="_blank" rel="external">currentColor-CSS3è¶…é«˜æ ¡çº§å¥½ç”¨CSSå˜é‡</a>ã€ç»™å‡ºäº†ç­”æ¡ˆï¼šcurrentColorã€‚</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">p</span> &#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#000</span>;</div><div class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.icon</span> &#123;</div><div class="line">	<span class="attribute">display</span>: inline-block;</div><div class="line">	<span class="attribute">width</span>: <span class="number">15px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">15px</span>;</div><div class="line">	<span class="attribute">background-color</span>: currentColor; <span class="comment">// æ§åˆ¶å›¾æ ‡çš„é¢œè‰² - é»˜è®¤å½“å‰colorå€¼</span></div><div class="line">	-webkit-<span class="attribute">mask</span>: url(images/icon.png) <span class="number">0</span> <span class="number">0</span> no-repeat;</div><div class="line">	-webkit-<span class="attribute">mask</span>-size: <span class="number">100%</span> <span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.red</span> &#123;</div><div class="line">	<span class="attribute">color</span>: red;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.yellow</span> &#123;</div><div class="line">	<span class="attribute">color</span>: yellow;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.blue</span> &#123;</div><div class="line">	<span class="attribute">color</span>: blue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™ä¸ªæ˜¯é»‘è‰²icon<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"red"</span>&gt;</span>è¿™ä¸ªæ˜¯çº¢è‰²icon<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"yellow"</span>&gt;</span>è¿™ä¸ªæ˜¯é»„è‰²icon<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"blue"</span>&gt;</span>è¿™ä¸ªæ˜¯è“è‰²icon<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="//misc.aotu.io/leeenx/6.png" alt="colorç»§æ‰¿å›¾æ ‡"></p>
<p>é€šè¿‡æ”¹è¿›mask å›¾æ ‡å‡ ä¹å¯ä»¥å–ä»£ Icon-Fontã€‚</p>
<p><strong>æµ‹è¯•DEMOï¼š</strong></p>
<p><img src="//misc.aotu.io/leeenx/17.jpg" alt="äºŒç»´ç "></p>
<h3 id="2-3-Mask-Icon-çš„å±€é™"><a href="#2-3-Mask-Icon-çš„å±€é™" class="headerlink" title="2.3 Mask Icon çš„å±€é™"></a>2.3 Mask Icon çš„å±€é™</h3><p>æµè§ˆå™¨å…¼å®¹æ˜¯ <code>CSS3 Mask</code> çš„æœ€å¤§å±€é™ï¼Œä»¥ <code>mask-image</code> ä¸ºä¾‹ï¼Œæµè§ˆå™¨çš„æ”¯æŒæƒ…å†µå¦‚ä¸‹ï¼š</p>
<p>PCç«¯ï¼š<br><img src="//misc.aotu.io/leeenx/7.png" alt="Desktop"></p>
<p>ç§»åŠ¨ç«¯ï¼š<br><img src="//misc.aotu.io/leeenx/8.png" alt="Desktop"></p>
<p>webkit ä¸¤å…„å¼Ÿæ”¯æŒ <code>mask-image</code> ï¼Œè€Œ firefox å’Œ ie/edge éœ€è¦é€šè¿‡     SVG Mask æ¥å®ç°è’™å±‚ã€‚</p>
<p>ç§»åŠ¨ç«¯ â‰ˆ Android + iOSï¼Œ <code>Mask Icon</code> å¯å½“ä½œä¸ºç§»åŠ¨ç«¯çš„ä¸€ä¸ªä¾¿æ·æ–¹æ¡ˆã€‚</p>
<h2 id="3-å¤šè’™å±‚ä»‹ç»"><a href="#3-å¤šè’™å±‚ä»‹ç»" class="headerlink" title="3. å¤šè’™å±‚ä»‹ç»"></a>3. å¤šè’™å±‚ä»‹ç»</h2><blockquote>
<p>The mask of a box can have multiple layers. The number of layers is determined by the number of comma-separated values in the â€˜mask-imageâ€™ property.</p>
</blockquote>
<p><em>æ‘˜å½•è‡ªï¼š<a href="https://www.w3.org/TR/2012/WD-css-masking-20121115/#layering" target="_blank" rel="external">https://www.w3.org/TR/2012/WD-css-masking-20121115/#layering</a></em></p>
<p>æŒ‰W3Cçš„å®šä¹‰ï¼Œmask å¯è®¾ç½®å¤šè’™å±‚ ã€‚ç”±äºç¼ºå°‘å¤šè’™å±‚çš„å…¼å®¹æ€§æ•°æ®ï¼Œç¬”è€…åšäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ£€éªŒå¤šè’™å±‚åœ¨ä¸åŒæœºå‹ä¸‹çš„è¡¨ç°ã€‚</p>
<p><strong>ç›®æ ‡å›¾å½¢ï¼š</strong><br><img src="//misc.aotu.io/leeenx/9.png" alt="ç›®æ ‡å›¾å½¢"></p>
<p><strong>ç´ æï¼š</strong><br><img src="//misc.aotu.io/leeenx/seckill_coupon_100px.png" alt="100px"><br><img src="//misc.aotu.io/leeenx/seckill_coupon_ellipsis.png" alt="100px"></p>
<p><strong>æµ‹è¯•ç”¨æœºï¼š</strong></p>
<p>iPhone 6/6+ï¼ˆiOS 10ï¼‰ã€ è£è€€3cï¼ˆAndroid 4.2.2ï¼‰ã€ çº¢ç±³ï¼ˆAndroid 4.4.4 ï¼‰ã€é­…è“ï¼ˆAndroid 4.4.4ï¼‰ ä¸‰æ˜ŸGT-I9300ï¼ˆAndroid 4.3ï¼‰ã€Microsoft Limia RM-1090ï¼ˆwindows mobileï¼‰</p>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹:<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.seckill_coupon</span> &#123;</div><div class="line">    <span class="attribute">width</span>: (<span class="number">718px</span> / <span class="number">2</span>);</div><div class="line">    <span class="attribute">height</span>: auto;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">font-family</span>: Helvetica;</div><div class="line">    &amp;_item &#123;</div><div class="line">        <span class="attribute">width</span>: (<span class="number">226px</span> / <span class="number">2</span>);</div><div class="line">        <span class="attribute">height</span>: ( <span class="number">120px</span> / <span class="number">2</span> );</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        -webkit-<span class="attribute">mask</span>-image: url(images/seckill_coupon_ellipsis.png?__inline), url(images/seckill_coupon_100px.png?__inline), url(images/seckill_coupon_ellipsis.png?__inline);</div><div class="line">        -webkit-<span class="attribute">mask</span>-<span class="attribute">position</span>: (<span class="number">190px</span> / <span class="number">2</span>) -<span class="number">5px</span>, <span class="number">0</span> <span class="number">5px</span>, (<span class="number">190px</span> / <span class="number">2</span>) <span class="number">55px</span>;</div><div class="line">        -webkit-<span class="attribute">mask</span>-repeat: repeat-x, no-repeat, repeat-x;</div><div class="line">        -webkit-<span class="attribute">mask</span>-size: (<span class="number">750px</span> / <span class="number">2</span>) auto, (<span class="number">750px</span> / <span class="number">2</span>) auto, (<span class="number">750px</span> / <span class="number">2</span>) auto;</div><div class="line">        &amp;_top &#123;</div><div class="line">            <span class="attribute">background</span>: <span class="number">#f2f7f7</span> linear-gradient(to bottom, <span class="number">#fafcfc</span>, <span class="number">#f2f7f7</span>);</div><div class="line">            <span class="attribute">border-radius</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">            <span class="attribute">height</span>: ( <span class="number">70px</span> / <span class="number">2</span> );</div><div class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">        &#125;</div><div class="line">        &amp;_bottom &#123;</div><div class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">            <span class="attribute">height</span>: ( <span class="number">50px</span> / <span class="number">2</span> );</div><div class="line">            <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">3px</span>;</div><div class="line">            <span class="attribute">background-image</span>: linear-gradient(to bottom, <span class="number">#ff9600</span>, <span class="number">#ff7c00</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item_top"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item_bottom"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">è®¾å¤‡</th>
<th style="text-align:center">æµè§ˆå™¨</th>
<th style="text-align:center">æ”¯æŒåº¦</th>
<th style="text-align:center">æˆªå›¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iPhone 6/6+<br>(iOS 9/10)</td>
<td style="text-align:center">Safari/WeChat</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">é­…è“ <br> (Android 4.4.4)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">é­…è“ <br> (Android 4.4.4)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">çº¢ç±³ <br> (Android 4.4.4)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">çº¢ç±³ <br> (Android 4.4.4)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">ä¸‰æ˜ŸGT-I9300 <br>ï¼ˆAndroid 4.3ï¼‰</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">ä¸‰æ˜ŸGT-I9300 <br>ï¼ˆAndroid 4.3ï¼‰</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">ä¸å‹å¥½</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/11.png?v=2" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">è£è€€3c <br> (Android 4.2.2)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">è£è€€3c <br> (Android 4.2.2)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">ä¸å‹å¥½</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/11.png?v=2" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">Lumia RM-1090 <br> ï¼ˆwindows mobileï¼‰</td>
<td style="text-align:center">ie</td>
<td style="text-align:center">ä¸æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/12.png?v=1" alt="fail"></td>
</tr>
</tbody>
</table>
<p><strong>æµ‹è¯•è§£è¯»ï¼š</strong></p>
<p>è™½ç„¶æµ‹è¯•çš„æœºå‹ä¸å¤šï¼Œä½†ä»ç„¶å¯ä»¥çœ‹å‡º Android 4.3åŠä»¥ä¸‹ç‰ˆæœ¬åŸç”Ÿæµè§ˆå™¨å¯¹å¤šè’™å±‚çš„æ”¯æŒ<strong>ä¸å‹å¥½</strong>ï¼Œwindows mobileæ˜¯ <strong>ä¸æ”¯æŒ</strong>ï¼Œè€Œä½¿ç”¨ <code>X5</code>å†…æ ¸çš„ WeChat 6.3.25å¯¹å¤šè’™å±‚çš„æ”¯æŒåº¦æ˜¯è‰¯å¥½çš„ã€‚</p>
<p>å°† <strong>å–æ¶ˆå¤šè’™å±‚</strong> è§†ä½œ å¤šè’™å±‚çš„é™çº§ä»¥å¤„ç†<strong>ä¸å‹å¥½</strong>çš„æœºå‹ï¼š</p>
<p><img src="//misc.aotu.io/leeenx/10.png" alt="success">  <span style="position: relative; top: -55px;">â€“ é™çº§ -&gt;</span> <img src="//misc.aotu.io/leeenx/12.png?v=2" alt="success"></p>
<p>é€šè¿‡ <code>@supports</code> æ¥åšé™çº§å¤„ç†ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@supports (-webkit-mask-repeat: repeat) &#123;</div><div class="line">    -webkit-<span class="attribute">mask</span>-image: url(images/seckill_coupon_ellipsis.png?__inline), url(images/seckill_coupon_100px.png?__inline), url(images/seckill_coupon_ellipsis.png?__inline);</div><div class="line">    -webkit-<span class="attribute">mask</span>-<span class="attribute">position</span>: (<span class="number">190px</span> / <span class="number">2</span>) -<span class="number">5px</span>, <span class="number">0</span> <span class="number">5px</span>, (<span class="number">190px</span> / <span class="number">2</span>) <span class="number">55px</span>;</div><div class="line">    -webkit-<span class="attribute">mask</span>-repeat: repeat-x, no-repeat, repeat-x;</div><div class="line">    -webkit-<span class="attribute">mask</span>-size: (<span class="number">750px</span> / <span class="number">2</span>) auto, (<span class="number">750px</span> / <span class="number">2</span>) auto, (<span class="number">750px</span> / <span class="number">2</span>) auto;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œä½¿ç”¨ @supports åï¼Œï¼ˆè£è€€3cä¸ä¸‰æ˜Ÿ GT I9300çš„ï¼‰X5å†…æ ¸ä¹Ÿè¢«é™çº§ï¼Œè¿™å¹¶ä¸æ˜¯æœ€ç†æƒ³çš„ç»“æœã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•DEMOï¼š</p>
<p><img src="//misc.aotu.io/leeenx/15.png?v=3" alt="äºŒç»´ç "><br>ï¼ˆæœªä½¿ç”¨ @supports é™çº§ï¼‰</p>
<p><img src="//misc.aotu.io/leeenx/14.png?v=3" alt="äºŒç»´ç "><br>ï¼ˆä½¿ç”¨ @supports é™çº§ï¼‰</p>
<p><strong>æµ‹è¯•ç»“è®º</strong> </p>
<ol>
<li>å¾®ä¿¡æ‰‹Qå¹³å°ï¼Œä½¿ç”¨å¤šè’™å±‚æ˜¯å‹å¥½çš„</li>
<li>éX5å†…æ ¸å¹³å°ï¼Œç›®å‰ä¸å»ºè®®å¤šè’™å±‚</li>
</ol>
<h2 id="4-Mask-border-image-ä»‹ç»"><a href="#4-Mask-border-image-ä»‹ç»" class="headerlink" title="4. Mask border image ä»‹ç»"></a>4. Mask border image ä»‹ç»</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç¬”è€…ç»å¸¸ä½¿ç”¨ <code>border-image</code> æ¥å®ç° background æ²¡åŠæ³•ç®€å•å®ç°çš„éœ€æ±‚ã€‚mask æœ‰ä¸€ä¸ª <code>mask-border</code> çš„æˆå‘˜ä¸ border-image ç›¸å¯¹åº”ï¼Œå…·ä½“å¯å‚è§ï¼š<a href="https://www.w3.org/TR/css-masking/#mask-bordersã€‚" target="_blank" rel="external">https://www.w3.org/TR/css-masking/#mask-bordersã€‚</a></p>
<p>ç°é˜¶æ®µï¼ˆ2016.10.19ï¼‰ï¼Œæœªæœ‰ä»»ä½•ä¸»æµæµè§ˆå™¨ç›´æ¥æ”¯æŒ mask-borderï¼Œå› ä¸ºåœ¨ mask è‰æ¡ˆ(WD)çš„æ¼«é•¿ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œmask-border ç»å†äº†ä¸¤æ¬¡åç§°çš„å˜æ›´ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><a href="https://www.w3.org/TR/2012/WD-css-masking-20121115/" target="_blank" rel="external">W3C Working Draft 15 November 2012</a> â€“ <strong>mask-box-image</strong><br><a href="https://www.w3.org/TR/2013/WD-css-masking-20130620/" target="_blank" rel="external">W3C Working Draft 20 June 2013</a>  â€“ mask-box-image<br><a href="https://www.w3.org/TR/2013/WD-css-masking-1-20131029/" target="_blank" rel="external">W3C Last Call Working Draft, 29 October 2013</a>  â€“ mask-box-image<br><a href="https://www.w3.org/TR/2014/WD-css-masking-1-20140213/" target="_blank" rel="external">W3C Working Draft, 13 February 2014</a> â€“ <strong>mask-box</strong><br><a href="https://www.w3.org/TR/2014/WD-css-masking-1-20140522/" target="_blank" rel="external">W3C Last Call Working Draft, 22 May 2014</a> â€“ <strong>mask-border</strong><br><a href="https://www.w3.org/TR/2014/CR-css-masking-1-20140826/" target="_blank" rel="external">W3C Candidate Recommendation, 26 August 2014</a> â€“ mask-border</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸ <code>flex</code> æ˜¯ç›¸ä¼¼çš„ã€‚<br>å½“å‰ webkit/blink å†…æ ¸ ï¼ˆChrome/Safariï¼‰é‡‡ç”¨äº†ç¬¬ä¸€ä¸ªWDï¼ˆè‰æ¡ˆï¼‰çš„ <code>mask-box-image</code>ã€‚ä¸è¿‡ï¼Œ<code>mask-border</code>ä»£è¡¨äº†æœªæ¥ï¼Œæ‰€ä»¥åœ¨å†™ css æ—¶å°‘ä¸äº†å…¼å®¹çš„ä»£ç ï¼Œè¿™ä¸ªåé¢ä¼šä»‹ç»åˆ°ã€‚</p>
<h3 id="4-1-Mask-border-çš„è¯­æ³•"><a href="#4-1-Mask-border-çš„è¯­æ³•" class="headerlink" title="4.1 Mask-border çš„è¯­æ³•"></a>4.1 Mask-border çš„è¯­æ³•</h3><blockquote>
<p>The syntax of mask-border corresponds to the border-image property of CSS Background and Borders [CSS3BG].</p>
</blockquote>
<p><em>æ‘˜å½•è‡ª: <a href="https://www.w3.org/TR/css-masking-1/#mask-borders" target="_blank" rel="external">https://www.w3.org/TR/css-masking-1/#mask-borders</a></em></p>
<p><strong>*ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæœ¬ç« çš„ mask-border éƒ½æ˜¯æŒ‡ mask-box-image ï¼Œè¯»è€…è‡ªè§‰æ›¿æ¢</strong></p>
<p>mask-border ä¸ border-image çš„å¯¹ç…§åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">mask-border</th>
<th style="text-align:left">border-image</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mask-border-source</td>
<td style="text-align:left">border-image-source</td>
</tr>
<tr>
<td style="text-align:left">*mask-border-mode</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td style="text-align:left">mask-border-slice</td>
<td style="text-align:left">border-image-slice</td>
</tr>
<tr>
<td style="text-align:left">mask-border-width</td>
<td style="text-align:left">border-image-width</td>
</tr>
<tr>
<td style="text-align:left">mask-border-outset</td>
<td style="text-align:left">border-image-outset</td>
</tr>
<tr>
<td style="text-align:left">mask-border-repeat</td>
<td style="text-align:left">border-image-repeat</td>
</tr>
</tbody>
</table>
<p><code>mask-border-mode</code> æ˜¯åœ¨ã€ <a href="https://www.w3.org/TR/2014/WD-css-masking-1-20140522/" target="_blank" rel="external">W3C Last Call Working Draft, 22 May 2014</a> ã€æ‰å‡ºç°çš„å±æ€§ï¼Œå½“å‰æ²¡æœ‰ä»»ä½•æµè§ˆå™¨æ”¯æŒ ï¼Œæ‰€ä»¥ mask-border ä¸ border-image åœ¨è¯­æ³•ä¸Šæ˜¯å®Œå…¨ç›¸é€šï¼ç†è§£äº† border-imageå°±ç†è§£äº† mask-border ã€‚border-image çš„å…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒMDNçš„ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-image" target="_blank" rel="external">border-image - CSS | MDN</a>ã€ï¼Œè¿™é‡Œä¹Ÿä¸èµ˜è¿°ã€‚</p>
<h3 id="4-2-Mask-border-çš„å…¼å®¹å†™æ³•"><a href="#4-2-Mask-border-çš„å…¼å®¹å†™æ³•" class="headerlink" title="4.2 Mask-border çš„å…¼å®¹å†™æ³•"></a>4.2 Mask-border çš„å…¼å®¹å†™æ³•</h3><p>å¦‚æœæ˜¯æ‰‹å†™ css çš„åŒå­¦ï¼Œåœ¨ä½¿ç”¨ mask-border éœ€è¦æ³¨æ„ä»£ç çš„å…¼å®¹æ€§ã€‚å…¶å®å¾ˆç®€å•å¦‚ä¸‹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å½“ä¸‹æ ‡å‡†</span></div><div class="line">-webkit-<span class="attribute">mask</span>-box-image-source: url(images/seckill_coupon_half.png?__inline);</div><div class="line">-webkit-<span class="attribute">mask</span>-box-image-slice: <span class="number">9</span> <span class="number">44</span> <span class="number">9</span> <span class="number">1</span> fill;</div><div class="line">-webkit-<span class="attribute">mask</span>-box-image-<span class="attribute">width</span>: <span class="number">5px</span> <span class="number">23px</span> <span class="number">5px</span> <span class="number">5px</span>;</div><div class="line">-webkit-<span class="attribute">mask</span>-box-image-repeat: stretch stretch;</div><div class="line"></div><div class="line"><span class="comment">// å…¼å®¹æœªæ¥</span></div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-source: url(images/seckill_coupon_half.png?__inline);</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-slice: <span class="number">9</span> <span class="number">44</span> <span class="number">9</span> <span class="number">1</span> fill;</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border-width</span>: <span class="number">5px</span> <span class="number">23px</span> <span class="number">5px</span> <span class="number">5px</span>;</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-repeat: stretch stretch;</div></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯ä½¿ç”¨ <code>sass</code>ã€<code>less</code> çš„åŒå­¦ï¼Œæ¨èå®‰è£… autoprefixer æ’ä»¶ã€‚<code>autoprefixer</code> å¯ä»¥ä¸ºä½¿ç”¨è€…è§£å†³ css å…¼å®¹å†™æ³•çš„çƒ¦æ¼ï¼Œæœ‰äº†å®ƒï¼Œmask-border å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>å…¼å®¹æœªæ¥</strong>å†™æ³•ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨å®‰è£…äº† autoprefixer å</span></div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-source: url(images/seckill_coupon_half.png?__inline);</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-slice: <span class="number">9</span> <span class="number">44</span> <span class="number">9</span> <span class="number">1</span> fill;</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border-width</span>: <span class="number">5px</span> <span class="number">23px</span> <span class="number">5px</span> <span class="number">5px</span>;</div><div class="line"><span class="attribute">mask</span>-<span class="attribute">border</span>-repeat: stretch stretch;</div></pre></td></tr></table></figure>
<h3 id="4-3-Mask-border-å®ä¾‹"><a href="#4-3-Mask-border-å®ä¾‹" class="headerlink" title="4.3 Mask-border å®ä¾‹"></a>4.3 Mask-border å®ä¾‹</h3><p> ä¸ŠèŠ‚å¤šè’™å±‚çš„ä¾‹å­ä½¿ç”¨ mask-border æ¥å®ç°ä¼šæ›´åˆé€‚ï¼š</p>
<p><strong>ç›®æ ‡å›¾å½¢ï¼š</strong><br><img src="//misc.aotu.io/leeenx/9.png" alt="ç›®æ ‡å›¾å½¢"></p>
<p><strong>ç´ æï¼š</strong><br><img src="//misc.aotu.io/leeenx/seckill_coupon_half.png" alt="ç´ æ"></p>
<p><strong>æµ‹è¯•ç”¨æœºï¼š</strong></p>
<p>iPhone 6/6+ï¼ˆiOS 10ï¼‰ã€ è£è€€3cï¼ˆAndroid 4.2.2ï¼‰ã€ çº¢ç±³ï¼ˆAndroid 4.4.4 ï¼‰ã€é­…è“ï¼ˆAndroid 4.4.4ï¼‰ ä¸‰æ˜ŸGT-I9300ï¼ˆAndroid 4.3ï¼‰ã€Microsoft Limia RM-1090ï¼ˆwindows mobileï¼‰</p>
<p><strong>æµ‹è¯•ä»£ç ï¼š</strong></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.seckill_coupon</span> &#123;</div><div class="line">    <span class="attribute">width</span>: (<span class="number">718px</span> / <span class="number">2</span>);</div><div class="line">    <span class="attribute">height</span>: auto;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">font-family</span>: Helvetica;</div><div class="line">    &amp;_item &#123;</div><div class="line">        <span class="attribute">width</span>: (<span class="number">226px</span> / <span class="number">2</span>);</div><div class="line">        <span class="attribute">height</span>: ( <span class="number">120px</span> / <span class="number">2</span> );</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        <span class="attribute">mask</span>-<span class="attribute">border</span>-source: url(images/seckill_coupon_half.png?__inline);</div><div class="line">		<span class="attribute">mask</span>-<span class="attribute">border</span>-slice: <span class="number">9</span> <span class="number">44</span> <span class="number">9</span> <span class="number">1</span> fill;</div><div class="line">		<span class="attribute">mask</span>-<span class="attribute">border-width</span>: <span class="number">5px</span> <span class="number">23px</span> <span class="number">5px</span> <span class="number">5px</span>;</div><div class="line">        &amp;_top &#123;</div><div class="line">            <span class="attribute">background</span>: <span class="number">#f2f7f7</span> linear-gradient(to bottom, <span class="number">#fafcfc</span>, <span class="number">#f2f7f7</span>);</div><div class="line">            <span class="attribute">border-radius</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">0</span> <span class="number">0</span>;</div><div class="line">            <span class="attribute">height</span>: ( <span class="number">70px</span> / <span class="number">2</span> );</div><div class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">        &#125;</div><div class="line">        &amp;_bottom &#123;</div><div class="line">            <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">            <span class="attribute">height</span>: ( <span class="number">50px</span> / <span class="number">2</span> );</div><div class="line">            <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">3px</span>;</div><div class="line">            <span class="attribute">background-image</span>: linear-gradient(to bottom, <span class="number">#ff9600</span>, <span class="number">#ff7c00</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item_top"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"seckill_coupon_item_bottom"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯æµ‹è¯•DEMO:</p>
<p><img src="//misc.aotu.io/leeenx/16.png" alt="DEMO3"></p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">è®¾å¤‡</th>
<th style="text-align:center">æµè§ˆå™¨</th>
<th style="text-align:center">æ”¯æŒåº¦</th>
<th style="text-align:center">æˆªå›¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iPhone 6/6+<br>(iOS 9/10)</td>
<td style="text-align:center">Safari/WeChat</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">é­…è“ <br> (Android 4.4.4)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">é­…è“ <br> (Android 4.4.4)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">çº¢ç±³ <br> (Android 4.4.4)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">çº¢ç±³ <br> (Android 4.4.4)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">ä¸‰æ˜ŸGT-I9300 <br>ï¼ˆAndroid 4.3ï¼‰</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">ä¸‰æ˜ŸGT-I9300 <br>ï¼ˆAndroid 4.3ï¼‰</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">è£è€€3c <br> (Android 4.2.2)</td>
<td style="text-align:center">WeChat 6.3.25</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">è£è€€3c <br> (Android 4.2.2)</td>
<td style="text-align:center">åŸç”Ÿæµè§ˆå™¨</td>
<td style="text-align:center">æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/10.png" alt="success"></td>
</tr>
<tr>
<td style="text-align:center">Lumia RM-1090 <br> ï¼ˆwindows mobileï¼‰</td>
<td style="text-align:center">ie</td>
<td style="text-align:center">ä¸æ”¯æŒ</td>
<td style="text-align:center"><img src="//misc.aotu.io/leeenx/12.png?v=1" alt="fail"></td>
</tr>
</tbody>
</table>
<p><strong>æµ‹è¯•ç»“è®º</strong><br><code>mask-border</code> åœ¨ç§»åŠ¨ç«¯çš„å…¼å®¹æ€§å¾ˆå¥½ï¼Œæ¨èä½¿ç”¨ã€‚</p>
<hr>
<h2 id="5-å‚è€ƒèµ„æ–™"><a href="#5-å‚è€ƒèµ„æ–™" class="headerlink" title="5. å‚è€ƒèµ„æ–™"></a>5. å‚è€ƒèµ„æ–™</h2><p><a href="https://webkit.org/blog/181/css-masks/" target="_blank" rel="external">CSS Masks</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-composite" target="_blank" rel="external">-webkit-mask-composite - CSS | MDN</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/mask-composite" target="_blank" rel="external">mask-composite - CSS | MDN</a><br><a href="https://www.w3.org/TR/css-masking-1/" target="_blank" rel="external">CSS Masking Module Level 1</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/mask" target="_blank" rel="external">mask - CSS | MDN</a><br><a href="https://aotu.io/notes/2016/07/09/SVG-Symbol-component-practice/">æ‹¥æŠ±Webè®¾è®¡æ–°è¶‹åŠ¿ï¼šSVG Spriteså®è·µåº”ç”¨</a><br><a href="http://edu.yjbys.com/B658165160951/news/nres5691.html" target="_blank" rel="external">ICON-FONTå›¾æ ‡å­—ä½“çš„å››ç±»åˆ¶ä½œæ–¹æ³•</a><br><a href="http://www.zhangxinxu.com/wordpress/2014/10/currentcolor-css3-powerful-css-keyword/" target="_blank" rel="external">currentColor-CSS3è¶…é«˜æ ¡çº§å¥½ç”¨CSSå˜é‡</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image" target="_blank" rel="external">-webkit-mask-box-image - CSS | MDN</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-image" target="_blank" rel="external">border-image - CSS | MDN</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‹å‹ï¼Œä½ å¬è¯´è¿‡ CSS3 Mask è¿™ä¸ªå±æ€§å—ï¼Ÿ&lt;br&gt;æ²¡å¬è¯´è¿‡ï¼Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Ÿ&lt;br&gt;æ²¡å…³ç³»ï¼Œå¬æˆ‘å¨“å¨“é“æ¥ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="css3 mask" scheme="https://aotu.io/tags/css3-mask/"/>
    
      <category term="css3 mask-border" scheme="https://aotu.io/tags/css3-mask-border/"/>
    
      <category term="css3 è’™å±‚" scheme="https://aotu.io/tags/css3-%E8%92%99%E5%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>Vue2.0 æ–°æ‰‹å®Œå…¨å¡«å‘æ”»ç•¥â€”â€”ä»ç¯å¢ƒæ­å»ºåˆ°å±•ç¤ºè±†ç“£çš„ç”µå½±åˆ—è¡¨</title>
    <link href="https://aotu.io/notes/2016/10/13/vue2/"/>
    <id>https://aotu.io/notes/2016/10/13/vue2/</id>
    <published>2016-10-13T02:31:35.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>JinkeyåŸåˆ›<br>æ„Ÿè°¢ <a href="https://github.com/showonne" target="_blank" rel="external">showonne</a>ã€<a href="https://github.com/yubang" target="_blank" rel="external">yubang</a> æŠ€æœ¯æŒ‡å¯¼<br><strong>Demo åœ°å€:</strong><br> <a href="http://demo.jinkey.io/vue2" target="_blank" rel="external">http://demo.jinkey.io/vue2</a><br><strong>æºç :</strong><br><a href="https://github.com/Jinkeycode/vue2-example" target="_blank" rel="external">https://github.com/Jinkeycode/vue2-example</a></p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-Vue"><a href="#ä»€ä¹ˆæ˜¯-Vue" class="headerlink" title="ä»€ä¹ˆæ˜¯ Vue"></a>ä»€ä¹ˆæ˜¯ Vue</h2><p>Vue æ˜¯ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼Œç‰¹ç‚¹æ˜¯</p>
<p><strong>æ•°æ®ç»‘å®š</strong></p>
<blockquote>
<p>æ¯”å¦‚ä½ æ”¹å˜ä¸€ä¸ªè¾“å…¥æ¡† Input æ ‡ç­¾çš„å€¼ï¼Œä¼š<strong>è‡ªåŠ¨åŒæ­¥</strong>æ›´æ–°åˆ°é¡µé¢ä¸Šå…¶ä»–ç»‘å®šè¯¥è¾“å…¥æ¡†çš„ç»„ä»¶çš„å€¼<br>ï¿¼<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-17-43.png" alt="æ•°æ®ç»‘å®š"></p>
</blockquote>
<p><strong>ç»„ä»¶åŒ–</strong></p>
<blockquote>
<p>é¡µé¢ä¸Šå°åˆ°ä¸€ä¸ªæŒ‰é’®éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶.vueï¼Œè¿™äº›å°ç»„ä»¶ç›´æ¥å¯ä»¥åƒä¹é«˜ç§¯æœ¨ä¸€æ ·é€šè¿‡äº’ç›¸å¼•ç”¨è€Œç»„è£…èµ·æ¥</p>
</blockquote>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-10-59-15.jpg" alt="ç»„ä»¶åŒ–"><br>ï¿¼</p>
<h2 id="Vue2-0-æ¨èå¼€å‘ç¯å¢ƒ"><a href="#Vue2-0-æ¨èå¼€å‘ç¯å¢ƒ" class="headerlink" title="Vue2.0 æ¨èå¼€å‘ç¯å¢ƒ"></a>Vue2.0 æ¨èå¼€å‘ç¯å¢ƒ</h2><p>ï¿¼<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-36-06.png" alt="å¼€å‘ç¯å¢ƒè§£é‡Š"></p>
<p>Homebrew 1.0.6(Mac)ã€Node.js 6.7.0ã€npm 3.10.3ã€webpack 1.13.2ã€vue-cli 2.4.0ã€Atom 1.10.2</p>
<h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><p>æ‰“å¼€ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<h3 id="å®‰è£…brew"><a href="#å®‰è£…brew" class="headerlink" title="å®‰è£…brew"></a>å®‰è£…brew</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">/usr/</span>bin<span class="regexp">/ruby -e "$(curl -fsSL https:/</span><span class="regexp">/raw.githubusercontent.com/</span>Homebrew<span class="regexp">/install/m</span>aster<span class="regexp">/install)"</span></div></pre></td></tr></table></figure>
<h3 id="å®‰è£…-nodejs"><a href="#å®‰è£…-nodejs" class="headerlink" title="å®‰è£… nodejs"></a>å®‰è£… nodejs</h3><blockquote>
<p>brew install nodejs</p>
</blockquote>
<p>ç”¨ npm install npm@3.10.3 æ›´æ–° npm ç‰ˆæœ¬æŠ¥é”™:</p>
<blockquote>
<p>(node:42) fs: re-evaluating native module sources is not supported.</p>
</blockquote>
<p>è§£å†³åŠæ³•:</p>
<p>åœ¨å®˜ç½‘ä¸‹è½½6.70çš„å®‰è£…åŒ…å†å®‰è£…ä¸€æ¬¡(åˆšåˆšç›¸å½“äºå¸®ä½ é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œç°åœ¨å†å®‰è£…ä¸€æ¬¡å‡çº§åˆ°æœ€æ–°çš„ npm)</p>
<blockquote>
<ul>
<li>å¥½åƒä»¥å‰å®˜ç½‘çš„å®‰è£…åŒ…ä¸ä¼šè‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡çš„ï¼Œç”±äºæˆ‘ç”µè„‘ä¸Šä¹‹å‰å®‰è£…è¿‡ nodejs æ‰€ä»¥ç¯å¢ƒå˜é‡å·²ç»é…ç½®å¥½äº†ï¼Œä¸çŸ¥é“ç°åœ¨çš„å®‰è£…åŒ…ä¼šä¸ä¼šè‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
</blockquote>
<p>Windows ä¸‹ç›´æ¥ä¸‹è½½å®‰è£…åŒ…å³å¯</p>
<h3 id="è·å–nodejsæ¨¡å—å®‰è£…ç›®å½•è®¿é—®æƒé™"><a href="#è·å–nodejsæ¨¡å—å®‰è£…ç›®å½•è®¿é—®æƒé™" class="headerlink" title="è·å–nodejsæ¨¡å—å®‰è£…ç›®å½•è®¿é—®æƒé™"></a>è·å–nodejsæ¨¡å—å®‰è£…ç›®å½•è®¿é—®æƒé™</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod -R <span class="number">777</span> /usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">node_modules</span>/</span></div></pre></td></tr></table></figure>
<h3 id="å®‰è£…æ·˜å®é•œåƒ"><a href="#å®‰è£…æ·˜å®é•œåƒ" class="headerlink" title="å®‰è£…æ·˜å®é•œåƒ"></a>å®‰è£…æ·˜å®é•œåƒ</h3><blockquote>
<p>npm install -g cnpm â€“registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="external">https://registry.npm.taobao.org</a></p>
</blockquote>
<h3 id="å®‰è£…webpack"><a href="#å®‰è£…webpack" class="headerlink" title="å®‰è£…webpack"></a>å®‰è£…webpack</h3><blockquote>
<p>cnpm install webpack -g</p>
</blockquote>
<h3 id="å®‰è£…vueè„šæ‰‹æ¶"><a href="#å®‰è£…vueè„šæ‰‹æ¶" class="headerlink" title="å®‰è£…vueè„šæ‰‹æ¶"></a>å®‰è£…vueè„šæ‰‹æ¶</h3><blockquote>
<p>npm install vue-cli -g</p>
</blockquote>
<h3 id="åœ¨ç¡¬ç›˜ä¸Šæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾å·¥ç¨‹ç”¨çš„ï¼Œåœ¨ç»ˆç«¯ä¸­è¿›å…¥è¯¥ç›®å½•"><a href="#åœ¨ç¡¬ç›˜ä¸Šæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾å·¥ç¨‹ç”¨çš„ï¼Œåœ¨ç»ˆç«¯ä¸­è¿›å…¥è¯¥ç›®å½•" class="headerlink" title="åœ¨ç¡¬ç›˜ä¸Šæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾å·¥ç¨‹ç”¨çš„ï¼Œåœ¨ç»ˆç«¯ä¸­è¿›å…¥è¯¥ç›®å½•"></a>åœ¨ç¡¬ç›˜ä¸Šæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾å·¥ç¨‹ç”¨çš„ï¼Œåœ¨ç»ˆç«¯ä¸­è¿›å…¥è¯¥ç›®å½•</h3><p>Mac</p>
<blockquote>
<p>cd ç›®å½•è·¯å¾„</p>
</blockquote>
<h3 id="æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®"><a href="#æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®" class="headerlink" title="æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®"></a>æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®</h3><blockquote>
<p>vue init webpack-simple å·¥ç¨‹åå­—&lt;å·¥ç¨‹åå­—ä¸èƒ½ç”¨ä¸­æ–‡&gt;</p>
</blockquote>
<p>æˆ–è€…åˆ›å»º vue1.0 çš„é¡¹ç›®</p>
<blockquote>
<p>vue init webpack-simple#1.0 å·¥ç¨‹åå­—&lt;å·¥ç¨‹åå­—ä¸èƒ½ç”¨ä¸­æ–‡&gt;</p>
</blockquote>
<p>ä¼šæœ‰ä¸€äº›åˆå§‹åŒ–çš„è®¾ç½®ï¼Œå¦‚ä¸‹è¾“å…¥:</p>
<p><code>Target directory exists. Continue? (Y/n)</code>ç›´æ¥å›è½¦é»˜è®¤(ç„¶åä¼šä¸‹è½½ vue2.0æ¨¡æ¿ï¼Œè¿™é‡Œå¯èƒ½éœ€è¦è¿ä»£ç†)<br><code>Project name (vue-test)</code>ç›´æ¥å›è½¦é»˜è®¤<br><code>Project description (A Vue.js project)</code>  ç›´æ¥å›è½¦é»˜è®¤<br><code>Author</code> å†™ä½ è‡ªå·±çš„åå­—</p>
<h3 id="cd-å‘½ä»¤è¿›å…¥åˆ›å»ºçš„å·¥ç¨‹ç›®å½•"><a href="#cd-å‘½ä»¤è¿›å…¥åˆ›å»ºçš„å·¥ç¨‹ç›®å½•" class="headerlink" title="cd å‘½ä»¤è¿›å…¥åˆ›å»ºçš„å·¥ç¨‹ç›®å½•"></a>cd å‘½ä»¤è¿›å…¥åˆ›å»ºçš„å·¥ç¨‹ç›®å½•</h3><p>å·¥ç¨‹ç›®å½•å¦‚å›¾æ‰€ç¤º:</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-05-21.jpg" alt=""></p>
<h2 id="å®‰è£…é¡¹ç›®ä¾èµ–"><a href="#å®‰è£…é¡¹ç›®ä¾èµ–" class="headerlink" title="å®‰è£…é¡¹ç›®ä¾èµ–"></a>å®‰è£…é¡¹ç›®ä¾èµ–</h2><p>ä¸€å®šè¦ä»å®˜æ–¹ä»“åº“å®‰è£…ï¼Œnpm æœåŠ¡å™¨åœ¨å›½å¤–æ‰€ä»¥è¿™ä¸€æ­¥å®‰è£…é€Ÿåº¦ä¼šå¾ˆæ…¢ã€‚</p>
<blockquote>
<p>npm install</p>
</blockquote>
<p><strong>ä¸è¦ä»å›½å†…é•œåƒcnpmå®‰è£…</strong>(ä¼šå¯¼è‡´åé¢ç¼ºäº†å¾ˆå¤šä¾èµ–åº“)</p>
<blockquote>
<p>cnpm install</p>
</blockquote>
<h3 id="å®‰è£…-vue-è·¯ç”±æ¨¡å—vue-routerå’Œç½‘ç»œè¯·æ±‚æ¨¡å—vue-resource"><a href="#å®‰è£…-vue-è·¯ç”±æ¨¡å—vue-routerå’Œç½‘ç»œè¯·æ±‚æ¨¡å—vue-resource" class="headerlink" title="å®‰è£… vue è·¯ç”±æ¨¡å—vue-routerå’Œç½‘ç»œè¯·æ±‚æ¨¡å—vue-resource"></a>å®‰è£… vue è·¯ç”±æ¨¡å—<code>vue-router</code>å’Œç½‘ç»œè¯·æ±‚æ¨¡å—<code>vue-resource</code></h3><blockquote>
<p>cnpm install vue-router vue-resource â€“save</p>
</blockquote>
<h3 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h3><blockquote>
<p>npm run dev</p>
</blockquote>
<h4 id="å¡«å‘-ä»¥ä¸‹å‘å¯èƒ½ç”±äº-vue2-0-å¯¼è‡´å…¶ä»–ç›¸å…³ç¼–è¯‘æ‰“åŒ…å·¥å…·æ²¡æ›´æ–°å¯¼è‡´çš„"><a href="#å¡«å‘-ä»¥ä¸‹å‘å¯èƒ½ç”±äº-vue2-0-å¯¼è‡´å…¶ä»–ç›¸å…³ç¼–è¯‘æ‰“åŒ…å·¥å…·æ²¡æ›´æ–°å¯¼è‡´çš„" class="headerlink" title="å¡«å‘(ä»¥ä¸‹å‘å¯èƒ½ç”±äº vue2.0 å¯¼è‡´å…¶ä»–ç›¸å…³ç¼–è¯‘æ‰“åŒ…å·¥å…·æ²¡æ›´æ–°å¯¼è‡´çš„)"></a><strong>å¡«å‘(ä»¥ä¸‹å‘å¯èƒ½ç”±äº vue2.0 å¯¼è‡´å…¶ä»–ç›¸å…³ç¼–è¯‘æ‰“åŒ…å·¥å…·æ²¡æ›´æ–°å¯¼è‡´çš„)</strong></h4><blockquote>
<p><strong>ã€é‡ç‚¹ã€‘åæ¥å‘ç°è¿™äº›å‘æ˜¯ç”±äº npm ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬3.10.2ï¼Œ ç”¨ npm 3.9.5å°±ä¼šå‡ºç°ä»¥ä¸‹å‘</strong><br>è§£å†³åŠæ³•: è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤<br><strong>npm update -g</strong></p>
</blockquote>
<p>æŠ¥é”™</p>
<blockquote>
<p>Error: Cannot find module â€˜opnâ€™<br>Error: Cannot find module â€˜webpack-dev-middlewareâ€™<br>Error: Cannot find module â€˜expressâ€™<br>Error: Cannot find module â€˜compressionâ€™<br>Error: Cannot find module â€˜sockjsâ€™<br>Error: Cannot find module â€˜spdyâ€™<br>Error: Cannot find module â€˜http-proxy-middlewareâ€™<br>Error: Cannot find module â€˜serve-indexâ€™</p>
</blockquote>
<p>å¦‚æœä½ ç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„ vue-cli è¿˜å¯èƒ½æŠ¥å…¶ä»–é”™è¯¯ï¼Œéœ€è¦æ›´æ–°ä¸€ä¸‹ vue-cli </p>
<blockquote>
<p>npm update vue-cli</p>
</blockquote>
<p>ç„¶åå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹å½“å‰å…¨å±€ vue-cli çš„ç‰ˆæœ¬</p>
<blockquote>
<p>npm view vue-cli</p>
</blockquote>
<p>å®‰è£…ä¸€ä¸‹è¿™ä¸ªä¾èµ–åˆ°å·¥ç¨‹å¼€å‘ç¯å¢ƒ</p>
<blockquote>
<p>cnpm install opn â€“save-dev<br>cnpm install webpack-dev-middleware â€“save-dev<br>cnpm install express â€“save-dev<br>cnpm install compression â€“save-dev<br>cnpm install sockjs â€“save-dev<br>cnpm install spdy â€“save-dev<br>cnpm install http-proxy-middleware â€“save-dev<br>cnpm install serve-index â€“save-dev<br>cnpm install connect-history-api-fallback â€“save-dev</p>
</blockquote>
<p>å†å¯åŠ¨é¡¹ç›®ï¼ŒæŠ¥é”™</p>
<blockquote>
<p>ERROR in ./src/main.js<br>Module build failed: Error: Cannot find module â€˜babel-runtime/helpers/typeofâ€™<br>at Function.Module._resolveFilename (module.js:440:15)<br>at Function.Module._load (module.js:388:25)<br>at Module.require (module.js:468:17)<br>at require (internal/module.js:20:19)<br>at Object.<anonymous> (/Volumes/MacStorage/Coding/Web/vue-test/node_modules/.6.17.0@babel-core/lib/transformation/file/index.js:6:16)<br>at Module._compile (module.js:541:32)<br>at Object.Module._extensions..js (module.js:550:10)<br>at Module.load (module.js:458:32)<br>at tryModuleLoad (module.js:417:12)<br>at Function.Module._load (module.js:409:3)<br>@ multi main<br>ERROR in ./~/.2.1.0-beta.8@webpack-dev-server/client/socket.js<br>Module not found: Error: Canâ€™t resolve â€˜sockjs-clientâ€™ in â€˜/Volumes/MacStorage/Coding/Web/vue-test/node_modules/.2.1.0-beta.8@webpack-dev-server/clientâ€™<br>@ ./~/.2.1.0-beta.8@webpack-dev-server/client/socket.js 1:13-37<br>@ ./~/.2.1.0-beta.8@webpack-dev-server/client?<a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a><br>@ multi main</anonymous></p>
</blockquote>
<p>å®‰è£…ä¸€ä¸‹ babel-runtime</p>
<blockquote>
<p>cnpm install babel-helpers â€“save-dev</p>
</blockquote>
<p>å¯åŠ¨é¡¹ç›®ï¼Œå†æ¬¡æŠ¥é”™</p>
<blockquote>
<p>Module build failed: Error: Cannot find module â€˜babel-helpersâ€™<br>Module build failed: Error: Cannot find module â€˜babel-traverseâ€™<br>Module build failed: Error: Cannot find module â€˜json5â€™<br>Module build failed: Error: Cannot find module â€˜babel-generatorâ€™<br>Module build failed: Error: Cannot find module â€˜detect-indentâ€™<br>Module build failed: Error: Cannot find module â€˜jsescâ€™</p>
</blockquote>
<p>æ‰¾ä¸åˆ°ä¾èµ–é‚£å°±å†å®‰è£…ä¸€ä¸‹</p>
<blockquote>
<p>cnpm install babel-helpers â€“save-dev<br>cnpm install babel-traverse â€“save-dev<br>cnpm install json5 â€“save-dev<br>.<strong>..ä¸å†™äº†ï¼Œè¯·æŠŠå…¨éƒ¨æŠŠæ—§çš„ç¯å¢ƒå…¨éƒ¨æ¸…é™¤ï¼Œæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</strong></p>
</blockquote>
<h4 id="è§£å†³åŠæ³•æ¦‚è¿°"><a href="#è§£å†³åŠæ³•æ¦‚è¿°" class="headerlink" title="è§£å†³åŠæ³•æ¦‚è¿°"></a>è§£å†³åŠæ³•æ¦‚è¿°</h4><p>é‡åˆ°</p>
<blockquote>
<p>Module build failed: Error: Cannot find module â€˜æ¨¡å—åâ€™</p>
</blockquote>
<p>é‚£å°±å®‰è£…</p>
<blockquote>
<p>cnpm install æ¨¡å—å â€“save-dev(å…³äºç¯å¢ƒçš„ï¼Œè¡¨ç°ä¸ºnpm run dev å¯åŠ¨ä¸äº†)<br>cnpm install æ¨¡å—å â€“save(å…³äºé¡¹ç›®çš„ï¼Œæ¯”å¦‚main.jsï¼Œè¡¨ç°ä¸ºnpm run dev æˆåŠŸä¹‹åæ§åˆ¶å°æŠ¥é”™)<br>æ¯”å¦‚escape-string-regexpã€strip-ansiã€has-ansiã€is-finiteã€emojis-list</p>
</blockquote>
<h4 id="ç»ˆäºå¯ä»¥å¯åŠ¨é¡¹ç›®äº†"><a href="#ç»ˆäºå¯ä»¥å¯åŠ¨é¡¹ç›®äº†" class="headerlink" title="ç»ˆäºå¯ä»¥å¯åŠ¨é¡¹ç›®äº†"></a>ç»ˆäºå¯ä»¥å¯åŠ¨é¡¹ç›®äº†</h4><p>è¾“å…¥å®Œå‘½ä»¤ä¼šè‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ï¼Œå¦‚æœé»˜è®¤æ‰“å¼€ IE ä¸è¡Œ</p>
<blockquote>
<p>npm run dev</p>
</blockquote>
<p>è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨å°±ä¼šçœ‹åˆ°è¿™ å¸…å¸…çš„ç•Œé¢äº†ã€‚<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-04-54-29.png" alt=""></p>
<h2 id="å¼€å§‹-Vue-ä¹‹æ—…"><a href="#å¼€å§‹-Vue-ä¹‹æ—…" class="headerlink" title="å¼€å§‹ Vue ä¹‹æ—…"></a>å¼€å§‹ Vue ä¹‹æ—…</h2><h3 id="æ‰“å¼€-IDE"><a href="#æ‰“å¼€-IDE" class="headerlink" title="æ‰“å¼€ IDE"></a>æ‰“å¼€ IDE</h3><p>æ¨è Atom æ‰“å¼€é¡¹ç›®ï¼Œéœ€è¦å®‰è£… Vue è¯­æ³•é«˜äº®çš„æ’ä»¶</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-15-12.jpg" alt=""></p>
<h3 id="ä½¿ç”¨å®˜ç½‘æ–‡æ¡£å­¦ä¹ åŸºç¡€"><a href="#ä½¿ç”¨å®˜ç½‘æ–‡æ¡£å­¦ä¹ åŸºç¡€" class="headerlink" title="ä½¿ç”¨å®˜ç½‘æ–‡æ¡£å­¦ä¹ åŸºç¡€"></a>ä½¿ç”¨å®˜ç½‘æ–‡æ¡£å­¦ä¹ åŸºç¡€</h3><p>æˆ‘ä»¬æ¥çœ‹å®˜ç½‘çš„ä¸€ä¸ªä¾‹å­ï¼Œ(ä¸­æ–‡æ–‡æ¡£è¯·è‡ªè¡Œä¸Šç½‘æœç´¢)</p>
<p>ï¿¼<img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-43-24.jpg" alt=""></p>
<p>æ‰“å¼€ å·¥ç¨‹ç›®å½•ä¸‹çš„ App.vue</p>
<p>template å†™ htmlï¼Œscriptå†™ jsï¼Œstyleå†™æ ·å¼</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-44-22.jpg" alt=""></p>
<p>ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬æŠŠå®˜ç½‘ä¾‹å­å†™åœ¨åŒä¸€ä¸ªç»„ä»¶å†…</p>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªå‘:</p>
<p><strong>ç¬¬ä¸€</strong>ã€‚ä¸€ä¸ªç»„ä»¶ä¸‹åªèƒ½æœ‰ä¸€ä¸ªå¹¶åˆ—çš„ divï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼Œæ‰€ä»¥å¤åˆ¶å®˜ç½‘ç¤ºä¾‹çš„æ—¶å€™åªè¦å¤åˆ¶ div é‡Œé¢çš„å†…å®¹å°±å¥½ã€‚</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-48-35.jpg" alt=""></p>
<p>ä½†æ˜¯ä¸èƒ½è¿™æ ·å†™:</p>
<p>ï¿¼<img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-47-39.jpg" alt=""></p>
<p><strong>ç¬¬äºŒ</strong>ã€‚æ•°æ®è¦å†™åœ¨ return é‡Œé¢è€Œä¸æ˜¯åƒæ–‡æ¡£é‚£æ ·å­å†™</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-49-05.jpg" alt=""></p>
<p>é”™è¯¯çš„å†™æ³•:</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-49-55.jpg" alt=""></p>
<p>è¿™æ ·å­å¯ä»¥è‡ªå·±å•ƒå®Œå®˜ç½‘æ–‡æ¡£ç»„ä»¶ä¹‹å‰çš„éƒ¨åˆ†äº†ã€‚</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-11-58-14.png" alt=""></p>
<h3 id="æ¥ç©ç©ç»„ä»¶"><a href="#æ¥ç©ç©ç»„ä»¶" class="headerlink" title="æ¥ç©ç©ç»„ä»¶"></a>æ¥ç©ç©ç»„ä»¶</h3><p>å‰é¢è®²å¾—åŸºæœ¬ä¸Šéƒ½æ˜¯å„ç§å¸¸ç”¨ç»„ä»¶çš„æ•°æ®ç»‘å®šï¼Œä¸‹é¢è¿˜å¾—è¯´è¯´çš„æ˜¯ Vue çš„ç»„ä»¶çš„ä½¿ç”¨ã€‚</p>
<p>åœ¨å·¥ç¨‹ç›®å½•<code>/src</code>ä¸‹åˆ›å»º<code>component</code>æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨<code>component</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª <code>firstcomponent.vue</code>å¹¶å†™ä»¿ç…§ App.vue çš„æ ¼å¼å’Œå‰é¢å­¦åˆ°çš„çŸ¥è¯†å†™ä¸€ä¸ªç»„ä»¶ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"firstcomponent"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>I am a title.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span> written by &#123;&#123; author &#125;&#125; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data () &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">author</span>: <span class="string">"å¾®ä¿¡å…¬ä¼—å· jinkey-love"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>duangâ€¦ ä¸èƒ½æŒ‰å®˜ç½‘æ–‡æ¡£é‚£æ ·å­å«æˆ‘åšå°±åšï¼Œæˆ‘å¾—å…ˆè¯•è¯•å†å‘Šè¯‰ä½ ï¼Œæˆ‘åšå®Œæ•ˆæœæ˜¯è¿™æ ·å­çš„ï¼Œå¸Œæœ›è§‚ä¼—åšå®Œä¹Ÿæ˜¯è¿™æ ·å­ã€‚(è¿·ä¹‹å¾®ç¬‘ )</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-12-35-12.jpg" alt=""></p>
<p>ç„¶ååœ¨ App.vue ä½¿ç”¨ç»„ä»¶ ( å› ä¸ºåœ¨ <code>index.html</code> é‡Œé¢å®šä¹‰äº†<div id="app"></div>æ‰€ä»¥å°±ä»¥è¿™ä¸ªç»„ä»¶ä½œä¸ºä¸»å…¥å£ï¼Œæ–¹ä¾¿ )</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼Œå¼•å…¥</strong>ã€‚åœ¨<code>&lt;script&gt;&lt;/script&gt;</code>æ ‡ç­¾å†…çš„ç¬¬ä¸€è¡Œå†™</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> firstcomponent <span class="keyword">from</span> <span class="string">'./component/firstcomponent.vue'</span></div></pre></td></tr></table></figure>
<p><strong>ç¬¬äºŒæ­¥ï¼Œæ³¨å†Œ</strong>ã€‚åœ¨<code>&lt;script&gt;&lt;/script&gt;</code>æ ‡ç­¾å†…çš„ data ä»£ç å—åé¢åŠ ä¸Š components: { firstcomponent }ã€‚<strong>è®°å¾—ä¸­é—´åŠ è‹±æ–‡é€—å·!!!</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data () &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">           <span class="attr">msg</span>: <span class="string">'Hello Vue!'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">components</span>: &#123; firstcomponent &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨</strong>ã€‚</p>
<p>åœ¨<code>&lt;template&gt;&lt;/template&gt;</code>å†…åŠ ä¸Š<firstcomponent></firstcomponent></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./assets/logo.png"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">firstcomponent</span>&gt;</span><span class="tag">&lt;/<span class="name">firstcomponent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å®Œæˆåçš„ä»£ç ï¼š</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-12-32-42.jpg" alt=""></p>
<p>è¿™æ—¶å€™çœ‹çœ‹æµè§ˆå™¨ä¸Šçš„ <code>http://localhost:8080/</code> é¡µé¢(ä¹‹å‰æ‰“å¼€è¿‡å°±ä¼šè‡ªåŠ¨åˆ·æ–°)ï¼Œå¦‚æœä½ æ²¡çœ‹åˆ°æ•ˆæœæ˜¯å› ä¸ºä½ æ²¡æœ‰å¯¹ <code>App.vue</code> å’Œ <code>firstcomponent.vue</code> è¿›è¡Œä¿å­˜æ“ä½œï¼Œä¿å­˜åé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-06-12-35-51.png" alt=""></p>
<h3 id="ä½¿ç”¨è·¯ç”±æ­å»ºå•é¡µåº”ç”¨"><a href="#ä½¿ç”¨è·¯ç”±æ­å»ºå•é¡µåº”ç”¨" class="headerlink" title="ä½¿ç”¨è·¯ç”±æ­å»ºå•é¡µåº”ç”¨"></a>ä½¿ç”¨è·¯ç”±æ­å»ºå•é¡µåº”ç”¨</h3><p>ä¹‹å‰å·²ç»é€šè¿‡å‘½ä»¤å®‰è£…äº†vue-router</p>
<blockquote>
<p>cnpm install vue-router â€“save</p>
</blockquote>
<p>åœ¨<code>webpack.config.js</code>åŠ å…¥åˆ«å</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">    <span class="attr">alias</span>: &#123;<span class="attr">vue</span>: <span class="string">'vue/dist/vue.js'</span>&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆè¦åŠ  alias é…ç½®é¡¹ï¼Ÿå…¶ä½œç”¨å¯ä»¥åœ¨æ–‡æ¡£ä¸­æœ‰ç›¸åº”çš„æè¿°:<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-09-22-41-49.jpg" alt=""></p>
<p>ä¿®æ”¹å®Œä¹‹åçš„<code>webpack.config.js</code>æ˜¯è¿™æ ·å­çš„:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./src/main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'./dist'</span>),</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/dist/'</span>,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'build.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolveLoader</span>: &#123;</div><div class="line">    <span class="attr">root</span>: path.join(__dirname, <span class="string">'node_modules'</span>),</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [&#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.vue$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'vue'</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.js$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.(png|jpg|gif|svg)$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'file'</span>,</div><div class="line">      <span class="attr">query</span>: &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">'[name].[ext]?[hash]'</span></div><div class="line">      &#125;</div><div class="line">    &#125;]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">alias</span>: &#123;</div><div class="line">      <span class="attr">vue</span>: <span class="string">'vue/dist/vue.js'</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">devServer</span>: &#123;</div><div class="line">    <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">noInfo</span>: <span class="literal">true</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'#eval-source-map'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</div><div class="line">  <span class="built_in">module</span>.exports.devtool = <span class="string">'#source-map'</span></div><div class="line">    <span class="comment">// http://vue-loader.vuejs.org/en/workflow/production.html</span></div><div class="line">  <span class="built_in">module</span>.exports.plugins = (<span class="built_in">module</span>.exports.plugins || []).concat([</div><div class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">      <span class="string">'process.env'</span>: &#123;</div><div class="line">        <span class="attr">NODE_ENV</span>: <span class="string">'"production"'</span></div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">      <span class="attr">compress</span>: &#123;</div><div class="line">        <span class="attr">warnings</span>: <span class="literal">false</span></div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  ])</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å†æŒ‰ä¹‹å‰çš„æ–¹æ³•å†™ä¸€ä¸ªç»„ä»¶ secondcomponent.vue</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"secondcomponent"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>I am another page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span> written by &#123;&#123; author &#125;&#125; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span> æ„Ÿè°¢ <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/showonne"</span>&gt;</span>showonne<span class="tag">&lt;/<span class="name">a</span>&gt;</span>å¤§ç¥çš„æŠ€æœ¯æŒ‡å¯¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">author</span>: <span class="string">"å¾®ä¿¡å…¬ä¼—å· jinkey-love"</span>,</div><div class="line">            <span class="attr">articles</span>: [],</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™ä¿®æ”¹ main.jsï¼Œå¼•å…¥å¹¶æ³¨å†Œ <code>vue-router</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">"vue-router"</span>;</div><div class="line">Vue.use(VueRouter);</div></pre></td></tr></table></figure>
<p>å¹¶ä¸”é…ç½®è·¯ç”±è§„åˆ™å’Œ app å¯åŠ¨é…ç½®é¡¹åŠ ä¸Š routerï¼Œæ—§ç‰ˆçš„ router.map æ–¹æ³•åœ¨ <code>vue-router 2.0</code> å·²ç»ä¸èƒ½ç”¨äº†ã€‚ä¿®æ”¹åçš„<code>main.js</code>å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></div><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">"vue-router"</span>;</div><div class="line"><span class="keyword">import</span> VueResource <span class="keyword">from</span> <span class="string">'vue-resource'</span></div><div class="line"></div><div class="line"><span class="comment">//å¼€å¯debugæ¨¡å¼</span></div><div class="line">Vue.config.debug = <span class="literal">true</span>;</div><div class="line"></div><div class="line">Vue.use(VueRouter);</div><div class="line">Vue.use(VueResource);</div><div class="line"></div><div class="line"><span class="comment">// å®šä¹‰ç»„ä»¶, ä¹Ÿå¯ä»¥åƒæ•™ç¨‹ä¹‹å‰æ•™çš„æ–¹æ³•ä»åˆ«çš„æ–‡ä»¶å¼•å…¥</span></div><div class="line"><span class="keyword">const</span> First = &#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;div&gt;&lt;h2&gt;æˆ‘æ˜¯ç¬¬ 1 ä¸ªå­é¡µé¢&lt;/h2&gt;&lt;/div&gt;'</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">import</span> secondcomponent <span class="keyword">from</span> <span class="string">'./component/secondcomponent.vue'</span></div><div class="line"></div><div class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨å®ä¾‹</span></div><div class="line"><span class="comment">// å¹¶ä¸”é…ç½®è·¯ç”±è§„åˆ™</span></div><div class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  <span class="attr">mode</span>: <span class="string">'history'</span>,</div><div class="line">  <span class="attr">base</span>: __dirname,</div><div class="line">  <span class="attr">routes</span>: [&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/first'</span>,</div><div class="line">    <span class="attr">component</span>: First</div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/second'</span>,</div><div class="line">    <span class="attr">component</span>: secondcomponent</div><div class="line">  &#125;]</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯åŠ¨åº”ç”¨äº†ï¼</span></div><div class="line"><span class="comment">// è·¯ç”±å™¨ä¼šåˆ›å»ºä¸€ä¸ª App å®ä¾‹ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°é€‰æ‹©ç¬¦ #app åŒ¹é…çš„å…ƒç´ ä¸Šã€‚</span></div><div class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">router</span>: router,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</div><div class="line">&#125;).$mount(<span class="string">'#app'</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ ·å­æ”¹å®Œå†æ‰“å¼€æµè§ˆå™¨çœ‹çœ‹ã€‚<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-09-23-10-33.png" alt=""></p>
<p>ç‚¹å‡»é‚£ä¸¤ä¸ªé“¾æ¥è¯•è¯•ï¼Œä¼šå‘ç°<code>&lt;router-view class=&quot;view&quot;&gt;&lt;/router-view&gt;</code>çš„å†…å®¹å·²ç»å±•ç¤ºå‡ºæ¥ï¼ŒåŒæ—¶æ³¨æ„<strong>æµè§ˆå™¨åœ°å€å·²ç»å˜æ›´</strong>ã€‚<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-09-23-11-14.png" alt=""></p>
<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥æŠŠ App.vue çš„å†…å®¹å†™åœ¨ main.js ä¹Ÿæ˜¯å¯ä»¥çš„ä¸è¿‡ä¸å»ºè®®è¿™ä¹ˆåš<br><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-09-23-49-24.jpg" alt=""></p>
<p>å¦‚æœä½ ä½¿ç”¨ vue1.0å’Œ0.7ç‰ˆæœ¬çš„ vue-routerï¼Œè¯·å‚ç…§ä¸‹é¢è¿™ä¸ªæ•™ç¨‹, ä»–æ•´ä¸ªç³»åˆ—éƒ½ä¸é”™çš„ï¼Œå½“ç„¶ä»…é™äº vue1.0 :</p>
<blockquote>
<p><a href="http://guowenfh.github.io/2016/03/28/vue-webpack-06-router/" target="_blank" rel="external">http://guowenfh.github.io/2016/03/28/vue-webpack-06-router/</a></p>
</blockquote>
<h3 id="ç»™é¡µé¢åŠ ç‚¹åŠ¨æ€æ•°æ®"><a href="#ç»™é¡µé¢åŠ ç‚¹åŠ¨æ€æ•°æ®" class="headerlink" title="ç»™é¡µé¢åŠ ç‚¹åŠ¨æ€æ•°æ®"></a>ç»™é¡µé¢åŠ ç‚¹åŠ¨æ€æ•°æ®</h3><p>è¿™æ—¶å€™çš„é¡µé¢éƒ½æ˜¯é™æ€çš„(æ•°æ®åœ¨å†™ç¨‹åºçš„æ—¶å€™å·²ç»å›ºå®šäº†ä¸èƒ½ä¿®æ”¹)ï¼Œè€Œæ¯ä¸ªåº”ç”¨åŸºæœ¬ä¸Šéƒ½ä¼šè¯·æ±‚å¤–éƒ¨æ•°æ®ä»¥åŠ¨æ€æ”¹å˜é¡µé¢å†…å®¹ã€‚å¯¹åº”æœ‰ä¸€ä¸ªåº“å« <code>vue-resource</code> å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£…</p>
<blockquote>
<p>cnpm install vue-resource â€“save</p>
</blockquote>
<p>åœ¨ main.js å¼•å…¥å¹¶æ³¨å†Œ <code>vue-resource</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> VueResource <span class="keyword">from</span> <span class="string">'vue-resource'</span></div><div class="line">Vue.use(VueResource);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ secondcomponent.vue ä¸Šæ¥åŠ¨æ€åŠ è½½æ•°æ®</p>
<p>æ·»åŠ ä¸€ä¸ªåˆ—è¡¨:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"article in articles"</span>&gt;</span></div><div class="line">        &#123;&#123;article.title&#125;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>åœ¨ data é‡Œé¢åŠ å…¥æ•°ç»„ articles å¹¶èµ‹å€¼ä¸º[]<br>ç„¶ååœ¨ data åé¢åŠ å…¥åŠ å…¥é’©å­å‡½æ•° <code>mounted</code>(è¯¦ç»†è¯·å‚ç…§å®˜æ–¹æ–‡æ¡£å…³äº vue ç”Ÿå‘½å‘¨æœŸçš„è§£æ)ï¼Œ<strong>data å’Œ mount ä¸­é—´è®°å¾—è®°å¾—åŠ é€—å·</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.$http.jsonp(<span class="string">'https://api.douban.com/v2/movie/top250?count=10'</span>, &#123;&#125;, &#123;</div><div class="line">        <span class="attr">headers</span>: &#123;</div><div class="line"></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">emulateJSON</span>: <span class="literal">true</span></div><div class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">        <span class="comment">// è¿™é‡Œæ˜¯å¤„ç†æ­£ç¡®çš„å›è°ƒ</span></div><div class="line"></div><div class="line">        <span class="keyword">this</span>.articles = response.data.subjects</div><div class="line">        <span class="comment">// this.articles = response.data["subjects"] ä¹Ÿå¯ä»¥</span></div><div class="line"></div><div class="line">    &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">        <span class="comment">// è¿™é‡Œæ˜¯å¤„ç†é”™è¯¯çš„å›è°ƒ</span></div><div class="line">        <span class="built_in">console</span>.log(response)</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯è±†ç“£çš„å…¬å¼€ GET æ¥å£ï¼Œå¦‚æœæ¥å£æ˜¯è·¨åŸŸçš„ POST è¯·æ±‚ï¼Œåˆ™éœ€è¦åœ¨æœåŠ¡å™¨ç«¯é…ç½®:</p>
<blockquote>
<p>Access-Control-Allow-Origin: *</p>
</blockquote>
<p>è¿™æ—¶å€™è¿è¡Œçœ‹çœ‹ã€‚ç­‰ä¸€ä¼šæ¥å£è¿”å›æ•°æ®ï¼Œå’¦ï¼Œæ•°æ®åŠ è½½å‡ºæ¥äº†ï¼Œæ£’æ£’å“’ !</p>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-09-23-32-49.png" alt=""></p>
<p>æ›´å¤š <code>vue-router</code> çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹</p>
<blockquote>
<p><strong>vue-router 0.7</strong><br><a href="http://m.doc00.com/doc/1001004eg" target="_blank" rel="external">http://m.doc00.com/doc/1001004eg</a><br><strong>vue-router 2.0</strong><br><a href="http://router.vuejs.org/zh-cn/index.html" target="_blank" rel="external">http://router.vuejs.org/zh-cn/index.html</a></p>
</blockquote>
<h3 id="æ¥æ‹¯æ•‘å¦‚æ­¤éš¾çœ‹çš„ç•Œé¢"><a href="#æ¥æ‹¯æ•‘å¦‚æ­¤éš¾çœ‹çš„ç•Œé¢" class="headerlink" title="æ¥æ‹¯æ•‘å¦‚æ­¤éš¾çœ‹çš„ç•Œé¢"></a>æ¥æ‹¯æ•‘å¦‚æ­¤éš¾çœ‹çš„ç•Œé¢</h3><p>ç»„ä»¶ã€åŒå‘ç»‘å®šã€è·¯ç”±ã€æ•°æ®è¯·æ±‚ç­‰åŸºæœ¬ç‰¹æ€§éƒ½èƒ½ç”¨äº†ï¼Œå†™åˆ°è¿™é‡Œä¸€ä¸ªå•é¡µåº”ç”¨åŸºæœ¬ä¸Šæˆå‹äº†ã€‚ä½†æ˜¯ï¼Œè¿™å‡ é¢ä¹Ÿå¤ª TM éš¾çœ‹äº†å§ã€‚è‡ªå·±å†™ UI æ¡†æ¶å¤ªè´¹åŠ²ï¼Ÿé‚£å°±ä¸Šç½‘æ‰¾ä¸€ä¸ªå§ã€‚<br>æœ¬æ¥æƒ³ç»™å¤§å®¶ä»‹ç» Vux çš„ï¼Œå› ä¸ºä»–ç”¨çš„æ˜¯å¾®ä¿¡çš„ WeUI è®¾è®¡è§„èŒƒï¼Œå¯¹äºå¼€å‘å¾®ä¿¡å°ç¨‹åºæˆ–è€…å¾®ä¿¡å†…çš„ç½‘é¡µéå¸¸å’Œè°ï¼Œä½†ç”±äºå†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ Vux è¿˜ä¸æ”¯æŒ vue2.0ï¼Œåªèƒ½ç”¨åˆ«çš„æ¡†æ¶äº†ã€‚<br>å‘½ä»¤è¡Œå®‰è£… ElementUI (æ­¤å¤„æŸå…¬å¸çš„äººåº”è¯¥å‘çº¢åŒ…äº†â€¦)</p>
<blockquote>
<p>cnpm install element-ui@next -S</p>
</blockquote>
<p>ç„¶ååœ¨ main.js å¼•å…¥å¹¶æ³¨å†Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Element <span class="keyword">from</span> <span class="string">'element-ui'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'element-ui/lib/theme-default/index.css'</span></div><div class="line">Vue.use(Element)</div></pre></td></tr></table></figure>
<p>ä¿å­˜ï¼Œè¿™æ—¶å€™ç¨‹åºæŠ¥é”™</p>
<blockquote>
<p>Uncaught Error: Module parse failed: /Users/**/Desktop/vue2/node_modules/.1.0.0-rc.5@element-ui/lib/theme-default/index.css Unexpected character â€˜@â€™ (1:0)<br>You may need an appropriate loader to handle this file type.</p>
</blockquote>
<p>å®˜ç½‘æ–‡æ¡£åˆæœ‰å‘äº†ï¼Œå®‰è£…æ•™ç¨‹ä¹Ÿä¸è·Ÿæˆ‘ä»¬è¯´è¿™ä¸€æ­¥ï¼Œå½“æˆ‘ä»¬éƒ½æ˜¯é«˜æ‰‹äº†â€¦<br>æŠ¥é”™æ˜¯ç”±äºæˆ‘ä»¬å¼•å…¥äº†<code>index.css</code>è¿™ä¸ª CSS æ–‡ä»¶ï¼Œä½†æ˜¯ webpack æ‰“åŒ…çš„æ—¶å€™æ— æ³•è¯†åˆ«å¹¶è½¬æ¢æˆ jsï¼Œæ‰€ä»¥å°±éœ€è¦é…ç½®æ‰èƒ½è¯»å– css å’Œå­—ä½“æ–‡ä»¶ï¼Œè¿è¡Œå‘½ä»¤å®‰è£…ä¸‹é¢ä¸‰ä¸ªä¸œè¥¿(å¦‚æœä¹‹å‰å®‰è£…è¿‡å°±ä¸éœ€è¦äº†)</p>
<blockquote>
<p>cnpm install style-loader â€“save-dev<br>cnpm install css-loader â€“save-dev<br>cnpm install file-loader â€“save-dev</p>
</blockquote>
<p>åœ¨ <code>webpack.config.js</code> ä¸­çš„ loaders æ•°ç»„åŠ å…¥ä»¥ä¸‹é…ç½®ï¼Œ<strong>è®°å¾—è¯¥åŠ é€—å·çš„åœ°æ–¹åŠ é€—å·!</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.css$/</span>,</div><div class="line">    <span class="attr">loader</span>: <span class="string">"style!css"</span></div><div class="line">&#125;,</div><div class="line">&#123;</div><div class="line">    <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.(eot|woff|woff2|ttf)([\\\\\\\\?]?.*)$/</span>,</div><div class="line">    <span class="attr">loader</span>: <span class="string">"file"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹å®Œçš„ <code>webpack.config.js</code> å¦‚ä¸‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./src/main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'./dist'</span>),</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/dist/'</span>,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'build.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolveLoader</span>: &#123;</div><div class="line">    <span class="attr">root</span>: path.join(__dirname, <span class="string">'node_modules'</span>),</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [&#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.vue$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'vue'</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.js$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.css$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">"style!css"</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.(eot|woff|woff2|ttf)([\\\\\\\\?]?.*)$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">"file"</span></div><div class="line">    &#125;, &#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\\\\\\\\.(png|jpg|gif|svg)$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'file'</span>,</div><div class="line">      <span class="attr">query</span>: &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">'[name].[ext]?[hash]'</span></div><div class="line">      &#125;</div><div class="line">    &#125;]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">alias</span>: &#123;</div><div class="line">      <span class="attr">vue</span>: <span class="string">'vue/dist/vue.js'</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">devServer</span>: &#123;</div><div class="line">    <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">noInfo</span>: <span class="literal">true</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'#eval-source-map'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</div><div class="line">  <span class="built_in">module</span>.exports.devtool = <span class="string">'#source-map'</span></div><div class="line">    <span class="comment">// http://vue-loader.vuejs.org/en/workflow/production.html</span></div><div class="line">  <span class="built_in">module</span>.exports.plugins = (<span class="built_in">module</span>.exports.plugins || []).concat([</div><div class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">      <span class="string">'process.env'</span>: &#123;</div><div class="line">        <span class="attr">NODE_ENV</span>: <span class="string">'"production"'</span></div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">      <span class="attr">compress</span>: &#123;</div><div class="line">        <span class="attr">warnings</span>: <span class="literal">false</span></div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  ])</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç»™è±†ç“£çš„ç”µå½±åˆ—è¡¨å¥—ä¸ªè¡£æœ(æ ·å¼) :</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"header"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">"line-height: 36px; color: #20A0FF"</span>&gt;</span>è±†ç“£ç”µå½±æ’è¡Œæ¦œ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"article in articles"</span> <span class="attr">class</span>=<span class="string">"text item"</span>&gt;</span></div><div class="line">        &#123;&#123;article.title&#125;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ‰“å¼€æµè§ˆå™¨,è¾“å…¥ç½‘å€:</p>
<blockquote>
<p><a href="http://localhost:8080/second" target="_blank" rel="external">http://localhost:8080/second</a></p>
</blockquote>
<p><img src="http://o8lot23ep.bkt.clouddn.com/_image/2016-10-10-00-51-43.png" alt=""></p>
<p>ï¿¼<br>åˆ—è¡¨æ¯”ä¹‹å‰æ¼‚äº®å¤šäº†ï¼Œä½ è¿˜å¯ä»¥å‚ç…§ ElementUI çš„æ–‡æ¡£ä½¿ç”¨æ›´å¤šç»„ä»¶æ ·å¼</p>
<blockquote>
<p><a href="http://element.eleme.io/#/component/layout" target="_blank" rel="external">http://element.eleme.io/#/component/layout</a></p>
</blockquote>
<h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><blockquote>
<p>npm run build</p>
</blockquote>
<p>åˆæŠ¥é”™äº†â€¦orz</p>
<blockquote>
<p>ERROR in build.js from UglifyJs<br>SyntaxError: Unexpected token punc Â«(Â», expected punc Â«:Â» [build.js:32001,6]<br>æŠŠnode_modules/.bin/cross-envé‡Œçš„<br>require(â€˜../distâ€™)(process.argv.slice(2));</p>
</blockquote>
<p>åæ¥å‘ç°ç›´æ¥è¿è¡Œ webpack å‘½ä»¤å°±å¯ä»¥æ‰“åŒ…äº†</p>
<blockquote>
<p>webpack â€“color â€“progress</p>
</blockquote>
<p>æ¥ç€æŠŠ index.html å’Œæ•´ä¸ª dist ç›®å½•ä¸¢åˆ°æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;JinkeyåŸåˆ›&lt;br&gt;æ„Ÿè°¢ &lt;a href=&quot;https://github.com/showonne&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;showonne&lt;/a&gt;ã€&lt;a href=&quot;https://github.com
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="NodeJS" scheme="https://aotu.io/tags/NodeJS/"/>
    
      <category term="Vue" scheme="https://aotu.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>H5ç›´æ’­èµ·èˆª</title>
    <link href="https://aotu.io/notes/2016/10/09/HTML5-SopCast/"/>
    <id>https://aotu.io/notes/2016/10/09/HTML5-SopCast/</id>
    <published>2016-10-09T07:24:41.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰ä¸ä¹…æŠ½ç©ºå¯¹ç›®å‰æ¯”è¾ƒç«çš„è§†é¢‘ç›´æ’­ï¼Œåšäº†ä¸‹ç ”ç©¶ä¸æ¢ç´¢ï¼Œäº†è§£å…¶æ•´ä½“å®ç°æµç¨‹ï¼Œä»¥åŠæ¢è®¨ç§»åŠ¨ç«¯HTML5ç›´æ’­å¯è¡Œæ€§æ–¹æ¡ˆã€‚</p>
<p>å‘ç°ç›®å‰ WEB ä¸Šä¸»æµçš„è§†é¢‘ç›´æ’­æ–¹æ¡ˆæœ‰ HLS å’Œ RTMPï¼Œç§»åŠ¨ WEB ç«¯ç›®å‰ä»¥ HLS ä¸ºä¸»ï¼ˆHLSå­˜åœ¨å»¶è¿Ÿæ€§é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© <a href="https://github.com/videojs/video.js" target="_blank" rel="external">video.js</a>  é‡‡ç”¨RTMPï¼‰ï¼ŒPCç«¯åˆ™ä»¥ RTMP ä¸ºä¸»å®æ—¶æ€§è¾ƒå¥½ï¼Œæ¥ä¸‹æ¥å°†å›´ç»•è¿™ä¸¤ç§è§†é¢‘æµåè®®æ¥å±•å¼€H5ç›´æ’­ä¸»é¢˜åˆ†äº«ã€‚</p>
<h2 id="ä¸€ã€è§†é¢‘æµåè®®HLSä¸RTMP"><a href="#ä¸€ã€è§†é¢‘æµåè®®HLSä¸RTMP" class="headerlink" title="ä¸€ã€è§†é¢‘æµåè®®HLSä¸RTMP"></a>ä¸€ã€è§†é¢‘æµåè®®HLSä¸RTMP</h2><h3 id="1-HTTP-Live-Streaming"><a href="#1-HTTP-Live-Streaming" class="headerlink" title="1. HTTP Live Streaming"></a>1. HTTP Live Streaming</h3><p>HTTP Live Streamingï¼ˆç®€ç§° HLSï¼‰æ˜¯ä¸€ä¸ªåŸºäº HTTP çš„è§†é¢‘æµåè®®ï¼Œç”± Apple å…¬å¸å®ç°ï¼ŒMac OS ä¸Šçš„ QuickTimeã€Safari ä»¥åŠ iOS ä¸Šçš„ Safari éƒ½èƒ½å¾ˆå¥½çš„æ”¯æŒ HLSï¼Œé«˜ç‰ˆæœ¬ Android ä¹Ÿå¢åŠ äº†å¯¹ HLS çš„æ”¯æŒã€‚ä¸€äº›å¸¸è§çš„å®¢æˆ·ç«¯å¦‚ï¼šMPlayerXã€VLC ä¹Ÿéƒ½æ”¯æŒ HLS åè®®ã€‚</p>
<p>HLS åè®®åŸºäº HTTPï¼Œè€Œä¸€ä¸ªæä¾› HLS çš„æœåŠ¡å™¨éœ€è¦åšä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ç¼–ç ï¼šä»¥ H.263 æ ¼å¼å¯¹å›¾åƒè¿›è¡Œç¼–ç ï¼Œä»¥ MP3 æˆ–è€… HE-AAC å¯¹å£°éŸ³è¿›è¡Œç¼–ç ï¼Œæœ€ç»ˆæ‰“åŒ…åˆ° MPEG-2 TSï¼ˆTransport Streamï¼‰å®¹å™¨ä¹‹ä¸­ï¼›</li>
<li>åˆ†å‰²ï¼šæŠŠç¼–ç å¥½çš„ TS æ–‡ä»¶ç­‰é•¿åˆ‡åˆ†æˆåç¼€ä¸º ts çš„å°æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª .m3u8 çš„çº¯æ–‡æœ¬ç´¢å¼•æ–‡ä»¶ï¼›</li>
</ul>
<p>æµè§ˆå™¨ä½¿ç”¨çš„æ˜¯ m3u8 æ–‡ä»¶ã€‚m3u8 è·ŸéŸ³é¢‘åˆ—è¡¨æ ¼å¼ m3u å¾ˆåƒï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸º m3u8 å°±æ˜¯åŒ…å«å¤šä¸ª ts æ–‡ä»¶çš„æ’­æ”¾åˆ—è¡¨ã€‚æ’­æ”¾å™¨æŒ‰é¡ºåºé€ä¸ªæ’­æ”¾ï¼Œå…¨éƒ¨æ”¾å®Œå†è¯·æ±‚ä¸€ä¸‹ m3u8 æ–‡ä»¶ï¼Œè·å¾—åŒ…å«æœ€æ–° ts æ–‡ä»¶çš„æ’­æ”¾åˆ—è¡¨ç»§ç»­æ’­ï¼Œå‘¨è€Œå¤å§‹ã€‚æ•´ä¸ªç›´æ’­è¿‡ç¨‹å°±æ˜¯ä¾é ä¸€ä¸ªä¸æ–­æ›´æ–°çš„ m3u8 å’Œä¸€å †å°çš„ ts æ–‡ä»¶ç»„æˆï¼Œm3u8 å¿…é¡»åŠ¨æ€æ›´æ–°ï¼Œts å¯ä»¥èµ° CDNã€‚ä¸€ä¸ªå…¸å‹çš„ m3u8 æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>#EXTM3U</p>
<p>#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=200000<br>gear1/prog_index.m3u8</p>
<p>#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=311111<br>gear2/prog_index.m3u8</p>
<p>#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=484444<br>gear3/prog_index.m3u8</p>
<p>#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=737777<br>gear4/prog_index.m3u8</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ° HLS åè®®æœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªä¸ªçš„ HTTP è¯·æ±‚ / å“åº”ï¼Œæ‰€ä»¥é€‚åº”æ€§å¾ˆå¥½ï¼Œä¸ä¼šå—åˆ°é˜²ç«å¢™å½±å“ã€‚ä½†å®ƒä¹Ÿæœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹ï¼šå»¶è¿Ÿç°è±¡éå¸¸æ˜æ˜¾ã€‚å¦‚æœæ¯ä¸ª ts æŒ‰ç…§ 5 ç§’æ¥åˆ‡åˆ†ï¼Œä¸€ä¸ª m3u8 æ”¾ 6 ä¸ª ts ç´¢å¼•ï¼Œé‚£ä¹ˆè‡³å°‘å°±ä¼šå¸¦æ¥ 30 ç§’çš„å»¶è¿Ÿã€‚å¦‚æœå‡å°‘æ¯ä¸ª ts çš„é•¿åº¦ï¼Œå‡å°‘ m3u8 ä¸­çš„ç´¢å¼•æ•°ï¼Œå»¶æ—¶ç¡®å®ä¼šå‡å°‘ï¼Œä½†ä¼šå¸¦æ¥æ›´é¢‘ç¹çš„ç¼“å†²ï¼Œå¯¹æœåŠ¡ç«¯çš„è¯·æ±‚å‹åŠ›ä¹Ÿä¼šæˆå€å¢åŠ ã€‚æ‰€ä»¥åªèƒ½æ ¹æ®å®é™…æƒ…å†µæ‰¾åˆ°ä¸€ä¸ªæŠ˜ä¸­çš„ç‚¹ã€‚</p>
<p>å¯¹äºæ”¯æŒ HLS çš„æµè§ˆå™¨æ¥è¯´ï¼Œç›´æ¥è¿™æ ·å†™å°±èƒ½æ’­æ”¾äº†ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;video src=<span class="string">"http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"</span></div><div class="line"><span class="built_in">height</span>=<span class="string">"300"</span> <span class="built_in">width</span>=<span class="string">"400"</span>  preload=<span class="string">"auto"</span> autoplay=<span class="string">"autoplay"</span> <span class="built_in">loop</span>=<span class="string">"loop"</span> webkit-playsinline=<span class="string">"true"</span>&gt;&lt;/video&gt;</div></pre></td></tr></table></figure>
<p><code>æ³¨æ„</code>ï¼šHLS åœ¨ PC ç«¯ä»…æ”¯æŒsafariæµè§ˆå™¨ï¼Œç±»ä¼¼chromeæµè§ˆå™¨ä½¿ç”¨<code>HTML5 video</code>æ ‡ç­¾æ— æ³•æ’­æ”¾ m3u8 æ ¼å¼ï¼Œå¯ç›´æ¥é‡‡ç”¨ç½‘ä¸Šä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆï¼Œå¦‚ï¼š<a href="https://github.com/jackzhang1204/sewise-player" target="_blank" rel="external">sewise-player</a>ã€<a href="https://github.com/johndyer/mediaelement" target="_blank" rel="external">MediaElement</a>ã€<a href="https://github.com/videojs/videojs-contrib-hls" target="_blank" rel="external">videojs-contrib-hls</a>ã€<a href="https://github.com/jwplayer/jwplayer" target="_blank" rel="external">jwplayer</a>ã€‚</p>
<h3 id="2-Real-Time-Messaging-Protocol"><a href="#2-Real-Time-Messaging-Protocol" class="headerlink" title="2. Real Time Messaging Protocol"></a>2. Real Time Messaging Protocol</h3><p>Real Time Messaging Protocolï¼ˆç®€ç§° RTMPï¼‰æ˜¯ Macromedia å¼€å‘çš„ä¸€å¥—è§†é¢‘ç›´æ’­åè®®ï¼Œç°åœ¨å±äº Adobeã€‚è¿™å¥—æ–¹æ¡ˆéœ€è¦æ­å»ºä¸“é—¨çš„ RTMP æµåª’ä½“æœåŠ¡å¦‚ Adobe Media Serverï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸­åªèƒ½ä½¿ç”¨ Flash å®ç°æ’­æ”¾å™¨ã€‚å®ƒçš„å®æ—¶æ€§éå¸¸å¥½ï¼Œå»¶è¿Ÿå¾ˆå°ï¼Œä½†æ— æ³•æ”¯æŒç§»åŠ¨ç«¯ WEB æ’­æ”¾æ˜¯å®ƒçš„ç¡¬ä¼¤ã€‚</p>
<p>è™½ç„¶æ— æ³•åœ¨iOSçš„H5é¡µé¢æ’­æ”¾ï¼Œä½†æ˜¯å¯¹äºiOSåŸç”Ÿåº”ç”¨æ˜¯å¯ä»¥è‡ªå·±å†™è§£ç å»è§£æçš„, RTMP å»¶è¿Ÿä½ã€å®æ—¶æ€§è¾ƒå¥½ã€‚</p>
<p>æµè§ˆå™¨ç«¯ï¼Œ<code>HTML5 video</code>æ ‡ç­¾æ— æ³•æ’­æ”¾ RTMP åè®®çš„è§†é¢‘ï¼Œå¯ä»¥é€šè¿‡ <a href="https://github.com/videojs/video.js" target="_blank" rel="external">video.js</a> æ¥å®ç°ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://vjs.zencdn.net/5.8.8/video-js.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"example_video_1"</span> <span class="attr">class</span>=<span class="string">"video-js vjs-default-skin"</span> <span class="attr">controls</span> <span class="attr">preload</span>=<span class="string">"auto"</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"264"</span> <span class="attr">loop</span>=<span class="string">"loop"</span> <span class="attr">webkit-playsinline</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"rtmp://10.14.221.17:1935/rtmplive/home"</span> <span class="attr">type</span>=<span class="string">'rtmp/flv'</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://vjs.zencdn.net/5.8.8/video.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">videojs.options.flash.swf = <span class="string">'video.swf'</span>;</div><div class="line">videojs(<span class="string">'example_video_1'</span>).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.play();</div><div class="line">&#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="3-è§†é¢‘æµåè®®HLSä¸RTMPå¯¹æ¯”"><a href="#3-è§†é¢‘æµåè®®HLSä¸RTMPå¯¹æ¯”" class="headerlink" title="3. è§†é¢‘æµåè®®HLSä¸RTMPå¯¹æ¯”"></a>3. è§†é¢‘æµåè®®HLSä¸RTMPå¯¹æ¯”</h3><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">åè®®</th>
<th style="text-align:center">åŸç†</th>
<th style="text-align:center">å»¶æ—¶</th>
<th style="text-align:center">ä¼˜ç‚¹</th>
<th style="text-align:center">ä½¿ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HLS</td>
<td style="text-align:center">çŸ­é“¾æ¥Http</td>
<td style="text-align:center">é›†åˆä¸€æ®µæ—¶é—´æ•°æ®ç”Ÿæˆtsåˆ‡ç‰‡æ–‡ä»¶æ›´æ–°m3u8æ–‡ä»¶</td>
<td style="text-align:center">10s - 30s</td>
<td style="text-align:center">è·¨å¹³å°</td>
<td style="text-align:center">ç§»åŠ¨ç«¯ä¸ºä¸»</td>
</tr>
<tr>
<td style="text-align:center">RTMP</td>
<td style="text-align:center">é•¿é“¾æ¥Tcp</td>
<td style="text-align:center">æ¯ä¸ªæ—¶åˆ»çš„æ•°æ®æ”¶åˆ°åç«‹å³å‘é€</td>
<td style="text-align:center">2s</td>
<td style="text-align:center">å»¶æ—¶ä½ã€å®æ—¶æ€§å¥½</td>
<td style="text-align:center">PC+ç›´æ’­+å®æ—¶æ€§è¦æ±‚é«˜ï¼‹äº’åŠ¨æ€§å¼º</td>
</tr>
</tbody>
</table>
<h2 id="äºŒã€ç›´æ’­å½¢å¼"><a href="#äºŒã€ç›´æ’­å½¢å¼" class="headerlink" title="äºŒã€ç›´æ’­å½¢å¼"></a>äºŒã€ç›´æ’­å½¢å¼</h2><p><img src="//misc.aotu.io/pfan123/sopcast/1.png" alt="ç›´æ’­å½¢å¼"></p>
<p>ç›®å‰ç›´æ’­å±•ç¤ºå½¢å¼ï¼Œé€šå¸¸ä»¥YYç›´æ’­ã€æ˜ å®¢ç›´æ’­è¿™ç§é¡µé¢å±…å¤šï¼Œå¯ä»¥çœ‹åˆ°å…¶ç»“æ„å¯ä»¥åˆ†æˆä¸‰å±‚ï¼šâ‘  èƒŒæ™¯è§†é¢‘å±‚ â‘¡ å…³æ³¨ã€è¯„è®ºæ¨¡å— â‘¢ ç‚¹èµåŠ¨ç”»</p>
<p>è€Œç°è¡ŒH5ç±»ä¼¼ç›´æ’­é¡µé¢ï¼Œå®ç°æŠ€æœ¯éš¾ç‚¹ä¸å¤§ï¼Œå…¶å¯ä»¥é€šè¿‡å®ç°æ–¹å¼åˆ†ä¸ºï¼šâ‘  åº•éƒ¨è§†é¢‘èƒŒæ™¯ä½¿ç”¨videoè§†é¢‘æ ‡ç­¾å®ç°æ’­æ”¾ â‘¡ å…³æ³¨ã€è¯„è®ºæ¨¡å—åˆ©ç”¨ WebScoket æ¥å®æ—¶å‘é€å’Œæ¥æ”¶æ–°çš„æ¶ˆæ¯é€šè¿‡DOM å’Œ CSS3 å®ç°  â‘¢ ç‚¹èµåˆ©ç”¨ CSS3 åŠ¨ç”»</p>
<p>äº†è§£å®Œç›´æ’­å½¢å¼ä¹‹åï¼Œæ¥ä¸‹æ¥æ•´ä½“äº†è§£ç›´æ’­æµç¨‹ã€‚</p>
<h2 id="ä¸‰ã€ç›´æ’­æ•´ä½“æµç¨‹"><a href="#ä¸‰ã€ç›´æ’­æ•´ä½“æµç¨‹" class="headerlink" title="ä¸‰ã€ç›´æ’­æ•´ä½“æµç¨‹"></a>ä¸‰ã€ç›´æ’­æ•´ä½“æµç¨‹</h2><p>ç›´æ’­æ•´ä½“æµç¨‹å¤§è‡´å¯åˆ†ä¸ºï¼š</p>
<ul>
<li><p>è§†é¢‘é‡‡é›†ç«¯ï¼šå¯ä»¥æ˜¯ç”µè„‘ä¸Šçš„éŸ³è§†é¢‘è¾“å…¥è®¾å¤‡ã€æˆ–æ‰‹æœºç«¯çš„æ‘„åƒå¤´ã€æˆ–éº¦å…‹é£ï¼Œç›®å‰ä»¥ç§»åŠ¨ç«¯æ‰‹æœºè§†é¢‘ä¸ºä¸»ã€‚</p>
</li>
<li><p>ç›´æ’­æµè§†é¢‘æœåŠ¡ç«¯ï¼šä¸€å°NginxæœåŠ¡å™¨ï¼Œé‡‡é›†è§†é¢‘å½•åˆ¶ç«¯ä¼ è¾“çš„è§†é¢‘æµ(H264/ACCç¼–ç )ï¼Œç”±æœåŠ¡å™¨ç«¯è¿›è¡Œè§£æç¼–ç ï¼Œæ¨é€RTMP/HLSæ ¼å¼è§†é¢‘æµè‡³è§†é¢‘æ’­æ”¾ç«¯ã€‚</p>
</li>
<li><p>è§†é¢‘æ’­æ”¾ç«¯ï¼šå¯ä»¥æ˜¯ç”µè„‘ä¸Šçš„æ’­æ”¾å™¨ï¼ˆQuickTime Playerã€VLCï¼‰ï¼Œæ‰‹æœºç«¯çš„nativeæ’­æ”¾å™¨ï¼Œè¿˜æœ‰å°±æ˜¯ H5 çš„videoæ ‡ç­¾ç­‰ï¼Œç›®å‰è¿˜æ˜¯ä»¥æ‰‹æœºç«¯çš„nativeæ’­æ”¾å™¨ä¸ºä¸»ã€‚</p>
</li>
</ul>
<p><img src="//misc.aotu.io/pfan123/sopcast/2.png" alt="ç›´æ’­æ•´ä½“æµç¨‹"></p>
<h2 id="å››ã€H5-å½•åˆ¶è§†é¢‘"><a href="#å››ã€H5-å½•åˆ¶è§†é¢‘" class="headerlink" title="å››ã€H5 å½•åˆ¶è§†é¢‘"></a>å››ã€H5 å½•åˆ¶è§†é¢‘</h2><p>å¯¹äºH5è§†é¢‘å½•åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨å¼ºå¤§çš„ webRTC ï¼ˆWeb Real-Time Communicationï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒç½‘é¡µæµè§ˆå™¨è¿›è¡Œå®æ—¶è¯­éŸ³å¯¹è¯æˆ–è§†é¢‘å¯¹è¯çš„æŠ€æœ¯ï¼Œç¼ºç‚¹æ˜¯åªåœ¨ PC çš„ Chrome ä¸Šæ”¯æŒè¾ƒå¥½ï¼Œç§»åŠ¨ç«¯æ”¯æŒä¸å¤ªç†æƒ³ã€‚</p>
<h3 id="1-ä½¿ç”¨-webRTC-å½•åˆ¶è§†é¢‘åŸºæœ¬æµç¨‹"><a href="#1-ä½¿ç”¨-webRTC-å½•åˆ¶è§†é¢‘åŸºæœ¬æµç¨‹" class="headerlink" title="1. ä½¿ç”¨ webRTC å½•åˆ¶è§†é¢‘åŸºæœ¬æµç¨‹"></a>1. ä½¿ç”¨ webRTC å½•åˆ¶è§†é¢‘åŸºæœ¬æµç¨‹</h3><p>â‘  è°ƒç”¨ <code>window.navigator.webkitGetUserMedia()</code> è·å–ç”¨æˆ·çš„PCæ‘„åƒå¤´è§†é¢‘æ•°æ®ã€‚<br>â‘¡ å°†è·å–åˆ°è§†é¢‘æµæ•°æ®è½¬æ¢æˆ <code>window.webkitRTCPeerConnection</code> (ä¸€ç§è§†é¢‘æµæ•°æ®æ ¼å¼)ã€‚<br>â‘¢ åˆ©ç”¨ <code>WebScoket</code> å°†è§†é¢‘æµæ•°æ®ä¼ è¾“åˆ°æœåŠ¡ç«¯ã€‚</p>
<p><code>æ³¨æ„</code>ï¼šè™½ç„¶Googleä¸€ç›´åœ¨æ¨WebRTCï¼Œç›®å‰å·²æœ‰ä¸å°‘æˆå‹çš„äº§å“å‡ºç°ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç§»åŠ¨ç«¯çš„æµè§ˆå™¨è¿˜ä¸æ”¯æŒ webRTCï¼ˆæœ€æ–°iOS 10.0ä¹Ÿä¸æ”¯æŒï¼‰ï¼Œæ‰€ä»¥çœŸæ­£çš„è§†é¢‘å½•åˆ¶è¿˜æ˜¯è¦é å®¢æˆ·ç«¯ï¼ˆiOS,Androidï¼‰æ¥å®ç°,æ•ˆæœä¼šå¥½ä¸€äº›ã€‚<br><img src="//misc.aotu.io/pfan123/sopcast/3.png" alt="WebRTCæ”¯æŒåº¦"></p>
<h3 id="2-iOSåŸç”Ÿåº”ç”¨è°ƒç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘æµç¨‹"><a href="#2-iOSåŸç”Ÿåº”ç”¨è°ƒç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘æµç¨‹" class="headerlink" title="2. iOSåŸç”Ÿåº”ç”¨è°ƒç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘æµç¨‹"></a>2. iOSåŸç”Ÿåº”ç”¨è°ƒç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘æµç¨‹</h3><p>â‘  éŸ³è§†é¢‘çš„é‡‡é›†ï¼Œåˆ©ç”¨AVCaptureSessionå’ŒAVCaptureDeviceå¯ä»¥é‡‡é›†åˆ°åŸå§‹çš„éŸ³è§†é¢‘æ•°æ®æµã€‚<br>â‘¡ å¯¹è§†é¢‘è¿›è¡ŒH264ç¼–ç ï¼Œå¯¹éŸ³é¢‘è¿›è¡ŒAACç¼–ç ï¼Œåœ¨iOSä¸­åˆ†åˆ«æœ‰å·²ç»å°è£…å¥½çš„ç¼–ç åº“ï¼ˆ<a href="https://github.com/kewlbear/x264-ios" target="_blank" rel="external">x264ç¼–ç </a>ã€<a href="https://github.com/fflydev/faac-ios-build" target="_blank" rel="external">faacç¼–ç </a>ã€<a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" target="_blank" rel="external">ffmpegç¼–ç </a>ï¼‰æ¥å®ç°å¯¹éŸ³è§†é¢‘çš„ç¼–ç ã€‚<br>â‘¢ å¯¹ç¼–ç åçš„éŸ³ã€è§†é¢‘æ•°æ®è¿›è¡Œç»„è£…å°åŒ…ã€‚<br>â‘£ å»ºç«‹RTMPè¿æ¥å¹¶ä¸Šæ¨åˆ°æœåŠ¡ç«¯ã€‚</p>
<p><img src="//misc.aotu.io/pfan123/sopcast/4.png" alt="è§†é¢‘æµç¨‹"></p>
<h2 id="äº”ã€æ­å»ºNginx-Rtmpç›´æ’­æµæœåŠ¡"><a href="#äº”ã€æ­å»ºNginx-Rtmpç›´æ’­æµæœåŠ¡" class="headerlink" title="äº”ã€æ­å»ºNginx+Rtmpç›´æ’­æµæœåŠ¡"></a>äº”ã€æ­å»ºNginx+Rtmpç›´æ’­æµæœåŠ¡</h2><h3 id="1-å®‰è£…nginxã€nginx-rtmp-module"><a href="#1-å®‰è£…nginxã€nginx-rtmp-module" class="headerlink" title="1. å®‰è£…nginxã€nginx-rtmp-module"></a>1. å®‰è£…nginxã€nginx-rtmp-module</h3><p>â‘  å…ˆclone nginxé¡¹ç›®åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span>tap homebrew/nginx</div></pre></td></tr></table></figure>
<p>â‘¡ æ‰§è¡Œå®‰è£…<code>nginx-rtmp-module</code></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install nginx-full --<span class="keyword">with</span>-rtmp-<span class="class"><span class="keyword">module</span></span></div></pre></td></tr></table></figure>
<h3 id="2-nginx-confé…ç½®æ–‡ä»¶ï¼Œé…ç½®RTMPã€HLS"><a href="#2-nginx-confé…ç½®æ–‡ä»¶ï¼Œé…ç½®RTMPã€HLS" class="headerlink" title="2. nginx.confé…ç½®æ–‡ä»¶ï¼Œé…ç½®RTMPã€HLS"></a>2. nginx.confé…ç½®æ–‡ä»¶ï¼Œé…ç½®RTMPã€HLS</h3><p>æŸ¥æ‰¾åˆ°nginx.confé…ç½®æ–‡ä»¶ï¼ˆè·¯å¾„/usr/local/etc/nginx/nginx.confï¼‰ï¼Œé…ç½®RTMPã€HLSã€‚</p>
<p>â‘  åœ¨httpèŠ‚ç‚¹ä¹‹å‰æ·»åŠ  rtmp çš„é…ç½®å†…å®¹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="section">rtmp</span> &#123;</div><div class="line">  <span class="section">server</span> &#123;</div><div class="line">     <span class="comment">#ç›‘å¬çš„ç«¯å£</span></div><div class="line">      <span class="attribute">listen</span> <span class="number">1935</span>;</div><div class="line">      <span class="comment"># RTMP ç›´æ’­æµé…ç½®</span></div><div class="line">      <span class="attribute">application</span> rtmplive &#123;</div><div class="line">          <span class="attribute">live</span> <span class="literal">on</span>;</div><div class="line">	      <span class="comment">#ä¸º rtmp å¼•æ“è®¾ç½®æœ€å¤§è¿æ¥æ•°ã€‚é»˜è®¤ä¸º off</span></div><div class="line">	      <span class="attribute">max_connections</span> <span class="number">1024</span>;</div><div class="line">       &#125;</div><div class="line">	  <span class="comment"># HLS ç›´æ’­æµé…ç½®</span></div><div class="line">      <span class="attribute">application</span> hls&#123;</div><div class="line">          <span class="attribute">live</span> <span class="literal">on</span>;</div><div class="line">          <span class="attribute">hls</span> <span class="literal">on</span>;</div><div class="line">          <span class="attribute">hls_path</span> /usr/local/var/www/hls;</div><div class="line">          <span class="attribute">hls_fragment</span> <span class="number">1s</span>;</div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>â‘¡ åœ¨httpä¸­æ·»åŠ  hls çš„é…ç½®</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">location /<span class="class">hls </span>&#123;  </div><div class="line">       <span class="meta"># Serve HLS fragments  </span></div><div class="line">       <span class="class">types </span>&#123;  </div><div class="line">           application/vnd.apple.mpegurl m3u8;  </div><div class="line">           video/mp2t ts;  </div><div class="line">       &#125;  </div><div class="line">       root <span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/var/</span>www;  </div><div class="line">       <span class="meta">#add_header Cache-Controll no-cache;</span></div><div class="line">       expires <span class="number">-1</span>;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h3 id="3-é‡å¯nginxæœåŠ¡"><a href="#3-é‡å¯nginxæœåŠ¡" class="headerlink" title="3. é‡å¯nginxæœåŠ¡"></a>3. é‡å¯nginxæœåŠ¡</h3><p>é‡å¯nginxæœåŠ¡ï¼Œæµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a>ï¼Œæ˜¯å¦å‡ºç°æ¬¢è¿ç•Œé¢ç¡®å®šnginxé‡å¯æˆåŠŸã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nginx <span class="_">-s</span> reload</div></pre></td></tr></table></figure></p>
<h2 id="å…­ã€ç›´æ’­æµè½¬æ¢æ ¼å¼ã€ç¼–ç æ¨æµ"><a href="#å…­ã€ç›´æ’­æµè½¬æ¢æ ¼å¼ã€ç¼–ç æ¨æµ" class="headerlink" title="å…­ã€ç›´æ’­æµè½¬æ¢æ ¼å¼ã€ç¼–ç æ¨æµ"></a>å…­ã€ç›´æ’­æµè½¬æ¢æ ¼å¼ã€ç¼–ç æ¨æµ</h2><p>å½“æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°é‡‡é›†è§†é¢‘å½•åˆ¶ç«¯ä¼ è¾“è¿‡æ¥çš„è§†é¢‘æµæ—¶ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œè§£æç¼–ç ï¼Œæ¨é€RTMP/HLSæ ¼å¼è§†é¢‘æµè‡³è§†é¢‘æ’­æ”¾ç«¯ã€‚é€šå¸¸ä½¿ç”¨çš„å¸¸è§ç¼–ç åº“æ–¹æ¡ˆï¼Œå¦‚<a href="https://github.com/kewlbear/x264-ios" target="_blank" rel="external">x264ç¼–ç </a>ã€<a href="https://github.com/fflydev/faac-ios-build" target="_blank" rel="external">faacç¼–ç </a>ã€<a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" target="_blank" rel="external">ffmpegç¼–ç </a>ç­‰ã€‚</p>
<p>é‰´äº FFmpeg å·¥å…·é›†åˆäº†å¤šç§éŸ³é¢‘ã€è§†é¢‘æ ¼å¼ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜å…ˆé€‰ç”¨FFmpegè¿›è¡Œè½¬æ¢æ ¼å¼ã€ç¼–ç æ¨æµã€‚</p>
<p>1.å®‰è£… FFmpeg å·¥å…·<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span><span class="keyword">install </span>ffmpeg</div></pre></td></tr></table></figure></p>
<p>2.æ¨æµMP4æ–‡ä»¶</p>
<p>è§†é¢‘æ–‡ä»¶åœ°å€ï¼š/Users/gao/Desktop/video/test.mp4<br>æ¨æµæ‹‰æµåœ°å€ï¼šrtmp://localhost:1935/rtmplive/homeï¼Œrtmp://localhost:1935/rtmplive/home</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//RTMP åè®®æµ</span></div><div class="line">ffmpeg -re -<span class="selector-tag">i</span> /Users/gao/Desktop/video/test<span class="selector-class">.mp4</span> -vcodec libx264 -acodec aac -f flv rtmp:<span class="comment">//10.14.221.17:1935/rtmplive/home</span></div><div class="line"></div><div class="line"><span class="comment">//HLS åè®®æµ</span></div><div class="line">ffmpeg -re -<span class="selector-tag">i</span> /Users/gao/Desktop/video/test<span class="selector-class">.mp4</span> -vcodec libx264 -vprofile baseline -acodec aac -ar <span class="number">44100</span> -strict -<span class="number">2</span> -ac <span class="number">1</span> -f flv  -<span class="selector-tag">q</span> <span class="number">10</span> rtmp:<span class="comment">//10.14.221.17:1935/hls/test</span></div></pre></td></tr></table></figure>
<p><code>æ³¨æ„</code>ï¼š å½“æˆ‘ä»¬è¿›è¡Œæ¨æµä¹‹åï¼Œå¯ä»¥å®‰è£…<a href="http://www.pc6.com/mac/112121.html" target="_blank" rel="external">VLC</a>ã€ffplayï¼ˆæ”¯æŒrtmpåè®®çš„è§†é¢‘æ’­æ”¾å™¨ï¼‰æœ¬åœ°æ‹‰æµè¿›è¡Œæ¼”ç¤º</p>
<p>3.FFmpegæ¨æµå‘½ä»¤</p>
<p>â‘  è§†é¢‘æ–‡ä»¶è¿›è¡Œç›´æ’­</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ffmpeg -re -<span class="selector-tag">i</span> /Users/gao/Desktop/video/test<span class="selector-class">.mp4</span> -vcodec libx264 -vprofile baseline -acodec aac -ar <span class="number">44100</span> -strict -<span class="number">2</span> -ac <span class="number">1</span> -f flv  -<span class="selector-tag">q</span> <span class="number">10</span> rtmp:<span class="comment">//192.168.1.101:1935/hls/test</span></div><div class="line">ffmpeg -re -<span class="selector-tag">i</span> /Users/gao/Desktop/video/test<span class="selector-class">.mp4</span> -vcodec libx264 -vprofile baseline -acodec aac -ar <span class="number">44100</span> -strict -<span class="number">2</span> -ac <span class="number">1</span> -f flv  -<span class="selector-tag">q</span> <span class="number">10</span> rtmp:<span class="comment">//10.14.221.17:1935/hls/test</span></div></pre></td></tr></table></figure>
<p>â‘¡ æ¨æµæ‘„åƒå¤´ï¼‹æ¡Œé¢+éº¦å…‹é£å½•åˆ¶è¿›è¡Œç›´æ’­</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -f avfoundation -framerate <span class="number">30</span> -<span class="selector-tag">i</span> <span class="string">"1:0"</span> \-f avfoundation -framerate <span class="number">30</span> -video_size <span class="number">640</span>x480 -<span class="selector-tag">i</span> <span class="string">"0"</span> \-c:v libx264 -preset ultrafast \-filter_complex <span class="string">'overlay=main_w-overlay_w-10:main_h-overlay_h-10'</span> -acodec libmp3lame -ar <span class="number">44100</span> -ac <span class="number">1</span>  -f flv rtmp:<span class="comment">//192.168.1.101:1935/hls/test</span></div></pre></td></tr></table></figure>
<p>æ›´å¤šå‘½ä»¤ï¼Œè¯·å‚è€ƒï¼š<br><a href="http://blog.csdn.net/leixiaohua1020/article/details/12029543" target="_blank" rel="external">FFmpegå¤„ç†RTMPæµåª’ä½“çš„å‘½ä»¤å¤§å…¨</a><br><a href="http://www.jianshu.com/p/d541b317f71c" target="_blank" rel="external"> FFmpegå¸¸ç”¨æ¨æµå‘½ä»¤</a></p>
<h2 id="ä¸ƒã€H5-ç›´æ’­è§†é¢‘æ’­æ”¾"><a href="#ä¸ƒã€H5-ç›´æ’­è§†é¢‘æ’­æ”¾" class="headerlink" title="ä¸ƒã€H5 ç›´æ’­è§†é¢‘æ’­æ”¾"></a>ä¸ƒã€H5 ç›´æ’­è§†é¢‘æ’­æ”¾</h2><p>ç§»åŠ¨ç«¯iOSå’Œ Android éƒ½å¤©ç„¶æ”¯æŒHLSåè®®ï¼Œåšå¥½è§†é¢‘é‡‡é›†ç«¯ã€è§†é¢‘æµæ¨æµæœåŠ¡ä¹‹åï¼Œä¾¿å¯ä»¥ç›´æ¥åœ¨H5é¡µé¢é…ç½® video æ ‡ç­¾æ’­æ”¾ç›´æ’­è§†é¢‘ã€‚</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">video</span> controls preload=<span class="string">"auto"</span>  autoplay=<span class="string">"autoplay"</span> loop=<span class="string">"loop"</span> webkit-playsinline&gt;    </div><div class="line">    &lt;source src=<span class="string">"http://10.14.221.8/hls/test.m3u8"</span> type=<span class="string">"application/vnd.apple.mpegurl"</span> /&gt;  </div><div class="line">    &lt;<span class="selector-tag">p</span> class=<span class="string">"warning"</span>&gt;Your browser does not support HTML5 <span class="selector-tag">video</span>.&lt;/p&gt;  </div><div class="line">&lt;/video&gt;</div></pre></td></tr></table></figure>
<p><code>ps</code>ï¼šâ‘  videoæ ‡ç­¾æ·»åŠ <code>webkit-playsinline</code>å±æ€§ï¼ˆiOSæ”¯æŒï¼‰æ˜¯ä¿è¯è§†é¢‘åœ¨ç½‘é¡µä¸­å†…åµŒæ’­æ”¾ã€‚<br>â‘¡ é’ˆå¯¹å¾®ä¿¡æµè§ˆå™¨ï¼Œvideoæ ‡ç­¾å±‚çº§æœ€é«˜çš„é—®é¢˜ï¼Œéœ€è¦ç”³è¯·æ·»åŠ ç™½åå•ï¼Œè¯·å‚ç…§ <a href="http://bbs.mb.qq.com/thread-1242581-1-1.html?ptlang=2052ã€‚" target="_blank" rel="external">http://bbs.mb.qq.com/thread-1242581-1-1.html?ptlang=2052ã€‚</a></p>
<h2 id="å…«ã€æ€»ç»“"><a href="#å…«ã€æ€»ç»“" class="headerlink" title="å…«ã€æ€»ç»“"></a>å…«ã€æ€»ç»“</h2><p>æœ¬æ–‡ä»è§†é¢‘é‡‡é›†ä¸Šä¼ ï¼ŒæœåŠ¡å™¨å¤„ç†è§†é¢‘æ¨æµï¼Œä»¥åŠH5é¡µé¢æ’­æ”¾ç›´æ’­è§†é¢‘ä¸€æ•´å¥—æµç¨‹,å…·ä½“é˜è¿°äº†ç›´æ’­å®ç°åŸç†ï¼Œå®ç°è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–é—®é¢˜ã€‚</p>
<p>â‘  H5 HLS é™åˆ¶å¿…é¡»æ˜¯H264+AACç¼–ç ã€‚</p>
<p>â‘¡ H5 HLS æ’­æ”¾å¡é¡¿é—®é¢˜ï¼Œserver ç«¯å¯ä»¥åšå¥½åˆ†ç‰‡ç­–ç•¥ï¼Œå°† ts æ–‡ä»¶æ”¾åœ¨ CDN ä¸Šï¼Œå‰ç«¯å¯å°½é‡åšåˆ° DNS ç¼“å­˜ç­‰ã€‚</p>
<p>â‘¢ H5 ç›´æ’­ä¸ºäº†è¾¾åˆ°æ›´å¥½çš„å®æ—¶äº’åŠ¨ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨RTMPåè®®ï¼Œé€šè¿‡<code>video.js</code>å®ç°æ’­æ”¾ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://www.zhihu.com/question/42162310" target="_blank" rel="external">å¦‚ä½•æ­å»ºä¸€ä¸ªå®Œæ•´çš„è§†é¢‘ç›´æ’­ç³»ç»Ÿï¼Ÿ</a></li>
<li><a href="http://www.haomou.net/2014/08/04/2014_Html5_canvas_video/" target="_blank" rel="external">WebRTCç›¸å…³çš„canvasä¸video</a></li>
<li><a href="https://segmentfault.com/a/1190000000392586" target="_blank" rel="external">ä½¿ç”¨ WebSockets è¿›è¡Œ HTML5 è§†é¢‘ç›´æ’­</a></li>
<li><a href="http://blog.ucloud.cn/archives/694" target="_blank" rel="external">å…³äºç›´æ’­ï¼Œæ‰€æœ‰çš„æŠ€æœ¯ç»†èŠ‚éƒ½åœ¨è¿™é‡Œäº†ï¼ˆä¸€ï¼‰</a></li>
<li><a href="http://blog.ucloud.cn/archives/699" target="_blank" rel="external">å…³äºç›´æ’­ï¼Œæ‰€æœ‰çš„æŠ€æœ¯ç»†èŠ‚éƒ½åœ¨è¿™é‡Œäº†ï¼ˆäºŒï¼‰</a></li>
<li><a href="http://blog.ucloud.cn/archives/760" target="_blank" rel="external">å…³äºç›´æ’­ï¼Œæ‰€æœ‰çš„æŠ€æœ¯ç»†èŠ‚éƒ½åœ¨è¿™é‡Œäº†ï¼ˆä¸‰ï¼‰</a></li>
<li><a href="https://github.com/phoboslab/jsmpeg" target="_blank" rel="external">JSè§£ç é¡¹ç›®jsmpeg</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å‰ä¸ä¹…æŠ½ç©ºå¯¹ç›®å‰æ¯”è¾ƒç«çš„è§†é¢‘ç›´æ’­ï¼Œåšäº†ä¸‹ç ”ç©¶ä¸æ¢ç´¢ï¼Œäº†è§£å…¶æ•´ä½“å®ç°æµç¨‹ï¼Œä»¥åŠæ¢è®¨ç§»åŠ¨ç«¯HTML5ç›´æ’­å¯è¡Œ
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="H5" scheme="https://aotu.io/tags/H5/"/>
    
      <category term="H5 è§†é¢‘ç›´æ’­ video" scheme="https://aotu.io/tags/H5-%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD-video/"/>
    
      <category term="HLSã€RTMPåè®®" scheme="https://aotu.io/tags/HLS%E3%80%81RTMP%E5%8D%8F%E8%AE%AE/"/>
    
  </entry>
  
  <entry>
    <title>A-Frame WebVRè¯•ç©æŠ¥å‘Š</title>
    <link href="https://aotu.io/notes/2016/10/08/aframe/"/>
    <id>https://aotu.io/notes/2016/10/08/aframe/</id>
    <published>2016-10-08T03:05:14.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆå«çœŸï¼Ÿä½ æ€æ ·ç»™çœŸä¸‹å®šä¹‰ï¼Œå¦‚æœä½ è¯´çœŸå°±æ˜¯ä½ èƒ½æ„Ÿè§‰åˆ°çš„ä¸œè¥¿ï¼Œä½ èƒ½é—»åˆ°çš„æ°”å‘³ï¼Œä½ èƒ½å°åˆ°çš„å‘³é“ï¼Œé‚£ä¹ˆè¿™ä¸ªçœŸåªæ˜¯ä½ å¤§è„‘ä½œå‡ºååº”çš„ç”µå­ä¿¡å·ã€‚ â€”â€” ã€Šé»‘å®¢å¸å›½ã€‹</p>
<h3 id="å…³äºVRæŠ€æœ¯"><a href="#å…³äºVRæŠ€æœ¯" class="headerlink" title="å…³äºVRæŠ€æœ¯"></a>å…³äºVRæŠ€æœ¯</h3><p>VRå³Virtual Realityè™šæ‹Ÿç°å®ï¼Œå¤§ç™½è¯æ¥è®²ï¼Œå°±æ˜¯åˆ©ç”¨ç”µè„‘åˆ›é€ ä¸€ä¸ªå…¨æ–°çš„è™šæ‹Ÿä¸–ç•Œï¼Œé€šè¿‡æ¬ºéª—ä½ çš„æ„Ÿå®˜ï¼ˆç›®å‰æ›´å¤šæ˜¯è§†è§‰ä¸Šï¼‰ï¼Œè®©ä½ ç½®èº«äºä¸€ä¸ªä¸ç°å®ç›¸ä¼¼åˆå®Œå…¨è™šæ‹Ÿçš„ä¸–ç•Œä¸­ï¼Œè¿™å°±åƒæ˜¯åœ¨ã€Šé»‘å®¢å¸å›½ã€‹ä¸­ï¼Œä¸»äººå…¬å°¼å¥¥å¯¹è¿™ä¸ªçœ‹ä¼¼çœŸå®çš„ä¸–ç•Œäº§ç”Ÿæ€€ç–‘ï¼Œåœ¨å´”å¦®è’‚çš„å¸®åŠ©ä¸‹ï¼Œæœ€ç»ˆä¸å¢¨è²æ–¯è§é¢ï¼Œå¹¶åƒä¸‹äº†è±¡å¾çœŸç›¸çš„çº¢è‰²è¯ä¸¸ï¼Œåœ¨çŸ©é˜µé†’æ¥åçš„å°¼å¥¥å‘ç°ï¼ŒåŸæ¥ä»–ä¸€ç›´ç”Ÿæ´»åœ¨çŸ©é˜µæ‰€åˆ›é€ çš„è™šæ‹Ÿä¸–ç•Œä¸­ã€‚</p>
<h3 id="ä¸€åˆ†é’ŸVRç®€å²"><a href="#ä¸€åˆ†é’ŸVRç®€å²" class="headerlink" title="ä¸€åˆ†é’ŸVRç®€å²"></a>ä¸€åˆ†é’ŸVRç®€å²</h3><p><strong>ã€ŠPygmalionâ€™s Spectaclesã€‹ï¼ˆã€Šçš®æ ¼é©¬åˆ©ç¿çš„çœ¼é•œã€‹ï¼‰</strong></p>
<p>è™šæ‹Ÿç°å®è¿™ä¸ªæ¦‚å¿µæœ€æ—©æ¥è‡ªäºStanley G. Weinbaumåœ¨1935å¹´å‘è¡¨çš„ç§‘å¹»å°è¯´ã€Šçš®æ ¼é©¬åˆ©ç¿çš„çœ¼é•œã€‹ï¼Œè¢«è®¤ä¸ºæ˜¯æ¢è®¨è™šæ‹Ÿç°å®çš„ç¬¬ä¸€éƒ¨ç§‘å¹»ä½œå“ï¼Œç®€çŸ­çš„æ•…äº‹ä¸­è¯¦ç»†çš„æè¿°äº†åŒ…æ‹¬å—…è§‰ã€è§¦è§‰å’Œå…¨æ¯çœ¼é•œä¸ºåŸºç¡€çš„è™šæ‹Ÿç°å®ç³»ç»Ÿã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_PygmalionsSpectacles.jpg" alt="Pygmalion&#39;s Spectacles"></p>
<p><strong>Sensorama</strong></p>
<p>VRçš„é›å½¢ï¼Œè¦è¿½æº¯åˆ°1962å¹´è¢«ç§°ä¸ºè™šæ‹Ÿç°å®ä¹‹çˆ¶Morton Heiligå‘æ˜çš„Sensoramaï¼Œå®ƒçš„å¤–è§‚å°±åƒæ˜¯ä¸€ä¸ªç¬¨é‡çš„è¡—æœºç›’å­ã€‚<br>Morton Heiligå‘æ˜Sensoramaçš„åˆè¡·æ˜¯ä¸ºäº†æ‰“é€ æœªæ¥çš„ç”µå½±ï¼Œåœ¨å½“æ—¶é‚£ä¸ªå¹´ä»£æ‹æ‘„3Dç”µå½±å¹¶ä¸å®¹æ˜“ï¼ŒMorton Heiligä¸ºäº†é…åˆæ‹æ‘„ï¼Œåˆå‘æ˜äº†3Dæ‘„åƒæœºå’ŒæŠ•å½±ä»ªï¼Œä¸ºSensoramaæ‹æ‘„äº†äº”éƒ¨çŸ­ç‰‡ï¼Œä»¥ç›´å‡æœºã€å¡ä¸è½¦ã€è‡ªè¡Œè½¦å’Œæ‘©æ‰˜è½¦ç­‰éª‘è¡Œä½“éªŒä¸ºä¸»ï¼ŒSensoramaæ’­æ”¾åœ¨å¸ƒé²å…‹æ—éª‘æ‘©æ‰˜è½¦çš„çŸ­ç‰‡æ—¶èƒ½å¤Ÿæä¾›çœŸå®çš„3Då½±åƒï¼Œæ„Ÿå—è¡Œè½¦æ—¶çš„é¢ ç°¸ï¼Œå‘¨å›´ç¯å¢ƒçš„ç«‹ä½“å£°ã€è¿é¢å¹æ¥çš„é£å’Œæ°”å‘³ï¼Œè¿™åœ¨å½“æ—¶å¤§éƒ¨åˆ†äººéƒ½è¿˜åœ¨ä½¿ç”¨é»‘ç™½ç”µè§†çš„æ—¶ä»£ï¼Œæ˜¯å¤šä¹ˆä»¤äººéœ‡æ’¼çš„ï¼Œé—æ†¾çš„æ˜¯è¯¥é¡¹ç›®æœªèƒ½è·å¾—èµ„é‡‘çš„æ”¯æŒï¼Œå› æ­¤Sensoramaçš„ç ”å‘å·¥ä½œæ­¢æ­¥ä¸å‰ï¼Œæœ€ç»ˆå›çœ‹å†å²ï¼Œå…¶å®å®ƒæ›´åƒæ˜¯ç°ä»£çš„4Dç”µå½±ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_Sensorama.jpg" alt="Sensorama"></p>
<p><strong>The Sword of Damoclesï¼ˆè¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘ï¼‰</strong></p>
<p>1968å¹´ï¼ŒIvan Edward Sutherlandå’Œä»–çš„å­¦ç”ŸBob Sproullåœ¨éº»çœç†å·¥å­¦é™¢çš„æ—è‚¯å®éªŒå®¤åˆ›é€ äº†ç¬¬ä¸€ä¸ªè™šæ‹Ÿç°å®åŠå¢å¼ºç°å®å¤´æˆ´å¼æ˜¾ç¤ºå™¨ç³»ç»Ÿï¼Œç¬¬ä¸€ä¸ªæ˜¾ç¤ºåº”ç”¨æ˜¯æ‚¬æµ®åœ¨ç©ºä¸­çš„ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œè¿™æ¬¾å¤´æˆ´æ˜¾ç¤ºå™¨å› ä¸ºè¦è·Ÿè¸ªç”¨æˆ·çš„è§†çº¿ï¼Œéœ€è¦é€šè¿‡æœºæ¢°è‡‚ç§»åŠ¨ï¼Œå› æ­¤è®¾å¤‡éå¸¸ç¬¨é‡ï¼Œåªèƒ½æŒ‚åœ¨å¤©èŠ±æ¿ä¸Šå‡è½»é‡é‡ä½¿ç”¨ï¼Œè¢«æˆç§°ä¸ºâ€œè¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘â€ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_TheSwordofDamocles.jpg" alt="The Sword of Damocles"></p>
<p><strong>Sega VRï¼ˆä¸–å˜‰VRï¼‰</strong><br>1991å¹´ä¸–å˜‰å®£å¸ƒäº†Sega VRï¼Œå®šä»·ä¸º200ç¾å…ƒï¼Œä»1991å¹´åˆ°1994å¹´ï¼Œä¸–å˜‰å°±åœ¨èµ·VRè®¾å¤‡ä¸Šä¸æ–­å®£ä¼ ï¼Œå¹¶ä¸”åœ¨1993å¹´çš„å¤å­£CESå±•ä¼šä¸Šæä¾›VRçš„è¯•ç©ï¼Œå°±åœ¨å¤§å®¶ä¸‡åˆ†æœŸå¾…ä¹‹æ—¶ï¼Œ1994å¹´ä¸–å˜‰è¡¨ç¤ºåœæ­¢è¯¥é¡¹ç›®ï¼Œç»™å‡ºçš„ç†ç”±æ˜¯è™šæ‹Ÿç°å®æ•ˆæœè¿‡äºé€¼çœŸï¼ŒåŒæ—¶ä½©æˆ´è€³æœºçš„ç”¨æˆ·æœ‰å¯èƒ½ç§»åŠ¨å’Œä¼¤å®³åˆ°è‡ªå·±ï¼Œå½“ç„¶æ˜ç™½äººéƒ½çŸ¥é“è¿™æ˜¯ä¸ªå€Ÿå£ï¼ŒèŠ±äº†å¦‚æ­¤å¤§åŠ›æ°”çš„æŠ•å…¥å’Œæ¢ç´¢æœ€ç»ˆå´æ”¾å¼ƒäº†ï¼ŒåŸå› æˆ–è®¸æ˜¯å› ä¸ºSEGA VRçš„æ¸¸æˆå’Œè½¯ä»¶å¤ªå°‘äº†ï¼Œåœ¨å¤å­£CESå±•ä¼šä¸Šä¹Ÿåªæ˜¯å…¬å¸ƒäº†å±ˆæŒ‡å¯æ•°çš„4æ¬¾æ¸¸æˆï¼šã€ŠNuclear Rushã€‹ã€ã€ŠIron Hammerã€‹ã€ã€ŠMatrix Runnerã€‹ã€ã€ŠOutlaw Racingã€‹ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_SegaVR.jpg" alt="Sega VR"></p>
<p><strong>Virtual Boy</strong><br>1995å¹´ï¼Œä»»å¤©å ‚å‘å¸ƒäº†Virtual Boyï¼ŒVirtual Boyé‡‡ç”¨äºŒæç®¡å’Œè§†å·®æŠ€æœ¯åˆ›é€ å‡ºæ¸¸æˆçš„3Dæ•ˆæœï¼Œæ˜¯ä»»å¤©å ‚åœ¨N64ä¸Šå¸‚ä¹‹å‰ç”¨æ¥å–ä»£Game Boyçš„32ä½ä¾¿æºæ¸¸æˆæœºï¼Œç”±è®¾è®¡Game Boyçš„æ¨ªäº•å†›å¹³ä¸»å¯¼ï¼Œæœ€ç»ˆå‘å”®22ä¸ªæ¸¸æˆï¼Œå…¨çƒé”€é‡77ä¸‡å°ï¼Œé€ æˆå…¶å¤±è´¥çš„åŸå› å¾ˆå¤§ç¨‹åº¦æ˜¯å› ä¸ºVirtual Boyåªèƒ½æä¾›çº¢é»‘ä¸¤è‰²çš„æ¸¸æˆç”»é¢ï¼Œ760å…‹çš„é‡é‡éœ€è¦æ”¯æ¶æ”¯æ’‘ï¼Œç©å®¶åªèƒ½å·ç¼©èº«ä½“åç€ç©ï¼Œå¹¶ä¸”ç©å®¶åœ¨è¿‡ç¨‹ä¸­ä¼šæœ‰å¼ºçƒˆçš„çœ©æ™•æ„Ÿã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_VirtualBoy.jpg" alt="Virtual Boy"></p>
<p><strong>Oculus Rift</strong><br>VRè¿™ä¸ªè¯åœ¨è¿‘ä¸¤å¹´ç«çƒ­èµ·æ¥ä¹Ÿæ­£æ˜¯å› ä¸ºOculus Riftï¼Œ92å¹´ç”Ÿçš„Palmer Freeman Luckeyå¯¹ä»»ä½•äº‹ç‰©çš†æœ‰å¥½å¥‡å…¶å¿ƒçš„äººï¼Œå–œæ¬¢æ”¶è—å„ç±»VRè®¾å¤‡ï¼Œå¹¶ä¸”æ˜¯Meat to be seenæŠ€æœ¯è®ºå›çš„ç‰ˆä¸»ï¼ŒPalmerå¯¹å¸‚é¢ä¸ŠVRçš„ä½å¯¹æ¯”åº¦ã€é«˜å»¶è¿Ÿå’Œä½è§†é‡æ„Ÿåˆ°å¤±æœ›ï¼Œä»–å¸Œæœ›åˆ¶ä½œä¸€ä¸ªèƒ½è·Ÿè¸ªç©å®¶å¤´éƒ¨è½¬åŠ¨çš„360åº¦å…¨æ™¯ï¼Œå¹¶ä»¥æä½çš„å»¶è¿Ÿæ˜¾ç¤ºç”»é¢çš„VRå¤´æˆ´è®¾å¤‡ã€‚</p>
<p>åŒæ ·ä½œä¸ºMeat to be seenæŠ€æœ¯è®ºå›æˆå‘˜ä¹‹ä¸€çš„FPSä¹‹çˆ¶å¡çº¦ç¿°Â·å¡é©¬å…‹ï¼Œçœ‹åˆ°æ­¤é¡¹ç›®éå¸¸æ„Ÿå…´è¶£ï¼Œè¦æ±‚ç»™äºˆä¸€å°åŸå‹æœºï¼Œå¹¶å¯¹ã€ŠDOOM3ã€‹è¿›è¡ŒVRé€‚é…ï¼Œåœ¨2012å¹´E3å±•å‡ºæ­¤è®¾å¤‡ï¼Œè·å¾—äº†E3æœ€ä½³å¤–è®¾å¥–ï¼Œä¸€æ—¶é—´è·å¾—å„å¤§åª’ä½“çš„å…³æ³¨ï¼Œéšååœ¨Kickstarterå‘èµ·ä¼—ç­¹ï¼ŒçŸ­æ—¶é—´å†…å°±è·å¾—è¶…è¿‡9500äººæ”¯æŒï¼Œæ€»èµ„é‡‘è¾¾243ä¸‡ç¾é‡‘ã€‚</p>
<p>åœ¨2014å¹´7æœˆï¼ŒOculus Riftè¢«Facebookä»¥20äº¿ç¾å…ƒæ”¶è´­åï¼Œå„ä¸ªå‚å®¶ä¼¼ä¹åˆçœ‹åˆ°å¦ä¸€ç‰‡è“æµ·ï¼Œå¤§é‡çš„æ¶Œå…¥è¿™ä¸ªå¸‚åœºï¼ŒHTCçš„HTC Viveï¼Œç´¢å°¼çš„PlayStation VRï¼Œå„ç±»çš„æ‰‹æœºVRç­‰ç­‰ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_oculus.jpg" alt="Oculus Rift"></p>
<h3 id="å…³äºA-Frame"><a href="#å…³äºA-Frame" class="headerlink" title="å…³äºA-Frame"></a>å…³äºA-Frame</h3><p><img src="//misc.aotu.io/ONE-SUNDAY/aframe.jpg" alt="A-Frame"></p>
<p>å†å²è®²å®Œå›åˆ°æ­£é¢˜ï¼ŒMozillaè®¤ä¸ºç›®å‰çš„WebVRå‘å±•å¤ªå›°éš¾äº†ï¼Œä¸ºäº†ä½¿å…¶æ›´åŠ å¿«é€Ÿã€æ–¹ä¾¿ã€æ„‰å¿«çš„æ‰“é€ 3D/VRåœºæ™¯ï¼Œ2015å¹´12æœˆ16æ—¥Mozillaæ——ä¸‹çš„MozVRå›¢é˜Ÿï¼Œåœ¨ç»è¿‡é•¿æ—¶é—´çš„è¯•éªŒï¼Œå¹¶ä¸”ä»ä¸€äº›3D/VRå·¥å…·ï¼ˆä¾‹å¦‚ï¼šJanusVRã€GLAMã€SceneVRï¼‰ä¸­æ±²å–ç»éªŒï¼Œå…¬å¸ƒäº†JavaScriptå¼€æºæ¡†æ¶A-Frameã€‚</p>
<p>A-Frameä½¿ç”¨Webå¼€å‘è€…ç†Ÿæ‚‰çš„HTMLæ ‡ç­¾æ¥åˆ›å»ºWebVRåœºæ™¯ï¼Œä½¿å¾—éWebGLå¼€å‘è€…æ— éœ€å­¦ä¹ å¼ºå¤§è€Œåˆå¤æ‚çš„WebGL APIæ¥åˆ›å»ºVRåœºæ™¯ï¼Œé™ä½äº†åˆå­¦è€…å­¦ä¹ çš„é—¨æ§›ï¼Œå¹¶ä¸”A-Frameä¸€ä¸ªæœ€å¤§çš„ä¼˜åŠ¿åœ¨äºè·¨å¹³å°æ€§ï¼Œç›®å‰ç‰ˆæœ¬å·²è¿­ä»£åˆ°v0.3.0ï¼Œæ”¯æŒVRå¤´æˆ´è®¾å¤‡Oculus Riftå’ŒHTC Viveä»¥åŠéVRè®¾å¤‡çš„PCç«¯å’ŒMobileç«¯ï¼ˆå¯å¼€å¯VRæ¨¡å¼ï¼Œåˆ©ç”¨Google Cardboardã€Gear VRç­‰è®¾å¤‡è§‚çœ‹ï¼‰ã€‚</p>
<p>ç®€å•æ¦‚æ‹¬A-Frameç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç»“åˆthree.jså’ŒWebGLçš„åŠ›é‡</li>
<li>é€šè¿‡è‡ªå®šä¹‰æ ‡ç­¾åˆ›å»ºWebVRï¼Œæ ‡ç­¾å…·æœ‰å¯è¯»æ€§</li>
<li>å…·æœ‰è·¨å¹³å°æ€§ï¼Œæ”¯æŒPCç«¯ã€Mobileç«¯ä»¥åŠå¤´æˆ´è®¾å¤‡Oculus Riftå’ŒHTC Vive</li>
<li>å‡å°‘å¼€å‘æˆæœ¬ï¼Œé™ä½åˆå­¦è€…ä¸ç‰›äººä¹‹é—´å­¦ä¹ æ›²çº¿</li>
<li>åº•å±‚æ¨¡å—åŒ–å’Œå¯æ‰©å±•æ€§</li>
</ul>
<h3 id="A-FrameåŠŸèƒ½"><a href="#A-FrameåŠŸèƒ½" class="headerlink" title="A-FrameåŠŸèƒ½"></a>A-FrameåŠŸèƒ½</h3><p>A-Frameä¸ºå¼€å‘è€…æä¾›äº†è®¸å¤šçš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚åœ¨å®˜ç½‘Docsé‡ŒPrimitivesæä¾›äº†åŸºç¡€çš„å‡ ä½•å½¢çŠ¶ï¼ˆç›’å­ã€çƒé¢ã€åœ†æŸ±ã€å¹³é¢ç­‰ï¼‰ã€å¯å¯¼å…¥3Då»ºæ¨¡å·¥å…·åˆ¶ä½œæˆ–ä»ç½‘ä¸Šä¸‹è½½çš„Colladaæ¨¡å‹ã€å®šä¹‰èƒŒæ™¯çš„å¤©ç©ºã€å®šä¹‰ç”¨æˆ·ä»å“ªä¸ªè§’åº¦è§‚çœ‹åœºæ™¯çš„ç›¸æœºã€åŠ¨ç”»ã€å…‰å½±ã€å…¨æ™¯è§†é¢‘ç­‰åŠŸèƒ½ï¼Œé€šè¿‡æ ‡ç­¾å¼€å‘è€…å°±å¯ä»¥è½»æ¾çš„åˆ›å»ºWebVRåœºæ™¯ï¼Œæ›´å¤šåŠŸèƒ½å¯ä»¥åˆ°å®˜ç½‘æŸ¥çœ‹ã€‚</p>
<h3 id="A-Frameå®ä¾‹"><a href="#A-Frameå®ä¾‹" class="headerlink" title="A-Frameå®ä¾‹"></a>A-Frameå®ä¾‹</h3><p>è¿™é‡Œä»¥å®˜ç½‘çš„ä¸€ä¸ªä¾‹å­ä½œä¸ºåŸºç¡€è®²è®²æ€ä¹ˆä½¿ç”¨A-Frameã€‚</p>
<p><strong>1ã€åˆ›å»ºåœºæ™¯</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"aframe-v0.3.0.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>&lt;a-scene&gt;</code>æ˜¯ä¸€ä¸ªå…¨å±€çš„æ ¹å¯¹è±¡ï¼Œæ‰€æœ‰å®ä½“éƒ½å­˜åœ¨äºè¿™ä¸ªåœºæ™¯ä¸­ï¼Œ<code>&lt;a-scene&gt;</code>å¤„ç†äº†æ‰€æœ‰three.jså’ŒWebVR boilerplateéœ€è¦åšçš„äº‹ï¼š</p>
<ul>
<li>åˆ›å»ºç”»å¸ƒï¼Œæ¸²æŸ“å™¨ä»¥åŠæ¸²æŸ“å¾ªç¯</li>
<li>é»˜è®¤çš„ç›¸æœºå’Œå…‰å½±</li>
<li>åˆ›å»ºWebVR Polyfillï¼ŒVREffect</li>
<li>æ·»åŠ ç”¨æˆ·ç•Œé¢è¿›å…¥VRï¼Œè°ƒç”¨WebVR API</li>
</ul>
<p><strong>2ã€åˆ›å»ºå¤©ç©º</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"lake"</span> <span class="attr">src</span>=<span class="string">"lake.jpg"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-sky</span> <span class="attr">src</span>=<span class="string">"#lake"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sky</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>&lt;a-sky&gt;</code>å…è®¸ä¸ºåœºæ™¯è®¾ç½®çº¯è‰²èƒŒæ™¯æˆ–æ˜¯ä¸€å¼ 360åº¦å…¨æ™¯å›¾ç‰‡ï¼Œ<code>&lt;a-assets&gt;</code>åˆ™æ˜¯é¢„åŠ è½½WebVRé¡µé¢æ‰€éœ€çš„èµ„æºã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_sky.jpg" alt="sky"></p>
<p><a href="http://jdc.jd.com/demo/aframe_sky/" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹DEMO</a></p>
<p><strong>3ã€åˆ›å»ºç›¸æœº</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">position</span>=<span class="string">"0 0 3.8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-camera</span>&gt;</span><span class="tag">&lt;/<span class="name">a-camera</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>&lt;a-camera&gt;</code>å®šä¹‰äº†ç”¨æˆ·ä»å“ªä¸ªè§’åº¦è§‚çœ‹åœºæ™¯ï¼Œæ”¹å˜<code>&lt;a-camera&gt;</code>çš„<code>position</code>éœ€è¦å°†å…¶ç½®äº<code>&lt;a-entity&gt;</code>ä¸­ï¼Œç›´æ¥åœ¨<code>&lt;a-camera&gt;</code>è®¾ç½®ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p><strong>4ã€åˆ›å»ºçƒé¢ã€ç«‹æ–¹ä½“ã€åœ†æŸ±ã€å¹³é¢</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- çƒé¢ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-sphere</span> <span class="attr">position</span>=<span class="string">"0 1.25 -1"</span> <span class="attr">radius</span>=<span class="string">"1.25"</span> <span class="attr">color</span>=<span class="string">"#ef2d5e"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sphere</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- ç«‹æ–¹ä½“ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-box</span> <span class="attr">position</span>=<span class="string">"-1 0.5 1"</span> <span class="attr">rotation</span>=<span class="string">"0 45 0"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">depath</span>=<span class="string">"1"</span> <span class="attr">color</span>=<span class="string">"#4cc3d9"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-box</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- åœ†æŸ± --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-cylinder</span> <span class="attr">position</span>=<span class="string">"1 0.75 1"</span> <span class="attr">radius</span>=<span class="string">"0.5"</span> <span class="attr">height</span>=<span class="string">"1.5"</span> <span class="attr">color</span>=<span class="string">"#ffc65d"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-cylinder</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- å¹³é¢ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-plane</span> <span class="attr">rotation</span>=<span class="string">"-90 0 0"</span> <span class="attr">width</span>=<span class="string">"4"</span> <span class="attr">height</span>=<span class="string">"4"</span> <span class="attr">color</span>=<span class="string">"#7bc8a4"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-plane</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure></p>
<ul>
<li><code>position</code>å®šä½å®ä½“xã€yã€zè½´çš„ä½ç½®</li>
<li><code>rotation</code>è°ƒæ•´å®ä½“xã€yã€zè½´çš„æ—‹è½¬è§’åº¦</li>
<li><code>color</code>æ”¹å˜å®ä½“çš„é¢œè‰²</li>
<li><code>depth</code>æ™¯æ·±</li>
<li><code>width</code>ã€<code>height</code>è®¾ç½®å®ä½“çš„å®½é«˜</li>
<li><code>radius</code>åœ†è§’åŠå¾„</li>
<li>æ•°å€¼æ˜¯ä»¥â€œç±³â€ä¸ºå•ä½</li>
</ul>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_geometry.jpg" alt="geometry"></p>
<p><a href="http://jdc.jd.com/demo/aframe_geometry/" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹DEMO</a></p>
<p><strong>5ã€æ·»åŠ åŠ¨ç”»</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-sphere</span> <span class="attr">position</span>=<span class="string">"0 1.25 -1"</span> <span class="attr">radius</span>=<span class="string">"1.25"</span> <span class="attr">color</span>=<span class="string">"#ef2d5e"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- ç¼©æ”¾ --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-animation</span> <span class="attr">attribute</span>=<span class="string">"scale"</span> <span class="attr">from</span>=<span class="string">"1 1 1"</span> <span class="attr">to</span>=<span class="string">"1.2 1.2 1.2"</span> <span class="attr">repeat</span>=<span class="string">"indefinite"</span> <span class="attr">direction</span>=<span class="string">"alternate"</span> <span class="attr">dur</span>=<span class="string">"2000"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-sphere</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-box</span> <span class="attr">position</span>=<span class="string">"-1 0.5 1"</span> <span class="attr">rotation</span>=<span class="string">"0 45 0"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">depath</span>=<span class="string">"1"</span> <span class="attr">color</span>=<span class="string">"#4cc3d9"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- æ—‹è½¬ --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-animation</span> <span class="attr">attribute</span>=<span class="string">"rotation"</span> <span class="attr">from</span>=<span class="string">"0 45 0"</span> <span class="attr">to</span>=<span class="string">"0 360 0"</span> <span class="attr">repeat</span>=<span class="string">"indefinite"</span> <span class="attr">direction</span>=<span class="string">"alternate"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-box</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-cylinder</span> <span class="attr">position</span>=<span class="string">"1 0.75 1"</span> <span class="attr">radius</span>=<span class="string">"0.5"</span> <span class="attr">height</span>=<span class="string">"1.5"</span> <span class="attr">color</span>=<span class="string">"#ffc65d"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- æ”¹å˜é«˜åº¦ --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-animation</span> <span class="attr">attribute</span>=<span class="string">"height"</span> <span class="attr">from</span>=<span class="string">"1.5"</span> <span class="attr">to</span>=<span class="string">"0"</span> <span class="attr">repeat</span>=<span class="string">"indefinite"</span> <span class="attr">direction</span>=<span class="string">"alternate"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-cylinder</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>éœ€è¦ä¸ºæŸä¸ªå®ä½“æ·»åŠ åŠ¨ç”»åˆ™å°†<code>&lt;a-animation&gt;</code>ç½®äºæ ‡ç­¾ä¹‹å†…ï¼Œè¿™é‡Œæˆ‘ç»™çƒ<code>scale</code>ç¼©æ”¾ï¼Œç«‹æ–¹ä½“<code>rotation</code>360åº¦Yè½´æ—‹è½¬ï¼Œåœ†æŸ±æ”¹å˜<code>height</code>ï¼Œå¹¶ä¸”æ— é™æ¬¡è½®æµåå‘æ’­æ”¾åŠ¨ç”»ã€‚</p>
<ul>
<li><code>attribute</code>å®šä¹‰è¦æ‰§è¡Œçš„åŠ¨ç”»å±æ€§</li>
<li><code>from</code>åŠ¨ç”»çš„èµ·å§‹</li>
<li><code>to</code>åŠ¨ç”»çš„ç»“æŸ</li>
<li><code>repeat</code>å®šä¹‰äº†è¦å¾ªç¯çš„æ¬¡æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—æˆ–indefiniteè¡¨ç¤ºæ— é™å¾ªç¯</li>
<li><code>dur</code>åŠ¨ç”»çš„æ—¶é•¿</li>
<li><code>direction</code>åŠ¨ç”»è½®æµåå‘æ’­æ”¾</li>
</ul>
<p>A-Frameçš„åŠ¨ç”»å±æ€§ä¸CSS3 animationéå¸¸ç›¸ä¼¼ï¼Œè¿˜æœ‰å¡«å……æ¨¡å¼<code>fill</code>ã€å»¶æ—¶<code>delay</code>ã€é€Ÿåº¦æ›²çº¿<code>easing</code>ç­‰ç­‰ã€‚</p>
<p><a href="http://jdc.jd.com/demo/aframe_animation/" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹DEMO</a></p>
<p><strong>6ã€åˆ›å»ºå…‰æ ‡</strong><br>é€šè¿‡ç»™ç›¸æœºå¢åŠ ä¸€ä¸ªå…‰æ ‡<code>cursor</code>ï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»å’Œæ³¨è§†ä¸å®ä½“äº’åŠ¨ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-box</span> <span class="attr">cursor-listener</span> <span class="attr">position</span>=<span class="string">"-1 0.5 1"</span> <span class="attr">rotation</span>=<span class="string">"0 45 0"</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">depath</span>=<span class="string">"1"</span> <span class="attr">color</span>=<span class="string">"#4cc3d9"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-animation</span> <span class="attr">attribute</span>=<span class="string">"rotation"</span> <span class="attr">from</span>=<span class="string">"0 45 0"</span> <span class="attr">to</span>=<span class="string">"0 360 0"</span> <span class="attr">repeat</span>=<span class="string">"indefinite"</span> <span class="attr">direction</span>=<span class="string">"alternate"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-box</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">position</span>=<span class="string">"0 0 3.8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a-camera</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- åˆ›å»ºå…‰æ ‡ --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">a-cursor</span> <span class="attr">color</span>=<span class="string">"#000"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-cursor</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">a-camera</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ·»åŠ å…‰æ ‡ç›‘å¬å™¨</span></div><div class="line">AFRAME.registerComponent(<span class="string">"cursor-listener"</span>, &#123;</div><div class="line">    <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> COLORS = [<span class="string">"#6c8cbf"</span>, <span class="string">"#e4f0ff"</span>, <span class="string">"#6c70e1"</span>];</div><div class="line">        <span class="comment">// ç‚¹å‡»éšæœºæ”¹å˜ç«‹æ–¹ä½“é¢œè‰²</span></div><div class="line">        <span class="keyword">this</span>.el.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> randomIndex = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * COLORS.length);</div><div class="line">            <span class="keyword">this</span>.setAttribute(<span class="string">"color"</span>, COLORS[randomIndex]);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><a href="http://jdc.jd.com/demo/aframe_cursor/" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹DEMO</a></p>
<h3 id="A-Frameç¤¾åŒº"><a href="#A-Frameç¤¾åŒº" class="headerlink" title="A-Frameç¤¾åŒº"></a>A-Frameç¤¾åŒº</h3><p>ä¸€ä¸ªæ¡†æ¶æ˜¯å¦èƒ½æŒç»­å‘å±•ï¼Œå¾ˆå¤§ç¨‹åº¦çœ‹ç¤¾åŒºçš„æ´»è·ƒçŠ¶æ€ï¼ŒA-Frameç›®å‰åœ¨Githubä¸Šå·²ç»è¶…è¿‡3500ä¸ªstarï¼ŒMozillaé¼“åŠ±å¼€å‘è€…ä»¬åŠ å…¥1400äººçš„A-Frame SlackèŠå¤©ç»„ï¼Œå¹¶åœ¨ç¤¾åŒºä¸­åˆ†äº«è‡ªå·±çš„ä½œå“ï¼Œåœ¨A-Frame Twitteré‡Œï¼Œæ¯å‘¨éƒ½ä¼šç²¾é€‰å‡ºä¼˜ç§€çš„A-Frameä½œå“ä¾›å¼€å‘è€…ä»¬å‚è€ƒå­¦ä¹ ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_twitter.jpg" alt="A-Frame twitter"></p>
<p>åœ¨A-Frameçš„Github Roadmapåç»­çš„ç‰ˆæœ¬æ›´æ–°çº¿è·¯å›¾ä¸­è¡¨æ˜ï¼Œåç»­é™¤äº†å¸¸è§„çš„å‡çº§å¤–è¿˜å°†æ¨å‡ºæ•™ç¨‹ï¼ˆåˆ¶ä½œæ›´å¤šçš„å­¦ä¹ èµ„æºã€æ–‡ç« ã€æŒ‡å—ã€å½•å±ï¼‰å¸®åŠ©åˆå­¦è€…æ›´å¥½å­¦ä¹ ã€‚</p>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_update.jpg" alt="A-Frame update"></p>
<h3 id="A-Frameèµ„æº"><a href="#A-Frameèµ„æº" class="headerlink" title="A-Frameèµ„æº"></a>A-Frameèµ„æº</h3><ul>
<li><a href="https://aframe.io/aframe-inspector/example/" target="_blank" rel="external">å¯è§†åŒ–åœ¨çº¿ç¼–è¾‘å™¨</a></li>
</ul>
<p><img src="//misc.aotu.io/ONE-SUNDAY/aframe_edit.jpg" alt="aframe-inspector"></p>
<p><strong>360å…¨æ™¯å›¾ç´ æ</strong></p>
<ul>
<li><a href="https://www.flickr.com/groups/equirectangular/" target="_blank" rel="external">flickr</a></li>
<li><a href="https://500px.com/" target="_blank" rel="external">500px</a></li>
</ul>
<p><strong>3Dæ¨¡å‹å…è´¹ç´ æ</strong></p>
<ul>
<li><a href="https://clara.io/view/edb55549-32a8-46bd-8a36-2e03027ffcb5#" target="_blank" rel="external">Clara.io</a></li>
<li><a href="https://3dwarehouse.sketchup.com/" target="_blank" rel="external">3D Warehouse</a></li>
<li><a href="http://archive3d.net/" target="_blank" rel="external">Archive 3D</a></li>
<li><a href="http://www.turbosquid.com/Search/3D-Models/free" target="_blank" rel="external">Turbosquid</a></li>
</ul>
<p><strong>èµ„æºé›†</strong></p>
<ul>
<li><a href="https://github.com/aframevr/awesome-aframe" target="_blank" rel="external">awesome-aframe</a></li>
</ul>
<h3 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h3><ul>
<li><a href="http://en.wikipedia.org/wiki/Virtual_reality" target="_blank" rel="external">http://en.wikipedia.org/wiki/Virtual_reality</a></li>
<li><a href="https://en.wikipedia.org/wiki/Sensorama" target="_blank" rel="external">https://en.wikipedia.org/wiki/Sensorama</a></li>
<li><a href="https://en.wikipedia.org/wiki/Sega_VR" target="_blank" rel="external">https://en.wikipedia.org/wiki/Sega_VR</a></li>
<li><a href="https://en.wikipedia.org/wiki/Virtual_Boy" target="_blank" rel="external">https://en.wikipedia.org/wiki/Virtual_Boy</a></li>
<li><a href="https://en.wikipedia.org/wiki/Oculus_Rift" target="_blank" rel="external">https://en.wikipedia.org/wiki/Oculus_Rift</a></li>
<li><a href="http://aframe.io/" target="_blank" rel="external">http://aframe.io/</a></li>
<li><a href="https://github.com/aframevr/aframe" target="_blank" rel="external">https://github.com/aframevr/aframe</a></li>
<li><a href="https://twitter.com/aframevr" target="_blank" rel="external">https://twitter.com/aframevr</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»€ä¹ˆå«çœŸï¼Ÿä½ æ€æ ·ç»™çœŸä¸‹å®šä¹‰ï¼Œå¦‚æœä½ è¯´çœŸå°±æ˜¯ä½ èƒ½æ„Ÿè§‰åˆ°çš„ä¸œè¥¿ï¼Œä½ èƒ½é—»åˆ°çš„æ°”å‘³ï¼Œä½ èƒ½å°åˆ°çš„å‘³é“ï¼Œé‚£ä¹ˆè¿™ä¸ªçœŸåªæ˜¯ä½ å¤§è„‘ä½œå‡ºååº”çš„ç”µå­ä¿¡å·ã€‚ â€”â€” ã€Šé»‘å®¢å¸å›½ã€‹&lt;/p&gt;
&lt;h3 id=&quot;å…³äºVRæŠ€æœ¯&quot;&gt;&lt;a href=&quot;#å…³äºVRæŠ€æœ¯&quot; class=&quot;headerlink&quot; tit
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ä½“éªŒæŠ¥å‘Š" scheme="https://aotu.io/tags/%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    
      <category term="WebVR" scheme="https://aotu.io/tags/WebVR/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ç½‘é¡µä¸Šå®ç° 3D Touch æ•ˆæœ</title>
    <link href="https://aotu.io/notes/2016/09/28/3d-touch/"/>
    <id>https://aotu.io/notes/2016/09/28/3d-touch/</id>
    <published>2016-09-28T08:00:00.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>9 æœˆ 14 æ—¥å‡Œæ™¨ï¼ŒiOS 10 æ­£å¼ç‰ˆå¼€å§‹å‘ç”¨æˆ·æ¨é€æ›´æ–°ï¼Œè€Œ iOS 10 æ­è½½çš„ Safari 10 äº¦å¸¦æ¥äº†ä¸å°‘æ–°ç‰¹æ€§ï¼Œå…¶ä¸­å°±æœ‰ 3D Touch äº‹ä»¶çš„æ”¯æŒï¼ˆå®˜æ–¹æ–‡æ¡£ <a href="https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html" target="_blank" rel="external">ã€ŠWhatâ€™s New in Safari 10ã€‹</a>ï¼‰ã€‚</p>
<h2 id="Force-Touch-ä¸-3D-Touch"><a href="#Force-Touch-ä¸-3D-Touch" class="headerlink" title="Force Touch ä¸ 3D Touch"></a>Force Touch ä¸ 3D Touch</h2><p>è¯´åˆ° 3D Touch ä¸èƒ½ä¸æä¸ä¹‹ç›¸ä¼¼çš„ Force Touchã€‚Force Touch<br>æ˜¯è‹¹æœå…¬å¸åœ¨ 2014 å¹´ 9 æœˆå…¬å¸ƒçš„ä¸€é¡¹å‹åŠ›æ•æ„Ÿå±å¹•æŠ€æœ¯ï¼Œæœ€æ—©ç”¨äº Apple Watch ï¼Œå¯è¯†åˆ«è½»ç‚¹ã€è½»æŒ‰ä¸¤ç§æ“ä½œã€‚éšå Force Touch äº 2015 å¹´ 9 æœˆåœ¨ iPhone 6s ä¸Šå¾—åˆ°æ”¹è¿›å¹¶æ›´åä¸º 3D Touchï¼Œæä¾›äº†æ›´é«˜çµæ•åº¦çš„è§¦æ§åŠ›åº¦è¯†åˆ«ã€åŠæ›´å¼ºçš„è§¦æ„Ÿåé¦ˆï¼Œæ”¯æŒè½»ç‚¹ã€è½»æŒ‰åŠé‡æŒ‰ä¸‰ä¸ªç»´åº¦ã€‚</p>
<h2 id="ç¡¬ä»¶è¦æ±‚"><a href="#ç¡¬ä»¶è¦æ±‚" class="headerlink" title="ç¡¬ä»¶è¦æ±‚"></a>ç¡¬ä»¶è¦æ±‚</h2><p>æ”¯æŒ 3D Touch çš„è®¾å¤‡ï¼Œç›®å‰æœ‰ iPhone 6sã€iPhone 6s Plusã€iPhone 7 ä»¥åŠ iPhone 7 Plusã€‚</p>
<h2 id="æ„Ÿå—-3D-Touch"><a href="#æ„Ÿå—-3D-Touch" class="headerlink" title="æ„Ÿå— 3D Touch"></a>æ„Ÿå— 3D Touch</h2><p>3D Touch æœ€ä¸ºå…¸å‹çš„äº¤äº’æœ‰ Quick Actions å’Œ Peek and Pop ä¸¤ç§ã€‚åœ¨ APP å›¾æ ‡ä¸Šé‡æŒ‰å‘¼å‡ºä¸€ç»„å¿«æ·æ“ä½œèœå•ï¼Œè¿™å³æ˜¯å…¸å‹çš„ Quick Actions:</p>
<p><img src="//misc.aotu.io/hihuimin/quick_actions.jpg" alt="Quick Actions"></p>
<p>è€Œä½¿ç”¨ Peek and Pop åˆ™å¯ä»¥å¿«é€Ÿåœ°å¯¹å†…å®¹è¿›è¡Œé¢„è§ˆï¼Œä»¥åŠåç»­çš„å…¶ä»–æ“ä½œï¼š</p>
<p><img src="//misc.aotu.io/hihuimin/peek_and_pop.jpg" alt="Peek And Pop"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ç³»ç»Ÿçš„é‚®ä»¶ APP ä¸­ï¼Œä»¥ä¸€å®šçš„åŠ›åº¦æŒ‰å‹é‚®ä»¶åˆ—è¡¨ä¸­çš„æŸä¸€é¡¹ï¼Œä¼šè§¦å‘ Peek å¼¹å‡ºä¸€ä¸ªå†…å®¹é¢„è§ˆçª—å£ï¼ˆåœ¨ Peek çŠ¶æ€ä¸‹ä¸Šæ»‘è¿˜èƒ½è§¦å‘ Quick Actions è°ƒå‡ºä¸€äº›å¿«æ·æ“ä½œé¡¹å“¦ï¼‰ï¼Œå¦‚æœç»§ç»­åŠ å¤§æŒ‰å‹åŠ›åº¦ï¼Œåˆ™ä¼šè§¦å‘ Pop è¿›å…¥é‚®ä»¶å†…å®¹ç•Œé¢ï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹å°±ç§°ä¹‹ä¸º Peek and Popã€‚</p>
<p>é™¤äº†é‚®ä»¶ APP ä»¥å¤–ï¼Œä¿¡æ¯ã€ç…§ç‰‡ç­‰å¤šä¸ªç³»ç»Ÿ APP ä»¥åŠä¸€äº›ç¬¬ä¸‰æ–¹ APP ï¼ˆå¦‚ å¾®ä¿¡ã€Facebookã€Twitter ç­‰ï¼‰ä¹Ÿéƒ½å¾ˆå¥½çš„æ”¯æŒäº† Peek and Pop è¿™ç§ 3D Touch äº¤äº’å½¢å¼ã€‚</p>
<h2 id="ç½‘é¡µä¸­çš„-3D-Touch"><a href="#ç½‘é¡µä¸­çš„-3D-Touch" class="headerlink" title="ç½‘é¡µä¸­çš„ 3D Touch"></a>ç½‘é¡µä¸­çš„ 3D Touch</h2><p>è¦åœ¨ç½‘é¡µä¸­å®ç° 3D Touchï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š</p>
<p>1ã€Touch.force</p>
<p>åœ¨ touch å¯¹è±¡ä¸­åŒ…å«æœ‰ä¸€ä¸ªåä¸º <code>force</code> çš„åªè¯»å±æ€§ï¼Œå®ƒçš„å–å€¼ä» 0 åˆ° 1ï¼Œè¡¨ç¤ºçš„æ˜¯è§¦ç¢°ç‚¹çš„æŒ‰å‹åŠ›åº¦ï¼Œ0 è¡¨ç¤ºæ²¡æœ‰æ£€æµ‹åˆ°å‹åŠ›ï¼Œè€Œ 1 åˆ™æ˜¯è®¾å¤‡èƒ½è¯†åˆ«å‡ºçš„æœ€å¤§å‹åŠ›</p>
<p>2ã€touchforcechange</p>
<p><code>touchforcechange</code> æ˜¯ Safari 10 æ–°å¢çš„äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨æŒ‰å‹åŠ›åº¦æ”¹å˜æ—¶è¢«è§¦å‘</p>
<p>ï¼ˆæ³¨ï¼šåœ¨ MacOS Safari ä¸Šä¹Ÿæœ‰ä¸ä¹‹å¯¹åº”çš„ <code>webkitmouseforcechanged</code> äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨æ”¯æŒ Force Touch çš„ Trackpad ä¸Šååº”å‡ºæŒ‰å‹åŠ›åº¦å€¼ force çš„å˜åŒ–ï¼Œä½†æœ¬æ–‡ä»…è®¨è®ºæ‰‹æœºè®¾å¤‡çš„æƒ…å†µï¼‰</p>
<h2 id="å®ç°-3D-Touch-æ•ˆæœ"><a href="#å®ç°-3D-Touch-æ•ˆæœ" class="headerlink" title="å®ç° 3D Touch æ•ˆæœ"></a>å®ç° 3D Touch æ•ˆæœ</h2><p>è¦å®ç° 3D Touch æ•ˆæœï¼Œå…³é”®åœ¨äºå®æ—¶åœ°è·å– Touch.force çš„å€¼ã€‚è€Œç”±äºç½‘é¡µä¸Šçš„ 3D Touch å¾ˆå¤§ç¨‹åº¦ä¸Šå—é™äºè®¾å¤‡åŠæµè§ˆå™¨çš„æ”¯æŒæƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬åˆ’åˆ†ä»¥ä¸‹ 3 ç§æƒ…å†µï¼Œåˆ†åˆ«æ¥çœ‹çœ‹è¦å¦‚ä½•å®ç°</p>
<p>1ã€æ”¯æŒ 3D Touch ä¸”å‡çº§åˆ°äº† iOS 10 çš„è®¾å¤‡</p>
<p>åœ¨è¿™ç§æœ€ä¸ºç†æƒ³çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç›‘å¬ touchforcechange äº‹ä»¶å³å¯è·å–åˆ° force çš„å½“å‰å€¼ï¼Œå°† force å€¼çš„å˜åŒ–ä»¥é€‚å½“çš„å½¢å¼åé¦ˆåœ¨ç•Œé¢ä¸Šä»¥å®ç° 3D Touch æ•ˆæœã€‚</p>
<p>2ã€æ”¯æŒ 3D Touch ä½†ç³»ç»Ÿç‰ˆæœ¬ä½äº iOS 10 çš„è®¾å¤‡</p>
<p>è¿™ç§æƒ…å†µè™½ç„¶æ— æ³•ç›‘å¬ touchforcechange äº‹ä»¶ï¼Œä½† Touch å¯¹è±¡çš„ force å±æ€§ä»ç„¶å¯ä»¥ååº”å‡ºæ­£ç¡®çš„æŒ‰å‹åŠ›åº¦ï¼Œå¯ä»¥å·§å¦™åœ°è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä»¥è½®è¯¢çš„æ–¹å¼è·å– force çš„å½“å‰å€¼</p>
<p>3ã€ä¸æ”¯æŒ 3D Touch çš„è®¾å¤‡</p>
<p>è¿™ç§æƒ…å†µä¸‹ Touch.force çš„å–å€¼å§‹ç»ˆä¸º 0ï¼Œè™½ç„¶å¯ä»¥ç”¨é•¿æŒ‰çš„äº¤äº’å½¢å¼æ¥ä»£æ›¿ï¼Œä½†å»ºè®®è¿˜æ˜¯ä»¥ä¼˜é›…é™çº§çš„æ–¹å¼ï¼Œç´¢æ€§å°±ä¸å¤„ç†äº†å§</p>
<h2 id="ä¸€ä¸ª-3D-Touch-çš„ä¾‹å­"><a href="#ä¸€ä¸ª-3D-Touch-çš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ª 3D Touch çš„ä¾‹å­"></a>ä¸€ä¸ª 3D Touch çš„ä¾‹å­</h2><p>çœ‹åˆ°è¿™é‡Œä½ è‚¯å®šæƒ³è¯´ â€œShut up and show me the codeâ€¦â€ å¥½çš„ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªäº‹ä¾‹é¡µé¢ï¼Œç”¨æ”¯æŒ 3D Touch çš„è®¾å¤‡æŒ‰å‹è“è‰²æŒ‰é’®å¯ä»¥å°†æ ‘æ‡’å…„é€—ç¬‘å“¦ï¼Œå˜¿å˜¿å˜¿~</p>
<p><img src="//misc.aotu.io/hihuimin/demo.png" alt="Demo"></p>
<p>ä½ å¯æ‰«æä»¥ä¸ŠäºŒç»´ç ï¼Œæˆ–<a href="http://jdc.jd.com/demo/3d-touch/" target="_blank" rel="external">æˆ³æˆ‘è¿›è¡Œé¢„è§ˆ</a>ï¼Œ<strong>æ³¨æ„è¯·ä½¿ç”¨ iOS Safari æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼ä½¿ç”¨ iOS Safari æµè§ˆå™¨ï¼ï¼ä½¿ç”¨ iOS Safari æµè§ˆå™¨ï¼ï¼ï¼</strong>é‡è¦çš„äº‹æƒ…è¦è¯´ä¸‰éã€‚ã€‚å› ä¸ºç›®å‰å¾®ä¿¡ WebView å¹¶ä¸æ”¯æŒ 3D Touchã€‚</p>
<p>å®ç°æ€è·¯å…¶å®æ¯”è¾ƒç®€å•ï¼Œæ ¹æ®åˆšåˆšè¯´åˆ°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬åˆ†åˆ«ç›‘å¬ touchforcechangeã€touchstartã€touchendã€touchcancel äº‹ä»¶</p>
<ul>
<li>åœ¨ touchstart äº‹ä»¶ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨è½®è¯¢åœ°å»è·å– Touch.force çš„å€¼ï¼›</li>
<li>åœ¨ touchforcechange äº‹ä»¶ä¸­è·å–å½“å‰ Touch.force çš„å€¼ï¼Œå¹¶æ¸…é™¤ touchstart äº‹ä»¶ä¸­è®¾ç½®çš„å®šæ—¶å™¨ï¼Œå› ä¸ºæ”¯æŒ touchforcechange äº‹ä»¶çš„è¯å°±æ²¡å¿…è¦è½®è¯¢äº†ï¼›</li>
<li>åœ¨ touchend åŠ touchcancel äº‹ä»¶ä¸­æŠŠ Touch.force é‡ç½®ä¸º 0ï¼Œå¹¶æ¸…é™¤å®šæ—¶å™¨ã€‚</li>
</ul>
<p>è€Œæ ‘æ‡’å…„å¤§ç¬‘çš„åŠ¨ç”»åˆ™ç”¨çš„æ˜¯ä»¥ä¸‹è¿™å¼ é›ªç¢§å›¾ï¼Œæ ¹æ®å½“å‰ Touch.force å€¼æ¥è®¾ç½® background-position ä»¥æ˜¾ç¤ºå¯¹åº”çš„åŠ¨ç”»å¸§æ¥å®ç°çš„</p>
<p><img src="//misc.aotu.io/hihuimin/sloth.png" alt="Sloth Sprite Sheet"></p>
<p>ä½ å¯ä»¥è®¿é—®è¿™ä¸ª <a href="https://github.com/hihuimin/3d-touch" target="_blank" rel="external">Github é¡¹ç›®</a> æ¥æŸ¥çœ‹æºç ï¼Œæ ¸å¿ƒä»£ç ä½äº ThreeDTouch.jsï¼Œè¯¥æ–‡ä»¶å°è£…äº†ä¸€ä¸ªåä¸º ThreeDTouch çš„ç±»ï¼Œäº‹ä¾‹åŒ–æ—¶ä¼ å…¥ä¸€ä¸ª DOM å¯¹è±¡å³å¯åœ¨ callback ä¸­è·å–åˆ°æŒ‰å‹åŠ›åº¦å€¼çš„å˜åŒ–ã€‚</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 3D Touch äº‹ä»¶å¤„ç†å™¨ï¼Œä¼ å…¥è¦ç›‘å¬çš„ DOM å¯¹è±¡ï¼Œåœ¨ callback å›è°ƒä¸­è·å–å½“å‰ force å€¼</div><div class="line"> *</div><div class="line"> * @param &#123; HTMLElement &#125; el - è¦ç›‘å¬çš„ DOM å¯¹è±¡</div><div class="line"> * @param &#123; Function &#125; callback - å¸¦æœ‰ force å€¼çš„å›è°ƒå‡½æ•°</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThreeDTouch</span><span class="params">(el, callback)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.el = el</div><div class="line">    <span class="keyword">this</span>.<span class="keyword">callback</span> = <span class="keyword">callback</span></div><div class="line">    <span class="keyword">this</span>._bindEvents()</div><div class="line">&#125;</div><div class="line"></div><div class="line">ThreeDTouch.prototype = &#123;</div><div class="line">    <span class="comment">//ç»‘å®šç›¸å…³ touch äº‹ä»¶</span></div><div class="line">    _bindEvents: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> events = [<span class="string">'touchforcechange'</span>, <span class="string">'touchstart'</span>, <span class="string">'touchend'</span>, <span class="string">'touchcancel'</span>]</div><div class="line">        events.forEach(<span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.el.addEventListener(event, <span class="keyword">this</span>, <span class="literal">false</span>)</div><div class="line">        &#125;.bind(<span class="keyword">this</span>))</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//åˆ†æ´¾ touch äº‹ä»¶</span></div><div class="line">    handleEvent: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (ev.type) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">'touchforcechange'</span>:</div><div class="line">                <span class="keyword">this</span>._touchForceDidChange(ev)</div><div class="line">                <span class="keyword">break</span></div><div class="line">            <span class="keyword">case</span> <span class="string">'touchstart'</span>:</div><div class="line">                <span class="keyword">this</span>._touchDidStart(ev)</div><div class="line">                <span class="keyword">break</span></div><div class="line">            <span class="keyword">case</span> <span class="string">'touchend'</span>:</div><div class="line">            <span class="keyword">case</span> <span class="string">'touchcancel'</span>:</div><div class="line">                <span class="keyword">this</span>._touchDidEnd(ev)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//force å€¼æ”¹å˜æ—¶</span></div><div class="line">    _touchForceDidChange: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> force = ev.touches[<span class="number">0</span>].force</div><div class="line">        <span class="keyword">this</span>.<span class="keyword">callback</span>(force)</div><div class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId) <span class="comment">//æ”¯æŒ touchforcechange çš„è¯åˆ™å–æ¶ˆè½®è¯¢</span></div><div class="line">    &#125;,</div><div class="line">    _touchDidStart: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> touch = ev.touches[<span class="number">0</span>]</div><div class="line">        <span class="keyword">this</span>._checkForce(touch)</div><div class="line">    &#125;,</div><div class="line">    _touchDidEnd: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.<span class="keyword">callback</span>(<span class="number">0</span>)</div><div class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//è½®è¯¢åœ°è·å– force å€¼</span></div><div class="line">    _checkForce: <span class="function"><span class="keyword">function</span><span class="params">(touch)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.<span class="keyword">callback</span>(touch.force)</div><div class="line">        <span class="keyword">this</span>.timeoutId = setTimeout(<span class="keyword">this</span>._checkForce.bind(<span class="keyword">this</span>, touch), <span class="number">16</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://developer.apple.com/library/prerelease/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html" target="_blank" rel="external">https://developer.apple.com/â€¦/WhatsNewInSafari/Articles/Safari_10_0.html</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Force_Touch_events" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/Force_Touch_events</a></li>
<li><a href="https://github.com/stuyam/pressure" target="_blank" rel="external">https://github.com/stuyam/pressure</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;9 æœˆ 14 æ—¥å‡Œæ™¨ï¼ŒiOS 10 æ­£å¼ç‰ˆå¼€å§‹å‘ç”¨æˆ·æ¨é€æ›´æ–°ï¼Œè€Œ iOS 10 æ­è½½çš„ Safari 10 äº¦å¸¦æ¥äº†ä¸å°‘æ–°ç‰¹æ€§ï¼Œå…¶ä¸­å°±æœ‰ 3D Touch äº‹ä»¶çš„æ”¯æŒï¼ˆå®˜æ–¹æ–‡æ¡£ &lt;a href=&quot;https://developer.apple.com/library/pre
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="3dtouch" scheme="https://aotu.io/tags/3dtouch/"/>
    
      <category term="touchforcechange" scheme="https://aotu.io/tags/touchforcechange/"/>
    
  </entry>
  
  <entry>
    <title>HTTP ç¼“å­˜</title>
    <link href="https://aotu.io/notes/2016/09/22/http-caching/"/>
    <id>https://aotu.io/notes/2016/09/22/http-caching/</id>
    <published>2016-09-22T08:38:12.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶ï¼ŒHTTP ä¸­çš„ç¼“å­˜å¯èƒ½ä¼šéå¸¸è®©äººå¤´ç–¼ã€‚<br>æŒ‰ç…§æ–‡æ¡£æ­£ç¡®åœ°ä½¿ç”¨ HTTP å¹¶ä¸æ˜¯é‚£ä¹ˆå›°éš¾ï¼Œä½†äº‹å®ä¸Šï¼Œä¸åŒçš„æµè§ˆå™¨å’Œ HTTP ç‰ˆæœ¬å¸¸å¸¸å›°æ‰°ç€æˆ‘ä»¬ã€‚</p>
<a id="more"></a>
<p>é€šè¿‡ <a href="http://stackoverflow.com/search?q=http+cache" target="_blank" rel="external">Stack Overflow</a> çš„æœç´¢ç»“æœï¼Œä½ å¯ä»¥å¾ˆè½»æ˜“åœ°å‘ç°å¾ˆå¤šäººæœ‰ç›¸åŒçš„å›°æ‰°ã€‚æˆ‘ä»¬è‡ªå·±æˆ–æ˜¯ä¸å¿…æˆ–æ˜¯æ²¡æœ‰æ—¶é—´å»é’»ç ”æ‰€æœ‰çš„è¾¹ç¼˜çš„æƒ…å†µã€‚ </p>
<p>æ‰€ä»¥è¿™é‡Œæœ‰ä¸€äº›åšä¸»æ€»ç»“çš„å®ç”¨å¹¶é€Ÿè®°çš„è§„åˆ™ï¼Œå¹¶ä¸”åœ¨æœªæ¥åšä¸»ä¹Ÿä¼šæŒç»­åœ°è·Ÿè¿›å’Œæ›´æ–°ã€‚ </p>
<h2 id="é™æ€èµ„æº"><a href="#é™æ€èµ„æº" class="headerlink" title="é™æ€èµ„æº"></a>é™æ€èµ„æº</h2><p>æ°¸è¿œä¸ä¼šä¿®æ”¹çš„å†…å®¹ï¼šJS å’Œ CSS æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œå’Œä»»ä½•ç±»å‹çš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½å±äºè¿™ä¸ªç±»ç›®ã€‚</p>
<p>æ°¸è¿œï¼Œæˆ‘ç¡®å®è¯´çš„æ˜¯æ°¸è¿œã€‚ä¸ºé™æ€èµ„æºæŒ‡å®šç‰ˆæœ¬å·æ˜¯å¾ˆé€šç”¨çš„åšæ³•ã€‚å®ƒä»¬æ— è®ºä»€ä¹ˆæ—¶å€™æ”¹åŠ¨äº†ï¼Œå®ƒä»¬çš„ URL å°±æ”¹å˜äº†ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€äº›é’ˆå¯¹é™æ€èµ„æºçš„ç®€å•çš„è§„åˆ™ï¼š </p>
<ul>
<li>åœ¨æ–‡ä»¶æˆ–è€…è·¯å¾„ä¸­åµŒå…¥æŒ‡çº¹ã€‚é¿å…ä¸ºæŒ‡çº¹ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚å¦å¤–ï¼Œç¡®ä¿ç”Ÿæˆçš„URLé•¿åº¦è¶…è¿‡8ä¸ªä¸åŒçš„å­—ç¬¦ã€‚ </li>
<li>ä½¿ç”¨è¿™äº› HTTP å¤´ï¼š <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Cache-<span class="string">Control:</span> <span class="keyword">public</span>, max-age=<span class="number">31536000</span></div><div class="line"><span class="string">Expires:</span> (ä¸€å¹´åçš„ä»Šå¤©)</div><div class="line"><span class="string">ETag:</span> (åŸºäºå†…å®¹ç”Ÿæˆ)</div><div class="line">Last-<span class="string">Modified:</span> (è¿‡å»æŸä¸ªæ—¶é—´)</div><div class="line"><span class="string">Vary:</span> Accept-Encoding</div></pre></td></tr></table></figure>
</li>
</ul>
<p>é’ˆå¯¹é™æ€èµ„æºçš„è®¾ç½®å°±æ˜¯é‚£ä¹ˆç®€å•ã€‚ </p>
<h2 id="åŠ¨æ€èµ„æº"><a href="#åŠ¨æ€èµ„æº" class="headerlink" title="åŠ¨æ€èµ„æº"></a>åŠ¨æ€èµ„æº</h2><p>é’ˆå¯¹åº”ç”¨ç¨‹åºç§å¯†æ€§å’Œæ–°é²œåº¦æ–¹é¢éœ€æ±‚çš„ä¸åŒï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸åŒçš„ç¼“å­˜æ§åˆ¶è®¾ç½®ã€‚ </p>
<p>å¯¹äºéç§å¯†æ€§å’Œç»å¸¸æ€§å˜åŠ¨çš„èµ„æºï¼ˆæƒ³åƒä¸€ä¸‹è‚¡ç¥¨ä¿¡æ¯ï¼‰ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸‹é¢è¿™äº›ï¼š<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Cache-<span class="string">Control:</span> <span class="keyword">public</span>, max-age=<span class="number">0</span></div><div class="line"><span class="string">Expires:</span> (å½“å‰æ—¶é—´)</div><div class="line"><span class="string">ETag:</span> (åŸºäºå†…å®¹ç”Ÿæˆ)</div><div class="line">Last-<span class="string">Modified:</span> (è¿‡å»æŸä¸ªæ—¶é—´)</div><div class="line"><span class="string">Vary:</span> Accept-Encoding</div></pre></td></tr></table></figure></p>
<p>è¿™äº›è®¾ç½®çš„æ•ˆæœæ˜¯ï¼šè¿™äº›èµ„æºå¯ä»¥è¢«å…¬å¼€åœ°ï¼ˆé€šè¿‡æµè§ˆå™¨å’Œä»£ç†æœåŠ¡å™¨ï¼‰ç¼“å­˜èµ·æ¥ã€‚æ¯ä¸€æ¬¡åœ¨æµè§ˆå™¨ä½¿ç”¨è¿™äº›èµ„æºä¹‹å‰ï¼Œæµè§ˆå™¨æˆ–è€…ä»£ç†æœåŠ¡å™¨ä¼šæ£€æŸ¥è¿™äº›èµ„æºæ˜¯å¦æœ‰æ›´æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰ï¼Œå°±æŠŠå®ƒä»¬ä¸‹è½½ä¸‹æ¥ã€‚ </p>
<p>è¿™æ ·çš„è®¾ç½®éœ€è¦æ³¨æ„ï¼Œæµè§ˆå™¨åœ¨é‡æ–°æ£€æŸ¥èµ„æºæ—¶æ•ˆæ€§æ–¹é¢æœ‰ä¸€å®šçš„çµæ´»æ€§ã€‚å…¸å‹çš„æ˜¯ï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº†ã€Œè¿”å›ï¼å‰è¿›ã€æŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨ä¸ä¼šé‡æ–°æ£€æŸ¥è¿™äº›èµ„æºæ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ç‰ˆæœ¬ã€‚ä½ å¦‚æœéœ€è¦æ›´ä¸¥æ ¼çš„æ§åˆ¶ï¼Œéœ€è¦å‘ŠçŸ¥æµè§ˆå™¨å³ä½¿å½“ç”¨æˆ·ç‚¹å‡»äº†ã€Œè¿”å›ï¼å‰è¿›ã€æŒ‰é’®ï¼Œä¹Ÿéœ€è¦é‡æ–°æ£€æŸ¥è¿™äº›èµ„æºæ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Cache</span>-Control: <span class="keyword">public</span>, <span class="keyword">no</span>-<span class="keyword">cache</span>, <span class="keyword">no</span>-<span class="keyword">store</span></div></pre></td></tr></table></figure></p>
<p>ä¸æ˜¯æ‰€æœ‰çš„åŠ¨æ€èµ„æºéƒ½ä¼šé©¬ä¸Šå˜æˆè¿‡æ—¶çš„èµ„æºã€‚å¦‚æœå®ƒä»¬å¯ä»¥ä¿æŒè‡³å°‘5åˆ†é’Ÿçš„æ—¶æ•ˆï¼Œå¯ä»¥ä½¿ç”¨ï¼š<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Cache</span><span class="params">-Control</span>: <span class="keyword">public</span>, <span class="keyword">max</span><span class="params">-age</span>=<span class="number">300</span></div></pre></td></tr></table></figure></p>
<p>ç»è¿‡è¿™æ ·çš„è®¾ç½®ï¼Œæµè§ˆå™¨åªä¼šåœ¨5åˆ†é’Ÿä¹‹åæ‰é‡æ–°æ£€æŸ¥ã€‚åœ¨è¿™ä¹‹å‰ï¼Œç¼“å­˜çš„å†…å®¹ä¼šè¢«ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœåœ¨5åˆ†é’Ÿåï¼Œè¿™äº›è¿‡æ—¶çš„å†…å®¹éœ€è¦ä¸¥æ ¼æ§åˆ¶ï¼Œä½ å¯ä»¥æ·»åŠ  <code>must-revalidate</code> å­—æ®µï¼š<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Cache</span><span class="params">-Control</span>: <span class="keyword">public</span>, <span class="keyword">max</span><span class="params">-age</span>=<span class="number">300</span>, must<span class="params">-revalidate</span></div></pre></td></tr></table></figure></p>
<p>å¯¹äºç§å¯†æˆ–è€…é’ˆå¯¹ç”¨æˆ·çš„å†…å®¹ï¼Œéœ€è¦æŠŠ <code>public</code> æ›¿æ¢ä¸º <code>private</code> ä»¥é¿å…å†…å®¹è¢«ä»£ç†ç¼“å­˜ã€‚<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cache-<span class="string">Control:</span> <span class="keyword">private</span>, â€¦</div></pre></td></tr></table></figure></p>
<h2 id="Cache-Control-å’Œ-Expires"><a href="#Cache-Control-å’Œ-Expires" class="headerlink" title="Cache-Control å’Œ Expires"></a>Cache-Control å’Œ Expires</h2><p>å½“åŒæ—¶ä½¿ç”¨ <code>Cache-Control</code> å’Œ <code>Expires</code> æ—¶ï¼Œ<code>Cache-Control</code> è·å¾—ä¼˜å…ˆæƒã€‚ </p>
<p>åŒæ—¶ä½¿ç”¨ <code>Cache-Control</code> å’Œ <code>Expires</code> æ„å‘³ç€å¾—åˆ°æ›´å¹¿æ³›çš„æ”¯æŒï¼ˆè¢«ä¸åŒçš„æµè§ˆå™¨å’Œç‰ˆæœ¬ï¼‰ã€‚å½“ç„¶ï¼Œå®ƒä»¬ä¸¤ä¸ªåº”è¯¥è¢«é…ç½®æˆç›¸åŒçš„æ—¶æ•ˆå€¼ï¼Œä»¥é¿å…å¼•èµ·å›°æƒ‘ã€‚ </p>
<blockquote>
<p>å‚è€ƒ <a href="http://squid-web-proxy-cache.1019090.n4.nabble.com/Expires-vs-Cache-Control-max-age-td1033350.html" target="_blank" rel="external">Expires: vs. Cache-Control: max-age</a></p>
</blockquote>
<h2 id="ETag-å’Œ-Last-Modified"><a href="#ETag-å’Œ-Last-Modified" class="headerlink" title="ETag å’Œ Last-Modified"></a>ETag å’Œ Last-Modified</h2><p>è¿™ä¸¤ä¸ªå¤´åœ¨æµè§ˆå™¨å¯¹èµ„æºåšé‡æ–°æ£€æŸ¥éªŒè¯çš„æ—¶å€™ä¼šä½¿ç”¨åˆ°ã€‚å¤§è‡´æ¥è¯´ï¼Œæµè§ˆå™¨åªæ˜¯ç›²ç›®åœ°å­˜å‚¨è¿™ä¸¤ä¸ªæ¥è‡ªäºæœåŠ¡å™¨çš„å¤´çš„å€¼ï¼Œç„¶ååœ¨éœ€è¦æ£€æŸ¥éªŒè¯çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ ¹æ®è¯·æ±‚æ¡ä»¶ï¼ŒæŠŠè¿™ä¸¤ä¸ªæŒ‡å‘é€ç»™æœåŠ¡å™¨ï¼ˆåˆ†åˆ«é€šè¿‡ <code>If-None-Match</code> å’Œ <code>If-Modified-Since</code>ï¼‰ã€‚ </p>
<p>æ³¨æ„åªæœ‰åœ¨èµ„æºè¿‡æœŸçš„æƒ…å†µä¸‹ï¼Œæ£€æŸ¥éªŒè¯æ‰ä¼šå‘ç”Ÿã€‚ </p>
<p>åœ¨æœ‰æ¡ä»¶çš„è¯·æ±‚ä¸‹ï¼Œ<code>If-None-Match</code> å’Œ <code>If-Modified-Since</code> å¤´çš„å‡ºç°å–å†³äºæœåŠ¡å™¨ã€‚ç„¶è€Œï¼Œç”±äºæ˜¯æœåŠ¡å™¨ç”Ÿæˆçš„ <code>ETag</code> å’Œï¼ˆæˆ–ï¼‰ <code>Last-Modified</code>ï¼Œæ‰€ä»¥å®é™…ä¸Šï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ã€‚å¤§å¤šæ•°çš„æµè§ˆå™¨åœ¨å¯èƒ½çš„æƒ…å†µä¸‹éƒ½ä¼šæŠŠç€ä¸¤è€…éƒ½å‘é€ç»™æœåŠ¡å™¨ã€‚ </p>
<blockquote>
<p>å‚è€ƒ <a href="http://stackoverflow.com/questions/824152/what-takes-precedence-the-etag-or-last-modified-http-header" target="_blank" rel="external">What takes precedence: the ETag or Last-Modified HTTP header?</a></p>
</blockquote>
<p>ä¸€ä¸ªé€šå¸¸çš„å»ºè®®æ˜¯ï¼šé¿å…ä½¿ç”¨ <code>ETag</code>ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæ€»æ˜¯æœ‰ç”¨çš„å»ºè®®ã€‚<code>ETag</code> åœ¨åˆ¤æ–­å†…å®¹æ˜¯å¦çœŸçš„æ”¹åŠ¨æ–¹é¢ç¡®å®æä¾›äº†æ›´ä¸ºç²¾ç¡®çš„æ§åˆ¶ã€‚é’ˆå¯¹ç”Ÿæˆçš„ <code>ETag</code>ï¼Œé»˜è®¤çš„Apacheæ–¹æ³•éœ€è¦æŠŠæ–‡ä»¶çš„ç´¢å¼•èŠ‚ï¼ˆinodeï¼‰ï¼Œå¤§å°ï¼ˆsizeï¼‰å’Œæœ€åä¿®æ”¹æ—¶é—´ä½œä¸ºè¾“å…¥æ±‚å€¼å¾—åˆ°ã€‚è¿™ä¼šå¯¼è‡´åœ¨è´Ÿè½½å‡è¡¡çš„ç¯å¢ƒä¸­ï¼Œç”Ÿæˆçš„ <code>ETag</code> å€¼å˜å¾—æ¯«æ— ç”¨å¤„ï¼Œå› ä¸ºæ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šé’ˆå¯¹ç›¸åŒçš„æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªä¸åŒçš„ <code>Etag</code> å€¼ã€‚è¿™ä¸ªå¯èƒ½å°±æ˜¯å”¯ä¸€çš„é—®é¢˜å¯¼è‡´å¾ˆå¤šäººå®Œå…¨ç¦ç”¨ <code>ETag</code>ï¼Œå…¶å®åªè¦ç²¾ç¡®åœ°é’ˆå¯¹ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ <code>ETag</code> å€¼ï¼Œå°±æ²¡æœ‰å¿…è¦ç¦ç”¨ <code>ETag</code> äº†ã€‚ </p>
<blockquote>
<p>å‚è€ƒ <a href="https://www.techpunch.co.uk/development/should-your-site-be-using-etags-or-not" target="_blank" rel="external">Should your site be using etags or not?</a></p>
</blockquote>
<h2 id="æ‰‹åŠ¨æŒ‰ä¸‹-Ctrl-R"><a href="#æ‰‹åŠ¨æŒ‰ä¸‹-Ctrl-R" class="headerlink" title="æ‰‹åŠ¨æŒ‰ä¸‹ Ctrl-R"></a>æ‰‹åŠ¨æŒ‰ä¸‹ Ctrl-R</h2><p>å½“æŒ‰ä¸‹ <code>Ctrl-R</code> æ—¶ï¼Œæµè§ˆå™¨ä¼šæºå¸¦ä¸‹é¢çš„è¯·æ±‚ï¼Œä»¥æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°ç¼“å­˜å†…å®¹ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Cache</span>-Control: <span class="keyword">max</span>-age=<span class="number">0</span></div><div class="line"><span class="keyword">If</span>-<span class="keyword">None</span>-<span class="keyword">Match</span>: â€¦</div><div class="line"><span class="keyword">If</span>-Modifed-Since: â€¦</div></pre></td></tr></table></figure></p>
<p>æ³¨æ„è¿™å¹¶ä¸åªæ˜¯å’ŒåŸæœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå…¶åŒæ ·é€‚ç”¨äºä»£ç†æœåŠ¡å™¨ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒåªæ˜¯é‡æ–°æ£€æŸ¥éªŒè¯å†…å®¹ã€‚å¦‚æœæœåŠ¡å™¨å›åº”äº†ä¸€ä¸ª304ï¼Œæµè§ˆå™¨å°†ä¼šä½¿ç”¨ç¼“å­˜çš„å†…å®¹ã€‚ </p>
<h2 id="Vary-Accept-Encoding"><a href="#Vary-Accept-Encoding" class="headerlink" title="Vary: Accept-Encoding"></a>Vary: Accept-Encoding</h2><p>è¿™ä¸ªå¤´å¯¹äºä¸€äº›äººæ¥è¯´å¯èƒ½æ¯”è¾ƒé™Œç”Ÿã€‚ </p>
<p>å½“ä¸€ä¸ªèµ„æºå¯ç”¨äº† gzip å‹ç¼©ï¼Œå¹¶ä¸”è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼Œå®¢æˆ·ç«¯å¦‚æœä¸æ”¯æŒ gzip å‹ç¼©ï¼Œé‚£ä¹ˆåœ¨è¿™æ ·çš„æƒ…å†µä¸‹å°†ä¼šå¾—åˆ°ä¸æ­£ç¡®çš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯ï¼Œå‹ç¼©è¿‡çš„æ•°æ®ï¼‰ã€‚è¿™å°†ä¼šä½¿ä»£ç†æœåŠ¡å™¨ç¼“å­˜ä¸¤ä¸ªç‰ˆæœ¬çš„èµ„æºï¼šä¸€ä¸ªæ˜¯å‹ç¼©è¿‡çš„ï¼Œä¸€ä¸ªæ˜¯æ²¡å‹ç¼©è¿‡çš„ã€‚æ­£ç¡®ç‰ˆæœ¬çš„èµ„æºå°†åœ¨è¯·æ±‚å¤´å‘é€ä¹‹åè¿›è¡Œä¼ è¾“ã€‚ </p>
<p>è¿˜æœ‰ä¸€ä¸ªç°å®çš„åŸå› ï¼šIE æµè§ˆå™¨ä¸ç¼“å­˜ä»»ä½•å¸¦æœ‰ <code>Vary</code> å¤´ä½†å€¼ä¸ä¸º <code>Accept-Encoding</code> å’Œ <code>User-Agent</code> çš„èµ„æºã€‚æ‰€ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ·»åŠ è¿™ä¸ªå¤´ï¼Œæ‰èƒ½ç¡®ä¿è¿™äº›èµ„æºåœ¨ IE ä¸‹è¢«ç¼“å­˜ã€‚ </p>
<blockquote>
<p>æœ¬æ–‡è¯‘è‡ª Bryan Tsai çš„ ã€Š<a href="https://bryantsai.com/http-caching/" target="_blank" rel="external">Http Caching</a>ã€‹ã€‚</p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers" target="_blank" rel="external">Increasing Application Performance with HTTP Cache Headers</a> </li>
<li><a href="http://tomayko.com/writings/things-caches-do" target="_blank" rel="external">Things Caches Do</a></li>
<li><a href="https://developers.google.com/speed/articles/caching" target="_blank" rel="external">Google Developers: HTTP Caching</a></li>
<li><a href="https://developers.google.com/speed/docs/best-practices/caching?csw=1" target="_blank" rel="external">Google Developers: Optimize Caching</a></li>
<li><a href="http://www.mnot.net/cache_docs/" target="_blank" rel="external">Caching Tutorial for Web Authors and Webmasters</a></li>
<li><a href="http://palizine.plynt.com/issues/2008Jul/cache-control-attributes/" target="_blank" rel="external">Cache Control Directives Demystified</a></li>
<li><a href="http://webmasters.stackexchange.com/questions/1459/what-are-the-hard-and-fast-rules-for-cache-control?lq=1" target="_blank" rel="external">What are the hard and fast rules for Cache Control?</a></li>
<li><a href="http://stackoverflow.com/questions/1046966/whats-the-difference-between-cache-control-max-age-0-and-no-cache" target="_blank" rel="external">Whatâ€™s the difference between Cache-Control: max-age=0 and no-cache?</a></li>
<li><a href="http://stackoverflow.com/questions/2932890/http-cache-control-max-age-must-revalidate" target="_blank" rel="external">HTTP Cache Control max-age, must-revalidate</a></li>
<li><a href="http://stackoverflow.com/questions/18148884/difference-between-no-cache-and-must-revalidate?rq=1" target="_blank" rel="external">Difference between no-cache and must-revalidate</a></li>
<li><a href="http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx" target="_blank" rel="external">Caching Improvements in Internet Explorer 9</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰æ—¶ï¼ŒHTTP ä¸­çš„ç¼“å­˜å¯èƒ½ä¼šéå¸¸è®©äººå¤´ç–¼ã€‚&lt;br&gt;æŒ‰ç…§æ–‡æ¡£æ­£ç¡®åœ°ä½¿ç”¨ HTTP å¹¶ä¸æ˜¯é‚£ä¹ˆå›°éš¾ï¼Œä½†äº‹å®ä¸Šï¼Œä¸åŒçš„æµè§ˆå™¨å’Œ HTTP ç‰ˆæœ¬å¸¸å¸¸å›°æ‰°ç€æˆ‘ä»¬ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="HTTP Cache ç¼“å­˜ ä¼˜åŒ–" scheme="https://aotu.io/tags/HTTP-Cache-%E7%BC%93%E5%AD%98-%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>é€šè¿‡ Babel ä½¿ç”¨ ES6 çš„ import</title>
    <link href="https://aotu.io/notes/2016/09/22/es6-import-with-babel/"/>
    <id>https://aotu.io/notes/2016/09/22/es6-import-with-babel/</id>
    <published>2016-09-22T07:28:59.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<a href="http://www.pauleveritt.org/articles/pylyglot/modules/" target="_blank" rel="external">ã€ŠModules with CommonJSã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç±»ä¼¼äº Python çš„ import æ–¹å¼ï¼ŒæŠŠæˆ‘ä»¬çš„ä»£ç ç»„ç»‡æˆæ¨¡å—ã€‚é‚£ç¯‡æ–‡ç« å±•ç¤ºäº† NodeJS çš„åŸç”Ÿæ¨¡å—ç³»ç»Ÿ â€“ CommonJSã€‚åŒæ—¶ï¼Œæ–‡ç« è¿˜é˜è¿°äº†åœ¨é‚£äº›ä¸æ”¯æŒæ¨¡å—å’Œæ¨¡å—åŠ è½½å™¨çš„æµè§ˆå™¨ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ Webpack å»è§£å†³è¿™ç§å…¼å®¹æ€§é—®é¢˜ã€‚ </p>
<a id="more"></a>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä¸åŒçš„ import ç³»ç»Ÿï¼Œè¿™ä¸ªç³»ç»ŸåŸºäºæœ€æ–°çš„ JavaScript æ ‡å‡†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ ES6 çš„ importï¼Œç„¶åé€šè¿‡<a href="http://babeljs.io" target="_blank" rel="external">Babelè½¬æ¢å™¨</a>å°†æˆ‘ä»¬çš„ä»£ç è½¬æ¢æˆåœ¨ Node å’Œæµè§ˆå™¨ç¯å¢ƒéƒ½å¯ä»¥è¿è¡Œçš„å…¼å®¹æ€§ä»£ç ã€‚ </p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¯´ <code>ES6</code> è€Œä¸æ˜¯ <code>ES2015</code> ï¼Ÿè¯šç„¶ï¼Œ<code>ES6</code> ä½œä¸ºä¸€ä¸ªæ ‡ç­¾æ­£é€æ¸è¢«é—å¿˜ï¼Œå› ä¸ºç°åœ¨ç›¸å…³å§”å‘˜ä¼šå·²ç»é€šè¿‡åŸºäºæ—¶é—´çš„å‘½åæ–¹æ¡ˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç‰ˆæœ¬æ•°å­—çš„æ–¹å¼å»ç®¡ç†é‚£äº›è§„èŒƒã€‚ä½†äº‹å®è¯æ˜ï¼Œæ¨¡å—å’ŒåŠ è½½å™¨æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„å¤æ‚çš„ä¸šåŠ¡ï¼ŒåŒ…å«ç€åæœŸä¼šæ¨å‡ºçš„ä¸åŒæ–¹é¢çš„ä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨ <code>ES6æ¨¡å—</code> ä»¥é¿å…ä¸€äº›ç»†èŠ‚ã€‚  </p>
</blockquote>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul>
<li>å®‰è£…å’Œé…ç½® Babel</li>
<li>å°† CommonJS ä¸­çš„æ¨¡å—å’Œ import åˆ‡æ¢ä¸º ES6</li>
<li>æŠŠ Babel æ’å…¥åˆ°å‰ç«¯å·¥å…·é“¾ï¼ˆMochaï¼ŒWebpackï¼ŒESLintï¼‰ä¸­ </li>
</ul>
<h2 id="èµ·ç‚¹"><a href="#èµ·ç‚¹" class="headerlink" title="èµ·ç‚¹"></a>èµ·ç‚¹</h2><p>æˆ‘ä»¬éœ€è¦åœ¨ä¸€äº›å‰æœŸçš„æ–‡ç« <sup><a href="http://www.pauleveritt.org/articles/pylyglot/" target="_blank" rel="external">æ³¨1</a></sup>è·å¾—ä¸€äº›ä»£ç ç‰‡æ®µä½œä¸ºèµ·ç‚¹ï¼Œç”Ÿæˆæœ¬æ–‡çš„ä»£ç ï¼š </p>
<ul>
<li>éƒ¨åˆ† webpack ï¼Œéƒ¨åˆ† ESLintï¼Œéƒ¨åˆ† Mocha</li>
<li>ç¡®ä¿ ESLint åœ¨ PyCharm ä¸­çš„è¿æ¥</li>
<li>npm start å’Œ npm testï¼Œè¿˜æœ‰ Mocha test è¿è¡Œå™¨</li>
</ul>
<p>æˆ‘ä»¬çš„ index.html æ–‡ä»¶éå¸¸ç®€å•ï¼Œè¿™æ¥è‡ªäº Webpack ç›¸å…³çš„æ–‡ç« ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ES6 Imports<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Incrementer<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Webpack çš„é…ç½®ä¹Ÿæ˜¯ä¸€æ ·ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>: <span class="string">'./app.js'</span>,</div><div class="line">    <span class="attr">output</span>: &#123;</div><div class="line">        <span class="attr">path</span>: __dirname,</div><div class="line">        <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">devtool</span>: <span class="string">'source-map'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>ç»è¿‡è¿™äº›æ­¥éª¤ï¼ŒWebpack å°†ä¼šæŠŠä¸‹é¢çš„ <code>app1.js</code> å’Œ <code>lib1.js</code> æ‰“åŒ…ï¼Œé€šè¿‡ <code>webpack-dev-server</code> æä¾›æœåŠ¡ï¼š  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> incrementer = <span class="built_in">require</span>(<span class="string">'./lib1'</span>);</div><div class="line"><span class="keyword">var</span> newVal = incrementer(<span class="number">3</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'newVal'</span>, newVal);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">incrementer</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> i+<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = incrementer;</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œæˆ‘ä»¬ä»ä¹‹å‰çš„æ–‡ç« ä¸­è·å–ä¸€ä»½ Mocha æµ‹è¯•æ–‡ä»¶ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> describe = <span class="built_in">require</span>(<span class="string">'mocha'</span>).describe,</div><div class="line">    it = <span class="built_in">require</span>(<span class="string">'mocha'</span>).it,</div><div class="line">    expect = <span class="built_in">require</span>(<span class="string">'chai'</span>).expect,</div><div class="line">    incrementer = <span class="built_in">require</span>(<span class="string">'./lib1'</span>);</div><div class="line"></div><div class="line">describe(<span class="string">'Hello World'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it(<span class="string">'should increment a value'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> result = incrementer(<span class="number">8</span>);</div><div class="line">        expect(result).eql(<span class="number">9</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è®©æˆ‘ä»¬å®‰è£… Babel â€“ ä¸€ä¸ªç°ä»£çš„ JavaScript è½¬æ¢å™¨ï¼Œé€šè¿‡ä¸€ä¸ª <code>loader</code> åœ¨ Webpack æ‰“åŒ…çš„æ—¶å€™è¿›è¡Œç¼–è¯‘è½¬æ¢ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save-dev babel-preset-es2015 babel-loader</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸€æ­¥å°†ä¼šåœ¨æˆ‘ä»¬çš„ <code>package.json</code> æ–‡ä»¶çš„ <code>devDependencies</code> ä¸­æ·»åŠ ä¾èµ–ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"pylyglot"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">"Series of articles for Polyglot Python with PyCharm"</span>,</div><div class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"start"</span>: <span class="string">"webpack-dev-server"</span>,</div><div class="line">    <span class="string">"test"</span>: <span class="string">"mocha --compilers js:babel-core/register test*.js"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"repository"</span>: &#123;</div><div class="line">    <span class="string">"type"</span>: <span class="string">"git"</span>,</div><div class="line">    <span class="string">"url"</span>: <span class="string">"git+ssh://git@github.com/pauleveritt/pauleveritt.github.io.git"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"author"</span>: <span class="string">"Paul Everitt"</span>,</div><div class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="string">"bugs"</span>: &#123;</div><div class="line">    <span class="string">"url"</span>: <span class="string">"https://github.com/pauleveritt/pauleveritt.github.io/issues"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"homepage"</span>: <span class="string">"https://github.com/pauleveritt/pauleveritt.github.io#readme"</span>,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;</div><div class="line">    <span class="string">"babel-loader"</span>: <span class="string">"^6.2.1"</span>,</div><div class="line">    <span class="string">"babel-preset-es2015"</span>: <span class="string">"^6.3.13"</span>,</div><div class="line">    <span class="string">"chai"</span>: <span class="string">"^3.4.1"</span>,</div><div class="line">    <span class="string">"eslint"</span>: <span class="string">"^1.10.3"</span>,</div><div class="line">    <span class="string">"mocha"</span>: <span class="string">"^2.3.4"</span>,</div><div class="line">    <span class="string">"webpack"</span>: <span class="string">"^1.12.12"</span>,</div><div class="line">    <span class="string">"webpack-dev-server"</span>: <span class="string">"^1.14.1"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="ES6-æ¨¡å—"><a href="#ES6-æ¨¡å—" class="headerlink" title="ES6 æ¨¡å—"></a>ES6 æ¨¡å—</h2><p>è®©æˆ‘ä»¬æŠŠåŸºäº CommonJS çš„æ¨¡å—å’Œå¯¼å…¥ï¼Œè½¬æ¢ä¸ºåŸºäº ES6 çš„æ¨¡å—ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>app2.js</code> æ–‡ä»¶ï¼Œå…¶ä½¿ç”¨äº†ä¸ä¸€æ ·çš„ import è¯­æ³•ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> incrementer <span class="keyword">from</span> <span class="string">'./lib2'</span>;</div><div class="line"><span class="keyword">var</span> newVal = incrementer(<span class="number">3</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'newVal'</span>, newVal);</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬è¿™æ ·åšçš„æ—¶å€™ï¼ŒPyCharm é©¬ä¸Šå°±ä¼šå´©æºƒã€‚å®ƒç›®å‰åªæ”¯æŒ <code>ECMAScript5.1</code> æ ‡å‡†ä½œä¸º JavaScript çš„è¯­æ³•ã€‚æˆ‘ä»¬ç°åœ¨ç»™äº†å®ƒæ— æ•ˆçš„è¯­æ³•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ <code>Preferences -&gt; Languages &amp; Frameworks -&gt; JavaScript -&gt; JavaScript language version</code> ä¸­ï¼Œæ›´æ”¹å…¶ä¸º <code>ECMAScript 6</code>ã€‚  </p>
<p>è¿™æ—¶å€™ï¼ŒESLint ä¹Ÿä¼šå¤±æ•ˆ â€“ å®ƒå¿…é¡»è¦è®¤è¯†è¿™äº›æ–°çš„è¯­æ³•ã€‚å¹¸è¿çš„æ˜¯ï¼ŒESLint å’Œ Babel ä¸€æ ·ï¼Œéƒ½æ˜¯éå¸¸æµè¡Œå’Œå¿«é€Ÿæ›´æ–°æ¢ä»£çš„å¼€æºé¡¹ç›®ã€‚å®ƒä»¬å¾ˆå®¹æ˜“å°±èƒ½å’Œ ES2015ã€ES2016 å’Œ ES2017 ååŒå·¥ä½œã€‚è®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„ <code>.eslintrc</code> æ–‡ä»¶ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"rules"</span>: &#123;</div><div class="line">    <span class="string">"strict"</span>: <span class="number">0</span>,</div><div class="line">    <span class="string">"quotes"</span>: [</div><div class="line">      <span class="number">1</span>,</div><div class="line">      <span class="string">"single"</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="string">"ecmaFeatures"</span>: &#123;</div><div class="line">    <span class="string">"modules"</span>: <span class="literal">true</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"env"</span>: &#123;</div><div class="line">    <span class="string">"browser"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="string">"jquery"</span>: <span class="literal">true</span>,</div><div class="line">    <span class="string">"es6"</span>: <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬ç°åœ¨æ–°å»ºä¸€ä¸ª <code>lib2.js</code> æ–‡ä»¶ï¼Œå…¶å°†ä½¿ç”¨ ES6 çš„ export è¯­æ³•å¯¼å‡ºæˆ‘ä»¬çš„å‡½æ•°ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">incrementer</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> i+<span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§æ¡ä»¶ä¸‹ï¼Œæ­¤æ¨¡å—é™¤äº†è¯¥å‡½æ•°ï¼Œæ²¡æœ‰ä»»ä½•å¯ä»¥å¯¼å…¥çš„ä¸œè¥¿ã€‚å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„ï¼Œä¸å…¼å®¹çš„è¯­æ³•ï¼›æˆ‘ä»¬å¯ä»¥é¿å…ç¹ççš„ <code>module.exports</code>ï¼Œè€Œç›´æ¥åœ¨å£°æ˜ä¸­ä½¿ç”¨ <code>export default</code>ã€‚</p>
<p>åœ¨å¯¼å‡ºè¯­æ³•ä¸­ä½¿ç”¨ <code>default</code>ï¼Œæ„å‘³ç€æˆ‘ä»¬çš„æ„æ€æ˜¯æŠŠè¿™ä¸ªå‡½æ•°æ˜¯è¿™ä¸ªæ¨¡å—å”¯ä¸€å¯¼å‡ºçš„ä¸œè¥¿ã€‚äº‹å®ä¸Šï¼Œä½ è¿˜å¯ä»¥åƒè¿™æ ·å¯¼å‡ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°çš„å¯¼å‡ºæ–¹å¼ã€‚é€šè¿‡é»˜è®¤çš„ exportï¼Œè¿™ä¸ªå‡½æ•°çš„åå­—æ¥æºäºå¯¼å…¥è¿™ä¸ªå‡½æ•°çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯å¯¼å‡ºè¿™ä¸ªå‡½æ•°çš„æ¨¡å—ã€‚ </p>
<p>æˆ‘ä»¬ç°åœ¨å¾—åˆ°äº†é€šè¿‡ ES6 è¿›è¡Œå¯¼å…¥å’Œå¯¼å‡ºçš„æ¨¡å—ã€‚ä¸ºäº†æŸ¥çœ‹å®ƒåœ¨ Node ä¸­æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ä½¿ç”¨ ES6 çš„ import æ¥æ£€éªŒï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; describe, before, it &#125; <span class="keyword">from</span> <span class="string">'mocha'</span>;</div><div class="line"><span class="keyword">import</span> &#123;expect&#125; <span class="keyword">from</span> <span class="string">'chai'</span>;</div><div class="line"><span class="keyword">import</span> incrementer <span class="keyword">from</span> <span class="string">'./lib2'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'Hello World'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it(<span class="string">'should increment a value'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> result = incrementer(<span class="number">8</span>);</div><div class="line">        expect(result).eql(<span class="number">9</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬è·‘ä¸€ä¸ªï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run <span class="built_in">test</span>2.js</div></pre></td></tr></table></figure></p>
<p>æ±—ï¼ŒæŠ¥é”™äº†ï¼š<br><figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">SyntaxError</span>: <span class="type">Unexpected</span> token <span class="keyword">import</span></div></pre></td></tr></table></figure></p>
<p>è¿™å¥½åƒæ˜¯ Mocha â€“ ä¸€ä¸ª Node åº”ç”¨ï¼Œä¸èƒ½è§£ææˆ‘ä»¬çš„ JavaScriptã€‚å¥½å§ï¼Œæ²¡å¼€ç©ç¬‘â€¦â€¦å®ƒç°åœ¨ä½¿ç”¨ES6ç¼–å†™çš„ã€‚æˆ‘ä»¬éœ€è¦ä¸€äº›ä¸œè¥¿è½¬æŠŠã€Œæœªæ¥ã€çš„ JavaScriptï¼ˆES6 æ¨¡å—ï¼‰è½¬æ¢æˆç°åœ¨çš„ JavaScriptï¼ˆNodeï¼‰ã€‚ </p>
<h2 id="é€šè¿‡-Babel-ç¼–è¯‘"><a href="#é€šè¿‡-Babel-ç¼–è¯‘" class="headerlink" title="é€šè¿‡ Babel ç¼–è¯‘"></a>é€šè¿‡ Babel ç¼–è¯‘</h2><p>è¿™ç§è½¬æ¢ç§°ä¸ºã€Œç¼–è¯‘(transpiling)ã€<sup><a href="http://blog.csdn.net/napolunyishi/article/details/20473799" target="_blank" rel="external">æ³¨2</a></sup>ï¼Œè€Œ Babel æ˜¯ä½¿ç”¨äººæ•°æœ€å¤šçš„ç¼–è¯‘å·¥å…·ã€‚æˆ‘ä»¬åœ¨ <a href="http://www.pauleveritt.org/articles/pylyglot/pythonic_js/" target="_blank" rel="external">Pythonic JavaScript with ES2015</a> ä¸­è°ˆè®ºäº†æ›´å¤šå…³äºç¼–è¯‘æ–¹é¢çš„ä¸œè¥¿ã€‚ </p>
<p>æˆ‘ä»¬éœ€è¦å‘Šè¯‰ Mocha ä»¥è¿è¡Œæˆ‘ä»¬çš„ JavaScript â€“ åŒ…æ‹¬åº”ç”¨ä»£ç å’Œæµ‹è¯•ä»£ç ã€‚è¿™äº›ä»£ç åŒ…å«äº†éœ€è¦ Babel æ–°ä»£ç é£æ ¼ã€‚é¦–å…ˆï¼ŒBabel æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ˜¾ç„¶ç°åœ¨äººæ‰‹ä¸€ä»½è¿™ä¸ªä¸œè¥¿ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"presets"</span>: [<span class="string">"es2015"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ç”¨æ¥é…ç½® Babelæœ¬èº«çš„ã€‚ä¸ºäº†å‘ŠçŸ¥æˆ‘ä»¬çš„ PyCharm Mocha è¿è¡Œé…ç½®ä»¥ä½¿ç”¨ Babelï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘è¿è¡Œé…ç½®ï¼Œåœ¨é¢å¤–çš„ Mocha é€‰é¡¹ï¼ˆExtra Mocha optionsï¼‰ä¸­æ·»åŠ è¿™ä¸ªï¼š </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">--compilers js:babel-core/register</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çš„ Mocha æµ‹è¯•ç°åœ¨å°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬çš„ <code>lib2.js</code> ä¹Ÿèƒ½è·‘èµ·æ¥äº†ã€‚ä¸ºäº†èƒ½åœ¨ <code>npm run</code> è„šæœ¬ä¸‹å¤„ç†è¿™äº›å˜æ›´ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>package.json</code>ï¼š </p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"test"</span>: <span class="string">"mocha --compilers js:babel-core/register test*.js"</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸€æ­¥é€‚ç”¨äº Nodeã€‚é‚£æµè§ˆå™¨ä¸‹å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åƒ Mocha é‚£æ ·ï¼Œå‘ŠçŸ¥ Webpack åœ¨æ‰“åŒ…çš„æ—¶å€™ä½¿ç”¨ Babel ç¼–è¯‘ä»£ç å—ï¼Ÿæ˜¯çš„ï¼Œå¹¶ä¸”è¿™ä¸ªéå¸¸ç®€å•ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>: <span class="string">'./app2.js'</span>,</div><div class="line">    <span class="attr">output</span>: &#123;</div><div class="line">        <span class="attr">path</span>: __dirname,</div><div class="line">        <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">module</span>: &#123;</div><div class="line">        <span class="attr">loaders</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">                <span class="attr">loader</span>: <span class="string">'babel-loader'</span></div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">devtool</span>: <span class="string">'source-map'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¸ºæ‰€æœ‰çš„ <code>.js</code> åç¼€çš„æ–‡ä»¶éƒ½æ·»åŠ äº†ä¸€ä¸ª <code>module</code> é¡¹ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ª <code>loader</code>ã€‚è¿™ä¸ª <code>loader</code> é€šè¿‡ <code>babel-loader</code> è½¯ä»¶è¿è¡Œè¿™äº›æ–‡ä»¶ï¼Œè€Œè¿™ä¸ªè½¯ä»¶æ˜¯ä¸€ä¸ª Babel åœ¨ Webpack ä¸‹çš„æ’ä»¶ã€‚<code>babel-loader</code> ä½¿ç”¨çš„æ˜¯åœ¨ <code>.babelrc</code> æ–‡ä»¶ä¸‹å…±äº«çš„è®¾ç½®ï¼Œè¿™å¯ä»¥é¿å… Babel åœ¨ Mocha å’Œ Webpack ä¸‹çš„ç‹¬ç«‹è®¾ç½®ã€‚ </p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬ç°åœ¨åªæ˜¯ä½¿ç”¨åˆ°äº† ES6 ä¸­å¾ˆå°ä¸€éƒ¨åˆ†çš„ç‰¹æ€§ï¼šæ¨¡å—å’Œå¯¼å…¥ã€‚ä¸ºäº†ä½¿ç”¨è¿™éƒ¨åˆ†ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å·¥å…·â€“ Babel åˆ°å‰ç«¯å·¥å…·é“¾ä¸­ï¼Œå¹¶å¤„ç†ç”±æ­¤å¸¦æ¥çš„è¿é”æ•ˆåº”ï¼š </p>
<ul>
<li>PyCharm -&gt; ECMAScript 6 </li>
<li>ESLint</li>
<li>Mocha</li>
<li>Webpack </li>
</ul>
<p>åœ¨ä½ ç¼–ç¨‹çš„æ—¶å€™ï¼Œä½ çš„ CPU è¯šç„¶ä¼šä¸€ç›´å¤„äºç¹å¿™çš„çŠ¶æ€ï¼Œå› ä¸ºå®ƒè¦ä¸€ç›´ç¼–è¯‘å’Œæ‰“åŒ…ã€‚æœ‰è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•ï¼Œä½†æ˜¯ç›®å‰æ¥è¯´ï¼Œç›¸ä¿¡æˆ‘â€¦â€¦è¿™å¾ˆå€¼å¾—ï¼Œå› ä¸ºåœ¨ä¸‹ä¸€éæ–‡ç« ä¸­å°±ä¼šæ˜ç™½äº†~  </p>
<blockquote>
<p>æœ¬æ–‡è¯‘è‡ª Paul Everitt çš„ ã€Š<a href="http://www.pauleveritt.org/articles/pylyglot/es6_imports/" target="_blank" rel="external">ES6 Imports with Babel</a>ã€‹ã€‚</p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="http://www.pauleveritt.org/articles/pylyglot/" target="_blank" rel="external">Paul Everittâ€™s blog</a></li>
<li><a href="http://blog.csdn.net/napolunyishi/article/details/20473799" target="_blank" rel="external">Compiling å’Œ Transpiling çš„åŒºåˆ«</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨&lt;a href=&quot;http://www.pauleveritt.org/articles/pylyglot/modules/&quot;&gt;ã€ŠModules with CommonJSã€‹&lt;/a&gt;ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç±»ä¼¼äº Python çš„ import æ–¹å¼ï¼ŒæŠŠæˆ‘ä»¬çš„ä»£ç ç»„ç»‡æˆæ¨¡å—ã€‚é‚£ç¯‡æ–‡ç« å±•ç¤ºäº† NodeJS çš„åŸç”Ÿæ¨¡å—ç³»ç»Ÿ â€“ CommonJSã€‚åŒæ—¶ï¼Œæ–‡ç« è¿˜é˜è¿°äº†åœ¨é‚£äº›ä¸æ”¯æŒæ¨¡å—å’Œæ¨¡å—åŠ è½½å™¨çš„æµè§ˆå™¨ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ Webpack å»è§£å†³è¿™ç§å…¼å®¹æ€§é—®é¢˜ã€‚ &lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ES6" scheme="https://aotu.io/tags/ES6/"/>
    
      <category term="Babel" scheme="https://aotu.io/tags/Babel/"/>
    
  </entry>
  
  <entry>
    <title>å†™ç»™æ–°äººçš„callã€applyã€bind</title>
    <link href="https://aotu.io/notes/2016/09/02/Different-Binding/"/>
    <id>https://aotu.io/notes/2016/09/02/Different-Binding/</id>
    <published>2016-09-02T06:56:23.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€call"><a href="#1ã€call" class="headerlink" title="1ã€call()"></a>1ã€call()</h2><p>è¯­æ³•ï¼š</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span>.<span class="title">call</span></span>(thisArg[, arg1[, arg2[, ...]]])</div></pre></td></tr></table></figure>
<p>thisArgï¼šfunå‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„thiså€¼ï¼Œå¯èƒ½çš„å€¼ä¸ºï¼š</p>
<ul>
<li>ä¸ä¼ ï¼Œæˆ–è€…ä¼ nullï¼Œundefinedï¼Œ thisæŒ‡å‘<strong>windowå¯¹è±¡</strong></li>
<li>ä¼ é€’å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°åfun2ï¼ŒthisæŒ‡å‘<strong>å‡½æ•°fun2çš„å¼•ç”¨</strong></li>
<li>å€¼ä¸ºåŸå§‹å€¼(æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼),thisä¼šæŒ‡å‘è¯¥åŸå§‹å€¼çš„è‡ªåŠ¨åŒ…è£…å¯¹è±¡ï¼Œå¦‚ Stringã€Numberã€Boolean</li>
<li>ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"></div><div class="line">a.call(b);  <span class="comment">// function b()&#123;&#125;</span></div></pre></td></tr></table></figure>
<p>ç»å¸¸ä¼šçœ‹åˆ°è¿™ç§ä½¿ç”¨æƒ…å†µï¼š</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// å°†argumentsè½¬æˆæ•°ç»„</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);  </div><div class="line">&#125;</div><div class="line"><span class="built_in">list</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);  <span class="comment">// [1, 2, 3]</span></div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆèƒ½å®ç°è¿™æ ·çš„åŠŸèƒ½å°†argumentsè½¬æˆæ•°ç»„ï¼Ÿé¦–å…ˆcalläº†ä¹‹åï¼ŒthisæŒ‡å‘äº†æ‰€ä¼ è¿›å»çš„argumentsã€‚æˆ‘ä»¬å¯ä»¥å‡è®¾sliceæ–¹æ³•çš„å†…éƒ¨å®ç°æ˜¯è¿™æ ·å­çš„ï¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œç„¶åforå¾ªç¯éå†thisï¼Œå°†this[i]ä¸€ä¸ªä¸ªåœ°èµ‹å€¼ç»™æ–°æ•°ç»„ï¼Œæœ€åè¿”å›è¯¥æ–°æ•°ç»„ã€‚å› æ­¤ä¹Ÿå°±å¯ä»¥ç†è§£èƒ½å®ç°è¿™æ ·çš„åŠŸèƒ½äº†ã€‚</p>
<h2 id="2ã€apply"><a href="#2ã€apply" class="headerlink" title="2ã€apply()"></a>2ã€apply()</h2><p>è¯­æ³•ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Chrome 14 ä»¥åŠ Internet Explorer 9 ä»ç„¶ä¸æ¥å—ç±»æ•°ç»„å¯¹è±¡ã€‚</span></div><div class="line"><span class="comment">// thisArgçš„å¯èƒ½å€¼å’Œcallä¸€æ ·</span></div><div class="line"><span class="function"><span class="keyword">fun</span>.<span class="title">apply</span><span class="params">(thisArg[, argsArray])</span></span></div></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> numbers = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>];</div><div class="line"><span class="built_in">var</span> <span class="built_in">max</span> = Math.<span class="built_in">max</span>.<span class="built_in">apply</span>(null, numbers);</div><div class="line">console.<span class="built_in">log</span>(<span class="built_in">max</span>)  // <span class="number">7</span></div></pre></td></tr></table></figure>
<p>å¹³æ—¶Math.maxåªèƒ½è¿™æ ·å­ç”¨ï¼š<code>Math.max(5,6,2,3,7)</code>;<br>åˆ©ç”¨applyçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç‰¹æ€§ï¼Œä»è€Œèƒ½å¤Ÿç®€ä¾¿åœ°ä»æ•°ç»„ä¸­æ‰¾åˆ°æœ€å¤§å€¼ã€‚</p>
<h2 id="3ã€bind"><a href="#3ã€bind" class="headerlink" title="3ã€bind"></a>3ã€bind</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>è¯­æ³•ï¼š</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span>.<span class="title">bind</span></span>(thisArg[, arg1[, arg2[, ...]]]);</div></pre></td></tr></table></figure>
<p>bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ–°å‡½æ•°</strong>ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ã€‚</p>
<p>bindæ˜¯ES5æ–°å¢çš„ä¸€ä¸ªæ–¹æ³•ï¼Œ<strong>ä¸ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°</strong>ï¼ˆcallæˆ–applyä¼šè‡ªåŠ¨æ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼‰ï¼Œè€Œæ˜¯<strong>è¿”å›å¯¹ç»‘å®šå‡½æ•°çš„å¼•ç”¨</strong>ã€‚</p>
<p>å½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶ï¼ŒthisArgå‚æ•°ä½œä¸º thisï¼Œ<strong>ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°</strong>æ¥è°ƒç”¨åŸå‡½æ•°ã€‚</p>
<p>ç®€å•åœ°è¯´ï¼Œbindä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥æœ‰é¢„è®¾çš„å‚æ•°ã€‚</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// å°†argumentsè½¬æˆæ•°ç»„</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">var</span> leadingThirtysevenList = <span class="built_in">list</span>.bind(<span class="literal">undefined</span>, <span class="number">37</span>); <span class="comment">// ç»‘å®šå‡½æ•°</span></div><div class="line"><span class="built_in">var</span> <span class="built_in">list</span> = leadingThirtysevenList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// è°ƒç”¨ç»‘å®šå‡½æ•°</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">list</span>); <span class="comment">// [37, 1, 2, 3]</span></div></pre></td></tr></table></figure>
<h3 id="bindè°ƒç”¨ç®€å•"><a href="#bindè°ƒç”¨ç®€å•" class="headerlink" title="bindè°ƒç”¨ç®€å•"></a>bindè°ƒç”¨ç®€å•</h3><p>æŠŠç±»æ•°ç»„æ¢æˆçœŸæ­£çš„æ•°ç»„ï¼Œbindèƒ½å¤Ÿæ›´ç®€å•åœ°ä½¿ç”¨ï¼š</p>
<ul>
<li>applyç”¨æ³•</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</div><div class="line"><span class="comment">// ...</span></div><div class="line">slice.apply(<span class="built_in">arguments</span>);  <span class="comment">// ç±»ä¼¼å¯¹è±¡çš„æ–¹æ³•é‚£æ ·è°ƒç”¨</span></div></pre></td></tr></table></figure>
<ul>
<li>bindç”¨æ³•</li>
</ul>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> unboundSlice = <span class="keyword">Array</span>.prototype.slice;</div><div class="line"><span class="keyword">var</span> slice = <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span>.<span class="title">apply</span>.<span class="title">bind</span><span class="params">(unboundSlice)</span>;</span></div><div class="line"><span class="comment">// ...</span></div><div class="line">slice(arguments);  <span class="comment">// ç›´æ¥è°ƒç”¨ï¼Œç®€å•</span></div></pre></td></tr></table></figure>
<h2 id="4ã€å®ƒä»¬çš„åŒºåˆ«"><a href="#4ã€å®ƒä»¬çš„åŒºåˆ«" class="headerlink" title="4ã€å®ƒä»¬çš„åŒºåˆ«"></a>4ã€å®ƒä»¬çš„åŒºåˆ«</h2><p>ç›¸åŒä¹‹å¤„ï¼šæ”¹å˜å‡½æ•°ä½“å†… this çš„æŒ‡å‘ã€‚<br>ä¸åŒä¹‹å¤„ï¼š</p>
<ul>
<li>callã€applyçš„åŒºåˆ«ï¼šæ¥å—å‚æ•°çš„æ–¹å¼ä¸ä¸€æ ·ã€‚</li>
<li>bindï¼šä¸ç«‹å³æ‰§è¡Œã€‚è€Œapplyã€call ç«‹å³æ‰§è¡Œã€‚</li>
</ul>
<h2 id="5ã€å‚è€ƒ"><a href="#5ã€å‚è€ƒ" class="headerlink" title="5ã€å‚è€ƒ"></a>5ã€å‚è€ƒ</h2><p><a href="http://www.cnblogs.com/coco1s/p/4833199.html" target="_blank" rel="external">http://www.cnblogs.com/coco1s/p/4833199.html</a><br><a href="https://segmentfault.com/a/1190000004568767" target="_blank" rel="external">https://segmentfault.com/a/1190000004568767</a><br><a href="https://segmentfault.com/a/1190000002929289" target="_blank" rel="external">https://segmentfault.com/a/1190000002929289</a><br><a href="http://www.cnblogs.com/coco1s/p/4833199.html" target="_blank" rel="external">http://www.cnblogs.com/coco1s/p/4833199.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€call&quot;&gt;&lt;a href=&quot;#1ã€call&quot; class=&quot;headerlink&quot; title=&quot;1ã€call()&quot;&gt;&lt;/a&gt;1ã€call()&lt;/h2&gt;&lt;p&gt;è¯­æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Git" scheme="https://aotu.io/tags/Git/"/>
    
      <category term="Fork" scheme="https://aotu.io/tags/Fork/"/>
    
  </entry>
  
  <entry>
    <title>SeaJSä»å…¥é—¨åˆ°åŸç†</title>
    <link href="https://aotu.io/notes/2016/08/29/SeaJs-From-Entry-To-The-Principle/"/>
    <id>https://aotu.io/notes/2016/08/29/SeaJs-From-Entry-To-The-Principle/</id>
    <published>2016-08-29T05:55:34.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘é¡¹ç›®ä¸­æŠ›å¼ƒä¼ ç»Ÿçš„<code>&lt;script&gt;</code>è€Œæ”¹ç”¨ SeaJS è¿™æ ·çš„ JS æ¨¡å—åŠ è½½å™¨äº†ï¼Œç¡®å®æ¨¡å—åŠ è½½å™¨å¯¹äºä»£ç çš„å¯ç»´æŠ¤æ€§å¸¦æ¥äº†è¾ƒå¤§çš„æå‡ã€‚<br><a id="more"></a></p>
<h2 id="1ã€å‰è¨€"><a href="#1ã€å‰è¨€" class="headerlink" title="1ã€å‰è¨€"></a>1ã€å‰è¨€</h2><p>SeaJS æ˜¯ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ï¼Œæ¨¡å—åŠ è½½å™¨éœ€è¦å®ç°ä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼š</p>
<ul>
<li>å®ç°æ¨¡å—å®šä¹‰è§„èŒƒï¼Œè¿™æ˜¯æ¨¡å—ç³»ç»Ÿçš„åŸºç¡€ã€‚</li>
<li>æ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œã€‚</li>
</ul>
<p>ä¸‹æ–‡ä¼šå›´ç»•æ¨¡å—å®šä¹‰è§„èŒƒä»¥åŠæ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œä¸¤æ–¹é¢è¿›è¡Œè®²è§£ï¼Œæœ€åç†æ¸…ä¸€ä¸‹æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹ï¼Œä»¥åŠè¯´æ˜ä¸RequireJSçš„ä¸»è¦åŒºåˆ«ã€‚</p>
<h2 id="2ã€define"><a href="#2ã€define" class="headerlink" title="2ã€define"></a>2ã€define</h2><h3 id="2-1ã€CMDè§„èŒƒ"><a href="#2-1ã€CMDè§„èŒƒ" class="headerlink" title="2.1ã€CMDè§„èŒƒ"></a>2.1ã€CMDè§„èŒƒ</h3><p>CMD è§„èŒƒçš„å‰èº«æ˜¯Modules/Wrappingsè§„èŒƒã€‚</p>
<p>SeaJSæ›´å¤šåœ°æ¥è‡ª Modules/2.0 çš„è§‚ç‚¹ï¼ŒåŒæ—¶å€Ÿé‰´äº† RequireJS çš„ä¸å°‘ä¸œè¥¿ï¼Œæ¯”å¦‚å°†Modules/Wrappings è§„èŒƒé‡Œçš„ module.declareæ”¹ä¸º define ç­‰ã€‚<br>SeaJSéµå¾ªçš„CMDï¼ˆCommon Module Definitionï¼‰ æ¨¡å—å®šä¹‰è§„èŒƒå°±æ˜¯å±äºModules/2.0æµæ´¾é˜µè¥ã€‚</p>
<p>åœ¨ CMD è§„èŒƒä¸­ï¼Œ<strong>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶</strong>ã€‚ä»£ç çš„ä¹¦å†™æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">define</span>(<span class="section">factory</span>)</div></pre></td></tr></table></figure>
<ul>
<li>factory ä¸ºå¯¹è±¡ã€å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ¨¡å—çš„æ¥å£å°±æ˜¯è¯¥å¯¹è±¡ã€å­—ç¬¦ä¸²ã€‚</li>
<li>factory ä¸ºå‡½æ•°æ—¶ï¼Œè¡¨ç¤ºæ˜¯æ¨¡å—çš„æ„é€ æ–¹æ³•ã€‚æ‰§è¡Œè¯¥æ„é€ æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°æ¨¡å—å‘å¤–æä¾›çš„æ¥å£ã€‚factoryé»˜è®¤ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šrequireã€exports å’Œ moduleã€‚</li>
</ul>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// factory ä¸ºå¯¹è±¡</span></div><div class="line"><span class="class"><span class="keyword">define</span></span>(&#123; <span class="string">"foo"</span>: <span class="string">"bar"</span> &#125;);</div><div class="line"></div><div class="line"><span class="comment">// factory ä¸ºå‡½æ•°</span></div><div class="line"><span class="class"><span class="keyword">define</span></span>(function(<span class="keyword">require</span>, exports, module) &#123;</div><div class="line">    <span class="comment">// æ¨¡å—ä»£ç </span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="2-2ã€Modules-Transport-è§„èŒƒ"><a href="#2-2ã€Modules-Transport-è§„èŒƒ" class="headerlink" title="2.2ã€Modules/Transport è§„èŒƒ"></a>2.2ã€Modules/Transport è§„èŒƒ</h3><p>SeaJS åªæ”¯æŒ CMD æ¨¡å—çš„è¯ï¼Œæ²¡æ³•å®ç° JS æ–‡ä»¶çš„åˆå¹¶äº†ï¼Œæ‰€ä»¥SeaJS è¿˜æ”¯æŒä¸€ç§ Transport æ ¼å¼ã€‚<br>Transport æ ¼å¼å…¶å®å°±æ˜¯åŠ ä¸Šäº†åå­—çš„ CMD æ¨¡å—ï¼ŒSeaJS åœ¨é‡åˆ°è¿™ç§æ¨¡å—æ—¶é€šè¿‡å®šä¹‰çš„ id æ¥ç¼“å­˜æ¨¡å—ï¼š</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">define</span>(<span class="section">id</span>?, deps?, factory)</div></pre></td></tr></table></figure>
<p>idï¼šæ¨¡å—æ ‡è¯†ã€‚<br>depsï¼šä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¨¡å—ä¾èµ–ã€‚</p>
<p>åœ¨ç”¨æ™®é€šå‹ç¼©å·¥å…·å‹ç¼©æ—¶ï¼Œå¦‚æœé¡¹ç›®éœ€è¦æ”¯æŒ IEï¼ŒåŠ¡å¿…å†™ä¸Šç¬¬ä¸€ä¸ªå‚æ•°idæˆ–é€šè¿‡å·¥å…·æå– idï¼›è€Œä¸”å¦‚æœé¡¹ç›®å¯¹æ€§èƒ½æœ‰è¦æ±‚ï¼Œä¸Šçº¿åéœ€è¦åˆå¹¶æ–‡ä»¶ï¼Œä¹Ÿç¡®ä¿æ‰‹å·¥å†™ä¸Š id å‚æ•°ã€‚</p>
<p>å¦‚ä½•ç†è§£ï¼šSeaJS åªæ”¯æŒ CMD æ¨¡å—çš„è¯ï¼Œæ²¡æ³•å®ç° JS æ–‡ä»¶çš„åˆå¹¶äº†ï¼Ÿ<br>æ²¡æœ‰idçš„ä¸¤ä¸ªæ¨¡å—JSæ–‡ä»¶a.jså’Œb.jsåˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶index.jså¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// a.js</span></div><div class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports</span>) </span>&#123;</div><div class="line">    exports.add = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> a + b;</div><div class="line">    &#125;;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// b.js</span></div><div class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</div><div class="line">    <span class="keyword">var</span> c = a.add(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">    alert(c);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼ŒCMD è§„èŒƒ ä¸­ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªï¼Œæ‰€ä»¥å‡ºç°å¼‚å¸¸ä¹Ÿä¸å¥‡æ€ªäº†ã€‚<br>å¦å¤–ï¼ŒCMD æ¨¡å—æ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®šè¯¥æ¨¡å—çš„ idï¼ŒåŒæ—¶SeaJS ä¼šç”¨è¿™ä¸ª JS æ–‡ä»¶çš„ URL ä½œä¸ºå®ƒçš„ id ï¼Œå¹¶ç¼“å­˜ id ä¸ æ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œå› æ­¤<strong>åªæœ‰æœ€åä¸€ä¸ªå®šä¹‰çš„ CMD æ¨¡å—ä¼šè¢«è¯†åˆ«</strong>ï¼Œå› ä¸ºå‰é¢å®šä¹‰çš„æ¨¡å—éƒ½è¢«å®ƒè¦†ç›–äº†ã€‚</p>
<p>å®é™…ä¸Šåœ¨ç‰ˆæœ¬ 1.3.1 ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªç‰¹æ€§å«åš<strong>firstModuleInPackage</strong>ï¼Œå³å½“ä¸€ä¸ªæ–‡ä»¶é‡Œæœ‰å¤šä¸ª define æ—¶ï¼Œé»˜è®¤å°†ç¬¬ä¸€ä¸ªdefineé‡Œçš„æ¨¡å—ä½œä¸ºä¸»æ¨¡å—è¿›è¡Œè¿”å›ã€‚ç”±äºå„ç§åŸå› ä½œè€…å»æ‰äº†è¿™ä¸ªç‰¹æ€§ã€‚</p>
<h2 id="3ã€factoryå‚æ•°"><a href="#3ã€factoryå‚æ•°" class="headerlink" title="3ã€factoryå‚æ•°"></a>3ã€factoryå‚æ•°</h2><h3 id="3-1ã€factoryå‚æ•°çš„ä½¿ç”¨å¦‚ä¸‹ï¼š"><a href="#3-1ã€factoryå‚æ•°çš„ä½¿ç”¨å¦‚ä¸‹ï¼š" class="headerlink" title="3.1ã€factoryå‚æ•°çš„ä½¿ç”¨å¦‚ä¸‹ï¼š"></a>3.1ã€factoryå‚æ•°çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ‰€æœ‰æ¨¡å—éƒ½é€šè¿‡ define æ¥å®šä¹‰</span></div><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</div><div class="line">  <span class="comment">// é€šè¿‡ require å¼•å…¥ä¾èµ–ï¼Œè·å–æ¨¡å— a çš„æ¥å£</span></div><div class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// è°ƒç”¨æ¨¡å— a çš„æ–¹æ³•</span></div><div class="line">  a.doSomething();</div><div class="line"></div><div class="line">  <span class="comment">// é€šè¿‡ exports å¯¹å¤–æä¾›æ¥å£foo å±æ€§</span></div><div class="line">  exports.foo = <span class="string">'bar'</span>;</div><div class="line"></div><div class="line">  <span class="comment">// å¯¹å¤–æä¾› doSomething æ–¹æ³•</span></div><div class="line">  exports.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line">  <span class="comment">// é”™è¯¯ç”¨æ³•ï¼ï¼!</span></div><div class="line">  exports = &#123;</div><div class="line">    <span class="attr">foo</span>: <span class="string">'bar'</span>,</div><div class="line">    <span class="attr">doSomething</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// æ­£ç¡®å†™æ³•ï¼Œé€šè¿‡module.exportsæä¾›æ•´ä¸ªæ¥å£</span></div><div class="line">  <span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">foo</span>: <span class="string">'bar'</span>,</div><div class="line">    <span class="attr">doSomething</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="3-2ã€requireï¼šFunction"><a href="#3-2ã€requireï¼šFunction" class="headerlink" title="3.2ã€requireï¼šFunction"></a>3.2ã€requireï¼šFunction</h3><ul>
<li><p>requireæ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ï¼Œç”¨æ¥è·å–å…¶ä»–æ¨¡å—æä¾›çš„æ¥å£ï¼Œè€Œä¸”æ˜¯åŒæ­¥å¾€ä¸‹æ‰§è¡Œã€‚requireçš„æ¨¡å—ä¸èƒ½è¢«è¿”å›æ—¶ï¼Œåº”è¯¥è¿”å›nullã€‚</p>
</li>
<li><p>require.async(id, callback?)ï¼šç”¨æ¥åœ¨æ¨¡å—å†…éƒ¨å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåæ‰§è¡ŒæŒ‡å®šå›è°ƒã€‚requireçš„æ¨¡å—ä¸èƒ½è¢«è¿”å›æ—¶ï¼Œcallbackåº”è¯¥è¿”å›nullã€‚callbackæ¥å—è¿”å›çš„æ¨¡å—ä½œä¸ºå®ƒçš„å‚æ•°ã€‚</p>
</li>
<li><p>require.resolve(id)ï¼šä¸ä¼šåŠ è½½æ¨¡å—ï¼Œåªè¿”å›è§£æåçš„ç»å¯¹è·¯å¾„ã€‚</p>
</li>
</ul>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>factoryç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å‘½åä¸º require ã€‚<br>ä¾‹å¤–ï¼šåœ¨ä¿è¯ id å’Œ dependencies çš„é¢„å…ˆæå–ä¸‹ï¼Œå¯ä»¥è°ƒç”¨ä»»ä½•æ™®é€š JS å‹ç¼©å·¥å…·æ¥è¿›è¡Œå‹ç¼©ï¼Œrequire å‚æ•°å¯ä»¥è¢«å‹ç¼©æˆä»»æ„å­—ç¬¦ï¼Œæˆ–è€…åœ¨å·¥å…·ä¸­å®šä¹‰ä¸è¦å‹ç¼© require å‚æ•°ï¼›å»ºè®®é‡‡ç”¨é…å¥—çš„æ„å»ºå·¥å…·spmæ¥å‹ç¼©ã€åˆå¹¶ä»£ç ã€‚</li>
<li>ä¸è¦é‡å‘½å require å‡½æ•°ï¼Œæˆ–åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­ç»™ require é‡æ–°èµ‹å€¼ã€‚</li>
<li>require çš„å‚æ•°å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç›´æ¥é‡ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆé‚£ä¹ˆæ­»è§„å®šï¼Ÿï¼<br>é¦–å…ˆä½ è¦çŸ¥é“SeaJS æ˜¯å¦‚ä½•çŸ¥é“ä¸€ä¸ªæ¨¡å—çš„å…·ä½“ä¾èµ–çš„ã€‚SeaJS é€šè¿‡ factory.toString() æ‹¿åˆ°æºç ï¼Œå†é€šè¿‡æ­£åˆ™åŒ¹é… require çš„æ–¹å¼æ¥å¾—åˆ°ä¾èµ–ä¿¡æ¯ã€‚è¿™ä¹Ÿæ˜¯å¿…é¡»éµå®ˆ require ä¹¦å†™çº¦å®šçš„åŸå› ã€‚</p>
<p>æœ‰æ—¶ä¼šå¸Œæœ›å¯ä»¥ä½¿ç”¨ require æ¥è¿›è¡Œæ¡ä»¶åŠ è½½ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (todayIsWeekend) &#123;</div><div class="line">  <span class="built_in">require</span>(<span class="string">"play"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="built_in">require</span>(<span class="string">"work"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨æµè§ˆå™¨ç«¯ä¸­ï¼ŒåŠ è½½å™¨ä¼šæŠŠè¿™ä¸¤ä¸ªæ¨¡å—æ–‡ä»¶éƒ½ä¸‹è½½ä¸‹æ¥ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ require.async æ¥è¿›è¡Œæ¡ä»¶åŠ è½½ã€‚</p>
<h3 id="3-3ã€exportsï¼šObject"><a href="#3-3ã€exportsï¼šObject" class="headerlink" title="3.3ã€exportsï¼šObject"></a>3.3ã€exportsï¼šObject</h3><p>ç”¨æ¥åœ¨æ¨¡å—å†…éƒ¨å¯¹å¤–æä¾›æ¥å£ã€‚<br>exports ä»…ä»…æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ã€‚åœ¨ factory å†…éƒ¨ç»™ exports é‡æ–°èµ‹å€¼æ—¶ï¼Œå¹¶ä¸ä¼šæ”¹å˜ module.exports çš„å€¼ã€‚å› æ­¤ç»™ exports èµ‹å€¼æ˜¯æ— æ•ˆçš„ï¼Œä¸èƒ½ç”¨æ¥æ›´æ”¹æ¨¡å—æ¥å£ã€‚</p>
<h3 id="3-4ã€moduleï¼šObject"><a href="#3-4ã€moduleï¼šObject" class="headerlink" title="3.4ã€moduleï¼šObject"></a>3.4ã€moduleï¼šObject</h3><ul>
<li>module.uriï¼šè§£æåçš„ç»å¯¹è·¯å¾„</li>
<li>module.dependenciesï¼šæ¨¡å—ä¾èµ–</li>
<li>module.exportsï¼šæš´éœ²æ¨¡å—æ¥å£æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ return ç›´æ¥æä¾›æ¥å£ï¼Œå› ä¸ªäººä¹ æƒ¯ä½¿ç”¨ã€‚<br>å¯¹ module.exports çš„èµ‹å€¼éœ€è¦åŒæ­¥æ‰§è¡Œï¼Œæ…é‡æ”¾åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œå› ä¸ºæ— æ³•ç«‹åˆ»å¾—åˆ°æ¨¡å—æ¥å£æ•°æ®ã€‚</li>
</ul>
<h2 id="4ã€æ¨¡å—æ ‡è¯†id"><a href="#4ã€æ¨¡å—æ ‡è¯†id" class="headerlink" title="4ã€æ¨¡å—æ ‡è¯†id"></a>4ã€æ¨¡å—æ ‡è¯†id</h2><p>æ¨¡å—æ ‡è¯†idå°½é‡éµå¾ªè·¯å¾„å³ IDåŸåˆ™ï¼Œå‡è½»è®°å¿†æ¨¡å— ID çš„è´Ÿæ‹…ã€‚<br>æ¨¡å—æ ‡è¯†idä¼šç”¨åœ¨ requireã€ require.async ç­‰åŠ è½½å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>ä¸‰ç§ç±»å‹çš„æ ‡è¯†ï¼š</p>
<ul>
<li><p>ç›¸å¯¹æ ‡è¯†ï¼šä»¥ . å¼€å¤´ï¼ˆåŒ…æ‹¬.å’Œ..ï¼‰ï¼Œç›¸å¯¹æ ‡è¯†<strong>æ°¸è¿œç›¸å¯¹å½“å‰æ¨¡å—çš„ URI æ¥è§£æ</strong>ã€‚</p>
</li>
<li><p>é¡¶çº§æ ‡è¯†ï¼š<strong>ä¸ä»¥ç‚¹ï¼ˆ.ï¼‰æˆ–æ–œçº¿ï¼ˆ/ï¼‰å¼€å§‹</strong>ï¼Œ ä¼šç›¸å¯¹æ¨¡å—ç³»ç»Ÿçš„åŸºç¡€è·¯å¾„<strong>ï¼ˆå³ SeaJSé…ç½® çš„ base è·¯å¾„ï¼‰</strong>æ¥è§£æã€‚</p>
</li>
</ul>
<figure class="highlight roboconf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">seajs.config(&#123;</div><div class="line">  <span class="attribute">base</span>: 'http://code<span class="variable">.jquery</span><span class="variable">.com</span>/'</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// åœ¨æ¨¡å—ä»£ç é‡Œï¼š</div><div class="line"><span class="attribute">require.resolve('jquery');</span></div><div class="line">  // è§£æä¸º http://code<span class="variable">.jquery</span><span class="variable">.com</span>/jquery<span class="variable">.js</span></div></pre></td></tr></table></figure>
<ul>
<li>æ™®é€šè·¯å¾„ï¼šé™¤äº†ç›¸å¯¹å’Œé¡¶çº§æ ‡è¯†ä¹‹å¤–çš„æ ‡è¯†éƒ½æ˜¯æ™®é€šè·¯å¾„ï¼Œç›¸å¯¹å½“å‰é¡µé¢è§£æã€‚ç»å¯¹è·¯å¾„å’Œæ ¹è·¯å¾„ä¹Ÿæ˜¯æ™®é€šè·¯å¾„ã€‚ç»å¯¹è·¯å¾„æ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚æ ¹è·¯å¾„æ˜¯ä»¥â€œ/â€å¼€å¤´çš„ï¼Œå–å½“å‰é¡µé¢çš„åŸŸå+æ ¹è·¯å¾„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å‡è®¾å½“å‰é¡µé¢æ˜¯ http://example.com/path/to/page/index.html</span></div><div class="line"><span class="built_in">require</span>.resolve(<span class="string">'/js/b'</span>);</div><div class="line">  <span class="comment">// è§£æä¸º http://example.com/js/b.js</span></div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œ<code>/js/b</code>å¯çœç•¥åç¼€.jsï¼Œä½†æ˜¯â€.cssâ€ åç¼€ä¸å¯çœç•¥ã€‚<br>SeaJS åœ¨è§£ææ¨¡å—æ ‡è¯†æ—¶ï¼Œé™¤éåœ¨è·¯å¾„ä¸­æœ‰é—®å·ï¼ˆ?ï¼‰æˆ–æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯äº•å·ï¼ˆ#ï¼‰ï¼Œå¦åˆ™éƒ½ä¼šè‡ªåŠ¨æ·»åŠ  JS æ‰©å±•åï¼ˆ.jsï¼‰ã€‚</p>
<h2 id="5ã€æ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œ"><a href="#5ã€æ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œ" class="headerlink" title="5ã€æ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œ"></a>5ã€æ¨¡å—ç³»ç»Ÿçš„å¯åŠ¨ä¸è¿è¡Œ</h2><p>é€šè¿‡defineå®šä¹‰è®¸å¤šæ¨¡å—åï¼Œå¾—è®©å®ƒä»¬èƒ½è·‘èµ·æ¥ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../gb/sea.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">  seajs.use(<span class="string">'./index.js'</span>);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç›´æ¥ä½¿ç”¨ script æ ‡ç­¾åŒæ­¥å¼•å…¥sea.jsæ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨seajs.use(id, callback?)åœ¨é¡µé¢ä¸­åŠ è½½æ¨¡å—äº†ï¼</p>
<p>æœ€ä½³å®è·µï¼š</p>
<ul>
<li>seajs.use ç†è®ºä¸Šåªç”¨äºåŠ è½½å¯åŠ¨ï¼Œä¸åº”è¯¥å‡ºç°åœ¨ define ä¸­çš„æ¨¡å—ä»£ç é‡Œã€‚</li>
<li>ä¸ºäº†è®© sea.js å†…éƒ¨èƒ½å¿«é€Ÿè·å–åˆ°è‡ªèº«è·¯å¾„ï¼Œæ¨èæ‰‹åŠ¨åŠ ä¸Š id å±æ€§ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../gb/sea.js"</span> <span class="attr">id</span>=<span class="string">"seajsnode"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è®²åˆ°seajs.useï¼Œå½“ç„¶è¦æä¸€ä¸‹Sea.js çš„è°ƒè¯•æ¥å£ã€‚</p>
<ul>
<li>seajs.cacheï¼šObjectï¼ŒæŸ¥é˜…å½“å‰æ¨¡å—ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ¨¡å—ä¿¡æ¯ã€‚</li>
<li>seajs.resolveï¼šFunctionï¼Œåˆ©ç”¨æ¨¡å—ç³»ç»Ÿçš„å†…éƒ¨æœºåˆ¶å¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°è¿›è¡Œè·¯å¾„è§£æã€‚</li>
<li>seajs.requireï¼šFunctionï¼Œå…¨å±€çš„ require æ–¹æ³•ï¼Œå¯ç”¨æ¥ç›´æ¥è·å–æ¨¡å—æ¥å£ã€‚</li>
<li>seajs.dataï¼šObjectï¼ŒæŸ¥çœ‹ seajs æ‰€æœ‰é…ç½®ä»¥åŠä¸€äº›å†…éƒ¨å˜é‡çš„å€¼ã€‚</li>
<li>seajs.logï¼šFunctionï¼Œç”± seajs-log æ’ä»¶æä¾›ã€‚</li>
<li>seajs.findï¼šFunctionï¼Œç”± seajs-debug æ’ä»¶æä¾›ã€‚</li>
</ul>
<h2 id="6ã€-æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹"><a href="#6ã€-æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹" class="headerlink" title="6ã€ æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹"></a>6ã€ æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹</h2><p>æ¨¡å—åŠ è½½å¤§ä½“æµç¨‹ï¼š</p>
<p><img src="//misc.aotu.io/Newcandy/2016-08-29-SeaJs-From-Entry-To-The-Principle/seajs_load_and_run.jpg" alt="æ¨¡å—åŠ è½½"></p>
<p>æ–‡å­—æè¿°ï¼š</p>
<ol>
<li>é€šè¿‡ use æ–¹æ³•æ¥åŠ è½½å…¥å£æ¨¡å—ï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œ å½“æ¨¡å—åŠ è½½å®Œæˆï¼Œ ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ å…¥å¯¹åº”çš„æ¨¡å—ä½œä¸ºå‚æ•°ã€‚</li>
<li>ä»ç¼“å­˜æˆ–åˆ›å»ºå¹¶åŠ è½½ æ¥è·å–åˆ°æ¨¡å—åï¼Œç­‰å¾…æ¨¡å—ï¼ˆåŒ…æ‹¬æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼‰åŠ è½½å®Œæˆä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚</li>
<li>åœ¨å›¾ç‰‡è™šçº¿éƒ¨åˆ†ä¸­ï¼ŒåŠ è½½factoryåŠåˆ†æå‡ºæ¨¡å—çš„ä¾èµ–ï¼ŒæŒ‰ä¾èµ–å…³ç³»é€’å½’æ‰§è¡Œ document.createElement(â€˜scriptâ€™) ã€‚</li>
</ol>
<h2 id="7ã€ä¸RequireJSçš„ä¸»è¦åŒºåˆ«"><a href="#7ã€ä¸RequireJSçš„ä¸»è¦åŒºåˆ«" class="headerlink" title="7ã€ä¸RequireJSçš„ä¸»è¦åŒºåˆ«"></a>7ã€ä¸RequireJSçš„ä¸»è¦åŒºåˆ«</h2><h3 id="7-1ã€éµå¾ªçš„è§„èŒƒä¸åŒ"><a href="#7-1ã€éµå¾ªçš„è§„èŒƒä¸åŒ" class="headerlink" title="7.1ã€éµå¾ªçš„è§„èŒƒä¸åŒ"></a>7.1ã€éµå¾ªçš„è§„èŒƒä¸åŒ</h3><p>RequireJS éµå¾ª AMDï¼ˆå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼‰è§„èŒƒï¼ŒSeaJS éµå¾ª CMD ï¼ˆé€šç”¨æ¨¡å—å®šä¹‰ï¼‰è§„èŒƒã€‚</p>
<h3 id="7-2ã€factory-çš„æ‰§è¡Œæ—¶æœºä¸åŒ"><a href="#7-2ã€factory-çš„æ‰§è¡Œæ—¶æœºä¸åŒ" class="headerlink" title="7.2ã€factory çš„æ‰§è¡Œæ—¶æœºä¸åŒ"></a>7.2ã€factory çš„æ‰§è¡Œæ—¶æœºä¸åŒ</h3><p>SeaJS<strong>æŒ‰éœ€æ‰§è¡Œä¾èµ–</strong>é¿å…æµªè´¹ï¼Œä½†æ˜¯requireæ—¶æ‰è§£æçš„è¡Œä¸ºå¯¹æ€§èƒ½æœ‰å½±å“ã€‚<br>SeaJSæ˜¯å¼‚æ­¥åŠ è½½æ¨¡å—çš„æ²¡é”™, ä½†æ‰§è¡Œæ¨¡å—çš„é¡ºåºä¹Ÿæ˜¯<strong>ä¸¥æ ¼æŒ‰ç…§æ¨¡å—åœ¨ä»£ç ä¸­å‡ºç°(require)çš„é¡ºåº</strong>ã€‚</p>
<p>RequireJSæ›´éµä»jså¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Œ<strong>æå‰æ‰§è¡Œä¾èµ–</strong>ï¼Œ<strong>è¾“å‡ºé¡ºåºå–å†³äºå“ªä¸ª js å…ˆåŠ è½½å®Œ</strong>ï¼ˆä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼‰ã€‚å¦‚æœä¸€å®šè¦è®© æ¨¡å—B åœ¨ æ¨¡å—A ä¹‹åæ‰§è¡Œï¼Œéœ€è¦åœ¨ define æ¨¡å—æ—¶ç”³æ˜ä¾èµ–ï¼Œæˆ–è€…é€šè¿‡ require.config é…ç½®ä¾èµ–ã€‚</p>
<p>å¦‚æœä¸¤ä¸ªæ¨¡å—ä¹‹é—´çªç„¶æ¨¡å—Aä¾èµ–æ¨¡å—Bï¼šSeaJSçš„æ‡’æ‰§è¡Œå¯èƒ½æœ‰é—®é¢˜ï¼Œè€ŒRequireJSä¸éœ€è¦ä¿®æ”¹å½“å‰æ¨¡å—ã€‚</p>
<p>å½“æ¨¡å—Aä¾èµ–æ¨¡å—Bï¼Œæ¨¡å—Bå‡ºé”™äº†ï¼šå¦‚æœæ˜¯SeaJSï¼Œæ¨¡å—Aæ‰§è¡Œäº†æŸæ“ä½œï¼Œå¯èƒ½éœ€è¦å›æ»šã€‚RequireJSå› ä¸ºå°½æ—©æ‰§è¡Œä¾èµ–å¯ä»¥å°½æ—©å‘ç°é”™è¯¯ï¼Œä¸éœ€è¦å›æ»šã€‚</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">define([<span class="string">'a'</span>, <span class="string">'b'</span>], <span class="function"><span class="keyword">function</span><span class="params">(A, B)</span> </span>&#123;</div><div class="line">    <span class="comment">//è¿è¡Œè‡³æ­¤ï¼Œa.js å’Œ b.js å·²ä¸‹è½½å®Œæˆ</span></div><div class="line">    <span class="comment">//Aã€B ä¸¤ä¸ªæ¨¡å—å·²ç»æ‰§è¡Œå®Œï¼Œç›´æ¥å¯ç”¨</span></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="7-3ã€èšç„¦ç‚¹æœ‰å·®å¼‚"><a href="#7-3ã€èšç„¦ç‚¹æœ‰å·®å¼‚" class="headerlink" title="7.3ã€èšç„¦ç‚¹æœ‰å·®å¼‚"></a>7.3ã€èšç„¦ç‚¹æœ‰å·®å¼‚</h3><p>SeaJSåŠªåŠ›æˆä¸ºæµè§ˆå™¨ç«¯çš„æ¨¡å—åŠ è½½å™¨ï¼ŒRequireJSç‰µä¸‰æŒ‚å››ï¼Œå…¼é¡¾Rhino å’Œ nodeï¼Œå› æ­¤RequireJSæ¯”SeaJSçš„æ–‡ä»¶å¤§ã€‚</p>
<h3 id="7-4ã€-ç†å¿µä¸ä¸€æ ·"><a href="#7-4ã€-ç†å¿µä¸ä¸€æ ·" class="headerlink" title="7.4ã€ ç†å¿µä¸ä¸€æ ·"></a>7.4ã€ ç†å¿µä¸ä¸€æ ·</h3><p>RequireJS æœ‰ä¸€ç³»åˆ—æ’ä»¶ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†ç ´åäº†æ¨¡å—åŠ è½½å™¨çš„çº¯ç²¹æ€§ã€‚SeaJS åˆ™åŠªåŠ›ä¿æŒç®€å•ï¼Œå¹¶æ”¯æŒ CSS æ¨¡å—çš„åŠ è½½ã€‚</p>
<h2 id="8ã€å‚è€ƒ"><a href="#8ã€å‚è€ƒ" class="headerlink" title="8ã€å‚è€ƒ"></a>8ã€å‚è€ƒ</h2><p><a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="external">https://github.com/seajs/seajs/issues/242</a><br><a href="https://github.com/seajs/seajs/issues/258" target="_blank" rel="external">https://github.com/seajs/seajs/issues/258</a><br><a href="https://github.com/seajs/seajs/issues/263" target="_blank" rel="external">https://github.com/seajs/seajs/issues/263</a><br><a href="https://github.com/seajs/seajs/issues/266" target="_blank" rel="external">https://github.com/seajs/seajs/issues/266</a><br><a href="https://github.com/seajs/seajs/issues/277" target="_blank" rel="external">https://github.com/seajs/seajs/issues/277</a><br><a href="http://www.zhihu.com/question/21157540" target="_blank" rel="external">http://www.zhihu.com/question/21157540</a><br><a href="http://annn.me/how-to-realize-cmd-loader/" target="_blank" rel="external">http://annn.me/how-to-realize-cmd-loader/</a><br><a href="http://chaoskeh.com/blog/why-its-hard-to-combo-seajs-modules.html" target="_blank" rel="external">http://chaoskeh.com/blog/why-its-hard-to-combo-seajs-modules.html</a><br><a href="https://github.com/cmdjs/specification/blob/master/draft/module.md" target="_blank" rel="external">https://github.com/cmdjs/specification/blob/master/draft/module.md</a><br><a href="https://www.douban.com/note/283566440/" target="_blank" rel="external">https://www.douban.com/note/283566440/</a><br><a href="https://imququ.com/post/amd-simplified-commonjs-wrapping.html" target="_blank" rel="external">https://imququ.com/post/amd-simplified-commonjs-wrapping.html</a><br><a href="https://lifesinger.wordpress.com/2011/05/17/the-difference-between-seajs-and-requirejs/" target="_blank" rel="external">https://lifesinger.wordpress.com/2011/05/17/the-difference-between-seajs-and-requirejs/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘é¡¹ç›®ä¸­æŠ›å¼ƒä¼ ç»Ÿçš„&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;è€Œæ”¹ç”¨ SeaJS è¿™æ ·çš„ JS æ¨¡å—åŠ è½½å™¨äº†ï¼Œç¡®å®æ¨¡å—åŠ è½½å™¨å¯¹äºä»£ç çš„å¯ç»´æŠ¤æ€§å¸¦æ¥äº†è¾ƒå¤§çš„æå‡ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="seajs" scheme="https://aotu.io/tags/seajs/"/>
    
      <category term="æ¨¡å—åŠ è½½" scheme="https://aotu.io/tags/%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆ WebVR</title>
    <link href="https://aotu.io/notes/2016/08/24/2016-8-24-webvr/"/>
    <id>https://aotu.io/notes/2016/08/24/2016-8-24-webvr/</id>
    <published>2016-08-24T12:00:00.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>â€œç›®é•œåœ¨ä»–çœ¼å‰æ¶‚ä¸Šäº†ä¸€æŠ¹æœ¦èƒ§çš„æ·¡è‰²ï¼Œæ˜ å°„ç€ä¸€å¹…å¼¯æ›²çš„å¹¿è§’ç”»é¢ï¼šä¸€æ¡ç¯ç«è¾‰ç…Œçš„å¤§è¡—ï¼Œä¼¸å‘æ— å°½çš„é»‘æš—ã€‚ä½†è¿™å¤§è¡—å…¶å®å¹¶ä¸å­˜åœ¨ï¼Œå®ƒåªæ˜¯ç”µè„‘ç»˜å‡ºçš„ä¸€ç‰‡è™šæ‹Ÿçš„ç©ºé—´ã€‚â€â€”â€”ã€ŠSnow Crashã€‹ï¼ŒNeal Stephenson 1992å¹´</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-VR"><a href="#ä»€ä¹ˆæ˜¯-VR" class="headerlink" title="ä»€ä¹ˆæ˜¯ VR"></a>ä»€ä¹ˆæ˜¯ VR</h2><p>VRï¼ˆVirtual Realityï¼‰æ˜¯åˆ©ç”¨ç”µè„‘æ¨¡æ‹Ÿäº§ç”Ÿä¸€ä¸ªä¸‰ç»´ç©ºé—´çš„è™šæ‹Ÿä¸–ç•Œï¼Œæä¾›ç”¨æˆ·å…³äºè§†è§‰ç­‰æ„Ÿå®˜çš„æ¨¡æ‹Ÿï¼Œè®©ç”¨æˆ·æ„Ÿè§‰ä»¿ä½›èº«å†å…¶å¢ƒï¼Œå¯ä»¥åŠæ—¶ã€æ²¡æœ‰é™åˆ¶åœ°è§‚å¯Ÿä¸‰ç»´ç©ºé—´å†…çš„äº‹ç‰©ã€‚ç”¨æˆ·è¿›è¡Œä½ç½®ç§»åŠ¨æ—¶ï¼Œç”µè„‘å¯ä»¥ç«‹å³è¿›è¡Œå¤æ‚çš„è¿ç®—ï¼Œå°†ç²¾ç¡®çš„ä¸‰ç»´ä¸–ç•Œè§†é¢‘ä¼ å›äº§ç”Ÿä¸´åœºæ„Ÿã€‚â€”â€” ç»´åŸºç™¾ç§‘</p>
<h3 id="VR-çš„æ˜¾ç¤ºåŸç†"><a href="#VR-çš„æ˜¾ç¤ºåŸç†" class="headerlink" title="VR çš„æ˜¾ç¤ºåŸç†"></a>VR çš„æ˜¾ç¤ºåŸç†</h3><p>äº†è§£ VR æ˜¾ç¤ºåŸç†å‰ï¼Œå…ˆäº†è§£æˆ‘ä»¬äººçœ¼çš„ç«‹ä½“è§†è§‰çš„æˆåƒåŸç†ï¼š  </p>
<p>äººçœ¼çš„è§†è§‰æ˜¯å¯ä»¥æ„Ÿè§‰å‡ºæ·±åº¦çš„ï¼Œä¹Ÿå°±æ˜¯<strong>æ·±åº¦çŸ¥è§‰ï¼ˆdepth perceptionï¼‰</strong>ã€‚è€Œæœ‰äº†æ·±åº¦çš„ä¿¡æ¯åï¼Œæ‰èƒ½åˆ¤æ–­å‡ºç«‹ä½“ç©ºé—´çš„ç›¸å¯¹ä½ç½®ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºä¸¤ä¸ªçœ¼ç›çš„ä½ç½®ä¸ä¸€æ ·ï¼ˆä¸€èˆ¬äººä¸¤çœ¼ç›¸è· 5~7 å˜ç±³ï¼‰ï¼Œæ‰€ä»¥çœ‹åˆ°çš„ä¸œè¥¿ä¼šæœ‰<strong>ä¸¤çœ¼è§†å·®ï¼ˆbinocular parallaxï¼‰</strong>ï¼Œå¤§è„‘å†å°†è¿™ä¸¤ä¸ªå›¾åƒåšèåˆå¤„ç†ï¼Œä»è€Œäº§ç”Ÿç«‹ä½“çš„æ„Ÿè§‰ï¼ˆå³æ‰€è°“çš„ binocular cuesï¼‰ã€‚</p>
<p><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/vision.png" alt="ç«‹ä½“è§†è§‰"><br>ç«‹ä½“è§†è§‰</p>
<h3 id="å¤´æˆ´å¼æ˜¾ç¤ºå™¨ï¼ˆHead-mounted-Displayï¼‰"><a href="#å¤´æˆ´å¼æ˜¾ç¤ºå™¨ï¼ˆHead-mounted-Displayï¼‰" class="headerlink" title="å¤´æˆ´å¼æ˜¾ç¤ºå™¨ï¼ˆHead-mounted Displayï¼‰"></a>å¤´æˆ´å¼æ˜¾ç¤ºå™¨ï¼ˆHead-mounted Displayï¼‰</h3><p>å¤´æˆ´å¼æ˜¾ç¤ºå™¨ï¼ˆHMDï¼‰æ˜¯ VR ç›®å‰æœ€å¸¸è§çš„ä¸€ç§ä½“éªŒæ–¹å¼ã€‚å®ƒçš„åŸç†æ˜¯å°†å°å‹äºŒç»´æ˜¾ç¤ºå™¨æ‰€äº§ç”Ÿçš„å›¾åƒç»ç”±å…‰å­¦ç³»ç»Ÿæ”¾å¤§ã€‚å…·ä½“è€Œè¨€ï¼Œå°å‹æ˜¾ç¤ºå™¨æ‰€å‘å°„çš„å…‰çº¿ç»è¿‡å‡¸çŠ¶é€é•œä½¿å›¾åƒå› æŠ˜å°„äº§ç”Ÿç±»ä¼¼è¿œæ–¹æ•ˆæœã€‚åˆ©ç”¨æ­¤æ•ˆæœå°†è¿‘å¤„ç‰©ä½“æ”¾å¤§è‡³è¿œå¤„è§‚èµï¼Œä»è€Œè¾¾åˆ°æ‰€è°“çš„å…¨æ¯è§†è§‰ï¼ˆHologramï¼‰ã€‚å¦å¤–ï¼Œæ˜¾ç¤ºå™¨è¢«åˆ†ä¸ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¾ç¤ºå·¦å³çœ¼çœ‹åˆ°çš„å›¾åƒã€‚å¤§è„‘å†å°†å·¦å³çœ¼æ‰€çœ‹åˆ°çš„å›¾åƒï¼ˆä¸¤çœ¼è§†å·®ï¼‰åšèåˆå¤„ç†ï¼Œä»è€Œäº§ç”Ÿ 3D æ•ˆæœã€‚åŒæ—¶ï¼ŒHMD  ä¼šæ ¹æ®å¤´éƒ¨è¿åŠ¨è®©è§†è§’ä¸ä¹‹åŒæ­¥ã€‚ç»¼åˆä¸Šè¿°ç‰¹æ€§ï¼Œç”¨æˆ·é€šè¿‡ HMD ä½“éªŒ VR æ—¶å°±å¦‚åŒåœ¨ç°å®ä¸­è§‚çœ‹ä¸€æ ·ï¼Œè¿™ç§ä½“éªŒä¹Ÿè¢«ç§°ä¸ºæ²‰æµ¸å¼ä½“éªŒã€‚</p>
<p><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/HMD.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>HMD åŸç†ç¤ºæ„å›¾</p>
<h4 id="HMD-ç§ç±»"><a href="#HMD-ç§ç±»" class="headerlink" title="HMD ç§ç±»"></a>HMD ç§ç±»</h4><p>ç›®å‰å¸‚åœºä¸Šä¸»è¦æœ‰ä»¥ä¸‹ 3 ç§ HMD è®¾å¤‡ï¼š</p>
<ul>
<li>æ»‘é…å¼<br> è¿™æ˜¯ç›®å‰æœ€åˆçº§ã€ä»·æ ¼æœ€ä½çš„ HMD è®¾å¤‡ã€‚å®ƒä¸æ™ºèƒ½æ‰‹æœºç›¸è¿æ¥ï¼Œå°† 2D æ˜¾ç¤ºå˜æˆ 3D VR æ˜¾ç¤ºã€‚æ»‘é…å¼ HMD è®¾å¤‡å¼ºçƒˆä¾èµ–äºä¸»æœºç³»ç»Ÿï¼ˆæ™ºèƒ½æ‰‹æœºï¼‰ï¼Œåè€…æ˜¯æä¾› VR æ•ˆæœçš„å¿…å¤‡éƒ¨åˆ†ã€‚<br> å‚å•†ï¼šæ»‘é…å¼ HMD è®¾å¤‡åŒ…æ‹¬è°·æ­Œ Carboard å’Œä¸‰æ˜Ÿ Gear VRã€‚</li>
<li>åˆ†ç¦»å¼<br>åˆ†ç¦»å¼ HMD è®¾å¤‡è¾ƒæ»‘é…å¼ HMD è®¾å¤‡å¤æ‚ï¼Œå†…ç½®å¤šç§ç”µå­é›¶éƒ¨ä»¶ã€‚ä¸¤è€…çš„ä¸»è¦ä¸åŒæ˜¯ï¼Œåˆ†ç¦»å¼ HMD  è®¾å¤‡æ‹¥æœ‰è‡ªå·±çš„æ˜¾ç¤ºå±ï¼Œä¹Ÿå¯èƒ½é…å¤‡è‡ªå·±çš„å¤„ç†å™¨ï¼ˆæä¾›ç®€å•è®¡ç®—èƒ½åŠ›ï¼‰ã€‚è™½ç„¶åˆ†ç¦»å¼ HMD è®¾å¤‡ä¸èƒ½ç‹¬ç«‹äºä¸»æœºç³»ç»Ÿè€Œå·¥ä½œï¼Œä½†å´ä¸º VR å¸‚åœºåˆ›é€ äº†æ–°çš„æœºä¼šï¼Œå› ä¸ºä¸»æœºç³»ç»Ÿå·²ä¸å†å±€é™äºæ™ºèƒ½æ‰‹æœºï¼ŒPC å’Œè§†é¢‘æ¸¸æˆæœºä¹Ÿèƒ½ç”¨äºæä¾› VR ä½“éªŒã€‚æ€»ä¹‹ï¼Œåˆ†ç¦»å¼ HMD è®¾å¤‡èƒ½æä¾›é«˜è´¨é‡çš„ VR ä½“éªŒã€‚<br> å‚å•†ï¼šåˆ†ç¦»å¼ HMD è®¾å¤‡åŒ…æ‹¬ Facebook Oculus Riftã€HTC Vive å’Œ PlayStation VRã€‚</li>
<li>æ•´åˆå¼<br>æ•´åˆå¼ HMD è®¾å¤‡æ‹¥æœ‰å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›å’Œè¿½è¸ªç³»ç»Ÿã€‚ä½œä¸ºä¸€æ¬¾ç‹¬ç«‹çš„è®¡ç®—è®¾å¤‡ï¼Œæ•´åˆå¼ HMD è®¾å¤‡å°†é…å¤‡ä¸€æ•´å¥—é›¶éƒ¨ä»¶ï¼Œä»·æ ¼ç”šè‡³é«˜äºæ™®é€š PCã€‚<br> å‚å•†ï¼šå¾®è½¯ HoloLensï¼ˆARï¼‰</li>
</ul>
<p>å¯¹äºæƒ³åˆæ­¥ä½“éªŒæˆ–å…¥é—¨ VR çš„ç”¨æˆ·ï¼Œæ¨èè°·æ­Œçš„ Carboard æˆ–å›½å†…çš„æ€§ä»·æ¯”é«˜çš„æ»‘é…å¼è®¾å¤‡ã€‚<br><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/google-cardboard.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>Google Carboard</p>
<h3 id="VR-å‘¨è¾¹è®¾å¤‡"><a href="#VR-å‘¨è¾¹è®¾å¤‡" class="headerlink" title="VR å‘¨è¾¹è®¾å¤‡"></a>VR å‘¨è¾¹è®¾å¤‡</h3><p>VR æ˜¯æœ€å…·ç§‘å¹»è‰²å½©ä»¥åŠæ¢¦å¹»ä½“éªŒçš„ä¸œè¥¿ï¼Œå•ç‹¬ä¸€ä¸ª HMD å¹¶ä¸èƒ½å‘æŒ¥ VR çš„æœ€å¤§æ•ˆæœï¼ŒåŠ ä¸Šâ€œå±æ€§åŠ æˆâ€çš„å‘¨è¾¹æ‰èƒ½ä½“éªŒæè‡´çš„ VRã€‚</p>
<p>2015 å¹´ï¼Œæ¾³å¤§åˆ©äºšå¼€è®¾äº†ä¸–ç•Œé¦–å®¶ VR æ²‰æµ¸å¼ç«æŠ€æ¸¸æˆåº—â€”â€” <a href="https://www.zerolatencyvr.com/" target="_blank" rel="external">Zero Latency</a>ã€‚ è¿™å®¶åº—æ‹¥æœ‰ 4300 å¹³æ–¹è‹±å°ºï¼Œå®‰è£…æœ‰ 129 å° PlayStation Eye æ‘„åƒå¤´ï¼Œç”¨äºæ•æ‰ç©å®¶çš„åŠ¨ä½œã€‚æ•´å¥—ç³»ç»Ÿå¯ä»¥æœ€å¤šåŒæ—¶ä¾› 6 åç©å®¶è¿›è¡Œæ¸¸æˆã€‚<br><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/Zero%20Latency.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>ç°å®ä¸è™šæ‹Ÿ</p>
<p>å½“ç„¶ï¼Œå„å¼å„æ ·çš„ VR å‘¨è¾¹è®¾å¤‡ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¦‚ Virtuix Omni è·‘æ­¥æœºï¼š<br> <img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/Virtuix%20Omni.gif" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>Virtuix Omni</p>
<p>è¿™äº›è®¾å¤‡æ— ç–‘ä¼šå¢å¼ºäº† VR çš„ä½“éªŒï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´åŠ åˆºæ¿€ä¸é€¼çœŸçš„ä½“éªŒã€‚</p>
<h2 id="WebVR"><a href="#WebVR" class="headerlink" title="WebVR"></a>WebVR</h2><p>ä¸Šæ–‡è¯´äº†è¿™ä¹ˆå¤šå…³äº VR çš„ä¸œè¥¿ï¼Œè§†ä¹è¿˜æ²¡æœ‰å…¥æ­£é¢˜ï¼ˆâŠ™ï¹âŠ™)ï¼‰   </p>
<p>è®¸å¤š VR ä½“éªŒæ˜¯ä»¥åº”ç”¨ç¨‹åºçš„å½¢å¼å‘ˆç°çš„ï¼Œè¿™æ„å‘³ç€ä½ åœ¨ä½“éªŒ VR å‰ï¼Œå¿…é¡»è¿›è¡Œæœç´¢ä¸ä¸‹è½½ã€‚è€Œ Web VR åˆ™æ”¹å˜äº†è¿™ç§å½¢å¼ï¼Œå®ƒå°† VR  ä½“éªŒæ¬è¿›äº†æµè§ˆå™¨ï¼ŒWeb + VR = WebVRã€‚  </p>
<p>ä¸‹é¢æ ¹æ®æˆ‘ç›®å‰çš„è§è§£ï¼Œåˆ†æä¸€ä¸‹ WebVR çš„ç°çŠ¶ã€‚</p>
<h3 id="WebVR-è‰æ¡ˆ"><a href="#WebVR-è‰æ¡ˆ" class="headerlink" title="WebVR è‰æ¡ˆ"></a>WebVR è‰æ¡ˆ</h3><blockquote>
<p>WebVR æ˜¯æ—©æœŸå’Œå®éªŒæ€§çš„ JavaScript APIï¼Œå®ƒæä¾›äº†è®¿é—®å¦‚ Oculus Rift å’Œ Google Cardboard ç­‰ VR è®¾å¤‡åŠŸèƒ½çš„ APIã€‚</p>
</blockquote>
<p>VR åº”ç”¨éœ€è¦é«˜ç²¾åº¦ã€ä½å»¶è¿Ÿçš„æ¥å£ï¼Œæ‰èƒ½ä¼ é€’ä¸€ä¸ªå¯æ¥å—çš„ä½“éªŒã€‚è€Œå¯¹äºç±»ä¼¼ Device Orientation Event æ¥å£ï¼Œè™½ç„¶èƒ½è·å–æµ…å±‚çš„ VR è¾“å…¥ï¼Œä½†è¿™å¹¶ä¸èƒ½ä¸ºé«˜å“è´¨çš„ VR æä¾›å¿…è¦çš„ç²¾åº¦è¦æ±‚ã€‚WebVR æä¾›äº†ä¸“é—¨è®¿é—® VR ç¡¬ä»¶çš„æ¥å£ï¼Œè®©å¼€å‘è€…èƒ½æ„å»ºèˆ’é€‚çš„ VR ä½“éªŒã€‚</p>
<p>WebVR API ç›®å‰å¯ç”¨äºå®‰è£…äº† Firefox nightly çš„ Oculus Riftã€Chrome çš„å®éªŒæ€§ç‰ˆæœ¬å’Œ Samsung Gear VR çš„æµè§ˆå™¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ç°åœ¨å°±æƒ³åœ¨ä½ çš„ç§»åŠ¨ç«¯æµè§ˆå™¨ä½“éªŒ WebVRï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/borismus/webvr-polyfill" target="_blank" rel="external">WebVR Polyfill</a>ã€‚</p>
<h3 id="WebVR-å¼€å‘"><a href="#WebVR-å¼€å‘" class="headerlink" title="WebVR å¼€å‘"></a>WebVR å¼€å‘</h3><p>åœ¨ Web ä¸Šå¼€å‘ VR åº”ç”¨ï¼Œæœ‰ä¸‹é¢ä¸‰ç§ï¼ˆæ½œåœ¨ï¼‰æ–¹å¼ï¼š</p>
<ol>
<li>JavaScript, Three.js ä¸ ç›‘å¬è®¾å¤‡æ–¹å‘ï¼ˆDevice Orientationï¼‰</li>
<li>JavaScript, Three.js ä¸ WebVR</li>
<li>CSS ä¸ WebVRï¼ˆä»å¤„äºéå¸¸æ—©æœŸé˜¶æ®µï¼‰</li>
</ol>
<p>ç”±äº WebVR ä»å¤„äºè‰æ¡ˆé˜¶æ®µå¹¶å¯èƒ½ä¼šæœ‰æ‰€æ”¹å˜ï¼Œæ‰€ä»¥å»ºè®®ä½ åŸºäº <a href="https://github.com/borismus/webvr-boilerplate" target="_blank" rel="external">webvr-boilerplate</a> è¿›è¡Œ WebVR å¼€å‘ã€‚</p>
<h4 id="A-Frame"><a href="#A-Frame" class="headerlink" title="A-Frame"></a>A-Frame</h4><p>ä¸Šé¢è¯´é“ï¼Œåœ¨ Web ä¸Šå¼€å‘ VR åº”ç”¨æœ‰ 3 ç§ï¼ˆæ½œåœ¨ï¼‰æ–¹å¼ï¼Œå‰ä¸¤ç§éƒ½ç¦»ä¸å¼€ç›´æ¥æ¥è§¦ Three.jsï¼Œè€Œç¬¬ä¸‰ç§æ–¹å¼åˆ™ä¸ºæ—¶å°šæ—©ã€‚å¯¹äºæ²¡æ¥è§¦è¿‡ Three.jsï¼Œä½†åˆæƒ³ä½“éªŒä¸€æŠŠ WebVR å¼€å‘çš„åŒå­¦ä»¬æ¥è¯´ï¼Œæ— ç–‘ä¼šå­˜åœ¨ä¸€å®šçš„é—¨æ§›ã€‚</p>
<p>å¦‚æœä½ æƒ³ä»¥è¾ƒä½çš„é—¨æ§›ä½“éªŒä¸€æŠŠ WebVR å¼€å‘ï¼Œé‚£ä¹ˆå¯ä»¥è¯•è¯• <a href="https://mozvr.com/#team" target="_blank" rel="external">MozVR å›¢é˜Ÿ</a> å¼€å‘çš„ A-Frame æ¡†æ¶ã€‚</p>
<p>PSï¼šå†™ç€å†™ç€ï¼ŒA-Frame çš„ç‰ˆæœ¬ä» v0.2 å‡åˆ°åˆ° v0.3ï¼ˆè¿™å¾ˆå‰ç«¯ï¼‰ï¼Œä½†æ–‡æ¡£ç­‰å„æ–¹é¢å˜å¾—æ›´åŠ å®Œå–„äº†ã€‚</p>
<h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p><a href="https://aframe.io/" target="_blank" rel="external">A-Frame</a> æ˜¯ä¸€ä¸ªé€šè¿‡ HTML åˆ›å»º VR ä½“éªŒçš„å¼€æº WebVR æ¡†æ¶ã€‚é€šè¿‡è¯¥æ¡†æ¶æ„å»ºçš„ VR åœºæ™¯èƒ½å…¼å®¹æ™ºèƒ½æ‰‹æœºã€PCã€ Oculus Rift å’Œ HTC Viveã€‚</p>
<p>MozVR å›¢é˜Ÿå¼€å‘çš„ A-Frame æ¡†æ¶çš„ç›®çš„æ˜¯ï¼šè®©æ„å»º 3D/VR åœºæ™¯å˜å¾—æ›´æ˜“æ›´å¿«ï¼Œä»¥å¸å¼• web å¼€å‘ç¤¾åŒºè¿›å…¥ WebVR çš„ç”Ÿæ€ã€‚WebVR è¦æˆåŠŸï¼Œéœ€è¦æœ‰å†…å®¹ã€‚ä½†ç›®å‰åªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ† WebGL å¼€å‘è€…ï¼Œå´æœ‰æ•°ä»¥ç™¾ä¸‡çš„ Web å¼€å‘è€…ä¸è®¾è®¡å¸ˆã€‚A-Frame è¦æŠŠ 3D/VR å†…å®¹çš„åˆ›é€ æƒåŠ›èµ‹äºˆç»™æ¯ä¸ªäººã€‚</p>
<h4 id="ä¼˜åŠ¿ä¸ç‰¹ç‚¹"><a href="#ä¼˜åŠ¿ä¸ç‰¹ç‚¹" class="headerlink" title="ä¼˜åŠ¿ä¸ç‰¹ç‚¹"></a>ä¼˜åŠ¿ä¸ç‰¹ç‚¹</h4><ul>
<li>A-Frame èƒ½å‡å°‘å†—ä½™ä»£ç ã€‚å†—ä½™å¤æ‚çš„ä»£ç æˆä¸ºäº†å°é²œè€…çš„éšœç¢ï¼ŒA-Frame å°†å¤æ‚å†—ä½™çš„ä»£ç å‡è‡³ä¸€è¡Œ HTML ä»£ç ï¼Œå¦‚åˆ›å»ºåœºæ™¯åˆ™åªéœ€ä¸€ä¸ª <code>&lt;a-scene&gt;</code> æ ‡ç­¾ã€‚</li>
<li>A-Frame æ˜¯ä¸“ä¸º Web å¼€å‘è€…è®¾è®¡çš„ã€‚å®ƒåŸºäº DOMï¼Œå› æ­¤èƒ½åƒå…¶å®ƒ Web åº”ç”¨ä¸€æ ·æ“ä½œ 3D/VR å†…å®¹ã€‚å½“ç„¶ï¼Œä¹Ÿèƒ½ç»“åˆ boxã€d3ã€React ç­‰ JavaScript æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼›</li>
<li>A-Frame è®©ä»£ç ç»“æ„åŒ–ã€‚Three.js çš„ä»£ç é€šå¸¸æ˜¯æ¾æ•£çš„ï¼ŒA-Frame åœ¨ Three.js  ä¹‹ä¸Šæ„å»ºäº†ä¸€ä¸ªå£°æ˜å¼çš„å®ä½“ç»„ä»¶ç³»ç»Ÿï¼ˆentity-component-systemï¼‰ã€‚å¦å¤–ï¼Œç»„ä»¶èƒ½å‘å¸ƒå¹¶åˆ†äº«å‡ºå»ï¼Œå…¶å®ƒå¼€å‘è€…èƒ½ä»¥ HTML çš„å½¢å¼è¿›è¡Œä½¿ç”¨ã€‚</li>
</ul>
<p><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/asence.gif" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>å‡å°‘å†—ä½™å¤æ‚çš„ä»£ç </p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>talk is cheapï¼Œshow me the câ€¦ hello world.</p>
<p><a href="http://codepen.io/mozvr/pen/BjygdO/" target="_blank" rel="external">A-Frame çš„ Hello world</a><br><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/aframe.gif" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>åœ¨æ‰‹æœºçš„æµè§ˆå™¨ï¼ˆå¦‚ï¼šChromeã€QQæµè§ˆå™¨ï¼‰ä¸­å‘ˆç°çš„æ•ˆæœ</p>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// å¼•å…¥aframeæ¡†æ¶</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./aframe.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- çƒä½“ --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-sphere</span> <span class="attr">position</span>=<span class="string">"0 1 -1"</span> <span class="attr">radius</span>=<span class="string">"1"</span> <span class="attr">color</span>=<span class="string">"#EF2D5E"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sphere</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ç›’ï¼ˆæ­¤å¤„æ˜¯ç«‹æ–¹ä½“ï¼‰ --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-box</span> <span class="attr">width</span>=<span class="string">"1"</span> <span class="attr">height</span>=<span class="string">"1"</span> <span class="attr">rotation</span>=<span class="string">"0 45 0"</span> <span class="attr">depth</span>=<span class="string">"1"</span> <span class="attr">color</span>=<span class="string">"#4CC3D9"</span> <span class="attr">position</span>=<span class="string">"-1 0.5 1"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-box</span>&gt;</span>	</div><div class="line">  <span class="comment">&lt;!-- åœ†æŸ± --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-cylinder</span> <span class="attr">position</span>=<span class="string">"1 0.75 1"</span> <span class="attr">radius</span>=<span class="string">"0.5"</span> <span class="attr">height</span>=<span class="string">"1.5"</span> <span class="attr">color</span>=<span class="string">"#FFC65D"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-cylinder</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- å¹³é¢ --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-plane</span> <span class="attr">rotation</span>=<span class="string">"-90 0 0"</span> <span class="attr">width</span>=<span class="string">"4"</span> <span class="attr">height</span>=<span class="string">"4"</span> <span class="attr">color</span>=<span class="string">"#7BC8A4"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-plane</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- skyå…ƒç”¨äºä¸ºåœºæ™¯æ·»åŠ èƒŒæ™¯å›¾æˆ–æ˜¾ç¤º360åº¦çš„å…¨æ™¯å›¾ --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-sky</span> <span class="attr">color</span>=<span class="string">"#ECECEC"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sky</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ç”¨äºæŒ‡å®šæ‘„åƒæœºçš„ä½ç½® --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">position</span>=<span class="string">"0 0 4"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a-camera</span>&gt;</span><span class="tag">&lt;/<span class="name">a-camera</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>åŸºæœ¬æ¦‚å¿µï¼ˆä»¥ v0.3 ç‰ˆæœ¬ä¸ºå‚è€ƒï¼‰ï¼š</p>
<ul>
<li>è¯¥æ¡†æ¶çš„ä¸‰ç»´åæ ‡è½´éµå¾ª<strong>å³æ‰‹åæ ‡ç³»</strong>ï¼Œå…·ä½“å¦‚ä¸‹å›¾ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-webvr/coordinate.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></li>
<li>åœºæ™¯çš„åŸç‚¹é»˜è®¤åœ¨è§†å£åº•è¾¹çš„ä¸­ç‚¹</li>
<li>position ç›¸å½“äº CSS3 ä¸­çš„ translate3d</li>
<li>ä»¥<strong>ç±³</strong>ä¸ºå•ä½é•¿åº¦</li>
<li>height ä¸ width æ˜¯æ­£é¢çš„é•¿å’Œå®½ï¼Œdepthè¡¨ç¤ºæ·±åº¦ï¼ˆåšåº¦ï¼‰</li>
<li>rotation=â€x y zâ€ å•ä½<strong>è§’åº¦ï¼ˆÂ°ï¼‰</strong>ï¼Œæ‹‡æŒ‡æŒ‡å‘åæ ‡è½´çš„æ­£æ–¹å‘ï¼Œå…¶ä½™æ‰‹æŒ‡å·èµ·æ¥çš„æ–¹å‘å°±æ˜¯è¯¥è½´çš„æ—‹è½¬æ­£æ–¹å‘ã€‚</li>
<li>color æ˜¯æè´¨é¢œè‰²ï¼Œé»˜è®¤æ˜¯ç™½è‰²ï¼ˆ#FFFï¼‰</li>
<li>åœ¨ PC ä¸­ï¼Œå¯é€šè¿‡é¼ æ ‡ä¸é”®ç›˜ WSAD è¿›è¡Œäº¤äº’</li>
</ul>
<h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>å½“ç„¶ï¼Œä¸Šè¿°æ¡ˆä¾‹åªæ˜¯ A-Frame çš„ Hello World demoã€‚è‹¥ä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ï¼Œå†ç»“åˆè‡ªå·±çš„æƒ³æ³•ï¼Œç›¸ä¿¡ä½ èƒ½ä½œå‡ºè®©äººæ‹æ‰‹ç§°èµçš„ä½œå“ã€‚</p>
<ul>
<li>A-Frame å®˜ç½‘ï¼š<a href="https://aframe.io/" target="_blank" rel="external">https://aframe.io/</a></li>
<li>A-Frame Blogï¼š<a href="https://aframe.io/blog/" target="_blank" rel="external">https://aframe.io/blog/</a></li>
<li>Awesome A-Frameï¼š<a href="https://github.com/aframevr/awesome-aframe" target="_blank" rel="external">https://github.com/aframevr/awesome-aframe</a></li>
</ul>
<h3 id="å…¶å®ƒä¸€äº›-WebVR-æ¡ˆä¾‹"><a href="#å…¶å®ƒä¸€äº›-WebVR-æ¡ˆä¾‹" class="headerlink" title="å…¶å®ƒä¸€äº› WebVR æ¡ˆä¾‹"></a>å…¶å®ƒä¸€äº› WebVR æ¡ˆä¾‹</h3><p>ä¸‹é¢å°±åˆ—ä¸¾ä¸€äº› WebVR çš„ç›¸å…³æ¡ˆä¾‹ï¼Œå¦‚æœä½ å·²å…·å¤‡äº† VR çš„ä½“éªŒç¯å¢ƒï¼Œä¸å¦¨ä½“éªŒä¸€ä¸‹ã€‚</p>
<ul>
<li><a href="https://www.beloola.com/" target="_blank" rel="external">Beloola</a>ï¼šBeloola æ˜¯ä¸€ä¸ªåŸºäº WebVR çš„ç¤¾äº¤å¹³å°ï¼Œå®ƒå…è®¸äººä»¬åœ¨åŒä¸€ä¸ªè™šæ‹Ÿçš„ç©ºé—´ä¸Šå®æ—¶è¿›è¡Œæƒ…æ„Ÿäº¤æµã€‚</li>
<li><a href="https://sketchfab.com/" target="_blank" rel="external">Sketchfab</a>ï¼šSketchfab æ˜¯ä¸€ä¸ªä¸éœ€ä»»ä½•æ’ä»¶å³å¯åœ¨ Web é¡µé¢é‡ŒåµŒå…¥äº¤äº’å¼ 3D æ¨¡å‹çš„æœåŠ¡ç½‘ç«™ã€‚</li>
<li><a href="http://vizor.io/" target="_blank" rel="external">Vizor</a>ï¼šè¯¥ç½‘ç«™æä¾›äº†å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œè®©ä»»ä½•äººéƒ½èƒ½åœ¨æµè§ˆå™¨ä¸Šåˆ›å»ºå’Œåˆ†äº«ä»–ä»¬çš„ VR å†…å®¹ã€‚</li>
<li><a href="http://vr.chromeexperiments.com/" target="_blank" rel="external">Chrome Experiments for Virtual Reality</a>ï¼šChrome å›¢é˜Ÿæä¾›çš„ 6 ä¸ª VR æ¡ˆä¾‹ã€‚</li>
<li>â€¦</li>
</ul>
<p>æ›´å¤š WebVR å†…å®¹ç­‰ç€ä½ ä»¬å‘ç°</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>è®¸å¤šäººå°† 2016 å¹´ç§°ä¸º VR å…ƒå¹´ã€‚VR çš„å‰æ™¯æœ‰äººçœ‹å¥½ï¼Œä¹Ÿæœ‰äººçœ‹è¡°ã€‚ä½†æ— è®ºå¦‚ä½•ï¼Œæ–°æŠ€æœ¯çš„å‡ºç°éƒ½å€¼å¾—æˆ‘ä»¬å»ä½“éªŒä¸€ç•ªã€‚å½“ç„¶ï¼Œä½œä¸ºä¸€åå¼€å‘è€…ï¼Œä¹Ÿå¯ä»¥ä»ä»£ç çš„è§’åº¦ä½“éªŒä¸€ç•ªã€‚</p>
<p>æƒ³è¯¦ç»†äº†è§£æ›´å¤šå…³äº VR çš„è¡Œä¸šæŠ¥å‘Šï¼Œå¯ä»¥é˜…è¯» <a href="http://tech.qq.com/a/20160202/011274.htm" target="_blank" rel="external">ã€ŠVRä¸ARï¼šè§£è¯»ä¸‹ä¸€ä¸ªé€šç”¨è®¡ç®—å¹³å°ã€‹</a>ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://webvr.info/" target="_blank" rel="external">WebVR.info</a></li>
<li><a href="https://aframe.io/" target="_blank" rel="external">A-Frame</a></li>
<li><a href="https://www.sitepoint.com/how-to-build-vr-on-the-web-today/" target="_blank" rel="external">How to Build VR on the Web Today</a></li>
<li><a href="http://tech.qq.com/a/20160202/011274.htm" target="_blank" rel="external">VRä¸ARï¼šè§£è¯»ä¸‹ä¸€ä¸ªé€šç”¨è®¡ç®—å¹³å°</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;â€œç›®é•œåœ¨ä»–çœ¼å‰æ¶‚ä¸Šäº†ä¸€æŠ¹æœ¦èƒ§çš„æ·¡è‰²ï¼Œæ˜ å°„ç€ä¸€å¹…å¼¯æ›²çš„å¹¿è§’ç”»é¢ï¼šä¸€æ¡ç¯ç«è¾‰ç…Œçš„å¤§è¡—ï¼Œä¼¸å‘æ— å°½çš„é»‘æš—ã€‚ä½†è¿™å¤§è¡—å…¶å®å¹¶ä¸å­˜åœ¨ï¼Œå®ƒåªæ˜¯ç”µè„‘ç»˜å‡ºçš„ä¸€ç‰‡è™šæ‹Ÿçš„ç©ºé—´ã€‚â€â€”â€”ã€ŠSnow Crashã€‹ï¼ŒNeal Stephenson 1992å¹´&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="webvr" scheme="https://aotu.io/tags/webvr/"/>
    
      <category term="vr" scheme="https://aotu.io/tags/vr/"/>
    
  </entry>
  
  <entry>
    <title>CSS 3D Panorama - æ·˜å®é€ ç‰©èŠ‚æŠ€æœ¯å‰–æ</title>
    <link href="https://aotu.io/notes/2016/08/24/2016-8-24-css-3d-panorama/"/>
    <id>https://aotu.io/notes/2016/08/24/2016-8-24-css-3d-panorama/</id>
    <published>2016-08-24T10:58:35.000Z</published>
    <updated>2016-11-03T03:32:54.973Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>3D å…¨æ™¯å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ç‰©äº†ï¼Œä½†ä»¥å‰æˆ‘ä»¬åœ¨ Web ä¸Šçœ‹åˆ°çš„ 3D å…¨æ™¯ä¸€èˆ¬æ˜¯é€šè¿‡ Flash å®ç°çš„ã€‚è‹¥æˆ‘ä»¬èƒ½å°† <code>CSS3 Transform</code> çš„ç›¸å…³çŸ¥è¯†è¿ç”¨å¾—å½“ï¼Œä¹Ÿæ˜¯èƒ½å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚æ¢å¥è¯è¯´ï¼Œ3D å…¨æ™¯å…¶å®å°±æ˜¯ CSS3 3D çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚</p>
<h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>åœ¨å®ç° CSS3 3D å…¨æ™¯ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†æ¸…éƒ¨åˆ† CSS3 Transform å±æ€§ï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin" target="_blank" rel="external">transform-origin</a>ï¼šå…ƒç´ å˜å½¢çš„åŸç‚¹ï¼ˆé»˜è®¤å€¼ä¸º 50% 50% 0ï¼Œè¯¥æ•°å€¼å’Œåç»­æåŠçš„ç™¾åˆ†æ¯”å‡é»˜è®¤åŸºäºå…ƒç´ è‡ªèº«çš„å®½é«˜ç®—å‡ºå…·ä½“æ•°å€¼ï¼‰ï¼›</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/perspective" target="_blank" rel="external">perspective</a>: æŒ‡å®šäº†è§‚å¯Ÿè€…ä¸ <code>z=0</code> å¹³é¢çš„è·ç¦»ï¼Œä½¿å…·æœ‰ä¸‰ç»´ä½ç½®å˜æ¢çš„å…ƒç´ äº§ç”Ÿé€è§†æ•ˆæœã€‚ï¼ˆé»˜è®¤å€¼ï¼šnoneï¼Œå€¼åªèƒ½æ˜¯ç»å¯¹é•¿åº¦ï¼Œå³è´Ÿæ•°æ˜¯éæ³•å€¼ï¼‰ï¼›</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-style" target="_blank" rel="external">transform-style</a>ï¼šç”¨äºæŒ‡å®šå…¶ä¸ºå­å…ƒç´ æä¾› 2D è¿˜æ˜¯ 3D çš„åœºæ™¯ã€‚å¦å¤–ï¼Œè¯¥å±æ€§æ˜¯éç»§æ‰¿çš„ï¼›</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform" target="_blank" rel="external">transform</a>ï¼šè¯¥å±æ€§èƒ½è®©ä½ ä¿®æ”¹ CSS å¯è§†åŒ–æ¨¡å‹çš„åæ ‡ç©ºé—´ï¼Œå…¶ä¸­åŒ…æ‹¬ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate3d" target="_blank" rel="external">å¹³ç§»ï¼ˆtranslateï¼‰</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotate" target="_blank" rel="external">æ—‹è½¬ï¼ˆrotateï¼‰</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scale" target="_blank" rel="external">ç¼©æ”¾ï¼ˆscaleï¼‰</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew" target="_blank" rel="external">æ‰­æ›²ï¼ˆskewï¼‰</a>ã€‚</li>
</ul>
<p>ä¸‹é¢å¯¹ä¸Šè¿°çš„ä¸€äº›ç‚¹è¿›è¡Œæ›´æ·±å…¥çš„åˆ†æï¼š</p>
<ul>
<li><p>å¯¹äº <code>perspective</code>ï¼Œè¯¥å±æ€§æŒ‡å®šäº†â€œçœ¼ç›â€ä¸å…ƒç´ çš„ <code>perspective-origin</code> ï¼ˆé»˜è®¤å€¼æ˜¯ <code>50% 50%</code>ï¼‰ç‚¹çš„è·ç¦»ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šâ€œå½“æˆ‘ä»¬åº”ç”¨ <code>px</code> ä½œä¸ºè¡¡é‡å•ä½æ—¶ï¼Œé‚£å®ƒçš„å®é™…è·ç¦»è¯¥å¦‚ä½•é‡åŒ–å‘¢ï¼ˆå³å¦‚ä½•å¾—åˆ°æˆ‘ä»¬ç†Ÿæ‚‰ä¸”æ˜“äºè¡¨è¾¾çš„è·ç¦»ï¼‰ï¼Ÿâ€<br>ç­”ï¼šå½“æˆ‘ä»¬çš„å±å¹•çš„åˆ†è¾¨ç‡æ˜¯ 1080Pï¼ˆ1920*1080pxï¼‰ï¼Œä¸”è¯¥å…ƒç´ æˆ–ç¥–å…ˆå…ƒç´ çš„ perspective å€¼æ˜¯ <code>1920px</code> æ—¶ï¼Œè¯¥åº”ç”¨äº† CSS3 3D Transform çš„å…ƒç´ çš„ç«‹ä½“æ•ˆæœå°±ç›¸å½“äºæˆ‘ä»¬åœ¨è·ç¦»ä¸€ä¸ªå±å¹•å®½åº¦ï¼ˆ1920pxï¼‰çš„å±å¹•å‰è§‚çœ‹è¯¥å…ƒç´ çš„çœŸå®æ•ˆæœã€‚å°½ç®¡å¦‚æ­¤ï¼Œç›®å‰æˆ‘ä¹Ÿä¸æ¸…æ¥šå¦‚ä½•å‡†ç¡®åœ°ä¸ºå…ƒç´ è®¾ç½®ä¸€ä¸ªåˆé€‚çš„ <code>perspective</code> å€¼ï¼Œåªèƒ½çŒœæµ‹ä¸ªå¤§æ¦‚å€¼ï¼Œç„¶åå†åŠ¨æ€ä¿®æ”¹å€¼ï¼Œä»¥è¾¾åˆ°æ»¡æ„çš„å‘ˆç°æ•ˆæœã€‚<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/perspective.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>æ ¹æ® <a href="https://zh.wikipedia.org/wiki/%E7%9B%B8%E4%BC%BC%E4%B8%89%E8%A7%92%E5%BD%A2" target="_blank" rel="external">ç›¸ä¼¼ä¸‰è§’å½¢</a> çš„æ€§è´¨å¯è®¡ç®—å‡ºè¢«å‰ç§»çš„å…ƒç´ æœ€ç»ˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å®é™…å¤§å°  </p>
<p> å¦å¤–ï¼Œå…³äº <code>perspective</code> è¿˜æœ‰å¦å¤–ä¸€ä¸ªé‡è¦çš„ç‚¹ã€‚å› ä¸ºï¼Œperspective-origin çš„é»˜è®¤å€¼æ˜¯ <code>50% 50%</code>ï¼Œå› æ­¤ï¼Œå¯¹å“ªä¸ªå…ƒç´ åº”ç”¨ <code>perspective</code> å±æ€§ï¼Œå°±å†³å®šäº†â€œçœ¼ç›â€çš„ä½ç½®ï¼ˆå³æˆ‘ä»¬çš„â€œçœ¼ç›â€æ˜¯åœ¨å“ªä¸ªè§’åº¦çœ‹ç‰©ä½“ï¼‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½“æˆ‘ä»¬éœ€è¦æ­£è§†ç‰©ä½“æ—¶ï¼Œå°±ä¼šå°†è¯¥å±æ€§è®¾ç½®åœ¨ä¸è¯¥å…ƒç´ ä¸­å¿ƒé‡åˆçš„<strong>æŸä¸€ç¥–å…ˆå…ƒç´ </strong>ä¸Šã€‚</p>
<p> å†å¦å¤–ï¼Œå¦‚æœè¯´ï¼šâ€œå¦‚ä½•è®©ä¸€ä¸ªå…ƒç´ ï¼ˆçš„èƒŒé¢ï¼‰ä¸å¯è§ï¼Ÿâ€ï¼Œä½ å¯èƒ½ä¼šè¯´ <code>backface-visibility:hidden;</code>ã€‚å…¶å®ï¼Œå¯¹äºåœ¨â€œçœ¼ç›â€èƒŒåçš„å…ƒç´ ï¼ˆä»¥å…ƒç´ çš„ <code>transform-origin</code> ä¸ºå‚è€ƒç‚¹ï¼‰ï¼Œå³å…ƒç´ çš„zè½´åæ ‡å€¼å¤§äº perspective çš„å€¼ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šå°†å…¶æ¸²æŸ“å‡ºæ¥çš„ã€‚</p>
</li>
<li><p>å¯¹äº <code>transform-style</code>ï¼Œè¯¥å±æ€§æŒ‡å®šäº†å…¶<strong>å­å…ƒç´ </strong>æ˜¯å¤„äº 3D åœºæ™¯è¿˜æ˜¯ 2D åœºæ™¯ã€‚å¯¹äº 2D åœºæ™¯ï¼Œå…ƒç´ çš„å‰åä½ç½®æ˜¯æŒ‰ç…§å¹³æ—¶çš„æ¸²æŸ“æ–¹å¼ï¼ˆå³è‹¥åœ¨æ™®é€šæ–‡æ¡£æµä¸­ï¼Œæ˜¯æŒ‰ç…§ä»£ç ä¸­å…ƒç´ çš„å…ˆåé¡ºåºï¼Œåé¢çš„å…ƒç´ ä¼šé®ä½åœ¨å…¶å‰é¢çš„å…ƒç´ ï¼‰ï¼›å¯¹äº 3D åœºæ™¯ï¼Œå…ƒç´ çš„å‰åä½ç½®åˆ™æŒ‰ç…§çœŸå®ä¸–ç•Œçš„è§„åˆ™æ’åºï¼ˆå³è¶Šé è¿‘â€œçœ¼ç›â€çš„ï¼Œä¼šé®ä½ç¦»â€œçœ¼ç›â€æ›´è¿œçš„å…ƒç´ ï¼‰ã€‚</p>
<p> å¦å¤–ï¼Œç”±äº <code>transform-style</code> å±æ€§æ˜¯éç»§æ‰¿çš„ï¼Œå¯¹äºä¸­é—´èŠ‚ç‚¹éœ€è¦æ˜¾å¼è®¾å®šã€‚</p>
</li>
<li><p>å¯¹äº <code>transform</code> å±æ€§ï¼šä¸‹å›¾æ•´ç†äº† rotate3dã€translate3d çš„å˜æ¢æ–¹å‘ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/transform.jpg" alt="transform"><br>transform ä¸­çš„å˜æ¢å±æ€§çš„é¡ºåºæ˜¯æœ‰å…³ç³»çš„ï¼Œå¦‚ translateX(10px) rotate(30deg) ä¸ rotate(30deg) translateX(10px) æ˜¯ä¸ç­‰ä»·çš„ã€‚</p>
<p> å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ scale ä¸­å¦‚æœæœ‰è´Ÿæ•°å€¼ï¼Œåˆ™è¯¥æ–¹å‘ä¼šäº§ç”Ÿ 180 åº¦çš„ç¿»è½¬ï¼›</p>
<p> å†å¦å¤–ï¼Œéƒ¨åˆ† transform æ•ˆæœä¼šå¯¼è‡´å…ƒç´ ï¼ˆå­—ä½“ï¼‰æ¨¡ç³Šï¼Œå¦‚ translate çš„æ•°å€¼å­˜åœ¨å°æ•°ã€é€šè¿‡ translateZ æˆ– scale æ”¾å¤§å…ƒç´ ç­‰ç­‰ã€‚<strong>æ¯ä¸ªæµè§ˆå™¨éƒ½æœ‰å…¶ä¸åŒçš„è¡¨ç°</strong>ã€‚</p>
</li>
</ul>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>ä¸Šé¢ç†æ¸…äº†ä¸€äº› CSS Transform çš„çŸ¥è¯†ç‚¹ï¼Œä¸‹é¢å°±è®²è®²å¦‚ä½•å®ç° CSS 3D å…¨æ™¯ ï¼š</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ç«™åœ¨åå­—è·¯å£ä¸­é—´ï¼Œèº«ä½“ä¸åŠ¨ï¼Œå¤´éƒ¨æ—‹è½¬ 360Â°ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ‰€çœ‹åˆ°çš„ç”»é¢å°±å½¢æˆäº†ä¸€å¹…ä»¥ä½ ä¸ºä¸­å¿ƒçš„å…¨æ™¯å›¾äº†ã€‚å…¶å®ï¼Œå½“ç„¦è·ä¸å˜æ—¶ï¼Œæˆ‘ä»¬å°±ç­‰åŒäºç«™åœ¨ä¸€ä¸ªåœ†æŸ±ä½“çš„ä¸­å¿ƒã€‚  </p>
<p>ä½†æ˜¯ï¼Œè™šæ‹Ÿä¸–ç•Œä¸ç°å®çš„æœ€å¤§ä¸åŒæ˜¯ï¼šæ²¡æœ‰ä¸œè¥¿æ˜¯è¿ç»­çš„ï¼Œå³æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç¦»æ•£çš„ã€‚ä¾‹å¦‚ï¼Œä½ æ— æ³•åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€ä¸ªå®Œç¾çš„åœ†ã€‚ä½ åªèƒ½ä»¥ä¸€ä¸ªæ­£å¤šè¾¹å½¢è¡¨ç¤ºåœ†ï¼šè¾¹è¶Šå¤šï¼Œåœ†å°±è¶Šâ€œå®Œç¾â€ã€‚ </p>
<p>åŒç†ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ï¼Œæ¯ä¸ª 3D æ¨¡å‹éƒ½ç­‰åŒäºä¸€ä¸ªå¤šé¢ä½“ï¼ˆå³ 3D æ¨¡å‹åªèƒ½ç”±ä¸å¼¯æ›²çš„å¹³é¢ç»„æˆï¼‰ã€‚å½“æˆ‘ä»¬è®¨è®ºä¸€ä¸ªæœ¬èº«å°±æ˜¯å¤šé¢ä½“ï¼ˆå¦‚ç«‹æ–¹ä½“ï¼‰çš„æ¨¡å‹æ—¶å¹¶ä¸è¶³ä»¥ä¸ºå¥‡ï¼Œä½†å½“æˆ‘ä»¬æƒ³å±•ç¤ºå…¶å®ƒæ¨¡å‹æ—¶ï¼Œå¦‚çƒä½“æ—¶ï¼Œå°±éœ€è¦è®°ä½è¿™ä¸ªåŸç†äº†ã€‚<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/ball.png" alt="ä¸‰ç»´ç¯å¢ƒçš„çƒä½“"></p>
<p><a href="http://zwj360.im20.com.cn" target="_blank" rel="external">æ·˜å®é€ ç‰©èŠ‚çš„æ´»åŠ¨é¡µ</a> å°±æ˜¯ CSS 3D å…¨æ™¯çš„ä¸€ä¸ªå¾ˆèµçš„é¡µé¢ï¼Œå®ƒå°†å…¨æ™¯å›¾åˆ†éš”æˆ 20 ç­‰ä»½ï¼Œç›¸é‚»çš„å…ƒç´ é—´å·® 18Â°ï¼ˆ360/20ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆ‘ä»¬è¦ç¡®ä¿<strong>æ¯ä¸ªå…ƒç´ çš„æ­£é¢æ˜¯æŒ‡å‘åœ†æŸ±ä¸­å¿ƒçš„ï¼Œ</strong>æ‰€ä»¥è¦è®¡ç®—å¥½æ¯ç­‰ä»½çš„æ—‹è½¬è§’åº¦å€¼ã€‚ç„¶åå†å°†å…ƒç´ å‘å¤–ï¼ˆå³ Z è½´æ–¹å‘ï¼‰å¹³ç§» <code>r</code> pxã€‚å¯¹äºç«‹æ–¹ä½“ <code>r</code> å°±æ˜¯ <code>è¾¹é•¿/2</code>ï¼Œè€Œå¯¹äºå…¶å®ƒæ›´å¤æ‚çš„æ­£å¤šé¢ä½“å‘¢ï¼Ÿ  </p>
<p>ä¸¾ä¾‹ï¼šå¯¹äºæ­£ä¹é¢ä½“ï¼Œæ¯ä¸ªå…ƒç´ çš„å®½ä¸º <code>210px</code>ï¼Œå¯¹åº”çš„è§’åº¦ä¸º <code>40Â°</code>ï¼Œå³å¦‚ä¸‹å›¾ï¼š<br>å›¾ç‰‡æ¥è‡ªï¼š<a href="https://desandro.github.io/3dtransforms/docs/carousel.html" target="_blank" rel="external">https://desandro.github.io/3dtransforms/docs/carousel.html</a><br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/diagram.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>æ­£ä¹é¢ä½“çš„ä¿¯è§†å›¾  </p>
<p><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/calc.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>è®¡ç®—è¿‡ç¨‹  </p>
<p>ç”±æ­¤å¾—åˆ°ä¸€ä¸ªå…¬ç”¨å‡½æ•°ï¼Œåªéœ€ä¼ å…¥å«æœ‰<strong>å…ƒç´ çš„å®½åº¦</strong>å’Œ<strong>å…ƒç´ æ•°é‡</strong>çš„å¯¹è±¡ï¼Œå³å¯å¾—åˆ° <code>r</code> å€¼ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">calTranslateZ</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(opts.width / (<span class="number">2</span> * <span class="built_in">Math</span>.tan(<span class="built_in">Math</span>.PI / opts.number)))</div><div class="line">&#125;</div><div class="line"></div><div class="line">calTranlateZ(&#123;</div><div class="line">    <span class="attr">width</span>: <span class="number">210</span>,</div><div class="line">    <span class="attr">number</span>: <span class="number">9</span></div><div class="line">&#125;);  <span class="comment">// 288</span></div></pre></td></tr></table></figure></p>
<p><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/expand4.gif" alt="ä¿¯è§†æ—¶æ‰€çœ‹åˆ°çš„å…ƒç´ å¤–ç§»åŠ¨ç”»"><br>ä¿¯è§†æ—¶æ‰€çœ‹åˆ°çš„å…ƒç´ å¤–ç§»åŠ¨ç”»  </p>
<p>å¦å¤–ï¼Œä¸ºäº†è®©ä¸‹æ–‡æ˜“äºç†è§£ï¼Œæˆ‘ä»¬çº¦å®š html ç»“æ„æ˜¯ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#view</span>(<span class="attribute">perspective</span>:<span class="number">1000px</span>)</div><div class="line">    <span class="selector-id">#stage</span>(<span class="attribute">transform-style</span>:preserve-<span class="number">3</span>d)</div><div class="line">        <span class="selector-id">#cube</span>(<span class="attribute">transform-style</span>:preserve-<span class="number">3</span>d)</div><div class="line">            <span class="selector-class">.div</span>ï¼ˆ<span class="selector-tag">width</span><span class="selector-pseudo">:600px</span>;<span class="attribute">height</span>:<span class="number">600px</span>;ï¼‰ <span class="comment">/*ç»„æˆç«‹æ–¹ä½“çš„å…ƒç´ */</span></div></pre></td></tr></table></figure></p>
<p>æ­£å¤šé¢ä½“æ„å»ºå®Œæˆåï¼Œå°±éœ€è¦å°†æˆ‘ä»¬çš„â€œçœ¼ç›â€æ”¾ç½®åœ¨æ­£å¤šé¢ä½“å†…ã€‚ç”±äºåœ¨â€œçœ¼ç›â€åçš„å…ƒç´ æ˜¯ä¸ä¼šè¢«æµè§ˆå™¨æ‰€æ¸²æŸ“çš„ï¼ˆä¸ <code>.divå…ƒç´ </code> æ˜¯å¦è®¾ç½® <code>backface-visibility:hidden;</code> æ— å…³ï¼‰ï¼Œä¸”æˆ‘ä»¬ä¿è¯äº† <code>.divå…ƒç´ </code> çš„<strong>æ­£é¢</strong>éƒ½æŒ‡å‘äº†æ­£å¤šé¢ä½“çš„ä¸­å¿ƒï¼Œè¿™å°±å½¢æˆ 360Â° è¢«ç¯ç»•çš„æ•ˆæœäº†ã€‚<br>é‚£â€œçœ¼ç›â€å…·ä½“æ˜¯è¢«æ”¾ç½®åœ¨å“ªä¸ªä½ç½®å‘¢ï¼Ÿ<br>ç­”ï¼šé€šè¿‡è®¾ç½® <code>#stage</code> å…ƒç´ çš„ translateZ çš„å€¼ï¼Œè®©ä¸èƒ½è¢«çœ‹åˆ°çš„ <code>.divå…ƒç´ </code> çš„ Z è½´åæ ‡å€¼å¤§äº perspective çš„å€¼å³å¯ã€‚å¦‚ï¼šç«‹æ–¹ä½“çš„æ­£é¢çš„ translateZ æ˜¯ -300pxï¼ˆä¸ºäº†ä¿è¯ç«‹æ–¹ä½“çš„æ­£é¢æ˜¯æŒ‡å‘ç«‹æ–¹ä½“ä¸­å¿ƒï¼Œæ­£é¢å…ƒç´ éœ€è¦è®¾ç½® <code>rotateY(-180deg) translateZ(-300px)</code>ï¼Œå³æ­£é¢å…ƒç´ å‘â€œçœ¼çƒâ€æ–¹å‘å¹³ç§»äº† 300pxï¼‰ï¼Œè€Œ #view çš„ perspective çš„å€¼ä¸º 1000pxï¼Œé‚£ä¹ˆ #stage çš„ translateZ çš„å€¼åº”è¯¥å¤§äº 700px ä¸”å°äº 1300pxï¼Œå…·ä½“æ•°å€¼åˆ™å–å†³äºä½ æƒ³è¦å‘ˆç°çš„æ•ˆæœäº†ã€‚</p>
<p>æ ¹æ®ä¸Šè¿°çŸ¥è¯†ï¼Œæˆ‘ç²—ç•¥åœ°æ¨¡ä»¿äº†â€œé€ ç‰©èŠ‚â€çš„æ•ˆæœï¼š<a href="http://jdc.jd.com/lab/zaowu/index_new.html" target="_blank" rel="external">http://jdc.jd.com/lab/zaowu/index_new.html</a></p>
<p>å…¶å®ï¼Œåªéœ€ 6 å¹…å›¾å°±å¯ä»¥å®ç°ä¸€å¼ å¸¸è§çš„æ— æ­»è§’å…¨æ™¯å›¾ã€‚<br>æˆ‘è‡ªå·±åˆè¯•éªŒäº†ä¸‹ï¼š<a href="http://jdc.jd.com/lab/zaowu/index2.html" target="_blank" rel="external">http://jdc.jd.com/lab/zaowu/index2.html</a>   </p>
<p>å¯ç”±ä¸‹å›¾çœ‹å‡ºï¼Œå°†æ°´å¹³çš„ 4 å¼ å›¾ç‰‡åˆæˆåå°±æ˜¯ä¸€å¼ å…¨æ™¯å›¾ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/panorama3d.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>ç†è§£ä¸Šè¿°çŸ¥è¯†åï¼Œå°±å¯ä»¥é€šè¿‡ä¸ºå…ƒç´ è®¾ç½®åˆé€‚çš„ CSS3 Transform å±æ€§å€¼ï¼Œå³å¯å®ç°ä¸€å¼ å¯äº¤äº’çš„å…¨æ™¯å›¾äº†ã€‚å½“ç„¶ï¼Œäº¤äº’çš„æ•ˆæœå¯ä»¥æ˜¯æ‹–æ‹½ï¼Œä¹Ÿå¯ä»¥æ˜¯é‡åŠ›æ„Ÿåº”ç­‰ã€‚</p>
<p>æ­£å¦‚åœ¨ä¸Šæ–‡æåˆ°çš„ï¼šâ€œæ²¡æœ‰ä¸œè¥¿æ˜¯è¿ç»­çš„ï¼Œå³æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç¦»æ•£çš„â€¦â€ã€‚å°†ã€Šé€ ç‰©èŠ‚ã€‹ä¸åç»­å…¨æ™¯å›¾çš„æ°´å¹³æ–¹å‘ä¸Šçš„å›¾ç‰‡åˆ†åˆ«åˆæˆä¸€å¼ å›¾åï¼Œå¯ä»¥å‘ç°ï¼šå›¾ç‰‡æ•°é‡è¶Šå¤šï¼Œå›¾ç‰‡çš„è¦æ±‚ä¹Ÿè¶Šä½ã€‚ä½ è§‰å¾—å‘¢ï¼Ÿ<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/zaowujie.jpg" alt="æ·˜å®é€ ç‰©èŠ‚æ•´ä½“æ•ˆæœå›¾"><br>é€ ç‰©èŠ‚å…¨æ™¯å›¾</p>
<h3 id="å…¨æ™¯å›¾ç´ æçš„åˆ¶ä½œ"><a href="#å…¨æ™¯å›¾ç´ æçš„åˆ¶ä½œ" class="headerlink" title="å…¨æ™¯å›¾ç´ æçš„åˆ¶ä½œ"></a>å…¨æ™¯å›¾ç´ æçš„åˆ¶ä½œ</h3><p>å°†å…¨æ™¯å›¾åˆ¶ä½œåˆ†ä¸ºè®¾è®¡ç±»ä¸å®æ™¯ç±»ï¼š</p>
<h4 id="è®¾è®¡ç±»"><a href="#è®¾è®¡ç±»" class="headerlink" title="è®¾è®¡ç±»"></a>è®¾è®¡ç±»</h4><p>è¦åˆ¶ä½œç±»ä¼¼ <a href="http://zwj360.im20.com.cn" target="_blank" rel="external">ã€Šæ·˜å®é€ ç‰©èŠ‚ã€‹</a> çš„å…¨æ™¯é¡µé¢ï¼Œè®¾è®¡ç¨¿éœ€è¦æœ‰ä»¥ä¸‹è¿™äº›è¦æ±‚ã€‚</p>
<p>æ³¨ï¼šä¸‹é¢æåŠçš„å…·ä½“æ•°æ®å‡åŸºäºã€Šé€ ç‰©èŠ‚ã€‹ï¼Œå¯æ ¹æ®è‡ªèº«è¦æ±‚è¿›è¡Œè°ƒæ•´ï¼ˆè‹¥å‘ç°æ¬ ç¼ºï¼Œæ¬¢è¿ä½œå‡ºè¡¥å……ï¼‰ã€‚</p>
<p>æ•´ä½“èƒŒæ™¯è®¾è®¡å›¾å¦‚ä¸‹ï¼ˆ2580*1170pxï¼Œè¢«åˆ†æˆ 20 ç­‰ä»½ï¼‰ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/zaowujie.jpg" alt="æ·˜å®é€ ç‰©èŠ‚æ•´ä½“æ•ˆæœå›¾"></p>
<p>åŸºæœ¬è¦æ±‚ï¼š</p>
<ol>
<li>æ°´å¹³æ–¹å‘ä¸Šéœ€è¦é¦–å°¾ç›¸è¿ï¼›</li>
<li>å› ä¸ºæ•ˆæœå›¾æœ€ç»ˆéœ€è¦åˆ‡æˆ <strong>N ç­‰ä»½</strong>ï¼Œæ‰€ä»¥å°½å¯èƒ½è®© <strong>è®¾è®¡å›¾çš„å®½åº¦èƒ½è¢« N æ•´é™¤</strong>ï¼›</li>
<li>å›¾ç‰‡å°ºå¯¸ä¸ä»…è¦è€ƒè™‘æ­£è§†å›¾çš„å¤§å°ï¼Œè¿˜è¦è€ƒè™‘å…ƒç´ åœ¨æ—‹è½¬æ—¶ä¾ç„¶èƒ½è¦†ç›–è§†é‡ï¼ˆå¯é€‰ï¼‰ã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œä¸Šå›¾åªæ˜¯èƒŒæ™¯å›¾ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€äº›å°ç‰©ä½“ç´ æï¼ˆé€šè¿‡è¿åŠ¨é€Ÿåº¦çš„å·®å¼‚å½¢æˆè§†å·®ï¼Œå¢å¼ºç«‹ä½“æ•ˆæœï¼‰ï¼Œå¦‚ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/item3.jpg" alt="ç‰©ä½“å°å…ƒç´ 1"><br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/item1.jpg" alt="ç‰©ä½“å°å…ƒç´ 2"><br>å°ç‰©ä½“å…ƒç´ ï¼ˆè™šçº¿æ˜¯ç”¨äºå‚è€ƒçš„ï¼Œé€ ç‰©èŠ‚ä¸­å…±æœ‰ 21 ä¸ªå°ç‰©ä½“ï¼‰</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯ä¸ªå›¾ç‰‡ä¹Ÿæ˜¯è¢«ç­‰åˆ†æˆ M ç­‰ä»½ã€‚å½“ç„¶ï¼ŒM å–å†³äºç‰©ä½“åœ¨èƒŒæ™¯ä¸Šçš„å…·ä½“ä½ç½®å’Œæœ¬èº«å¤§å°ã€‚<br>å¦å¤–ï¼ŒM çš„å®½åº¦æ˜¯ä¸ N çš„å®½åº¦ç›¸ç­‰çš„ã€‚å°½ç®¡éƒ¨åˆ†ç‰©ä½“ï¼ˆM&gt;1ï¼‰çš„ä¸¤ä¾§ç­‰ä»½çš„å›¾æ¡ˆå æ¯”å°ï¼Œä½†å»ºè®®ä¿ç•™åŒæ ·çš„å®½åº¦ã€‚  </p>
<p>æ³¨ï¼šå¦‚æœå°ç‰©ä½“æœ‰ç‰¹æ®Šçš„å˜å½¢æ•ˆæœï¼Œåº”è¯¥å¤‡æ³¨å…·ä½“å˜å½¢å‚æ•°ã€‚</p>
<p>å¯¹äºé¡¶éƒ¨å’Œåº•å›¾å›¾ç‰‡ï¼Œåˆ™æ— ç‰¹æ®Šè¦æ±‚ã€‚</p>
<h4 id="å®æ™¯ç±»"><a href="#å®æ™¯ç±»" class="headerlink" title="å®æ™¯ç±»"></a>å®æ™¯ç±»</h4><p>å¦‚æœæƒ³åˆ¶ä½œå®æ™¯çš„å…¨æ™¯ï¼Œå¯ä»¥çœ‹çœ‹ Google è¡—æ™¯ï¼š<br><a href="https://www.google.com/streetview/publish/" target="_blank" rel="external">Google è¡—æ™¯</a> æ¨èçš„è®¾å¤‡å¦‚ä¸‹ï¼š<br><img src="https://misc.aotu.io/JChehe/2016-8-24-css-3d-panorama/panorama_machine.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>å¦‚ä¸Šå›¾ï¼Œæœ€å®æƒ çš„å°±æ˜¯æœ€åä¸€ä¸ªé€‰é¡¹â€”â€” <a href="https://www.google.com/streetview/apps/" target="_blank" rel="external">Google è¡—æ™¯ APP</a>ï¼Œè¯¥åº”ç”¨å†…éƒ¨æä¾›äº†å…¨æ™¯ç›¸æœºåŠŸèƒ½ï¼Œä½†æ­£å¦‚å›¾ç‰‡ä»‹ç»æ‰€è¯´ï¼Œè¿™æ˜¯éœ€è¦ç»ƒä¹ çš„ï¼Œå› æ­¤å¯¹æ“ä½œè¦æ±‚æ¯”è¾ƒé«˜ã€‚</p>
<p>è¡¥å……ï¼š<br>ä¸Šå‘¨å…­ï¼ˆ2016.8.20ï¼‰å‚åŠ äº† TGDC çš„åˆ†äº«ä¼šï¼Œå˜‰å®¾åˆ†äº«äº†ä»–ä»¬å¤„ç†å…¨æ™¯çš„æ–¹å¼ï¼š</p>
<ol>
<li>åˆ©ç”¨ RICOH THETA S ç­‰ä¸“ä¸šè®¾å¤‡æ‹å‡ºå…¨æ™¯å›¾</li>
<li>å¯¼å‡ºé™æ€å›¾åƒ</li>
<li>åˆ©ç”¨è®¾å¤‡ä¸“é—¨æä¾›çš„ APP æˆ– krpamo toolsã€pano2vrã€Glsky box ç­‰å·¥å…·å°†é™æ€å›¾åƒè½¬ä¸º6å¼ å›¾</li>
<li>åˆ©ç”¨ Web æŠ€æœ¯åˆ¶ä½œå¯äº¤äº’çš„å…¨æ™¯å›¾</li>
</ol>
<p>å…¶ä¸­ Web æŠ€æœ¯æœ‰ä»¥ä¸‹3ç§å¯é€‰æ–¹å¼ï¼ˆå½“ç„¶ï¼Œè¿˜æœ‰å…¶å®ƒï¼‰ï¼š</p>
<ul>
<li>CSS3ï¼ˆæœ¬æ–‡æ‰€æåŠçš„æ–¹å¼ï¼‰</li>
<li>Three.js</li>
<li>krpanoï¼ˆä¸ºå…¨æ™¯è€Œç”Ÿï¼Œä½çº§æµè§ˆå™¨åˆ™å›é€€åˆ° Flashï¼‰ï¼Œ<a href="http://krpano.com/docu/tutorials/quickstart/?from=groupmessage&amp;isappinstalled=0#top" target="_blank" rel="external">æŸ¥çœ‹æ•™ç¨‹</a></li>
</ul>
<p>å½“æ—¶ï¼Œå˜‰å®¾ç°åœºå¿«é€Ÿåˆ¶ä½œçš„ <a href="http://wt.qq.com/act/tgdc_lottery/lottery.html" target="_blank" rel="external">ä¼šè®®ç°åœºå…¨æ™¯</a>ã€‚</p>
<p>å¯è§ï¼Œä¼˜ç§€ç¡¬ä»¶è®¾å¤‡çš„å‡ºç°ï¼Œå¤§å¤§å‡å°‘äº†åæœŸå¤„ç†çš„æ—¶é—´ï¼Œè€Œ Web åˆ™æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å±•ç°å¹³å°ã€‚</p>
<hr>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>éšç€ç»ˆç«¯è®¾å¤‡çš„è½¯ç¡¬ä»¶ä¸æ–­å®Œå–„å’Œæé«˜ï¼ŒWeb åœ¨ 3D é¢†åŸŸä¹Ÿä¸ç”˜è½åï¼Œå¦‚æœä½ ç©è…»äº† 2D çš„ H5 æˆ–è€…æƒ³ä¸ºç”¨æˆ·æä¾›æ›´åŠ æ–°é¢–ä¼˜ç§€çš„ä½“éªŒï¼Œå…¨æ™¯ä¹Ÿè®¸æ˜¯ä¸€ç§é€‰æ‹©ã€‚</p>
<p>æœ€åï¼Œå¦‚æœ‰ä¸æ¸…æ™°æˆ–ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œæˆ‘ä¼šå°½å¯èƒ½è§£å†³çš„ã€‚è°¢è°¢è°¢~</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;3D å…¨æ™¯å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ç‰©äº†ï¼Œä½†ä»¥å‰æˆ‘ä»¬åœ¨ Web ä¸Šçœ‹åˆ°çš„ 3D å…¨æ™¯ä¸€èˆ¬æ˜¯é€šè¿‡ Flash å®ç°çš„ã€‚è‹¥æˆ‘ä»¬èƒ½å°† &lt;code&gt;CSS3 
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS" scheme="https://aotu.io/tags/CSS/"/>
    
      <category term="panorama" scheme="https://aotu.io/tags/panorama/"/>
    
      <category term="3d" scheme="https://aotu.io/tags/3d/"/>
    
  </entry>
  
  <entry>
    <title>Nginx é…ç½® HTTPS æœåŠ¡å™¨</title>
    <link href="https://aotu.io/notes/2016/08/16/nginx-https/"/>
    <id>https://aotu.io/notes/2016/08/16/nginx-https/</id>
    <published>2016-08-16T09:40:23.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a> 
<p>Chrome æµè§ˆå™¨åœ°å€æ æ ‡å¿—ç€ HTTPS çš„ç»¿è‰²å°é”å¤´ä»å¿ƒç†å±‚é¢ä¸Šå¯ä»¥ç»™ç”¨æˆ·ä¸“ä¸šå®‰å…¨çš„å¿ƒç†æš—ç¤ºï¼Œæœ¬æ–‡ç®€å•æ€»ç»“ä¸€ä¸‹å¦‚ä½•åœ¨ Nginx é…ç½® HTTPS æœåŠ¡å™¨ï¼Œè®©è‡ªå·±ç«™ç‚¹ä¸Šã€ç»¿é”ã€ã€‚</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img1.jpg" alt="Nginx é…ç½® HTTPS"></p>
<p>Nginx é…ç½® HTTPS å¹¶ä¸å¤æ‚ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š<strong>ç­¾ç½²ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»çš„ SSL è¯ä¹¦</strong> å’Œ <strong>é…ç½® HTTPS</strong></p>
<h2 id="ç­¾ç½²ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»çš„-SSL-è¯ä¹¦"><a href="#ç­¾ç½²ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»çš„-SSL-è¯ä¹¦" class="headerlink" title="ç­¾ç½²ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»çš„ SSL è¯ä¹¦"></a>ç­¾ç½²ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»çš„ SSL è¯ä¹¦</h2><h3 id="å…³äº-SSL-è¯ä¹¦"><a href="#å…³äº-SSL-è¯ä¹¦" class="headerlink" title="å…³äº SSL è¯ä¹¦"></a>å…³äº SSL è¯ä¹¦</h3><p>æœ‰å…³ SSL çš„ä»‹ç»å¯ä»¥å‚é˜…ç»´åŸºç™¾ç§‘çš„<a href="HTTPS://zh.wikipedia.org/wiki/%E5%82%B3%E8%BC%B8%E5%B1%A4%E5%AE%89%E5%85%A8%E5%8D%94%E8%AD%B0" target="_blank" rel="external">ä¼ è¾“å±‚å®‰å…¨åè®®</a>å’Œé˜®ä¸€å³°å…ˆç”Ÿçš„ <a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="external">ã€ŠSSL/TLSåè®®è¿è¡Œæœºåˆ¶çš„æ¦‚è¿°ã€‹</a>ã€‚</p>
<p>SSL è¯ä¹¦ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š<strong>åŠ å¯†</strong>å’Œ<strong>èº«ä»½è¯æ˜</strong>ï¼Œé€šå¸¸éœ€è¦è´­ä¹°ï¼Œä¹Ÿæœ‰å…è´¹çš„ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹ SSL è¯ä¹¦æœºæ„é¢å‘ï¼Œå¸¸è§å¯é çš„ç¬¬ä¸‰æ–¹ SSL è¯ä¹¦é¢å‘æœºæ„æœ‰ä¸‹é¢å‡ ä¸ªï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img10.jpg" alt="é¢å‘ SSL è¯ä¹¦å¯é çš„ç¬¬ä¸‰æ–¹æœºæ„"></p>
<p><a href="https://www.startssl.com/" target="_blank" rel="external">StartCom</a> æœºæ„ä¸Šçš„ SSL è¯ä¹¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>ä¼ä¸šçº§åˆ«ï¼šEV(Extended Validation)ã€OV(Organization Validation)</li>
<li>ä¸ªäººçº§åˆ«ï¼šIV(Identity Validation)ã€DVï¼ˆDomain Validationï¼‰</li>
</ul>
<p>å…¶ä¸­ EVã€OVã€IV éœ€è¦ä»˜è´¹</p>
<p>å…è´¹çš„è¯ä¹¦å®‰å…¨è®¤è¯çº§åˆ«ä¸€èˆ¬æ¯”è¾ƒä½ï¼Œä¸æ˜¾ç¤ºå•ä½åç§°ï¼Œä¸èƒ½è¯æ˜ç½‘ç«™çš„çœŸå®èº«ä»½ï¼Œä»…èµ·åˆ°åŠ å¯†ä¼ è¾“ä¿¡æ¯çš„ä½œç”¨ï¼Œé€‚åˆä¸ªäººç½‘ç«™æˆ–éç”µå•†ç½‘ç«™ã€‚ç”±äºæ­¤ç±»åªéªŒè¯åŸŸåæ‰€æœ‰æƒçš„ä½ç«¯ SSL è¯ä¹¦å·²ç»è¢«å›½å¤–å„ç§æ¬ºè¯ˆç½‘ç«™æ»¥ç”¨ï¼Œå› æ­¤å¼ºçƒˆæ¨èéƒ¨ç½²éªŒè¯å•ä½ä¿¡æ¯å¹¶æ˜¾ç¤ºå•ä½åç§°çš„ OV SSL è¯ä¹¦æˆ–ç”³è¯·æœ€é«˜ä¿¡ä»»çº§åˆ«çš„ã€æ˜¾ç¤ºç»¿è‰²åœ°å€æ ã€ç›´æ¥åœ¨åœ°å€æ æ˜¾ç¤ºå•ä½åç§°çš„ EV SSL è¯ä¹¦ï¼Œå°±å¥½åƒ <a href="HTTPS://www.startssl.com/" target="_blank" rel="external">StarCom</a> çš„åœ°å€æ ä¸€æ ·ï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img2.jpg" alt="StarCom"></p>
<p>æ›´å¤šå…³äºè´­ä¹° SSL è¯ä¹¦çš„ä»‹ç»ï¼š<a href="HTTPS://www.zhihu.com/question/19578422" target="_blank" rel="external">SSL è¯ä¹¦æœåŠ¡ï¼Œå¤§å®¶ç”¨å“ªå®¶çš„ï¼Ÿ</a>ã€<a href="http://freessl.wosign.com/freessl" target="_blank" rel="external">DVå…è´¹SSLè¯ä¹¦</a></p>
<h3 id="ä½¿ç”¨-OpenSSL-ç”Ÿæˆ-SSL-Key-å’Œ-CSR-æ–‡ä»¶"><a href="#ä½¿ç”¨-OpenSSL-ç”Ÿæˆ-SSL-Key-å’Œ-CSR-æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ OpenSSL ç”Ÿæˆ SSL Key å’Œ CSR æ–‡ä»¶"></a>ä½¿ç”¨ OpenSSL ç”Ÿæˆ SSL Key å’Œ CSR æ–‡ä»¶</h3><p>é…ç½® HTTPS è¦ç”¨åˆ°ç§é’¥ example.key æ–‡ä»¶å’Œ example.crt è¯ä¹¦æ–‡ä»¶ï¼Œç”³è¯·è¯ä¹¦æ–‡ä»¶çš„æ—¶å€™è¦ç”¨åˆ° example.csr æ–‡ä»¶ï¼Œ<code>OpenSSL</code> å‘½ä»¤å¯ä»¥ç”Ÿæˆ example.key æ–‡ä»¶å’Œ example.csr è¯ä¹¦æ–‡ä»¶ã€‚</p>
<ul>
<li>CSRï¼šCerificate Signing Requestï¼Œè¯ä¹¦ç­¾ç½²è¯·æ±‚æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«ç”³è¯·è€…çš„ DNï¼ˆDistinguished Nameï¼Œæ ‡è¯†åï¼‰å’Œå…¬é’¥ä¿¡æ¯ï¼Œ<strong>åœ¨ç¬¬ä¸‰æ–¹è¯ä¹¦é¢å‘æœºæ„ç­¾ç½²è¯ä¹¦çš„æ—¶å€™éœ€è¦æä¾›</strong>ã€‚è¯ä¹¦é¢å‘æœºæ„æ‹¿åˆ° CSR åä½¿ç”¨å…¶æ ¹è¯ä¹¦ç§é’¥å¯¹è¯ä¹¦è¿›è¡ŒåŠ å¯†å¹¶ç”Ÿæˆ CRT è¯ä¹¦æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«è¯ä¹¦åŠ å¯†ä¿¡æ¯ä»¥åŠç”³è¯·è€…çš„ DN åŠå…¬é’¥ä¿¡æ¯</li>
<li>Keyï¼šè¯ä¹¦ç”³è¯·è€…ç§é’¥æ–‡ä»¶ï¼Œå’Œè¯ä¹¦é‡Œé¢çš„å…¬é’¥é…å¯¹ä½¿ç”¨ï¼Œåœ¨ HTTPS ã€æ¡æ‰‹ã€é€šè®¯è¿‡ç¨‹éœ€è¦ä½¿ç”¨ç§é’¥å»è§£å¯†å®¢æˆ¶ç«¯å‘ä¾†çš„ç»è¿‡è¯ä¹¦å…¬é’¥åŠ å¯†çš„éšæœºæ•°ä¿¡æ¯ï¼Œæ˜¯ HTTPS åŠ å¯†é€šè®¯è¿‡ç¨‹éå¸¸é‡è¦çš„æ–‡ä»¶ï¼Œ<strong>åœ¨é…ç½® HTTPS çš„æ™‚å€™è¦ç”¨åˆ°</strong> </li>
</ul>
<p>ä½¿ç”¨ <code>OpenSSl</code>å‘½ä»¤å¯ä»¥åœ¨ç³»ç»Ÿå½“å‰ç›®å½•ç”Ÿæˆ <strong>example.key</strong> å’Œ <strong>example.csr</strong> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -newkey rsa:2048 -sha256 -nodes -out example_com.csr -keyout example_com.key -subj <span class="string">"/C=CN/ST=ShenZhen/L=ShenZhen/O=Example Inc./OU=Web Security/CN=example.com"</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä¸Šè¿°å‘½ä»¤ç›¸å…³å­—æ®µå«ä¹‰ï¼š</p>
<ul>
<li>Cï¼šCountry ï¼Œå•ä½æ‰€åœ¨å›½å®¶ï¼Œä¸ºä¸¤ä½æ•°çš„å›½å®¶ç¼©å†™ï¼Œå¦‚ï¼š CN å°±æ˜¯ä¸­å›½</li>
<li>ST å­—æ®µï¼š State/Province ï¼Œå•ä½æ‰€åœ¨å·æˆ–çœ</li>
<li>L å­—æ®µï¼š Locality ï¼Œå•ä½æ‰€åœ¨åŸå¸‚ / æˆ–å¿åŒº</li>
<li>O å­—æ®µï¼š Organization ï¼Œæ­¤ç½‘ç«™çš„å•ä½åç§°;</li>
<li>OU å­—æ®µï¼š Organization  Unitï¼Œä¸‹å±éƒ¨é—¨åç§°;ä¹Ÿå¸¸å¸¸ç”¨äºæ˜¾ç¤ºå…¶ä»–è¯ä¹¦ç›¸å…³ä¿¡æ¯ï¼Œå¦‚è¯ä¹¦ç±»å‹ï¼Œè¯ä¹¦äº§å“åç§°æˆ–èº«ä»½éªŒè¯ç±»å‹æˆ–éªŒè¯å†…å®¹ç­‰;</li>
<li>CN å­—æ®µï¼š Common Name ï¼Œç½‘ç«™çš„åŸŸå;</li>
</ul>
<p>ç”Ÿæˆ csr æ–‡ä»¶åï¼Œæä¾›ç»™ CA æœºæ„ï¼Œç­¾ç½²æˆåŠŸåï¼Œå°±ä¼šå¾—åˆ°ä¸€å€‹ <strong>example.crt</strong> è¯ä¹¦æ–‡ä»¶ï¼ŒSSL è¯ä¹¦æ–‡ä»¶è·å¾—åï¼Œå°±å¯ä»¥åœ¨ Nginx é…ç½®æ–‡ä»¶é‡Œé…ç½® HTTPS äº†ã€‚</p>
<h2 id="é…ç½®-HTTPS"><a href="#é…ç½®-HTTPS" class="headerlink" title="é…ç½® HTTPS"></a>é…ç½® HTTPS</h2><h3 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h3><p>è¦å¼€å¯ HTTPS æœåŠ¡ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¿¡æ¯å—(server block)ï¼Œå¿…é¡»ä½¿ç”¨ç›‘å¬å‘½ä»¤ <code>listen</code> çš„ ssl å‚æ•°å’Œå®šä¹‰æœåŠ¡å™¨è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="comment">#sslå‚æ•°</span></div><div class="line">    <span class="attribute">listen</span>              <span class="number">443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>         example.com;</div><div class="line">    <span class="comment">#è¯ä¹¦æ–‡ä»¶</span></div><div class="line">    <span class="attribute">ssl_certificate</span>     example.com.crt;</div><div class="line">    <span class="comment">#ç§é’¥æ–‡ä»¶</span></div><div class="line">    <span class="attribute">ssl_certificate_key</span> example.com.key;</div><div class="line">    <span class="attribute">ssl_protocols</span>       TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line">    <span class="attribute">ssl_ciphers</span>         HIGH:!aNULL:!MD5;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¯ä¹¦æ–‡ä»¶ä¼šä½œä¸ºå…¬ç”¨å®ä½“ç™¼é€åˆ°æ¯å°è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ¶ç«¯ï¼Œç§é’¥æ–‡ä»¶ä½œä¸ºå®‰å…¨å®ä½“ï¼Œ<strong>åº”è¯¥è¢«å­˜æ”¾åœ¨å…·æœ‰ä¸€å®šæƒé™é™åˆ¶çš„ç›®å½•æ–‡ä»¶ï¼Œå¹¶ä¿è¯ Nginx ä¸»è¿›ç¨‹æœ‰å­˜å–æƒé™</strong>ã€‚</p>
<p>ç§é’¥æ–‡ä»¶ä¹Ÿæœ‰å¯èƒ½ä¼šå’Œè¯ä¹¦æ–‡ä»¶åŒæ”¾åœ¨ä¸€å€‹æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹é¢æƒ…æ³ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">ssl_certificate</span>     www.example.com.cert;</div><div class="line"><span class="attribute">ssl_certificate_key</span> www.example.com.cert;</div></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…æ³ä¸‹ï¼Œè¯ä¹¦æ–‡ä»¶çš„çš„è¯»å–æƒé™ä¹Ÿåº”è¯¥åŠ ä»¥é™åˆ¶ï¼Œä»…ç®¡è¯ä¹¦å’Œç§é’¥å­˜æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä½†æ˜¯åªæœ‰è¯ä¹¦ä¼šè¢«å‘é€åˆ°å®¢æˆ¶ç«¯</p>
<p>å‘½ä»¤ <code>ssl_protocols</code> å’Œ <code>ssl_ciphers</code> å¯ä»¥ç”¨æ¥é™åˆ¶è¿æ¥åªåŒ…å« SSL/TLS çš„åŠ å¼·ç‰ˆæœ¬å’Œç®—æ³•ï¼Œé»˜è®¤å€¼å¦‚ä¸‹ï¼š  </p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line"><span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</div></pre></td></tr></table></figure>
<p>ç”±äºè¿™ä¸¤ä¸ªå‘½ä»¤çš„é»˜è®¤å€¼å·²ç»å¥½å‡ æ¬¡å‘ç”Ÿäº†æ”¹å˜ï¼Œå› æ­¤ä¸å»ºè®®æ˜¾æ€§å®šä¹‰ï¼Œé™¤éæœ‰éœ€è¦é¢å¤–å®šä¹‰çš„å€¼ï¼Œå¦‚å®šä¹‰ D-H ç®—æ³•ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ä½¿ç”¨DHæ–‡ä»¶</span></div><div class="line"><span class="attribute">ssl_dhparam</span> /etc/ssl/certs/dhparam.pem;</div><div class="line"><span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line"><span class="comment">#å®šä¹‰ç®—æ³•</span></div><div class="line"><span class="attribute">ssl_ciphers</span> <span class="string">"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"</span>;</div><div class="line"><span class="comment">#...</span></div></pre></td></tr></table></figure>
<h3 id="HTTPSæœåŠ¡å™¨ä¼˜åŒ–"><a href="#HTTPSæœåŠ¡å™¨ä¼˜åŒ–" class="headerlink" title="HTTPSæœåŠ¡å™¨ä¼˜åŒ–"></a>HTTPSæœåŠ¡å™¨ä¼˜åŒ–</h3><h4 id="å‡å°‘-CPU-è¿ç®—é‡"><a href="#å‡å°‘-CPU-è¿ç®—é‡" class="headerlink" title="å‡å°‘ CPU è¿ç®—é‡"></a>å‡å°‘ CPU è¿ç®—é‡</h4><p>SSL çš„è¿è¡Œè®¡ç®—éœ€è¦æ¶ˆè€—é¢å¤–çš„ CPU èµ„æºï¼Œä¸€èˆ¬å¤šæ ¸å¤„ç†å™¨ç³»ç»Ÿä¼šè¿è¡Œå¤šä¸ªå·¥ä½œè¿›ç¨‹(<a href="http://nginx.org/en/docs/ngx_core_module.html#worker_processes" target="_blank" rel="external">worker processes </a>)ï¼Œè¿›ç¨‹çš„æ•°é‡ä¸ä¼šå°‘äºå¯ç”¨çš„ CPU æ ¸æ•°ã€‚SSL é€šè®¯è¿‡ç¨‹ä¸­ã€æ¡æ‰‹ã€é˜¶æ®µçš„è¿ç®—æœ€å ç”¨ CPU èµ„æºï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å‡å°‘æ¯å°å®¢æˆ·ç«¯çš„è¿ç®—é‡ï¼š</p>
<ul>
<li><strong>æ¿€æ´» <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_timeout" target="_blank" rel="external">keepalive</a> é•¿è¿æ¥ï¼Œä¸€ä¸ªè¿æ¥å‘é€æ›´å¤šä¸ªè¯·æ±‚</strong></li>
<li><strong>å¤ç”¨ SSL ä¼šè¯å‚æ•°ï¼Œåœ¨å¹¶è¡Œå¹¶å‘çš„è¿æ¥æ•°ä¸­é¿å…è¿›è¡Œå¤šæ¬¡ SSLã€æ¡æ‰‹ã€</strong></li>
</ul>
<p>è¿™äº›ä¼šè¯ä¼šå­˜å‚¨åœ¨ä¸€ä¸ª SSL ä¼šè¯ç¼“å­˜é‡Œé¢ï¼Œé€šè¿‡å‘½ä»¤ <a href="//nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache">ssl_session_cache</a> é…ç½®ï¼Œå¯ä»¥ä½¿ç¼“å­˜åœ¨æœºå™¨é—´å…±äº«ï¼Œç„¶ååˆ©ç”¨å®¢æˆ¶ç«¯åœ¨ã€æ¡æ‰‹ã€é˜¶æ®µä½¿ç”¨çš„ <code>seesion id</code> å»æŸ¥è¯¢æœåŠ¡ç«¯çš„ session cathe(å¦‚æœæœåŠ¡ç«¯è®¾ç½®æœ‰çš„è¯)ï¼Œç®€åŒ–ã€æ¡æ‰‹ã€é˜¶æ®µã€‚</p>
<p>1M çš„ä¼šè¯ç¼“å­˜å¤§æ¦‚åŒ…å« 4000 å€‹ä¼šè¯ï¼Œé»˜è®¤çš„ç¼“å­˜è¶…æ—¶æ—¶é—´ä¸º 5 åˆ†é’Ÿï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <a href="//nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_timeout">ssl_session_timeout</a> å‘½ä»¤è®¾ç½®ç¼“å­˜è¶…æ—¶æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€å€‹æ‹¥æœ‰ 10M å…±äº«ä¼šè¯ç¼“å­˜çš„å¤šæ ¸ç³»ç»Ÿä¼˜åŒ–é…ç½®ä¾‹å­ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">worker_processes</span> auto;</div><div class="line"></div><div class="line"><span class="section">http</span> &#123;</div><div class="line">    <span class="comment">#é…ç½®å…±äº«ä¼šè¯ç¼“å­˜å¤§å°</span></div><div class="line">    <span class="attribute">ssl_session_cache</span>   shared:SSL:<span class="number">10m</span>;</div><div class="line">    <span class="comment">#é…ç½®ä¼šè¯è¶…æ—¶æ—¶é—´</span></div><div class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</div><div class="line"></div><div class="line">    <span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span>              <span class="number">443</span> ssl;</div><div class="line">        <span class="attribute">server_name</span>         www.example.com;</div><div class="line">        <span class="comment">#è®¾ç½®é•¿è¿æ¥</span></div><div class="line">        <span class="attribute">keepalive_timeout</span>   <span class="number">70</span>;</div><div class="line"></div><div class="line">        <span class="attribute">ssl_certificate</span>     www.example.com.crt;</div><div class="line">        <span class="attribute">ssl_certificate_key</span> www.example.com.key;</div><div class="line">        <span class="attribute">ssl_protocols</span>       TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line">        <span class="attribute">ssl_ciphers</span>         HIGH:!aNULL:!MD5;</div><div class="line">        <span class="comment">#...</span></div></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨-HSTS-ç­–ç•¥å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨-HTTPS-è¿æ¥"><a href="#ä½¿ç”¨-HSTS-ç­–ç•¥å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨-HTTPS-è¿æ¥" class="headerlink" title="ä½¿ç”¨ HSTS ç­–ç•¥å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ HTTPS è¿æ¥"></a>ä½¿ç”¨ HSTS ç­–ç•¥å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ HTTPS è¿æ¥</h4><p>HSTS â€“ HTTP Strict Transport Securityï¼ŒHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ã€‚å®ƒå…è®¸ä¸€ä¸ª HTTPS ç½‘ç«™è¦æ±‚æµè§ˆå™¨æ€»æ˜¯é€šè¿‡ HTTPS æ¥è®¿é—®ï¼Œè¿™ä½¿å¾—æ”»å‡»è€…åœ¨ç”¨æˆ¶ä¸æœåŠ¡å™¨é€šè®¯è¿‡ç¨‹ä¸­æ‹¦æˆªã€ç¯¡æ”¹ä¿¡æ¯ä»¥åŠå†’å……èº«ä»½å˜å¾—æ›´ä¸ºå›°éš¾ã€‚</p>
<p>åªè¦åœ¨ Nginx é…ç½®æ–‡ä»¶åŠ ä¸Šä»¥ä¸‹å¤´ä¿¡æ¯å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">add_header</span> Strict-Transport-Security <span class="string">"max-age=31536000; includeSubDomains;preload"</span> always;</div></pre></td></tr></table></figure>
<ul>
<li>max-ageï¼šè®¾ç½®å•ä½æ—¶é—´å†…å¼·åˆ¶ä½¿ç”¨ HTTPS è¿æ¥</li>
<li>includeSubDomainsï¼šå¯é€‰ï¼Œæ‰€æœ‰å­åŸŸåŒæ—¶ç”Ÿæ•ˆ</li>
<li>preloadï¼šå¯é€‰ï¼Œ<em>éè§„èŒƒå€¼</em>ï¼Œç”¨äºå®šä¹‰ä½¿ç”¨ã€HSTS é¢„åŠ è½½åˆ—è¡¨ã€</li>
<li>alwaysï¼šå¯é€‰ï¼Œä¿è¯æ‰€æœ‰å“åº”éƒ½å‘é€æ­¤å“åº”å¤´ï¼ŒåŒ…æ‹¬å„ç§å…§ç½®é”™è¯¯å“åº”</li>
</ul>
<p>å½“ç”¨æˆ·è¿›è¡Œ HTTPS è¿æ¥çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª <strong>Strict-Transport-Security</strong> å“åº”å¤´ï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img9.jpg" alt="STS Header"></p>
<p>æµè§ˆå™¨åœ¨è·å–è¯¥å“åº”å¤´åï¼Œåœ¨ <code>max-age</code> çš„æ—¶é—´å†…ï¼Œå¦‚æœé‡åˆ° HTTP è¿æ¥ï¼Œå°±ä¼šé€šè¿‡ 307 è·³è½¬å¼·åˆ¶ä½¿ç”¨ HTTPS è¿›è¡Œè¿æ¥ï¼Œå¹¶å¿½ç•¥å…¶å®ƒçš„è·³è½¬è®¾ç½®ï¼ˆå¦‚ 301 é‡å®šå‘è·³è½¬ï¼‰ï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img6.jpg" alt="HSTS"></p>
<p>307 è·³è½¬ <strong>Non-Authoritative-Reason</strong> å“åº”å¤´</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img5.jpg" alt="HSTS"></p>
<h5 id="Google-HSTS-é¢„åŠ è½½åˆ—è¡¨ï¼ˆHSTS-Preload-Listï¼‰"><a href="#Google-HSTS-é¢„åŠ è½½åˆ—è¡¨ï¼ˆHSTS-Preload-Listï¼‰" class="headerlink" title="Google HSTS é¢„åŠ è½½åˆ—è¡¨ï¼ˆHSTS Preload Listï¼‰"></a>Google HSTS é¢„åŠ è½½åˆ—è¡¨ï¼ˆHSTS Preload Listï¼‰</h5><p>ç”±äº HSTS éœ€è¦ç”¨æˆ¶ç»è¿‡ä¸€æ¬¡å®‰å…¨çš„ HTTPS è¿æ¥åæ‰ä¼šåœ¨ max-age çš„æ—¶é—´å…§ç”Ÿæ•ˆï¼Œå› æ­¤HSTS ç­–ç•¥å¹¶ä¸èƒ½å®Œç¾é˜²æ­¢ <a href="https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/06.4.md" target="_blank" rel="external">HTTP ä¼šè¯åŠ«æŒï¼ˆHTTP session hijackingï¼‰</a>ï¼Œåœ¨ä¸‹é¢è¿™äº›æƒ…æ³ä¸‹è¿˜æ˜¯å­˜åœ¨è¢«åŠ«æŒçš„å¯èƒ½ï¼š</p>
<ul>
<li>ä»æœªè®¿é—®è¿‡çš„ç½‘ç«™</li>
<li>è¿‘æœŸé‡è£è¿‡æ“ä½œç³»çµ±</li>
<li>è¿‘æœŸé‡è£è¿‡æµè§ˆå™¨</li>
<li>ä½¿ç”¨æ–°çš„æµè§ˆå™¨</li>
<li>ä½¿ç”¨äº†æ–°çš„è®¾å¤‡ï¼ˆå¦‚æ‰‹æœºï¼‰</li>
<li>åˆªé™¤äº†æµè§ˆå™¨ç¼“å­˜</li>
<li>è¿‘æœŸæ²’æœ‰æ‰“å¼€è¿‡ç½‘ç«™ä¸” max-age è¿‡æœŸ</li>
</ul>
<p>é’ˆå¯¹è¿™ç§æƒ…æ³ï¼ŒGoogle ç»´æŠ¤äº†ä¸€ä»½ã€HSTS é¢„åŠ è½½åˆ—è¡¨ã€ï¼Œåˆ—è¡¨é‡ŒåŒ…å«äº†ä½¿ç”¨äº† HSTS çš„ç«™ç‚¹ä¸»åŸŸåå’Œå­åŸŸåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é¡µé¢ç”³è¯·åŠ å…¥ï¼š</p>
<p><a href="https://hstspreload.appspot.com/." target="_blank" rel="external">https://hstspreload.appspot.com/.</a> </p>
<p>ç”³è¯·çš„æ—¶å€™ä¼šå…ˆéªŒè¯ç«™ç‚¹æ˜¯å¦ç¬¦åˆèµ„æ ¼ï¼Œä¸€èˆ¬ä¼šæ£€éªŒå¾…éªŒè¯çš„ç«™ç‚¹ä¸»åŸŸå’Œå­åŸŸæ˜¯å¦èƒ½é€šè¿‡ HTTPS è¿æ¥ã€HTTPS å’Œ HTTP é…ç½®æ˜¯å¦æœ‰ STS Header ç­‰ä¿¡æ¯ï¼Œé€šè¿‡éªŒè¯åï¼Œä¼šè®©ä½ ç¡®è®¤ä¸€äº›é™åˆ¶ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img8.jpg" alt="HSTS"></p>
<p>å½“ç¡®è®¤æäº¤åï¼Œå°±ä¼šæ˜¾ç¤ºå¤„ç†çŠ¶æ€ï¼š</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img11.jpg" alt="HSTS"></p>
<p>ç”³è¯·é€šè¿‡åï¼Œåˆ—è¡¨å†…çš„ç«™ç‚¹åä¼šè¢«å†™è¿›ä¸»æµçš„æµè§ˆå™¨ï¼Œå½“æµè§ˆå™¨æ›´æ–°ç‰ˆæœ¬åï¼Œåªè¦æ‰“å¼€åˆ—è¡¨å†…çš„ç«™ç‚¹ï¼Œæµè§ˆå™¨ä¼šæ‹’ç»æ‰€æœ‰ HTTP è¿æ¥è€Œè‡ªåŠ¨ä½¿ç”¨ HTTPSï¼Œå³ä½¿å…³é—­äº† HSTS è®¾ç½®ã€‚</p>
<p>å¯ä»¥åœ¨ä¸‹é¢ä¸¤ä¸ªè¿æ¥åˆ†åˆ¥æŸ¥æ‰¾ Chrome å’Œ Firfox çš„ã€HSTS é¢„åŠ è½½åˆ—è¡¨ã€å†…å®¹ï¼š</p>
<p><a href="https://www.chromium.org/hsts" target="_blank" rel="external">The Chromium Projects - HTTP Strict Transport Security</a></p>
<p><a href="https://dxr.mozilla.org/comm-central/source/mozilla/security/manager/ssl/nsSTSPreloadList.inc" target="_blank" rel="external">Firefox HSTS preload list - nsSTSPreloadList.inc</a></p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p>
<ul>
<li>ä¸€æ—¦æŠŠè‡ªå·±çš„ç«™ç‚¹ååŠ å…¥ã€HSTS é¢„åŠ è½½åˆ—è¡¨ã€ï¼Œå°†å¾ˆéš¾å½»åº•ä»åˆ—è¡¨ä¸­ç§»é™¤ï¼Œå› ä¸ºä¸èƒ½ä¿è¯å…¶å®ƒæµè§ˆå™¨å¯ä»¥åŠæ—¶ç§»é™¤ï¼Œå³ä½¿ Chrome æä¾›æœ‰ä¾¿æ·çš„ç§»é™¤æ–¹æ³•ï¼Œä¹Ÿæ˜¯è¦é€šè¿‡å‡ºé‚®ä»¶è”ç³»ï¼Œæ³¨æ˜ç§»é™¤åŸå› ï¼Œå¹¶ç­‰åˆ°æœ€æ–°çš„æµè§ˆå™¨ç‰ˆæœ¬æ›´æ–°å‘å¸ƒæ‰æœ‰æœºä¼šï¼ˆç”¨æˆ¶ä¸ä¸€å®šä¼šåŠæ—¶æ›´æ–°ï¼‰ </li>
<li>æ‰€æœ‰ä¸å…·å¤‡æœ‰æ•ˆè¯ä¹¦çš„å­åŸŸæˆ–å…§åµŒå­åŸŸçš„è®¿é—®å°†ä¼šè¢«é˜»æ­¢</li>
</ul>
<p><strong>å› æ­¤ï¼Œå¦‚æœè‡ªå·±ç«™ç‚¹å­åŸŸåå˜åŒ–æ¯”è¾ƒå¤šï¼Œåˆæ²’æœ‰æ³›åŸŸè¯ä¹¦ï¼Œåˆæ²’æ³•ç¡®å®šå…¨ç«™æ˜¯å¦èƒ½åº”ç”¨ HTTPS çš„æœ‹å‹ï¼Œå°±è¦è°¨æ…ç”³è¯·äº†ã€‚</strong></p>
<p>æ›´å¤šå…³äº HSTS é…ç½®å¯å‚è€ƒï¼š</p>
<p><a href="https://www.nginx.com/blog/http-strict-transport-security-hsts-and-nginx/" target="_blank" rel="external">ã€ŠHTTP Strict Transport Security (HSTS) and NGINXã€‹</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Security/HTTP_strict_transport_security#Preloading_Strict_Transport_Security" target="_blank" rel="external">MDNçš„ã€ŠHTTP Strict Transport Securityã€‹</a></p>
<h5 id="æµè§ˆå™¨å…¼å®¹æ€§"><a href="#æµè§ˆå™¨å…¼å®¹æ€§" class="headerlink" title="æµè§ˆå™¨å…¼å®¹æ€§"></a>æµè§ˆå™¨å…¼å®¹æ€§</h5><p><img src="//misc.aotu.io/mihanX/nginx-https/img7.jpg" alt="Compatibility"></p>
<h4 id="åŠ å¼º-HTTPS-å®‰å…¨æ€§"><a href="#åŠ å¼º-HTTPS-å®‰å…¨æ€§" class="headerlink" title="åŠ å¼º HTTPS å®‰å…¨æ€§"></a>åŠ å¼º HTTPS å®‰å…¨æ€§</h4><p>HTTPS åŸºç¡€é…ç½®é‡‡å–çš„é»˜è®¤åŠ å¯†ç®—æ³•æ˜¯ SHA-1ï¼Œè¿™ä¸ªç®—æ³•éå¸¸è„†å¼±ï¼Œå®‰å…¨æ€§åœ¨é€å¹´é™ä½ï¼Œåœ¨ 2014 å¹´çš„æ—¶å€™ï¼Œ <strong>Google å®˜æ–¹åšå®¢å°±å®£å¸ƒåœ¨ Chrome æµè§ˆå™¨ä¸­é€æ¸é™ä½ SHA-1 è¯ä¹¦çš„å®‰å…¨æŒ‡ç¤ºï¼Œä¼šä» 2015 å¹´èµ·ä½¿ç”¨ SHA-2 ç­¾åçš„è¯ä¹¦</strong>ï¼Œå¯å‚é˜… <a href="http://www.freebuf.com/author/rabbit_run" target="_blank" rel="external">Rabbit_Run</a> åœ¨ 2014 å¹´å‘è¡¨çš„æ–‡ç« ï¼š<a href="http://www.freebuf.com/news/topnews/44288.html" target="_blank" rel="external">ã€Šä¸ºä»€ä¹ˆGoogleæ€¥ç€æ€æ­»åŠ å¯†ç®—æ³•SHA-1ã€‹</a></p>
<p>ä¸ºæ­¤ï¼Œä¸»æµçš„ HTTPS é…ç½®æ–¹æ¡ˆåº”è¯¥é¿å… SHA-1ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/%E8%BF%AA%E8%8F%B2-%E8%B5%AB%E7%88%BE%E6%9B%BC%E5%AF%86%E9%91%B0%E4%BA%A4%E6%8F%9B" target="_blank" rel="external">è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼ˆD-Hï¼ŒDiffieâ€“Hellman key exchangeï¼‰</a>æ–¹æ¡ˆã€‚</p>
<p>é¦–å…ˆåœ¨ç›®å½• <code>/etc/ssl/certs</code> è¿è¡Œä»¥ä¸‹ä»£ç ç”Ÿæˆ <code>dhparam.pem</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl dhparam -out dhparam.pem 2048</div></pre></td></tr></table></figure>
<p>ç„¶ååŠ å…¥ Nginx é…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ä¼˜å…ˆé‡‡å–æœåŠ¡å™¨ç®—æ³•</span></div><div class="line"><span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</div><div class="line"><span class="comment">#ä½¿ç”¨DHæ–‡ä»¶</span></div><div class="line"><span class="attribute">ssl_dhparam</span> /etc/ssl/certs/dhparam.pem;</div><div class="line"><span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line"><span class="comment">#å®šä¹‰ç®—æ³•</span></div><div class="line"><span class="attribute">ssl_ciphers</span> <span class="string">"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"</span>;</div></pre></td></tr></table></figure>
<p>å¦‚æœæœåŠ¡å™¨å¤ å¼·å¤§ï¼Œå¯ä»¥ä½¿ç”¨æ›´ä¸ºå¤æ‚çš„ 4096 ä½è¿›è¡ŒåŠ å¯†ã€‚</p>
<p>ä¸€èˆ¬æƒ…æ³ä¸‹è¿˜åº”è¯¥åŠ ä¸Šä»¥ä¸‹å‡ ä¸ªå¢å¼ºå®‰å…¨æ€§çš„å‘½ä»¤ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#å‡å°‘ç‚¹å‡»åŠ«æŒ</span></div><div class="line"><span class="attribute">add_header</span> X-Frame-Options DENY;</div><div class="line"><span class="comment">#ç¦æ­¢æœåŠ¡å™¨è‡ªåŠ¨è§£æèµ„æºç±»å‹</span></div><div class="line"><span class="attribute">add_header</span> X-Content-Type-Options nosniff;</div><div class="line"><span class="comment">#é˜²XSSæ”»å‡»</span></div><div class="line"><span class="attribute">add_header</span> X-Xss-Protection <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>è¿™å‡ ä¸ªå®‰å…¨å‘½ä»¤åœ¨ <a href="https://imququ.com/" target="_blank" rel="external">Jerry Qu</a> å¤§ç¥çš„æ–‡ç« <a href="https://imququ.com/post/web-security-and-response-header.html" target="_blank" rel="external">ã€Šä¸€äº›å®‰å…¨ç›¸å…³çš„HTTPå“åº”å¤´ã€‹</a>æœ‰è¯¦ç»†çš„ä»‹ç´¹ã€‚</p>
<h3 id="ä¼˜åŒ–åçš„ç»¼åˆé…ç½®"><a href="#ä¼˜åŒ–åçš„ç»¼åˆé…ç½®" class="headerlink" title="ä¼˜åŒ–åçš„ç»¼åˆé…ç½®"></a>ä¼˜åŒ–åçš„ç»¼åˆé…ç½®</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">worker_processes</span> auto;</div><div class="line"></div><div class="line"><span class="section">http</span> &#123;</div><div class="line"></div><div class="line">    <span class="comment">#é…ç½®å…±äº«ä¼šè¯ç¼“å­˜å¤§å°ï¼Œè§†ç«™ç‚¹è®¿é—®æƒ…å†µè®¾å®š</span></div><div class="line">    <span class="attribute">ssl_session_cache</span>   shared:SSL:<span class="number">10m</span>;</div><div class="line">    <span class="comment">#é…ç½®ä¼šè¯è¶…æ—¶æ—¶é—´</span></div><div class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</div><div class="line"></div><div class="line">    <span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span>              <span class="number">443</span> ssl;</div><div class="line">        <span class="attribute">server_name</span>         www.example.com;</div><div class="line">        </div><div class="line">        <span class="comment">#è®¾ç½®é•¿è¿æ¥</span></div><div class="line">        <span class="attribute">keepalive_timeout</span>   <span class="number">70</span>;</div><div class="line">        </div><div class="line">        <span class="comment">#HSTSç­–ç•¥</span></div><div class="line">        <span class="attribute">add_header</span> Strict-Transport-Security <span class="string">"max-age=31536000; includeSubDomains; preload"</span> always;</div><div class="line">        </div><div class="line">        <span class="comment">#è¯ä¹¦æ–‡ä»¶</span></div><div class="line">        <span class="attribute">ssl_certificate</span>     www.example.com.crt;</div><div class="line">        <span class="comment">#ç§é’¥æ–‡ä»¶</span></div><div class="line">        <span class="attribute">ssl_certificate_key</span> www.example.com.key; </div><div class="line">        </div><div class="line">        <span class="comment">#ä¼˜å…ˆé‡‡å–æœåŠ¡å™¨ç®—æ³•</span></div><div class="line">        <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</div><div class="line">        <span class="comment">#ä½¿ç”¨DHæ–‡ä»¶</span></div><div class="line">        <span class="attribute">ssl_dhparam</span> /etc/ssl/certs/dhparam.pem;</div><div class="line">        <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</div><div class="line">        <span class="comment">#å®šä¹‰ç®—æ³•</span></div><div class="line">        <span class="attribute">ssl_ciphers</span> <span class="string">"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"</span>;</div><div class="line">        <span class="comment">#å‡å°‘ç‚¹å‡»åŠ«æŒ</span></div><div class="line">        <span class="attribute">add_header</span> X-Frame-Options DENY;</div><div class="line">        <span class="comment">#ç¦æ­¢æœåŠ¡å™¨è‡ªåŠ¨è§£æèµ„æºç±»å‹</span></div><div class="line">        <span class="attribute">add_header</span> X-Content-Type-Options nosniff;</div><div class="line">        <span class="comment">#é˜²XSSæ”»æ“Š</span></div><div class="line">        <span class="attribute">add_header</span> X-Xss-Protection <span class="number">1</span>;</div><div class="line">        <span class="comment">#...</span></div></pre></td></tr></table></figure>
<h3 id="HTTP-HTTPSæ··åˆæœåŠ¡å™¨é…ç½®"><a href="#HTTP-HTTPSæ··åˆæœåŠ¡å™¨é…ç½®" class="headerlink" title="HTTP/HTTPSæ··åˆæœåŠ¡å™¨é…ç½®"></a>HTTP/HTTPSæ··åˆæœåŠ¡å™¨é…ç½®</h3><p>å¯ä»¥åŒæ—¶é…ç½® HTTP å’Œ HTTPS æœåŠ¡å™¨ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>              <span class="number">80</span>;</div><div class="line">    <span class="attribute">listen</span>              <span class="number">443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>         www.example.com;</div><div class="line">    <span class="attribute">ssl_certificate</span>     www.example.com.crt;</div><div class="line">    <span class="attribute">ssl_certificate_key</span> www.example.com.key;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>åœ¨ 0.7.14 ç‰ˆæœ¬ä¹‹å‰ï¼Œåœ¨ç‹¬ç«‹çš„ server ç«¯å£ä¸­æ˜¯ä¸èƒ½é€‰æ‹©æ€§å¼€å¯ SSL çš„</strong>ã€‚å¦‚ä¸Šé¢çš„ä¾‹å­ï¼ŒSSL åªèƒ½é€šè¿‡ä½¿ç”¨ <a href="//nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl">ssl</a> å‘½ä»¤ä¸ºå•ä¸ª server ç«¯å£å¼€å¯</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>              <span class="number">443</span>;</div><div class="line">    <span class="attribute">server_name</span>         www.example.com;</div><div class="line">    <span class="attribute">ssl_certificate</span>     www.example.com.crt;</div><div class="line">    <span class="attribute">ssl_certificate_key</span> www.example.com.key;</div><div class="line">    <span class="comment">#sslå‘½ä»¤å¼€å¯ https</span></div><div class="line">    <span class="attribute">ssl</span> <span class="literal">on</span>;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› æ­¤æ²¡æœ‰è¾¦æ³•è®¾ç½® HTTP/HTTPS æ··åˆæœåŠ¡å™¨ã€‚äºæ˜¯ Nginx æ–°å¢äº†ç›‘å¬å‘½ä»¤ <a href="//nginx.org/en/docs/http/ngx_http_core_module.html#listen">listen</a>å‚æ•° <code>ssl</code> ä¾†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>Nginx ç¾ä»£ç‰ˆæœ¬çš„<code>ssl</code>å‘½ä»¤å¹¶ä¸æ¨èä½¿ç”¨</strong></p>
<h3 id="åŸºäºæœåŠ¡å™¨åç§°ï¼ˆname-basedï¼‰çš„-HTTPS-æœåŠ¡å™¨"><a href="#åŸºäºæœåŠ¡å™¨åç§°ï¼ˆname-basedï¼‰çš„-HTTPS-æœåŠ¡å™¨" class="headerlink" title="åŸºäºæœåŠ¡å™¨åç§°ï¼ˆname-basedï¼‰çš„ HTTPS æœåŠ¡å™¨"></a>åŸºäºæœåŠ¡å™¨åç§°ï¼ˆname-basedï¼‰çš„ HTTPS æœåŠ¡å™¨</h3><p>ä¸€ä¸ªå¸¸è§çš„é—®é¢˜å°±æ˜¯å½“ä½¿ç”¨åŒä¸€ä¸ª IP åœ°å€å»é…ç½®ä¸¤ä¸ªæˆ–æ›´å¤šçš„ HTTPS æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå‡ºç°è¯ä¹¦ä¸åŒ¹é…çš„æƒ…æ³ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>          <span class="number">443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>     www.example.com;</div><div class="line">    <span class="attribute">ssl_certificate</span> www.example.com.crt;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>          <span class="number">443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>     www.example.org;</div><div class="line">    <span class="attribute">ssl_certificate</span> www.example.org.crt;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹æµè§ˆå™¨ä¼šè·å–é»˜è®¤çš„æœåŠ¡å™¨è¯ä¹¦ï¼ˆå¦‚ä¸Šé¢ä¾‹å­çš„ www.example.com.crtï¼‰è€Œå¿½è§†è¯·æ±‚çš„æœåŠ¡å™¨åï¼Œå¦‚è¾“å…¥ç½‘å€ï¼š<code>www.example.org</code>ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ <code>www.example.com.crt</code> çš„è¯ä¹¦åˆ°å®¢æˆ¶ç«¯ï¼Œè€Œä¸æ˜¯ <code>www.exaple.org.crt</code>ã€‚</p>
<p>è¿™æ˜¯å› ä¸º SSL åè®®è¡Œä¸ºæ‰€è‡´ï¼ŒSSL è¿æ¥åœ¨æµè§ˆå™¨å‘é€ HTTP è¯·æ±‚ä¹‹å‰å°±è¢«å»ºç«‹ï¼ŒNginx å¹¶ä¸çŸ¥é“è¢«è¯·æ±‚çš„æœåŠ¡å™¨åå­—ï¼Œå› æ­¤ Nginx åªä¼šæä¾›é»˜è®¤çš„æœåŠ¡å™¨è¯ä¹¦ã€‚</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img4.jpg" alt="è¯ä¹¦è·å–å¼‚å¸¸"></p>
<p>è§£æ±ºè¿™ä¸ªé—®é¢˜æœ€åŸå§‹æœ€æœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯ä¸ºæ¯ä¸ª HTTPS æœåŠ¡å™¨åˆ†é…ç‹¬ç«‹çš„ IP åœ°å€ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>          <span class="number">192.168.1.1:443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>     www.example.com;</div><div class="line">    <span class="attribute">ssl_certificate</span> www.example.com.crt;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span>          <span class="number">192.168.1.2:443</span> ssl;</div><div class="line">    <span class="attribute">server_name</span>     www.example.org;</div><div class="line">    <span class="attribute">ssl_certificate</span> www.example.org.crt;</div><div class="line">    <span class="comment">#...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ›´å¤šè§£æ±ºæ–¹æ¡ˆ"><a href="#æ›´å¤šè§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="æ›´å¤šè§£æ±ºæ–¹æ¡ˆ"></a>æ›´å¤šè§£æ±ºæ–¹æ¡ˆ</h4><p>é™¤æ­¤ä¹‹å¤–ï¼Œå®˜æ–¹è¿˜ä»‹ç»äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<strong>æ³›åŸŸè¯ä¹¦</strong>å’Œ<strong>åŸŸåæŒ‡ç¤ºï¼ˆSNIï¼‰</strong></p>
<p>å…¶å® OpenSSL åœ¨ <strong>0.9.8fç‰ˆæœ¬</strong>å°±æ”¯æŒ SNI äº†ï¼Œåªè¦åœ¨å®‰è£çš„æ—¶å€™åŠ ä¸Š <code>--enable-tlsext</code> é€‰é¡¹å°±å¯ä»¥ã€‚åˆ°äº† <strong>0.9.8jç‰ˆæœ¬</strong>ï¼Œè¿™ä¸ªé€‰é¡¹åœ¨å®‰è£çš„æ—¶å€™ä¼šé»˜è®¤å¯ç”¨ã€‚å¦‚æœåˆ›å»º Nginx çš„æ—¶å€™æ”¯æŒ SNIï¼Œå¯ä»¥åœ¨ Nginx ç‰ˆæœ¬ä¿¡æ¯æŸ¥åˆ°ä»¥ä¸‹çš„å­—æ®µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TLS SNI support enabled</div></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œå¦‚æœè¾ƒæ–°ç‰ˆæœ¬çš„ Nginx ä½¿ç”¨é»˜è®¤çš„ OpenSSL åº“ï¼Œ<strong>æ˜¯ä¸å­˜åœ¨ä½¿ç”¨ HTTPS åŒæ—¶æ”¯æŒåŸºäºåå­—çš„è™šæ‹Ÿä¸»æœºçš„æ—¶å€™åŒ IP ä¸åŒåŸŸåè¯ä¹¦ä¸åŒ¹é…çš„é—®é¢˜</strong>ã€‚</p>
<p><em>æ³¨æ„ï¼šå³ä½¿æ–°ç‰ˆæœ¬çš„ Nginx åœ¨åˆ›å»ºæ—¶æ”¯æŒäº† SNIï¼Œå¦‚æœ Nginx åŠ¨æ€åŠ è½½ä¸æ”¯æŒ SNI çš„ OpenSSL åº“çš„è¯ï¼ŒSNI æ‰©å±•å°†ä¸å¯ç”¨</em></p>
<p>æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸‹ï¼š</p>
<p><a href="http://nginx.org/en/docs/http/configuring_https_servers.html" target="_blank" rel="external">An SSL certificate with several names &amp;&amp; Server Name Indication</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>OKï¼Œæˆ‘ä»¬ç®€å•æ€»ç»“ä¸€ä¸‹åœ¨ Nginx ä¸‹é…ç½® HTTPS çš„å…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li><p><strong>è·å¾— SSL è¯ä¹¦</strong></p>
<ul>
<li>é€šè¿‡ OpenSSL å‘½ä»¤è·å¾— example.key å’Œ example.csr æ–‡ä»¶</li>
<li>æä¾› example.csr æ–‡ä»¶ç»™ç¬¬ä¸‰æ–¹å¯é è¯ä¹¦é¢å‘æœºæ„ï¼Œé€‰æ‹©é€‚åˆçš„å®‰å…¨çº§åˆ«è¯ä¹¦å¹¶ç­¾ç½²ï¼Œè·å¾— example.crt æ–‡ä»¶</li>
</ul>
</li>
<li><p><strong>é€šè¿‡ listen å‘½ä»¤ SSL å‚æ•°ä»¥åŠå¼•ç”¨ example.key å’Œ example.crt æ–‡ä»¶å®Œæˆ HTTPS åŸºç¡€é…ç½®</strong></p>
</li>
<li><p><strong>HTTPSä¼˜åŒ–</strong></p>
<ul>
<li>å‡å°‘ CPU è¿ç®—é‡<ul>
<li>ä½¿ç”¨ keepalive é•¿è¿æ¥</li>
<li>å¤ç”¨ SSL ä¼šè¯å‚æ•°</li>
</ul>
</li>
<li>ä½¿ç”¨ HSTS ç­–ç•¥å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ HTTPS è¿æ¥<ul>
<li>æ·»åŠ  Strict-Transport-Security å¤´éƒ¨ä¿¡æ¯</li>
<li>ä½¿ç”¨ HSTS é¢„åŠ è½½åˆ—è¡¨ï¼ˆHSTS Preload Listï¼‰</li>
</ul>
</li>
<li>åŠ å¼º HTTPS å®‰å…¨æ€§<ul>
<li>ä½¿ç”¨è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢ï¼ˆD-Hï¼ŒDiffieâ€“Hellman key exchangeï¼‰æ–¹æ¡ˆ</li>
<li>æ·»åŠ  X-Frame-Options å¤´éƒ¨ä¿¡æ¯ï¼Œå‡å°‘ç‚¹å‡»åŠ«æŒ</li>
<li>æ·»åŠ  X-Content-Type-Options å¤´éƒ¨ä¿¡æ¯ï¼Œç¦æ­¢æœåŠ¡å™¨è‡ªåŠ¨è§£æèµ„æºç±»å‹</li>
<li>æ·»åŠ  X-Xss-Protection å¤´éƒ¨ä¿¡æ¯ï¼Œé˜²XSSæ”»å‡»</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>HTTP/HTTPSæ··åˆæœåŠ¡å™¨é…ç½®</strong></p>
</li>
<li><p><strong>åŸºäºæœåŠ¡å™¨åç§°ï¼ˆname-basedï¼‰çš„ HTTPS æœåŠ¡å™¨</strong></p>
<ul>
<li>ä¸ºæ¯ä¸ª HTTPS æœåŠ¡å™¨åˆ†é…ç‹¬ç«‹çš„ IP åœ°å€</li>
<li>æ³›åŸŸè¯ä¹¦</li>
<li>åŸŸåæ ‡è¯†ï¼ˆSNIï¼‰ </li>
</ul>
</li>
</ul>
<p>å…¶å®ç®€å•çš„ä¸ªäººåšå®¢ï¼Œå¦‚æœæ²¡æœ‰æ•æ„Ÿæ•°æ®äº¤äº’çš„è¯ï¼Œä½¿ç”¨ http åè®®é€šè®¯ï¼Œä¸€èˆ¬éƒ½å¤ ç”¨äº†ï¼Œé¡µé¢é€Ÿåº¦è¿˜ä¼šæ›´å¿«ï¼Œä½†æ­£å¦‚æ–‡ç« å¼€å¤´æ‰€è¯´ï¼Œæˆ´ä¸Šã€ç»¿é”ã€ï¼Œæ›´ä¸“ä¸šæ›´å®‰å…¨~~æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»æ·±å…¥äº†è§£æŠ˜è…¾ä¸‹ï¼šï¼‰</p>
<p><img src="//misc.aotu.io/mihanX/nginx-https/img3.jpg" alt="å˜»~~"></p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt; 
&lt;p&gt;Chrome æµè§ˆå™¨åœ°å€æ æ ‡å¿—ç€ HTTPS çš„ç»¿è‰²å°é”å¤´ä»å¿ƒç†å±‚é¢ä¸Šå¯ä»¥ç»™ç”¨æˆ·ä¸“ä¸šå®‰å…¨çš„å¿ƒç†æš—ç¤ºï¼Œæœ¬æ–‡ç®€å•æ€»ç»“ä¸€ä¸‹å¦‚ä½•åœ¨ Nginx é…ç½® HTTPS æœåŠ¡å™¨ï¼Œè®©è‡ªå·±ç«™ç‚¹ä¸Šã€ç»¿é”ã€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;//misc.a
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Nginx" scheme="https://aotu.io/tags/Nginx/"/>
    
      <category term="HTTPS" scheme="https://aotu.io/tags/HTTPS/"/>
    
  </entry>
  
  <entry>
    <title>è·Ÿç€è€å¸æœºç©è½¬Nodeå‘½ä»¤è¡Œ</title>
    <link href="https://aotu.io/notes/2016/08/09/command-line-development/"/>
    <id>https://aotu.io/notes/2016/08/09/command-line-development/</id>
    <published>2016-08-09T01:30:12.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬ä½¿ç”¨Node.jsåŸç”Ÿå¼€å‘å‘½ä»¤è¡Œç¨‹åºæ—¶æˆ–è®¸ä¼šæœ‰ä¸€å®šçš„é—¨æ§›ï¼Œä½†é€šè¿‡ä¾èµ–ä¸€äº›å¼€æºæ¨¡å—å´èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç®€åŒ–å‘½ä»¤è¡Œå¼€å‘ï¼Œä»è€Œè¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚æœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€äº›ç¤ºä¾‹æ¥æ¼”ç¤ºcommander.jsã€inquirer.jsçš„ä¸€äº›åŸºæœ¬ç©æ³•ã€‚ä¸‹é¢è€å¸æœºå°†å¸¦ç€æˆ‘ï¼Œæˆ‘å¸¦ç€å¤§å®¶ä¸€èµ·æ¥ç©è½¬Nodeå‘½ä»¤è¡Œå§ï¼</p>
<h2 id="æ¸©é¦¨æç¤º"><a href="#æ¸©é¦¨æç¤º" class="headerlink" title="æ¸©é¦¨æç¤º"></a>æ¸©é¦¨æç¤º</h2><ul>
<li>æœ¬æ–‡éƒ¨åˆ†ä»£ç å‚è€ƒè‡ªå‡¹å‡¸å®éªŒå®¤å‰ç«¯æµç¨‹å·¥å…· <a href="https://github.com/o2team/athena" target="_blank" rel="external">athena</a></li>
<li>æœ¬æ–‡éœ€è¦ä¸€ç‚¹NodeåŸºç¡€</li>
<li>æœ¬æ–‡æ¶‰åŠåˆ°ä¸€äº›es6è¯­æ³•ï¼Œå¹¶ä¸”è¯·ç¡®ä¿Nodeç‰ˆæœ¬åœ¨4.0åŠä»¥ä¸Š</li>
<li>ä¸å±äºæœ¬æ–‡çš„çŸ¥è¯†ç‚¹ä¸€ç§’å¸¦è¿‡å“ˆ</li>
</ul>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_8.jpg" alt=""></p>
<h2 id="åŸºç¡€å‡†å¤‡"><a href="#åŸºç¡€å‡†å¤‡" class="headerlink" title="åŸºç¡€å‡†å¤‡"></a>åŸºç¡€å‡†å¤‡</h2><p>1.æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰“å¼€cmdå‘½ä»¤ï¼Œæ‰§è¡Œnpm init,åˆ›å»ºpackage.json<br>2.åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸å¸¦åç¼€çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œä½œä¸ºä¸»å…¥å£æ–‡ä»¶<br>3.å®‰è£…æœ¬æ–‡æ‰€æ¶‰åŠåˆ°çš„æ¨¡å—commanderã€inquirerã€chalkï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œ npm install commander inquirer chalk  â€“save-dev,è¿™æ—¶å€™ä¼šçœ‹åˆ°æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªnode_modulesç›®å½•ï¼Œé‡Œé¢æœ‰åˆšåˆšå®‰è£…çš„å‡ ä¸ªæ¨¡å—ï¼Œpackage.jsoné‡Œé¢devDependenciesä¾èµ–äº†è¿™å‡ ä¸ªæ¨¡å—ï¼Œå¦‚ä¸‹å›¾</p>
<p><strong>æ ¹ç›®å½•</strong><br><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_1.jpg" alt=""></p>
<p><strong>package.json</strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"app"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">"ç©è½¬å‘½ä»¤è¡Œå¼€å‘"</span>,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"author"</span>: <span class="string">"ykg"</span>,</div><div class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">    <span class="attr">"chalk"</span>: <span class="string">"^1.1.3"</span>,</div><div class="line">    <span class="attr">"commander"</span>: <span class="string">"^2.9.0"</span>,</div><div class="line">    <span class="attr">"inquirer"</span>: <span class="string">"^1.1.2"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="ä¸»ä½“å†…å®¹"><a href="#ä¸»ä½“å†…å®¹" class="headerlink" title="ä¸»ä½“å†…å®¹"></a>ä¸»ä½“å†…å®¹</h2><p>æˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹commanderå§</p>
<h3 id="commander-ç®€ä»‹"><a href="#commander-ç®€ä»‹" class="headerlink" title="commander ç®€ä»‹"></a>commander ç®€ä»‹</h3><p>å‘ƒ~~å®˜æ–¹æ—¶åˆ»åˆ°äº†å“ˆï¼šcommanderçµæ„Ÿæ¥è‡ª Rubyï¼Œå®ƒæä¾›äº†ç”¨æˆ·å‘½ä»¤è¡Œè¾“å…¥å’Œå‚æ•°è§£æçš„å¼ºå¤§åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å‘½ä»¤è¡Œå¼€å‘ã€‚<br>æ ¹æ®å…¶å®˜æ–¹çš„æè¿°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§:</p>
<ul>
<li>å‚æ•°è§£æ</li>
<li>å¼ºåˆ¶å¤šæ€</li>
<li>å¯å˜å‚æ•°</li>
<li>Git é£æ ¼çš„å­å‘½ä»¤</li>
<li>è‡ªåŠ¨åŒ–å¸®åŠ©ä¿¡æ¯</li>
<li>è‡ªå®šä¹‰å¸®åŠ©ç­‰</li>
</ul>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_9.jpg" alt=""></p>
<h3 id="ä¸€ä¸ªç®€å•çš„å®ä¾‹"><a href="#ä¸€ä¸ªç®€å•çš„å®ä¾‹" class="headerlink" title="ä¸€ä¸ªç®€å•çš„å®ä¾‹"></a>ä¸€ä¸ªç®€å•çš„å®ä¾‹</h3><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„å®ä¾‹æ¥äº†è§£ä¸€ä¸‹å®ƒçš„åŸºæœ¬è¯­æ³•å§<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</div><div class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</div><div class="line"></div><div class="line">program</div><div class="line">    .command(<span class="string">'module'</span>)</div><div class="line">    .alias(<span class="string">'m'</span>)</div><div class="line">    .description(<span class="string">'åˆ›å»ºæ–°çš„æ¨¡å—'</span>)</div><div class="line">    .option(<span class="string">'-a, --name [moduleName]'</span>, <span class="string">'æ¨¡å—åç§°'</span>)</div><div class="line">    .action(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Hello World'</span>)</div><div class="line">        <span class="comment">//ä¸ºä»€ä¹ˆæ˜¯Hello World ç»™ä½ ä¸ªçœ¼ç¥ï¼Œè‡ªå·±å»ä½“ä¼š...</span></div><div class="line">    &#125;)</div><div class="line">    </div><div class="line">program.parse(process.argv)</div></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœå§ï¼$ node app.js app (è¯·å„ä½çœ‹å®˜è‡ªè¡Œä½“ä¼šè¿™ç§æ‰§è¡Œæ–¹å¼å“ˆ)<br>//è¾“å‡ºç»“æœ Hello World</p>
<h3 id="å…¨å±€æ–¹å¼è¿è¡Œ"><a href="#å…¨å±€æ–¹å¼è¿è¡Œ" class="headerlink" title="å…¨å±€æ–¹å¼è¿è¡Œ"></a>å…¨å±€æ–¹å¼è¿è¡Œ</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›é…ç½®ï¼Œç„¶åä»¥ <strong>æ¨¡å—å + command</strong>çš„æ–¹å¼è¿è¡Œï¼Œå®ç°è¿™ç§æ–¹å¼åˆ†ä¸‰æ­¥èµ°ï¼š</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_10.jpg" alt=""></p>
<ul>
<li><p>é…ç½®package.jsonçš„binå­—æ®µã€‚binå­—æ®µæœ‰å•¥ç”¨å‘¢ï¼Ÿå®ƒå¯ä»¥ç”¨æ¥<strong>å­˜æ”¾ä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶</strong>ï¼Œå¦‚ä¸‹é…ç½®æ‰€ç¤º</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"bin"</span>: &#123;</div><div class="line">    <span class="string">"app"</span>: <span class="string">"app"</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œnpm linkã€‚å®ƒå°†ä¼šæŠŠ<strong>app</strong>è¿™ä¸ªå­—æ®µå¤åˆ¶åˆ°npmçš„å…¨å±€æ¨¡å—å®‰è£…æ–‡ä»¶å¤¹node_moduleså†…ï¼Œå¹¶åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆsymbolic linkï¼Œè½¯é“¾æ¥ï¼‰ï¼Œä¹Ÿå°±æ˜¯<strong>å°† app çš„è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ PATH</strong></p>
</li>
<li>åœ¨ä¸»å…¥å£æ–‡ä»¶çš„æœ€ä¸Šæ–¹æ·»åŠ ä»£ç  <strong>#! /usr/bin/env node</strong>, è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„åº”ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤º<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#! /usr/bin/env node </span></div><div class="line"></div><div class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</div><div class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</div><div class="line"></div><div class="line">program</div><div class="line">    .command(<span class="string">'module'</span>)</div><div class="line">    .alias(<span class="string">'m'</span>)</div><div class="line">    .description(<span class="string">'åˆ›å»ºæ–°çš„æ¨¡å—'</span>)</div><div class="line">    .option(<span class="string">'-a, --name [moduleName]'</span>, <span class="string">'æ¨¡å—åç§°'</span>)</div><div class="line">    .action(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Hello World'</span>)</div><div class="line">    &#125;)</div><div class="line">    </div><div class="line">program.parse(process.argv)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>åšå¥½äº†ä»¥ä¸Šä¸‰æ­¥åï¼Œç„¶åè¿è¡Œ$ app module<br>//è¾“å‡ºç»“æœ Hello World</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_11.jpg" alt=""></p>
<h3 id="commander-API"><a href="#commander-API" class="headerlink" title="commander API"></a>commander API</h3><p>æˆ‘ä»¬é€ä¸ªæ¥çœ‹çœ‹å„ä¸ªå±æ€§çš„åŠŸèƒ½ï¼Œä¸€çœ‹ç§’æ‡‚å“¦</p>
<ul>
<li><strong>command</strong> â€“ å®šä¹‰å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œåé¢å¯è·Ÿä¸Šä¸€ä¸ªnameï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚ .command( â€˜app [name] â€˜)</li>
<li><strong>alias</strong> â€“ å®šä¹‰ä¸€ä¸ªæ›´çŸ­çš„å‘½ä»¤è¡ŒæŒ‡ä»¤ ï¼Œå¦‚æ‰§è¡Œå‘½ä»¤<strong>$ app m</strong> ä¸ä¹‹æ˜¯ç­‰ä»·çš„</li>
<li><strong>description</strong> â€“ æè¿°ï¼Œå®ƒä¼šåœ¨helpé‡Œé¢å±•ç¤º</li>
<li><strong>option</strong> â€“ å®šä¹‰å‚æ•°ã€‚å®ƒæ¥å—å››ä¸ªå‚æ•°ï¼Œåœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå®ƒå¯è¾“å…¥çŸ­åå­— -aå’Œé•¿åå­—â€“app ,ä½¿ç”¨ <strong>|</strong> æˆ–è€…<strong>,</strong>åˆ†éš”ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨æ—¶ï¼Œè¿™ä¸¤ä¸ªæ˜¯ç­‰ä»·çš„ï¼ŒåŒºåˆ«æ˜¯åè€…å¯ä»¥åœ¨ç¨‹åºé‡Œé€šè¿‡å›è°ƒè·å–åˆ°ï¼›ç¬¬äºŒä¸ªä¸ºæè¿°, ä¼šåœ¨ help ä¿¡æ¯é‡Œå±•ç¤ºå‡ºæ¥ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œä»–æ¥æ”¶çš„å‚æ•°ä¸ºä¸€ä¸ªstringï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‘½ä»¤è¡Œåˆ›å»ºå¤šä¸ªæ¨¡å—ï¼Œå°±éœ€è¦ä¸€ä¸ªå›è°ƒæ¥å¤„ç†ï¼›ç¬¬å››ä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼</li>
<li><strong>action</strong> â€“ æ³¨å†Œä¸€ä¸ªcallbackå‡½æ•°,è¿™é‡Œéœ€æ³¨æ„<strong>ç›®å‰å›è°ƒä¸æ”¯æŒletå£°æ˜å˜é‡</strong></li>
<li><strong>parse</strong> â€“ è§£æå‘½ä»¤è¡Œ</li>
</ul>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_12.jpg" alt=""></p>
<h3 id="ç”Ÿæˆå¸®åŠ©ä¿¡æ¯"><a href="#ç”Ÿæˆå¸®åŠ©ä¿¡æ¯" class="headerlink" title="ç”Ÿæˆå¸®åŠ©ä¿¡æ¯"></a>ç”Ÿæˆå¸®åŠ©ä¿¡æ¯</h3><h4 id="è‡ªåŠ¨ç”Ÿæˆ"><a href="#è‡ªåŠ¨ç”Ÿæˆ" class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆ"></a>è‡ªåŠ¨ç”Ÿæˆ</h4><p>æ‰§è¡Œ $ app m â€“help</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_2.jpg" alt=""></p>
<p>å®ƒä¼šè‡ªåŠ¨å°†descriptionã€optionçš„ä¿¡æ¯æ˜¾ç¤ºåœ¨helpä¸­</p>
<h4 id="è‡ªå®šä¹‰ç”Ÿæˆ"><a href="#è‡ªå®šä¹‰ç”Ÿæˆ" class="headerlink" title="è‡ªå®šä¹‰ç”Ÿæˆ"></a>è‡ªå®šä¹‰ç”Ÿæˆ</h4><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„æ–¹å¼ç”Ÿæˆå¸®åŠ©ä¿¡æ¯<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</div><div class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</div><div class="line"></div><div class="line">program</div><div class="line">    .command(<span class="string">'module [moduleName]'</span>)</div><div class="line">    .alias(<span class="string">'m'</span>)</div><div class="line">    .description(<span class="string">'åˆ›å»ºæ–°çš„é¡¹ç›®'</span>)</div><div class="line">    .option(<span class="string">'-a, --name [moduleName]'</span>, <span class="string">'æ¨¡å—åç§°'</span>)</div><div class="line">    .action(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Hello World'</span>)</div><div class="line">    &#125;)</div><div class="line">    <span class="comment">//è‡ªå®šä¹‰å¸®åŠ©ä¿¡æ¯</span></div><div class="line">    .on(<span class="string">'--help'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'  Examples:'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">''</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app module moduleName'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app m moduleName'</span>)</div><div class="line">    &#125;)</div><div class="line">    </div><div class="line">program.parse(process.argv)</div></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œ$ app m â€“help</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_3.jpg" alt=""></p>
<h3 id="inquirer"><a href="#inquirer" class="headerlink" title="inquirer"></a>inquirer</h3><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„è·Ÿå‘½ä»¤è¡Œè¿›è¡Œäº¤äº’ï¼Œå€ŸåŠ©<strong>inquirer</strong>è¿™ä¸ªæ¨¡å—å°±èƒ½è½»æ¾å®ç°ï¼Œå®ƒæä¾›äº†ç”¨æˆ·ç•Œé¢å’ŒæŸ¥è¯¢ä¼šè¯æµç¨‹ã€‚å®ƒçš„è¯­æ³•æ˜¯è¿™æ ·çš„ï¼ˆç›´æ¥ä»<a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="external">å®˜æ–¹</a>æ‹·è´~~ï¼‰<br><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_16.jpg" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line">inquirer.prompt([<span class="comment">/* Pass your questions in here */</span>]).then(<span class="function"><span class="keyword">function</span> (<span class="params">answers</span>) </span>&#123;</div><div class="line">    <span class="comment">// Use user feedback for... whatever!! </span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>éœ€æ³¨æ„åœ¨æ—§çš„è¯­æ³•ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯ä¼ ç»Ÿçš„functionå›è°ƒ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line">inquirer.prompt([<span class="comment">/* Pass your questions in here */</span>], <span class="function"><span class="keyword">function</span> (<span class="params">answers</span>) </span>&#123;</div><div class="line">    <span class="comment">// Use user feedback for... whatever!! </span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h4 id="inquireråŠŸèƒ½ç®€ä»‹"><a href="#inquireråŠŸèƒ½ç®€ä»‹" class="headerlink" title="inquireråŠŸèƒ½ç®€ä»‹"></a>inquireråŠŸèƒ½ç®€ä»‹</h4><ul>
<li>inputâ€“è¾“å…¥</li>
<li>validateâ€“éªŒè¯</li>
<li>listâ€“åˆ—è¡¨é€‰é¡¹</li>
<li>confirmâ€“æç¤º</li>
<li>checkboxâ€“å¤é€‰æ¡†ç­‰ç­‰</li>
</ul>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_9.jpg" alt=""></p>
<p>è¿™ä¸ªæ¨¡å—ç›¸å½“ç®€å•ï¼Œçœ‹ä¸ªæ —å­å°±å…¨æ˜ç™½äº†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#! /usr/bin/env node </span></div><div class="line"></div><div class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</div><div class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</div><div class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</div><div class="line"></div><div class="line">program</div><div class="line">    .command(<span class="string">'module'</span>)</div><div class="line">    .alias(<span class="string">'m'</span>)</div><div class="line">    .description(<span class="string">'åˆ›å»ºæ–°çš„æ¨¡å—'</span>)</div><div class="line">    .option(<span class="string">'--name [moduleName]'</span>)</div><div class="line">    .option(<span class="string">'--sass'</span>, <span class="string">'å¯ç”¨sass'</span>)</div><div class="line">    .option(<span class="string">'--less'</span>, <span class="string">'å¯ç”¨less'</span>)</div><div class="line">    .action(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> config = _.assign(&#123;</div><div class="line">            <span class="attr">moduleName</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">description</span>: <span class="string">''</span>,</div><div class="line">            <span class="attr">sass</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">less</span>: <span class="literal">false</span></div><div class="line">        &#125;, option)</div><div class="line">        <span class="keyword">var</span> promps = []</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(config.moduleName !== <span class="string">'string'</span>) &#123;</div><div class="line">              promps.push(&#123;</div><div class="line">                <span class="attr">type</span>: <span class="string">'input'</span>,</div><div class="line">                <span class="attr">name</span>: <span class="string">'moduleName'</span>,</div><div class="line">                <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥æ¨¡å—åç§°'</span>,</div><div class="line">                <span class="attr">validate</span>: <span class="function"><span class="keyword">function</span> (<span class="params">input</span>)</span>&#123;</div><div class="line">                    <span class="keyword">if</span>(!input) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="string">'ä¸èƒ½ä¸ºç©º'</span></div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">                &#125;</div><div class="line">              &#125;)</div><div class="line">        &#125; </div><div class="line"></div><div class="line">        <span class="keyword">if</span>(config.description !== <span class="string">'string'</span>) &#123;</div><div class="line">            promps.push(&#123;</div><div class="line">                <span class="attr">type</span>: <span class="string">'input'</span>,</div><div class="line">                <span class="attr">name</span>: <span class="string">'moduleDescription'</span>,</div><div class="line">                <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥æ¨¡å—æè¿°'</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(config.sass === <span class="literal">false</span> &amp;&amp; config.less === <span class="literal">false</span>) &#123;</div><div class="line">          promps.push(&#123;</div><div class="line">            <span class="attr">type</span>: <span class="string">'list'</span>,</div><div class="line">            <span class="attr">name</span>: <span class="string">'cssPretreatment'</span>,</div><div class="line">            <span class="attr">message</span>: <span class="string">'æƒ³ç”¨ä»€ä¹ˆcssé¢„å¤„ç†å™¨å‘¢'</span>,</div><div class="line">            <span class="attr">choices</span>: [</div><div class="line">              &#123;</div><div class="line">                <span class="attr">name</span>: <span class="string">'Sass/Compass'</span>,</div><div class="line">                <span class="attr">value</span>: <span class="string">'sass'</span></div><div class="line">              &#125;,</div><div class="line">              &#123;</div><div class="line">                <span class="attr">name</span>: <span class="string">'Less'</span>,</div><div class="line">                <span class="attr">value</span>: <span class="string">'less'</span></div><div class="line">              &#125;</div><div class="line">            ]</div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        inquirer.prompt(promps).then(<span class="function"><span class="keyword">function</span> (<span class="params">answers</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(answers)</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div><div class="line">    .on(<span class="string">'--help'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'  Examples:'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">''</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app module moduleName'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app m moduleName'</span>)</div><div class="line">    &#125;) </div><div class="line"></div><div class="line">program.parse(process.argv)</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå‘½ä»¤ $ app m</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_4.jpg" alt=""></p>
<p>ä»¥ä¸Šä¸ºäº†ä»£ç ç»„ç»‡æ–¹ä¾¿ä½¿ç”¨äº†ä¸€ä¸ªprompsæ•°ç»„æ¥æ¥æ”¶å‚æ•°ä»¥åŠå€ŸåŠ©äº†<strong>lodash</strong>æ¨¡å—çš„<strong>assign</strong>æ–¹æ³•ç”¨æ¥åˆå¹¶å¯¹è±¡ï¼Œlodashä¸å±äºæœ¬ç« çš„çŸ¥è¯†ç‚¹å“ˆï¼Œè¿™é‡Œç»™å¤§å®¶æä¾›ä¸€ä¸ª<a href="http://www.kancloud.cn/wizardforcel/lodash-doc-45/144108" target="_blank" rel="external">ä¸­æ–‡APIæ–‡æ¡£</a>ä»…ä¾›å¤§å®¶å­¦ä¹ å‚è€ƒ</p>
<h3 id="chalk"><a href="#chalk" class="headerlink" title="chalk"></a>chalk</h3><p>æœ€åæˆ‘ä»¬å¼•å…¥<a href="https://www.npmjs.com/package/chalk" target="_blank" rel="external">chalk</a>è¿™ä¸ª<strong>ç¾åŒ–å‘½ä»¤è¡Œ</strong>çš„æ¨¡å—ï¼Œå®ƒå…·æœ‰è½»é‡çº§ã€é«˜æ€§èƒ½ã€å­¦ä¹ æˆæœ¬ä½ç­‰ç‰¹ç‚¹ã€‚ç»§ç»­åœ¨ä»¥ä¸Šæ —å­ä¸­å¼•å…¥chalkè¿›è¡Œè¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#! /usr/bin/env node </span></div><div class="line"></div><div class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</div><div class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>)</div><div class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</div><div class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</div><div class="line"></div><div class="line">program</div><div class="line">    .command(<span class="string">'module'</span>)</div><div class="line">    .alias(<span class="string">'m'</span>)</div><div class="line">    .description(<span class="string">'åˆ›å»ºæ–°çš„æ¨¡å—'</span>)</div><div class="line">    .option(<span class="string">'--name [moduleName]'</span>)</div><div class="line">    .option(<span class="string">'--sass'</span>, <span class="string">'å¯ç”¨sass'</span>)</div><div class="line">    .option(<span class="string">'--less'</span>, <span class="string">'å¯ç”¨less'</span>)</div><div class="line">    .action(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> config = _.assign(&#123;</div><div class="line">            <span class="attr">moduleName</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">description</span>: <span class="string">''</span>,</div><div class="line">            <span class="attr">sass</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">less</span>: <span class="literal">false</span></div><div class="line">        &#125;, option)</div><div class="line">        <span class="keyword">var</span> promps = []</div><div class="line">        </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">''</span>)</div><div class="line">        <span class="built_in">console</span>.log(chalk.red(<span class="string">'å¼€å¯å‰ç«¯å·¥ç¨‹åŒ–ä¹‹è·¯'</span>))     </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">''</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(config.moduleName !== <span class="string">'string'</span>) &#123;</div><div class="line">              promps.push(&#123;</div><div class="line">                <span class="attr">type</span>: <span class="string">'input'</span>,</div><div class="line">                <span class="attr">name</span>: <span class="string">'moduleName'</span>,</div><div class="line">                <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥æ¨¡å—åç§°'</span>,</div><div class="line">                <span class="attr">validate</span>: <span class="function"><span class="keyword">function</span> (<span class="params">input</span>)</span>&#123;</div><div class="line">                    <span class="keyword">if</span>(!input) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="string">'ä¸èƒ½ä¸ºç©º'</span></div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">                &#125;</div><div class="line">              &#125;)</div><div class="line">        &#125; </div><div class="line"></div><div class="line">        <span class="keyword">if</span>(config.description !== <span class="string">'string'</span>) &#123;</div><div class="line">            promps.push(&#123;</div><div class="line">                <span class="attr">type</span>: <span class="string">'input'</span>,</div><div class="line">                <span class="attr">name</span>: <span class="string">'moduleDescription'</span>,</div><div class="line">                <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥æ¨¡å—æè¿°'</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(config.sass === <span class="literal">false</span> &amp;&amp; config.less ===<span class="literal">false</span>) &#123;</div><div class="line">          promps.push(&#123;</div><div class="line">            <span class="attr">type</span>: <span class="string">'list'</span>,</div><div class="line">            <span class="attr">name</span>: <span class="string">'cssPretreatment'</span>,</div><div class="line">            <span class="attr">message</span>: <span class="string">'æƒ³ç”¨ä»€ä¹ˆcssé¢„å¤„ç†å™¨å‘¢'</span>,</div><div class="line">            <span class="attr">choices</span>: [</div><div class="line">              &#123;</div><div class="line">                <span class="attr">name</span>: <span class="string">'Sass/Compass'</span>,</div><div class="line">                <span class="attr">value</span>: <span class="string">'sass'</span></div><div class="line">              &#125;,</div><div class="line">              &#123;</div><div class="line">                <span class="attr">name</span>: <span class="string">'Less'</span>,</div><div class="line">                <span class="attr">value</span>: <span class="string">'less'</span></div><div class="line">              &#125;</div><div class="line">            ]</div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        inquirer.prompt(promps).then(<span class="function"><span class="keyword">function</span> (<span class="params">answers</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(chalk.green(<span class="string">'æ”¶å·¥å’¯'</span>))</div><div class="line">            <span class="built_in">console</span>.log(chalk.blue(<span class="string">'æ”¶å·¥å’¯'</span>))</div><div class="line">            <span class="built_in">console</span>.log(chalk.blue.bgRed(<span class="string">'æ”¶å·¥å’¯'</span>)) <span class="comment">//æ”¯æŒè®¾ç½®èƒŒæ™¯</span></div><div class="line">            <span class="built_in">console</span>.log(chalk.blue(answers))</div><div class="line">        &#125;)</div><div class="line">    &#125;) </div><div class="line">    .on(<span class="string">'--help'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'  Examples:'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">''</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app module moduleName'</span>)</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'$ app m moduleName'</span>)</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">program.parse(process.argv)</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå‘½ä»¤ $ app m</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_5.jpg" alt=""></p>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„è¾“å‡ºç»“æœï¼Œæœ¬ç¯‡æ–‡ç« æ”¶å·¥å’¯ï¼Œæ˜¯ä¸æ˜¯so easyï¼</p>
<p><img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_14.jpg" alt=""></p>
<blockquote>
<p>æ›¾ç»åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘ä¸€ç›´ä¸çŸ¥é“ä»–ä»¬å£ä¸­çš„è€å¸æœºç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆæ¢—ã€‚åæ¥éšç€æ—¶é—´çš„æ‹‰é•¿ï¼Œä»¥åŠåœ¨ç°å®ç”Ÿæ´»ä¸­å¯¹è¿™ä¸ªè¯æ‰€å‡ºç°è¯­å¢ƒçš„ç†è§£ï¼Œæˆ‘çš„æ½œæ„è¯†ä¸€åº¦å°†å®ƒç†è§£æˆäº†ä¸€ä¸ª<img src="//misc.aotu.io/yangzicheng/command-line-development/command-line-development_15.jpg" alt="">çš„è¯æ±‡(å’¦ï¼Œè¿™é‡Œå’‹æ˜¾ç¤ºä¸å‡ºæ¥å‘¢)â€¦åæ¥æ‰çŸ¥é“çœŸæ­£çš„è€å¸æœºæŒ‡çš„æ˜¯<strong>åœ¨å„ä¸ªç½‘ç«™ã€è®ºå›é‡Œæ¥è§¦æ—¶é—´æ¯”è¾ƒé•¿ï¼Œç†Ÿæ‚‰ç«™å†…å„ç§è§„åˆ™ã€å†…å®¹ä»¥åŠæŠ€æœ¯ã€ç©æ³•ï¼Œå¹¶ä¸”æŒæ¡ç€ä¸€å®šèµ„æºçš„è€æ‰‹ï¼Œäº¦æŒ‡åœ¨æŸäº›æ–¹é¢ç†Ÿé—¨ç†Ÿè·¯ï¼Œèµ„å†è¾ƒè€ï¼Œè§è¯†å¹¿ï¼Œç»éªŒè¶³çš„äººâ€¦</strong></p>
</blockquote>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>å‡¹å‡¸å®éªŒå®¤å‰ç«¯æµç¨‹å·¥å…·:  <a href="https://github.com/o2team/athena" target="_blank" rel="external">https://github.com/o2team/athena</a><br>åšæ–‡: <a href="http://www.tuicool.com/articles/ZFNZjq" target="_blank" rel="external">http://www.tuicool.com/articles/ZFNZjq</a><br>commander: <a href="https://www.npmjs.com/package/commander" target="_blank" rel="external">https://www.npmjs.com/package/commander</a><br>inquirer: <a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="external">https://www.npmjs.com/package/inquirer</a><br>chalk: <a href="https://www.npmjs.com/package/chalk" target="_blank" rel="external">https://www.npmjs.com/package/chalk</a><br>ç¤ºä¾‹æºç : <a href="https://github.com/yangzicheng/command-line" target="_blank" rel="external">https://github.com/yangzicheng/command-line</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨Node.jsåŸç”Ÿå¼€å‘å‘½ä»¤è¡Œç¨‹åºæ—¶æˆ–è®¸ä¼šæœ‰ä¸€å®šçš„é—¨æ§›ï¼Œä½†é€šè¿‡ä¾èµ–ä¸€äº›å¼€æºæ¨¡å—å´èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç®€åŒ–å‘½ä»¤è¡Œå¼€å‘ï¼Œä»è€Œè¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚æœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€äº›ç¤ºä¾‹æ¥æ¼”ç¤ºcommander.jsã€inquirer.jsçš„ä¸€äº›åŸºæœ¬ç©æ³•ã€‚ä¸‹é¢è€å¸æœºå°†å¸¦ç€æˆ‘ï¼Œæˆ‘å¸¦ç€å¤§å®¶ä¸€èµ·æ¥ç©è½¬No
    
    </summary>
    
      <category term="NodeJS" scheme="https://aotu.io/cates/NodeJS/"/>
    
    
      <category term="NodeJS" scheme="https://aotu.io/tags/NodeJS/"/>
    
      <category term="å‘½ä»¤è¡Œ" scheme="https://aotu.io/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"/>
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="https://aotu.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
      <category term="è€å¸æœº" scheme="https://aotu.io/tags/%E8%80%81%E5%8F%B8%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>å¸¦æœºå™¨äººä¸Šè®¾è®¡å­¦æ ¡</title>
    <link href="https://aotu.io/notes/2016/08/05/robot-design-school/"/>
    <id>https://aotu.io/notes/2016/08/05/robot-design-school/</id>
    <published>2016-08-05T02:09:24.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡è¯‘è‡ª Jon Gold çš„ <a href="http://www.jon.gold/2016/05/robot-design-school/" target="_blank" rel="external">Taking The Robots To Design School</a>ï¼Œç•¥æœ‰åˆ å‡ã€‚</p>
</blockquote>
<p>å¤§æ¦‚åœ¨ä¸€å¹´å‰ï¼Œæˆ‘å¼€å§‹å°è¯•æŠŠã€Œå­—ä½“è®¾è®¡ã€å’Œã€Œäººå·¥æ™ºèƒ½ã€è¿™ä¸¤ä¸ªä¸œè¥¿ç»“åˆèµ·æ¥ã€‚<br>ç°åœ¨æ˜¯ 2016 å¹´äº†ï¼Œæˆ‘æ‰“ç®—æŠŠè„‘å­é‡Œçš„ä¸œè¥¿æ¬åˆ°ç½‘ä¸Šæ¥ã€‚éƒ¨åˆ†åŸå› æ˜¯å®ƒå®åœ¨æ˜¯æœ‰è¶£ï¼Œå…¶æ¬¡æ˜¯æˆ‘æƒ³ä½œä¸ºæ—¥å¿—ï¼Œä¾¿äºä»¥åç¿»çœ‹ã€‚ä½†æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘æƒ³æ›´å¤šäººèƒ½è¯»åˆ°è¿™äº›ä¸œè¥¿ã€‚</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>è‡ªæ‰“æˆ‘åšè®¾è®¡å¸ˆä»¥æ¥ï¼Œæˆ‘å°±è¢«è®¾è®¡ç³»ç»Ÿä¸­æ•°å­¦çš„çº¯æ´æ€§æ‰€å¸å¼•ã€‚æˆ‘ä¸€ç›´å¾ˆæ¬£èµç‘å£«çš„è®¾è®¡ã€‚æˆ‘ä¸€ç”Ÿä¸­æœ€çˆ±çš„è®¾è®¡å¸ˆæˆ–è®¸å°±æ˜¯ Karl Gerstnerï¼Œä»–è‘—æœ‰ä½œå“ <a href="https://runemadsen.com/blog/karl-gerstner-designing-programmes/" target="_blank" rel="external">programmatic design</a>ã€‚2011 å¹´æˆ‘åœ¨ Prismatic åšç³»ç»ŸåŒ–çš„ç½‘é¡µå¸ƒå±€ç®—æ³•ã€‚ç„¶å 2014 å¹´å—åˆ°äº† <a href="http://engineering.flipboard.com/2014/03/web-layouts/" target="_blank" rel="external">Flipboardâ€™s å¸ƒå±€ç®—æ³•</a> çš„å¯å‘ï¼Œæˆ‘å¼€å§‹æŠŠæ³¨æ„åŠ›è½¬ç§»åˆ°æŠ½è±¡åŒ–ä¸Šï¼Œå¼€å§‹åšä¸€äº› å…ƒ-å…ƒ-å…ƒ-è®¾è®¡ç³»ç»Ÿå’Œå·¥å…·ï¼Œè®©äººç±»è®¾è®¡å¸ˆæ€ç»´æ›´å¼€é˜”ã€‚</p>
<p>å°±è¿™ä¹ˆåˆ°äº† 2015 æ˜¥ï¼Œæˆ‘å¼€å§‹åœ¨ The Grid å·¥ä½œâ€”â€”ä¸€ä¸ªåˆ©ç”¨äººå·¥æ™ºèƒ½æ¥å»ºç«™çš„å·¥å…·ã€‚ä»‹ç»ä¸€ä¸‹ï¼Œè¿™ä¸ªå·¥å…·æŸäº›åœ°æ–¹è·Ÿ Squarespace æˆ–è€… Wix æŒºåƒçš„ï¼Œéƒ½å¯ä»¥è®©éè®¾è®¡å¸ˆå¿«é€Ÿæ­å»ºèµ·ä¸€ä¸ªå¥½çœ‹çš„ç½‘ç«™ã€‚ä½†ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå®ƒæ²¡æœ‰ä¸»é¢˜æˆ–è€…æ¨¡æ¿ï¼Œè€Œæ˜¯æ ¹æ®å†…å®¹ï¼Œç”¨ç²¾å‡†çš„è®¾è®¡ç®—æ³•å»è®¾è®¡ç½‘ç«™ï¼Œå†å‘ˆç°ç»™ç”¨æˆ·ã€‚é…·ã€‚è¿™ä¸ªæ˜¯æ¢ç´¢è®¾è®¡ç³»ç»Ÿçš„å¥½åœ°æ–¹ï¼Œæˆ‘å—å‘½å»æŠŠè¿™ä¸ªç‰ˆå¼è®¾è®¡ç³»ç»Ÿå˜å¾—æ›´å¥½ã€‚</p>
<p>é‚£æ˜¯ä¸ªå¼€æ”¾æ€§çš„ç†å¿µï¼Œå®ƒè®©æˆ‘å˜å¾—å¯¹è‡ªå·±ç”Ÿæ¶¯æœ‰äº†æ›´å¤šçš„æ€è€ƒå’Œæœ‰è¶£çš„æ¢ç´¢ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œæˆ‘ä¹‹å‰æ‰€åšçš„ç‰ˆå¼è®¾è®¡ç³»ç»Ÿçš„å·¥ä½œä»ç„¶åœ¨ä¿å¯†åè®®ä¹‹å†…ï¼Œä½†å®ƒå®è´¨ä¸Šæ˜¯é’ˆå¯¹äººç±»çš„ã€‚å¯¹æ­¤æˆ‘å®šä¹‰äº†è‡ªå·±çš„ç†å¿µï¼Œæˆ‘å¸Œæœ›<strong>è¿™ä¸ªç³»ç»Ÿæ˜¯å¯ä»¥è®¤è¯†ã€é€‰æ‹©å’Œæ ¹æ®äººç±»è®¾è®¡ä¸“å®¶çš„ç»†å¾®åŒºåˆ«å»åº”ç”¨æ’ç‰ˆã€‚</strong></p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>æœ‰æ—¶å½“æˆ‘è¯´ã€ŒAI æ–‡å­—è®¾è®¡ã€æ—¶å€™ï¼Œåˆ«äººä»¥ä¸ºæˆ‘åœ¨è®¾è®¡æ–°çš„è‡ªç”Ÿæˆå­—ä½“ã€‚é‚£ç¡®å®æ˜¯å¾ˆæœ‰æ„æ€çš„é¢†åŸŸï¼Œä½†é‚£ä¸ªè‡†æ–­æ˜¯å› ä¸ºç”¨è¯ä¸å½“ã€‚æ¾„æ¸…ä¸€ä¸‹ï¼Œåœ¨å¼€å§‹ä¹‹å‰å’Œä½ å¯¹è¿™ç¯‡æ–‡ç« å¤±æœ›ä¹‹å‰ï¼š</p>
<p><strong>ç‰ˆå¼è®¾è®¡</strong>ï¼ˆTypographyï¼‰ï¼šå­—ä½“çš„ä½¿ç”¨<br><strong>å­—ä½“è®¾è®¡</strong>ï¼ˆType designï¼‰ï¼šæ–°å­—ä½“çš„åˆ›é€ </p>
<p>è°¢è°¢ <a href="http://www.fontbureau.com/blog/clear-definitions/" target="_blank" rel="external">Stephen Coles</a> å¯¹æ­¤ç®€æ´çš„å®šä¹‰ã€‚å¦‚æœä½ å¯¹ç”¨ç¥ç»ç½‘ç»œè®¾è®¡å­—ä½“æ„Ÿå…´è¶£çš„è¯ï¼Œä¸å¦¨çœ‹ä¸‹ Erik Bern å¤§ç¥çš„ <a href="http://erikbern.com/2016/01/21/analyzing-50k-fonts-using-deep-neural-networks/" target="_blank" rel="external">Deep Fonts</a> é¡¹ç›®ï¼Œå¤§æ¦‚å¯¹ 50000 ä¸ªå­—ä½“è¿›è¡Œè§†è§‰åˆ†æã€‚æ‰€ä»¥è¯´ï¼Œã€ŒAI æ–‡å­—è®¾è®¡ã€â€”â€”è®©è®¡ç®—æœºåšå­—ä½“è®¾è®¡ã€‚</p>
<hr>
<p>è®¾è®¡ä¸€ä¸ªèƒ½ç”Ÿæˆå¤æ‚ä¸“ä¸šçš„ä¸­å¿ƒæ³•åˆ™çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼Œç¡®å®æ˜¯æœ‰ç‚¹æŒ‘æˆ˜ã€‚è¿™éœ€è¦æˆ‘åœ¨å·¥ä½œä¸­ï¼Œä»ä¸€äº›åŸºæœ¬æ³•åˆ™é‡Œå­¦ä¹ äººå·¥æ™ºèƒ½å’Œç›¸å…³çš„æ‰€æœ‰å­¦ç§‘ï¼ˆæˆ‘å¹¶æ²¡æœ‰è®¡ç®—æœºç§‘å­¦çš„èƒŒæ™¯ï¼Œæˆ‘æ˜¯é¡¹ç›®ä¸­å”¯ä¸€ä¸€ä¸ªè®¾è®¡å·¥ç¨‹å¸ˆï¼‰ã€‚è®°å¾—é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘æ¯æ™šéƒ½ä¼šè¿œç¦»å±å¹•å» Pacific Heights é™„è¿‘æ•£æ­¥ï¼Œçœ‹ç€æ—¥è½ï¼Œä»”ç»†ç¢ç£¨é‚£ä¸ªé¡¹ç›®çš„è‰°å·¨æ€§ã€‚æœ‰ä¸€æ¬¡èµ°ç€èµ°ç€ï¼ŒAlan Turingï¼ˆè¯‘è€…æ³¨ï¼šè‰¾ä¼¦Â·å›¾çµï¼Œè®¡ç®—æœºä¹‹çˆ¶ï¼‰çš„ä¸€å¥è¯è·³è¿›äº†æˆ‘çš„è„‘å­é‡Œã€‚</p>
<blockquote>
<p>ä¸å…¶è¯´è¯•ç€å»å†™ç¨‹åºå»æ¨¡æ‹Ÿæˆå¹´äººçš„å¿ƒæ™ºï¼Œä¸ºä»€ä¹ˆä¸è¯•ç€å»å†™ä¸ªå¯ä»¥æ¨¡æ‹Ÿå°å­©çš„å‘¢ï¼Ÿå¦‚æœå®ƒå—åˆ°é€‚å½“çš„æ•™è‚²ï¼Œå®ƒåº”è¯¥ä¼šè·å¾—ä¸€ä¸ªæˆå¹´äººçš„å¤§è„‘ã€‚<br>â€” Alan Turing, <a href="http://www.loebner.net/Prizef/TuringArticle.html" target="_blank" rel="external">Computing Machinery and Intelligence</a>, 1950</p>
</blockquote>
<p>ä¸å…¶è¯´æŠŠè®¾è®¡å½“æˆä¸€ä¸ªæ•´ä½“å»çœ‹ï¼Œå¦‚æœæˆ‘æŠŠè®¾è®¡çœ‹æˆä¸€ä¸ªä¸ªåŸºäºäººç±»è®¾è®¡å¸ˆæ•™è‚²çš„æ¨¡å‹å‘¢ï¼Ÿ<br>æˆ‘ç›¸ä¿¡åœ¨è¿™ 65 å¹´æœŸé—´ï¼Œé‚£ä¸ªæ–¹æ³•è®ºè¢« AI çº¯ç²¹è€…ç»™æ¨ç¿»äº†ã€‚ä½†ä½œä¸ºæ··æ²Œçš„å¼€ç«¯ï¼Œå®ƒçœ‹èµ·æ¥è¿˜æ˜¯åˆç†çš„ã€‚</p>
<h2 id="Part-1-å­¦ä¼šå»çœ‹"><a href="#Part-1-å­¦ä¼šå»çœ‹" class="headerlink" title="Part 1: å­¦ä¼šå»çœ‹"></a>Part 1: å­¦ä¼šå»çœ‹</h2><p>å¯¹äºè®¾è®¡è¿™ä¸ªä¸œè¥¿ï¼Œä½ ä¸ç”¨éè¦åšè®¾è®¡å¸ˆæ‰èƒ½å¤Ÿè§¦ç¢°åˆ°å®ƒã€‚åœ¨è¥¿æ–¹ç¤¾ä¼šé‡Œï¼Œæˆ‘ä»¬æœ‰æ•°ç™¾å¹´å…±é€šçš„è§†è§‰æ–‡åŒ–â€”â€”æˆ‘ä»¬å…ˆå¤©å°±çŸ¥é“äº‹ç‰©æ˜¯æ€ä¹ˆä¼ è¾¾çš„ï¼Œå³ä¾¿æˆ‘ä»¬è¿˜ä¸èƒ½å»æ ‡è®°å®ƒã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-57-03.png" alt=""></p>
<blockquote>
<p>é€šè¿‡æ–‡å­—ï¼ˆå’Œ Taylor Swiftï¼‰æ¥ä¼ è¾¾å®Œå…¨ä¸åŒçš„æƒ…æ„Ÿ</p>
</blockquote>
<p>å¹³é¢è®¾è®¡çš„ç›®çš„æ˜¯å»å”¤é†’ç›®æ ‡ç¾¤ä½“çš„æƒ…æ„Ÿâ€”â€”å¯ä»¥æ˜¯è®¾è®¡å¸ˆï¼Œä½†æ›´å¤šçš„æ˜¯ã€Œæ™®é€šç¾¤ä¼—ã€ã€‚å°±æ˜¯é‚£äº›å–œæ¬¢èŠé¢œè‰²ã€å›¾å½¢çš„é»‘é­”æ³•å’Œå¯¹å­—è·æ³›æ³›è€Œè°ˆçš„å¤–è¡Œäººã€‚ä½†è¿™ä¸å¦¨ç¢è®¾è®¡æŠŠä¿¡æ¯ä¼ è¾¾ç»™ä»–ä»¬ã€‚å¦‚æœä¸€ä¸ªæ™®é€šäººä¸èƒ½ä»è®¾è®¡ä¸­å¾—åˆ°ä¸€äº›ä¿¡å·æš—ç¤ºçš„è¯ï¼Œè®¾è®¡å¸ˆå°±æ²¡æœ‰å­˜åœ¨çš„å¿…è¦äº†ã€‚éè®¾è®¡å¸ˆä¸çŸ¥ä¸è§‰ä¸­ï¼Œå°±èƒ½æ„Ÿå—åˆ°è®¾è®¡å¸¦æ¥çš„è§¦åŠ¨ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-56-54.png" alt=""></p>
<blockquote>
<p>å®ƒä»¬åˆ†åˆ«ä¼ è¾¾ä¸åŒçš„å«ä¹‰â€”â€”å¦‚æœæ²¡æœ‰ï¼Œå°±æ²¡è®¾è®¡å¸ˆè¿™ä¸ªä¸“ä¸š</p>
</blockquote>
<p>ä½†å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œè®¡ç®—æœºï¼Œå®ƒä»¬ä¸æ¯«ä¸æ‡‚å¾—è®¾è®¡ï¼Œä¸€ç‚¹ç‚¹éƒ½ä¸ã€‚å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œå­—ä½“å°±æ˜¯ä¸€äº› <code>.otf</code> æ–‡ä»¶å’Œè¿˜æœ‰å­—ç¬¦ä¸²å½¢å¼çš„å­—ä½“åç§°ã€‚å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œé¢œè‰²å°±æ˜¯ä¸€äº›åå…­è¿›åˆ¶ã€RGB å’Œ HSL å€¼ã€‚é»˜è®¤æ¥è¯´ï¼Œè®¡ç®—æœºç”šè‡³ä¸æ˜¯ä¸€ä¸ªéè®¾è®¡å¸ˆäººç±»çš„å¯¹æ‰‹ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-56-39.png" alt=""></p>
<blockquote>
<p>æˆ‘ä»¬ç”¨çš„è¿™äº›å·¥å…·å®ƒä»¬æ ¹æœ¬ä¸çŸ¥é“è‡ªå·±é•¿ä»€ä¹ˆæ ·å­</p>
</blockquote>
<p>å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œå®ƒä»¬åªçŸ¥é“ä¸€äº›å¾ˆå‘å¾®çš„å­—ç¬¦ä¸²â€”â€”æœ€å‘å¾®çš„æ•°æ®ç»“æ„ã€‚ä½†äººç±»å´æœ‰ç€éå¸¸å¼ºå¤§çš„ä¼ è¾¾æƒ…æ„Ÿçš„æ–¹å¼ã€‚åªæ˜¯äººç±»ä¸èƒ½ä»…ä»…é å­—ä½“åç§°æ¥åšè®¾è®¡è€Œå·²ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬å’Œäº†è§£å®ƒä»¬ï¼Œæ‰€ä»¥è®¡ç®—æœºä¸ºä»€ä¹ˆä¸è¡Œå‘¢ï¼ŸæŠŠæˆ‘ä»¬çš„ç®—æ³•å¸¦åˆ°è®¾è®¡å­¦æ ¡å‰ï¼Œé¦–å…ˆéœ€è¦çº æ­£è¿™ç‚¹ã€‚</p>
<p>è®¾è®¡å­¦æ ¡æä¾›äº†ä¸€ä¸ªä»æƒ…æ„Ÿåˆ°ç†æ€§çš„æ˜ å°„â€”â€”æˆ‘ä»¬å­¦åˆ°ä¸ºä»€ä¹ˆäº‹ç‰©åœ¨æˆ‘ä»¬è„‘å­é‡Œç”Ÿæˆæƒ…ç»ªååº”ï¼Œè¿˜æœ‰æ€ä¹ˆåˆ©ç”¨é‚£äº›æ€æƒ³å»åœ¨åˆ«çš„äº‹ç‰©ä¸Šé‡ç°æƒ…æ„Ÿã€‚ä¸ºæ­¤æˆ‘ä»¬å­¦åˆ°äº†ä¸€äº›æœ¯è¯­ï¼›å­¦ä¹ äº†æ€ä¹ˆè¾©åˆ« <code>æ­Œå¾·ä½“ (Grotesque)</code>ã€<code>äººæ–‡å­—ä½“ (Humanist)</code>ã€<code>è¿ªä¸œä½“ (Didone)</code> å’Œ <code>è¿‡æ¸¡å­—ä½“ (Transitional)</code>ã€<code>å¾·æ–‡å°–è§’ä½“ (Fraktur)</code> è¿˜æœ‰ <code>åœ†ä½“ (Rotunda)</code>ã€‚æˆ‘ä»¬å­¦ä¼šäº†æ€ä¹ˆç”¨ä¸€äº›å…ƒå±æ€§è¾©åˆ«ä¸€ä¸ªå­—ä½“ï¼š<code>xå­—é«˜</code>ã€<code>ç¬”ç”»ç²—ç»†å¯¹æ¯”</code>ã€<code>å®½åº¦</code>ã€<code>è¶…è¿‡xé«˜åº¦éƒ¨åˆ† (ascenders)</code>ã€<code>å­—æ€€ (counters)</code>ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ä½“åç§°ã€‚</p>
<blockquote>
<p>æŠ½è±¡åŒ–çš„ç›®çš„ä¸æ˜¯è¦å¾—æ›´å«ç³Šï¼Œè€Œæ˜¯åˆ©ç”¨å®ƒå»åˆ›å»ºä¸€ä¸ªèƒ½ç»å¯¹æè¿°å‡†ç¡®çš„è¯­ä¹‰å±‚ã€‚</p>
<ul>
<li>Edsger Dijkstra, <a href="https://www.cs.utexas.edu/~EWD/transcriptions/EWD03xx/EWD340.html" target="_blank" rel="external">The Humble Programmer</a>, 1972</li>
</ul>
</blockquote>
<p>è¿™äº›æ–°çš„ã€ç²¾ç¡®çš„æœ¯è¯­è®©æˆ‘ä»¬åœ¨å·¥ä½œä¸­æœ‰è§„å¾‹å¯ä¾ã€‚æˆ‘ä»¬å¯ä»¥ç”¨åƒ <code>xå­—é«˜</code>ã€<code>ç¬”ç”»ç²—ç»†å¯¹æ¯”</code> è¿™äº›æ¥æ ‡è®°å­—ä½“ã€‚æˆ‘ä»¬ç”¨è¿™äº›ç‰¹ç‚¹æ¥è¾©åˆ«å­—ä½“ï¼Œè€Œä¸æ˜¯ç®€å•çš„è¯´ï¼Œã€Œå“¦æˆ‘çœ‹å®ƒé•¿å¾—åƒè¿™ç§å­—ä½“ã€ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-56-26.png" alt=""></p>
<blockquote>
<p>å­—å½¢çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ï¼Œéƒ½æœ‰ä¸€ä¸ªèƒ½å‡†ç¡®æè¿°çš„æœ¯è¯­â€”â€”æ’å›¾æ¥è‡ª Ellen Lupton çš„ã€ŠThinking With Typeã€‹</p>
</blockquote>
<p>æˆ‘ä»¬è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œè®©è®¡ç®—æœºç”¨åŒæ ·çš„æ¦‚å¿µå»æ ‡è®°å’Œé€‰æ‹©å­—ä½“ã€‚</p>
<p>ä¹ä¸€çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‰‹åŠ¨å»æ ‡è®°å­—ä½“ã€‚ä½†è¿™å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>è¿™å¾ˆè€—æ—¶ï¼Œæˆ‘å‡ºäº†åæ‡’</li>
<li>è¿™æ ·æ—¢ä¸å¤Ÿèªæ˜ï¼Œä¹Ÿä¸èƒ½è§„æ¨¡åŒ–</li>
</ul>
<p>ä¸Šé¢ç¬¬ä¸€ç‚¹è¶³ä»¥è¯´æœæˆ‘æ°¸è¿œä¸å»ç¢°éœ€è¦äººå·¥å¹²é¢„çš„äº‹å„¿äº†ã€‚é‚£æ€ä¹ˆæ‰èƒ½ç”¨ç®—æ³•å»åŒºåˆ†å­—ä½“å‘¢ï¼Ÿ</p>
<h3 id="æ …æ ¼åŒ–å°è¯•"><a href="#æ …æ ¼åŒ–å°è¯•" class="headerlink" title="æ …æ ¼åŒ–å°è¯•"></a>æ …æ ¼åŒ–å°è¯•</h3><p>æˆ‘ç¬¬ä¸€ä¸ªååº”å°±æ˜¯è§‚å¯Ÿä¸‹è¿™äº›å­—ä½“ã€‚æœ‰æ—¶å¯èƒ½ä¼šæ¶‰åŠä¸€äº›è®¡ç®—æœºè§†è§‰å’Œåˆ†ç±»å­¦ã€‚æˆ‘æƒ³è‡ªå·±æ˜¯å¦è¶³å¤Ÿèªæ˜å»ä»¥æˆªå–éƒ¨åˆ†çš„æ–¹å¼æ„å»ºä¸€äº›å­—ç¬¦ï¼Œç„¶åå¼„æ˜ç™½å®ƒä»¬é•¿ä»€ä¹ˆæ ·å„¿ã€‚ä½†æˆ‘å‘ç°è‡ªå·±æ‰åˆ°ä¸€ä¸ªå…¨æ˜¯åƒç´ çš„æ— åº•æ´ï¼Œä¸€ç›´åœ¨ç»˜åˆ¶å­—ä½“å’Œæµ‹é‡ã€Œæ¨¡ç³ŠæŠ—é”¯é½¿å½©è‰²å°ç‰‡æ³•ã€è¾“å‡ºçš„ç»“æœã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-56-16.jpg" alt=""></p>
<p>æœ€å¼€å§‹æœ‰è¿™ä¸ªæƒ³æ³•å¯ä»¥ç†è§£ï¼Œä½†å®ƒæ•ˆç‡å¹¶ä¸æ˜¯æœ€é«˜çš„ã€‚ä¸ºäº†å¯ä»¥æ›´å¿«å’Œé‡å¤åœ°åšä¸Šé¢è¿™äº›æ“ä½œï¼Œæˆ‘ç”¨äº† PhantomJS å’Œ HTML5 canvas æ¥åšã€‚ä½†åœ¨ canvas é‡Œç”»ç½‘é¡µå­—ä½“çœŸçš„å¾ˆè›‹ç–¼ï¼Œè€Œåœ¨ PhantomJS é‡Œåšäº›è§†è§‰å¤æ‚çš„äº‹æƒ…ä¹Ÿå¾ˆéº»çƒ¦ã€‚æˆ‘èŠ±äº† 9 ä¸ªæœˆæ—¶é—´å»å°è¯•ï¼ŒæœŸé—´ç»å†è¿‡å¾ˆå¤šæŒ«æŠ˜ï¼›ä½†æˆ‘æèµ·è¿™ä»¶äº‹çš„åŸå› ï¼Œæ˜¯å› ä¸ºå®ƒè®©æˆ‘å‘ç°â€¦â€¦</p>
<h3 id="çŸ¢é‡å›¾å½¢ï¼"><a href="#çŸ¢é‡å›¾å½¢ï¼" class="headerlink" title="çŸ¢é‡å›¾å½¢ï¼"></a>çŸ¢é‡å›¾å½¢ï¼</h3><p>é¢å¯¹æŸæ—æ®‹æš´çš„é«˜æ¸©å¤©æ°”å’Œæ— æ•°æ¬¡å¯¹ PhantomJS å’Œä½å›¾çš„åæ§½ä¹‹åï¼Œæˆ‘å†³å®šé‡æ–°æ¥è¿‡ã€‚ä¹‹å‰æˆ‘ä¹‹æ‰€ä»¥å¯¹ä¸€ä¸ªä¸ªåƒç´ ç‚¹åˆ†æï¼Œæ˜¯å› ä¸ºæˆ‘æŠŠé—®é¢˜å½’ç»“åˆ°ã€Œè§†è§‰ã€ä¸Šï¼Œè€Œè®¡ç®—æœºè§†è§‰å°±æ˜¯ä»¥åƒç´ ä¸ºä¸»ã€‚ä½†å…¶å®åº”è¯¥è¿˜æœ‰å…¶ä»–åŠæ³•ï¼</p>
<p>å› ä¸ºå­—ä½“æ˜¯çŸ¢é‡çš„ï¼Œè¿™è®©ä¸€åˆ‡è®¡ç®—éƒ½å˜å¾—éå¸¸ç®€å•ã€‚å®ƒå°±æ˜¯å‡ ä½•å­¦è€Œå·²ã€‚æ‰€ä»¥æˆ‘å¼€å§‹å†™ä¸€ä¸ªå°å°çš„åº“å»è§£æå­—ä½“æ–‡ä»¶ï¼ŒæŠŠå®ƒä»¬è½¬åŒ–æˆ SVGï¼Œä½†æˆ‘å¾ˆå¿«åˆå‘ç°äº†ä¸€ä¸ªæ›´å¥½çš„ä¸œè¥¿ã€‚<a href="http://opentype.js.org/" target="_blank" rel="external">opentype.js</a> æ˜¯ä¸€ä¸ª OpenType å’Œ TrueType æ–‡ä»¶çš„è§£æå™¨ï¼Œå®ƒè®©ä½ åœ¨ Node.js å’Œæµè§ˆå™¨ç¯å¢ƒä¸­å¯ä»¥è®¿é—®åˆ°çŸ¢é‡çš„å­—å½¢ï¼Œè¿˜åŒ…æ‹¬æ‰€æœ‰çš„å†…åµŒ  opentype æ•°æ®ã€‚å¾ˆå¥½å¾ˆå¼ºå¤§ï¼</p>
<p>æœ‰äº†è¿™ç§é è°±çš„æ–¹å¼åï¼Œæˆ‘å¼€å§‹å†™ä¸€äº›ç®—æ³•å»æ ‡è®°é‚£äº›åŠŸèƒ½äº†ã€‚çœ‹çœ‹è¿™äº›ä¾‹å­ï¼š<br><img src="//misc.aotu.io/chuyik/2016-08-05-02-55-58.png" alt=""></p>
<h4 id="xå­—é«˜"><a href="#xå­—é«˜" class="headerlink" title="xå­—é«˜"></a>xå­—é«˜</h4><p>ã€Œxå­—é«˜ã€æŒ‡çš„æ˜¯å°å†™å­—æ¯ x çš„é«˜åº¦ï¼Œè¿™å¾ˆæ˜æ˜¾ã€‚ä¸ºäº†è®©æ‰€æœ‰å­—ä½“éƒ½èƒ½å¾—åˆ°ä¸€ä¸ªå¯è§„èŒƒåŒ–çš„æ•°å€¼ï¼ˆå­—ä½“å¯èƒ½è¢«ç»˜åˆ¶æˆä¸åŒçš„å¤§å°ï¼‰ï¼Œæˆ‘ä»¬ç”¨å¤§å†™å­—æ¯ A ä½œä¸ºå¯¹æ¯”ï¼Œè®°å½•æ¯”ä¾‹å€¼ã€‚è¿™ä¸ªæ•°å€¼å¤§æ¦‚åœ¨ ~0.45 - 0.8 ä¹‹é—´ï¼Œå¬ä¸Šå»è›®åˆç†çš„ã€‚</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> x-height [font]</div><div class="line">  (/ (<span class="name">char-height</span> font <span class="symbol">:x</span>) (<span class="name">char-height</span> font <span class="symbol">:A</span>)))</div></pre></td></tr></table></figure>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-55-48.png" alt=""></p>
<h4 id="ç¬”ç”»ç²—ç»†å¯¹æ¯”"><a href="#ç¬”ç”»ç²—ç»†å¯¹æ¯”" class="headerlink" title="ç¬”ç”»ç²—ç»†å¯¹æ¯”"></a>ç¬”ç”»ç²—ç»†å¯¹æ¯”</h4><p>æœ‰äº›å­—ç¬¦çœŸçš„å¾ˆèƒ½å±•ç¤ºå‡ºå­—ä½“çš„ç¬”ç”»ç²—ç»†å¯¹æ¯”ã€‚ç‰¹åˆ«æ˜¯é‡å  <code>O</code>ã€<code>o</code>ã€<code>A</code> å­—ç¬¦è®©æˆ‘å¾ˆæ¸…æ™°äº†è§£åˆ°å­—ä½“æ˜¯æ€ä¹ˆåˆ†åŒ–çš„ã€‚è¿™ä¸ªå¯¹æ¯”å¯ä»¥ç”¨ä»¥ä¸‹ç®—æ³•æ¥è¡¨ç¤ºï¼š</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> contrast [font]</div><div class="line">  (/ (<span class="name">char-area</span> font <span class="symbol">:O</span>) (<span class="name">char-bounding-box</span> font <span class="symbol">:O</span>)))</div></pre></td></tr></table></figure>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-55-32.png" alt=""></p>
<h4 id="å­—ä½“å®½åº¦"><a href="#å­—ä½“å®½åº¦" class="headerlink" title="å­—ä½“å®½åº¦"></a>å­—ä½“å®½åº¦</h4><p>æ‰¾ä¸€äº›æœ€å®¹æ˜“æ„Ÿå—åˆ°å­—ä½“å®½åº¦å˜åŒ–çš„å­—ç¬¦ï¼Œ<code>M</code> å’Œ <code>N</code> ç›¸å¯¹äºå…¶å®ƒè€Œè¨€ï¼Œå°±æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ä½†æˆ‘ä»¬ä¸èƒ½åªæ˜¯é‡å®ƒä»¬çš„å®½åº¦ï¼ˆå› ä¸ºå­—ä½“å¯ä»¥æ˜¯ä¸åŒå°ºå¯¸ï¼‰ï¼Œæ‰€ä»¥æˆ‘å°±å–äº†å®ƒä»¬é«˜å®½æ¯”ä¾‹çš„å¹³å‡æ•°ã€‚å“ˆå“ˆã€‚</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> width-ratio [font]</div><div class="line">  (<span class="name">mean</span> [(/ (<span class="name">char-width</span> font <span class="symbol">:M</span>) (<span class="name">char-height</span> font <span class="symbol">:M</span>))</div><div class="line">         (/ (<span class="name">char-width</span> font <span class="symbol">:N</span>) (<span class="name">char-height</span> font <span class="symbol">:N</span>))]))</div></pre></td></tr></table></figure>
<p>ç„¶åå‘ç°ä¸€ä¸ªæœ‰æ„æ€çš„äº‹å„¿ã€‚æˆ‘å½“æ—¶åœ¨ç»™æˆ‘çš„è®¾è®¡é¡¹ç›®ä¸­æ‰¾ä¸€äº›ç›¸ä¼¼çš„å­—ä½“ã€‚æœ‰æƒ³åˆ° <code>Gotham</code>, <code>Proxima Nova</code> å’Œ <code>Avenir</code>ï¼›<code>Tiempos Headline</code> å’Œ <code>Leitura Display</code>ï¼›<code>San Francisco</code>, <code>Aktiv Grotesk</code> å’Œ <code>Helvetica</code>; <code>AperÃ§u</code>, <code>Patron</code> å’Œ <code>Maison Neue</code> è¿™äº›ç»„åˆã€‚</p>
<p>æŒ‰ç…§ç»éªŒæ¥è¯´ï¼Œæ­é…å­—ä½“æ—¶éƒ½ä¼šæ‰¾ä¸€äº›æœ‰ç¬”ç”»ç²—ç»†å·®å¼‚çš„å­—ä½“ã€‚åƒ <code>Gotham</code> å’Œ <code>Proxima Nova</code> æ­é…æ¯”è¾ƒå°‘è§ï¼Œä½†å¦‚æœ <code>Gotham</code> æ­é…ä¸€ä¸ªè¡¬çº¿å­—ä½“å°±ä¼šæœ‰æ„æ€å¾—å¤šã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-55-19.png" alt=""></p>
<blockquote>
<p>è¿™æ˜¯ä¸‰ç§äººç±»è®¾è®¡å¸ˆè§‰å¾—ç›¸ä¼¼çš„å­—ä½“ã€‚ä½†è®¡ç®—æœºæ€ä¹ˆçœ‹å‘¢ï¼Ÿ</p>
</blockquote>
<p>å¯æ˜¯æœ‰äº›æ—¶å€™ä½ æƒ³è¦æ‰¾ç‰¹å®šå±æ€§ç›¸è¿‘çš„å­—ä½“ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯èƒ½ä¼šæƒ³è¦æ­é…ä¸€äº›xå­—é«˜å·®ä¸å¤šçš„ã€ç¬”ç”»ç²—ç»†æ¥è¿‘çš„å­—ä½“ã€‚</p>
<p>æ‰€ä»¥æˆ‘å¼„äº†ä¸€ä¸ªã€Œç›¸ä¼¼åº¦è¯„åˆ†ã€ï¼Œç”¨æ¥å±•ç¤ºä»»æ„å­—ä½“å±æ€§ç»„åˆçš„æ¬§æ°è·ç¦»ã€‚é»˜è®¤å®ƒè¡¨ç¤ºæ¯ä¸ªå­—ä½“å±æ€§ä¹‹å‰çš„è·ç¦»ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºå­—ä½“çš„ä¸€äº›å·®å¼‚ï¼Œåƒ <code>xå­—é«˜</code> å’Œ <code>ç¬”ç”»ç²—ç»†å¯¹æ¯”</code>ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-50-27.png" alt=""></p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> similarity [x y &amp; attrs]</div><div class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">empty?</span></span> attrs)</div><div class="line">        (<span class="name"><span class="builtin-name">recur</span></span> x y [<span class="symbol">:x-height</span> <span class="symbol">:contrast</span> <span class="symbol">:width</span>])</div><div class="line">        (<span class="name">euclidean-distance</span> (<span class="name"><span class="builtin-name">map</span></span> x attrs) (<span class="name"><span class="builtin-name">map</span></span> y attrs))))</div><div class="line"></div><div class="line">(<span class="name">similarity</span> helvetica aktiv-grotesk [<span class="symbol">:x-height</span> <span class="symbol">:contrast</span>]) <span class="comment">;; etc</span></div></pre></td></tr></table></figure>
<p>åœ¨å†™äº†è¿™ä¹ˆå¤šç®—æ³•ä¹‹åï¼Œæˆ‘åœ¨ä¸€äº›æµ‹è¯•æ•°æ®ä¸Šè·‘äº†ä¸€ä¸‹ï¼ŒæŠŠæ•°æ®æ¯”ä¾‹ç¼©å°åˆ° 0 å’Œ 1 ä¹‹é—´ï¼Œå°†ç»“æœç»˜åˆ¶æˆäº†è¡¨æ ¼ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-54-45.png" alt=""></p>
<blockquote>
<p>æŠŠ 8 ä¸ªå­—ä½“æŒ‰ç…§ä¸ã€ŒProxima Novaã€çš„ç›¸ä¼¼åº¦æ’åº</p>
</blockquote>
<p>è¿™ä¸ªç»“æœå¾ˆç†æƒ³ï¼æ ¹æ®ç›¸ä¼¼åº¦æ’åºä¹‹åï¼Œå‘ç° <code>Proxima Nova</code> å’Œ <code>Gotham</code> ç¡®å®æ˜¯æœ€åƒçš„ï¼Œè€Œå’Œ <code>Didot</code> å·®å¼‚æœ€å¤§ã€‚è¿™ç¬¦åˆæˆ‘çš„é¢„æœŸï¼Œä½†èƒ½ç”¨ä»£ç è¡¨ç¤ºå‡ºæ¥è¿™å¾ˆæ£’ã€‚</p>
<p>ä½†å½“ç„¶äº†ï¼Œåªæœ‰ 9 ä¸ªå­—ä½“ä¸è¶³ä»¥è®©äººå…´å¥‹ï¼Œæ‰€ä»¥æˆ‘å¾ˆæ®‹æš´åœ°æŠŠ Google Fonts ä¸Šçš„æ‰€æœ‰å­—ä½“ä¸Šéƒ½è·‘äº†ä¸€éã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-53-23.png" alt=""></p>
<blockquote>
<p>å¯¹æ¯”è¶…è¿‡ 800 ä¸ªå­—ä½“</p>
</blockquote>
<p>è¿™äº›ç»“æœå†æ¬¡è¯´æ˜äº†æˆ‘çš„ä»£ç æ˜¯å¯¹çš„ã€‚çœ‹å­—ä½“çš„é¢„è§ˆæ•ˆæœå’Œå®ƒä»¬çš„å¾—åˆ†ï¼Œæˆ‘ä»¬å¯çŸ¥è¿™äº›æ•°å€¼æ˜¯åŒ¹é…çš„â€”â€”èµï¼</p>
<p>ä½† <code>&lt;table&gt;</code> å¹¶ä¸æ˜¯ä¸€ä¸ªå­—ä½“ç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘ç»§ç»­ç ”ç©¶æˆ‘çš„è®¾è®¡å­¦æ ¡åˆçº§ç†è®ºï¼šè§„åˆ™ã€‚</p>
<h2 id="Part-2-åŸºäºè§„åˆ™çš„ç³»ç»Ÿ"><a href="#Part-2-åŸºäºè§„åˆ™çš„ç³»ç»Ÿ" class="headerlink" title="Part 2: åŸºäºè§„åˆ™çš„ç³»ç»Ÿ"></a>Part 2: åŸºäºè§„åˆ™çš„ç³»ç»Ÿ</h2><p>è®¾è®¡æ˜¯ä¸€è¿ä¸²çš„è§„åˆ™ï¼Œä¸ç®¡ä½ æ„è¯†åˆ°è¿™ç‚¹æ²¡æœ‰ã€‚æœ‰ä¸€äº›å¾ˆç®€å•æ˜äº†çš„è§„åˆ™ï¼šä¸€è¡Œæ–‡å­—åº”è¯¥åœ¨ 66 ä¸ªå­—å®½å·¦å³ï¼Œæ–‡å­—é¢œè‰²åº”è¯¥æœ‰ä¸€å®šå¯¹æ¯”åº¦ä¾¿äºé˜…è¯»ã€‚æ–‡ç« æ®µè½ä¸è¯¥å‡ºç°å¯¡è¡Œæˆ–è€…å·æµï¼ˆè¯‘è€…æ³¨ï¼šrivers, å³çºµå‘è£‚ç¼ï¼‰ï¼›å­—ä½“ç¼©æ”¾æ¯”ä¾‹çš„ä¸åŒå‰Šå¼±äº†å­—ä½“é—´çš„åå·®ã€‚è¿™äº›éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ¨ä¹¦ä¸Šæ‰¾åˆ°ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-53-47.jpg" alt=""></p>
<p>ä½†ä¹Ÿæœ‰ä¸€äº›éšå«çš„è§„åˆ™ã€‚è¿™äº›éšå«çš„è§„åˆ™æ˜¯æˆ‘ä»¬è®¾è®¡å¸ˆç»éªŒçš„æ€»ç»“ã€‚æˆ‘ä»¬æ¥æ‰‹çš„æ¯ä¸ªé¡¹ç›®ã€æ¯ä»¶äº‹éƒ½å¯èƒ½åšå¾—æ›´å¥½æˆ–è€…æ›´å·®ï¼›ä½†æ¯ä¸ªå¥‡æ·«æŠ€å·§æˆ‘ä»¬éƒ½è®°å¾—ã€‚è™½ç„¶æ²¡æœ‰ä¸‡èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æˆ‘ä»¬ä»å¯ä»¥æŒ½èµ·è¢–å­å»ä¸æ–­æ¢ç´¢ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-54-00.jpg" alt=""></p>
<p>å³ä½¿æ˜¯é‚£äº›å˜²ç¬‘ç°ä»£ä¸»ä¹‰è®¾è®¡çš„äººï¼Œä»–ä»¬æ‰€åœ¨çš„èŒä¸šä¹Ÿä¼šæœ‰ä¸€äº›äººä¸åˆå¸¸è§„ã€‚David Carson æœ‰ç€ä»–è‡ªå·±çš„ä¸€å¥—ï¼ŒNeville Brody ä¹Ÿæ˜¯ã€‚ä»–ä»¬ä¹Ÿè®¸ä¸æ˜¯ååˆ†æ­£ç»Ÿï¼Œä¹Ÿä¸ä¼šè¢«å†™è¿›ä¹¦é‡Œï¼Œä½†æˆ‘ä»¬æ¯ä¸ªäººè‡ªå·±èº«ä¸Šéƒ½æœ‰ä¸€å¥—ä¸“å±çš„è§„åˆ™ã€‚æ¡†æ¶è¢«ç”¨æ¥å¤„ç†è®¾è®¡ï¼Œå®ƒæœ‰ç€ä¸€ç³»åˆ—å¯ä»¥æŠŠè®¾è®¡éœ€æ±‚å˜æˆå¯äº¤ä»˜ç‰©çš„æ–¹æ³•ã€‚è¿™æˆ–è®¸ä¸æ˜¯è¡¨é¢å¯è§çš„ä¸œè¥¿ï¼Œä½†æˆ‘ä»¬å¯ä»¥å»å‘æ˜ä¸€ä¸‹ã€‚</p>
<p>åœ¨åŸºäºè§„åˆ™çš„ç³»ç»Ÿå‰æä¹‹ä¸‹ï¼Œæˆ‘æä¾›äº†ä¸€äº›é¢å‘è®¾è®¡å¸ˆçš„æ¥å£ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºè§„åˆ™ã€‚æˆ‘å—åˆ°äº†åƒ <a href="https://github.com/clojure/core.logic" target="_blank" rel="external">core.logic</a> å’Œ <a href="http://pqdtopen.proquest.com/search.html#abstract?dispub=3380156" target="_blank" rel="external">miniKanren</a> è¿™äº›é€»è¾‘ç¼–ç¨‹ç¨‹åºåº“çš„å½±å“åï¼Œå°±å¼€å§‹æƒ³è®©ä¸€ä¸ªç³»ç»Ÿå˜å¾—<code>å£°æ˜å¼(Declarative)</code>å’Œ<code>ç»„åˆå¼(Compositional)</code>ã€‚</p>
<p>å¦‚æœå¬ä¸Šå»å¾ˆæŠ½è±¡ï¼Œé‚£ä¹ˆç»™ä½ çœ‹çœ‹è¿™äº›æˆ‘ä»¬éƒ½ç”¨çš„åŸºäºæ¡ä»¶çš„ç¨‹åºï¼š</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-54-22.png" alt=""></p>
<blockquote>
<p>è¿™æ˜¯ä¸¤ä¸ªå¸¸è§çš„ç»„åˆå¼ã€åŸºäºæ¡ä»¶çš„æŸ¥æ‰¾å™¨ã€‚é…·ã€‚</p>
</blockquote>
<p>æ‰€ä»¥è¿™å¾ˆé…·â€”â€”æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€äº›å…ƒè§„åˆ™åƒã€Œç»™æˆ‘æ‰¾åˆ°æœ‰è¿™å‡ ç§å±æ€§çš„å­—ä½“ã€ï¼Œè€Œä¸æ˜¯è¯´ã€Œç»™æˆ‘æ‰¾åˆ°è¿™ä¸ªå­—ä½“ã€é‚£ä¸ªå­—ä½“ã€ï¼Œä»¥æ›´é«˜çš„å±‚é¢å»ç†è§£å­—ä½“ã€‚ã€Œæ ¹æ®è¿™ç§æ–°é—»æ ‡é¢˜å­—ä½“ï¼Œç»™æˆ‘æ ¹æ®è¿™äº›å±æ€§æ­é…æ–‡ç« æ­£æ–‡ã€ã€ã€Œå¦‚æœåƒè¿™ç§å­—ä½“å±•ç°åœ¨é¡µé¢ä¸Šï¼Œå°±ä¸è¦æ­é…åƒé‚£ç§å­—ä½“ã€ã€‚æˆ‘æƒ³å®é™…å®ç°çš„è§„åˆ™ä¸ä¼šæœ‰ç†è®ºä¸Šé‚£ä¹ˆæœ‰è¶£ï¼ˆå› ä¸ºè§„åˆ™å¯ä»¥è¢«è°ƒæ•´ï¼‰ï¼›ä½†å¤§æ„å°±æ˜¯ä»¥æ›´é«˜çš„å±‚é¢å»æ¢è®¨å­—ä½“ï¼Œè€Œä¸æ˜¯åªçœ‹å­—ä½“çš„åå­—ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-57-20.png" alt=""></p>
<blockquote>
<p>*<em>é‚£ä¸ªå­—ä½“</em>*</p>
</blockquote>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> small-x-height?</div><div class="line">  [font]</div><div class="line">    (<span class="name"><span class="builtin-name">&lt;=</span></span> (<span class="name">font</span> <span class="symbol">:x-height</span>)</div><div class="line">        <span class="number">0.75</span>))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> too-similar?</div><div class="line">  [a b min &amp; attrs]</div><div class="line">    (<span class="name"><span class="builtin-name">&gt;=</span></span> min</div><div class="line">        (<span class="name">similarity</span> a b attrs)))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> legible-serif</div><div class="line">  [font]</div><div class="line">    (<span class="name"><span class="builtin-name">and</span></span> (<span class="name"><span class="builtin-name">=</span></span> <span class="symbol">:serif</span> (<span class="name">font</span> <span class="symbol">:formality</span>))</div><div class="line">         (<span class="name"><span class="builtin-name">not</span></span> (<span class="name">small-x-height</span> font))))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> pair</div><div class="line">  <span class="string">"given a display font, find a legible</span></div><div class="line">  serif for the body that isn't too similar"</div><div class="line">  [library display]</div><div class="line">  (<span class="name"><span class="builtin-name">-&gt;&gt;</span></span> library</div><div class="line">    (<span class="name"><span class="builtin-name">filter</span></span> legible-serif)</div><div class="line">    (<span class="name"><span class="builtin-name">filter</span></span></div><div class="line">      (<span class="name"><span class="builtin-name">fn</span></span> [body]</div><div class="line">        (<span class="name"><span class="builtin-name">not</span></span> (<span class="name">too-similar</span> display body <span class="number">0.35</span>))))))</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™äº›ä¸œè¥¿çš„ç›®çš„å°±æ˜¯æš´éœ²ä¸€ä¸ªæ¥å£ç»™è®¾è®¡å¸ˆï¼Œå»åˆ›å»ºå’Œè°ƒæ•´è¢«æ·»åŠ åˆ°ç³»ç»Ÿçš„è§„åˆ™ã€‚ä½†å¾ˆå¿«æˆ‘æ„è¯†åˆ°è‡ªå·±æŠŠè¿™ä¸ªæ¨¡å‹å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ç»™å¿˜äº†â€¦</p>
<h2 id="Part-3-å®è§‚è§‚å¯Ÿ"><a href="#Part-3-å®è§‚è§‚å¯Ÿ" class="headerlink" title="Part 3: å®è§‚è§‚å¯Ÿ"></a>Part 3: å®è§‚è§‚å¯Ÿ</h2><p><img src="//misc.aotu.io/chuyik/2016-08-05-02-57-33.png" alt=""></p>
<p>åˆ›å»ºè¿™äº›è§„åˆ™å˜å¾—è¶Šæ¥è¶Šæ‰‹åŠ¨åŒ–ï¼Œæ‰€ä»¥æˆ‘æƒ³è‡ªå·±å¯¹è¿™ä¸ªè¡Œä¸šçš„ç†è§£ï¼Œå¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œç†è®ºå’Œå®è·µç›¸ç»“åˆã€‚è¿™å°±æ˜¯æˆ‘çš„æ¨¡å‹çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®è§‚è§‚å¯Ÿã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå­¦ç”Ÿï¼Œä½ ä¼šæœ‰ä¸€äº›è¡Œä¸šé¢†è¢–ä½œä¸ºä½ çš„å¶åƒï¼Œå²ä¹¦ä¸Šçš„æˆ–è€…å½“ä»£çš„ã€‚é€æ¸å¢é•¿çš„è®¾è®¡çŸ¥è¯†è®©ä½ èƒ½å¤ŸæŠŠä»–ä»¬çš„åˆ›ä½œå’Œè‡ªå·±çš„å…³è”èµ·æ¥ï¼›ä»ä½ çš„äº‹ä¸šè½¨è¿¹ä¸­æ¢å¯»åˆ°ä»–ä»¬çš„ä½œå“ã€‚</p>
<p>åœ¨æˆ‘å­¦ç”Ÿæ—¶æœŸï¼Œ<code>Experimental Jetset</code>ï¼Œ<code>Spin</code> å’Œ <code>Non-Format</code> è¿™äº›æ˜¯æˆ‘ä¸€äº›æœ€çˆ±çš„å·¥ä½œå®¤ã€‚åœ¨ä¼¦æ•¦å­¦æ ¡æ— æ•°ä¸ªä¸‹ç€æ¯›æ¯›ç»†é›¨çš„å†¬å¤©å¤œé‡Œï¼Œæˆ‘å‡è§†å®ƒä»¬çš„ä½œå“ï¼Œè¯•ç€å»äº†è§£ä»–ä»¬æ€ä¹ˆä¿®ç‚¼è‡ªå·±çš„ä¸ªäººç¾å­¦ã€‚è®¤å‡ºä»–ä»¬æ‰€ç”¨çš„å­—ä½“ï¼Œç„¶åç ”ç©¶ä¸ºä»€ä¹ˆè¿™äº›å­—ä½“å°±å¯ä»¥ã€‚çœ‹ä»–ä»¬æ‰€ç”¨çš„é¢œè‰²ï¼Œç„¶åå»ææ¸…æ¥šå®ƒä»¬æ˜¯ä»å“ªä¸ªè°ƒè‰²æ¿ä¸­å¾—åˆ°çš„ã€‚æˆ‘ä»æ¥æ²¡æœ‰æƒ³è¿‡åœ¨çœŸå®é¡¹ç›®ä¸­å¤åˆ¶ä»–ä»¬çš„ä½œå“ï¼Œä½†åƒé‚£ç§å½¢å¼çš„è§‚å¯Ÿåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è‚¯å®šæ˜¯æœ‰æ„ä¹‰çš„ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-57-51.png" alt=""></p>
<blockquote>
<p>ä¸¤ä¸ªæˆ‘æœ€çˆ±çš„ç½‘ç«™ï¼ˆè¯‘è€…æ³¨ï¼šåˆ†åˆ«æ˜¯ <a href="http://fontsinuse.com/" target="_blank" rel="external">Font In Use</a> å’Œ <a href="https://www.typewolf.com/" target="_blank" rel="external">Typewolf</a>ï¼‰</p>
</blockquote>
<p>æˆ‘æŠŠè¿™ç§ã€Œåœ¨ç°å®ä¸­è§‚å¯Ÿè®¾è®¡å¸ˆä»¬ç”¨ä»€ä¹ˆã€åšä»€ä¹ˆã€çš„å½¢å¼ç»™æ¨¡å‹åŒ–äº†ã€‚æœ‰ä¸€äº›æˆ‘å¾ˆå–œæ¬¢çš„ç½‘ç«™ï¼Œå®ƒä»¬æ”¶é›†äº†å…¶å®ƒä¸€äº›æ’ç‰ˆèƒ½ç»™äººçµæ„Ÿçš„ç½‘ç«™ï¼Œæ ¹æ®å­—ä½“åˆ†ç±»ï¼Œæ„å»ºå‡ºä¸€ä¸ªåºå¤§çš„å…³ç³»å‹æ•°æ®åº“ã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªä½“åŠ›æ´»ï¼Œä½†å¦‚æœè®©çˆ¬è™«æŠŠè¿™äº›æ•°æ®å…¨éƒ¨è‡ªåŠ¨åŒ–æŠ“ç»™æˆ‘å°±æ›´å¥½äº†ã€‚æ— è®ºå¦‚ä½•ï¼Œå‡ è¡Œä»£ç åŠ ä¸Šå¤§é‡çš„ HTTP è¯·æ±‚ï¼Œæœ€ç»ˆæˆ‘å°±å¯ä»¥æ‹¿åˆ°çœŸå®ä¸–ç•Œå­—ä½“ä½¿ç”¨æƒ…å†µçš„åºå¤§æ•°æ®é›†ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-58-02.jpg" alt=""></p>
<p>æŠŠå®ƒä»¬å¯è§†åŒ–æœ€è‡ªç„¶çš„æ–¹å¼å°±æ˜¯ç”¨èŠ‚ç‚¹å›¾å§ï¼Œé€šè¿‡çº¿è¿æ¥ç›¸äº’è¢«ä½¿ç”¨çš„å­—ä½“ã€‚è™½ç„¶è¿™æ ·çœ‹ä¸Šå»å¾ˆæ™•ï¼Œä½†æ˜¯æ•°æ®çœ‹ä¸Šå»å¾ˆä¸°å¯Œï¼Œå¾ˆå¸å¼•äººã€‚</p>
<p>ä½†è¿™ä¸ªå›¾è¡¨æœ‰ä¸€ä¸ªå’Œå­—ä½“ç°¿ï¼ˆè¯‘è€…æ³¨ï¼šFontBookï¼ŒMacOS çš„å­—ä½“ç®¡ç†å™¨ï¼‰ä¸€æ ·çš„é—®é¢˜ã€‚è™½ç„¶è¿™äº›å…³ç³»å¾ˆæœ‰è¶£ï¼Œä½†å®ƒä»¬ä»ç„¶é€šè¿‡å­—ä½“åç§°è¿›è¡Œå…³è”ã€‚å¦‚æœä½ è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚ï¼Œç–‘æƒ‘æœºå™¨å­¦ä¹ ä¼šè¿›å…¥åˆ°å“ªä¸€ä¸ªäººç±»è¡ç”Ÿå‡ºæ¥çš„ç›¸å¯¹ç‹­éš˜çš„ç³»ç»Ÿçš„è¯ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯äº†ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªèƒ½åˆ†æä»»æ„å­—ä½“å’ŒåŸºäºå‡ ä½•ç‰¹æ€§ç»˜åˆ¶å‡ºå›¾è¡¨çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå…³ç³»ä»å­—ä½“åç§°è½¬ç§»åˆ°å­—ä½“å¯Œå±æ€§ä¸Šäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥è¯¢æ¥æ‰¾å‡ºä¸€äº›åŒ¹é…çš„å­—ä½“ï¼Œä½†ä¹Ÿå¯ä»¥éå†å›¾è¡¨å»æ‰¾åˆ°è®¸å¤šç›¸ä¼¼çš„æœ‰æ„æ€çš„ç›¸å…³å­—ä½“ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›å­—ä½“ç»„å˜å¾—è¶Šæ¥è¶Šæµè¡Œï¼Œä½†å¯ä»¥çœ‹å‡ºæ˜¯å› ä¸ºå®ƒä»¬æœ‰ç€ä¸€äº›ç‰¹å®šçš„å­—ä½“å±æ€§ã€‚è¿™ä¸ªå›¾è¡¨å‘Šè¯‰äº†æˆ‘ä»¬å“ªäº›å­—ä½“æ˜¯æµè¡Œçš„ï¼Œä½†æˆ‘ä»¬çš„å‡ ä½•ç³»ç»Ÿå‘Šè¯‰äº†æˆ‘ä»¬ä¸ºä»€ä¹ˆæµè¡Œã€‚</p>
<p>é€šè¿‡çœ‹ä¸€äº›è®¾è®¡åšå®¢ï¼Œä½ å¾ˆå®¹æ˜“äº†è§£åˆ° <code>AperÃ§u</code>, <code>Maison Neue</code>, <code>GT Walsheim</code> å’Œ <code>LL Circular</code> è¿™äº›å­—ä½“å¾ˆæµè¡Œã€‚ä½†å¯¹æˆ‘è€Œè¨€ï¼Œé€šè¿‡ä¸€ä¸ªç³»ç»Ÿå»æ‰¾å‡ºå­—ä½“æ­é…å°±æ›´æœ‰æ„æ€äº†ã€‚è¿™ä¸ªç³»ç»Ÿå¯ä»¥çŸ¥é“ä¸ºä»€ä¹ˆä¸€äº›å­—ä½“ä¼šæµè¡Œèµ·æ¥ï¼Œé€šè¿‡ä»–å¯¹æ’ç‰ˆçš„çŸ¥è¯†ä¹Ÿå¯ä»¥å»é¢„ä¼°æœªæ¥è®¾è®¡çš„è¶‹åŠ¿ã€‚å®ƒæˆ–è®¸å¯ä»¥æå‡ºä¸€äº›äººç±»æƒ³ä¸åˆ°çš„ï¼Œä½†çœ‹ä¸Šå»è²Œä¼¼åˆç†çš„å­—ä½“ç»„åˆã€‚</p>
<h2 id="Part-4-å¾®è§‚è§‚å¯Ÿ"><a href="#Part-4-å¾®è§‚è§‚å¯Ÿ" class="headerlink" title="Part 4: å¾®è§‚è§‚å¯Ÿ"></a>Part 4: å¾®è§‚è§‚å¯Ÿ</h2><p>å¦‚æœæŠŠè¿™ä¸ªè¡Œä¸šå½“æˆä¸€ä¸ªæ•´ä½“ï¼Œä»¥ä¸€ä¸ªé«˜çš„å±‚é¢å»æ„å»ºæˆ‘ä»¬å¯¹æ½®æµè¶‹åŠ¿çš„ç†è§£ï¼Œé‚£ä¹ˆå»æ·±å…¥äº†è§£å…¶å®ƒè®¾è®¡å¸ˆä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚äº†è§£ä»–ä»¬æ€ä¹ˆåšçš„ï¼Œè§‚å¯Ÿä»–ä»¬åšå‡ºé€‰æ‹©çš„è¿‡ç¨‹ã€‚ä»–ä»¬å°è¯•è¿‡çš„æ–¹æ³•ï¼Œä»–ä»¬æ”¾å¼ƒçš„ã€ä¿ç•™ç€çš„ä¸œè¥¿ã€‚ä¸æ–­è¯¢é—®ï¼Œç•™å¿ƒä»–ä»¬è§£å†³é—®é¢˜çš„æŠ€å·§ã€‚</p>
<p>åœ¨æˆ‘ä»¬å­¦ç”Ÿé˜¶æ®µã€å®ä¹ é˜¶æ®µã€ç”šè‡³æ˜¯åˆšå½“è®¾è®¡å¸ˆé‚£ä¼šå„¿ï¼Œå°±å­¦ä¼šäº†æ€ä¹ˆå»åšä¸Šé¢è¿™äº›äº‹æƒ…ã€‚æœ€å¼€å§‹æˆ‘ä»¬ç»å¸¸å’Œä¸€äº›å¹´é•¿çš„è®¾è®¡å¸ˆæ‰“äº¤é“ã€‚æˆ‘ä»¬ä»ä¸€äº›åŒè¡Œå’Œå¤§å¸ˆä¸­ï¼Œå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-58-16.jpg" alt=""></p>
<blockquote>
<p>è‹±å›½ç‘æ–‡æ–¯åšå­¦é™¢ã€‚è®¾è®¡å¸ˆåœ¨å¿™æ´»ã€‚</p>
</blockquote>
<p>ä½œä¸ºäººç±»ï¼Œæˆ‘ä»¬ä¼šä»¥ä¸ªä½“ã€å°ç»„å’Œæ›´å¤§çš„ç¤¾åŒºå½¢å¼ï¼Œå»ä¸ºå…¶ä»–è®¾è®¡å¸ˆåˆ›é€ ä¸€äº›æ¨¡èŒƒã€‚æ¯”å¦‚è¿™äº›åœ¨å·¥ä½œå®¤æ°›å›´ä¸­å½¢æˆçš„æ–‡åŒ–åŸºå› ï¼Œå’Œä¸€äº›è®¾è®¡å¸ˆç¾¤ä½“èšåœ¨ä¸€èµ·ï¼Œå¯¹å¤–åˆ†äº«çš„ä¸€äº›æ€æƒ³ç«èŠ±ã€‚æ‰€æœ‰ä¼¦æ•¦çš„è®¾è®¡å­¦æ ¡ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ã€Œç‘æ–‡æ–¯åšé£æ ¼ã€çš„å­¦æ ¡å’Œé‡‘æ–¯é¡¿å¤§å­¦ã€åˆ‡å°”è¥¿å¤§å­¦ã€ä¼¦æ•¦ä¼ åª’å­¦é™¢å’Œä¸­å¤®åœ£é©¬ä¸è‰ºæœ¯ä¸è®¾è®¡å­¦é™¢è¿™äº›å­¦æ ¡çš„è¾ƒé‡ã€‚ä½†ä¹Ÿæœ‰ã€Œä¼¦æ•¦é£ã€ã€è‹±ä¼¦é£å’Œæ¬§æ´²é£è¿™äº›ä¸åŒé£æ ¼ç¾¤ä½“ã€‚åƒæ›´è¿œçš„ï¼Œã€Œ<a href="http://yalegraphicdesign.tumblr.com/" target="_blank" rel="external">è€¶é²é£</a>ã€ä¸€ä¸‹å­è¢«è®¤å‡ºæ¥äº†ã€‚å­¦æ ¡ä¹‹å¤–ä¹Ÿæœ‰ä¸€äº›æœ‰ç€åŒæ ·æƒ³æ³•ï¼Œä½†ä¸åŒç‰©ç†ç©ºé—´çš„æ´¾ç³»â€”â€”åœ¨ Dribbble å’Œ Behance ä¸Šè®¾è®¡å¸ˆå’Œæ’ç”»å®¶ä¹‹é—´æ˜æ˜¾çš„æ½®æµè¶‹åŠ¿ï¼Œæˆ–è€…å…¶ä»–æˆ‘ä»¬äº’ç›¸æ¬£èµå¯¹æ–¹ä½œå“çš„åœ°æ–¹ã€‚</p>
<p>äº†è§£å…¶ä»–è®¾è®¡å¸ˆæ‰€æŒæ¡çš„ä¸œè¥¿ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯åä¸‹æ¥å’Œä»–ä»¬é—²èŠï¼Œæˆ–è€…çª¥çœ‹ä»–ä»¬çš„ç”»æ¿å’Œä»–ä»¬åˆ¶ä½œçš„æ–¹å¼ã€‚å…³äºè¿™ä¸ªæœ€é…·çš„åœ°æ–¹å°±æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç®—æ³•å­¦ä¹ åˆ°çš„ã€‚æŠŠã€Œç«™åœ¨å…¶ä»–è®¾è®¡å¸ˆè‚©è†€ä¸Šã€è¿™ä¸ªåŠ¨ä½œç»™æ•°å­—åŒ–ã€‚</p>
<p>æˆ‘æœ‰ä¸€äº›å·¥å…·å¯ä»¥å»æ¢ç´¢è¿™ä¸ªæƒ³æ³•ï¼šå»åˆæ³•è§‚å¯Ÿå…¶ä»–è®¾è®¡å¸ˆå¦‚ä½•åšè®¾è®¡ã€‚æœ€é…·çš„åœ°æ–¹åœ¨äºï¼Œæˆ‘ä»¬çš„ç®—æ³•è¶Šèªæ˜ï¼Œæˆ‘ä»¬å°±è¶Šèƒ½ä»åŒ¿åæ•°æ®ä¸­æŠ½å–å‡ºæ‰€éœ€è¦çš„å«ä¸Šä¸‹æ–‡çš„ä¸œè¥¿ã€‚è¿™å°±éœ€è¦å»ä¸°å¯Œå’Œæ”¹å˜è®­ç»ƒæ•°æ®ï¼Œè®©æˆ‘ä»¬åœ¨è®¾è®¡å¸ˆä¸­æ‰¾åˆ°æ½®æµè¶‹åŠ¿ã€‚åœ¨å¤§å‹çš„ç”Ÿäº§ä¼ä¸šå’Œå·¥ä½œå®¤ï¼Œä¼šç”¨ä¸€äº›å†…éƒ¨è®¾è®¡å·¥å…·ï¼Œæˆ–è®¸æˆ‘ä»¬èƒ½æ„å»ºå‡ºè¿™äº›ä½¿ç”¨è€…çš„ç‰¹å¾æ¨¡å‹ã€‚æ›´å¤šå…³äºè®¾è®¡å·¥å…·èåˆåŒ–çš„äº‹å„¿ï¼Œä»¥åå†è¯´ã€‚</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æˆ‘ä»Šå¹´åˆï¼ˆ2016ï¼‰ç¦»å¼€äº† The Grid å›¢é˜Ÿã€‚è¿™å‡ ä¸ªæœˆç”±äºå…¬å¸éœ€æ±‚å¤ªå¿™ï¼Œè¿™ä¸ªç‰ˆå¼è®¾è®¡é¡¹ç›®ä¸€ç›´æ²¡ç»§ç»­ï¼Œæˆ‘ä¸€ç›´æ²¡èƒ½æŠŠå®ƒåº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸Šï¼Œç°åœ¨æƒ³æƒ³è¿˜æ˜¯å¾ˆæ‚²ä¼¤ã€‚#åˆ›ä¸šç”Ÿæ´»</p>
<p>å½“ç„¶äº‹åå¾ˆå®¹æ˜“çŸ¥é“ä»€ä¹ˆäº‹æƒ…å¯ä»¥åšå¾—æ›´å¥½ï¼Œè¿™ä¹Ÿç£ä¿ƒç€æˆ‘çš„å·¥ä½œå‘å‰æ¨è¿›ã€‚The Grid ç›®çš„æ˜¯æƒ³æ‰“é€ ä¸€ä¸ªè®¾è®¡ç³»ç»Ÿï¼ŒæŠŠæ‰€æœ‰è¯¦ç»†ä¿¡æ¯éƒ½æŠ½è±¡å‡ºæ¥ç»™ç»ˆç«¯ç”¨æˆ·ã€‚ä½†åœ¨æˆ‘æŠŠæ‰€æœ‰æ™ºæ…§è£…è¿›è¿™ä¸ªç‰ˆå¼è®¾è®¡ç³»ç»Ÿä¹‹åï¼Œæˆ‘è¢«å‘ŠçŸ¥åªèƒ½ç”¨ä¸€ä¸ª <code>&lt;input type=&quot;range&quot; /&gt;</code> æ»‘åŠ¨æ¡å°†å…¶å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>é—®è¿™ä¸ªç³»ç»Ÿæ€ä¹ˆç”¨çš„è®¾è®¡å¸ˆæœ‹å‹è‚¯å®šä¼šå¯¹æ­¤å¾ˆå¤±æœ›ã€‚é™¤å»æˆ‘åœ¨é‚£é‡Œä¸ºè®¾è®¡è¡Œä¸šæœªæ¥äººå·¥æ™ºèƒ½æ‰€åšçš„è´¡çŒ®ä¹‹å¤–ï¼Œæˆ‘æ›´æƒ³è®©è¿™äº›æ™ºèƒ½ç®—æ³•å»æ›´å¥½å¸®åŠ©è®¾è®¡å¸ˆï¼Œè€Œä¸æ˜¯è¯´å–ä»£ä»–ä»¬ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªç ”ç©¶å›¢ä½“é¢„è®¡ 1980 å¹´å‰ï¼Œäººå·¥æ™ºèƒ½çš„å‘å±•ä¼šè®©æœºå™¨çš„ç‹¬ç«‹æ€è€ƒæˆ–è€…è§£å†³å†›äº‹é—®é¢˜æˆä¸ºå¯èƒ½ã€‚é‚£å°±æ˜¯è¯´ï¼Œå¤§æ¦‚è¿˜æœ‰ 5 å¹´æ—¶é—´å»å‘å±•äººæœºå…±ç”Ÿå…³ç³»å’Œ 15 å¹´çš„æ—¶é—´å»ä½¿ç”¨å®ƒã€‚è¿™ä¸ª 15 ä¹Ÿå¯ä»¥æ˜¯ 10 å¹´æˆ–è€… 500 å¹´ï¼Œä½†é‚£åº”è¯¥äººç±»å†å²ä¸Šæœ€æ¿€åŠ¨äººå¿ƒå’Œæ™ºæ…§æœ€é—ªè€€çš„æ—¶åˆ»ã€‚<br>â€” J. C. R. Licklider, <a href="http://groups.csail.mit.edu/medg/people/psz/Licklider.html" target="_blank" rel="external">Man-Computer Symbiosis</a>, 1960</p>
</blockquote>
<p>åœ¨ç¿˜é¦–å®Œæœªæ¥ä¹‹åï¼Œå†çœ‹ç°åœ¨æ‰€ç”¨çš„è®¾è®¡å·¥å…·ï¼Œæ— ç–‘æ˜¯è®©äººå¤±æœ›çš„ã€‚æˆ‘ä»¬çš„è½¯ä»¶ç¼ºä¹äº†ä¸Šä¸‹æ–‡ç†è§£å’Œè¡Œä¸šæ„è¯†ã€‚è¿™äº›å·¥å…·æ“ä½œçš„æ˜¯æ–‡æœ¬ã€çŸ¢é‡å’Œå¸ƒå°”å€¼ï¼›ä¸æ˜¯è®¾è®¡ã€‚ä½†å·¥å…·æ˜¯æœ€å®¹æ˜“å‘ç”Ÿæ”¹å˜çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘åœ¨åˆ›é€ ä¸€äº›è®¾è®¡å·¥å…·ï¼Œå®ƒæ•´åˆäº†è·Ÿè®¾è®¡æµç¨‹ç›¸å…³çš„èªæ˜ç®—æ³•ï¼Œå¯ä»¥è®©è®¾è®¡å¸ˆé€šè¿‡å­¦ä¹ ä»–ä»¬åœ¨åšä»€ä¹ˆï¼Œæˆ‘ä»¬åœ¨åšä»€ä¹ˆï¼Œä»è€Œå˜å¾—æ›´å¥½ã€‚å¢å¼ºä»–ä»¬è€Œä¸æ˜¯æ›¿ä»£ä»–ä»¬ã€‚</p>
<p><img src="//misc.aotu.io/chuyik/2016-08-05-02-58-28.jpg" alt=""></p>
<blockquote>
<p>å¯¹äºä¸€äº›ç‰¹å®šçš„è®¾è®¡å­é›†ï¼Œæƒ³æ³•è¶‹åŒå¾ˆé‡è¦</p>
</blockquote>
<p>è®¾è®¡å¸ˆæœ€ä¸æ„¿æ„å»é€‰æ‹©ç”¨ä»€ä¹ˆå·¥å…·äº†ã€‚å¯¹äºç®—æ³•è®¾è®¡æ¥è¯´ï¼Œä¼˜åŒ–ç»„åˆæ˜¯ä¸€ä¸ªæœ‰è¶£çš„æœºä¼šã€‚ä¸ªäººæ¥è¯´æˆ‘å¹¶æ²¡æœ‰æƒ³æŠŠäº’è”ç½‘å˜å¾—æ›´åŒè´¨åŒ–ï¼Œä½†è®¾è®¡ç¡®å®æ˜¯æœ‰ä¸€äº›å…±é€šçš„æ³•åˆ™ã€‚è¿™ä¸éœ€è¦å˜å¾—å¾ˆè¶‹åŒï¼Œæœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥å»å…¬å¼€å’Œä½¿ç”¨è¿™äº›æ•°æ®ã€‚æˆ‘ä»¬çš„å·¥å…·åº”è¯¥è®©å½¼æ­¤æ›´æ¥è¿‘ï¼Œæˆ–è€…è¿œç¦»è¶‹åŠ¿ã€‚å½“ç„¶æˆ‘ä»¬ç°åœ¨å»æè®®ä¸€ä¸ªæ›´å—æ¬¢è¿çš„å­—ä½“ï¼Œä½†æˆ‘ä»¬æ‰¾åˆ°é‚£äº›ä¸»æµåˆ†æ”¯ç›¸ä¼¼çš„ä½†æœªè¢«å‘ç°çš„å®è—ã€‚æˆ‘ä»¬å¯ä»¥æè®®ã€æš—ç¤ºå’Œä¿®æ­£ï¼›è¿™äº›éƒ½å»ºç«‹åœ¨æ‰å®çš„è®¾è®¡åŸåˆ™å’Œæˆ‘ä»¬ä½œä¸ºè®¾è®¡å¸ˆçš„ç»éªŒæ€»ç»“ä¹‹ä¸Šã€‚è¿™äº›éƒ½æ˜¯è§¦æ‰‹å¯åŠçš„ã€‚</p>
<p>è®¾è®¡å°±æ˜¯ä¸€ç³»åˆ—çš„è§„åˆ™ï¼Œè€Œæˆ‘ä»¬ä»è¿™äº›è§„åˆ™ä¸­å­¦ä¹ ã€‚</p>
<p>å¯¹äºè®¾è®¡è€…æ¥è¯´ï¼ŒLickliderï¼ˆè¯‘è€…æ³¨ï¼šåˆ©å…‹é‡Œå¾·ï¼Œäººå·¥æ™ºèƒ½çš„å…ˆé©±ï¼Œä¸Šæ–‡è§‚ç‚¹è¢«å¼•ç”¨çš„äººï¼‰å·²ç»ç¦»å¼€æœ‰äº›å¹´å¤´äº†ã€‚è™½è¯´ Macintosh æœºå™¨è®©æˆ‘ä»¬å·¥ä½œå¾—æ›´å¿«ï¼Œä½†æˆ‘ä»¬å¯¹äºè¯­ä¹‰å±‚é¢çš„äº¤äº’æ¥åœç•™åœ¨ 1984 å¹´ã€‚å‡ åå¹´ä¹‹åï¼Œæˆ‘ä»¬å°±ä¼šå¼€å§‹è§‰å¾—åƒæ˜¯å¼€æ‹“ä¸€ä¸ªæ–°çš„æ—¶ä»£ã€‚é‚£å°†æ˜¯æˆ‘ä»¬è¡Œä¸šå†å²ä¸Šæœ€æ¿€åŠ¨äººå¿ƒå’Œæ™ºæ…§é—ªè€€çš„æ—¶ä»£ï¼ŒçœŸæ­£äººæœºå…±ç”Ÿçš„å°–ç«¯æ—¶åˆ»ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡è¯‘è‡ª Jon Gold çš„ &lt;a href=&quot;http://www.jon.gold/2016/05/robot-design-school/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Taking The Robots 
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Typography" scheme="https://aotu.io/tags/Typography/"/>
    
      <category term="Type design" scheme="https://aotu.io/tags/Type-design/"/>
    
      <category term="å­—ä½“è®¾è®¡" scheme="https://aotu.io/tags/%E5%AD%97%E4%BD%93%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="https://aotu.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="ç®—æ³•" scheme="https://aotu.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>2016å¹´å¤å­£èœœæ¡ƒé€šç¼‰ä»¤</title>
    <link href="https://aotu.io/notes/2016/07/28/o2-wants-you/"/>
    <id>https://aotu.io/notes/2016/07/28/o2-wants-you/</id>
    <published>2016-07-28T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯åªæ˜¯æˆ‘ä»¬çš„æ­£é¤ï¼Œå…¶å®æˆ‘ä»¬è¿˜æœ‰è®¸å¤šçš„ç”œç‚¹ï¼</p>
<a id="more"></a>
<style>
body {
    max-width: 600px;
    margin:0 auto;
}
.grid {
    width: 100% !important;
}
.mod-main {
    float: none !important;
    margin-right: 0 !important;
    width: 100% !important;
}
.mod-side {
    float: none !important;
    width: 100% !important;
    margin-top: 20px !important;
    border-top: 1px solid #ddd !important;
}
.post-content img {
    max-width: 100%;
    padding: 15px 0 !important;
}
.works, .favlinks {
    display: none !important;
}
@media (max-width: 989px) {
    .post-cover {
        padding-left: 15px;
        padding-right: 15px;
    }
    .post-content h3 {
        margin-top: 0;
        padding-top: 0.5em;
    }
}
</style>

<p><a href="//aotu.io/join/"><img src="//misc.aotu.io/mamboer/2016/o2-wants-u-2016.png" alt="o2"></a></p>
<h3 id="æˆ‘ä»¬ä¼šæ’¸é¡µé¢ï¼Œä¼šHTML5-CSS3-JS-NodeJSï¼"><a href="#æˆ‘ä»¬ä¼šæ’¸é¡µé¢ï¼Œä¼šHTML5-CSS3-JS-NodeJSï¼" class="headerlink" title="æˆ‘ä»¬ä¼šæ’¸é¡µé¢ï¼Œä¼šHTML5\CSS3\JS\NodeJSï¼"></a>æˆ‘ä»¬ä¼šæ’¸é¡µé¢ï¼Œä¼šHTML5\CSS3\JS\NodeJSï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-code.jpg" alt="code"></p>
<h3 id="ä¼šç©å‰ç«¯å·¥ç¨‹åŒ–ï¼"><a href="#ä¼šç©å‰ç«¯å·¥ç¨‹åŒ–ï¼" class="headerlink" title="ä¼šç©å‰ç«¯å·¥ç¨‹åŒ–ï¼"></a>ä¼šç©å‰ç«¯å·¥ç¨‹åŒ–ï¼</h3><p><a href="//athena.aotu.io"><img src="//misc.aotu.io/luckyadam/athena/athena_cover.jpg" alt="Athena"></a></p>
<h3 id="ç©éŸ³ä¹ï¼"><a href="#ç©éŸ³ä¹ï¼" class="headerlink" title="ç©éŸ³ä¹ï¼"></a>ç©éŸ³ä¹ï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-guitar.jpg" alt="footbal"></p>
<h3 id="çˆ±è¸¢çƒï¼"><a href="#çˆ±è¸¢çƒï¼" class="headerlink" title="çˆ±è¸¢çƒï¼"></a>çˆ±è¸¢çƒï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-football.jpg" alt="footbal"></p>
<h3 id="çˆ±è®¾è®¡ï¼"><a href="#çˆ±è®¾è®¡ï¼" class="headerlink" title="çˆ±è®¾è®¡ï¼"></a>çˆ±è®¾è®¡ï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-design.jpg" alt="DG"></p>
<h3 id="å‘¨æœ«å–œæ¬¢è§†å¯Ÿä¸œèï¼"><a href="#å‘¨æœ«å–œæ¬¢è§†å¯Ÿä¸œèï¼" class="headerlink" title="å‘¨æœ«å–œæ¬¢è§†å¯Ÿä¸œèï¼"></a>å‘¨æœ«å–œæ¬¢è§†å¯Ÿä¸œèï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-dg.jpg" alt="DG"></p>
<h3 id="å¶å°”è£…ä¸ªæ–‡è‰ºï¼ˆBï¼‰ï¼"><a href="#å¶å°”è£…ä¸ªæ–‡è‰ºï¼ˆBï¼‰ï¼" class="headerlink" title="å¶å°”è£…ä¸ªæ–‡è‰ºï¼ˆBï¼‰ï¼"></a>å¶å°”è£…ä¸ªæ–‡è‰ºï¼ˆBï¼‰ï¼</h3><p><img src="//misc.aotu.io/mamboer/2016/o2wu-art.jpg" alt="DG"></p>
<blockquote>
<p>æˆ‘ä»¬æ˜¯å‡¹å‡¸å®éªŒå®¤ï¼Œæ¥è‡ªäº¬ä¸œï¼ˆæ·±åœ³ï¼‰æœ€å¹´è½»å¯Œæœ‰åŸºæƒ…çš„æŠ€æœ¯å›¢é˜Ÿã€‚<br>æˆ‘ä»¬ç°åœ¨æœ‰<strong>34</strong>ä½å‡¹å‡¸æ›¼å°ä¼™ä¼´ï¼ŒæœŸå¾…ä¸‹ä¸€ä¸ªä½ ã€‚<br>æŠ•é€’ç®€å†è‡³aotu{AT}jd.comï¼Œä»Šå¹´å¤å¤©ï¼ŒO2ä¸è§ä¸æ•£ï¼</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ç«¯åªæ˜¯æˆ‘ä»¬çš„æ­£é¤ï¼Œå…¶å®æˆ‘ä»¬è¿˜æœ‰è®¸å¤šçš„ç”œç‚¹ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="ç”Ÿæ´»ç©ä¹" scheme="https://aotu.io/cates/%E7%94%9F%E6%B4%BB%E7%8E%A9%E4%B9%90/"/>
    
    
      <category term="æ‹›è´¤çº³å£«" scheme="https://aotu.io/tags/%E6%8B%9B%E8%B4%A4%E7%BA%B3%E5%A3%AB/"/>
    
  </entry>
  
  <entry>
    <title>Vueå®æˆ˜ï¼é‚®ç®±ç­¾åè®¾è®¡é¡¹ç›®</title>
    <link href="https://aotu.io/notes/2016/07/25/vuejs-mailsign/"/>
    <id>https://aotu.io/notes/2016/07/25/vuejs-mailsign/</id>
    <published>2016-07-25T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="é¡¹ç›®èƒŒæ™¯"><a href="#é¡¹ç›®èƒŒæ™¯" class="headerlink" title="é¡¹ç›®èƒŒæ™¯"></a>é¡¹ç›®èƒŒæ™¯</h2><p>  åœ¨å·¥ä½œçš„æ²Ÿé€šäº¤æµä¸­ï¼Œé‚®ä»¶æ˜¯å¿…ä¸å¯å°‘çš„å·¥å…·ä¹‹ä¸€ã€‚è€Œè§„èŒƒä¸€è‡´çš„é‚®ç®±ç­¾åè®¾è®¡æœ‰åˆ©äºæ‰“é€ å’Œä¼ æ’­å›¢é˜Ÿå“ç‰Œå½¢è±¡ï¼Œä»¥æé«˜å›¢é˜Ÿçš„çŸ¥ååº¦ã€‚åŒæ—¶ï¼Œå€ŸåŠ©å·¥å…·èƒ½å¤Ÿä½¿å¾—ç­¾åç”Ÿæˆæ›´ä¸ºæ–¹ä¾¿ã€å¿«æ·ã€‚</p>
<h2 id="é¡¹ç›®æˆæœ"><a href="#é¡¹ç›®æˆæœ" class="headerlink" title="é¡¹ç›®æˆæœ"></a>é¡¹ç›®æˆæœ</h2><blockquote>
<p>ç‚¹å‡»ä½“éªŒå·¥å…·ï¼š<a href="https://sign.aotu.io/" target="_blank" rel="external">https://sign.aotu.io/</a></p>
<p>é¡¹ç›®æ‰˜ç®¡åœ¨Githubä¸Šå¼€æºï¼Œå–œæ¬¢çš„è¯å¯ä»¥ç»™é¡¹ç›®åŠ ä¸ª<a href="https://github.com/o2team/sign/tree/master" target="_blank" rel="external">ã€æ˜Ÿæ˜Ÿã€</a></p>
</blockquote>
<p><img src="https://misc.aotu.io/Tingglelaoo/sign.gif" alt="1.gif"></p>
<h3 id="åŠŸèƒ½ä¸€è§ˆ"><a href="#åŠŸèƒ½ä¸€è§ˆ" class="headerlink" title="åŠŸèƒ½ä¸€è§ˆ"></a>åŠŸèƒ½ä¸€è§ˆ</h3><ul>
<li>å³æ—¶é¢„è§ˆ</li>
<li>å›¾ç‰‡ä¸Šä¼ ã€è£å‰ªåŠä¸‹è½½ä¿å­˜</li>
<li>ä¸ªæ€§åŒ–é…è‰²ã€Logoè®¾ç½®</li>
</ul>
<h2 id="æ€è·¯ä¸å®ç°"><a href="#æ€è·¯ä¸å®ç°" class="headerlink" title="æ€è·¯ä¸å®ç°"></a>æ€è·¯ä¸å®ç°</h2><p>  å› ä¸ºè®¡åˆ’æ˜¯ä¸ªå°è€Œå¿«çš„é¡¹ç›®ï¼Œæ‰€ä»¥æ›´å¤šçš„è€ƒè™‘æ˜¯èµ°æ·å¾„â€”â€”ç”¨ç°æˆçš„åº“å’Œæ¡†æ¶ã€‚</p>
<h3 id="æ¡†æ¶é€‰æ‹©â€”â€”Vue-js"><a href="#æ¡†æ¶é€‰æ‹©â€”â€”Vue-js" class="headerlink" title="æ¡†æ¶é€‰æ‹©â€”â€”Vue.js"></a>æ¡†æ¶é€‰æ‹©â€”â€”<a href="http://cn.vuejs.org/" target="_blank" rel="external">Vue.js</a></h3><p>  é€‰æ‹©Vueï¼Œä¸»è¦è¿˜æ˜¯ç§å¿ƒï¼Œåˆšå­¦ä¹ å®ŒVueæƒ³æ‹¿æ¥å®è·µä¸‹ã€‚<br>  è‹¥æ˜¯è¦å¯¹æ¯”Angularæ¥è¯´ï¼ŒVueç›¸å¯¹æ¥è¯´æ›´è½»å·§æ˜“ä¸Šæ‰‹ï¼Œæ–‡æ¡£ä¸­æ–‡åŒ–ã€‚è€ƒè™‘åˆ°é¡¹ç›®å¹¶ä¸éœ€è¦æ•°æ®åº“ï¼Œä¸éœ€è¦åç«¯å¤„ç†ï¼Œæ˜¯ä¸ªå®Œå…¨ä¾é å‰ç«¯çš„é¡¹ç›®ï¼Œæ‰€ä»¥é€‰æ‹©ä¸“æ³¨â€œè®©ç¼–å†™åŠ¨æ€çš„UIç•Œé¢å˜å¾—è½»æ¾ç®€å•â€çš„Vueå…¶å®æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚</p>
<h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p>  å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚<br>  <strong>ä¸€ã€æ˜ç¡®åŠŸèƒ½æ ¸å¿ƒã€‚</strong><br>  é‚®ä»¶ç­¾åè®¾è®¡çš„ä¸»è¦åŠŸèƒ½æ˜¯ç»™äºˆç»Ÿä¸€çš„ç­¾åè®¾è®¡æ¨¡ç‰ˆï¼Œç”¨æˆ·åªéœ€è¦è¾“å…¥ä¸ªäººä¿¡æ¯å³å¯ç”Ÿæˆè§„èŒƒçš„ä¸ªäººé‚®ä»¶ç­¾åã€‚<br>  <strong>äºŒã€ç¡®è®¤æŠ€æœ¯è·¯çº¿ã€‚</strong><br>  ä»æŠ€æœ¯è§’åº¦è¯´å°±æ˜¯ï¼Œæ ¹æ®é‚®ä»¶ç­¾åè®¾è®¡æ¨¡ç‰ˆå…ˆæ„å»ºå¥½å¯¹åº”çš„é™æ€DOMç»“æ„ï¼Œç»“åˆç”¨æˆ·è¾“å…¥çš„æ•°æ®åŠ¨æ€å®ç°ä»DOMç»“æ„è½¬åŒ–ä¸ºå›¾åƒï¼Œç„¶åä¾›ä»¥ä¸‹è½½ä½¿ç”¨ã€‚<br> <strong> ä¸‰ã€åº“çš„é€‰ç”¨</strong><br>  é‚£ä¹ˆï¼Œå¯¹åº”æŠ€æœ¯ç‚¹å„ä¸ªå‡»ç ´ï¼š</p>
<ul>
<li>DOM è½¬åŒ–ä¸º IMGï¼š<a href="https://github.com/tsayen/dom-to-image" target="_blank" rel="external">dom-to-image</a><ul>
<li>å®ç°çš„åŸç†æ˜¯ï¼šåˆ©ç”¨Canvaså°†DOMç»˜åˆ¶ç”Ÿæˆä¸ºå›¾åƒã€‚</li>
<li>éš¾èƒ½å¯è´µçš„æ˜¯ï¼Œå®ƒè¿™ä¸ªåº“è¿˜è€ƒè™‘åˆ°äº†ä¼ªå…ƒç´ ã€Web Fontã€å†…è”æ ·å¼çš„ä½¿ç”¨ï¼Œåœ¨ç»˜åˆ¶çš„æ—¶å€™ä¸ä¼šæŠŠè¿™äº›å†…å®¹ç¼ºå¤±ã€‚</li>
</ul>
</li>
<li>æ–‡ä»¶ä¸‹è½½ä¿å­˜ï¼š<a href="https://github.com/eligrey/FileSaver.js" target="_blank" rel="external">FileSaver.js</a><ul>
<li>æ— éœ€åç«¯å¤„ç†ï¼Œåœ¨å®¢æˆ·ç«¯å°±å¯ä»¥å®ç°æ–‡ä»¶çš„ä¿å­˜ã€‚</li>
<li>æ›´ä¸ºé‡è¦æ˜¯çš„ï¼Œ<a href="https://github.com/tsayen/dom-to-image" target="_blank" rel="external">dom-to-image</a>éœ€è¦å®ƒé…åˆï¼Œå®ç°å°†Canvasè½¬åŒ–ç”Ÿæˆå›¾åƒå¹¶ä¸‹è½½ã€‚</li>
</ul>
</li>
<li>ä¸ªäººå¤´åƒè£åˆ‡ï¼š<a href="https://github.com/fengyuanchen/cropperjs" target="_blank" rel="external">cropperjs</a><ul>
<li>å®ç°è£åˆ‡çš„åŸç†ï¼ŒåŒæ ·æ˜¯åˆ©ç”¨åˆ°Canvasã€‚</li>
<li>æœ€ä¸ºâ€œéš¾ç”¨â€çš„åº“æ˜¯<a href="https://github.com/fengyuanchen/cropperjs" target="_blank" rel="external">cropperjs</a>ï¼Œå› ä¸ºå®ƒè‡ªèº«åŒ…å«çš„åŠŸèƒ½ç‰¹åˆ«å¤šï¼Œæ‰€ä»¥è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥æŠ½å–å‡ºç‰¹å®šçš„åŠŸèƒ½æ¥ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æ ¸å¿ƒä»£ç ç®€è§£"><a href="#æ ¸å¿ƒä»£ç ç®€è§£" class="headerlink" title="æ ¸å¿ƒä»£ç ç®€è§£"></a>æ ¸å¿ƒä»£ç ç®€è§£</h3><blockquote>
<p>æ–¹æ³•æ¦‚è§ˆ</p>
</blockquote>
<p><img src="https://misc.aotu.io/Tingglelaoo/codes.jpg" alt="codes.png"></p>
<h4 id="bindLoadImgEvent"><a href="#bindLoadImgEvent" class="headerlink" title="bindLoadImgEvent()"></a>bindLoadImgEvent()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç›‘å¬æ–‡ä»¶è¯»å–</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>;i&lt;len;i++) &#123;</div><div class="line">    uploadImages[i].addEventListener(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        ...</div><div class="line">        reader.readAsDataURL(file);</div><div class="line">        ...</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="comment">// è‹¥è¯»å–å›¾åƒæ–‡ä»¶ï¼Œåˆ™åˆå§‹åŒ–åŠ è½½cropper</span></div><div class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">    ...</div><div class="line">    if (!thisObj.flag.cropperHasInit) &#123;</div><div class="line">        thisObj.loadCropper();</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨HTML5çš„æ–‡ä»¶ä¸Šä¼ APIæ¥è¯»å–ç”¨æˆ·é€‰å–çš„å›¾åƒæ–‡ä»¶ï¼Œä¸€æ—¦ç›‘å¬åˆ°å›¾åƒä¸Šä¼ å®Œæ¯•ï¼Œåˆ™è°ƒç”¨<code>loadCropper()</code>æ–¹æ³•æ¥åˆå§‹åŒ–ã€‚</p>
<h4 id="loadCroper"><a href="#loadCroper" class="headerlink" title="loadCroper()"></a>loadCroper()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ ¹æ®éœ€è¦é…ç½®å‚æ•°ï¼Œåˆå§‹åŒ–cropper</span></div><div class="line"><span class="keyword">var</span> option = &#123;</div><div class="line">    <span class="attr">aspectRatio</span>: <span class="number">1</span> / <span class="number">1</span>,</div><div class="line">    <span class="attr">build</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        previewImage.src = image.src;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">crop</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">thisObj.cropper = <span class="keyword">new</span> Cropper(image, option);</div></pre></td></tr></table></figure>
<p>æ ¹æ®<a href="https://github.com/fengyuanchen/cropperjs/blob/master/README.md" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£è¯´æ˜</a>ï¼Œé€‰æ‹©åˆé€‚çš„å‚æ•°æ¥å®šåˆ¶åŠŸèƒ½ã€‚<br>æŒ‰ç…§é‚®ä»¶ç­¾åè®¾è®¡çš„æ¨¡ç‰ˆï¼Œå¤´åƒéœ€è¦è£å‰ªæˆè¦æ±‚ä¸€æ¯”ä¸€çš„æ¯”ä¾‹ï¼Œå› æ­¤åªéœ€è¦ç®€å•çš„ä¸€æ¯”ä¸€è£åˆ‡åŠŸèƒ½å³å¯ã€‚</p>
<h4 id="finishCropImage"><a href="#finishCropImage" class="headerlink" title="finishCropImage()"></a>finishCropImage()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">var imgDataUrl = croppedCanvas.toDataURL();</div><div class="line"><span class="keyword">var</span> where = <span class="string">'.o2_sign .'</span> + thisObj.img + <span class="string">' img'</span>;</div><div class="line"><span class="built_in">document</span>.querySelector(where).src = imgDataUrl;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>å®Œæˆè£å‰ªï¼Œå°†è£å‰ªç»“æœè¾“å‡ºä¸ºbase64æ ¼å¼ã€‚</p>
<h4 id="downloadRes"><a href="#downloadRes" class="headerlink" title="downloadRes()"></a>downloadRes()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">domtoimage.toBlob(sign).then(<span class="function"><span class="keyword">function</span>(<span class="params">blob</span>)</span>&#123; </div><div class="line">    <span class="built_in">window</span>.saveAs(blob,imgName + <span class="string">'.png'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è°ƒç”¨<a href="https://github.com/tsayen/dom-to-image" target="_blank" rel="external">dom-to-image</a>ä»¥åŠ<a href="https://github.com/eligrey/FileSaver.js" target="_blank" rel="external">FileSaver.js</a>åº“ï¼Œå°†å¯¹åº”çš„DOMç»“æ„è¾“å‡ºä¸ºå›¾åƒå¹¶ä¸‹è½½ã€‚</p>
<h3 id="è¿˜éœ€è¦æ€è€ƒçš„æ–¹é¢"><a href="#è¿˜éœ€è¦æ€è€ƒçš„æ–¹é¢" class="headerlink" title="è¿˜éœ€è¦æ€è€ƒçš„æ–¹é¢"></a>è¿˜éœ€è¦æ€è€ƒçš„æ–¹é¢</h3><p>  ç§‰æ‰¿ç€â€ç”¨æˆ·ä½“éªŒè‡³ä¸Šâ€æ˜¯äº§å“çš„é»„é‡‘åŸåˆ™ä¹‹ä¸€çš„ç†å¿µï¼Œå› æ­¤ï¼Œåœ¨é¡¹ç›®å®ŒæˆåŸºæœ¬çš„åŠŸèƒ½ä¹‹ä½™ï¼Œåœ¨ç”¨æˆ·ä½“éªŒæ–¹é¢åšäº›äº†å°ä¼˜åŒ–ï¼š</p>
<p><strong>ä¸€ã€ä¿¡æ¯æ ¼å¼åŒ–ï¼Œä¼˜åŒ–ç”¨æˆ·è¾“å…¥</strong><br>  å¯¹äºæ‰‹æœºå·ç ï¼Œç”¨â€œï¼â€åˆ†éš”ç¬¦æ›´ä¾¿äºç”¨æˆ·é˜…è¯»å’Œè®°å¿†ï¼Œä½†æ˜¯ç”¨æˆ·åœ¨è¾“å…¥ä¿¡æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨å¿½ç•¥â€œï¼â€çš„å­˜åœ¨ï¼Œå› æ­¤ï¼Œè€ƒè™‘åˆ°çš„é˜…è¯»å’Œè¾“å…¥ä¹ æƒ¯ï¼Œåˆ©ç”¨Vueçš„è¿‡æ»¤å™¨(Filter)æ¥ä¼˜åŒ–ç”¨æˆ·è¾“å…¥ã€‚<br>  é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨é…è‰²è®¾ç½®ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯HTML5çš„åŸç”Ÿå–è‰²å™¨ï¼Œä¸¥æ ¼è§„å®šé¢œè‰²è‰²å€¼è¾“å…¥æ˜¯RRGGBBæ ¼å¼çš„åå…­è¿›åˆ¶ä»£ç ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·ä¹ æƒ¯æ¥è¯´ï¼Œå¯¹äº#FFFFFFç±»ä¼¼çš„å†™æ³•æ›´å€¾å‘äºç¼©å†™ä¸º#FFFçš„ç®€æ´å½¢å¼ï¼Œå› æ­¤ï¼Œåœ¨è‰²å€¼è¾“å…¥æ—¶ï¼ŒåŒæ ·æ˜¯é€šè¿‡è¿‡æ»¤å™¨(Filter)æ¥è‡ªåŠ¨å°†ç¼©å†™æ ¼å¼è½¬åŒ–ä¸ºæ ‡å‡†å½¢å¼ã€‚</p>
<p><strong>äºŒã€ç”ŸæˆäºŒå€å›¾ï¼Œé€‚é…é«˜æ¸…å±</strong><br>åœ¨å¦‚ä»ŠRetinaå±å¹•çš„å…´èµ·çš„æ—¶ä»£ï¼Œé€‚é…é«˜æ¸…å±å·²ç»æˆä¸ºUIç•Œé¢è®¾è®¡çš„é‡è¦ä¼˜åŒ–æ­¥éª¤ï¼Œå› æ­¤ï¼Œä¸ºäº†é€‚é…é«˜æ¸…å±ï¼Œåœ¨<a href="https://github.com/tsayen/dom-to-image" target="_blank" rel="external">dom-to-image</a>çš„åŸåŸºç¡€ä¸Šè¿›è¡Œäº†ä»£ç ä¼˜åŒ–ï¼Œä½¿å¾—è¾“å‡ºç»“æœä¸ºäºŒå€å›¾å½¢å¼ã€‚</p>
<p><strong>ä¸‰ã€ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¾›å›¢é˜Ÿå¤–å…±äº«</strong><br>åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œè€ƒè™‘åˆ°å·¥å…·çš„åˆ†äº«ä¸ä¼ æ’­ï¼Œåœ¨ç»´æŒåŸæœ‰åŸºæœ¬çš„LOGOã€ç‰ˆé¢è®¾è®¡å¤–ï¼Œç‰¹æ„è®¾è®¡é…è‰²ä¸ªæ€§åŒ–è®¾ç½®åŠŸèƒ½ï¼Œè®©å›¢é˜Ÿæˆå‘˜å¤–çš„ç”¨æˆ·èƒ½å¤Ÿéšå¿ƒæ‰€æ¬²é€‰ç”¨è‡ªå·±å–œæ¬¢çš„é…è‰²ï¼Œè®¾è®¡å‡ºæœ‰ä¸ªäººç‰¹è‰²çš„ç­¾åå›¾ã€‚</p>
<p><strong>å››ã€åŠŸèƒ½åˆ’åˆ†ã€å­—ä½“ï¼Œäº¤äº’è®¾è®¡ä¼˜åŒ–</strong><br>è€ƒè™‘åˆ°å·¥å…·çš„ä¸»è¦é¢å‘å¯¹è±¡æ˜¯å›¢é˜Ÿæˆå‘˜ï¼Œä½¿ç”¨é¢‘ç‡è¾ƒä½ï¼Œæ‰€ä»¥é…è‰²è®¾ç½®ä½œä¸ºé™„åŠ åŠŸèƒ½è®¾è®¡åœ¨é¢„è§ˆåŒºçš„å³ä¸Šè§’ï¼Œé€šè¿‡ç‚¹å‡»å¯ä»¥å°†ä¿¡æ¯è¾“å…¥é¢æ¿åˆ‡æ¢åˆ°é…è‰²è®¾ç½®é¢æ¿ã€‚<br>è¿™æ ·çš„è®¾è®¡å°†ä¸åŒçš„åŠŸèƒ½é›†åˆåœ¨ä¸åŒåŒºåŸŸï¼Œåœ¨é¡µé¢ä¸Šæ›´ä¸ºåˆç†åœ°åˆ©ç”¨æœ‰é™ç©ºé—´å¤–ï¼ŒåŒæ—¶ä½¿å¾—ç”¨æˆ·æ›´ä¸“æ³¨äºä¸»è¦çš„åŠŸèƒ½å—ã€‚<br>åœ¨å¦ä¸€æ–¹é¢ï¼Œåœ¨Windowså¹³å°å’ŒMacå¹³å°å…±åŒæ”¯æŒçš„é»˜è®¤å­—ä½“æœ‰é™ï¼ŒåŒæ—¶è¦è€ƒè™‘åˆ°éµå¾ªè®¾è®¡è¿˜åŸï¼Œå› æ­¤ï¼Œé€šè¿‡ä½¿ç”¨ç¬¬ä¸‰æ–¹å­—ä½“æ¥ä¼˜åŒ–å­—ä½“ï¼Œä½¿å…¶åœ¨ä¸åŒå¹³å°ä¸‹èƒ½å¤Ÿè¡¨ç°ä¸€è‡´ã€‚</p>
<h2 id="å…³äºVue-jsçš„å°æŠ€å·§"><a href="#å…³äºVue-jsçš„å°æŠ€å·§" class="headerlink" title="å…³äºVue.jsçš„å°æŠ€å·§"></a>å…³äºVue.jsçš„å°æŠ€å·§</h2><p>å¯¹äºVue.jsçš„å­¦ä¹ ï¼Œæˆ‘åªç®—æ˜¯æ–°æ‰‹åˆè¯•ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸‹é‡åˆ°çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼Œä½œä¸ºåˆ†äº«ç»™å¤§å®¶çš„å°æŠ€å·§ï¼š</p>
<p><strong>1.ä½¿ç”¨<code>v-text</code>æ›¿ä»£&#123;&#123;&#125;&#125;</strong><br>ç±»ä¼¼äºAngularçš„<code>v-bind</code>æ›¿æ¢&#123;&#123;&#125;&#125;çš„åšæ³•ä¸€æ ·ï¼Œåœ¨Vueä¸­ä½¿ç”¨<code>v-text</code>æ›¿ä»£&#123;&#123;&#125;&#125;ï¼Œå¯ä»¥é¿å…åœ¨æ¸²æŸ“é¡µé¢çš„è¿‡ç¨‹ä¸­å‡ºç°åŒå‘ç»‘å®šæ•°æ®çš„æœªå¤„ç†çŠ¶æ€ã€‚</p>
<p><strong>2.æ²¡æœ‰<code>v-change</code>è¿™æ ·çš„æŒ‡ä»¤</strong><br>åœ¨Agularä¸­ç”¨ng-changeå¯ä»¥ä¸ºå…ƒç´ å¸®åˆ°changeäº‹ä»¶å“åº”ï¼Œä½†æ˜¯åœ¨Vueä¸­ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œv-model åœ¨input äº‹ä»¶ä¸­åŒæ­¥è¾“å…¥æ¡†å€¼ä¸æ•°æ®ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªç‰¹æ€§ lazyï¼Œä»è€Œæ”¹åˆ°åœ¨ change äº‹ä»¶ä¸­åŒæ­¥ã€‚</p>
<p><strong>3.<code>v-bind:class</code> æ›¿æ¢ <code>v-show</code>æŒ‡ä»¤</strong><br>Vueä¸­çš„v-showæŒ‡ä»¤æ˜¯é€šè¿‡å†…è”æ ·å¼<code>display:none</code>æ¥æ¥å¤„ç†æ˜¾ç¤ºå’Œéšè—å…ƒç´ (trueæ—¶ï¼Œä¸åšå†…è”æ ·å¼ï¼›falseæ—¶å†…è”display:none)ã€‚<br>æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨<code>v-show</code>æŒ‡ä»¤åœ¨æ¸²æŸ“é¡µé¢çš„æ—¶å€™ä¸€å¼€å§‹ï¼Œå…ƒç´ å°±ä¼šæ˜¾ç¤ºå‡ºæ¥å†è¢«éšè—ï¼Œè¿™æ ·çš„ç”¨æˆ·ä½“éªŒå¹¶ä¸å¥½ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>v-bind:class</code> æ¥å¤„ç†ï¼Œè‡ªå·±å†™å¥½æ˜¾ç¤ºéšè—çš„æ ·å¼ï¼Œé€šè¿‡ç»‘å®šç±»åæ¥åˆ‡æ¢å…ƒç´ æ˜¾ç¤ºéšè—çŠ¶æ€ã€‚</p>
<p><strong>4.å»¶ç»­ä¸Šä¸€é—®ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨<code>v-if</code>æ›¿ä»£ï¼Œä¸<code>v-show</code>çš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿ</strong><br>ä»è¡¨ç°æ¥çœ‹<code>v-if</code>å’Œ<code>v-show</code>éƒ½æ˜¯ç”¨æ¥æ˜¾ç¤ºéšè—å…ƒç´ ã€‚ä½†<code>v-if</code>åˆ™æ˜¯é€šè¿‡åˆ é™¤æ·»åŠ DOMç»“æ„çš„æ‰‹æ®µæ¥å®ç°æ˜¾éšçš„ï¼Œåœ¨å…ƒç´ ä¸Šç»‘å®šçš„ç›‘å¬äº‹ä»¶å°±ä¼šéšç€åˆ é™¤è€Œé”€æ¯ï¼Œæ˜¯ä¸€ä¸ªå±€éƒ¨ç¼–è¯‘/å¸è½½çš„è¿‡ç¨‹ã€‚å› æ­¤ï¼Œåœ¨è¿™æ ·çš„æƒ…æ™¯é™åˆ¶ä¸‹ï¼Œæˆ‘æ²¡æœ‰é€‰æ‹©ä½¿ç”¨<code>v-if</code>æ¥æ›¿ä»£<code>v-show</code>ã€‚</p>
<p><strong>5.Vue.jsçš„å­¦ä¹ èµ„æ–™æ¨è</strong><br>Vue.jsæ˜¯å›½äººå°¤é›¨æºªå¤§å¤§ä½œä¸ºä¸»è¦å¼€å‘çš„ï¼Œæ‰€ä»¥æ–‡æ¡£ä¸­æ–‡åŒ–åšå¾—éå¸¸æ£’ï¼Œå®˜ç½‘æœ‰é½å…¨çš„èµ„æ–™ï¼Œå¿«é€Ÿå…¥é—¨æ•™ç¨‹ã€APIæ–‡æ¡£ç­‰ç­‰ï¼Œä¸ªäººè®¤ä¸ºä½œä¸ºä¸Šæ‰‹ç ”è¯»å®˜ç½‘(<a href="http://cn.vuejs.org/guide/" target="_blank" rel="external">Vue.js</a>)çš„æ•™ç¨‹å³å¯ï¼Œæ¨è:)ã€‚</p>
<blockquote>
<p> æ„Ÿè°¢é•¿ç¯‡é˜…è¯»è‡³æ­¤ï¼Œâ€œè¯´ä¸€åšäºŒæƒ³ä¸‰â€ï¼Œè¿™ä¸ªå°é¡¹ç›®ä¹Ÿç®—æ˜¯åˆæˆï¼Œå‘Šä¸€æ®µè½äº†ã€‚:)<br>ä½œä¸ºä¸€ä¸ªå°é¡¹ç›®ï¼Œè‡ªè®¤ä¸ºå¹¶ä¸æ˜¯ç‰¹åˆ«èƒ½å¸¦æ¥å¾ˆå¤šçš„å¹²è´§ï¼Œä½†æ˜¯ä¹Ÿå°±æ˜¯è¿™ç§å°å°è¯•ã€å°å®è·µå»æ…¢æ…¢ç§¯ç´¯ç»éªŒï¼Œå‰ç«¯è·¯æ¼«æ¼«ï¼Œäº’å‹‰åŠ æ²¹å§ã€‚</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;é¡¹ç›®èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#é¡¹ç›®èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®èƒŒæ™¯&quot;&gt;&lt;/a&gt;é¡¹ç›®èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;  åœ¨å·¥ä½œçš„æ²Ÿé€šäº¤æµä¸­ï¼Œé‚®ä»¶æ˜¯å¿…ä¸å¯å°‘çš„å·¥å…·ä¹‹ä¸€ã€‚è€Œè§„èŒƒä¸€è‡´çš„é‚®ç®±ç­¾åè®¾è®¡æœ‰åˆ©äºæ‰“é€ å’Œä¼ 
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Vue" scheme="https://aotu.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä»¬æ˜¯å¦‚ä½•åšå¥½å‰ç«¯å·¥ç¨‹åŒ–å’Œé™æ€èµ„æºç®¡ç†</title>
    <link href="https://aotu.io/notes/2016/07/19/A-little-exploration-of-front-end-engineering/"/>
    <id>https://aotu.io/notes/2016/07/19/A-little-exploration-of-front-end-engineering/</id>
    <published>2016-07-19T13:12:48.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<blockquote>
<p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ä¹Ÿæ—¥ç›Šå˜å¾—æ›´åŠ å¤æ‚ä¸”å¤šæ ·åŒ–èµ·æ¥ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿä¸å†åªæ˜¯åšç®€å•çš„é¡µé¢å¼€å‘è¿™ä¹ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦é¢å¯¹çš„ååˆ†å¤æ‚çš„ç³»ç»Ÿæ€§é—®é¢˜ï¼Œä¾‹å¦‚ï¼Œä¸šåŠ¡æ„ˆæ¥æ„ˆå¤æ‚ï¼Œæˆ‘ä»¬è¦å¦‚ä½•æ¸…æ™°åœ°æ¢³ç†ï¼›å›¢é˜Ÿäººå‘˜æ„ˆæ¥æ„ˆå¤šï¼Œæˆ‘ä»¬è¦å¦‚ä½•æ›´å¥½åœ°è¿›è¡Œå›¢é˜Ÿåä½œï¼›åŠŸèƒ½æ„ˆæ¥æ„ˆå¤šï¼Œæˆ‘ä»¬è¦å¦‚ä½•ä¿è¯é¡µé¢çš„æ€§èƒ½ä¸è‡³äºä¸‹é™ï¼Œç­‰ç­‰ã€‚æ‰€æœ‰çš„è¿™äº›éƒ½å¯ä»¥å½’ç»“ä¸ºå¦‚ä½•æå‡å¼€å‘ä½“éªŒå’Œæ€§èƒ½é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="æå‡å¼€å‘ä½“éªŒ"><a href="#æå‡å¼€å‘ä½“éªŒ" class="headerlink" title="æå‡å¼€å‘ä½“éªŒ"></a>æå‡å¼€å‘ä½“éªŒ</h2><p>æˆ‘ä»¬ä¸»è¦ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ¥æå‡æˆ‘ä»¬çš„å¼€å‘ä½“éªŒã€‚</p>
<h3 id="è§„èŒƒåŒ–"><a href="#è§„èŒƒåŒ–" class="headerlink" title="è§„èŒƒåŒ–"></a>è§„èŒƒåŒ–</h3><p>å½“å›¢é˜Ÿäººå‘˜ä¸æ–­æ‰©å……æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ¶å®šç»Ÿä¸€çš„è§„èŒƒæ¥å¯¹å¹³æ—¶çš„å¼€å‘å·¥ä½œåšå‡ºä¸€å®šçº¦æŸå’ŒæŒ‡å¯¼ã€‚ç»Ÿä¸€çš„è§„èŒƒåŒ…æ‹¬å‰ç«¯çš„ä»£ç è§„èŒƒï¼Œæ ¹æ®è§„èŒƒå®šä¹‰å¥½ä¸€å¥—ä»£ç æ£€æŸ¥çš„è§„åˆ™ï¼Œåœ¨ä»£ç æäº¤çš„æ—¶å€™è¿›è¡Œæ£€æŸ¥ï¼Œè®©å¼€å‘äººå‘˜çŸ¥é“è‡ªå·±çš„ä»£ç æƒ…å†µã€‚</p>
<p>åŒæ—¶ï¼Œæ ¹æ®ä»¥å¾€çš„å¼€å‘ç»éªŒï¼Œæˆ‘ä»¬åˆ¶å®šäº†ç»Ÿä¸€çš„é¡¹ç›®æ¡†æ¶ï¼Œæ ¹æ®ä¸šåŠ¡åŠŸèƒ½ä¸åŒï¼Œå°†ä¸€ä¸ªé¡¹ç›®(app)æ‹†åˆ†æˆä¸åŒçš„ä¸šåŠ¡æ¨¡å—(module)ï¼Œè€Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½åŒ…å«è‡ªèº«çš„é¡µé¢(page)ä»¥åŠæ„æˆé¡µé¢æ‰€éœ€è¦çš„ç»„ä»¶(widget)ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®æ¶‰åŠåˆ°appã€moduleã€pageã€widgetè¿™äº›å·²ç»çº¦å®šå¥½çš„æ¦‚å¿µï¼Œè¿™æ ·è®©é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œè€Œä¸”è®©å›¢é˜Ÿå†…ä¸åŒä¸šåŠ¡çš„äººå‘˜ä¹‹é—´åˆ‡æ¢æ— éšœç¢ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/project_structure.jpg" alt="é¡¹ç›®æ¶æ„"></p>
<h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><p>åœ¨é¡¹ç›®ä¸­å¼•å…¥ç»„ä»¶åŒ–çš„æ¦‚å¿µï¼Œè¿™é‡Œçš„ç»„ä»¶å¯¹åº”ä¸Šæ–‡è®²åˆ°çš„widgetï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½ä¼šåŒ…å«ç»„ä»¶è‡ªèº«çš„æ¨¡æ¿ã€cssã€jsã€å›¾ç‰‡ä»¥åŠè¯´æ˜æ–‡ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»„ä»¶æ¥æ‹¼è£…é¡µé¢ï¼Œåƒæ­ç§¯æœ¨ä¸€æ ·æ¥æ‹¼è£…æˆ‘ä»¬çš„é¡µé¢ï¼ŒåŒæ—¶ä¸€ä¸ªç»„ä»¶å†…å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/component.jpg" alt="ç»„ä»¶åŒ–"></p>
<p>åœ¨æ‹¿åˆ°è®¾è®¡ç¨¿åï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®å®šå“ªäº›éœ€è¦åšæˆå…¬å…±ç»„ä»¶ï¼Œé‚£äº›æ˜¯è¦åšæˆç‹¬ç«‹ç»„ä»¶ï¼Œä»¥åŠç»„ä»¶é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ã€‚åœ¨é¡µé¢ä¸­è°ƒç”¨è¿™äº›ç»„ä»¶åï¼Œä¼šè‡ªåŠ¨åŠ è½½ç»„ä»¶çš„æ¨¡æ¿ä»¥åŠç»„ä»¶çš„é™æ€èµ„æºï¼Œè€Œå½“ç»„ä»¶ä¸å†éœ€è¦æ—¶ï¼Œåªè¦ç§»é™¤æ‰ç»„ä»¶å¼•ç”¨ï¼Œé‚£ä¹ˆç›¸åº”çš„æ¨¡æ¿å’Œé™æ€èµ„æºä¹Ÿä¼šä¸å†åŠ è½½ã€‚</p>
<p>ç»„ä»¶åŒ–çš„å¥½å¤„ä¸»è¦æœ‰è¿™ä¹ˆå‡ ç‚¹</p>
<ul>
<li>ç®¡ç†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªç‹¬ç«‹åŠŸèƒ½ç›¸å…³çš„æ–‡ä»¶åœ¨å·¥ç¨‹ç›®å½•ä¸­æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·ä»£ç ç®¡ç†èµ·æ¥ä¼šéå¸¸ä¾¿åˆ©</li>
<li>ç»„ä»¶å¤ç”¨ï¼Œé€šè¿‡æŠ½å–å…¬å…±ç»„ä»¶ï¼Œå¯ä»¥å®ç°ç»„ä»¶å¤ç”¨ï¼Œä»è€Œå‡å°‘å·¥ä½œé‡ï¼Œåˆ›é€ ä»·å€¼</li>
<li>åˆ†è€Œæ²»ä¹‹ï¼Œè¿™æ˜¯ç»„ä»¶åŒ–æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå°†é¡µé¢ç»„ä»¶åŒ–ï¼Œå°±æ˜¯å¯¹é¡µé¢åŠŸèƒ½çš„æ‹†åˆ†ï¼Œå°†ä¸€ä¸ªå¤§çš„å·¥ç¨‹æ‹†æˆå°çš„é›¶ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æ¯ä¸€ä¸ªé›¶ä»¶çš„åŠŸèƒ½ï¼Œæå¤§åœ°é™ä½äº†é¡µé¢çš„å¼€å‘ä¸ç»´æŠ¤çš„éš¾åº¦</li>
</ul>
<h3 id="è‡ªåŠ¨åŒ–ç¼–è¯‘"><a href="#è‡ªåŠ¨åŒ–ç¼–è¯‘" class="headerlink" title="è‡ªåŠ¨åŒ–ç¼–è¯‘"></a>è‡ªåŠ¨åŒ–ç¼–è¯‘</h3><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šå»ä½¿ç”¨å¾ˆå¤šå·¥å…·ã€æ‰‹æ®µæ¥ä¼˜åŒ–ä»£ç ã€æå‡å¼€å‘æ•ˆç‡ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨sassã€lessç­‰CSSé¢„å¤„ç†å·¥å…·æ¥ç¼–å†™æ›´å¥½ç»´æŠ¤çš„æ ·å¼ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨CSSLintã€eslintç­‰ä»£ç æ£€æŸ¥å·¥å…·æ¥æ£€æŸ¥ä»£ç çš„è¯­æ³•é”™è¯¯ï¼Œä½¿ç”¨æ–‡ä»¶åˆå¹¶å‹ç¼©ç­‰æ‰‹æ®µæ¥å‡å°‘èµ„æºå¤§å°ï¼Œé™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜ä¼šå»åšé›ªç¢§å›¾åˆå¹¶ã€å¤šå€å›¾å¤„ç†ã€å­—ä½“å‹ç¼©å¤„ç†ã€ä»£ç å‘å¸ƒç­‰ç­‰ã€‚</p>
<p>æ›¾ç»æœ‰å¤§ç¥è¯´è¿‡ï¼Œè¶…è¿‡90sçš„å·¥ä½œéƒ½åº”è¯¥è‡ªåŠ¨åŒ–æ‰ã€‚è€Œä»¥ä¸Šæ‰€æœ‰çš„è¿™äº›å·¥ä½œï¼Œè´¯ç©¿æˆ‘ä»¬æ•´ä¸ªå¼€å‘æµç¨‹ï¼Œä½†æ˜¯ä¸åŒå·¥å…·çš„åˆ‡æ¢ä¸ä½†æ˜¾å¾—å‡Œä¹±ï¼Œè€Œä¸”å½±å“å¼€å‘æ•ˆç‡ã€‚åœ¨è‡ªåŠ¨åŒ–ã€å·¥ç¨‹ç¼–è¯‘çš„æ€æƒ³æ—©å·²æ·±å…¥äººå¿ƒçš„å½“ä¸‹ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿè¦ç´§è·Ÿæ½®æµï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘é€šè¿‡è‡ªåŠ¨åŒ–æ‰‹æ®µæ¥æå‡æˆ‘ä»¬çš„æ•ˆç‡ï¼Œè®©æ‰€æœ‰æ“ä½œå¯ä»¥ä¸€é”®å¼å¼€é€Ÿæ‰§è¡Œå®Œã€‚</p>
<p>æˆ‘ä»¬å°†é€šè¿‡å®šä¹‰å¥½ä¸€ç³»åˆ—çš„ç¼–è¯‘ä»»åŠ¡ï¼ŒæŒ‰ç…§ä¸€å®šé¡ºåºä¾æ¬¡å¯¹æˆ‘ä»¬çš„é¡¹ç›®è‡ªåŠ¨è¿›è¡Œç¼–è¯‘æ“ä½œï¼Œæœ€åäº§ç”Ÿå‡ºå¯ä¸Šçº¿çš„ä»£ç ã€‚</p>
<h2 id="æå‡æ€§èƒ½"><a href="#æå‡æ€§èƒ½" class="headerlink" title="æå‡æ€§èƒ½"></a>æå‡æ€§èƒ½</h2><p>æˆ‘ä»¬ä¸»è¦ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢æ¥åšå¥½æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h3 id="é¦–å±ä¼˜åŒ–"><a href="#é¦–å±ä¼˜åŒ–" class="headerlink" title="é¦–å±ä¼˜åŒ–"></a>é¦–å±ä¼˜åŒ–</h3><p>é¡µé¢çš„æ‰“å¼€é€Ÿåº¦ä¸€ç›´æ˜¯å¤§å®¶éå¸¸å…³å¿ƒçš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œä¸€ä¸ªé¡µé¢æ‰“å¼€å¤ªæ…¢ä¼šè®©è®©ç”¨æˆ·å¤±å»ç­‰å¾…çš„è€å¿ƒï¼Œä¸ºäº†è®©ç”¨æˆ·æ›´å¿«åœ°çœ‹åˆ°é¡µé¢ï¼Œæˆ‘ä»¬è€ƒè™‘å°†é¡µé¢ä¸­éƒ¨åˆ†é™æ€èµ„æºä»£ç ç›´æ¥åµŒå…¥é¡µé¢ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å·¥å…·å¤„ç†ï¼Œåœ¨å·¥ç¨‹ç¼–è¯‘é˜¶æ®µï¼Œå°†æŒ‡å®šçš„é™æ€èµ„æºä»£ç å†…åµŒå…¥é¡µé¢ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘HTTPè¯·æ±‚ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦ï¼ŒåŒæ—¶é™ä½é¡µé¢è£¸å¥”é£é™©ã€‚</p>
<h3 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h3><p>åŒæ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘é€šè¿‡å°½é‡å‡å°é¡µé¢ä½“ç§¯æ¥æå‡é¡µé¢æ‰“å¼€é€Ÿåº¦ï¼Œåœ¨ä¸šåŠ¡ä¸Šæˆ‘ä»¬å°†é¡µé¢åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªæ¥¼å±‚ç»„ä»¶ï¼Œä»¥äº¬ä¸œç¾å¦†é¦†ä¸ºä¾‹ï¼Œé¡µé¢ä¸­ä»ä¸Šè€Œä¸‹åˆ†ä¸ºé¦–ç„¦ã€è‡³INå°–è´§ã€ä»Šæ—¥ç‰¹æƒ ã€æ½®æµå‰æ²¿ã€å£ç¢‘æ¦œå•è¿™ä¹ˆå‡ ä¸ªæ¥¼å±‚ç»„ä»¶ï¼Œå…¶å®è¿™ä¸ªé¡µé¢è¿˜æœ‰å¾ˆé•¿ï¼Œå†…å®¹éå¸¸å¤šä¸”å¤æ‚ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/beauty.jpg" alt="äº¬ä¸œç¾å¦†é¦†"></p>
<p>ä¹‹å‰æˆ‘ä»¬çš„åšæ³•æ˜¯æ•´ä¸ªé¡µé¢ç›´å‡ºï¼Œè¿™æ ·ä¸€æ¬¡æ€§åŠ è½½çš„å†…å®¹ä¼šéå¸¸å¤šï¼Œä¸ºäº†æå‡æ‰“å¼€é€Ÿåº¦ï¼Œæˆ‘ä»¬è€ƒè™‘é€šè¿‡æŒ‰éœ€åŠ è½½çš„æ–¹å¼æ¥ä¼˜åŒ–é¡µé¢çš„åŠ è½½ã€‚æˆ‘ä»¬åœ¨é¡µé¢ä¸­åªæ”¾æ¯ä¸€ä¸ªæ¥¼å±‚çš„æ¡†æ¶æ€§ä»£ç ï¼Œæ¥¼å±‚çš„æ¨¡æ¿å’Œæ•°æ®éƒ½é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å»æ‹‰å–ï¼Œæ¥å®ç°æ¥¼å±‚ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥å¯¹æ¨¡æ¿ä»¥åŠæ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä»¥æ­¤æ¥å‡å°‘è¯·æ±‚ï¼Œåšæ›´æè‡´çš„ä¼˜åŒ–ã€‚åœ¨å¼€å‘ä¸­æˆ‘ä»¬ä»¥æ­£å¸¸ç»„ä»¶çš„æ–¹å¼å»å¼€å‘æ•´ä¸ªé¡µé¢ï¼Œéšåé€šè¿‡ç¼–è¯‘å·¥å…·ï¼Œåœ¨ä»£ç ç¼–è¯‘é˜¶æ®µè‡ªåŠ¨å°†æ¥¼å±‚çš„æ¨¡æ¿æŠ½ç¦»æˆä¸€ä¸ªç‹¬ç«‹çš„JSæ–‡ä»¶ï¼Œå¹¶ç»™æ¥¼å±‚å®¹å™¨æ‰“ä¸Šæ ‡è®°ä½ï¼Œé€šè¿‡é¡µé¢åŠ è½½é€»è¾‘å»æŒ‰éœ€æ‹‰å–æ¨¡æ¿ï¼Œå†è¿›è¡Œæ¸²æŸ“ã€‚</p>
<blockquote>
<p>é€šè¿‡ç»™æ¥¼å±‚å®¹å™¨å’Œæ¨¡æ¿åˆ†åˆ«åŠ ä¸Šæ ‡è®°ä½ <code>o2-out-tpl-wrapper</code> <code>o2-out-tpl</code></p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/lazyload_1.jpg" alt="æŒ‰éœ€åŠ è½½1"></p>
<blockquote>
<p>åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨å°†æŒ‡å®šçš„æ¨¡æ¿ä»£ç æŠ½ç¦»æˆç‹¬ç«‹jsæ–‡ä»¶</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/lazyload_2.jpg" alt="æŒ‰éœ€åŠ è½½2"></p>
<blockquote>
<p>å¹¶ä¸”ç»™æ¥¼å±‚å®¹å™¨æ‰“ä¸Šæ ‡è®°</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/lazyload_3.jpg" alt="æŒ‰éœ€åŠ è½½3"></p>
<blockquote>
<p>åŒæ—¶åœ¨é€»è¾‘è„šæœ¬é€‚å½“ä½ç½®è‡ªåŠ¨åŠ å…¥æ¨¡æ¿çš„ç‰ˆæœ¬</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/lazyload_4.jpg" alt="æŒ‰éœ€åŠ è½½4"></p>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå®ç°æŒ‰éœ€åŠ è½½çš„è‡ªåŠ¨åŒ–ç”Ÿæˆï¼Œåœ¨æå‡æ€§èƒ½çš„åŒæ—¶ï¼Œå¾ˆå¥½åœ°è§£æ”¾æˆ‘ä»¬ç”Ÿäº§åŠ›ã€‚</p>
<h3 id="åŸºäºèµ„æºè¡¨åŠ è½½"><a href="#åŸºäºèµ„æºè¡¨åŠ è½½" class="headerlink" title="åŸºäºèµ„æºè¡¨åŠ è½½"></a>åŸºäºèµ„æºè¡¨åŠ è½½</h3><p>æ ¹æ®é¡µé¢ç»„ä»¶åŒ–ï¼Œé€šè¿‡å·¥å…·åˆ†æï¼Œæˆ‘ä»¬å°†è·å¾—é¡µé¢ä¸ç»„ä»¶çš„ä¾èµ–å…³ç³»è¡¨ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç¡®è®¤é¡µé¢æ‰€å¼•ç”¨èµ„æºçš„ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨é¡µé¢helloä¸­åŒæ­¥å¼•ç”¨ç»„ä»¶topbarï¼Œé‚£ä¹ˆä¾èµ–å…³ç³»è¡¨ä¸­å°†ä¼šè®°å½•åŒæ­¥å¼•ç”¨å…³ç³»helloå¼•ç”¨topbar.tplã€topbar.cssã€topbar.jsï¼Œé‚£ä¹ˆé¡µé¢helloå°†ä¼šè‡ªåŠ¨åŠ è½½ç»„ä»¶topbarçš„CSSä¸JSï¼ŒåŒæ—¶ä¾èµ–è¡¨ä¼šè®°å½•å¼‚æ­¥å¼•ç”¨çš„å…³ç³»ï¼Œå‡å¦‚æˆ‘ä»¬åœ¨ç»„ä»¶Cä¸­é€šè¿‡APIå¼‚æ­¥å¼•ç”¨äº†ç»„ä»¶Dçš„jsï¼Œé‚£ä¹ˆä¼šåœ¨ä¾èµ–è¡¨ä¸­è®°å½•Cå¼‚æ­¥å¼•ç”¨D.jsè¿™ä¸€ä¸ªä¾èµ–å…³ç³»ï¼Œè¿™æ ·D.jsè¿™ä¸ªèµ„æºå°†ä¼šåœ¨ç”¨åˆ°çš„æ—¶å€™è¢«å¼‚æ­¥è°ƒç”¨ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/mapjson_1.jpg" alt="ç»„ä»¶ä¾èµ–"></p>
<p><img src="//misc.aotu.io/luckyadam/athena/mapjson_2.jpg" alt="èµ„æºä¾èµ–"></p>
<p>åŒæ­¥å¼•ç”¨çš„èµ„æºé€šè¿‡ç”Ÿæˆcomboå½¢å¼é“¾æ¥ï¼Œåœ¨æœåŠ¡ç«¯è¿›è¡Œæ–‡ä»¶åˆå¹¶ï¼Œè¿™æ ·åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™ï¼Œé¡µé¢åªä¼šåŠ è½½è‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå¼‚æ­¥çš„èµ„æºå°†ä¼šåœ¨ç”¨åˆ°çš„æ—¶å€™å†åŠ è½½ï¼Œæœ‰æ•ˆé¿å…èµ„æºå†—ä½™ã€‚åŒæ—¶åˆ é™¤ã€å¢åŠ ç»„ä»¶ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œåªéœ€æ”¹åŠ¨æ¨¡æ¿ä¸­å¯¹ç»„ä»¶è°ƒç”¨ï¼Œé€šè¿‡ç¼–è¯‘å·¥å…·ä¼šè‡ªåŠ¨é‡æ–°ç”Ÿæˆæ¨¡æ¿ä»¥åŠcomboé“¾æ¥ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°†èµ„æºåŠ è½½çš„æ“ä½œæŠ½ç¦»å‡ºæ¥ï¼Œå½¢æˆä¸€å¥—ç»Ÿä¸€çš„èµ„æºåŠ è½½æ¡†æ¶è®¾è®¡ï¼Œè¿™æ ·æˆ‘ä»¬ä½¿ç”¨çš„æ¨¡æ¿å¯ä»¥å˜å¾—æ›´åŠ çµæ´»ï¼Œæ— è®ºæ˜¯çº¯htmlæ¨¡æ¿ï¼Œè¿˜æ˜¯PHPæˆ–Javaä¹‹ç±»çš„åç«¯æ¨¡æ¿éƒ½èƒ½æœ‰æ•ˆæ”¯æŒã€‚ç¼–è¯‘å·¥å…·æ‰«æä»£ç ååªç”Ÿæˆèµ„æºä¾èµ–è¡¨ï¼Œæˆ‘ä»¬é€šè¿‡å®ç°å„è¯­è¨€å¹³å°çš„èµ„æºåŠ è½½æ¡†æ¶ï¼Œè®©ä¸åŒè¯­è¨€çš„æ¨¡æ¿éƒ½èƒ½åŸºäºåŒä¸€ä¸ªèµ„æºä¾èµ–è¡¨è¿›è¡Œèµ„æºåŠ è½½ã€‚</p>
<p>åŒæ—¶ï¼Œå¯¹èµ„æºè¿›è¡ŒMD5é‡å‘½åå¤„ç†ï¼Œæ–‡ä»¶md5é‡å‘½åä¹Ÿæ˜¯ä¸€ç§æå‡æ€§èƒ½çš„æœ‰æ•ˆæ‰‹æ®µï¼Œä½¿ç”¨æ–‡ä»¶md5åå¼€å¯æœåŠ¡å™¨å¼ºç¼“å­˜ï¼Œå¯ä»¥æå‡ç¼“å­˜çš„åˆ©ç”¨ç‡å¹¶é¿å…ä¸å¿…è¦çš„ç¼“å­˜åˆ¤æ–­å¤„ç†ã€‚ä½†æ–‡ä»¶md5é‡å‘½ååä¼šå‡ºç°å¼€å‘æ—¶å¼•ç”¨çš„æ–‡ä»¶åå¯¹ä¸ä¸Šçš„é—®é¢˜ï¼Œè¿™å°±éœ€è¦åœ¨èµ„æºè¡¨ä¸­è®°å½•åŸæ–‡ä»¶åä¸md5é‡å‘½ååä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå½“æˆ‘ä»¬å¼•ç”¨ä¸€ä¸ªèµ„æºæ—¶ï¼Œå°±ä¼šé€šè¿‡æŸ¥è¡¨è·å–é‡å‘½ååçš„èµ„æºåï¼Œç„¶ååˆ©ç”¨ä»£ç ä¸­å¼•ç”¨èµ„æºå®šä½çš„èƒ½åŠ›æ¥è¿›è¡Œèµ„æºåè‡ªåŠ¨æ›¿æ¢ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/md5.jpg" alt="md5"></p>
<h3 id="é™æ€èµ„æºé¢„åŠ è½½"><a href="#é™æ€èµ„æºé¢„åŠ è½½" class="headerlink" title="é™æ€èµ„æºé¢„åŠ è½½"></a>é™æ€èµ„æºé¢„åŠ è½½</h3><p>æ‰€è°“é™æ€èµ„æºé¢„åŠ è½½ï¼Œå°±æ˜¯å½“ç”¨æˆ·åœ¨è¿›è¡Œæµè§ˆé¡µé¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å½“å‰é¡µé¢é™é»˜åŠ è½½ä¸‹ä¸€ä¸ªé¡µé¢çš„é™æ€èµ„æºï¼Œè¿™æ ·å½“ç”¨æˆ·è¿›å…¥åˆ°ä¸‹ä¸€ä¸ªé¡µé¢æ—¶å°±èƒ½å¿«é€Ÿæ‰“å¼€é¡µé¢ï¼Œä»è€Œåœ¨ä¸çŸ¥ä¸è§‰ä¸­æå‡é¡µé¢çš„æ‰“å¼€é€Ÿåº¦ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/hermes.jpg" alt="é™æ€èµ„æºé¢„åŠ è½½è®¾è®¡"></p>
<p>æˆ‘ä»¬ä¼šåœ¨é™æ€èµ„æºé¢„åŠ è½½å¹³å°ä¸Šé…ç½®æ¯ä¸€ä¸ªé¡µé¢idå¯¹åº”éœ€è¦é¢„åŠ è½½é¡µé¢èµ„æºçš„idï¼Œç„¶åç³»ç»Ÿé€šè¿‡è¯»å–èµ„æºä¾èµ–è¡¨è·å–åˆ°æ‰€éœ€è¦é¢„åŠ è½½çš„é™æ€èµ„æºï¼Œç”Ÿæˆé¢„åŠ è½½èµ„æºåˆ—è¡¨æ–‡ä»¶ï¼Œå†å°†æ–‡ä»¶æ¨é€åˆ°çº¿ä¸ŠæœåŠ¡å™¨ï¼Œé€šè¿‡é¡µé¢æŒ‚è½½jsè¯·æ±‚è·å–é¢„åŠ è½½èµ„æºåˆ—è¡¨ï¼Œéšåé™é»˜åŠ è½½èµ„æºã€‚åœ¨æœ‰äº†èµ„æºä¾èµ–è¡¨åï¼Œæˆ‘ä»¬å¯ä»¥å‡†ç¡®åœ°åˆ†æåˆ°æ¯ä¸€ä¸ªé¡µé¢å¼•ç”¨èµ„æºçš„è¯·æ±‚ï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°å®ç°é™æ€èµ„æºé¢„åŠ è½½çš„åŠŸèƒ½ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/preload.jpg" alt="é™æ€èµ„æºé¢„åŠ è½½"></p>
<h2 id="Athena"><a href="#Athena" class="headerlink" title="Athena"></a>Athena</h2><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…ç°åˆ©å…¶å™¨ã€‚ä¸ºäº†å®ç°æˆ‘ä»¬å¯¹æå‡å¼€å‘æ•ˆç‡å’Œäº§å“æ€§èƒ½çš„è¯‰æ±‚ï¼Œæˆ‘ä»¬æå‡ºäº†æ¯”è¾ƒå®Œæ•´çš„å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆä»¥åŠå¯¹åº”çš„å·¥å…·<a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>ã€‚</p>
<p><a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>æ˜¯ç”±äº¬ä¸œã€å‡¹å‡¸å®éªŒå®¤ã€‘(<a href="http://aotu.io">aotu.io</a>) æ¨å‡ºçš„ä¸€å¥—é¡¹ç›®æµç¨‹å·¥å…·ï¼Œé€šè¿‡<a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæµç¨‹åœ°è·‘å®Œæ•´ä¸ªå¼€å‘æµç¨‹ã€‚<a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€æ˜¯æœ¬åœ°è‡ªåŠ¨åŒ–ç¼–è¯‘å·¥å…·ï¼ŒäºŒæ˜¯èµ„æºç®¡ç†å¹³å°ï¼Œå…¶æ¶æ„å¦‚ä¸‹</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena.jpg" alt="Athena"></p>
<h3 id="æœ¬åœ°è‡ªåŠ¨åŒ–å·¥å…·"><a href="#æœ¬åœ°è‡ªåŠ¨åŒ–å·¥å…·" class="headerlink" title="æœ¬åœ°è‡ªåŠ¨åŒ–å·¥å…·"></a>æœ¬åœ°è‡ªåŠ¨åŒ–å·¥å…·</h3><p>Athenaæœ¬åœ°ç¼–è¯‘å·¥å…·æ˜¯ä¸€ä¸ªåŸºäºNodeJsçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼æ¥ä¼˜åŒ–æˆ‘ä»¬çš„å¼€å‘æµç¨‹ï¼Œç›®å‰Athenaçš„ä¸»è¦åŠŸèƒ½æœ‰</p>
<ul>
<li>è‡ªåŠ¨åˆ›å»ºé¡¹ç›®ã€æ¨¡å—ã€é¡µé¢ã€ç»„ä»¶ç»“æ„</li>
<li>è½»é‡ç»„ä»¶åŒ–åŠŸèƒ½ï¼Œæ ¹æ®ç»„ä»¶åŠ è½½æƒ…å†µç”Ÿæˆèµ„æºä¾èµ–è¡¨</li>
<li>Sass/less ç¼–è¯‘</li>
<li>ä»£ç æ£€æŸ¥</li>
<li>CSS prefixç­‰å¤„ç†</li>
<li>CSSåˆå¹¶å‹ç¼©ï¼ŒJSåˆå¹¶å‹ç¼©</li>
<li>è‡ªåŠ¨ç”Ÿæˆé›ªç¢§å›¾ï¼Œè‡ªåŠ¨å¤šå€å›¾ï¼Œå›¾ç‰‡å‹ç¼©</li>
<li>å­—ä½“æ–‡ä»¶å‹ç¼©</li>
<li>è‡ªå®šä¹‰å›¾ç‰‡è½¬base64</li>
<li>æ–‡ä»¶å†…è”ï¼Œå¯ä»¥å†…è”æ ·å¼åŠJSä»£ç </li>
<li>æ–‡ä»¶MD5æˆ³ï¼Œå°†æ–‡ä»¶è¿›è¡Œä½¿ç”¨MD5è¿›è¡Œé‡å‘½å</li>
<li>æœ¬åœ°é¢„è§ˆï¼Œç›´æ¥æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®</li>
<li>èµ„æºå®šä½ï¼ˆå›¾ç‰‡ç­‰èµ„æºè·¯å¾„æ›¿æ¢ï¼‰</li>
<li>ç”ŸæˆCSSé¡µé¢ç‰‡ï¼Œæä¾›å°†é¡µé¢å¼•ç”¨çš„CSS/JSæŠ½ç¦»æˆé¡µé¢ç‰‡çš„å½¢å¼ï¼Œæ–¹ä¾¿ç®¡ç†CSSèµ„æº</li>
<li>éƒ¨ç½²åˆ°é¢„è§ˆæœºå’Œå¼€å‘æœº</li>
</ul>
<h4 id="åˆ›å»ºé¡¹ç›®ç»“æ„"><a href="#åˆ›å»ºé¡¹ç›®ç»“æ„" class="headerlink" title="åˆ›å»ºé¡¹ç›®ç»“æ„"></a>åˆ›å»ºé¡¹ç›®ç»“æ„</h4><p>åœ¨æ‰§è¡Œåˆ›å»ºå‘½ä»¤æ—¶ï¼ŒAthenaä¼šä»ç®¡ç†å¹³å°ä¸‹è½½è‡ªå®šä¹‰å¥½çš„é¡¹ç›®æ¨¡æ¿ï¼Œå¯ä»¥æ ¹æ®æ¨¡æ¿åˆ›å»ºé¡¹ç›®ã€æ¨¡å—ã€é¡µé¢ã€å’Œç»„ä»¶ã€‚Athenaæœ‰å››ä¸ªåˆ›å»ºå‘½ä»¤ï¼š</p>
<p>é€šè¿‡æ‰§è¡Œ <code>$ ath app demo</code> å‘½ä»¤å°±å¯ä»¥ç”Ÿæˆå®šä¹‰å¥½ç›®å½•ç»“æ„çš„é¡¹ç›®ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athapp.jpg" alt="åˆ›å»ºé¡¹ç›®"></p>
<p>éšåå¯ä»¥é€šè¿‡ <code>$ ath module home</code>æ¥åˆ›å»ºä¸€ä¸ªä¸šåŠ¡æ¨¡å—;</p>
<p>é€šè¿‡ <code>$ ath page index</code> æ¥åˆ›å»ºé¡µé¢ï¼›</p>
<p>é€šè¿‡ <code>$ ath widget widgetName</code> æ¥åˆ›å»ºç»„ä»¶ã€‚</p>
<h4 id="å¼€å‘ä½¿ç”¨"><a href="#å¼€å‘ä½¿ç”¨" class="headerlink" title="å¼€å‘ä½¿ç”¨"></a>å¼€å‘ä½¿ç”¨</h4><h5 id="ç»„ä»¶åŒ–-1"><a href="#ç»„ä»¶åŒ–-1" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h5><p>Athenaä¸­å®ç°ç»„ä»¶åŒ–ä¸»è¦æ˜¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€æ˜¯é’ˆå¯¹çº¯HTMLæ¨¡æ¿ï¼Œé€šè¿‡æ‰©å±•æ¨¡æ¿å¼•æ“æ–¹æ³•å®ç°ï¼Œæä¾›äº†ç»„ä»¶åŒ–API <code>widget.load</code>ï¼Œå®ƒå¯ä»¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯widgetçš„åç§°ï¼Œåé¢ä¸¤ä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å‘widgetä¼ é€’çš„ä¸€äº›å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯widgetæ‰€å±çš„æ¨¡å—ï¼Œå¦‚æœæ˜¯æœ¬æ¨¡å—ï¼Œå¯ä»¥ä¸ä¼ ä¾‹å¦‚</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> widget.load(<span class="string">'user'</span>) </span><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">%=</span></span><span class="ruby"></span></div><div class="line">	widget.load(<span class="string">'user'</span>, &#123;</div><div class="line">		<span class="symbol">param:</span> <span class="string">'test'</span></div><div class="line">	&#125;)</div><div class="line"><span class="xml"><span class="tag">%&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">%=</span></span><span class="ruby"> widget.load(<span class="string">'user'</span>, null, <span class="string">'gb'</span>) </span><span class="xml"><span class="tag">%&gt;</span></span></div></pre></td></tr></table></figure>
<p>é€šè¿‡æ¨¡æ¿å¼•æ“ç¼–è¯‘ï¼Œæ‰§è¡Œwidget.loadæ–¹æ³•ï¼Œå¯ä»¥å®ç°åŠ è½½æ¨¡æ¿ï¼Œè®°å½•ä¾èµ–å…³ç³»çš„ç›®çš„ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/component_use.jpg" alt="ç»„ä»¶åŒ–å½¢å¼"></p>
<p>äºŒæ˜¯é’ˆå¯¹ä¸åŒè¯­è¨€çš„åç«¯æ¨¡æ¿ï¼Œé€šè¿‡å®ç°å„è‡ªçš„ç»„ä»¶åŒ–æ¡†æ¶æ¥è¿›è¡Œç»„ä»¶çš„åŠ è½½ï¼Œä¾‹å¦‚ <code>PHP</code> ä¸‹ä½¿ç”¨ <code>&lt;?= $widget-&gt;load(&#39;user&#39;, NULL, &#39;gb&#39;) ?&gt;</code> æ¥è¿›è¡Œç»„ä»¶åŠ è½½ï¼Œå†é€šè¿‡ä»£ç æ‰«æå¾—å‡ºç»„ä»¶ä¾èµ–å…³ç³»ã€‚</p>
<h5 id="Athenaä¸­çš„API"><a href="#Athenaä¸­çš„API" class="headerlink" title="Athenaä¸­çš„API"></a>Athenaä¸­çš„API</h5><p>Athenaé’ˆå¯¹æ¨¡æ¿æä¾›äº†ä¸€ç³»åˆ—çš„APIæ¥æ‰©å±•ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å‰é¢æåˆ°çš„ <code>&lt;%= widget.load() %&gt;</code> æ¥å®ç°ç»„ä»¶åŒ–ã€‚</p>
<p>åŒæ—¶Athenaä¸­è¿˜æä¾›äº†å…¶ä»–APIï¼š</p>
<p><code>&lt;%= getCSS() %&gt;</code>ã€<code>&lt;%= getJS() %&gt;</code> ç”¨æ¥å¼•ç”¨CSS/JSæ–‡ä»¶ï¼Œä¼ å…¥æ–‡ä»¶åå’Œæ¨¡å—åï¼›</p>
<p><code>&lt;%= uri() %&gt;</code> æä¾›äº†èµ„æºå®šä½åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­æ ‡è®°èµ„æºï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸”åœ¨JSä¸­ä¹Ÿæœ‰èµ„æºå®šä½API <code>__uri()</code>ï¼›</p>
<p><code>&lt;%= inline() %&gt;</code> æä¾›äº†å†…è”èµ„æºçš„åŠŸèƒ½ï¼Œä¼ å…¥æ–‡ä»¶åå’Œæ¨¡å—åï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­å†…è”ä»»æ„èµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ä»¥åŠJSè„šæœ¬ï¼›è€Œä¸” <code>inline</code> ä¹Ÿå¯ä»¥å†…è”ä¸€æ®µç½‘ç»œèµ„æºï¼Œä¾‹å¦‚çº¿ä¸Šçš„JSæ–‡ä»¶ï¼ŒåŒæ ·çš„åœ¨JSä¸­ä¹Ÿæœ‰å†…è”èµ„æºAPI <code>__inline()</code>ï¼›</p>
<p>é›ªç¢§å›¾æ ‡è¯† <code>?__sprite</code> ï¼Œåœ¨CSSä¸­å¼•ç”¨å›¾ç‰‡æœ€ååŠ ä¸Šæ ‡è¯† <code>?__sprite</code> å¯ä»¥è‡ªåŠ¨ç”Ÿæˆè‡ªå®šä¹‰åç§°é›ªç¢§å›¾ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰ç”Ÿæˆå¤šå¼ é›ªç¢§å›¾ï¼Œåªéœ€è¦è¦æ ‡è¯†åé¢å¸¦ä¸Šä¸€ä¸ªæ–‡ä»¶åï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€å¼ ä»¥è¿™ä¸ªæ–‡ä»¶åæ¥å‘½åçš„é›ªç¢§å›¾ï¼Œä¾‹å¦‚ <code>?__sprite=icons</code> ï¼Œè¿™æ ·æ‰€æœ‰å¸¦åŒæ ·æ ‡è¯†çš„å›¾ç‰‡å°±ä¼šç”Ÿæˆä¸€å¼ ä»¥ <code>icons</code> ä¸ºæ–‡ä»¶åçš„é›ªç¢§å›¾ã€‚</p>
<h4 id="ç¼–è¯‘é¢„è§ˆ"><a href="#ç¼–è¯‘é¢„è§ˆ" class="headerlink" title="ç¼–è¯‘é¢„è§ˆ"></a>ç¼–è¯‘é¢„è§ˆ</h4><h5 id="ç¼–è¯‘ä»»åŠ¡"><a href="#ç¼–è¯‘ä»»åŠ¡" class="headerlink" title="ç¼–è¯‘ä»»åŠ¡"></a>ç¼–è¯‘ä»»åŠ¡</h5><p>åœ¨ç¼–å†™å®Œé¡¹ç›®ï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä»¤æ¥å¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘äº†ï¼Œæ‰§è¡Œç¼–è¯‘å‘½ä»¤ <code>$ ath build</code>ï¼Œä¼šé’ˆå¯¹æŒ‡å®šæ¨¡å—æ‰§è¡Œå·²ç»å®šä¹‰å¥½çš„ç¼–è¯‘ä»»åŠ¡ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œç›®å‰ç¼–è¯‘éƒ½æ˜¯åŸºäºä¸šåŠ¡æ¨¡å—å»ç¼–è¯‘ï¼Œç¼–è¯‘ä»»åŠ¡çš„æœ€å°æ‰§è¡Œå•ä½æ˜¯é¡µé¢ï¼Œæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šæ‰§è¡Œä»¥ä¸‹ç¼–è¯‘åˆ—è¡¨</p>
<p><img src="//misc.aotu.io/luckyadam/athena/build_process.jpg" alt="ç¼–è¯‘ä»»åŠ¡"></p>
<p><img src="//misc.aotu.io/luckyadam/athena/athbuild.jpg" alt="ç¼–è¯‘æˆªå›¾"></p>
<h5 id="æœ¬åœ°é¢„è§ˆ"><a href="#æœ¬åœ°é¢„è§ˆ" class="headerlink" title="æœ¬åœ°é¢„è§ˆ"></a>æœ¬åœ°é¢„è§ˆ</h5><p>æ‰§è¡Œé¢„è§ˆå‘½ä»¤ <code>$ath serve</code> ä¼šæ‰§è¡Œç²¾ç®€ç‰ˆç¼–è¯‘ä»»åŠ¡æ¥ç¼–è¯‘é¡¹ç›®ï¼Œç¼–è¯‘å®Œé¡¹ç›®åä¼šç”Ÿæˆä¸€ä»½ç«™ç‚¹åœ°å›¾ï¼Œéšåæ‰“å¼€ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨æ¥é¢„è§ˆé¡¹ç›®ï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¼€å‘ï¼Œåœ¨é¢„è§ˆæ—¶ä¼šåŒæ—¶watchç›®å½•å’Œæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¹¶ä¸”æä¾›äº†livereloadåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¢„è§ˆæ—¶ä»»æ„ä¿®æ”¹æ–‡ä»¶ï¼Œéƒ½å°†å®æ—¶åœ°åæ˜ åˆ°é¡µé¢ä¸­ï¼ŒåŒæ—¶å¯ä»¥æ–°å»ºå¦ä¸€ä¸ªçª—å£æ‰§è¡Œæ–°å¢ç»„ä»¶å’Œé¡µé¢çš„æ“ä½œï¼Œè®©æ•´ä¸ªå¼€å‘è¿‡ç¨‹éå¸¸é¡ºç•…ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨å¼€å‘æœ¬èº«å°±å¥½ï¼Œä¸éœ€è¦å†å…³æ³¨å…¶ä»–äº‹ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/aths.jpg" alt="ath serve"></p>
<blockquote>
<p>æ‰§è¡Œå®Œç¼–è¯‘ä»»åŠ¡åï¼Œé»˜è®¤è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œé¢„è§ˆç«™ç‚¹åœ°å›¾</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/site_map.jpg" alt="ç«™ç‚¹åœ°å›¾"></p>
<h5 id="Mock-server"><a href="#Mock-server" class="headerlink" title="Mock server"></a>Mock server</h5><p>åœ¨è¿›è¡Œé¡¹ç›®é¢„è§ˆçš„åŒæ—¶ï¼ŒAthenaåŒæ—¶æä¾›äº†mock dataçš„æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ç›¸åº”çš„è·¯ç”±ï¼Œä»¥åŠè·¯ç”±æ¥å£å¯¹åº”çš„å‡æ•°æ®ï¼Œæ‰€æœ‰çš„æ¥å£è¯·æ±‚ä¼šå‘é€åˆ°mock serverä¸Šï¼Œåœ¨mock serverä¸­å¯ä»¥é€‰æ‹©å°†è¯·æ±‚ä»£ç†åˆ°å‡æ•°æ®å¹³å°è¿˜æ˜¯ä»£ç†åˆ°çº¿ä¸Šæ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥è„±ç¦»åç«¯è¿›è¡Œå¼€å‘è”è°ƒäº†ï¼Œä»¥æ­¤å®ç°æ•°æ®çš„å‰åç«¯åˆ†ç¦»ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/mock_server.jpg" alt="mock server"></p>
<h4 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h4><p>åœ¨å¼€å‘é¢„è§ˆå®Œåï¼Œé€šè¿‡å‘½ä»¤ <code>$ ath publish</code> å°±å¯ä»¥å°†é¡¹ç›®å‘å¸ƒåˆ°é…ç½®å¥½çš„æµ‹è¯•æœºä¸Šï¼Œå‘å¸ƒåŒæ—¶æ”¯æŒftpã€sftpä»¥åŠhttpå½¢å¼ã€‚</p>
<h4 id="ç»„ä»¶ç»´æŠ¤"><a href="#ç»„ä»¶ç»´æŠ¤" class="headerlink" title="ç»„ä»¶ç»´æŠ¤"></a>ç»„ä»¶ç»´æŠ¤</h4><p>æˆ‘ä»¬é€šè¿‡ç»„ä»¶åŒ–çš„æ‰‹æ®µå·²ç»å°†æˆ‘ä»¬çš„é¡¹ç›®è¿›è¡Œç»„ä»¶åŒ–äº†ï¼Œè¿™æ ·æˆ‘ä»¬ç»è¿‡ä¸šåŠ¡è¿­ä»£ç§¯ç´¯ï¼Œäº§å‡ºå¾ˆå¤šä¸šåŠ¡å…¬å…±ç»„ä»¶ï¼Œä½†åœ¨ä»¥å¾€çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œå…¬å…±ç»„ä»¶çš„æ›´æ–°ä¸ç»´æŠ¤ä¸€ç›´å¾ˆå—é™åˆ¶ï¼Œè€Œä¸”æœ‰å“ªäº›å…¬å…±ç»„ä»¶ã€å…¬å…±ç»„ä»¶é•¿ä»€ä¹ˆæ ·å­ï¼Œåªèƒ½ä¾é å£å£ç›¸ä¼ æˆ–è€…æ‰‹å·¥ç»´æŠ¤çš„æ–‡æ¡£ã€‚æ‰€ä»¥åœ¨Athenaä¸­æˆ‘ä»¬åŠ å…¥äº†ç»„ä»¶å¹³å°ï¼Œåœ¨ç»„ä»¶å¹³å°ä¸Šç»Ÿä¸€å±•ç¤ºå„ä¸ªä¸šåŠ¡çš„å…¬å…±ç»„ä»¶ï¼Œè€Œå¾—ç›Šäºæœ¬åœ°å·¥å…·ï¼Œç»„ä»¶å¹³å°ä¸éœ€è¦äººå·¥å¹²é¢„ç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°é€šè¿‡å‘½ä»¤ <code>$ ath widget-publish [widgetName]</code> å‘½ä»¤æ¥å‘å¸ƒä¸€ä¸ªç»„ä»¶åˆ°ç»„ä»¶å¹³å°ï¼Œè¿™æ ·å…¶ä»–äººå°±å¯ä»¥ç«‹å³åœ¨ç»„ä»¶å¹³å°è¿›è¡Œç»„ä»¶çš„é¢„è§ˆï¼Œè€Œå…¶ä»–äººè‹¥æƒ³ä½¿ç”¨è¯¥ç»„ä»¶æ—¶ï¼Œåœ¨æœ¬åœ°é€šè¿‡å‘½ä»¤ <code>ath widget-load [widgetId]</code> å°±å¯ä»¥ä¸‹è½½è¯¥ç»„ä»¶åˆ°è‡ªå·±çš„æ¨¡å—ç›®å½•ä¸‹äº†ã€‚</p>
<p>è¿™æ ·ç»„ä»¶çš„ç»´æŠ¤æ›´åŠ è‡ªåŠ¨åŒ–ï¼Œå…¬å…±ç»„ä»¶çš„ä½¿ç”¨ä¹Ÿæ›´åŠ æ–¹ä¾¿äº†ã€‚</p>
<blockquote>
<p>ç»„ä»¶å‘å¸ƒ</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/ath_wp.jpg" alt="ç»„ä»¶å‘å¸ƒ"></p>
<blockquote>
<p>ç»„ä»¶ä¸‹è½½</p>
</blockquote>
<p><img src="//misc.aotu.io/luckyadam/athena/ath_wl.jpg" alt="ç»„ä»¶ä¸‹è½½"></p>
<h4 id="è‡ªèº«ä¼˜åŒ–"><a href="#è‡ªèº«ä¼˜åŒ–" class="headerlink" title="è‡ªèº«ä¼˜åŒ–"></a>è‡ªèº«ä¼˜åŒ–</h4><p>ä¸ºäº†æå‡å¼€å‘æ•ˆç‡ï¼ŒAthenaåšäº†ä¸€äº›ä¼˜åŒ–æ“ä½œ</p>
<h5 id="ç²¾ç®€é¡¹ç›®é¢„è§ˆæ—¶çš„ä»»åŠ¡"><a href="#ç²¾ç®€é¡¹ç›®é¢„è§ˆæ—¶çš„ä»»åŠ¡" class="headerlink" title="ç²¾ç®€é¡¹ç›®é¢„è§ˆæ—¶çš„ä»»åŠ¡"></a>ç²¾ç®€é¡¹ç›®é¢„è§ˆæ—¶çš„ä»»åŠ¡</h5><p>åœ¨å¼€å‘æ—¶è¿›è¡Œé¡¹ç›®é¢„è§ˆæ—¶ï¼Œä¼šæ‰§è¡Œç²¾ç®€ç‰ˆçš„ç¼–è¯‘ä»»åŠ¡ï¼Œå‰”é™¤äº†ç±»ä¼¼æ–‡ä»¶å‹ç¼©ã€é›ªç¢§å›¾ç”Ÿæˆã€æ¨¡æ¿æŠ½ç¦»å¤„ç†ç­‰è€—æ—¶çš„æ“ä½œï¼Œåªä¿ç•™æ ¸å¿ƒã€å¿…é¡»çš„ç¼–è¯‘ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥æå¤§åœ°å‡å°‘ç¼–è¯‘æ—¶é—´ï¼Œæå‡å¼€å‘çš„æ•ˆç‡ã€‚</p>
<h5 id="é¢„è§ˆæ—¶ç›‘å¬ç»†åŒ–"><a href="#é¢„è§ˆæ—¶ç›‘å¬ç»†åŒ–" class="headerlink" title="é¢„è§ˆæ—¶ç›‘å¬ç»†åŒ–"></a>é¢„è§ˆæ—¶ç›‘å¬ç»†åŒ–</h5><p>åœ¨å¼€å‘è¿›è¡Œé¢„è§ˆæ—¶ï¼Œä¼šå¯¹æ‰€æœ‰æ–‡ä»¶çš„æ”¹åŠ¨è¿›è¡Œç›‘å¬ï¼Œè€Œé’ˆå¯¹æ¯ä¸€ç±»æ–‡ä»¶éƒ½æœ‰éå¸¸ç»†åŒ–çš„æ“ä½œï¼Œå½“æ–‡ä»¶æ”¹åŠ¨æ—¶åªä¼šæ‰§è¡Œæ”¹æ–‡ä»¶æ‰€éœ€è¦çš„ç¼–è¯‘ä»»åŠ¡ï¼Œè€Œä¸ä¼šè¿›è¡Œæ•´ä½“ç¼–è¯‘ï¼Œè¿™æ ·å¯ä»¥å¾ˆå¥½åœ°æå‡å¼€å‘æ•ˆç‡ã€‚ä¾‹å¦‚æ”¹åŠ¨æŸä¸€ç»„ä»¶çš„CSSæ–‡ä»¶ï¼Œåˆ™åªä¼šé’ˆå¯¹è¯¥æ–‡ä»¶æ‰§è¡Œä¸€äº›ç›¸å…³çš„CSSæ“ä½œã€‚</p>
<p>åŒæ—¶å¾—ç›Šäºæ‰€æœ‰æ–‡ä»¶ä¾èµ–å…³ç³»çš„è®°å½•ï¼Œåœ¨ç›‘å¬æ—¶ä¼šæ ¹æ®ä¾èµ–å…³ç³»è¿›è¡Œæ–‡ä»¶ç¼–è¯‘ï¼Œä¾‹å¦‚æŸsassæ–‡ä»¶ä¸­å¼•å…¥äº†å¦ä¸€ä¸ªsassåº“æ–‡ä»¶ï¼Œä¿®æ”¹è¿™ä¸ªsassåº“æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæ ¹æ®å¼•ç”¨å…³ç³»è¡¨åŒæ—¶æ›´æ–°åˆ°æ‰€æœ‰å¼•ç”¨åˆ°è¿™ä¸ªsassæ–‡ä»¶çš„æ–‡ä»¶ï¼Œè¿™æ ·é¡¹ç›®æ–‡ä»¶æ›´æ–°åŠæ—¶ï¼Œè®©å¼€å‘æµç¨‹æ›´åŠ æµç•…ã€‚</p>
<h5 id="ç¼–è¯‘ç¼“å­˜"><a href="#ç¼–è¯‘ç¼“å­˜" class="headerlink" title="ç¼–è¯‘ç¼“å­˜"></a>ç¼–è¯‘ç¼“å­˜</h5><p>åœ¨å›¾ç‰‡å‹ç¼©å’Œsassç¼–è¯‘æ—¶ï¼Œå¼€å¯æ–‡ä»¶ç¼“å­˜ï¼Œå°†å·²ç»ç¼–è¯‘è¿‡ä¸”æ²¡æœ‰æ”¹åŠ¨çš„æ–‡ä»¶è¿‡æ»¤æ‰ï¼Œä¸å†ç¼–è¯‘ï¼Œå¤§å¹…æå‡ç¼–è¯‘é€Ÿåº¦ã€‚</p>
<h5 id="å‘å¸ƒç¼“å­˜"><a href="#å‘å¸ƒç¼“å­˜" class="headerlink" title="å‘å¸ƒç¼“å­˜"></a>å‘å¸ƒç¼“å­˜</h5><p>è®¾ç½®å‘å¸ƒè¿‡æ»¤ï¼Œæ ¹æ®æ–‡ä»¶md5è¿‡æ»¤æ‰å·²ç»å‘å¸ƒè¿‡çš„æ–‡ä»¶ï¼Œæå‡å‘å¸ƒé€Ÿåº¦ã€‚</p>
<h4 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h4><p>Athenaæœ¬åœ°å·¥å…·æ—©æœŸæŠ€æœ¯é€‰å‹æ˜¯ <code>Yeoman</code> + <code>Gulp</code> çš„æ–¹å¼ï¼Œä½†åæ¥ç”±äºå®‰è£…ã€æ›´æ–°éå¸¸éº»çƒ¦ï¼Œå‘½ä»¤å¤ªé•¿å¾ˆéš¾æ‰“çš„åŸå› ï¼Œæˆ‘ä»¬æ”¹æˆäº†è‡ªå·±å¼€å‘ä¸€ä¸ªå…¨å±€å®‰è£…åŒ…çš„æ–¹å¼ï¼Œç¼–è¯‘æ ¸å¿ƒä½¿ç”¨çš„è¿˜æ˜¯ <code>Gulp</code> çš„ <code>vinyl-fs</code> æ¥å®ç°æ–‡ä»¶æµå¤„ç†ï¼Œé€šè¿‡ <code>ES6 Promise</code> æ¥è¿›è¡Œç¼–è¯‘æµç¨‹æ§åˆ¶ï¼Œæœ€å°ä»¥é¡µé¢ä¸ºå•ä½ï¼Œç»è¿‡ä¸€ç³»åˆ—ç¼–è¯‘ä»»åŠ¡ï¼Œæœ€åäº§å‡ºç¼–è¯‘å¥½çš„æ–‡ä»¶ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_tech.jpg" alt="æŠ€æœ¯é€‰å‹"></p>
<h3 id="ç®¡ç†å¹³å°"><a href="#ç®¡ç†å¹³å°" class="headerlink" title="ç®¡ç†å¹³å°"></a>ç®¡ç†å¹³å°</h3><p>æ€§èƒ½ä¼˜åŒ–ä¸€ç›´æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆæ¢ç´¢çš„è¯¾é¢˜ï¼Œå¾ˆå¤šæ—¶å€™å°±æ˜¯èµ„æºçš„åˆ†é…é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯èµ„æºç®¡ç†ã€‚ä¸ºäº†æ›´å¥½åœ°é…åˆæœ¬åœ°æ„å»ºå·¥å…·æ¥ç®¡ç†èµ„æºï¼Œæˆ‘ä»¬æ­å»ºäº†ç®¡ç†å¹³å°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œç»“åˆæœ¬åœ°æ„å»ºå·¥å…·å’Œç®¡ç†å¹³å°ï¼Œå·¥ä½œæµç¨‹å˜æˆäº†æ€æ ·ï¼Ÿ</p>
<h4 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h4><ol>
<li>åœ¨ç®¡ç†å¹³å°ä¸Šåˆ›å»ºé¡¹ç›®ï¼Œè¾“å…¥é¡¹ç›®åç§°å’Œé¢„è§ˆæœºï¼Œä»¥åŠé€‰æ‹©ç›¸åº”çš„æ¨¡æ¿ç­‰ï¼›</li>
<li>åœ¨ç»ˆç«¯æ‰§è¡Œath appæŒ‡ä»¤ï¼Œå·¥å…·ä¼šä¼˜å…ˆæ‹‰å–è¿œç¨‹æœåŠ¡å™¨çš„é¡¹ç›®ä¿¡æ¯æ¥åˆå§‹åŒ–é¡¹ç›®ï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°ç›¸å…³ä¿¡æ¯ï¼Œå°±ä¼šåœ¨æœ¬åœ°ç”Ÿæˆé¡¹ç›®ï¼Œå¹¶å°†é¡¹ç›®ä¿¡æ¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨ï¼›</li>
<li>é¡¹ç›®åˆå§‹åŒ–åï¼Œå°±å¯ä»¥åˆ›å»ºæ¨¡å—ã€é¡µé¢ã€ç»„ä»¶äº†ï¼›</li>
<li>åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œå¯é€šè¿‡ath serveré¢„è§ˆé¡µé¢ï¼›</li>
<li>åœ¨æœ¬åœ°é€šè¿‡åï¼Œå¯æ‰§è¡Œath publishå°†ä»£ç å‘å¸ƒåˆ°å¼€å‘æœºæˆ–è€…é¢„è§ˆæœºã€‚</li>
</ol>
<p>åœ¨ä¸Šé¢çš„publishæŒ‡ä»¤ä¸­ï¼Œå·¥å…·ä¼šæ‰«ææ‰€æœ‰æ–‡ä»¶ï¼Œæ‰§è¡Œä»£ç æ£€æŸ¥ï¼Œæ‰«æé¡µé¢æ–‡ä»¶ï¼Œè·å–ç»„ä»¶ä¾èµ–å…³ç³»ï¼Œæ ¹æ®ç»„ä»¶ä¾èµ–å…³ç³»è¿›è¡Œæ–‡ä»¶åˆå¹¶ï¼Œç„¶åä¼šè¿›è¡Œæ ·å¼å¤„ç†ã€jså¤„ç†ä»¥åŠå›¾ç‰‡çš„å¤„ç†ï¼Œæ ¹æ®é…ç½®æ˜¯å¦è¿›è¡Œmd5é‡å‘½åæ–‡ä»¶ï¼Œç»„è£…htmlï¼Œæ’å…¥æ ·å¼ã€jså’Œå›¾ç‰‡ï¼Œæœ€åå°†ç¼–è¯‘å¥½çš„æ–‡ä»¶å‘å¸ƒåˆ°ç›¸åº”çš„æœºå™¨ã€‚åœ¨æ•´ä¸ªè¿‡ç¨‹é‡Œé¢ï¼Œä¼šç”Ÿæˆèµ„æºå…³ç³»ä¾èµ–è¡¨ï¼Œæœ€ç»ˆä¼šå°†èµ„æºå…³ç³»è¡¨åŠç¼–è¯‘åçš„æ–‡ä»¶ä¸Šä¼ è‡³ç®¡ç†å¹³å°ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ¯ä¸ªæŒ‡ä»¤çš„æ“ä½œéƒ½ä¼šä¸ŠæŠ¥ç»™ç®¡ç†å¹³å°ã€‚ç®¡ç†å¹³å°æ”¶åˆ°æ•°æ®åï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆå¯ä»¥åœ¨å¹³å°ä¸Šçœ‹åˆ°é¡¹ç›®ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<p>æ•´ä½“å·¥ä½œæµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//misc.aotu.io/luckyadam/athena/work.jpg" alt="å·¥ä½œæµç¨‹"></p>
<p>ä»ä¸Šé¢çš„å·¥ä½œæµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç®¡ç†å¹³å°éœ€è¦æœ‰æ•°æ®ç»Ÿè®¡ã€èµ„æºç®¡ç†ä»¥åŠé¡¹ç›®ç®¡ç†çš„åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_manage.jpg" alt="ç®¡ç†å¹³å°æ¶æ„"></p>
<h4 id="æ•°æ®ç»Ÿè®¡"><a href="#æ•°æ®ç»Ÿè®¡" class="headerlink" title="æ•°æ®ç»Ÿè®¡"></a>æ•°æ®ç»Ÿè®¡</h4><p>æ•°æ®ç»Ÿè®¡åŒ…å«é¡¹ç›®æ“ä½œæ—¥å¿—ï¼Œä¸»è¦æ˜¯ç”¨äºç»Ÿè®¡å›¢é˜Ÿæ¯ä¸ªæˆå‘˜å…·ä½“çš„æ“ä½œï¼Œæ–¹ä¾¿é¡¹ç›®æˆå‘˜æŸ¥çœ‹é¡¹ç›®ä»£ç å˜æ›´ï¼›å¦ä¸€éƒ¨ä»½æ˜¯ç»Ÿè®¡æ ·å¼è¡¨ã€è„šæœ¬ä»¥åŠå›¾ç‰‡çš„å‹ç¼©æ•°æ®ï¼Œç”¨äºæ˜¾ç¤ºå·¥å…·ç»™æˆ‘ä»¬é¡¹ç›®å¸¦æ¥çš„æå‡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ“ä½œæ—¥å¿—ç»Ÿè®¡ï¼š</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_manage1.jpg" alt="æ•°æ®ç»Ÿè®¡"></p>
<h4 id="èµ„æºç®¡ç†"><a href="#èµ„æºç®¡ç†" class="headerlink" title="èµ„æºç®¡ç†"></a>èµ„æºç®¡ç†</h4><p>èµ„æºç®¡ç†æ˜¯ç®¡ç†å¹³å°çš„æ ¸å¿ƒï¼Œä¸»è¦åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼šæ¨¡å—å±•ç¤ºã€ä¾èµ–å…³ç³»ã€ç»„ä»¶é¢„è§ˆå’Œæƒé™æ§åˆ¶ã€‚è¿™éƒ¨åˆ†åŠŸèƒ½ä¸»è¦é€šè¿‡æœ¬åœ°æ„å»ºå·¥å…·æä¾›çš„èµ„æºå…³ç³»è¡¨æ¥å®Œæˆã€‚</p>
<h5 id="æ¨¡å—å±•ç¤º"><a href="#æ¨¡å—å±•ç¤º" class="headerlink" title="æ¨¡å—å±•ç¤º"></a>æ¨¡å—å±•ç¤º</h5><p>æ¨¡å—å±•ç¤ºï¼Œç”¨äºè®°å½•é¡¹ç›®å…·ä½“åŒ…å«å“ªäº›æ¨¡å—ä»¥åŠæ¨¡å—å…·ä½“çš„ä¿¡æ¯ã€‚åœ¨å¹³å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¼šåˆ†ä¸ºè®¸å¤šæ¨¡å—ï¼Œä¸åŒçš„æ¨¡å—æœ‰ä¸åŒçš„äººæ¥å¼€å‘å’Œç»´æŠ¤ã€‚å½“é¡¹ç›®è¶Šå¤§çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ç®¡ç†å¹³å°æ¸…æ™°åœ°çœ‹åˆ°æ¨¡å—å…·ä½“çš„ä¿¡æ¯ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_manage_module.jpg" alt="æ¨¡å—å±•ç¤º"></p>
<h5 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h5><p>ä¾èµ–å…³ç³»ï¼Œä¸»è¦æ˜¯htmlã€cssã€jså’Œå›¾ç‰‡ç›¸äº’ä¹‹é—´çš„å…³ç³»ã€‚é€šè¿‡åˆ†æèµ„æºå…³ç³»ä¾èµ–è¡¨ï¼Œå¯ä»¥è·å–åˆ°å„ä¸ªèµ„æºè¢«å¼•ç”¨çš„æƒ…å†µä»¥åŠçº¿ä¸Šç‰ˆæœ¬çš„æƒ…å†µã€‚å½“çº¿ä¸Šç¯å¢ƒé‡‡ç”¨md5æ¥åšèµ„æºç®¡ç†æ—¶ï¼Œæˆ‘ä»¬ä¸æ˜¯å¾ˆæ¸…æ™°åœ°çŸ¥é“é™æ€èµ„æºå¯¹åº”çº¿ä¸Šå“ªä¸ªç‰ˆæœ¬çš„èµ„æºï¼Œè€Œæœ‰äº†è¿™ä¸ªä¾èµ–å…³ç³»è¡¨ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¿«åœ°å®šä½åˆ°å…·ä½“çš„èµ„æºã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_manage_include.jpg" alt="ä¾èµ–å…³ç³»"></p>
<h5 id="ç»„ä»¶ç®¡ç†"><a href="#ç»„ä»¶ç®¡ç†" class="headerlink" title="ç»„ä»¶ç®¡ç†"></a>ç»„ä»¶ç®¡ç†</h5><p>æˆ‘ä»¬é‡‡ç”¨ç»„ä»¶æ¥æ‹¼å‡‘é¡µé¢ï¼Œå½“é¡¹ç›®è¶Šå¤§æ—¶ï¼Œç»„ä»¶è¶Šå¤šï¼Œé‚£ä¹ˆå¦‚ä½•ç®¡ç†ç»„ä»¶æˆä¸ºäº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ã€‚æ¯”å¦‚è¯´ï¼Œæœ‰ä¸€äº›æ¯”è¾ƒè€çš„å†—ä½™ç»„ä»¶ï¼Œæˆ‘ä»¬ä¸ç¡®å®šæ˜¯å¦ä¸ºå…¶ä»–é¡µé¢æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ„‰å¿«åœ°åˆ é™¤å®ƒã€‚æœ‰äº†ç»„ä»¶ç®¡ç†ï¼Œå¯ä»¥æ¸…æ™°åœ°çŸ¥é“ç»„ä»¶çš„è¢«è°ƒç”¨æƒ…å†µï¼Œå°±å¯ä»¥å¯¹ç»„ä»¶åšç›¸åº”çš„æ“ä½œã€‚</p>
<p>ç»„ä»¶ç®¡ç†ï¼Œç»“åˆç»„ä»¶å¹³å°æ¥ä½¿ç”¨ï¼Œåœ¨ç®¡ç†å¹³å°ä¸Šå¼•ç”¨ç»„ä»¶åœ°å€é¢„è§ˆç»„ä»¶ï¼ŒåŒæ—¶å¯ä»¥è·å–åˆ°ç»„ä»¶è¢«å¼•ç”¨ä»¥åŠå¼•ç”¨èµ„æºï¼ˆå¦‚cssã€jsã€å›¾ç‰‡ï¼‰çš„ç›¸å…³æƒ…å†µã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_manage_component.jpg" alt="ç»„ä»¶ç®¡ç†"></p>
<p>æˆ‘ä»¬çš„ç»„ä»¶åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç±»æ˜¯é€šè¿‡ath wè‡ªåŠ¨åˆ›å»ºçš„ï¼Œé€šè¿‡ath puæäº¤åˆ°ç®¡ç†å¹³å°çš„ï¼Œåœ¨ç®¡ç†å¹³å°ä¸Šè¿›è¡Œç»„ä»¶çš„ç›¸å…³åˆ†æå’Œç¼–è¯‘ï¼Œå¾—åˆ°ç»„ä»¶çš„ä¿¡æ¯ï¼Œè¿™ç±»ç»„ä»¶ä¸»è¦æ˜¯è·Ÿä¸šåŠ¡ç»‘å®šçš„ï¼›å¦ä¸€ç±»æ˜¯é€šè¿‡ath widget-publishæäº¤åˆ°ç»„ä»¶å¹³å°çš„ï¼Œç”±ç»„ä»¶å¹³å°è¿›è¡Œç›¸å…³å¤„ç†ï¼Œè¿™ç±»ç»„ä»¶æ˜¯é€šç”¨ç»„ä»¶ï¼Œä¸ä¸šåŠ¡æ— å…³ï¼Œç”¨äºå±•ç¤ºç»™å¼€å‘ä»¥åŠç›¸å…³ä¸šåŠ¡æ–¹çœ‹çš„ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_components.jpg" alt="ç»„ä»¶æäº¤"></p>
<p>åœ¨ç»„ä»¶å¹³å°ä¸Šå¯ä»¥é¢„è§ˆä¸ç¼–è¾‘ç›¸å…³çš„ç»„ä»¶ï¼Œé€šè¿‡ä¸è®¾è®¡å¸ˆçº¦å®šç›¸å…³çš„è®¾è®¡è§„èŒƒæ¥ä¿ƒä½¿ç»„ä»¶è¾¾åˆ°å°½å¯èƒ½åœ°å¤ç”¨ï¼Œè¿›è€Œå‡å°‘è®¾è®¡å¸ˆçš„å·¥ä½œé‡ï¼Œæå‡æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_components_ui.jpg" alt="ç»„ä»¶å¹³å°"></p>
<h6 id="ç»„ä»¶æäº¤åˆ°ç»„ä»¶å¹³å°"><a href="#ç»„ä»¶æäº¤åˆ°ç»„ä»¶å¹³å°" class="headerlink" title="ç»„ä»¶æäº¤åˆ°ç»„ä»¶å¹³å°"></a>ç»„ä»¶æäº¤åˆ°ç»„ä»¶å¹³å°</h6><p>é€šè¿‡ath widget-publishæŒ‡ä»¤å°†ç»„ä»¶æäº¤åˆ°ç»„ä»¶å¹³å°ï¼Œç»„ä»¶å¹³å°ä¼šå¯¹ç»„ä»¶æºç è¿›è¡Œç¼–è¯‘ï¼Œå°†ç»„ä»¶åç§°md5ã€ç»„ä»¶å½’ç±»ä»¥åŠç»„ä»¶ç‰ˆæœ¬è®°å½•ç­‰ç­‰ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/ath_wp_process.jpg" alt="ç»„ä»¶å‘å¸ƒ"></p>
<h6 id="ä»ç»„ä»¶å¹³å°ä¸Šä¸‹è½½ç»„ä»¶"><a href="#ä»ç»„ä»¶å¹³å°ä¸Šä¸‹è½½ç»„ä»¶" class="headerlink" title="ä»ç»„ä»¶å¹³å°ä¸Šä¸‹è½½ç»„ä»¶"></a>ä»ç»„ä»¶å¹³å°ä¸Šä¸‹è½½ç»„ä»¶</h6><p>é€šè¿‡ath widget-loadæŒ‡ä»¤å°†ç»„ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå½“æœ¬åœ°æ„å»ºå·¥å…·å‘ç»„ä»¶å¹³å°å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šå¸¦ä¸Šç»„ä»¶åç§°ï¼Œç»„ä»¶å¹³å°ä¼šå°†æºç è¿›è¡Œç¼–è¯‘ï¼Œå°†ç»„ä»¶åç§°é‡å‘½åï¼Œå¹¶ä¸”ç›¸åº”åœ°æ›¿æ¢æºç ä¸­çš„ç»„ä»¶åç§°ï¼ŒåŒæ—¶è®°å½•ç»„ä»¶çš„è¢«å¼•ç”¨è®°å½•ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/ath_wl_process.jpg" alt="ç»„ä»¶ä¸‹è½½"></p>
<h5 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h5><p>æƒé™æ§åˆ¶ï¼Œé¡¹ç›®ä¸­å­˜åœ¨å…¬å…±ç»„ä»¶æ¨¡å—ï¼Œå…¬å…±ç»„ä»¶æ¯”è¾ƒç¨³å®šï¼Œæ¯”å¦‚è¯´è½®æ’­ç»„ä»¶ã€é€‰é¡¹å¡ç»„ä»¶ç­‰ç­‰ï¼Œè¿™éƒ¨åˆ†ä»£ç ä¸€èˆ¬æ¯”è¾ƒå°‘å˜åŠ¨ï¼Œå¯ç”±å°‘éƒ¨åˆ†äººæ¥æ›´æ–°å’Œç»´æŠ¤ï¼Œæ‰€ä»¥åŠ å…¥äº†æƒé™æ§åˆ¶æœºåˆ¶ï¼Œä¿è¯å…¬å…±ç»„ä»¶çš„ç¨³å®šæ€§ã€‚</p>
<h4 id="é¡¹ç›®ç®¡ç†"><a href="#é¡¹ç›®ç®¡ç†" class="headerlink" title="é¡¹ç›®ç®¡ç†"></a>é¡¹ç›®ç®¡ç†</h4><p>æˆ‘ä»¬åœ¨ä½¿ç”¨æœ¬åœ°æ„å»ºå·¥å…·æ—¶ï¼Œéœ€è¦é…ç½®å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸»æœºä¿¡æ¯ã€é€‰æ‹©æ¨¡ç‰ˆç­‰ï¼Œåœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸‹æœ‰äº›ä¸ç›´è§‚ã€‚ä¸ºäº†ç®€åŒ–è¿™ä¸ªæ“ä½œï¼Œç®¡ç†å¹³å°æä¾›äº†é¡¹ç›®åˆ›å»ºçš„åŠŸèƒ½ï¼ŒåŒæ—¶æä¾›äº†æ¨¡ç‰ˆåˆ›å»ºçš„åŠŸèƒ½ã€‚</p>
<p><img src="//misc.aotu.io/luckyadam/athena/ath_app_online.jpg" alt="é¡¹ç›®ç®¡ç†"></p>
<p>åœ¨é¡¹ç›®ä¿¡æ¯ã€æ¨¡å—ä¿¡æ¯ä»¥åŠç»„ä»¶ä¿¡æ¯å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œä¸ºäº†ç¬¬ä¸€æ—¶é—´èƒ½å¤Ÿé€šçŸ¥é¡¹ç›®æˆå‘˜æ›´æ–°ï¼ŒåŠ å…¥äº†æ¶ˆæ¯é€šçŸ¥çš„åŠŸèƒ½ï¼Œç›®å‰é€šè¿‡å‘é€é‚®ä»¶çš„æ–¹å¼ï¼ŒåæœŸå¯ä»¥åŠ å…¥å¾®ä¿¡æé†’çš„åŠŸèƒ½ã€‚</p>
<h4 id="æŠ€æœ¯é€‰å‹-1"><a href="#æŠ€æœ¯é€‰å‹-1" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h4><p>ç®¡ç†å¹³å°å‰ç«¯é‡‡ç”¨React+Reduxçš„æ–¹å¼ï¼Œåç«¯é‡‡ç”¨Express+MongoDBï¼Œæ•´ä½“æŠ€æœ¯é€‰å‹å¦‚ä¸‹ï¼š</p>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_tech2.jpg" alt="æŠ€æœ¯é€‰å‹"></p>
<h3 id="å‡æ•°æ®æœåŠ¡"><a href="#å‡æ•°æ®æœåŠ¡" class="headerlink" title="å‡æ•°æ®æœåŠ¡"></a>å‡æ•°æ®æœåŠ¡</h3><h4 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h4><p>åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦å‰åç«¯è”è°ƒï¼Œä½†æ˜¯åœ¨é¡¹ç›®å¼€å§‹ä¹‹åˆï¼Œå¾ˆå¤šæ¥å£å¹¶æ²¡æœ‰æä¾›ï¼Œåœ¨ä»¥å‰çš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œéœ€è¦ç­‰å¾…åç«¯æä¾›æ¥å£æˆ–è€…è‡ªå·±å…ˆå®šä¹‰æ¥å£ï¼Œå‰ç«¯å¼€å‘çš„è¿›åº¦å¯èƒ½ä¼šå—å½±å“ã€‚</p>
<h4 id="Mockæ•°æ®å¹³å°"><a href="#Mockæ•°æ®å¹³å°" class="headerlink" title="Mockæ•°æ®å¹³å°"></a>Mockæ•°æ®å¹³å°</h4><p>ä¸ºäº†ä¸å½±å“å‰ç«¯å¼€å‘çš„è¿›åº¦ï¼Œæˆ‘ä»¬æ­å»ºäº†Mockæ•°æ®å¹³å°ï¼Œé€šè¿‡ä¸åç«¯åå•†æ•°æ®æ ¼å¼ï¼Œè‡ªå®šä¹‰æ•°æ®æ¥å£ï¼Œè¿™æ ·å­å°±å¯ä»¥åšåˆ°å‰åç«¯åˆ†ç¦»ï¼Œè®©å‰ç«¯ç‹¬ç«‹äºåç«¯è¿›è¡Œå¼€å‘ã€‚</p>
<p>Mockæ•°æ®å¹³å°åŸºäºmockjsæ­å»ºè€Œæˆï¼Œé€šè¿‡ç®€å•çš„mockè¯­æ³•æ¥ç”Ÿæˆæ•°æ®ã€‚</p>
<p>Mockæ•°æ®å¹³å°ç›®å‰æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®ï¼Œä½¿ä¹‹ç¬¦åˆå„ç§åœºæ™¯ï¼›</li>
<li>ç”Ÿæˆjsonæ•°æ®æ¥å£ï¼Œæ”¯æŒCORSä»¥åŠjsonpã€‚</li>
</ol>
<p><img src="//misc.aotu.io/luckyadam/athena/athena_mock.jpg" alt="Mockæ•°æ®å¹³å°"></p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>æœ¬æ¬¡åˆ†äº«é¦–å…ˆè®²è¿°äº†æˆ‘ä»¬åœ¨ä¸šåŠ¡è†¨èƒ€ã€äººå‘˜ä¸æ–­å¢åŠ çš„èƒŒæ™¯ä¸‹é‡åˆ°çš„é¡¹ç›®å¼€å‘ä¸Šçš„é—®é¢˜ï¼Œå¹¶æå‡ºäº†æˆ‘ä»¬è‡ªå·±å¯¹äºè¿™äº›é—®é¢˜æ€è€ƒæ€»ç»“åå¾—å‡ºçš„è§£å†³æ–¹æ¡ˆä¸æ€è·¯ï¼Œæœ€åäº§å‡ºé€‚åˆæˆ‘ä»¬å›¢é˜Ÿã€ä¸šåŠ¡çš„å¼€å‘å·¥å…·â€”â€” <a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>ã€‚å¸Œæœ›æˆ‘ä»¬çš„æ–¹æ¡ˆèƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€å®šçš„å€Ÿé‰´ä½œç”¨ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;éšç€äº’è”ç½‘çš„å‘å±•ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ä¹Ÿæ—¥ç›Šå˜å¾—æ›´åŠ å¤æ‚ä¸”å¤šæ ·åŒ–èµ·æ¥ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿä¸å†åªæ˜¯åšç®€å•çš„é¡µé¢å¼€å‘è¿™ä¹ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦é¢å¯¹çš„ååˆ†å¤æ‚çš„ç³»ç»Ÿæ€§é—®é¢˜ï¼Œä¾‹å¦‚ï¼Œä¸šåŠ¡æ„ˆæ¥æ„ˆå¤æ‚ï¼Œæˆ‘ä»¬è¦å¦‚ä½•æ¸…æ™°åœ°æ¢³ç†ï¼›å›¢é˜Ÿäººå‘˜æ„ˆæ¥æ„ˆå¤šï¼Œæˆ‘ä»¬è¦å¦‚
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Front-end" scheme="https://aotu.io/tags/Front-end/"/>
    
      <category term="Engineering" scheme="https://aotu.io/tags/Engineering/"/>
    
  </entry>
  
  <entry>
    <title>æ‹¥æŠ±Webè®¾è®¡æ–°è¶‹åŠ¿ï¼šSVG Spriteså®è·µåº”ç”¨</title>
    <link href="https://aotu.io/notes/2016/07/09/SVG-Symbol-component-practice/"/>
    <id>https://aotu.io/notes/2016/07/09/SVG-Symbol-component-practice/</id>
    <published>2016-07-09T10:01:17.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>éšç€ç§»åŠ¨äº’è”ç½‘çš„åˆ°æ¥ï¼Œå„ç§é«˜æ¸…å±å¹•ç§»åŠ¨è®¾å¤‡çš„å±‚å‡ºä¸ç©·ï¼Œå¯¼è‡´H5åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡<code>retina</code>å±å¹•ä¸‹ç»å¸¸ä¼šé‡åˆ°å›¾æ ‡ä¸æ¸…æ™°çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†è§£å†³å±å¹•åˆ†è¾¨ç‡å¯¹å›¾æ ‡å½±å“çš„é—®é¢˜ï¼Œé€šå¸¸é‡‡ç”¨CSS Spriteï¼ŒIcon Fontï¼ŒCSS Iconä»¥åŠSVGä»¥é€‚åº”@x1å±ã€@2å±ã€@3å±ï¼Œç›¸å¯¹æ¯”è¾ƒè€Œè¨€SVGçŸ¢é‡æ€§ã€ç¼©æ”¾æ— æŸç­‰è¯¸å¤šä¼˜ç‚¹ï¼Œæ›´åº”å—å‰ç«¯è®¾è®¡å¸ˆçš„é’çï¼Œå¯åœ¨è®¸å¤šå…¬å¸çš„ç§»åŠ¨é¡¹ç›®åº”ç”¨ä¸­å´å¾ˆé²œè§ï¼Œç©¶å…¶ä¸»å› åœ¨äºSVGå¼€å‘å­¦ä¹ æˆæœ¬æ¯”è¾ƒé«˜ä»¥åŠåœ¨ç»˜åˆ¶çš„æ€§èƒ½ä¸Šæ¯”PNGè¦å·®ã€‚æ­¤ç¯‡æ–‡ç« å°†ä»SVGå¿«é€Ÿå¯¼å‡ºåˆ°SVGã€SVG Symbolç»„ä»¶åŒ–åœ¨é¡¹ç›®ä¸­å®æˆ˜è¿›è¡Œè®²è§£ï¼Œå¹¶æä¾›SVG Symbolå¿«é€Ÿå¯¼å‡ºå·¥å…·ï¼Œæ•™ä½ å¦‚ä½•æé«˜SVGå¼€å‘æ•ˆç‡å‡å°‘æˆæœ¬ã€‚</p>
<h2 id="SVGç®€ä»‹"><a href="#SVGç®€ä»‹" class="headerlink" title="SVGç®€ä»‹"></a>SVGç®€ä»‹</h2><p>SVGæ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†çš„çŸ¢é‡å›¾å½¢è¯­è¨€ï¼Œä½¿ç”¨<code>svg</code>æ ¼å¼æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ä»£ç æ¥æç»˜å›¾åƒï¼Œå¯ä»¥ç”¨ä»»ä½•æ–‡å­—å¤„ç†å·¥å…·æ‰“å¼€<code>svg</code>å›¾åƒï¼Œé€šè¿‡æ”¹å˜éƒ¨åˆ†ä»£ç æ¥ä½¿å›¾åƒå…·æœ‰äº¤äº’åŠŸèƒ½ï¼Œå¹¶å¯ä»¥éšæ—¶æ’å…¥åˆ°HTMLä¸­é€šè¿‡æµè§ˆå™¨æ¥æµè§ˆã€‚</p>
<h3 id="SVGä¼˜ç¼ºç‚¹ï¼š"><a href="#SVGä¼˜ç¼ºç‚¹ï¼š" class="headerlink" title="SVGä¼˜ç¼ºç‚¹ï¼š"></a>SVGä¼˜ç¼ºç‚¹ï¼š</h3><table>
<thead>
<tr>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹ </th>
</tr>
</thead>
<tbody>
<tr>
<td>1.ç¼©æ”¾æ— æŸè¿˜åŸï¼Œæ˜¾ç¤ºæ¸…æ™°</td>
<td>1.SVGåœ¨ç»˜åˆ¶çš„æ€§èƒ½ä¸Šæ¯”PNGè¦å·®</td>
</tr>
<tr>
<td>2.è¯­ä¹‰æ€§è‰¯å¥½</td>
<td>2.å±€é™æ€§ï¼Œå¯¹åº”å•è‰²æˆ–æ™®é€šæ¸å˜æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¯¹ä¸è§„åˆ™çš„æ¸å˜ä»¥åŠç‰¹æ•ˆå åŠ æ•ˆæœæ˜¾ç¤ºä¸å…¨</td>
</tr>
<tr>
<td>3.å¯ç”¨CSSæ§åˆ¶å›¾æ ‡æ ·å¼ä»¥åŠåŠ¨ç”»</td>
<td>3.å…¼å®¹æ€§ç¨å·®ï¼Œandroid4.1æ‰å¼€å§‹æ”¯æŒ</td>
</tr>
<tr>
<td>4.å‡å°‘httpè¯·æ±‚</td>
<td>4.å­¦ä¹ åº”ç”¨æˆæœ¬è¾ƒé«˜</td>
</tr>
</tbody>
</table>
<h3 id="PSï¼šSVG-ä¸ºä»€ä¹ˆæ²¡æœ‰æ›¿ä»£-iconfontï¼Ÿ"><a href="#PSï¼šSVG-ä¸ºä»€ä¹ˆæ²¡æœ‰æ›¿ä»£-iconfontï¼Ÿ" class="headerlink" title="PSï¼šSVG ä¸ºä»€ä¹ˆæ²¡æœ‰æ›¿ä»£ iconfontï¼Ÿ"></a>PSï¼šSVG ä¸ºä»€ä¹ˆæ²¡æœ‰æ›¿ä»£ iconfontï¼Ÿ</h3><p>1.PC ç«¯ SVG æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå› æ­¤ PC ç«¯è¿˜æ˜¯ç”¨ iconfont æ¯”è¾ƒé è°±ã€‚é‚£ä¹ˆï¼Œä¸å…¶ä¸ºç§»åŠ¨ç«¯å¤šå¼„ä¸€å¥— SVG æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å…¬ç”¨åŒä¸€å¥— iconfont åº“ï¼Ÿæˆæœ¬é—®é¢˜ã€‚</p>
<p>2.çŸ¥é“ SVG Sprite çš„äººä¸å¤šï¼Œè€Œ iconfont ä¿¨ç„¶æˆä¸ºå‰ç«¯é¢è¯•å¿…è€ƒé¢˜äº†ã€‚</p>
<p>3.æŠ›å¼€å…¼å®¹ï¼Œå†å°±æ˜¯SVGçš„å±€é™æ€§:å•è‰²æˆ–çº¿æ€§æ¸å˜(ä»å·¦å‘å³ç¬”ç›´è¿›è¡Œæ¸å˜)ï¼Œå¾„å‘æ¸å˜(ä»å†…åˆ°å¤–è¿›è¡Œåœ†å½¢æ¸å˜)éƒ½æ²¡é—®é¢˜ã€ä½†æ˜¯ä¸è§„åˆ™çš„æ¸å˜ã€å°±å®ç°ä¸äº†äº†ã€‚</p>
<p>4.SVGæ¯”å›¾ç‰‡éº»çƒ¦ã€è®¾è®¡ç¨¿å¦‚æœä¸ä¼˜åŒ–èŠ‚ç‚¹ã€ç›´æ¥å¯¼å‡ºã€ä»£ç é‡é‚£ä¸ªæƒŠäººï¼Œç„¶è€Œaiå¯¼å‡ºçš„SVGä»£ç ã€èŠ‚ç‚¹ä¼˜åŒ–åï¼Œä¹Ÿä¸èƒ½ç›´æ¥ç”¨ã€è¿˜å¾—å°æ”¹ã€æ€»ä½“æ¥è¯´SVGæ¯”å›¾ç‰‡å¥½è€—è´¹åŠŸåŠ›å¤ªå¤šã€‚</p>
<h2 id="Webåº”ç”¨ä¸­SVGçš„ä½¿ç”¨æ–¹å¼"><a href="#Webåº”ç”¨ä¸­SVGçš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="Webåº”ç”¨ä¸­SVGçš„ä½¿ç”¨æ–¹å¼"></a>Webåº”ç”¨ä¸­SVGçš„ä½¿ç”¨æ–¹å¼</h2><h4 id="1-ä½¿ç”¨imgã€objectã€embed-æ ‡ç­¾ç›´æ¥å¼•ç”¨SVG"><a href="#1-ä½¿ç”¨imgã€objectã€embed-æ ‡ç­¾ç›´æ¥å¼•ç”¨SVG" class="headerlink" title="1.ä½¿ç”¨imgã€objectã€embed æ ‡ç­¾ç›´æ¥å¼•ç”¨SVG"></a>1.ä½¿ç”¨imgã€objectã€embed æ ‡ç­¾ç›´æ¥å¼•ç”¨SVG</h4><p>æ­¤æ–¹æ³•çš„ç¼ºç‚¹ä¸»è¦åœ¨äºæ¯ä¸ªå›¾æ ‡éƒ½éœ€å•ç‹¬ä¿å­˜æˆä¸€ä¸ª SVG æ–‡ä»¶ï¼Œä½¿ç”¨æ—¶å•ç‹¬è¯·æ±‚ï¼Œå¢åŠ äº†HTTPè¯·æ±‚æ•°é‡ã€‚</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">img</span> src=<span class="string">"http://www.w3school.com.cn/svg/rect1.svg"</span>  <span class="attribute">width</span>=<span class="string">"300"</span> /&gt;</div></pre></td></tr></table></figure>
<h4 id="2-Inline-SVGï¼Œç›´æ¥æŠŠSVGå†™å…¥-HTML-ä¸­"><a href="#2-Inline-SVGï¼Œç›´æ¥æŠŠSVGå†™å…¥-HTML-ä¸­" class="headerlink" title="2.Inline SVGï¼Œç›´æ¥æŠŠSVGå†™å…¥ HTML ä¸­"></a>2.Inline SVGï¼Œç›´æ¥æŠŠSVGå†™å…¥ HTML ä¸­</h4><p>Inline SVG ä½œä¸ºHTMLæ–‡æ¡£çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å•ç‹¬è¯·æ±‚ã€‚ä¸´æ—¶éœ€è¦ä¿®æ”¹æŸä¸ªå›¾æ ‡çš„å½¢çŠ¶ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†æ˜¯Inline SVGä½¿ç”¨ä¸Šæ¯”è¾ƒç¹çï¼Œéœ€è¦åœ¨é¡µé¢ä¸­æ’å…¥ä¸€å¤§å—SVGä»£ç ä¸é€‚åˆæ‰‹å†™ï¼Œå›¾æ ‡å¤ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;svg <span class="built_in">width</span>=<span class="string">"100%"</span> <span class="built_in">height</span>=<span class="string">"100%"</span>&gt;</div><div class="line">        &lt;<span class="built_in">rect</span> x=<span class="string">"20"</span> y=<span class="string">"20"</span> <span class="built_in">width</span>=<span class="string">"250"</span> <span class="built_in">height</span>=<span class="string">"250"</span> style=<span class="string">"fill:#fecdddd;"</span>/&gt;</div><div class="line">    &lt;/svg&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<h4 id="3-SVG-Sprite"><a href="#3-SVG-Sprite" class="headerlink" title="3.SVG Sprite"></a>3.SVG Sprite</h4><p>è¿™é‡Œçš„SpriteæŠ€æœ¯ï¼Œç±»ä¼¼äºCSSä¸­çš„SpriteæŠ€æœ¯ã€‚å›¾æ ‡å›¾å½¢æ•´åˆåœ¨ä¸€èµ·ï¼Œå®é™…å‘ˆç°çš„æ—¶å€™å‡†ç¡®æ˜¾ç¤ºç‰¹å®šå›¾æ ‡ã€‚å…¶å®åŸºç¡€çš„SVG Spriteä¹Ÿåªæ˜¯å°†åŸæ¥çš„ä½å›¾æ”¹æˆäº†SVGè€Œå·²ï¼Œæ§åˆ¶SVGå¤§å°ã€é¢œè‰²éœ€è¦é‡æ–°åˆå¹¶SVGæ–‡ä»¶ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.icon-bg&#123;</div><div class="line">    <span class="built_in">display</span>: <span class="keyword">inline</span>-block;</div><div class="line">    <span class="built_in">width</span>: <span class="number">30</span>px;</div><div class="line">    <span class="built_in">height</span>: <span class="number">30</span>px;</div><div class="line">    <span class="built_in">background</span>: url(./res/svg-sprite-<span class="built_in">background</span>.svg);</div><div class="line">    <span class="built_in">background</span>-<span class="built_in">size</span>:<span class="number">100</span>% <span class="number">100</span>%;</div><div class="line">&#125;</div><div class="line">.icon-facebook-logo&#123;</div><div class="line">    <span class="built_in">background</span>-<span class="built_in">position</span>: <span class="number">0</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">.icon-earth&#123;</div><div class="line">    <span class="built_in">background</span>-<span class="built_in">position</span>: <span class="number">0</span> <span class="number">-30</span>px;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">&lt;span <span class="keyword">class</span>=<span class="string">"icon-bg icon-facebook-logo"</span>&gt;&lt;/span&gt;</div><div class="line">&lt;span <span class="keyword">class</span>=<span class="string">"icon-bg icon-earth"</span>&gt;&lt;/span&gt;</div></pre></td></tr></table></figure>
<h4 id="4-ä½¿ç”¨-SVG-ä¸­çš„-symbolï¼Œuse-å…ƒç´ æ¥åˆ¶ä½œSVG-Sprite"><a href="#4-ä½¿ç”¨-SVG-ä¸­çš„-symbolï¼Œuse-å…ƒç´ æ¥åˆ¶ä½œSVG-Sprite" class="headerlink" title="4.ä½¿ç”¨ SVG ä¸­çš„ symbolï¼Œuse å…ƒç´ æ¥åˆ¶ä½œSVG Sprite"></a>4.ä½¿ç”¨ SVG ä¸­çš„ symbolï¼Œuse å…ƒç´ æ¥åˆ¶ä½œSVG Sprite</h4><p>SVG Symbolsçš„ä½¿ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹Spriteçš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œé€šè¿‡<code>&lt;symbol&gt;</code>å…ƒç´ æ¥å¯¹å•ä¸ªSVGå…ƒç´ è¿›è¡Œåˆ†ç»„ï¼Œä½¿ç”¨<code>&lt;use&gt;</code>å…ƒç´ å¼•ç”¨å¹¶è¿›è¡Œæ¸²æŸ“ã€‚è¿™ç§æ–¹æ³•çš„è§£å†³äº†ä¸Šè¿°ä¸‰ç§æ–¹å¼å¸¦æ¥çš„å¼Šç«¯ï¼Œå°‘é‡çš„httpè¯·æ±‚ï¼Œå›¾æ ‡èƒ½è¢«ç¼“å­˜æ–¹ä¾¿å¤ç”¨ï¼Œæ¯ä¸ªSVGå›¾æ ‡å¯ä»¥æ›´æ”¹å¤§å°é¢œè‰²ï¼Œæ•´åˆã€ä½¿ç”¨ä»¥åŠç®¡ç†èµ·æ¥éå¸¸ç®€å•ã€‚</p>
<p>â‘ SVG Symbolsä½œä¸ºbodyçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ’å…¥åœ¨HTMLä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;svg style="width:<span class="number">0</span><span class="comment">; height:0; visibility:hidden;position:absolute;z-index:-1"&gt;</span></div><div class="line">        &lt;symbol viewBox="<span class="number">0 0 24 24</span>" id="heart"&gt;</div><div class="line">            &lt;path fill="#E86C60" d="M17,<span class="number">0</span>c-<span class="number">1.9,0-3</span>.<span class="number">7,0.8-5</span>,<span class="number">2.1C10.7</span>,<span class="number">0.8,8.9</span>,<span class="number">0,7,0C3</span>.<span class="number">1,0,0,3</span>.<span class="number">1,0,7c0</span>,<span class="number">6.4,10.9</span>,<span class="number">15.4,11.4</span>,<span class="number">15</span>.<span class="number">8</span> c<span class="number">0.2,0.2</span>,<span class="number">0.4,0.2</span>,<span class="number">0</span>.<span class="number">6,0.2s0</span>.<span class="number">4-0.1,0</span>.<span class="number">6-0.2C13</span>.<span class="number">1,22.4,24</span>,<span class="number">13</span>.<span class="number">4,24,7C24</span>,<span class="number">3.1,20.9</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">0</span>z"&gt;&lt;/path&gt;</div><div class="line">        &lt;/symbol&gt;</div><div class="line">    &lt;/svg&gt;</div><div class="line"></div><div class="line">    &lt;svg&gt;</div><div class="line">        &lt;use xlink:href="#heart"/&gt; </div><div class="line">    &lt;/svg&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>â‘¡ä½¿ç”¨å®Œæ•´è·¯å¾„å¼•ç”¨Iconï¼ˆæ­¤æ–¹æ³•æ¶‰åŠåˆ°è·¨åŸŸé—®é¢˜ï¼‰</p>
<p>å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼ŒåŒåŸŸå¯ä»¥ä½¿ç”¨ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    //è·¯å¾„å½¢å¼è¿›è¡Œè·å–icon</div><div class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"/asset/svg-symbols.svg#heart"</span>/&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">svg</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"/asset/svg-symbols.svg#heart"</span>/&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>â‘¢jsæ§åˆ¶SVGå†™å…¥bodyè¿›è¡Œå¼•ç”¨</p>
<p>æ¨èä½¿ç”¨ï¼Œæœ‰æ•ˆåˆ†ç¦»ç»“æ„å’Œå±•ç°ã€è§£å†³ç¼“å­˜ä»¥åŠè·¨åŸŸé—®é¢˜ã€‚</p>
<p>svg.js:<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var symbols = '&lt;svg style="width:<span class="number">0</span><span class="comment">; height:0; visibility:hidden;position:absolute;z-index:-1"&gt;</span></div><div class="line">        &lt;symbol viewBox="<span class="number">0 0 24 24</span>" id="heart"&gt;</div><div class="line">            &lt;path fill="#E86C60" d="M17,<span class="number">0</span>c-<span class="number">1.9,0-3</span>.<span class="number">7,0.8-5</span>,<span class="number">2.1C10.7</span>,<span class="number">0.8,8.9</span>,<span class="number">0,7,0C3</span>.<span class="number">1,0,0,3</span>.<span class="number">1,0,7c0</span>,<span class="number">6.4,10.9</span>,<span class="number">15.4,11.4</span>,<span class="number">15</span>.<span class="number">8</span> c<span class="number">0.2,0.2</span>,<span class="number">0.4,0.2</span>,<span class="number">0</span>.<span class="number">6,0.2s0</span>.<span class="number">4-0.1,0</span>.<span class="number">6-0.2C13</span>.<span class="number">1,22.4,24</span>,<span class="number">13</span>.<span class="number">4,24,7C24</span>,<span class="number">3.1,20.9</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">0</span>z"&gt;&lt;/path&gt;</div><div class="line">        &lt;/symbol&gt;</div><div class="line">    &lt;/svg&gt;'<span class="comment">;</span></div><div class="line">document.body.insertAdjacentHTML("afterBegin",symbols)</div></pre></td></tr></table></figure></p>
<p>svg.html:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    //è„šæœ¬éœ€åœ¨svg useå¼•ç”¨ä¹‹å‰å¼•å…¥</div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> = <span class="string">"/asset/svg.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#heart"</span>/&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="SVGå¿«é€Ÿå¯¼å‡º"><a href="#SVGå¿«é€Ÿå¯¼å‡º" class="headerlink" title="SVGå¿«é€Ÿå¯¼å‡º"></a>SVGå¿«é€Ÿå¯¼å‡º</h2><h3 id="SVGå¯¼å‡ºå·¥å…·ï¼š"><a href="#SVGå¯¼å‡ºå·¥å…·ï¼š" class="headerlink" title="SVGå¯¼å‡ºå·¥å…·ï¼š"></a>SVGå¯¼å‡ºå·¥å…·ï¼š</h3><ul>
<li>Photoshop CC 2015 ä»¥ä¸Šç‰ˆæœ¬å‡æ”¯æŒå¯¼å‡ºSVGåŠŸèƒ½</li>
<li>Adobe Illustrator å¯¼å‡º</li>
<li><a href="http://hackingui.com/design/export-photoshop-layer-to-svg/" target="_blank" rel="external">export-photoshop-layer-to-svg</a>åŸºäºphotoshopçš„SVGå¯¼å‡ºæ’ä»¶</li>
<li><a href="http://firetuts.com/export-svg-with-fireworks/" target="_blank" rel="external">export-svg-with-fireworks</a>åŸºäºfireworkçš„SVGå¯¼å‡ºæ’ä»¶</li>
</ul>
<h3 id="Photoshop-CC-2015-å¯¼å‡ºSVGä½¿ç”¨"><a href="#Photoshop-CC-2015-å¯¼å‡ºSVGä½¿ç”¨" class="headerlink" title="Photoshop CC 2015 å¯¼å‡ºSVGä½¿ç”¨"></a>Photoshop CC 2015 å¯¼å‡ºSVGä½¿ç”¨</h3><p>Pså¯ä»¥å¯¹çŸ¢é‡å›¾å±‚è¿›è¡Œå¯¼å‡ºï¼Œå³é€šè¿‡çŸ¢é‡å·¥å…·ç»˜åˆ¶æ‰€åœ¨å›¾å±‚æˆ–å›¾å±‚æ–‡ä»¶å¤¹è¿›è¡Œå¯¼å‡ºï¼Œè‹¥å¯¹ä¸æ˜¯çŸ¢é‡å›¾å½¢è¿›è¡Œå¯¼å‡ºï¼Œå¯èƒ½ä¼šå¼•èµ·é”™è¯¯æˆ–è€…å¯¼å‡ºçš„æ–‡ä»¶æ˜¯ä½å›¾ã€‚</p>
<p>SVGå¯¼å‡ºï¼Œå»ºè®®å›¾å½¢ä¸€å®šè¦æ’‘æ»¡æ•´ä¸ªç”»å¸ƒï¼Œè‹¥å­˜åœ¨é—´éš™ï¼Œç½‘é¡µä½¿ç”¨æ—¶å›¾æ ‡å±…ä¸­å¯¹é½å°±ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>1.æ‰¹é‡å¯¼å‡ºSVG<br>æ‰¹é‡å¯¼å‡ºSVGï¼Œåªéœ€åœ¨çŸ¢é‡å›¾å±‚æˆ–å¤±è½å›¾å±‚æ–‡ä»¶å¤¹ååæ·»åŠ ç›¸åº”æ ¼å¼åç¼€ï¼ˆå¦‚.svg)ï¼Œä¾æ¬¡ç‚¹å‡»èœå•â€œæ–‡ä»¶-&gt;ç”Ÿæˆ-&gt;å›¾åƒèµ„æºâ€ï¼Œç¡®è®¤è¯¥èœå•é¡¹å·²è¢«å‹¾é€‰ã€‚ä½†æ˜¯æ­¤æ–¹æ³•ä¼šæ ¹æ®iconå®é™…å¤§å°è¿›è¡Œå¯¼å‡ºï¼Œè‹¥iconå›¾æ ‡å­˜åœ¨å°æ•°å¯¼å‡ºå°±ä¸å¤ªé€‚ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»è°ƒèŠ‚ã€‚</p>
<p><img src="//misc.aotu.io/pfan123/hob/export.png" alt="export"></p>
<p>2.è®¾ç½®å¯¼å‡ºä¸ºå•ä¸ªå¯¼å‡º<br>è®¾ç½®å¯¼å‡ºä¸ºå•ä¸ªå¯¼å‡ºï¼Œé€‰ä¸­çŸ¢é‡å›¾å±‚å•å‡»å³é”®ï¼Œä¾æ¬¡ç‚¹å‡»â€œå¯¼å‡ºä¸º-&gt;è®¾ç½®å‚æ•°-&gt;å¯¼å‡ºâ€ï¼Œæ­¤æ–¹æ³•å¯ä»¥è®¾ç½®SVGçš„å›¾åƒå®é™…å¤§å°ï¼Œä»¥åŠç”»å¸ƒå¤§å°ã€‚</p>
<p>å¯¼å‡ºä¸ºï¼š</p>
<p><img src="//misc.aotu.io/pfan123/hob/export2.png" alt="export"></p>
<p>è®¾ç½®å¯¼å‡ºSVGå›¾åƒå®é™…å¤§å°ï¼Œä»¥åŠç”»å¸ƒå¤§å°ï¼š</p>
<p><img src="//misc.aotu.io/pfan123/hob/export1.png" alt="export"></p>
<h2 id="SVG-Symbolè‡ªåŠ¨åŒ–åˆå¹¶ç”Ÿæˆ"><a href="#SVG-Symbolè‡ªåŠ¨åŒ–åˆå¹¶ç”Ÿæˆ" class="headerlink" title="SVG Symbolè‡ªåŠ¨åŒ–åˆå¹¶ç”Ÿæˆ"></a>SVG Symbolè‡ªåŠ¨åŒ–åˆå¹¶ç”Ÿæˆ</h2><p>Photoshopå¯¼å‡ºæ¥çš„æ˜¯å•ä¸ªSVGæ–‡ä»¶ï¼Œéœ€è¦å°†è¿™äº›å•ä¸ªSVGæ–‡ä»¶è¿›è¡Œåˆå¹¶ç”Ÿäº§<code>symbol</code>çš„SVGï¼Œè¿™æ ·æ‰èƒ½é€šè¿‡<code>symbolï¼‹use</code>è¿›è¡Œå¼•ç”¨ã€‚å¯ä»¥ä½¿ç”¨æ‰‹å·¥åˆå¹¶ï¼Œæ¨èä½¿ç”¨å·¥å…·ï¼Œå®‰åˆ©ç»™å¤§å®¶ä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç†SVG Symbolsç”¨çš„glupæ’ä»¶<a href="https://github.com/Hiswe/gulp-svg-symbols" target="_blank" rel="external">gulp-svg-symbols</a>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥ä»¥ä¸€ä¸ªå®ä¾‹ä¸€æ­¥ä¸€æ­¥æ¥ä½¿ç”¨ä¸‹è¿™ä¸ªæ’ä»¶ã€‚</p>
<p>é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">assets</div><div class="line">   â”œâ”€â”€ svg   <span class="comment">//å­˜æ”¾pså¯¼å‡ºçš„å¤§é‡svgæ–‡ä»¶</span></div><div class="line">       â”œâ”€â”€ xxx<span class="selector-class">.svg</span></div><div class="line">       â”œâ”€â”€ xxx<span class="selector-class">.svg</span></div><div class="line">       â”œâ”€â”€ xxx<span class="selector-class">.svg</span></div><div class="line">   â”œâ”€â”€ out</div><div class="line">   â”œâ”€â”€ gulpfile<span class="selector-class">.js</span> </div><div class="line">   â”œâ”€â”€ package<span class="selector-class">.json</span> </div><div class="line">   â”œâ”€â”€ index.html</div></pre></td></tr></table></figure>
<p>å®‰è£…gulp-svg-symbolsæ’ä»¶,è‹¥æ²¡æœ‰é¢„å…ˆå®‰è£…gulpè¯·å…ˆè¡Œå®‰è£…:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="selector-tag">i</span> gulp-svg-symbols  --save</div></pre></td></tr></table></figure>
<p><code>gulpfile.js</code>å†™å…¥å¦‚ä¸‹æ‰§è¡Œä»»åŠ¡ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="string">'use strick'</span>;</div><div class="line"><span class="keyword">const</span> gulp = <span class="keyword">require</span>(<span class="string">"gulp"</span>);</div><div class="line"><span class="keyword">const</span> symbols = <span class="keyword">require</span>(<span class="string">"gulp-svg-symbols"</span>);</div><div class="line"></div><div class="line"><span class="comment">//è½¬æ¢svg</span></div><div class="line">gulp.task(<span class="string">'svg'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./svg/**'</span>)</div><div class="line">    .pipe(symbols())</div><div class="line">    .pipe(gulp.dest(<span class="string">'out/'</span>))</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»»åŠ¡å¯¼å‡ºsvg-symbolsï¼š<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp svg  <span class="comment">//outæ–‡ä»¶å¤¹ï¼Œç”Ÿæˆsvg-symbols.svgï¼Œsvg-symbols.cssï¼ˆæ­¤æ–‡ä»¶å¯¹åº”svgæ ·å¼ï¼ŒåŸºæœ¬æ— ç”¨ï¼‰</span></div></pre></td></tr></table></figure></p>
<h2 id="SVG-Symbolå¯è§†åŒ–å·¥å…·"><a href="#SVG-Symbolå¯è§†åŒ–å·¥å…·" class="headerlink" title="SVG Symbolå¯è§†åŒ–å·¥å…·"></a>SVG Symbolå¯è§†åŒ–å·¥å…·</h2><p>ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿæ‰¹é‡åˆæˆSVGå›¾æ ‡ç”Ÿæˆ SVG Symbolï¼Œæé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬å¼€å‘äº†ç®€æ˜“ç‰ˆçš„SVG Symbolå¯è§†åŒ–å·¥å…·<code>svg tool</code>ã€‚</p>
<h3 id="svg-toolä½¿ç”¨ï¼š"><a href="#svg-toolä½¿ç”¨ï¼š" class="headerlink" title="svg toolä½¿ç”¨ï¼š"></a>svg toolä½¿ç”¨ï¼š</h3><p>æ‰“å¼€åç•Œé¢</p>
<p><img src="//misc.aotu.io/pfan123/hob/svgtool.png" alt="export"></p>
<h4 id="ä½¿ç”¨èŒƒå›´ï¼š"><a href="#ä½¿ç”¨èŒƒå›´ï¼š" class="headerlink" title="ä½¿ç”¨èŒƒå›´ï¼š"></a>ä½¿ç”¨èŒƒå›´ï¼š</h4><p>ä¸»è¦æ”¯æŒå•å±‚ç»“æ„SVGè¿›è¡Œåˆå¹¶ç”Ÿäº§symbolï¼Œå¯¹äºå¤šå±‚ç»“æ„SVGåˆå¹¶æ³¨æ„æ‰‹åŠ¨ä¿®æ”¹å¯¹åº”é¢œè‰²ã€‚</p>
<h4 id="åŠŸèƒ½ï¼š"><a href="#åŠŸèƒ½ï¼š" class="headerlink" title="åŠŸèƒ½ï¼š"></a>åŠŸèƒ½ï¼š</h4><ul>
<li><p>1.æ”¯æŒæ‹–æ‹½æ–‡ä»¶å¤¹ï¼Œè‡ªåŠ¨éå†SVGæ–‡ä»¶åˆå¹¶ç”Ÿæˆsymbolæ–‡ä»¶ã€‚</p>
</li>
<li><p>2.æä¾›ä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼Œæ­£å¸¸æ¨¡å¼ã€ä¿®æ­£æ¨¡å¼ã€‚</p>
</li>
<li><p>3.å¯¹æ–‡ä»¶viewBoxå¤§å°ä¸ä¸ºæ•´è¿›è¡Œæç¤ºï¼Œå¯ä»¥é€‰æ‹©è‡ªåŠ¨ä¿®æ­£æ¨¡å¼ç³»ç»Ÿè‡ªåŠ¨æ”¾å¤§å¤„ç†ã€‚</p>
</li>
<li><p>4.å¯¼å‡ºsvg-symbol.svgã€svg-symbol.jsï¼Œå¯ç›´æ¥å¼•å…¥svg-symbol.jsæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>svg toolä¸‹è½½åœ°å€ï¼š</p>
<p>macï¼š<a href="http://jdc.jd.com/svg/svgtoolfile/svgtool-1.0.0.dmg" target="_blank" rel="external">http://jdc.jd.com/svg/svgtoolfile/svgtool-1.0.0.dmg</a></p>
<p>win32: <a href="http://jdc.jd.com/svg/svgtoolfile/svgtool-win32-ia32.zip" target="_blank" rel="external">http://jdc.jd.com/svg/svgtoolfile/svgtool-win32-ia32.zip</a></p>
<p>win64: <a href="http://jdc.jd.com/svg/svgtoolfile/svgtool-win32-ia32.zip" target="_blank" rel="external">http://jdc.jd.com/svg/svgtoolfile/svgtool-win32-x64.zip</a></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://io-meter.com/2014/07/20/replace-icon-fonts-with-svg/" target="_blank" rel="external">Web è®¾è®¡æ–°è¶‹åŠ¿: ä½¿ç”¨ SVG ä»£æ›¿ Web Icon Font</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=207863967&amp;idx=1&amp;sn=3d7b07d528f38e9f812e8df7df1e3322&amp;scene=4#wechat_redirect" target="_blank" rel="external">Androidå¾®ä¿¡ä¸Šçš„SVG</a></li>
<li><a href="https://isux.tencent.com/16292.html" target="_blank" rel="external">ä½¿ç”¨SVGä¸­çš„Symbolå…ƒç´ åˆ¶ä½œIcon</a></li>
<li><a href="http://www.cnblogs.com/dxy1982/tag/svg/" target="_blank" rel="external">çªè¢­HTML5ä¹‹SVG 2Då…¥é—¨</a></li>
<li><a href="http://css-tricks.com/icon-fonts-vs-svg/" target="_blank" rel="external">CSS Trick ä¸­æ€»ç»“çš„ Icon Fontä½¿ç”¨ç¼ºé™·</a></li>
<li><a href="https://jarevrygo.gitbooks.io/webbook/content/5-2-1svgli_jie_yu_yun_yong.html" target="_blank" rel="external">svgç†è§£ä¸è¿ç”¨</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;éšç€ç§»åŠ¨äº’è”ç½‘çš„åˆ°æ¥ï¼Œå„ç§é«˜æ¸…å±å¹•ç§»åŠ¨è®¾å¤‡çš„å±‚å‡ºä¸ç©·ï¼Œå¯¼è‡´H5åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡&lt;code&gt;retina&lt;/
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="svg" scheme="https://aotu.io/tags/svg/"/>
    
      <category term="svg symbol" scheme="https://aotu.io/tags/svg-symbol/"/>
    
      <category term="svg sprites" scheme="https://aotu.io/tags/svg-sprites/"/>
    
  </entry>
  
  <entry>
    <title>feWorkflow - ä½¿ç”¨electron, react, redux, immutableæ„å»ºæ¡Œé¢App</title>
    <link href="https://aotu.io/notes/2016/07/05/fe-workflow/"/>
    <id>https://aotu.io/notes/2016/07/05/fe-workflow/</id>
    <published>2016-07-05T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>15å¹´åˆåˆ›å»ºäº†é€‚ç”¨äºç›®å‰å›¢é˜Ÿçš„gulpå·¥ä½œæµï¼Œæ—¨åœ¨ä»¥ä¸€ä¸ªgulpfileæ¥æ“ä½œå’Œæ‰§è¡Œæ‰€æœ‰æ–‡ä»¶ç»“æ„ã€‚éšç€é¡¹ç›®ä¾èµ–æ»šé›ªçƒå¼çš„å¢é•¿ï¼Œæ‹‰å–npmåŒ…æˆäº†é…ç½®ä¸­æœ€éº»çƒ¦è€Œæå®¹æ˜“å‡ºé”™çš„ä¸€é¡¹ã€‚ä¸ºäº†è§£å†³é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°çš„ç§ç§é—®é¢˜ï¼Œ15å¹´åº•è‰è‰å®ç°äº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œç”¨nw.jsï¼ˆåŸºäºChromiumå’Œnode.jsçš„appæ‰§è¡Œå·¥å…·ï¼‰æ¡†æ¶æ¥ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„æ¡Œé¢åº”ç”¨<a href="http://whatifhappen.github.io/GulpUI-WX/" target="_blank" rel="external">gulp-ui</a>, æ‰€åšçš„æ“ä½œæ˜¯æ‰“åŒ…gulpfileå’Œæ‰€ä¾èµ–çš„æ‰€æœ‰node_modulesåœ¨ä¸€èµ·ï¼Œç„¶åç®€å•ç²—æš´çš„åœ¨appå†…éƒ¨æ‰§è¡Œgulpfileã€‚</p>
<a id="more"></a>
<p><a href="http://whatifhappen.github.io/GulpUI-WX/" target="_blank" rel="external">gulp-ui</a>åšå‡ºæ¥åå†å›¢é˜Ÿä¸­ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œä»¥å•ä¸ªé¡¹ç›®æ¥æ‰§è¡Œçš„æ–¹å¼ç¡®å®åœ¨ç»å¸¸å¤šé¡¹ç›®å¼€å‘çš„ä½¿ç”¨ç¯å¢ƒä¸­å¤šæœ‰ä¸ä¾¿ã€‚äºæ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œé‡å†™äº†æ•´ä¸ªä»£ç ç»“æ„ï¼Œå¼€å‘äº†ç°åœ¨çš„ç‰ˆæœ¬feWorkflow.</p>
<p><a href="http://whatifhappen.github.io/GulpUI-WX/" target="_blank" rel="external">feWorkflow</a>æ”¹ç”¨äº†electronåšä¸ºåº•å±‚ï¼Œä½¿ç”¨react, redux, immutableæ¡†æ¶åšuiå¼€å‘ï¼Œä»ç„¶åŸºäºè¿è¡Œgulpfileçš„æ–¹æ¡ˆï¼Œè¿™æ ·å¯ä»¥ä½¿æ¯ä¸ªä½¿ç”¨è‡ªå·±å›¢é˜Ÿçš„gulpå·¥ä½œæµå¿«é€Ÿæ¥å…¥å’Œè‡ªç”±è°ƒæ•´ã€‚</p>
<p><img src="https://sfault-image.b0.upaiyun.com/254/455/2544556661-577b5347d97a0_articlex" alt="feWorkflow"></p>
<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><h3 id="ä¸€é”®å¼å¼€å‘-å‹ç¼©"><a href="#ä¸€é”®å¼å¼€å‘-å‹ç¼©" class="headerlink" title="ä¸€é”®å¼å¼€å‘/å‹ç¼©"></a>ä¸€é”®å¼å¼€å‘/å‹ç¼©</h3><ul>
<li>lesså®æ—¶ç›‘å¬ç¼–è¯‘css</li>
<li>csså‰ç¼€è‡ªåŠ¨è¡¥å…¨</li>
<li>æ ¼å¼åŒ–htmlï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢srcæºç è·¯å¾„ä¸ºtc_idcå‘å¸ƒè·¯å¾„</li>
<li>å‹ç¼©å›¾ç‰‡(png|jpg|gif|svg)</li>
<li>å‹ç¼©æˆ–æ ¼å¼åŒ–jsï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢srcæºç è·¯å¾„ä¸ºtc_idcå‘å¸ƒè·¯å¾„</li>
<li>åŒæ­¥åˆ·æ–°æµè§ˆå™¨browserSync</li>
</ul>
<h2 id="æ¡†æ¶é€‰å‹"><a href="#æ¡†æ¶é€‰å‹" class="headerlink" title="æ¡†æ¶é€‰å‹"></a>æ¡†æ¶é€‰å‹</h2><h3 id="electron"><a href="#electron" class="headerlink" title="electron"></a>electron</h3><p>ä¸ NW.js ç›¸ä¼¼ï¼ŒElectron æä¾›äº†ä¸€ä¸ªèƒ½é€šè¿‡ JavaScript å’Œ HTML åˆ›å»ºæ¡Œé¢åº”ç”¨çš„å¹³å°ï¼ŒåŒæ—¶é›†æˆ Node æ¥æˆäºˆç½‘é¡µè®¿é—®åº•å±‚ç³»ç»Ÿçš„æƒé™ã€‚</p>
<p>ä½¿ç”¨nw.jsæ—¶é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè®¾ç½®å’Œapiæ¯”è¾ƒç¹çï¼Œäºæ˜¯æ”¹ç‰ˆè¿‡ç¨‹ç”¨å†å¼€å‘ä¾¿åˆ©æ€§ä¸Šçš„è€ƒè™‘è½¬ç”¨äº†electronã€‚</p>
<p>electronåº”ç”¨å¸ƒç½²éå¸¸ç®€å•ï¼Œå­˜æ”¾åº”ç”¨ç¨‹åºçš„æ–‡ä»¶å¤¹éœ€è¦å«åš <code>app</code> å¹¶ä¸”éœ€è¦æ”¾åœ¨ Electron çš„ èµ„æºæ–‡ä»¶å¤¹ä¸‹ï¼ˆåœ¨ macOS ä¸­æ˜¯æŒ‡ <code>Electron.app/Contents/Resources/</code>ï¼Œåœ¨ Linux å’Œ Windows ä¸­æ˜¯æŒ‡ <code>resources/</code>ï¼‰ å°±åƒè¿™æ ·ï¼š</p>
<p>macOS:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">electron/Electron.app/Contents/Resources/app/</div><div class="line">â”œâ”€â”€ package.json</div><div class="line">â”œâ”€â”€ main.js</div><div class="line">â””â”€â”€ index.html</div></pre></td></tr></table></figure>
<p>åœ¨ Windows å’Œ Linux ä¸­:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">electron/resources/app</div><div class="line">â”œâ”€â”€ package.json</div><div class="line">â”œâ”€â”€ main.js</div><div class="line">â””â”€â”€ index.html</div></pre></td></tr></table></figure>
<p>ç„¶åè¿è¡Œ <code>Electron.app</code> ï¼ˆæˆ–è€… Linux ä¸­çš„ <code>electron</code>ï¼ŒWindows ä¸­çš„ <code>electron.exe</code>ï¼‰, æ¥ç€ Electron å°±ä¼šä»¥ä½ çš„åº”ç”¨ç¨‹åºçš„æ–¹å¼å¯åŠ¨ã€‚</p>
<h5 id="ç›®å½•é‡Šä¹‰"><a href="#ç›®å½•é‡Šä¹‰" class="headerlink" title="ç›®å½•é‡Šä¹‰"></a>ç›®å½•é‡Šä¹‰</h5><p><code>package.json</code>ä¸»è¦ç”¨æ¥æŒ‡å®šappçš„åç§°ï¼Œç‰ˆæœ¬ï¼Œå…¥å£æ–‡ä»¶ï¼Œä¾èµ–æ–‡ä»¶ç­‰</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>    : <span class="string">"your-app"</span>,</div><div class="line">  <span class="attr">"version"</span> : <span class="string">"0.1.0"</span>,</div><div class="line">  <span class="attr">"main"</span>    : <span class="string">"main.js"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>main.js</code> åº”è¯¥ç”¨äºåˆ›å»ºçª—å£å’Œå¤„ç†ç³»ç»Ÿäº‹ä»¶ï¼Œå®˜æ–¹ä¹Ÿæ˜¯æ¨èä½¿ç”¨<code>es6</code>æ¥å¼€å‘ï¼Œå…¸å‹çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">'electron'</span>);</div><div class="line"><span class="comment">//å¼•å…¥appæ¨¡å—</span></div><div class="line"><span class="keyword">const</span> &#123;app&#125; = electron;</div><div class="line"><span class="comment">// å¼•å…¥çª—å£è§†å›¾</span></div><div class="line"><span class="keyword">const</span> &#123;BrowserWindow&#125; = electron;</div><div class="line"><span class="comment">//è®¾ç½®ä¸€ä¸ªå˜é‡</span></div><div class="line"><span class="keyword">let</span> mainWindow;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„çª—å£</span></div><div class="line">  mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;<span class="attr">width</span>: <span class="number">800</span>, <span class="attr">height</span>: <span class="number">600</span>&#125;);</div><div class="line"></div><div class="line">  <span class="comment">//åŠ è½½electronä¸»é¡µé¢</span></div><div class="line">  mainWindow.loadURL(<span class="string">`file://<span class="subst">$&#123;__dirname&#125;</span>/index.html`</span>);</div><div class="line"></div><div class="line">  <span class="comment">//æ‰“å¼€chromeå¼€å‘è€…å·¥å…·</span></div><div class="line">  mainWindow.webContents.openDevTools();</div><div class="line"></div><div class="line">  <span class="comment">//ç›‘å¬çª—å£å…³é—­çŠ¶æ€</span></div><div class="line">  mainWindow.on(<span class="string">'closed'</span>, () =&gt; &#123;</div><div class="line">    mainWindow = <span class="literal">null</span>;</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"><span class="comment">//å½“appåˆå§‹åŒ–å®Œæ¯•ï¼Œå¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çª—å£</span></div><div class="line">app.on(<span class="string">'ready'</span>, createWindow);</div><div class="line"></div><div class="line"><span class="comment">//ç›‘å¬appçª—å£å…³é—­çŠ¶æ€</span></div><div class="line">app.on(<span class="string">'window-all-closed'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">//mac osxä¸­åªæœ‰æ‰§è¡Œcommand+Qæ‰ä¼šé€€å‡ºappï¼Œå¦åˆ™ä¿æŒæ´»åŠ¨çŠ¶æ€</span></div><div class="line">  <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</div><div class="line">    app.quit();</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.on(<span class="string">'activate'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">//mac osxä¸­å†dockå›¾æ ‡ç‚¹å‡»æ—¶é‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£</span></div><div class="line">  <span class="keyword">if</span> (mainWindow === <span class="literal">null</span>) &#123;</div><div class="line">    createWindow();</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>index.html</code>åˆ™ç”¨æ¥è¾“å‡ºä½ çš„htmlï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    We are using node <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.node)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</div><div class="line">    Chrome <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.chrome)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</div><div class="line">    and Electron <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.electron)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>.</div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>electronå®˜æ–¹æä¾›äº†ä¸€ä¸ªå¿«é€Ÿå¼€å§‹çš„æ¨¡æ¿ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Clone the Quick Start repository</div><div class="line">$ git clone https://github.com/electron/electron-quick-start</div><div class="line"></div><div class="line"># Go into the repository</div><div class="line">$ cd electron-quick-start</div><div class="line"></div><div class="line"># Install the dependencies and run</div><div class="line">$ npm install &amp;&amp; npm start</div></pre></td></tr></table></figure>
<p>æ›´å¤šå…¥é—¨ä»‹ç»å¯ä»¥æŸ¥çœ‹è¿™é‡Œ<a href="https://github.com/electron/electron/blob/master/docs-translations/zh-CN/tutorial/quick-start.md" target="_blank" rel="external">Electronå¿«é€Ÿå…¥é—¨</a>.</p>
<hr>
<h3 id="React-ES6"><a href="#React-ES6" class="headerlink" title="React + ES6"></a>React + ES6</h3><p>Reactåšä¸ºä¸€ä¸ªç”¨æ¥æ„å»ºUIçš„JSåº“å¼€è¾Ÿäº†ä¸€ä¸ªç›¸å½“å¦ç±»çš„é€”å¾„ï¼Œå®ç°äº†å‰ç«¯ç•Œé¢çš„é«˜æ•ˆç‡é«˜æ€§èƒ½å¼€å‘ã€‚Reactçš„è™šæ‹ŸDOMä¸ä»…å¸¦æ¥äº†ç®€å•çš„UIå¼€å‘é€»è¾‘ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†ç»„ä»¶åŒ–å¼€å‘çš„æ€æƒ³ã€‚</p>
<p>ES6åšä¸ºjsçš„æ–°è§„èŒƒå¸¦æ¥äº†è®¸å¤šæ–°çš„å˜åŒ–ï¼Œä»ä»£ç çš„ç¼–å†™ä¸Šä¹Ÿå¸¦æ¥äº†è®¸å¤šçš„ä¾¿åˆ©æ€§ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„<code>react</code>æ¨¡å—ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//jsx</span></div><div class="line"><span class="keyword">var</span> HelloMessage = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">HelloMessage</span> <span class="attr">name</span>=<span class="string">"John"</span> /&gt;</span>, document.getElementById('root')));</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//å®é™…è¾“å‡º</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span>Hello John<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é€šè¿‡<code>React.createClass</code>åˆ›å»ºä¸€ä¸ª<code>react</code>æ¨¡å—ï¼Œä½¿ç”¨<code>render</code>å‡½æ•°è¿”å›è¿™ä¸ªæ¨¡å—ä¸­çš„å®é™…htmlæ¨¡æ¿ï¼Œç„¶åå¼•ç”¨<code>ReactDOM</code>çš„<code>render</code>å‡½æ•°ç”Ÿæˆåˆ°æŒ‡å®šçš„htmlæ¨¡å—ä¸­ã€‚è°ƒç”¨<code>HelloMessage</code>çš„æ–¹æ³•ï¼Œåˆ™æ˜¯å†™æˆä¸€ä¸ª<code>xhtml</code>çš„å½¢å¼<code>&lt;HelloMessage name=&quot;John&quot; /&gt;</code>ï¼Œå°†<code>name</code>é‡Œé¢çš„â€Johnâ€åšä¸ºä¸€ä¸ªå±æ€§å€¼ä¼ åˆ°<code>HelloMessage</code>ä¸­ï¼Œé€šè¿‡<code>this.props.name</code>æ¥è°ƒç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ä¸ªæ˜¯æœªç»ç¼–è¯‘çš„<code>jsx</code>æ–‡ä»¶ï¼Œä¸èƒ½å®é™…è¾“å‡ºåˆ°htmlä¸­ï¼Œå¦‚æœæƒ³è¦æœªç»ç¼–è¯‘ä½¿ç”¨<code>jsx</code>æ–‡ä»¶ï¼Œå¯ä»¥åœ¨<code>html</code>ä¸­å¼•ç”¨<code>babel</code>çš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello React!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/babel"</span>&gt;</span><span class="javascript"></span></div><div class="line">      ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">      );</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è‡ªä»<code>es6</code>æ­£å¼å‘å¸ƒåï¼Œ<code>react</code>ä¹Ÿæ”¹ç”¨äº†<code>babel</code>åšä¸ºç¼–è¯‘å·¥å…·ï¼Œä¹Ÿå› æ­¤è®¸å¤šå¼€å‘è€…å¼€å§‹å°†ä»£ç å¼€å‘é£æ ¼é¡¹<code>es6</code>è½¬å˜ã€‚</p>
<p>äºæ˜¯<code>React.createClass</code>çš„æ–¹æ³•è¢«å–ä»£ä¸ºes6ä¸­çš„æ‰©å±•ç±»å†™æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›è¯­æ³•æœ‰äº†ç»†å¾®çš„ä¸åŒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ES5çš„å†™æ³•</span></div><div class="line"><span class="keyword">var</span> HelloWorld = React.createClass(&#123;</div><div class="line">  <span class="attr">handleClick</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;...&#125;,</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;...&#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//ES6åŠä»¥ä¸Šå†™æ³•</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  handleClick(e) &#123;...&#125;</div><div class="line">  render() &#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨feWorkflowä¸­åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨ES6çš„å†™æ³•åšä¸ºå¼€å‘, ä¾‹å¦‚æœ€ç»ˆè¾“å‡ºçš„containeræ¨¡å—ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ListFolder <span class="keyword">from</span> <span class="string">'./list/list'</span>;</div><div class="line"><span class="keyword">import</span> Dropzone <span class="keyword">from</span> <span class="string">'./layout/dropzone'</span>;</div><div class="line"><span class="keyword">import</span> ContainerEmpty <span class="keyword">from</span> <span class="string">'./container-empty'</span>;</div><div class="line"><span class="keyword">import</span> ContainerFt <span class="keyword">from</span> <span class="string">'./layout/container-ft'</span>;</div><div class="line"><span class="keyword">import</span> Aside <span class="keyword">from</span> <span class="string">'./layout/aside'</span>;</div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Container = <span class="function">(<span class="params">&#123; lists &#125;</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"container"</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"container-bd"</span>&gt;</span></div><div class="line">      &#123;lists.size ? <span class="tag">&lt;<span class="name">ListFolder</span> /&gt;</span> : <span class="tag">&lt;<span class="name">ContainerEmpty</span> /&gt;</span>&#125;</div><div class="line">      <span class="tag">&lt;<span class="name">Dropzone</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ContainerFt</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Aside</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">states</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">lists</span>: states.lists</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(Container);</div></pre></td></tr></table></figure>
<p>importåšä¸ºES6çš„å¼•å…¥æ–¹å¼ï¼Œæ¥å–ä»£commonJSçš„requireæ¨¡å¼ï¼Œç­‰åŒäº</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ListFoder = <span class="built_in">require</span>(<span class="string">'./list/list'</span>);</div></pre></td></tr></table></figure>
<p>è¾“å‡ºä»<code>module.export = Container;</code> æ›¿æ¢æˆ<code>export default Container;</code></p>
<p>è¿™ç§å†™æ³•å…¶å®ç­‰åŒäºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ES5å†™æ³•</span></div><div class="line"><span class="keyword">var</span> Container = React.createClass(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </div><div class="line">    ...</div><div class="line">    &#123;<span class="keyword">this</span>.props.lists.size ? <span class="xml"><span class="tag">&lt;<span class="name">ListFolder</span> /&gt;</span> : <span class="tag">&lt;<span class="name">ContainerEmpty</span> /&gt;</span>&#125;</span></div><div class="line">    ...</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>{ lists }</code>çš„å†™æ³•ç¼–è¯‘æˆES5çš„å†™æ³•ç­‰åŒäºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Container = <span class="function"><span class="keyword">function</span> <span class="title">Container</span>(<span class="params">_ref</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> lists = _ref.lists;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç›¸å½“äºå‡å°‘äº†éå¸¸å¤šçš„èµ‹å€¼æ“ä½œ, æå¤§äº†å‡å°‘äº†å¼€å‘çš„å·¥ä½œé‡ã€‚</p>
<hr>
<h3 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h3><p>ES6ä¸­ä»‹ç»äº†ä¸€ä¸‹ç¼–è¯‘ä¹‹åçš„ä»£ç ï¼Œè€Œæ¯ä¸ªæ–‡ä»¶é‡Œå…¶å®ä¹Ÿå¹¶æ²¡æœ‰importå¿…é¡»çš„reactæ¨¡å—ï¼Œå…¶å®éƒ½æ˜¯é€šè¿‡Webpackè¿™ä¸ªå·¥å…·æ¥æ‰§è¡Œäº†ç¼–è¯‘å’Œæ‰“åŒ…ã€‚åœ¨webpackä¸­å¼•å…¥äº†<code>babel-loader</code>æ¥ç¼–è¯‘<code>react</code>å’Œ<code>es6</code>çš„ä»£ç ï¼Œå¹¶å°†cssé€šè¿‡<code>less-loader</code>,<code>css-loader</code>, <code>style-loader</code>è‡ªåŠ¨ç¼–è¯‘åˆ°htmlçš„styleæ ‡ç­¾ä¸­ï¼Œå†é€šè¿‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">  <span class="attr">React</span>: <span class="string">'react'</span></div><div class="line">&#125;),</div></pre></td></tr></table></figure>
<p>çš„å½¢å¼ï¼Œå°†reactç»„ä»¶æ³¨å†Œåˆ°æ¯ä¸ªjsæ–‡ä»¶ä¸­ï¼Œä¸éœ€å†é‡å¤å¼•ç”¨ï¼Œæœ€åæŠŠæ‰€æœ‰çš„jsæ¨¡å—ç¼–è¯‘æ‰“åŒ…è¾“å‡ºåˆ°<code>dist/bundle.js</code>ï¼Œå†htmlä¸­å¼•å…¥å³å¯ã€‚</p>
<p>æµç¨‹å›¾ï¼š</p>
<p><img src="https://segmentfault.com/img/bVyPyt" alt="wepback"></p>
<p>webpackéƒ¨åˆ†è®¾ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'source-map'</span>,</div><div class="line">  <span class="attr">entry</span>: [</div><div class="line">    <span class="string">'./src/index'</span></div><div class="line">  ],</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.join(__dirname, <span class="string">'dist'</span>),</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/dist/'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">target</span>: <span class="string">'atom'</span>,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">include</span>: path.join(__dirname, <span class="string">'src'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="built_in">require</span>.resolve(<span class="string">'babel-loader'</span>),</div><div class="line">        ...</div><div class="line">      &#125;,</div><div class="line">   ...</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  ...</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>webpackéœ€è¦è®¾ç½®å…¥å£æ–‡ä»¶<code>entry</code>ï¼Œåœ¨æ­¤æ˜¯å¼•å…¥äº†æºç æ–‡ä»¶å¤¹srcä¸­çš„<code>index.js</code>ï¼Œå’Œä¸€ä¸ªæˆ–å¤šä¸ªå‡ºå£æ–‡ä»¶<code>output</code>ï¼Œè¾“å‡ºdevtool<code>source-map</code>ä½¿å¾—æºä»£ç å¯è§ï¼Œè€Œéç¼–è¯‘åçš„ä»£ç ï¼Œç„¶ååˆ¶å®šæ‰€éœ€è¦çš„<code>loader</code>æ¥åšæ¨¡å—çš„ç¼–è¯‘ã€‚</p>
<p>ä¸<code>electron</code>ç›¸å…³çš„ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹æ˜¯ï¼Œå¿…é¡»æŒ‡å®š<code>target: atom</code>ï¼Œå¦åˆ™ä¼šå‡ºç°æ— æ³•resolve electron modulesçš„æŠ¥é”™æç¤ºã€‚</p>
<p>æ›´å¤šä»‹ç»å¯ä»¥å‚è€ƒ<a href="https://segmentfault.com/a/1190000002551952" target="_blank" rel="external">Webpack å…¥é—¨æŒ‡è¿·</a></p>
<p>feWorkflowé¡¹ç›®ä¸­é€‰ç”¨äº†<a href="https://github.com/gaearon/react-transform-hmr" target="_blank" rel="external">react-transform-hmr</a>åšä¸ºæ¨¡æ¿ï¼Œå·²ç»å†™å¥½äº†åŸºç¡€çš„<code>webpack</code>æ–‡ä»¶ï¼Œæ”¯æŒ<code>react</code>çƒ­åŠ è½½ï¼Œä¸å†éœ€è¦ç»å¸¸å»åˆ·æ–°electronï¼Œä¸è¿‡è¯¥ä½œè€…å·²ç»åœæ­¢ç»´æŠ¤è¿™ä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯æ¢å¤ç»´æŠ¤<code>react-hot-reload</code>ï¼Œç°åœ¨é‡æ–°å¼€å‘<a href="https://github.com/gaearon/react-hot-loader/pull/240" target="_blank" rel="external">React Hot Loader 3</a>, æœ‰å…´è¶£å¯ä»¥å»äº†è§£ä¸€ä¸‹ã€‚</p>
<hr>
<h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p>Reduxæ˜¯é’ˆå¯¹JavaScript appsçš„ä¸€ä¸ªå¯é¢„è§çš„stateå®¹å™¨ã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å†™ä¸€ä¸ªè¡Œä¸ºä¿æŒä¸€è‡´æ€§çš„åº”ç”¨ï¼Œå¯ä»¥è¿è¡Œå†ä¸åŒçš„ç¯å¢ƒä¸­ï¼ˆclientï¼Œserverï¼Œå’ŒåŸç”Ÿï¼‰ï¼Œå¹¶éå¸¸å®¹æ˜“æµ‹è¯•ã€‚</p>
<p>Redux å¯ä»¥ç”¨è¿™ä¸‰ä¸ªåŸºæœ¬åŸåˆ™æ¥æè¿°ï¼š</p>
<ol>
<li><p><strong>å•ä¸€æ•°æ®æº</strong> </p>
<p><strong>æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€ä¸ª object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> store = createStore(counter) <span class="comment">//åˆ›å»ºä¸€ä¸ªredux storeæ¥ä¿å­˜ä½ çš„appä¸­æ‰€æœ‰state</span></div><div class="line"></div><div class="line"><span class="comment">//å½“stateæ›´æ–°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ subscribe()æ¥ç»‘å®šç›‘å¬æ›´æ–°UIï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸ä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯ä¼šç”¨viewå±‚ç»‘å®šåº“ï¼ˆç±»ä¼¼react-reduxç­‰)ã€‚</span></div><div class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span></div><div class="line">  <span class="built_in">console</span>.log(store.getState()) <span class="comment">//æŠ›å‡ºæ‰€æœ‰æ•°æ®</span></div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p><strong>Stateæ˜¯åªè¯»çš„</strong></p>
<p>æƒŸä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚</p>
<p>æ‰€æœ‰çš„ä¿®æ”¹éƒ½è¢«é›†ä¸­åŒ–å¤„ç†ï¼Œä¸”ä¸¥æ ¼æŒ‰ç…§ä¸€ä¸ªæ¥ä¸€ä¸ªçš„é¡ºåºæ‰§è¡Œ. è€Œæ‰§è¡Œçš„æ–¹æ³•æ˜¯è°ƒç”¨<code>dispatch</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">store.dispatch(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'COMPLETE_TODO'</span>,</div><div class="line">  <span class="attr">index</span>: <span class="number">1</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹</strong></p>
<p>ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ <code>reducers</code>ã€‚</p>
<p><code>Reducer</code> åªæ˜¯ä¸€äº›çº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶å…ˆå‰çš„ <code>state</code> å’Œ <code>action</code>ï¼Œå¹¶è¿”å›æ–°çš„ <code>state</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</div><div class="line">    <span class="keyword">return</span> state + <span class="number">1</span></div><div class="line">  <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</div><div class="line">    <span class="keyword">return</span> state - <span class="number">1</span></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>reduxæµç¨‹å›¾ï¼š</p>
<p><img src="https://segmentfault.com/img/bVyPyi" alt="redux"></p>
<hr>
<h3 id="React-Redux"><a href="#React-Redux" class="headerlink" title="React-Redux"></a>React-Redux</h3><p>reduxåœ¨reactä¸­åº”ç”¨è¿˜éœ€è¦åŠ è½½<code>react-redux</code>æ¨¡å—ï¼Œå› ä¸º<code>store</code>ä¸ºå•ä¸€stateç»“æ„å¤´ï¼Œæˆ‘ä»¬ä»…éœ€è¦åœ¨å…¥å£å¤„è°ƒç”¨react-reduxçš„<code>Provider</code>æ–¹æ³•æŠ›å‡º<code>store</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">Container</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œåœ¨containerçš„å†…éƒ¨éƒ½èƒ½æ¥æ”¶åˆ°<code>store</code>ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ“ä½œstoreçš„<code>reducer</code>. å½“æˆ‘ä»¬çš„reduceræ‹†åˆ†å¥½å¯¹åº”ç»™ä¸åŒçš„å­ç»„ä»¶ä¹‹åï¼Œreduxæä¾›äº†ä¸€ä¸ª<code>combineReducers</code>çš„æ–¹æ³•ï¼ŒæŠŠæ‰€æœ‰çš„<code>reducers</code>åˆå¹¶èµ·æ¥:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> lists <span class="keyword">from</span> <span class="string">'./list'</span>;</div><div class="line"><span class="keyword">import</span> snackbar <span class="keyword">from</span> <span class="string">'./snackbar'</span>;</div><div class="line"><span class="keyword">import</span> dropzone <span class="keyword">from</span> <span class="string">'./dropzone'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</div><div class="line">  lists,</div><div class="line">  snackbar,</div><div class="line">  dropzone,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ç„¶åé€šè¿‡<code>createStore</code>çš„æ–¹å¼é“¾æ¥<code>store</code>ä¸<code>reducer</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'../reducer/reducer'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(reducer);</div></pre></td></tr></table></figure>
<p>ä¸Šæ–‡ä»‹ç»<code>redux</code>çš„æ—¶å€™ä¹Ÿè¯´è¿‡ï¼Œ<strong>state</strong>æ˜¯åªè¯»çš„ï¼Œåªèƒ½é€šè¿‡actionæ¥æ“ä½œï¼ŒåŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ<code>dispatch</code>æ˜ å°„æˆä¸ºä¸€ä¸ªpropsä¼ å…¥Containerä¸­ã€‚</p>
<p>åœ¨å­æ¨¡å—ä¸­, åˆ™æŠŠè¿™ä¸ªstoreæ˜ å°„æˆreactçš„propsï¼Œå†ç”¨<code>connect</code>æ–¹æ³•ï¼ŒæŠŠstoreå’Œcomponenté“¾æ¥èµ·æ¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>; <span class="comment">//å¼•å…¥connectæ–¹æ³•</span></div><div class="line"><span class="keyword">import</span> &#123; addList &#125; <span class="keyword">from</span> <span class="string">'../../action/addList'</span>; <span class="comment">//ä»actionä¸­å¼•å…¥addListæ–¹æ³•</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> AddListBtn = <span class="function">(<span class="params">&#123; lists, addList &#125;</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">FloatingActionButton</span></span></span></div><div class="line">    <span class="attr">onClick</span>=<span class="string">&#123;(event)</span> =&gt; &#123;</div><div class="line">        addList('do something here');</div><div class="line">      return false;</div><div class="line">      &#125;);</div><div class="line">    &#125;&#125;</div><div class="line">  &gt;;</div><div class="line">);</div><div class="line">const mapStateToProps = (states) =&gt; (&#123;</div><div class="line">  //ä»state.listsè·å–æ•°æ®å­˜å‚¨åˆ°listsä¸­ï¼Œåšä¸ºå±æ€§ä¼ é€’ç»™AddListBtn</div><div class="line">  lists: states.lists</div><div class="line">&#125;);</div><div class="line"></div><div class="line">const mapDispatchToProps = (dispatch) =&gt; (&#123;</div><div class="line">  //å°†addListå‡½æ•°åšä¸ºå±æ€§ä¼ é€’ç»™AddListBtn</div><div class="line">  addList: (name, location) =&gt; dispatch(addList(name, location));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">//lists, addListåšä¸ºå±æ€§é“¾æ¥åˆ°Conta</div><div class="line">export default connect(mapStateToProps, mapDispatchToProps)(AddListBtn);</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå°±å®Œæˆäº†reduxä¸reactçš„äº¤äº’ï¼Œå¾ˆä¾¿æ·çš„ä»ä¸Šè€Œä¸‹æ“ä½œæ•°æ®ã€‚</p>
<hr>
<h3 id="immutable-js"><a href="#immutable-js" class="headerlink" title="immutable.js"></a>immutable.js</h3><p>Immutable Dataæ˜¯æŒ‡ä¸€æ—¦è¢«åˆ›é€ åï¼Œå°±ä¸å¯ä»¥è¢«æ”¹å˜çš„æ•°æ®ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨Immutable Dataï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„å»å¤„ç†ç¼“å­˜ã€å›é€€ã€æ•°æ®å˜åŒ–æ£€æµ‹ç­‰é—®é¢˜ï¼Œç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ã€‚</p>
<p>æ‰€ä»¥å½“å¯¹è±¡çš„å†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªæ–°çš„å¯¹è±¡è¿›æ¥æ—¶ï¼Œæˆ‘ä»¬å€¾å‘äºä¿æŒå¯¹è±¡å¼•ç”¨çš„ä¸å˜ã€‚è¿™ä¸ªå·¥ä½œæ­£æ˜¯æˆ‘ä»¬éœ€è¦å€ŸåŠ©Facebookçš„ <a href="https://github.com/facebook/immutable-js" target="_blank" rel="external">Immutable.js</a>æ¥å®Œæˆçš„ã€‚</p>
<blockquote>
<p>ä¸å˜æ€§æ„å‘³ç€æ•°æ®ä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½è¢«æ”¹å˜ï¼Œè¿™ä½¿å¾—åº”ç”¨å¼€å‘æ›´ä¸ºç®€å•ï¼Œé¿å…ä¿æŠ¤æ€§æ‹·è´ï¼ˆdefensive copyï¼‰ï¼Œå¹¶ä¸”ä½¿å¾—åœ¨ç®€å•çš„åº”ç”¨ é€»è¾‘ä¸­å®ç°å˜åŒ–æ£€æŸ¥æœºåˆ¶ç­‰ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> stateV1 = Immutable.fromJS(&#123;  </div><div class="line"><span class="attr">users</span>: [</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'Foo'</span> &#125;,</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'Bar'</span> &#125;</div><div class="line">]</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> stateV2 = stateV1.updateIn([<span class="string">'users'</span>, <span class="number">1</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="keyword">return</span> Immutable.fromJS(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Barbar'</span></div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">stateV1 === stateV2; <span class="comment">// false  </span></div><div class="line">stateV1.getIn([<span class="string">'users'</span>, <span class="number">0</span>]) === stateV2.getIn([<span class="string">'users'</span>, <span class="number">0</span>]); <span class="comment">// true  </span></div><div class="line">stateV1.getIn([<span class="string">'users'</span>, <span class="number">1</span>]) === stateV2.getIn([<span class="string">'users'</span>, <span class="number">1</span>]); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>feWorkflowé¡¹ç›®ä¸­ä½¿ç”¨æœ€å¤šçš„æ˜¯<code>List</code>æ¥åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œ<code>Map()</code>æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå†é€šè¿‡<code>set</code>çš„æ–¹æ³•æ¥æ›´æ–°æ•°ç»„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; List, <span class="built_in">Map</span> &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> syncFolder = List([</div><div class="line">  <span class="built_in">Map</span>(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'syncFromFolder'</span>,</div><div class="line">    <span class="attr">label</span>: <span class="string">'ä»ç›®å½•å¤åˆ¶'</span>,</div><div class="line">    <span class="attr">location</span>: <span class="string">''</span></div><div class="line">  &#125;),</div><div class="line">  <span class="built_in">Map</span>(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'syncToFolder'</span>,</div><div class="line">    <span class="attr">label</span>: <span class="string">'å¤åˆ¶åˆ°ç›®å½•'</span>,</div><div class="line">    <span class="attr">location</span>: <span class="string">''</span></div><div class="line">  &#125;)</div><div class="line">]);</div></pre></td></tr></table></figure>
<p>æ›´æ–°çš„æ—¶å€™ä½¿ç”¨<code>setIn</code>æ–¹æ³•ï¼Œä¼ é€’<code>Map</code>å¯¹è±¡çš„åºå·ï¼Œé€‰ä¸­<code>location</code>è¿™ä¸ªå±æ€§ï¼Œé€šè¿‡<code>action</code>ä¼ é€’è¿‡æ¥çš„æ–°å€¼<code>action.location</code>æ›´æ–°å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> <span class="string">'SET_SYNC_FOLDER'</span>:</div><div class="line">      <span class="keyword">return</span> state.setIn([<span class="string">'syncFolder'</span>, action.index, <span class="string">'location'</span>], action.location);</div></pre></td></tr></table></figure>
<h4 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨:"></a>æ•°æ®å­˜å‚¨:</h4><p><strong>å­˜ï¼š</strong></p>
<p>immutableçš„æ•°æ®å·²ç»ä¸æ˜¯å•çº¯çš„jsonæ•°æ®æ ¼å¼ï¼Œå½“æˆ‘ä»¬è¦åšjsonæ ¼å¼çš„æ•°æ®å­˜å‚¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>toJS()</code>æ–¹æ³•æŠ›å‡ºjså¯¹è±¡ï¼Œå¹¶é€šè¿‡<code>JSON.stringnify()</code>å°†jsæ•°æ®è½¬æ¢æˆjsonå­—ç¬¦ä¸²ï¼Œå­˜å…¥localstorageä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> saveState = <span class="function">(<span class="params">name = <span class="string">'state'</span>, state = <span class="string">'state'</span></span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">const</span> data = <span class="built_in">JSON</span>.stringify(state.toJS());</div><div class="line">    localStorage.setItem(name, data);</div><div class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'err'</span>, err);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å–ï¼š</strong></p>
<p>è¯»å–æœ¬åœ°çš„jsonæ ¼å¼æ•°æ®åï¼Œå½“éœ€è¦åŠ è½½è¿›é¡µé¢ï¼Œé¦–å…ˆéœ€è¦æŠŠè¿™æ®µjsonæ•°æ®è½¬æ¢ä¼šimmutable.jsæ•°æ®æ ¼å¼ï¼Œ<code>immutable</code>æä¾›äº†<code>fromJS()</code>æ–¹æ³•ï¼Œå°†jså¯¹è±¡å’Œæ•°ç»„è½¬æ¢æˆimmtableçš„<code>Maps</code>å’Œ<code>Lists</code>æ ¼å¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; fromJS, Iterable &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadState = <span class="function">(<span class="params">name = <span class="string">'setting'</span></span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">const</span> data = localStorage.getItem(name);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (data === <span class="literal">null</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">undefined</span>;</div><div class="line">    &#125;P</div><div class="line"></div><div class="line">    <span class="keyword">return</span> fromJS(<span class="built_in">JSON</span>.parse(data), (key, value) =&gt; &#123;</div><div class="line">      <span class="keyword">const</span> isIndexed = Iterable.isIndexed(value);</div><div class="line">      <span class="keyword">return</span> isIndexed ? value.toList() : value.toMap();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<hr>
<h2 id="åº”ç”¨ç¤ºä¾‹"><a href="#åº”ç”¨ç¤ºä¾‹" class="headerlink" title="åº”ç”¨ç¤ºä¾‹"></a>åº”ç”¨ç¤ºä¾‹</h2><p>ä¸Šæ–‡ä»‹ç»äº†æ•´ä¸ªfeWorkflowçš„UIæŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œç°åœ¨æ¥ä»‹ç»ä¸‹å®é™…ä¸Šgulpåœ¨è¿™é‡Œæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p><strong>æ€è·¯</strong></p>
<p>æˆ‘ä»¬çŸ¥é“<code>node</code>ä¸­è°ƒç”¨<code>child_process</code>çš„<code>exec</code>å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œgulpfile.jsæœ¬èº«ä¼šè°ƒç”¨ç¦»è‡ªèº«æœ€è¿‘çš„node_modulesï¼Œè€Œgulpæä¾›äº†APIå¯ä»¥é€šè¿‡flagçš„å½¢å¼(â€”cwd)æ¥æ‰§è¡Œä¸åŒçš„è·¯å¾„ã€‚ä»¥æ­¤ä¸ºæ€è·¯ï¼Œä»¥æœ€ç®€å•çš„æ–¹å¼ï¼Œåœ¨æŒ‰é’®ä¸Šç»‘å®šæ‰§è¡ŒçŠ¶æ€ï¼ˆdevæˆ–è€…buildï¼ŒåŒ…æ‹¬flagç­‰ï¼‰ï¼Œé€šè¿‡<code>exec</code>ç›´æ¥è¿è¡Œgulp file.js.</p>
<p><strong>å®ç°</strong></p>
<p>å½“æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨æ‰§è¡Œä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œä¸­åˆ™æ€æ‰è¿›ç¨‹ï¼Œå¦‚æœä¸åœ¨æ‰§è¡Œä¸­åˆ™é€šè¿‡<code>exec</code>æ‰§è¡Œå½“å‰æŒ‰é’®çŠ¶æ€çš„å‘½ä»¤ã€‚ç„¶åæ‰­è½¬æŒ‰é’®çš„çŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æŒ‰é’®ç‚¹å‡»ã€‚</p>
<p>å‘½ä»¤æ¨¡å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ListBtns = <span class="function">(<span class="params">&#123;btns, listId, listLocation, onProcess, cancelBuild, setSnackbar&#125;</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"btn-group btn-group__right"</span>&gt;</span></span></div><div class="line">    &#123;</div><div class="line">      btns.map((btn, i) =&gt; (</div><div class="line">        <span class="tag">&lt;<span class="name">RaisedButton</span></span></div><div class="line">          <span class="attr">key</span>=<span class="string">&#123;i&#125;</span></div><div class="line">          <span class="attr">className</span>=<span class="string">"btn"</span></div><div class="line">          <span class="attr">style</span>=<span class="string">&#123;style&#125;</span></div><div class="line">          <span class="attr">label</span>=<span class="string">&#123;btn.get(</span>'<span class="attr">name</span>')&#125;</div><div class="line">          <span class="attr">labelPosition</span>=<span class="string">"after"</span></div><div class="line">          <span class="attr">primary</span>=<span class="string">&#123;btn.get(</span>'<span class="attr">process</span>')&#125;</div><div class="line">          <span class="attr">secondary</span>=<span class="string">&#123;btn.get(</span>'<span class="attr">fail</span>')&#125;</div><div class="line">          <span class="attr">pid</span>=<span class="string">&#123;btn.get(</span>'<span class="attr">pid</span>')&#125;</div><div class="line">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt; &#123;</div><div class="line">            if (btn.get('process')) &#123;</div><div class="line">              kill(btn.get('pid'));</div><div class="line">            &#125; else &#123;</div><div class="line">              let child = exec(`gulp $&#123;btn.get('cmd')&#125; --cwd $&#123;listLocation&#125; $&#123;btn.get('flag')&#125; --gulpfile $&#123;cwd&#125;/gulpfile.js`,  &#123;</div><div class="line">                cwd</div><div class="line">              &#125;);</div><div class="line"></div><div class="line">              child.stderr.on('data', function (data) &#123;</div><div class="line">                let str = data.toString();</div><div class="line"></div><div class="line">                console.error('exec error: ' + str);</div><div class="line">                kill(btn.get('pid'));</div><div class="line">                cancelBuild(listId, i, btn.get('name'), child.pid, str, true);</div><div class="line">                dialog.showErrorBox('Oopsï¼Œ å‡ºé”™äº†', str);</div><div class="line">              &#125;);</div><div class="line"></div><div class="line">              child.stdout.on('data', function (data) &#123;</div><div class="line">                console.log(data.toString())</div><div class="line">                onProcess(listId, i, btn.get('text'), child.pid, data.toString())</div><div class="line">              &#125;);</div><div class="line"></div><div class="line">              //å…³é—­</div><div class="line">              child.stdout.on('close', function () &#123;</div><div class="line">                cancelBuild(listId, i, btn.get('name'), child.pid, 'ç¼–è¯‘ç»“æŸ', false);</div><div class="line">                setSnackbar('ç¼–è¯‘ç»“æŸ');</div><div class="line"></div><div class="line">                console.info('ç¼–è¯‘ç»“æŸ');</div><div class="line">              &#125;);</div><div class="line">            &#125;</div><div class="line">          &#125;&#125;</div><div class="line">        /&gt;</div><div class="line">      ))</div><div class="line">    &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">);</div></pre></td></tr></table></figure>
<p><code>â€”cwd</code>æŠŠgulpçš„æ“ä½œè·¯å¾„æŒ‡å‘äº†æˆ‘ä»¬å®šä¹‰çš„srcè·¯å¾„ï¼Œ<code>â€”gulpfile</code>åˆ™å¼ºè¡Œä½¿ç”¨feWorkflowä¸­å°è£…çš„gulp file.jsã€‚æˆ‘åœ¨jsä¸­å¯¹è·¯å¾„åšäº†å¤„ç†ï¼Œä»¥<code>src</code>åšä¸ºæˆªæ–­ç‚¹ï¼Œæ‹¼æ¥å‘½ä»¤è¡Œï¼Œå‡è®¾æ‹–æ”¾äº†ä¸€ä¸ªä½äº<code>D:\Code\work\vd\lottery\v3\src</code>ä¸‹çš„è·¯å¾„ï¼Œé‚£ä¹ˆè¾“å‡ºçš„å‘½ä»¤æ ¼å¼ä¸º:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ‰§è¡Œå‘½ä»¤</span></div><div class="line"><span class="keyword">let</span> child = exec(<span class="string">`gulp <span class="subst">$&#123;btn.get(<span class="string">'cmd'</span>)&#125;</span> --cwd <span class="subst">$&#123;listLocation&#125;</span> <span class="subst">$&#123;btn.get(<span class="string">'flag'</span>)&#125;</span> --gulpfile <span class="subst">$&#123;cwd&#125;</span>/gulpfile.js`</span>)</div><div class="line"></div><div class="line"><span class="comment">//ç¼–è¯‘è¾“å‡ºå‘½ä»¤ï¼š</span></div><div class="line">gulp dev --cwd D:\Code\work\vd\lottery\v3\src --development</div></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œé€šè¿‡<code>action</code>æ‰­è½¬äº†æŒ‰é’®çŠ¶æ€ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">processing</span>(<span class="params">id, index, name, pid, data</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    id,</div><div class="line">    <span class="attr">type</span>: <span class="string">'PROCESSING'</span>,</div><div class="line">    <span class="attr">btns</span>: &#123;</div><div class="line">      index,</div><div class="line">      name,</div><div class="line">      pid,</div><div class="line">      data,</div><div class="line">      <span class="attr">process</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">cmd</span>: name</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è°ƒç”¨<code>dispatch</code>å‘é€ç»™<code>reducer</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> initState = List([]);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = initState, action) =&gt; &#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    ...</div><div class="line">      case <span class="string">'PROCESSING'</span>:</div><div class="line">      <span class="keyword">return</span> state.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span> (item.get(<span class="string">'id'</span>) == action.id) &#123;</div><div class="line">          <span class="keyword">return</span> item.withMutations(<span class="function"><span class="params">i</span> =&gt;</span> &#123;</div><div class="line">            i</div><div class="line">              .set(<span class="string">'status'</span>, action.btns.cmd)</div><div class="line">              .set(<span class="string">'snackbar'</span>, action.snackbar)</div><div class="line">              .setIn([<span class="string">'btns'</span>, action.btns.index, <span class="string">'text'</span>], action.btns.name)</div><div class="line">              .setIn([<span class="string">'btns'</span>, action.btns.index, <span class="string">'name'</span>], <span class="string">'ç¼–è¯‘ä¸­...'</span>)</div><div class="line">              .setIn([<span class="string">'btns'</span>, action.btns.index, <span class="string">'process'</span>], action.btns.process)</div><div class="line">              .setIn([<span class="string">'btns'</span>, action.btns.index, <span class="string">'pid'</span>], action.btns.pid);</div><div class="line">          &#125;);</div><div class="line"></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          <span class="keyword">return</span> item;</div><div class="line">        &#125;</div><div class="line">      &#125;);</div><div class="line">     ...</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå°±æ˜¯æ•´ä¸ªæ–‡ä»¶æ‰§è¡Œçš„è¿‡ç¨‹ã€‚</p>
<hr>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>è¿™æ¬¡çš„æ”¹ç‰ˆåšäº†å¾ˆå¤šæ–°çš„å°è¯•ï¼Œæ–­æ–­ç»­ç»­çš„èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œè¿˜æ²¡æœ‰è¾¾åˆ°æœ€åˆçš„è®¾æƒ³ï¼Œä¹Ÿè¿˜ç¼ºå¤±äº†ä¸€äº›é‡è¦çš„åŠŸèƒ½ã€‚åç»­è¿˜éœ€è¦è¡¥å……ä¸å°‘ä¸œè¥¿ã€‚æˆå“ç¡®å®è¿˜æ¯”è¾ƒç®€å•ï¼Œä»£ç ä¹Ÿè®¸ä¹Ÿæ¯”è¾ƒæ‚ä¹±ï¼Œæ‰€æœ‰ä»£ç å¼€æºåœ¨<a href="https://github.com/whatifhappen/feWorkflow" target="_blank" rel="external">github</a>ä¸Šï¼Œæ¬¢è¿æ–§æ­£ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ol>
<li><a href="https://github.com/electron/electron/tree/master/docs-translations/zh-CN" target="_blank" rel="external">electron docs</a></li>
<li><a href="https://babeljs.io/blog/2015/06/07/react-on-es6-plus" target="_blank" rel="external">babel react-on-es6-plus</a></li>
<li><a href="https://webpack.github.io/" target="_blank" rel="external">webpack</a></li>
<li><a href="http://redux.js.org/" target="_blank" rel="external">redux</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;15å¹´åˆåˆ›å»ºäº†é€‚ç”¨äºç›®å‰å›¢é˜Ÿçš„gulpå·¥ä½œæµï¼Œæ—¨åœ¨ä»¥ä¸€ä¸ªgulpfileæ¥æ“ä½œå’Œæ‰§è¡Œæ‰€æœ‰æ–‡ä»¶ç»“æ„ã€‚éšç€é¡¹ç›®ä¾èµ–æ»šé›ªçƒå¼çš„å¢é•¿ï¼Œæ‹‰å–npmåŒ…æˆäº†é…ç½®ä¸­æœ€éº»çƒ¦è€Œæå®¹æ˜“å‡ºé”™çš„ä¸€é¡¹ã€‚ä¸ºäº†è§£å†³é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°çš„ç§ç§é—®é¢˜ï¼Œ15å¹´åº•è‰è‰å®ç°äº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œç”¨nw.jsï¼ˆåŸºäºChromiumå’Œnode.jsçš„appæ‰§è¡Œå·¥å…·ï¼‰æ¡†æ¶æ¥ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„æ¡Œé¢åº”ç”¨&lt;a href=&quot;http://whatifhappen.github.io/GulpUI-WX/&quot;&gt;gulp-ui&lt;/a&gt;, æ‰€åšçš„æ“ä½œæ˜¯æ‰“åŒ…gulpfileå’Œæ‰€ä¾èµ–çš„æ‰€æœ‰node_modulesåœ¨ä¸€èµ·ï¼Œç„¶åç®€å•ç²—æš´çš„åœ¨appå†…éƒ¨æ‰§è¡Œgulpfileã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="NodeJS" scheme="https://aotu.io/cates/NodeJS/"/>
    
    
      <category term="React" scheme="https://aotu.io/tags/React/"/>
    
      <category term="Electron" scheme="https://aotu.io/tags/Electron/"/>
    
  </entry>
  
  <entry>
    <title>ç¬¬äºŒç•ŒHiFSDåˆ†äº«ä¼šPPTè®²ä¹‰ä¸‹è½½åˆ†äº«</title>
    <link href="https://aotu.io/notes/2016/07/03/HIFSD2-Summary/"/>
    <id>https://aotu.io/notes/2016/07/03/HIFSD2-Summary/</id>
    <published>2016-07-03T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥æ™šäº†ï¼ˆLate is better than neverï¼‰ï¼Œ<a href="http://digg.tgideas.qq.com/hifsd/" target="_blank" rel="external">ç¬¬äºŒå±ŠHiFSDåˆ†äº«ä¼š</a>çš„PPTè®²ä¹‰ä¸‹è½½åœ°å€åˆ†äº«~</p>
<a id="more"></a>
<h2 id="å…³äºHiFSD"><a href="#å…³äºHiFSD" class="headerlink" title="å…³äºHiFSD"></a>å…³äºHiFSD</h2><p>å¾ˆå¤šäººä¸æ˜æ‰€ä»¥ï¼Œ<a href="//aotu.io">å‡¹å‡¸å®éªŒå®¤</a>ä½œä¸ºååŠæ–¹ï¼Œè¿˜è´Ÿè´£YYã€æ˜ å®¢çš„ä¼šè®®ç›´æ’­ï¼Œæˆ‘è¿˜æ˜¯æœ‰ä¹‰åŠ¡ç…§ä¾‹ç®€å•ä»‹ç»ä¸€ä¸‹çš„å“ˆã€‚</p>
<p>HiFSDå…¨ç§°Hi Full Stack Developverï¼Œç”±è…¾è®¯TGIdeasä¸»åŠçš„å…¨æ ˆå·¥ç¨‹å¸ˆäº¤æµåˆ†äº«å¹³å°ã€‚</p>
<p>æœ¬å±Šåˆ†äº«ä¼šä»¥<code>å‰ç«¯</code>åˆ†äº«ä¸ºä¸»ï¼Œé‚€è¯·äº†äº¬ä¸œã€è…¾è®¯ã€å¾®ä¼—é“¶è¡Œå’Œé˜¿é‡Œçš„åˆ†äº«å˜‰å®¾ï¼Œä¸»é¢˜ä¸ºï¼š</p>
<ol>
<li>14:30 ã€webpackæ„å»ºä¼˜åŒ–ã€</li>
<li>15:15 ã€æ•°æ®ä¼šè¯´è¯ã€</li>
<li>16:20 ã€æµ…è°ˆVUEã€</li>
<li>17:00 ã€ä¸»æµç”µå•†ç½‘ç«™å‰ç«¯æ€§èƒ½æµ…æã€</li>
</ol>
<h2 id="PPTåœ¨å“ªé‡Œ"><a href="#PPTåœ¨å“ªé‡Œ" class="headerlink" title="PPTåœ¨å“ªé‡Œ"></a>PPTåœ¨å“ªé‡Œ</h2><ol>
<li><a href="http://tgideas.qq.com/hiFSD/2nd/report/1wangxin.zip" target="_blank" rel="external">ç‹é‘«ï¼ˆé˜¿é‡Œå›½é™…UEDå‰ç«¯å›¢é˜Ÿï¼‰ã€ŠWEBPACKæ„å»ºä¼˜åŒ–ã€‹</a></li>
<li><a href="http://tgideas.qq.com/hiFSD/2nd/report/2liusimin.zip" target="_blank" rel="external">åˆ˜æ€æ•ï¼ˆè…¾è®¯TGIdeaså‰ç«¯å›¢é˜Ÿï¼‰ã€Šæ•°æ®ä¼šè¯´è¯ã€‹</a></li>
<li><a href="http://tgideas.qq.com/hiFSD/2nd/report/3wanchun.zip" target="_blank" rel="external">ä¸‡çº¯ï¼ˆå¾®ä¼—MUMBLEå›¢é˜Ÿï¼‰ã€Šæµ…è°ˆVUEã€‹</a></li>
<li><a href="http://tgideas.qq.com/hiFSD/2nd/report/4fanlizhi.pdf.zip" target="_blank" rel="external">èŒƒç«‹ä¹‹ï¼ˆäº¬ä¸œJDC å‡¹å‡¸å®éªŒå®¤ï¼‰</a></li>
</ol>
<h2 id="å…³äºç›´æ’­"><a href="#å…³äºç›´æ’­" class="headerlink" title="å…³äºç›´æ’­"></a>å…³äºç›´æ’­</h2><p><img src="https://img.aotu.io/Fi4G4OzGM1idinbuVDHEUm4qT3-_" alt="YY"></p>
<p>å…¶å®åˆ©ç”¨YYã€æ˜ å®¢åšç°åœºç›´æ’­åªæ˜¯æˆ‘ä»¬ä¸´æ—¶åŠ è¿›å»çš„å†…å®¹ï¼Œåº”è¯¥æ˜¯ä¸šç•Œé¦–æ¬¡åˆ©ç”¨å½“çº¢çš„ç›´æ’­APPåšæŠ€æœ¯åˆ†äº«ä¼šçš„ç›´æ’­ï¼Œæ•ˆæœè™½ç„¶è¯´ä¸ç®—å®Œç¾ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯æœ‰å‡ ä¹è¿‘åƒä½ç½‘å‹é€šè¿‡ç›´æ’­çš„æ–¹å¼è§‚çœ‹äº†æœ¬æ¬¡åˆ†äº«ä¼šçš„å†…å®¹ã€‚<br>æ„Ÿè°¢ä¼™ä¼´ä»¬çš„æ”¯æŒï¼Œè¯·æœŸå¾…å‡¹å‡¸å®éªŒå®¤åœ¨ä¸‹ä¸€æ¬¡åŒç±»çš„åˆ†äº«ä¼šä¸­åšæ›´ç»™åŠ›çš„çº¿ä¸Šç›´æ’­ã€‚</p>
<p>ç›´æ’­å›æ”¾åœ°å€è¯·<a href="http://w.3g.yy.com/s/play/moblive.html?pid=15013x03_1330966843_1560925621_1466663707_1466663696" target="_blank" rel="external">çŒ›å‡»è¿™é‡Œ</a>ã€‚</p>
<p>æˆ–æ‰«æäºŒç»´ç è¿›è¡Œè§‚çœ‹ï¼š</p>
<p><img src="https://img.aotu.io/FtpJiOi-IAzwxu1L3RJ8nhz_Jdlh" alt="YY"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¥æ™šäº†ï¼ˆLate is better than neverï¼‰ï¼Œ&lt;a href=&quot;http://digg.tgideas.qq.com/hifsd/&quot;&gt;ç¬¬äºŒå±ŠHiFSDåˆ†äº«ä¼š&lt;/a&gt;çš„PPTè®²ä¹‰ä¸‹è½½åœ°å€åˆ†äº«~&lt;/p&gt;
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="HiFSD" scheme="https://aotu.io/tags/HiFSD/"/>
    
      <category term="åˆ†äº«ä¼š" scheme="https://aotu.io/tags/%E5%88%86%E4%BA%AB%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>ç¥å¥‡çš„Shadow DOM</title>
    <link href="https://aotu.io/notes/2016/06/24/Shadow-DOM/"/>
    <id>https://aotu.io/notes/2016/06/24/Shadow-DOM/</id>
    <published>2016-06-24T02:39:04.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ä½ æœ‰å¥½å¥‡è¿‡è¿™ä¸ªé—®é¢˜å—ï¼Œä¸ºä»€ä¹ˆåªç”¨videoæ ‡ç­¾åŒ…è£¹ç€sourceæ ‡ç­¾ï¼Œå°±å¯ä»¥å®Œæˆä¸€ç³»åˆ—è§†é¢‘åŠŸèƒ½ï¼šæ’­æ”¾/æš‚åœæŒ‰é’®ã€è¿›åº¦æ¡ã€è§†é¢‘æ—¶é—´æ˜¾ç¤ºã€éŸ³é‡æ§åˆ¶ç­‰ç­‰ï¼Ÿæ—¢ç„¶ DOM æºç è¿™ä¹ˆå¹²å‡€ï¼Œä½ æœ‰æƒ³è¿‡å®ç°è¿™äº›ç»„ä»¶çš„ä»£ç æ˜¯ä»å“ªå„¿æ¥çš„å—ï¼Ÿ</p>
<a id="more"></a>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h2><p>Shadow DOMå®ƒå…è®¸åœ¨æ–‡æ¡£ï¼ˆdocumentï¼‰æ¸²æŸ“æ—¶æ’å…¥ä¸€æ£µDOMå…ƒç´ å­æ ‘ï¼Œä½†æ˜¯è¿™æ£µå­æ ‘ä¸åœ¨ä¸»DOMæ ‘ä¸­ã€‚</p>
<p>å› æ­¤å¼€å‘è€…å¯åˆ©ç”¨Shadow DOM å°è£…è‡ªå·±çš„ HTML æ ‡ç­¾ã€CSS æ ·å¼å’Œ JavaScript ä»£ç ã€‚</p>
<p>çœ‹ä¸€ä¸ªç®€å•çš„videoï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Shadow DOM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">autoplay</span> <span class="attr">name</span>=<span class="string">"media"</span> <span class="attr">width</span>=<span class="string">"500"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">id</span>=<span class="string">"mp4"</span> <span class="attr">src</span>=<span class="string">"http://7ryl2t.com2.z0.glb.qiniucdn.com/572ffc37a2e5a.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é¡µé¢å®Œæˆäº†ï¼Œåœ¨æµè§ˆå™¨chromeä¸­æ‰“å¼€ï¼Œç„¶åæ‰“å¼€ Chrome çš„å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œSettingsâ€æŒ‰é’®ï¼Œå‹¾é€‰â€œShow user agent shadow DOMâ€ã€‚</p>
<p><img src="//img.aotu.io/Fq09xC-qD04z43WYyVb4P0tPC-NC" alt="Show user agent shadow DOM"></p>
<p>æµè§ˆå™¨æˆªå›¾ï¼š</p>
<p><img src="//img.aotu.io/FhgQ2ofckuyoCPD8RlAd3INcGRAx" alt="Video Shadow DOM"></p>
<p>#shadow-rootç§°ä¸ºå½±å­æ ¹ï¼Œå¯ä»¥çœ‹åˆ°å®ƒåœ¨videoé‡Œé¢ï¼Œæ¢å¥è¯è¯´ï¼Œ#shadow-rootå¯„ç”Ÿåœ¨videoä¸Šï¼Œæ‰€ä»¥videoæ­¤æ—¶ç§°ä¸ºå½±å­å®¿ä¸»ã€‚å¯ä»¥çœ‹åˆ°ä¸Šå›¾æœ‰ä¸¤ä¸ª#shadow-rootï¼Œè¿™æ˜¯å› ä¸º#shadow-rootå¯ä»¥åµŒå¥—ï¼Œå½¢æˆèŠ‚ç‚¹æ ‘ï¼Œå³ç§°ä¸ºå½±å­æ ‘ï¼ˆshadow treesï¼‰ã€‚å½±å­æ ‘å¯¹å…¶ä¸­çš„å†…å®¹è¿›è¡Œäº†å°è£…ï¼Œæœ‰é€‰æ‹©æ€§çš„è¿›è¡Œæ¸²æŸ“ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ’å…¥æ–‡æœ¬ã€é‡æ–°å®‰æ’å†…å®¹ã€æ·»åŠ æ ·å¼ç­‰ç­‰ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/FoF1XzsX8voCu3Gh9mJKBXkHeQDC" alt="å½±å­æ ‘"></p>
<h2 id="2-æ€æ ·åˆ›å»ºShadow-DOM"><a href="#2-æ€æ ·åˆ›å»ºShadow-DOM" class="headerlink" title="2. æ€æ ·åˆ›å»ºShadow DOM"></a>2. æ€æ ·åˆ›å»ºShadow DOM</h2><p>ä½¿ç”¨createShadowRoot()æ¥åˆ›å»ºShadow DOMï¼Œå¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œç„¶åæ·»åŠ å…ƒç´ ç»™å˜é‡å³å¯ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Shadow DOM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="selector-class">.shadowroot_son</span> &#123;</div><div class="line">            <span class="attribute">color</span>: <span class="number">#f00</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shadowhost"</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">        <span class="comment">// å½±å­å®¿ä¸»ï¼ˆshadow hostï¼‰</span></div><div class="line">        <span class="keyword">var</span> shadowHost = <span class="built_in">document</span>.querySelector(<span class="string">'.shadowhost'</span>);</div><div class="line"></div><div class="line">        <span class="comment">// åˆ›å»ºå½±å­æ ¹ï¼ˆshadow rootï¼‰</span></div><div class="line">        <span class="keyword">var</span> shadowRoot = shadowHost.createShadowRoot();</div><div class="line"></div><div class="line">        <span class="comment">// å½±å­æ ¹ä½œä¸ºå½±å­æ ‘çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä»–çš„èŠ‚ç‚¹æ¯”å¦‚pèŠ‚ç‚¹éƒ½æ˜¯å®ƒçš„å­èŠ‚ç‚¹ã€‚</span></div><div class="line">        shadowRoot.innerHTML = <span class="string">'&lt;p class="shadowroot_son"&gt;å¤å¤©å¤å¤©æ‚„æ‚„è¿‡å»ç•™ä¸‹å°ç§˜å¯†ï¼&lt;/p&gt;'</span>;</div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æµè§ˆå™¨æˆªå›¾ï¼š</p>
<p><img src="//img.aotu.io/FtgCUt4VAb4Y5JemQFBXnI3tvo4W" alt="åˆ›å»ºShadow DOM"></p>
<p>æœ‰æ²¡æœ‰æ³¨æ„åˆ°.shadowroot_sonçš„æ ·å¼color: #f00;ä¸ç”Ÿæ•ˆï¼Ÿï¼é‚£æ˜¯å› ä¸ºå½±å­å®¿ä¸»å’Œå½±å­æ ¹ä¹‹é—´å­˜åœ¨å½±å­è¾¹ç•Œï¼ˆshadow boundaryï¼‰ï¼Œå½±å­è¾¹ç•Œä¿è¯ä¸» DOMå†™çš„ CSS é€‰æ‹©å™¨å’Œ JavaScript ä»£ç éƒ½ä¸ä¼šå½±å“åˆ°Shadow DOMï¼Œå½“ç„¶ä¹Ÿä¿æŠ¤ä¸»æ–‡æ¡£ä¸å— shadow DOM æ ·å¼çš„ä¾µè¢­ã€‚</p>
<h2 id="3-æƒ³è¦æ¸²æŸ“å½±å­å®¿ä¸»é‡Œçš„å†…å®¹ï¼Œé‚£è¯¥æ€ä¹ˆç©ï¼Ÿ"><a href="#3-æƒ³è¦æ¸²æŸ“å½±å­å®¿ä¸»é‡Œçš„å†…å®¹ï¼Œé‚£è¯¥æ€ä¹ˆç©ï¼Ÿ" class="headerlink" title="3. æƒ³è¦æ¸²æŸ“å½±å­å®¿ä¸»é‡Œçš„å†…å®¹ï¼Œé‚£è¯¥æ€ä¹ˆç©ï¼Ÿ"></a>3. æƒ³è¦æ¸²æŸ“å½±å­å®¿ä¸»é‡Œçš„å†…å®¹ï¼Œé‚£è¯¥æ€ä¹ˆç©ï¼Ÿ</h2><p>éœ€è¦å®Œæˆæ­¤é¡¹ä»»åŠ¡ï¼Œéœ€è¦ä¸¤ä¸ªåˆ©å™¨ï¼š<code>&lt;content&gt;</code>å’Œ<code>&lt;template&gt;</code>ã€‚</p>
<h3 id="3-1-lt-content-gt"><a href="#3-1-lt-content-gt" class="headerlink" title="3.1 &lt;content&gt;"></a>3.1 <code>&lt;content&gt;</code></h3><p>é€šè¿‡ <code>&lt;content&gt;</code> æ ‡ç­¾æŠŠæ¥è‡ªä¸»æ–‡æ¡£å¹¶æ·»åŠ åˆ° shadow DOM çš„å†…å®¹è¢«ç§°ä¸ºåˆ†å¸ƒèŠ‚ç‚¹ã€‚</p>
<p> <code>&lt;content&gt;</code>çš„selectå±æ€§å‘Šè¯‰<code>&lt;content&gt;</code>æ ‡ç­¾æœ‰é€‰æ‹©æ€§çš„æ’å…¥å†…å®¹ã€‚select å±æ€§ä½¿ç”¨ CSS é€‰æ‹©å™¨æ¥é€‰å–æƒ³è¦å±•ç¤ºçš„å†…å®¹ï¼Œé€‰æ‹©å™¨åŒ…æ‹¬ç±»é€‰æ‹©å™¨ã€å…ƒç´ é€‰æ‹©å™¨ç­‰ã€‚</p>
<h3 id="3-2-lt-template-gt"><a href="#3-2-lt-template-gt" class="headerlink" title="3.2 &lt;template&gt;"></a>3.2 <code>&lt;template&gt;</code></h3><p>ç›®å‰çš„æ¨¡æ¿HTMLåšæ³•é€šå¸¸æ˜¯åœ¨<code>&lt;script&gt;</code> ä¸­åµŒå…¥æ¨¡æ¿HTMLï¼Œè®©å†…éƒ¨çš„HTMLæ ‡ç­¾æŒ‰ç…§å­—ç¬¦ä¸²å¤„ç†çš„ï¼Œä»è€Œä½¿å¾—å†…å®¹ä¸æ˜¾ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span>&gt;</span><span class="actionscript"></span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>&lt;template&gt;</code>å…ƒç´ çš„å‡ºç°æ—¨åœ¨è®©HTMLæ¨¡æ¿å˜å¾—æ›´åŠ æ ‡å‡†ä¸è§„èŒƒã€‚</p>
<p><code>&lt;template&gt;</code>åœ¨ä½¿ç”¨å‰ä¸ä¼šè¢«æ¸²æŸ“ï¼Œä¸ä¼šæ‰§è¡ŒåŠ è½½ç­‰æ“ä½œï¼Œä¹Ÿèƒ½å¤Ÿå®ç°éšè—æ ‡ç­¾å†…å®¹ï¼Œè€Œä¸”ä½ç½®ä»»æ„æ€§ï¼Œå¯ä»¥åœ¨<code>&lt;head&gt;</code>ä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨<code>&lt;body&gt;</code>æˆ–è€…<code>&lt;frameset&gt;</code>ä¸­ã€‚</p>
<h3 id="3-3-å®ä¾‹"><a href="#3-3-å®ä¾‹" class="headerlink" title="3.3 å®ä¾‹"></a>3.3 å®ä¾‹</h3><p>é€šè¿‡ä»¥ä¸Šå¯¹ <code>&lt;content&gt;</code>å’Œ<code>&lt;template&gt;</code>çš„ç®€å•äº†è§£ï¼Œæˆ‘ä»¬æ¥é€šè¿‡ä¸€ä¸ªå®ä¾‹åŠ æ·±ç†è§£ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>content&amp;template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shadowhost"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">"shadowhost_content1"</span>&gt;</span>å”±æ­Œ<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">"shadowhost_content2"</span>&gt;</span>è·³èˆ<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- S æ¨¡æ¿æ ‡ç­¾ template --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">class</span>=<span class="string">"template"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ <span class="tag">&lt;<span class="name">content</span> <span class="attr">select</span>=<span class="string">".shadowhost_content1"</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span>æˆ‘<span class="tag">&lt;<span class="name">content</span> <span class="attr">select</span>=<span class="string">".shadowhost_content2"</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span>!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- E æ¨¡æ¿æ ‡ç­¾ template --&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> shadowHost = <span class="built_in">document</span>.querySelector(<span class="string">'.shadowhost'</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> shadowRoot = shadowHost.createShadowRoot();</div><div class="line">    <span class="keyword">var</span> template = <span class="built_in">document</span>.querySelector(<span class="string">'.template'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// template.contentä¼šè¿”å›ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µï¼Œå¯ä»¥ç†è§£ä¸ºå¦å¤–ä¸€ä¸ªdocumentã€‚</span></div><div class="line">    <span class="comment">// åˆ©ç”¨document.importNodeè·å–èŠ‚ç‚¹ï¼Œtrueè¡¨ç¤ºæ·±åº¦å…‹éš†ã€‚</span></div><div class="line">    shadowRoot.appendChild(<span class="built_in">document</span>.importNode(template.content, <span class="literal">true</span>));</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æµè§ˆå™¨æˆªå›¾ï¼š</p>
<p><img src="//img.aotu.io/FswaNQUdHF17XfTya9wO4ZnKIryN" alt="content&amp;template"></p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢ä¸‰ä¸ªå±æ€§çš„ç”¨é€”ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">console.<span class="built_in">log</span>(<span class="keyword">template</span>.innerHTML);   <span class="comment">// è·å–å®Œæ•´çš„HTMLç‰‡æ®µ</span></div><div class="line">console.<span class="built_in">log</span>(<span class="keyword">template</span>.content);  <span class="comment">// è¿”å›ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µ#document-fragment</span></div><div class="line">console.<span class="built_in">log</span>(<span class="keyword">template</span>.childNodes);  <span class="comment">// è¿”å›[]ï¼Œè¯´æ˜childNodesæ— æ•ˆ</span></div></pre></td></tr></table></figure>
<p><strong>è´ªå¿ƒæ’å…¥ç‚¹</strong>ï¼šå¦‚æœæŠŠselect=â€.shadowhost_content1â€æ”¹æˆselect=â€â€æˆ–è€…select=â€*â€ï¼Œé‚£ä¹ˆä¼šæœ‰ä¸ä¸€æ ·çš„ç»“æœã€‚å› ä¸ºè´ªå¿ƒé€‰æ‹©å™¨æ”¾åœ¨äº†æ¨¡æ¿çš„ç¬¬ä¸€ä¸ªï¼Œä»–ä¼šå°†æ‰€æœ‰å†…å®¹éƒ½æŠ“å–ï¼Œä¸ç»™å…¶ä»–select é€‰æ‹©å™¨ç•™ä¸€ç‚¹å†…å®¹ã€‚æµè§ˆå™¨æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FgnGjHYb8sI1_jns_CViHrsXgc6n" alt="è´ªå¿ƒæ’å…¥ç‚¹"></p>
<h2 id="4-å…³äºæ ·å¼"><a href="#4-å…³äºæ ·å¼" class="headerlink" title="4. å…³äºæ ·å¼"></a>4. å…³äºæ ·å¼</h2><h3 id="4-1-å®¿ä¸»æ ·å¼-host"><a href="#4-1-å®¿ä¸»æ ·å¼-host" class="headerlink" title="4.1 å®¿ä¸»æ ·å¼:host"></a>4.1 å®¿ä¸»æ ·å¼:host</h3><p>åœ¨shadow DOMä¸­åˆ©ç”¨:hostå®šä¹‰å®¿ä¸»çš„æ ·å¼ï¼Œå½“ç„¶ç”¨æˆ·å¯ä»¥åœ¨ä¸»æ–‡æ¡£ä¸­è¦†ç›–è¿™ä¸ªæ ·å¼ã€‚</p>
<p>:host æ˜¯ä¼ªç±»é€‰æ‹©å™¨ï¼ˆPseudo Selectorï¼‰,:hostæˆ–è€… :host(*)æ˜¯é»˜è®¤ç»™æ‰€æœ‰çš„å®¿ä¸»æ·»åŠ æ ·å¼ï¼Œæˆ–è€…å•ç‹¬ç»™ä¸€ä¸ªå®¿ä¸»æ·»åŠ æ ·å¼ï¼Œå³é€šè¿‡:host(x)ï¼Œxå¯ä»¥æ˜¯å®¿ä¸»çš„æ ‡ç­¾æˆ–è€…ç±»é€‰æ‹©å™¨ç­‰ã€‚</p>
<p>å¦å¤–:hostè¿˜å¯ä»¥é…åˆ:hoverã€:activeç­‰çŠ¶æ€æ¥è®¾ç½®æ ·å¼ï¼Œå¦‚ï¼š</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">:host(:hover)</span> &#123;</div><div class="line"><span class="code">    border: 2px solid #0ff;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-2-shadow"><a href="#4-2-shadow" class="headerlink" title="4.2 ::shadow"></a>4.2 ::shadow</h3><p>åŸåˆ™ä¸Šæ¥è¯´ï¼Œå½±å­è¾¹ç•Œä¿è¯ä¸» DOMå†™çš„ CSS é€‰æ‹©å™¨å’Œ JavaScript ä»£ç éƒ½ä¸ä¼šå½±å“åˆ°Shadow DOMã€‚<br>ä½†ä½ å¯èƒ½ä¼šæƒ³æ‰“ç ´å½±å­è¾¹ç•Œçš„æ‰€è°“ä¿è¯ï¼Œä¸»æ–‡æ¡£èƒ½å¤Ÿç»™Shadow DOMæ·»åŠ ä¸€äº›æ ·å¼ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨::shadowã€‚</p>
<h3 id="4-3-deep"><a href="#4-3-deep" class="headerlink" title="4.3 /deep/"></a>4.3 /deep/</h3><p>::shadow é€‰æ‹©å™¨çš„ä¸€ä¸ªç¼ºé™·æ˜¯ä»–åªèƒ½ç©¿é€ä¸€å±‚å½±å­è¾¹ç•Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªå½±å­æ ‘ä¸­åµŒå¥—äº†å¤šä¸ªå½±å­æ ‘ï¼Œé‚£ä¹ˆä½¿ç”¨ /deep/ ã€‚</p>
<h3 id="4-4-content"><a href="#4-4-content" class="headerlink" title="4.4 ::content"></a>4.4 ::content</h3><p>è¿˜è®°å¾—ä»€ä¹ˆå«åˆ†å¸ƒèŠ‚ç‚¹å—ï¼Ÿé€šè¿‡ <code>&lt;content&gt;</code> æ ‡ç­¾æŠŠæ¥è‡ªä¸»æ–‡æ¡£å¹¶æ·»åŠ åˆ° shadow DOM çš„å†…å®¹è¢«ç§°ä¸ºåˆ†å¸ƒèŠ‚ç‚¹ã€‚</p>
<p>åˆ†å¸ƒèŠ‚ç‚¹çš„æ ·å¼æ¸²æŸ“éœ€è¦ç”¨åˆ° ::contentã€‚å³ä½¿åˆ†å¸ƒèŠ‚ç‚¹ä¸ºemæ ‡ç­¾ï¼Œç›´æ¥å†™ em {} ä¸ç”Ÿæ•ˆï¼Œåº”è¯¥å†™æˆ::content &gt; em {}ã€‚</p>
<h3 id="4-5-å®ä¾‹"><a href="#4-5-å®ä¾‹" class="headerlink" title="4.5 å®ä¾‹"></a>4.5 å®ä¾‹</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>::content&amp;::shadow&amp;/deep/<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">    /* ::shadow */</div><div class="line">    /*.shadowhost::shadow h1 &#123;</div><div class="line">        padding: 20px;</div><div class="line">        border: 1px solid #f00;</div><div class="line">    &#125;*/</div><div class="line"></div><div class="line">    /* /deep/  */</div><div class="line">    .shadowhost /deep/ h1 &#123;</div><div class="line">        padding: 20px;</div><div class="line">        border: 1px solid #000;</div><div class="line">    &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shadowhost"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">"shadowhost_content1"</span>&gt;</span>å”±æ­Œ<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">em</span> <span class="attr">class</span>=<span class="string">"shadowhost_content2"</span>&gt;</span>è·³èˆ<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- S æ¨¡æ¿æ ‡ç­¾ template --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">class</span>=<span class="string">"template"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">        <span class="comment">/* å®šä¹‰å®¿ä¸»æ ·å¼:host */</span></div><div class="line">        <span class="selector-pseudo">:host</span> &#123;</div><div class="line">            <span class="attribute">color</span>: <span class="number">#E85E5E</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">/* å®šä¹‰å®¿ä¸»hoverçŠ¶æ€ä¸‹çš„æ ·å¼ */</span></div><div class="line">        <span class="selector-pseudo">:host(</span><span class="selector-pseudo">:hover)</span> &#123;</div><div class="line">            <span class="attribute">color</span>: <span class="number">#000</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/* åˆ†å¸ƒèŠ‚ç‚¹çš„æ ·å¼æ¸²æŸ“éœ€è¦ç”¨åˆ° ::content,ç›´æ¥å†™ em &#123;&#125; ä¸ç”Ÿæ•ˆ */</span></div><div class="line">        <span class="selector-pseudo">::content</span> &gt; <span class="selector-tag">em</span> &#123;</div><div class="line">            <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">            <span class="attribute">background</span>: <span class="number">#FFCC00</span>;</div><div class="line">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ <span class="tag">&lt;<span class="name">content</span> <span class="attr">select</span>=<span class="string">".shadowhost_content1"</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span>æˆ‘<span class="tag">&lt;<span class="name">content</span> <span class="attr">select</span>=<span class="string">".shadowhost_content2"</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span>!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- E æ¨¡æ¿æ ‡ç­¾ template --&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> shadowHost = <span class="built_in">document</span>.querySelector(<span class="string">'.shadowhost'</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> shadowRoot = shadowHost.createShadowRoot();</div><div class="line">    <span class="keyword">var</span> template = <span class="built_in">document</span>.querySelector(<span class="string">'.template'</span>);</div><div class="line"></div><div class="line">    shadowRoot.appendChild(<span class="built_in">document</span>.importNode(template.content, <span class="literal">true</span>));</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æµè§ˆå™¨æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FojZYP5WW1JAGN-3fyW9jnFLGiuN" alt="::content&amp;::shadow&amp;/deep/"></p>
<h2 id="5-JavaScript"><a href="#5-JavaScript" class="headerlink" title="5. JavaScript"></a>5. JavaScript</h2><h3 id="5-1-é‡å®šå‘"><a href="#5-1-é‡å®šå‘" class="headerlink" title="5.1 é‡å®šå‘"></a>5.1 é‡å®šå‘</h3><p>Shadow DOM é‡Œçš„ JS ä¸ä¼ ç»Ÿçš„ JS ä¸€ä¸ªçœŸæ­£ä¸åŒçš„ç‚¹åœ¨äºäº‹ä»¶è°ƒåº¦ï¼ˆevent dispatchingï¼‰ã€‚è¦è®°ä½çš„ä¸€ç‚¹æ˜¯ï¼šåŸæ¥ç»‘å®šåœ¨ shadow DOM èŠ‚ç‚¹ä¸­çš„äº‹ä»¶è¢«é‡å®šå‘äº†ï¼Œæ‰€ä»¥ä»–ä»¬çœ‹èµ·æ¥åƒç»‘å®šåœ¨å½±å­å®¿ä¸»ä¸Šä¸€æ ·ã€‚</p>
<p>å½“ä½ ç‚¹å‡»â€œshadow textâ€çš„è¾“å…¥æ¡†æ—¶æ§åˆ¶å°å´è¾“å‡ºäº†å®¿ä¸»å…ƒç´ ï¼ˆå°±æ˜¯ #hostï¼‰çš„ id ã€‚è¿™æ˜¯å› ä¸ºå½±å­èŠ‚ç‚¹ä¸Šçš„äº‹ä»¶å¿…é¡»é‡å®šå‘ï¼Œå¦åˆ™è¿™å°†ç ´åå°è£…æ€§ã€‚</p>
<p>åˆ†å¸ƒèŠ‚ç‚¹æ¥è‡ªåŸæœ‰ DOM ç»“æ„ï¼Œæ²¡å¿…è¦é‡å®šå‘ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>select<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"normal-text"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"I'm normal text"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"host"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- â€œdustributed textâ€ä¸ºåˆ†å¸ƒèŠ‚ç‚¹ï¼Œæ¥è‡ªåŸæœ‰ DOM ç»“æ„ï¼Œæ²¡å¿…è¦é‡å®šå‘ã€‚ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"distributed-text"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"I'm distributed text"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"shadow-text"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"I'm shadow text"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">content</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> host = <span class="built_in">document</span>.querySelector(<span class="string">'#host'</span>);</div><div class="line">    <span class="keyword">var</span> root = host.createShadowRoot();</div><div class="line">    <span class="keyword">var</span> template = <span class="built_in">document</span>.querySelector(<span class="string">'template'</span>);</div><div class="line">    root.appendChild(<span class="built_in">document</span>.importNode(template.content, <span class="literal">true</span>));</div><div class="line"></div><div class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(e.target.id + <span class="string">' click!'</span>);</div><div class="line">    &#125;);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åˆ†åˆ«å•å‡»æ¯ä¸ªè¾“å…¥æ¡†ï¼Œæ§åˆ¶å°æ‰“å°æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FuPYA7rXQnnK78gC75QnvhRkzpqN" alt="äº‹ä»¶é‡å®šå‘"></p>
<h3 id="5-2-è¢«é˜»å¡çš„äº‹ä»¶ï¼ˆBlocked-Eventsï¼‰"><a href="#5-2-è¢«é˜»å¡çš„äº‹ä»¶ï¼ˆBlocked-Eventsï¼‰" class="headerlink" title="5.2 è¢«é˜»å¡çš„äº‹ä»¶ï¼ˆBlocked Eventsï¼‰"></a>5.2 è¢«é˜»å¡çš„äº‹ä»¶ï¼ˆBlocked Eventsï¼‰</h3><p>äº‹ä»¶abortã€ errorã€ select ã€change ã€load ã€reset ã€resize ã€scroll ã€selectstartä¸ä¼šè¿›è¡Œé‡å®šå‘è€Œæ˜¯ç›´æ¥è¢«å¹²æ‰ï¼Œå› æ­¤äº‹ä»¶ä¸èƒ½å†’æ³¡åˆ°æ–‡æ¡£ä¸­ï¼Œäº‹ä»¶ç›‘å¬é‡å®šå‘è‡³æ–‡æ¡£ï¼Œå› æ­¤æ— æ³•ç›‘å¬åˆ°è¿™ä¸€äº‹ä»¶ã€‚</p>
<p>æŠŠä¸Šé¢çš„ç›‘å¬äº‹ä»¶clickæ”¹æˆselectï¼Œå³æ”¹æˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'select'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(e.target.id + <span class="string">' select!'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åˆ†åˆ«åŒå‡»æ¯ä¸ªè¾“å…¥æ¡†ï¼Œä½ ä¼šå‘ç°ï¼Œshadow textçš„è¾“å…¥æ¡†æ²¡æœ‰æ‰“å°ï¼Œå°±æ˜¯æ²¡æœ‰å‘ç”Ÿselectäº‹ä»¶ã€‚</p>
<p><img src="//img.aotu.io/FpPbkUQKdtodVkllgCc3K4-5miOe" alt="è¢«é˜»å¡çš„äº‹ä»¶"></p>
<h3 id="6-å…¼å®¹æ€§"><a href="#6-å…¼å®¹æ€§" class="headerlink" title="6. å…¼å®¹æ€§"></a>6. å…¼å®¹æ€§</h3><p><img src="//img.aotu.io/FpSHZHqQtxYyUIO2vdUCRaVnJyaA" alt="templateå…¼å®¹æ€§"></p>
<p><img src="//img.aotu.io/FuAGMDQSFdBe_xEdSolSbU-avlpd" alt="Shadow DOMå…¼å®¹æ€§"></p>
<p>çœ‹ä¸Šå»åªèƒ½åœ¨chromeä¸­æ„‰å¿«åœ°ç©è€ã€‚</p>
<p><a href="http://webcomponents.org/" target="_blank" rel="external">webcomponents.js</a>ä½¿å¾—Shadow DOMåœ¨é native æ”¯æŒçš„æµè§ˆå™¨ä¸Šå®ç°ã€‚</p>
<h2 id="7-å‚è€ƒé“¾æ¥"><a href="#7-å‚è€ƒé“¾æ¥" class="headerlink" title="7. å‚è€ƒé“¾æ¥"></a>7. å‚è€ƒé“¾æ¥</h2><p><a href="https://css-tricks.com/modular-future-web-components/" target="_blank" rel="external">A Guide to Web Components</a><br><a href="http://www.ituring.com.cn/article/177453" target="_blank" rel="external">Shadow DOMç³»åˆ—æ–‡ç« </a><br><a href="http://www.zhangxinxu.com/wordpress/2014/07/hello-html5-template-tag/" target="_blank" rel="external">HTML5 <code>&lt;template&gt;</code>æ ‡ç­¾å…ƒç´ ç®€ä»‹</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½ æœ‰å¥½å¥‡è¿‡è¿™ä¸ªé—®é¢˜å—ï¼Œä¸ºä»€ä¹ˆåªç”¨videoæ ‡ç­¾åŒ…è£¹ç€sourceæ ‡ç­¾ï¼Œå°±å¯ä»¥å®Œæˆä¸€ç³»åˆ—è§†é¢‘åŠŸèƒ½ï¼šæ’­æ”¾/æš‚åœæŒ‰é’®ã€è¿›åº¦æ¡ã€è§†é¢‘æ—¶é—´æ˜¾ç¤ºã€éŸ³é‡æ§åˆ¶ç­‰ç­‰ï¼Ÿæ—¢ç„¶ DOM æºç è¿™ä¹ˆå¹²å‡€ï¼Œä½ æœ‰æƒ³è¿‡å®ç°è¿™äº›ç»„ä»¶çš„ä»£ç æ˜¯ä»å“ªå„¿æ¥çš„å—ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Dom" scheme="https://aotu.io/tags/Dom/"/>
    
      <category term="ShadowDom" scheme="https://aotu.io/tags/ShadowDom/"/>
    
  </entry>
  
  <entry>
    <title>æ¢ç©¶WebPä¸€äº›äº‹å„¿</title>
    <link href="https://aotu.io/notes/2016/06/23/explore-something-of-webp/"/>
    <id>https://aotu.io/notes/2016/06/23/explore-something-of-webp/</id>
    <published>2016-06-23T02:43:31.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸ç®¡æ˜¯PCè¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œå›¾ç‰‡ä¸€ç›´æ˜¯æµé‡å¤§å¤´ã€‚ä¸ç®¡æ˜¯åœ¨äº¬ä¸œé¦–é¡µè¿˜æ˜¯é¢‘é“é¡µï¼Œå•†å“å›¾ç‰‡ä»¥åŠå¹¿å‘Šå›¾ç‰‡å æ®äº†å¤§éƒ¨åˆ†çš„æµé‡ã€‚</p>
<p>è¯„ä»·ç½‘ç«™æ€§èƒ½å¥½åçš„ä¸€ä¸ªä¸»è¦æŒ‡æ ‡å°±æ˜¯é¡µé¢å“åº”æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·æ‰“å¼€å®Œæ•´é¡µé¢çš„æ—¶é—´ã€‚åŸºäºJPEGè¿˜æœ‰PNGå›¾ç‰‡æ ¼å¼çš„ç½‘é¡µï¼Œå…¶å›¾ç‰‡èµ„æºåŠ è½½å¾€å¾€éƒ½å æ®äº†é¡µé¢è€—æ—¶çš„ä¸»è¦éƒ¨åˆ†ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯å›¾ç‰‡è´¨é‡çš„å‰æä¸‹ç¼©å°å›¾ç‰‡ä½“ç§¯ï¼Œæˆä¸ºäº†ä¸€ä»¶æœ‰ä»·å€¼çš„äº‹æƒ…ã€‚</p>
<p>è€Œå¦‚ä»Šï¼Œå¯¹JPEGã€PNGä»¥åŠGIFè¿™äº›æ ¼å¼çš„å›¾ç‰‡å·²ç»æ²¡æœ‰å¤ªå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚ä½†æ˜¯ï¼ŒGoogleæ¨å‡ºçš„WebPå›¾ç‰‡æ ¼å¼ç»™å›¾ç‰‡ä¼˜åŒ–æä¾›äº†å¦ä¸€ç§å¯èƒ½ã€‚</p>
<p>WebPæ˜¯ä¸€ç§æ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ï¼Œæ ¹æ®Googleçš„æµ‹è¯•ï¼Œæ— æŸå‹ç¼©åçš„WebPæ¯”PNGæ–‡ä»¶å°‘äº†26ï¼…çš„ä½“ç§¯ï¼Œæœ‰æŸå‹ç¼©åçš„WebPå›¾ç‰‡ç›¸æ¯”äºç­‰æ•ˆè´¨é‡æŒ‡æ ‡çš„JPEGå›¾ç‰‡å‡å°‘äº†25ï¼…~34%çš„ä½“ç§¯ã€‚</p>
<p>é€šè¿‡ç ”ç©¶WebPå›¾ç‰‡æ ¼å¼ï¼Œå°½å¯èƒ½å…¨é¢åœ°äº†è§£WebPå›¾ç‰‡çš„ä¼˜åŠ£åŠ¿ä»¥åŠåº”ç”¨WebPå›¾ç‰‡ç»™æˆ‘ä»¬å¸¦æ¥çš„æ”¶ç›Šä»¥åŠé£é™©ï¼Œæœ€ç»ˆæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 id="WebPæ¢ç©¶"><a href="#WebPæ¢ç©¶" class="headerlink" title="WebPæ¢ç©¶"></a>WebPæ¢ç©¶</h3><p>äº¬ä¸œå•†å“å›¾ä»¥åŠé¢‘é“é¡µå¹¿å‘Šå›¾ç›®å‰åŸºæœ¬ä¸ºJPGå›¾ç‰‡ï¼Œä»¥ä¸‹æ•°æ®ä¸»è¦ä¸ºJPGå’ŒWebPå›¾ç‰‡çš„å¯¹æ¯”ï¼Œæµ‹è¯•å›¾ç‰‡é‡‡ç”¨äº¬ä¸œå•†å“å›¾ã€‚</p>
<h4 id="WebPå…¼å®¹æ€§"><a href="#WebPå…¼å®¹æ€§" class="headerlink" title="WebPå…¼å®¹æ€§"></a>WebPå…¼å®¹æ€§</h4><p><img src="//img.aotu.io/FmUIiSK5GnaMRnywosGR2wARtOhx" alt=""></p>
<p>WebPç›®å‰æ”¯æŒæ¡Œé¢ä¸Šçš„Chromeå’ŒOperaæµè§ˆå™¨ï¼Œæ‰‹æœºæ”¯æŒä»…é™äºåŸç”Ÿçš„Androidæµè§ˆå™¨ã€Androidç³»ç»Ÿä¸Šçš„Chromeæµè§ˆå™¨ã€Opera Miniæµè§ˆå™¨ã€‚</p>
<p><img src="//img.aotu.io/FimDJyH6sC_n3qQeNQiVMHmBF831" alt=""></p>
<p>æ ¹æ®å¯¹ç›®å‰æµè§ˆå™¨å æ¯”ä¸WebPçš„å…¼å®¹æ€§åˆ†æï¼Œå¦‚æœé‡‡ç”¨WebPå›¾ç‰‡ï¼Œå¤§çº¦æœ‰42%çš„ç”¨æˆ·å¯ä»¥ç›´æ¥ä½“éªŒåˆ°ã€‚</p>
<h4 id="WebPå‘½ä»¤è¡Œå·¥å…·å®‰è£…"><a href="#WebPå‘½ä»¤è¡Œå·¥å…·å®‰è£…" class="headerlink" title="WebPå‘½ä»¤è¡Œå·¥å…·å®‰è£…"></a>WebPå‘½ä»¤è¡Œå·¥å…·å®‰è£…</h4><p>Googleæä¾›äº†å‘½ä»¤è¡Œå·¥å…·ç”¨äºå°†å›¾ç‰‡è½¬æ¢ä¸ºwebpã€‚</p>
<p>åœ¨Macä¸‹ï¼Œå¯ä»¥ä½¿ç”¨homebrewå®‰è£…webpå·¥å…·ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install webp</div></pre></td></tr></table></figure>
<p>Linuxé‡‡ç”¨æºç åŒ…æ¥å®‰è£…ï¼ˆCentOSä¸‹ï¼‰ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">yum install -y gcc make autoconf automake libtool libjpeg-devel libpng-devel<span class="comment"># å®‰è£…ç¼–è¯‘å™¨ä»¥åŠä¾èµ–åŒ…</span></div><div class="line">wget https://storage.googleapis.com/downloads.webmproject.org/releases/webp/libwebp-0.5.0.tar.gz</div><div class="line">tar -zxvf libwebp-0.5.0.tar.gz</div><div class="line"><span class="built_in">cd</span> libwebp-0.5.0</div><div class="line">./configure</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<p>å®‰è£…å®Œå‘½ä»¤è¡Œå·¥å…·åï¼Œå°±å¯ä»¥ä½¿ç”¨cwebpå°†JPGæˆ–PNGå›¾ç‰‡è½¬æ¢æˆWebPæ ¼å¼ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cwebp [-preset &lt;...&gt;] [options] in_file [-o out_file]</div></pre></td></tr></table></figure>
<p>optionså‚æ•°åˆ—è¡¨ä¸­åŒ…å«è´¨é‡å‚æ•°qï¼Œqä¸º0ï½100ä¹‹é—´çš„æ•°å­—ï¼Œæ¯”è¾ƒå…¸å‹çš„è´¨é‡å€¼å¤§çº¦ä¸º80ã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨dwebpå°†WebPå›¾ç‰‡è½¬æ¢å›PNGå›¾ç‰‡ï¼ˆé»˜è®¤ï¼‰ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dwebp in_file [options] [-o out_file]</div></pre></td></tr></table></figure>
<p>æ›´å¤šç»†èŠ‚è¯¦è§<a href="https://developers.google.com/speed/webp/docs/using" target="_blank" rel="external">ä½¿ç”¨æ–‡æ¡£</a></p>
<h4 id="WebPä¼˜åŠ¿"><a href="#WebPä¼˜åŠ¿" class="headerlink" title="WebPä¼˜åŠ¿"></a>WebPä¼˜åŠ¿</h4><p>ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€å¼ å›¾ç‰‡ä¸ºä¾‹ï¼Œåˆ†åˆ«ç”¨ä¸åŒè´¨é‡è¿›è¡Œå‹ç¼©ã€‚</p>
<p><img src="//img.aotu.io/FsK4nvnPq8-LKmgUMAyQpPVzX0Wk" alt=""></p>
<p>WebPå›¾ç‰‡ç›¸æ¯”äºJPGï¼Œæ‹¥æœ‰ï¼š</p>
<ol>
<li>æ›´å°çš„æ–‡ä»¶å°ºå¯¸;</li>
<li>æ›´é«˜çš„è´¨é‡â€”â€”ä¸å…¶ä»–ç›¸åŒå¤§å°ä¸åŒæ ¼å¼çš„å‹ç¼©å›¾åƒæ¯”è¾ƒã€‚</li>
</ol>
<p>ç›®æ ‡å›¾åƒçš„è´¨é‡å’Œæ–‡ä»¶å¤§å°ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„æŠ˜ä¸­å…³ç³»ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦é™ä½å›¾åƒçš„å¤§å°ï¼Œè€Œç”¨æˆ·å´å‡ ä¹ä¸ä¼šæ³¨æ„åˆ°å…¶ä¸­çš„å·®åˆ«ã€‚</p>
<p>æŠ½å–100å¼ å•†å“å›¾ç‰‡ï¼Œé‡‡ç”¨80%æœ‰æŸå‹ç¼©ï¼Œå¤§çº¦èƒ½å‡å°‘60%çš„æ–‡ä»¶å¤§å°ã€‚</p>
<p>æ›´å¤š<a href="http://labs.qiang.it/wen/webp/compare.html" target="_blank" rel="external">æµ‹è¯•</a>ã€‚</p>
<h4 id="WebPåŠ£åŠ¿"><a href="#WebPåŠ£åŠ¿" class="headerlink" title="WebPåŠ£åŠ¿"></a>WebPåŠ£åŠ¿</h4><p>æ ¹æ®Googleçš„æµ‹è¯•ï¼Œç›®å‰WebPä¸JPGç›¸æ¯”è¾ƒï¼Œç¼–ç é€Ÿåº¦æ…¢10å€ï¼Œè§£ç é€Ÿåº¦æ…¢1.5å€ã€‚</p>
<p>åœ¨ç¼–ç æ–¹é¢ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›¾ç‰‡ä¸Šä¼ æ—¶ç”Ÿæˆä¸€ä»½WebPå›¾ç‰‡æˆ–è€…åœ¨ç¬¬ä¸€æ¬¡è®¿é—®JPGå›¾ç‰‡æ—¶ç”ŸæˆWebPå›¾ç‰‡ï¼Œå¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“åŸºæœ¬å¿½ç•¥ä¸è®¡ï¼Œä¸»è¦é—®é¢˜åœ¨äº1.5å€çš„è§£ç é€Ÿåº¦æ˜¯å¦ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>ä¸‹é¢é€šè¿‡åŒæ ·è´¨é‡çš„WebPä¸JPGå›¾ç‰‡åŠ è½½çš„é€Ÿåº¦è¿›è¡Œ<a href="http://labs.qiang.it/wen/webp/test.html" target="_blank" rel="external">æµ‹è¯•</a>ã€‚æµ‹è¯•çš„JPGå’ŒWebPå›¾ç‰‡å¤§å°å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/Fng21Plg7-00b3HKFe48nLIgP_fn" alt=""></p>
<p>æµ‹è¯•æ•°æ®æŠ˜çº¿å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FrvS4mf268RBStCsJSt-gbXuINrz" alt=""></p>
<p>ä»æŠ˜çº¿å›¾å¯ä»¥çœ‹åˆ°ï¼ŒWebPè™½ç„¶ä¼šå¢åŠ é¢å¤–çš„è§£ç æ—¶é—´ï¼Œä½†ç”±äºå‡å°‘äº†æ–‡ä»¶ä½“ç§¯ï¼Œç¼©çŸ­äº†åŠ è½½çš„æ—¶é—´ï¼Œé¡µé¢çš„æ¸²æŸ“é€Ÿåº¦åŠ å¿«äº†ã€‚åŒæ—¶ï¼Œéšç€å›¾ç‰‡æ•°é‡çš„å¢å¤šï¼ŒWebPé¡µé¢åŠ è½½çš„é€Ÿåº¦ç›¸å¯¹JPGé¡µé¢å¢å¿«äº†ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨WebPåŸºæœ¬æ²¡æœ‰æŠ€æœ¯é˜»ç¢ï¼Œè¿˜èƒ½å¸¦æ¥æ€§èƒ½æå‡ä»¥åŠå¸¦å®½èŠ‚çœã€‚</p>
<h3 id="æŠ€æœ¯æ–¹æ¡ˆ"><a href="#æŠ€æœ¯æ–¹æ¡ˆ" class="headerlink" title="æŠ€æœ¯æ–¹æ¡ˆ"></a>æŠ€æœ¯æ–¹æ¡ˆ</h3><p>åœ¨æµè§ˆå™¨ä¸­å¯ä»¥é‡‡ç”¨JavaScriptæ£€æµ‹æ˜¯å¦æ”¯æŒWebPï¼Œå¯¹æ”¯æŒWebPçš„ç”¨æˆ·è¾“å‡ºWebPå›¾ç‰‡ï¼Œå¦åˆ™è¾“å‡ºå…¶ä»–æ ¼å¼çš„å›¾ç‰‡ã€‚</p>
<p>JavaScriptæ£€æµ‹æ˜¯å¦æ”¯æŒWebPä»£ç å¦‚ä¸‹ï¼šï¼ˆå‡ºè‡ªGoogleå®˜æ–¹æ–‡æ¡£ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_webp_feature</span>(<span class="params">feature, callback</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> kTestImages = &#123;</div><div class="line">        <span class="attr">lossy</span>: <span class="string">"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"</span>,</div><div class="line">        <span class="attr">lossless</span>: <span class="string">"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="</span>,</div><div class="line">        <span class="attr">alpha</span>: <span class="string">"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="</span>,</div><div class="line">        <span class="attr">animation</span>: <span class="string">"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> result = (img.width &gt; <span class="number">0</span>) &amp;&amp; (img.height &gt; <span class="number">0</span>);</div><div class="line">        callback(feature, result);</div><div class="line">    &#125;;</div><div class="line">    img.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        callback(feature, <span class="literal">false</span>);</div><div class="line">    &#125;;</div><div class="line">    img.src = <span class="string">"data:image/webp;base64,"</span> + kTestImages[feature];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œå¯¹äºæ”¯æŒWebPå›¾ç‰‡çš„æµè§ˆå™¨ï¼Œä¼šåœ¨è¯·æ±‚å¤´Acceptä¸­å¸¦ä¸Šimage/webpçš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¾¿èƒ½è¯†åˆ«åˆ°æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebPï¼Œåœ¨æœåŠ¡å™¨ä¸­å¤„ç†å›¾ç‰‡ã€‚</p>
<h4 id="æ‡’åŠ è½½å›¾ç‰‡"><a href="#æ‡’åŠ è½½å›¾ç‰‡" class="headerlink" title="æ‡’åŠ è½½å›¾ç‰‡"></a>æ‡’åŠ è½½å›¾ç‰‡</h4><p>é‡‡ç”¨JavaScriptèƒ½åŠ›æ£€æµ‹çš„æ–¹å¼æ¥åŠ è½½WebPå›¾ç‰‡ï¼Œé€šå¸¸çš„åšæ³•æ˜¯é€šè¿‡å›¾ç‰‡æ‡’åŠ è½½çš„æ–¹å¼æ¥å®Œæˆã€‚ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/Fslo9RsJ9z99hptjl5aRIkFVrGU5" alt=""></p>
<p>é¡µé¢åŠ è½½ä¼šå¾ˆå¿«ï¼Œæ— éœ€ç­‰å¾…å›¾ç‰‡åŠ è½½ã€‚ä¹‹åï¼Œjavascriptä»£ç ä¼šåŠ¨æ€åœ°æ›´æ–°å›¾ç‰‡æ ‡ç­¾ï¼Œæ ¹æ®æµè§ˆå™¨æ”¯æŒWebPæ ¼å¼ä¸å¦ï¼ŒåŠ¨æ€ç”ŸæˆWebPå›¾åƒæˆ–JPGå›¾åƒé“¾æ¥ã€‚</p>
<h4 id="PageSpeedè‡ªåŠ¨è½¬æ¢æ¨¡å—"><a href="#PageSpeedè‡ªåŠ¨è½¬æ¢æ¨¡å—" class="headerlink" title="PageSpeedè‡ªåŠ¨è½¬æ¢æ¨¡å—"></a>PageSpeedè‡ªåŠ¨è½¬æ¢æ¨¡å—</h4><p>Googleå¼€å‘çš„PageSpeedæ¨¡å—æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨å°†å›¾åƒè½¬æ¢æˆWebPæ ¼å¼æˆ–è€…æ˜¯æµè§ˆå™¨æ‰€æ”¯æŒçš„å…¶å®ƒæ ¼å¼ã€‚</p>
<p>ä»¥nginxä¸ºä¾‹ï¼Œå®ƒçš„è®¾ç½®å¾ˆç®€å•ã€‚</p>
<p>é¦–å…ˆåœ¨httpæ¨¡å—å¼€å¯pagespeedå±æ€§ã€‚</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">pagespeed</span> <span class="literal">on</span>;</div><div class="line"><span class="attribute">pagespeed</span> FileCachePath <span class="string">"/var/cache/ngx_pagespeed/"</span>;</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä½ çš„ä¸»æœºé…ç½®æ·»åŠ å¦‚ä¸‹ä¸€è¡Œä»£ç ï¼Œå°±èƒ½å¯ç”¨è¿™ä¸ªç‰¹æ€§ã€‚</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pagespeed EnableFilters convert_png_to_jpeg,convert_jpeg_to_webp<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç»è¿‡è½¬æ¢åçš„ä»£ç ï¼š</p>
<p>é¡µé¢åŸå§‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>pagespeed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./574ceeb8N73b24dc2.jpg"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./6597241290470949609.png"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Chromeæ‰“å¼€åæºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>pagespeed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"x574ceeb8N73b24dc2.jpg.pagespeed.ic.YcCPjxQL4t.webp"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"x6597241290470949609.png.pagespeed.ic.6c5y5LYYUu.webp"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Safariæ‰“å¼€å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>pagespeed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"x574ceeb8N73b24dc2.jpg.pagespeed.ic.3TXX_PUg99.jpg"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"x6597241290470949609.png.pagespeed.ic.rrgw7vPMd6.png"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ›´å¤šè¯¦è§ngx_pagespeedæ–‡æ¡£ï¼š<a href="https://developers.google.com/speed/pagespeed/module/build_ngx_pagespeed_from_source#dependencies" target="_blank" rel="external">https://developers.google.com/speed/pagespeed/module/build_ngx_pagespeed_from_source#dependencies</a></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¾ˆæ˜æ˜¾ï¼ŒWebPæ ¼å¼æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„åˆä¸€åˆ©å™¨ï¼Œè™½ç„¶æµè§ˆå™¨å¯¹WebPçš„æ”¯æŒä»æœ‰å¾ˆå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œä½†æ˜¯é€šè¿‡æ˜¯ä½¿ç”¨ä¸€äº›å·¥å…·å’ŒæŠ€æœ¯ï¼Œèƒ½å¤Ÿä½“ä¼šåˆ°WebPçš„å¥½å¤„ï¼Œä½¿å¾—é¡µé¢åŠ è½½é€Ÿåº¦æ›´å¿«ï¼ŒåŒæ—¶èŠ‚çœäº†å¸¦å®½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;ä¸ç®¡æ˜¯PCè¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œå›¾ç‰‡ä¸€ç›´æ˜¯æµé‡å¤§å¤´ã€‚ä¸ç®¡æ˜¯åœ¨äº¬ä¸œé¦–é¡µè¿˜æ˜¯é¢‘é“é¡µï¼Œå•†å“å›¾ç‰‡ä»¥åŠå¹¿å‘Šå›¾ç‰‡å æ®äº†å¤§éƒ¨åˆ†çš„
    
    </summary>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://aotu.io/cates/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="WebP" scheme="https://aotu.io/tags/WebP/"/>
    
      <category term="å›¾ç‰‡" scheme="https://aotu.io/tags/%E5%9B%BE%E7%89%87/"/>
    
  </entry>
  
  <entry>
    <title>è®©consoleå……æ»¡æƒ…æ€€</title>
    <link href="https://aotu.io/notes/2016/06/22/An-interesting-experience-on-console/"/>
    <id>https://aotu.io/notes/2016/06/22/An-interesting-experience-on-console/</id>
    <published>2016-06-22T07:51:18.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬æƒ…å†µä¸‹åªæ˜¯ç”¨console æ§åˆ¶å°è¾“å‡ºç®€å•çš„æ–‡å­—ä¿¡æ¯ï¼Œä½†æ˜¯å½“consoleé‡åˆ°äº†å‰ç«¯çš„æƒ…æ€€ï¼Œæ•…äº‹å°±ä¸æ˜¯è¿™ä¹ˆå‘å±•çš„äº†~<br><a id="more"></a></p>
<h2 id="1-åŸºæœ¬è¯­æ³•ï¼š"><a href="#1-åŸºæœ¬è¯­æ³•ï¼š" class="headerlink" title="1. åŸºæœ¬è¯­æ³•ï¼š"></a>1. åŸºæœ¬è¯­æ³•ï¼š</h2><p>console.logçš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(object [, object, â€¦])</div></pre></td></tr></table></figure>
<h2 id="2-å ä½ç¬¦"><a href="#2-å ä½ç¬¦" class="headerlink" title="2. å ä½ç¬¦"></a>2. å ä½ç¬¦</h2><p>ä¸€æ‰“å¼€å¤©çŒ«ã€çŸ¥ä¹çš„é¡µé¢consoleï¼Œæ‹›è˜ä¿¡æ¯å°±è¢­æ¥å•¦ï¼</p>
<p>å¤©çŒ«æ‹›è˜ï¼š<br><img src="//img.aotu.io/FpfNmVjqEJUN7rCqfdnj3vquPx--" alt="å¤©çŒ«æ‹›è˜"></p>
<p>çŸ¥ä¹æ‹›è˜ï¼š<br><img src="//img.aotu.io/Fvyb5hkp0hBX79XvRc2IUNVJjddo" alt="çŸ¥ä¹æ‹›è˜"></p>
<p>å°å¥³å­å°±å¥½å¥‡äº†ï¼Œæ€ä¹ˆåšçš„å‘¢ï¼Œå¯ä»¥æ›´é…·ç‚«ä¸€ç‚¹å—ï¼Ÿ</p>
<p>åŸæ¥å•Šï¼Œæ•…äº‹æ˜¯è¿™æ ·å¼€å§‹çš„ï¼šæµè§ˆå™¨æä¾›äº†è¿™ä¹ˆä¸€ä¸ªAPIï¼šç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥åŒ…å«ä¸€äº›æ ¼å¼å ä½ç¬¦æ¯”å¦‚%cï¼Œconsole.logæ–¹æ³•å°†ä¾æ¬¡ç”¨åé¢çš„å‚æ•°æ›¿æ¢å ä½ç¬¦ï¼Œç„¶åå†è¿›è¡Œè¾“å‡ºã€‚</p>
<table>
<thead>
<tr>
<th>æ ¼å¼å ä½ç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>%s</td>
<td>å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>%d or %i</td>
<td>æ•´æ•°</td>
</tr>
<tr>
<td>%f</td>
<td>æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td>%o</td>
<td>å¯å±•å¼€çš„DOM</td>
</tr>
<tr>
<td>%O</td>
<td>åˆ—å‡ºDOMçš„å±æ€§</td>
</tr>
<tr>
<td>%c</td>
<td>æ ¹æ®æä¾›çš„cssæ ·å¼æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<p>ç»™çˆ·æ¥ä¸€æ®µå…¨éƒ¨ç”¨ä¸Šå ä½ç¬¦çš„ä»£ç ï¼Œç„¶åå°å¥³å­éµå‘½äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æœ‰äº”ä¸ªå ä½ç¬¦ï¼ˆ%sï¼‰ï¼Œç¬¬äºŒ~å…­ä¸ªå‚æ•°ä¼šä¾æ¬¡æ›¿æ¢æ‰å ä½ç¬¦ã€‚</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"%c Look %o and %O , it %s and %d "</span>,<span class="string">"color: #6190e8;"</span>,&#123;<span class="attr">AA</span>: <span class="string">"WCN"</span>,<span class="attr">BB</span>: <span class="string">"wcn"</span>&#125;,&#123;<span class="attr">AA</span>: <span class="string">"WCN"</span>,<span class="attr">BB</span>: <span class="string">"wcn"</span>&#125;,<span class="string">"CC"</span>,<span class="number">123</span>);</div></pre></td></tr></table></figure>
<p>æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/Fu_fT1Dl20to5hXQZ3hxeFP6Bxk9" alt="å ä½ç¬¦"></p>
<p>%oå’Œ%Oåœ¨æ™®é€šå¯¹è±¡ä¸Šçš„è¡¨ç°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨DOMä¸Šå°±æœ‰åŒºåˆ«äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ ¼å¼æˆå¯å±•å¼€çš„çš„DOMï¼Œåƒåœ¨å¼€å‘è€…å·¥å…·Elementé¢æ¿é‚£æ ·å¯å±•å¼€</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'%o'</span>,<span class="built_in">document</span>.body.firstElementChild)</div><div class="line"></div><div class="line"><span class="comment">// åƒJSå¯¹è±¡é‚£æ ·è®¿é—®DOMå…ƒç´ ï¼Œå¯æŸ¥çœ‹DOMå…ƒç´ çš„å±æ€§</span></div><div class="line"><span class="comment">// ç­‰åŒäºconsole.dir(document.body.firstElementChild)</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'%O'</span>,<span class="built_in">document</span>.body.firstElementChild)</div></pre></td></tr></table></figure>
<p>éšæ„æ‰“å¼€çš„ä¸€ä¸ªé¡µé¢æµ‹è¯•ï¼Œfirefoxæ€»æ˜¯å¯ä»¥æŸ¥çœ‹å¯å±•å¼€çš„DOMèŠ‚ç‚¹ï¼Œå³è¡Œä¸ºæ˜¯%oï¼›IEä¸æ”¯æŒ%oå’Œ%O ï¼›chromeæ˜¾ç¤ºæ­£å¸¸ï¼Œæˆªå›¾å¦‚ä¸‹</p>
<p><img src="//img.aotu.io/FmUiB4a7VIQWgYfMsP9DZWlaR-KL" alt="%oå’Œ%Oçš„åŒºåˆ«"></p>
<p>ä½¿ç”¨%cå ä½ç¬¦æ—¶ï¼Œå¯¹åº”çš„åé¢çš„å‚æ•°å¿…é¡»æ˜¯CSSè¯­å¥ï¼Œç”¨æ¥å¯¹è¾“å‡ºå†…å®¹è¿›è¡ŒCSSæ¸²æŸ“ã€‚äºæ˜¯ï¼Œåˆ©ç”¨%cé…åˆCSSå¯ä»¥åšå‡ºåŠç‚¸å¤©çš„æ•ˆæœï¼Œæ¯”å¦‚èƒŒæ™¯è‰²ã€å­—ä½“é¢œè‰²æ¸å˜ã€å­—ä½“3Dæ•ˆæœã€å›¾ç‰‡ç­‰ï¼Œæƒ…å†µå…è®¸å†ç”¨é¢œæ–‡å­—ã€emojiå–ä¸ªèŒï¼ŒèŒèŒå“’~</p>
<p>ä»€ä¹ˆï¼Œç«Ÿç„¶ä¹Ÿæ”¯æŒå›¾ç‰‡ï¼Ÿï¼logä¸€ä¸ªå›¾ç‰‡è¯•è¯•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="string">"%c    "</span>,<span class="string">"background: url(http://aotu.io/assets/img/o2logo.png) no-repeat left center;font-size: 60px;"</span>,<span class="string">"\n"</span>);</div></pre></td></tr></table></figure>
<p>firebugæˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FkqNNsDYs83oS2vgJNectandSuUI" alt="å›¾ç‰‡"></p>
<p>ä¸è¿‡è¦æ³¨æ„äº†ï¼š</p>
<ul>
<li>consoleä¸èƒ½å®šä¹‰imgï¼Œå› æ­¤ç”¨èƒŒæ™¯å›¾ç‰‡ä»£æ›¿ã€‚</li>
<li>consoleä¸æ”¯æŒwidthå’Œheightï¼Œåˆ©ç”¨ç©ºæ ¼å’Œfont-sizeä»£æ›¿ï¼›è¿˜å¯ä»¥ä½¿ç”¨paddingå’Œline-heightä»£æ›¿å®½é«˜ã€‚</li>
<li>chromeæ²¡å‡ºæ¥ï¼Ÿæ²¡å‡ºæ¥å°±å¯¹äº†â€¦â€¦ä¸æ”¯æŒå•Šï¼åŸå› æ˜¯<a href="https://src.chromium.org/viewvc/blink/trunk/Source/devtools/front_end/console/ConsoleViewMessage.js?pathrev=197345#l797" target="_blank" rel="external">ConsoleViewMessage.jsæºç æŠŠurlå’Œè°æ‰äº†</a>ã€‚ä¸è¿‡å¯ä»¥ä¸‹è½½firebugæ’ä»¶æŸ¥çœ‹å•¦~ gifå›¾ç‰‡ä¹Ÿæ˜¯æ”¯æŒçš„~~~</li>
<li>consoleæ˜¯é»˜è®¤æ¢è¡Œçš„ã€‚</li>
</ul>
<p>å­¦ä¹ äº†ä»¥ä¸Šçš„ä¸œä¸œï¼Œå°±æ˜¯ä¸ºäº†è¿™ä¸ªçš„å‡ºä¸–ï¼Œé“›é“›é“›~~~ï¼š</p>
<p>firebugæˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/FriQlRjoEvbtEKmfRZWASrUfloej" alt="å‡¹å‡¸å®éªŒå®¤æ‹›è˜"></p>
<p>ç‚¹å‡» <a href="http://labs.qiang.it/qqpai/test/wcn/console/console.html" target="_blank" rel="external">æ­¤å¤„</a> å¯æŸ¥çœ‹ä¾‹å­å•¦~~</p>
<h2 id="3-å­—ç¬¦ç”»"><a href="#3-å­—ç¬¦ç”»" class="headerlink" title="3. å­—ç¬¦ç”»"></a>3. å­—ç¬¦ç”»</h2><p>é‚£å­—ç¬¦ç”»æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿè‡£å¦¾å¯ä»¥åšåˆ°ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚</p>
<p>æŠŠä¸‹é¢çš„ä»£ç ç²˜è´´åœ¨consoleæ§åˆ¶å°å¯æŸ¥çœ‹æ•ˆæœå“Ÿ~~</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">console</span><span class="selector-class">.log</span>("%<span class="selector-tag">c</span>\<span class="selector-tag">n</span>                                           <span class="selector-pseudo">:J</span>:    \<span class="selector-tag">n</span>                                          <span class="selector-pseudo">:.</span> <span class="selector-tag">i</span>    \<span class="selector-tag">n</span>                  ..:::::::,<span class="selector-pseudo">:.</span>,.,..<span class="selector-pseudo">:..</span><span class="selector-pseudo">::rr</span>    <span class="selector-tag">J</span>   \<span class="selector-tag">n</span>               <span class="selector-pseudo">::i</span>:,               <span class="selector-tag">FB</span>         ,<span class="selector-tag">v</span>  \<span class="selector-tag">n</span>  <span class="selector-class">.i</span><span class="selector-pseudo">:i</span>:   .:<span class="selector-pseudo">::7</span>                     <span class="selector-tag">B</span>.         <span class="selector-pseudo">:7</span> \<span class="selector-tag">n</span>  7:  ,<span class="selector-tag">rri</span>:  @<span class="keyword">B</span>      .vOB@B@B@BY                ,:\n  Y          <span class="number">1</span>       B@B@BkB@Pr        <span class="number">7</span>,        :\n ::                                  ,<span class="number">7</span>:.:      .i\n.i          .                      :<span class="number">7</span>: .r.::i:::: \nr         i .<span class="number">7</span>:,               .:ri:  ;<span class="selector-tag">i</span>          \<span class="selector-tag">n7</span>        77;.  <span class="selector-class">.iii</span>:::::::<span class="selector-pseudo">::iii</span><span class="selector-pseudo">:.</span>    7,           \<span class="selector-tag">n</span> <span class="selector-pseudo">:i</span><span class="selector-pseudo">:.</span>,::;.  <span class="selector-pseudo">:r</span>,      .....         <span class="selector-tag">i7</span>             \<span class="selector-tag">n</span>   .. .       <span class="selector-pseudo">:ii.</span>               <span class="selector-class">.v</span>:              \<span class="selector-tag">n</span>                <span class="selector-class">.ii</span><span class="selector-pseudo">:.</span>          <span class="selector-class">.rr</span>                \<span class="selector-tag">n</span>                   <span class="selector-class">.iii</span>.      <span class="selector-tag">ii</span>.                 \<span class="selector-tag">n</span>                        <span class="selector-tag">i</span>@<span class="keyword">8GB</span>@                    \n                        vj1ULri                   \n                       <span class="number">7</span>.     r.                  \n                  .,  ,r      ,;                  \<span class="selector-tag">n</span>                  <span class="selector-class">.E</span>  0   %<span class="selector-tag">cJD</span>   %<span class="selector-tag">c7</span>                  \<span class="selector-tag">n</span>                   <span class="selector-tag">jii2</span>        <span class="selector-tag">u</span>                  \<span class="selector-tag">n</span>                    1<span class="selector-tag">i</span>,   <span class="selector-pseudo">::i.</span> <span class="selector-tag">J</span>                  \<span class="selector-tag">n</span>                    <span class="selector-tag">i</span> <span class="selector-tag">J</span>  <span class="selector-tag">E</span>   <span class="selector-tag">L</span> <span class="selector-tag">v</span>                  \<span class="selector-tag">n</span>                   ,<span class="selector-pseudo">:iY</span> 17   <span class="selector-pseudo">::7</span>                  \<span class="selector-tag">n</span>                   <span class="selector-tag">iL</span> ,<span class="selector-tag">iL7</span>    <span class="selector-tag">rr</span>                  \<span class="selector-tag">n</span>                   <span class="selector-tag">Si</span> <span class="selector-tag">r</span><span class="selector-pseudo">::5</span>    <span class="selector-tag">i7</span>                  \<span class="selector-tag">n</span>                   ,  <span class="selector-tag">r</span>       <span class="selector-class">.v</span>                  ","<span class="selector-tag">color</span>: <span class="selector-id">#000</span>","<span class="selector-tag">color</span>: <span class="selector-id">#f00</span>","<span class="selector-tag">color</span>: <span class="selector-id">#000</span>")</div></pre></td></tr></table></figure>
<p>æ²¡é”™äº†ï¼Œæ•ˆæœæ˜¯é•¿è¿™æ ·å­çš„ï¼š</p>
<p><img src="//img.aotu.io/Fp9tde_TaaPqxthmzlGhXkU1NLCn" alt="JOY"></p>
<p>ä½ ä¸ä¼šå¤©çœŸåœ°è®¤ä¸ºï¼Œæˆ‘æ˜¯æ‰‹æ‰“è¿™ä¸ªäº¬ä¸œç‹—å‡ºæ¥çš„å§ï¼Ÿï¼</p>
<p>ä¸ä¸ä¸ï¼Œæœ‰ç¥å™¨ç›¸åŠ©ï¼</p>
<p>è¿™é‡Œæ¨èä¸‰ä¸ªASCIIå­—ç¬¦ç”»åˆ¶ä½œå·¥å…·ï¼š</p>
<ul>
<li><p>åœ¨çº¿å·¥å…·<a href="http://picascii.com/" target="_blank" rel="external">picascii</a></p>
</li>
<li><p>åœ¨çº¿å·¥å…·<a href="http://www.degraeve.com/img2txt.php" target="_blank" rel="external">img2txt</a></p>
</li>
<li><p>ASCII GeneratoråŠŸèƒ½æ¯”è¾ƒé½å…¨ï¼Œä¸è¿‡éœ€è¦ä¸‹è½½ä½¿ç”¨å™¢~ ä¸‹è½½å‚è€ƒåœ°å€ï¼š<a href="http://pan.baidu.com/share/link?shareid=3161588673&amp;uk=3509597415" target="_blank" rel="external">ASCII Generator Portable(å°†å›¾ç‰‡è½¬ä¸ºå­—ç¬¦ç”») v2.0ä¸‹è½½</a></p>
</li>
</ul>
<p>ASCII Generatorä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>é¦–å…ˆè½½å…¥å›¾ç‰‡ï¼Œç„¶åè°ƒèŠ‚å¤§å°ã€å­—ä½“ã€äº®åº¦å¯¹æ¯”åº¦ã€æŠ–åŠ¨ç¨‹åº¦ï¼Œç›´åˆ°è‡ªå·±æ»¡æ„åï¼Œå°†å…¶å¤åˆ¶å‡ºæ¥ï¼š <img src="//img.aotu.io/FpT2xLD8nYAoIP7Lq-8sBusUPBfJ" alt="joy and ascii gen"></p>
</li>
<li><p>å¤åˆ¶åˆ°sublimeä¸­ï¼Œå°†æ¯è¡Œå¼€å¤´çš„æ¢è¡Œåˆ é™¤ï¼Œä¸”æ›¿æ¢æˆ\nã€‚æœ€ååªæœ‰ä¸€è¡Œä»£ç ï¼Œå³ä¿è¯æ²¡æœ‰æ¢è¡Œã€‚</p>
</li>
<li><p>æœ€åå†ä¸¢åˆ°console.log(â€œâ€)ä»£ç ä¸­å³å¯ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ ç»“åˆ%cåšå‡ºæ›´é…·ç‚«çš„æ•ˆæœã€‚</p>
</li>
</ol>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>å…³äºå…¼å®¹æ€§æ€»ç»“ï¼š</p>
<ul>
<li>åªæœ‰å¼€å‘è€…å·¥å…·æ‰“å¼€çš„æ—¶å€™IE8/9æ‰æ”¯æŒconsoleï¼›IE6/7ä¸æ”¯æŒconsoleä¸”æŠ›å‡ºé”™è¯¯ã€‚</li>
<li>%cä»¥åŠ%oã€%Oï¼ŒIEä¸æ”¯æŒï¼›è€Œfirefoxçš„%oå’Œ%Oçš„è¡Œä¸ºéƒ½æ”¯æŒ%oã€‚</li>
<li>%cçš„èƒŒæ™¯å›¾å±•ç¤ºç›®å‰åªæœ‰firebugæ”¯æŒï¼Œchromeæ•…æ„ä¸æ”¯æŒã€‚</li>
<li>é“¾æ¥çš„ä¸åŒæ˜¾ç¤ºï¼šchromeå¯ç‚¹å‡»è·³è½¬ï¼›ç«ç‹é»˜è®¤å¼€å‘è€…å·¥å…·çš„é“¾æ¥å‰é¢éœ€è¦æœ‰ä¸€ä¸ªç©ºæ ¼éš”å¼€æ–‡æœ¬æ‰å¯ç‚¹å‡»è·³è½¬ï¼Œè€Œfirebugæ€»æ˜¯ä¸å¯ç‚¹å‡»ï¼›IEä¸å¯ç‚¹å‡»è·³è½¬ã€‚</li>
</ul>
<p>æœ€åæƒ³è¯´çš„ï¼š å‰ç«¯äººå¯¹chromeæƒ…æœ‰ç‹¬é’Ÿï¼Œé‚£æ‹›è˜ä¿¡æ¯å°±åªåœ¨chromeæˆ–è€…webkitæµè§ˆå™¨ä¸‹æ˜¾ç¤ºå§ï¼Œå“ˆå“ˆã€‚</p>
<h2 id="5-å‚è€ƒé“¾æ¥ï¼š"><a href="#5-å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="5. å‚è€ƒé“¾æ¥ï¼š"></a>5. å‚è€ƒé“¾æ¥ï¼š</h2><p><a href="https://developers.google.com/web/tools/chrome-devtools/debug/console/console-write#string-substitution-and-formatting" target="_blank" rel="external">Diagnose and Log to Console | Web Tools - Google Developers</a></p>
<p><a href="https://developer.chrome.com/devtools/docs/console-api" target="_blank" rel="external">Console API Reference - Google Chrome</a></p>
<p><a href="http://7demo.github.io/Javascript%E7%94%9F%E6%88%90%E5%AD%97%E7%AC%A6-%E5%B7%A5%E5%85%B7%E7%AF%87/" target="_blank" rel="external">Javascriptç”Ÿæˆå­—ç¬¦ç”»</a></p>
<p><a href="http://caniuse.com/#search=console" target="_blank" rel="external">Can I use console </a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹åªæ˜¯ç”¨console æ§åˆ¶å°è¾“å‡ºç®€å•çš„æ–‡å­—ä¿¡æ¯ï¼Œä½†æ˜¯å½“consoleé‡åˆ°äº†å‰ç«¯çš„æƒ…æ€€ï¼Œæ•…äº‹å°±ä¸æ˜¯è¿™ä¹ˆå‘å±•çš„äº†~&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="console" scheme="https://aotu.io/tags/console/"/>
    
      <category term="å ä½ç¬¦" scheme="https://aotu.io/tags/%E5%8D%A0%E4%BD%8D%E7%AC%A6/"/>
    
      <category term="å­—ç¬¦ç”»" scheme="https://aotu.io/tags/%E5%AD%97%E7%AC%A6%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>å‡å¦‚HTTP/2å·²ç»æ™®åŠ</title>
    <link href="https://aotu.io/notes/2016/06/14/http2/"/>
    <id>https://aotu.io/notes/2016/06/14/http2/</id>
    <published>2016-06-14T09:55:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€é¡¹æ–°æŠ€æœ¯çš„æ¥ä¸´ï¼Œæ€»æ˜¯è‡ªä¸Šè€Œä¸‹çš„ï¼Œä»æ ‡å‡†æ¨å‡ºåˆ°è½¯ç¡¬ä»¶æ”¯æŒå†åˆ°å®æ–½ï¼Œç„¶åæ™®åŠï¼Œè¿™ä¸­é—´æ€»è¦ç»å†æ¼«é•¿çš„æ›´æ–°ä¹‹è·¯ã€‚æœ¬æ–‡æˆ‘ä»¬è·¨è¿‡æ…¢æ…¢é•¿å¤œï¼Œç›´æ¥è®¨è®º<code>å‡å¦‚</code>HTTP/2å·²ç»æ™®åŠï¼Œæˆ‘ä»¬å‰ç«¯è·Ÿç°åœ¨ä¼šæœ‰å“ªäº›ä¸åŒï¼Œä¹Ÿè®¸ä½ ä¼šè§‰å¾—å¤ªæ“ä¹‹è¿‡æ€¥ï¼Œæ²¡å¿…è¦è¿™ä¹ˆæ—©å¼€å§‹è®¨è®ºï¼Œç„¶è€Œå›çœ‹å†å²ï¼Œå„ç§æŠ€æœ¯æ€»ä¼šåœ¨æˆ‘ä»¬ä¸ç»æ„é—´é—¯å…¥æˆ‘ä»¬çš„å·¥ä½œï¼Œæ›´æ–°æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œä¸å…¶æªæ‰‹ä¸åŠä¸å¦‚ææ—©éƒ¨ç½²ï¼Œåªæœ‰å¿ƒæ€€è¿œæ–¹æˆ‘ä»¬æ‰èƒ½èµ°çš„æ›´è¿œã€‚</p>
<a id="more"></a>
<p>å¦‚æœä¸æ¸…æ¥šä»€ä¹ˆæ˜¯ HTTP/2 çš„å¯ä»¥å…ˆäº†è§£ä¸‹ï¼Œå‰é¢æœ‰ä¸€ç¯‡å›¾æ–‡å¹¶èŒ‚çš„ä»‹ç»HTTP/2çš„æ–‡ç«  <a href="//aotu.io/notes/2016/03/17/http2-char/">ä¼ é€é—¨</a></p>
<h2 id="ç°çŠ¶"><a href="#ç°çŠ¶" class="headerlink" title="ç°çŠ¶"></a>ç°çŠ¶</h2><p>å»å¹´ï¼ˆ2015å¹´5æœˆï¼‰HTTP/2æ ‡å‡†æ­£å¼å‘å¸ƒï¼Œå„å¤§æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨å‚å•†éƒ½å¼€å§‹å¤§é¢ç§¯æ”¯æŒè¿™ä¸€æ ‡å‡†ï¼Œå›½å†…å¤–å„å¤§åº”ç”¨ç½‘ç«™ä¹Ÿéƒ½å¼€å§‹çº·çº·è¸å…¥HTTP/2çš„é˜µè¥ï¼ŒFacebookã€Googleã€Twitterã€<a href="https://www.amazon.com/" target="_blank" rel="external">å›½å¤–äºšé©¬é€Š</a>ï¼ˆéƒ¨åˆ†è¯·æ±‚ï¼‰ã€<a href="https://www.tmall.com/" target="_blank" rel="external">å¤©çŒ«</a>ï¼ˆéƒ¨åˆ†è¯·æ±‚ï¼‰ã€<a href="https://www.taobao.com/" target="_blank" rel="external">æ·˜å®</a>ï¼ˆéƒ¨åˆ†è¯·æ±‚ï¼‰ï¼Œè¿˜æœ‰ä¸€äº›å°å‹ç«™ç‚¹æ¯”å¦‚ <a href="https://isux.tencent.com/" target="_blank" rel="external">ISUX</a> ç­‰ã€‚</p>
<p>ä¸€äº›å¤§å‹å…¬å¸ï¼Œå› ä¸ºæ¶æ„ä½“ç³»åŸå› å¯¼è‡´è¿ç§»å¸¦æ¥çš„é˜µç—›ï¼Œæ‹–ç´¯äº†å‡çº§HTTP/2çš„è¿›åº¦ï¼Œæœ‰å¿ƒæ— åŠ›ï¼Œåè€Œä¸€äº›å°å‹ç½‘ç«™ï¼Œæ¶æ„åˆç†çš„å…¬å¸å‡çº§èµ·æ¥æ›´è¿…é€Ÿä¸€äº›ï¼Œææ—©ä½“éªŒåˆ°äº†HTTP/2å¸¦æ¥çš„å¿«æ„Ÿã€‚</p>
<p>ç°åœ¨è½¯ç¡¬ä»¶éƒ½å·²åŸºæœ¬åˆ°ä½ï¼Œâ€œè¶Ÿé›·â€çš„å·²ç»æ¢å¥½äº†è·¯ï¼Œå°±ç­‰åç»­å¤§å†›æ€åˆ°ã€‚ä¹°æˆ¿å­çš„æ—¶å€™ï¼Œéƒ½è¯´æ—©ä¹°æ—©äº«å—ï¼ŒHTTP/2ä¹Ÿä¸€æ ·ï¼Œæˆ¿å­ä¹°æ™šäº†ï¼ŒHTTP/2ä½ è¿˜è¦å†ç­‰ä¹ˆï¼Œä½ è¦åšçš„å…¶å®å°±æ˜¯å°½æ—©å‡çº§å°½å¿«äº«å—ã€‚</p>
<h2 id="HTTP-2å·²ç»æ™®åŠ"><a href="#HTTP-2å·²ç»æ™®åŠ" class="headerlink" title="HTTP/2å·²ç»æ™®åŠ"></a>HTTP/2å·²ç»æ™®åŠ</h2><p>ä¹Ÿè®¸HTTP/2çœŸæ­£å…¨é¢æ™®åŠï¼Œå¯èƒ½è¿˜å¾—ä¸€ä¸¤å¹´ï¼Œæˆ–è€…æ˜¯ä¸‰å››å¹´ï¼Œé‚£ä¹ˆæˆ‘å°±ç›´æ¥ç©¿è¶Šåˆ°æœªæ¥çš„ä¸€å¤©ï¼Œ<code>å‡è®¾</code>HTTP/2å·²ç»æ™®åŠäº†ï¼Œé‚£ä¹ˆå¾ˆå¿«ä¼šæœ‰å¾ˆå¤šé—®é¢˜æ‘†åœ¨æˆ‘ä»¬é¢å‰ï¼šä»¥å‰çš„æ¶æ„è¿˜éœ€è¦ä¹ˆï¼Ÿå¦‚ä½•ç»„ç»‡ä»£ç æ›´èƒ½åˆç†æ”¯æŒHTTP/2ï¼Ÿæˆ‘ä»¬åå‡ å¹´çš„ä¼˜åŒ–æ€»ç»“è¿˜æœ‰ç”¨ä¹ˆï¼Ÿé›…è™å†›è§„è¿˜æ˜¯æˆ‘ä»¬çš„ä¼˜åŒ–çš„æ ‡å‡†ä¹ˆï¼Ÿ</p>
<p>åœ¨è®¨è®ºè¿™ä¹‹å‰æˆ‘ä»¬å†æ¥å›é¡¾ä¸‹ï¼ŒHTTP/2ç»™æˆ‘ä»¬æä¾›äº†ä»€ä¹ˆã€‚</p>
<h3 id="HTTP-2ç»™æˆ‘ä»¬çš„å¥½å¤„"><a href="#HTTP-2ç»™æˆ‘ä»¬çš„å¥½å¤„" class="headerlink" title="HTTP/2ç»™æˆ‘ä»¬çš„å¥½å¤„"></a>HTTP/2ç»™æˆ‘ä»¬çš„å¥½å¤„</h3><ul>
<li><strong> å¤šè·¯å¤ç”¨ </strong>ï¼šä¸€æ¬¡TCPæ¡æ‰‹ï¼Œå¤šä¸ªåŒåŸŸå¹¶è¡Œè¯·æ±‚ï¼Œè¯·æ±‚å’Œå“åº”åŒæ—¶å‘é€æ¥å—ï¼Œç„¶åå†æ‹¼è£…ç»„åˆï¼Œä¸é˜»å¡ï¼›</li>
<li><strong> ä¼˜å…ˆçº§å’Œä¾èµ–æ€§ï¼ˆPriorityï¼‰ </strong>ï¼šå¯ä»¥è¯·æ±‚çš„æ—¶å€™å‘ŠçŸ¥æœåŠ¡å™¨ç«¯ï¼Œèµ„æºåˆ†é…æƒé‡ï¼Œä¼˜å…ˆåŠ è½½é‡è¦èµ„æºï¼›</li>
<li><strong> æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰ </strong>ï¼šæ ¹æ®å®¢æˆ·ç«¯éœ€æ±‚ï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€èµ„æºï¼Œå‡å°‘è¯·æ±‚è€—æ—¶ï¼›</li>
</ul>
<p>æ¦‚å¿µç½‘ä¸Šå¤§æŠŠï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å‡ ä¸ªä¾‹å­æ¥åˆ†æï¼ŒæŠŠæ¦‚å¿µç›´æ¥ä½“ç°åœ¨å®ä¾‹ä¸­ï¼š</p>
<h4 id="å¤šè·¯å¤ç”¨"><a href="#å¤šè·¯å¤ç”¨" class="headerlink" title="å¤šè·¯å¤ç”¨"></a>å¤šè·¯å¤ç”¨</h4><p><a href="https://l-zhi.com:8081/item1.html" target="_blank" rel="external">Demo HTTP/2 å’Œ HTTP1.1 å›¾ç‰‡è¯·æ±‚å¯¹æ¯”</a></p>
<p>ç¤ºä¾‹åˆ†åˆ«ç”¨169å¼ å›¾ç‰‡æ‹¼åˆæˆä¸€æ•´å¼ å¤§å›¾ï¼Œç¬¬ä¸€ç»„å›¾ç‰‡è¯·æ±‚ä¸ºHTTP1.1ï¼Œç¬¬äºŒç»„è¯·æ±‚ä¸ºHTTP/2ï¼Œä¸‹é¢æˆ‘æˆªå–çš„åŠ è½½è¿‡ç¨‹çš„åŠ¨ç”»ã€‚</p>
<p><strong> HTTP1.1 vs HTTP/2 è¯·æ±‚é€Ÿåº¦ </strong><br><img src="//img.aotu.io/FqFshsS87Z4RBBjVkGA80JkxMD1j" alt="http1 vs http2"></p>
<p>åŒæ—¶å¯¼å‡ºäº† <a href="https://l-zhi.com/demo/http2/har/http-images.har" target="_blank" rel="external">http1.1-images.har</a> å’Œ <a href="https://l-zhi.com/demo/http2/har/http2-images.har" target="_blank" rel="external">http2-images.har</a> æ–‡ä»¶ï¼Œæˆ‘ä»¬å€ŸåŠ©ç¬¬ä¸‰æ–¹æœåŠ¡<a href="http://www.softwareishard.com/har/viewer/" target="_blank" rel="external">HAR Viewer</a> æ¥çœ‹ä¸‹ï¼Œè¯·æ±‚ç»†èŠ‚ï¼š</p>
<blockquote>
<p>HARæ–‡ä»¶ æ˜¯ä»¥.harç»“å°¾çš„JSONæ–‡ä»¶ï¼Œç”¨äºè®°å½•äº†HTTPè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ã€‚<a href="https://www.maxcdn.com/one/visual-glossary/har-file/" target="_blank" rel="external">è¿™é‡Œ</a>æœ‰è¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥åœ¨Chromeä¸­å¼€å‘è€…å·¥å…·çš„Networkä¸­ç‚¹å³é”®å¯¼å‡º.haræ–‡ä»¶ã€‚</p>
</blockquote>
<p>ä¸‹å›¾å°±æ˜¯HARæ–‡ä»¶åˆ†æçš„æˆªå›¾ï¼š</p>
<p><strong> HTTP1.1 </strong><br><img src="//img.aotu.io/FsVkpfzc6-um1kWxhdI7-TjE3dpG" alt="http1.1"></p>
<p>ä¸Šå›¾ä¸ºHTTP1.1çš„å›¾ç‰‡è¯·æ±‚ï¼Œè¯·æ±‚åŸºæœ¬ä¸Šæ˜¯6ä¸ªä¸€ç»„ï¼Œç„¶å6ä¸ªå®Œæˆåå† <strong>ä¸²è¡Œè¯·æ±‚</strong> ä¸‹ä¸€ç»„ã€‚</p>
<p><strong> HTTP/2 </strong><br><img src="//img.aotu.io/Fneyvmj5x-SWWjAxPoNsYO_3Dvst" alt="http2"></p>
<p>ä»ä¸Šé¢çš„éƒ¨åˆ†æˆªå›¾ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œæ‰€æœ‰è¯·æ±‚åŸºæœ¬éƒ½æ˜¯å¹¶è¡Œè¯·æ±‚ï¼Œç”±äºæ•°æ®å‘é€é‡è¾ƒå¤§ï¼Œæ‰€ä»¥ä¼šæœ‰â€œç­‰å¾…â€ï¼Œè¿™é‡Œçš„ç­‰å¾…åº”è¯¥æ˜¯æ•°æ®æµåœ¨å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç«¯é‡æ–°ç»„åˆçš„è¿‡ç¨‹ï¼Œæ­£æ˜¯å› ä¸ºè¿™æ ·æ‰€ä»¥å•ä¸ªè¯·æ±‚æ—¶é—´ç›¸å¯¹æ›´é•¿ã€‚ä½†æ˜¯å°±æ•´ä½“é€Ÿåº¦æ¥è¯´ HTTP/2 ä¸º1.53sï¼Œ HTTP1.1ä¸º 2.47sã€‚é€Ÿåº¦å¿«äº†è¿‘<strong>40%</strong>ã€‚</p>
<p><img src="//img.aotu.io/FlrXK_Y8m2Vk301nl4dQBuC9Yw_s" alt="http2"></p>
<p>ä¸Šé¢è¿™å¼ å›¾ä¹Ÿæ˜¯HTTP/2çš„ä¸€éƒ¨åˆ†ï¼Œä»å¦ä¸€é¢ä¹Ÿå¯ä»¥ä½“ç°å‡ºï¼Œå¹¶è¡Œè¯·æ±‚çš„çŸ­æ¿ï¼Œå°±æ˜¯<a href="http://baike.baidu.com/view/47735.htm" target="_blank" rel="external">æœ¨æ¡¶ç†è®º</a>ã€‚æ‰€ä»¥è¯·æ±‚å°½é‡åšåˆ°ç»†ç²’åº¦,èƒ½æ›´å¿«è¿”å›æ•°æ®ã€‚</p>
<blockquote>
<p>PSï¼šå½“ç„¶æˆ‘åªæˆªå–äº†æ¯”è¾ƒèƒ½çªå‡ºå·®åˆ«çš„å›¾ï¼Œå…·ä½“çš„å®Œæ•´ç‰ˆå¯ä»¥ç‚¹è¿›<a href="http://www.softwareishard.com/har/viewer/" target="_blank" rel="external">HAR Viewer</a>ï¼Œç„¶åæ‹–è¿›å»æˆ‘ä»¬ä¸Šé¢æä¾›çš„haræ–‡ä»¶ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯HTTP/2ä¸ºæˆ‘ä»¬å¸¦æ¥çš„æœ€å¤§çš„å¥½å¤„<strong>å¤šè·¯é‡å¤</strong>ã€‚</p>
<p><strong>æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰</strong></p>
<p><a href="https://l-zhi.com:8081/generalpage" target="_blank" rel="external">Demo æ™®é€šåŠ è½½</a> &amp; <a href="https://l-zhi.com:8081/serverpush" target="_blank" rel="external">Demo Server Push</a></p>
<p>ç¤ºä¾‹åˆ†åˆ«ç”¨Server Pushæ¨é€ï¼Œå’Œä¼ ç»Ÿçš„åŠ è½½ï¼Œå¸¦æ¥çš„æ€§èƒ½ä¸Šçš„å·®å¼‚ï¼ŒåŒæ—¶æˆ‘ä¹Ÿå¯¼å‡ºäº†ä¸¤ä¸ªHARæ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å¯è‡ªè¡Œä¸‹è½½ <a href="https://l-zhi.com/demo/http2/har/serverpush.har" target="_blank" rel="external">serverpush.har</a> å’Œ <a href="https://l-zhi.com/demo/http2/har/nomalrequest.har" target="_blank" rel="external">nomalrequest.har</a>ã€‚</p>
<p>ä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªæ–‡ä»¶çš„è¯·æ±‚æˆªå›¾ï¼ˆä¸‹é¢æ˜¯Server Pushï¼Œ ä¸Šé¢æ˜¯æ™®é€šHTTP/2çš„è¯·æ±‚ï¼‰ï¼š</p>
<p><img src="//img.aotu.io/FpT69QRgLeIs4r8wzXkS-3TXyO-m" alt="server push"></p>
<p>HTTP/2 Server Push å’Œ æ™®é€šè¯·æ±‚ç›¸æ¯”ï¼Œå»æ‰äº†è¯·æ±‚é˜¶æ®µï¼Œç›´æ¥è¿”å›æ•°æ®ï¼ˆContent Downloadï¼‰ï¼Œæ•°æ®è·å–é€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”pushä¸­å¯ä»¥åµŒå…¥é€»è¾‘ï¼Œå¹¶ä¸”è¯·æ±‚è¿˜å¯ä»¥è¿›è¡Œç¼“å­˜ã€‚</p>
<p>è´´ä¸€å°æ®µä»£ç ï¼Œä¸‹é¢çš„ä»£ç ä¸ºè¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œä¸»åŠ¨æ¨é€zeptoä»£ç ç»™å®¢æˆ·ç«¯çš„æ ¸å¿ƒä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">router.get(<span class="string">'/serverpush'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ctx, next</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> zepto = fs.readFileSync(resolve(root, <span class="string">'public/js/zepto.js'</span>), &#123; <span class="attr">encoding</span>: <span class="string">'UTF-8'</span> &#125;)</div><div class="line">  <span class="keyword">var</span> html = fs.readFileSync(resolve(root, <span class="string">'public/item2_1.html'</span>), &#123; <span class="attr">encoding</span>: <span class="string">'UTF-8'</span> &#125;)</div><div class="line">  ctx.res.push(<span class="string">'/zepto.js'</span>, options, <span class="function"><span class="keyword">function</span>(<span class="params">err, stream</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span>;</div><div class="line">      zlib.gzip(zepto,<span class="function"><span class="keyword">function</span>(<span class="params">err, buf</span>)</span>&#123;</div><div class="line">        stream.end(buf)</div><div class="line">      &#125;)</div><div class="line">  &#125;);</div><div class="line">  ctx.body = html</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><a href="https://github.com/l-zhi/http2-example/blob/master/serve/router.js" target="_blank" rel="external">è¿™é‡Œå¯ä»¥æŸ¥çœ‹å®Œæ•´çš„Server Pushä»£ç </a></p>
<p><strong>å…³äºä¼˜å…ˆçº§å’Œä¾èµ–æ€§ï¼ˆPriorityï¼‰</strong></p>
<p>ä¼˜å…ˆçº§çš„è®¾ç½®å¯ä»¥çœ‹ä¸‹<a href="https://nghttp2.org/blog/2014/11/16/visualization-of-http-slash-2-priority/" target="_blank" rel="external">è¿™ä¸€ç¯‡æ–‡ç« </a>ï¼Œé€šè¿‡è®¾ç½®è¯·æ±‚èµ„æºçš„Priporityï¼Œè¾¾åˆ°èµ„æºè·å–çš„ä¼˜å…ˆçº§ã€‚</p>
<p><strong>æ²¡æœ‰è®¾ç½®Pripority</strong><br><img src="//img.aotu.io/FgFkcpBOqiEASlhjSxUzFRLKKegl" alt="pripority"></p>
<p><strong>è®¾ç½®CSS å’Œ JS çš„ Priporityå</strong><br>![pripority]//img.aotu.io/Fr9ScV9DSWoyn8yr0RWvbpWhQq30)</p>
<p>è®¾ç½®Priporityåï¼ŒCSS å’Œ JS æ˜æ˜¾é€Ÿåº¦æ›´å¿«äº†ï¼Œä½†æ˜¯ä»£ä»·æ˜¯ç‰ºç‰²äº†å›¾ç‰‡çš„éƒ¨åˆ†è¯·æ±‚çš„é€Ÿåº¦ã€‚</p>
<p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œç‰›Bé—ªé—ªçš„<strong>HTTP/2</strong>å·²ç»åœ¨å±å¹•ä¸Šç† ç† ç”Ÿè¾‰äº†ã€‚</p>
<p>é‚£ä¹ˆå›è¿‡å¤´æ¥å†çœ‹çœ‹æˆ‘ä»¬ä»¥å‰é’ˆå¯¹HTTP1.1çš„ä¼˜åŒ–ï¼Œæˆ‘è§‰å¾—å¾ˆå¤šå…¶å®éƒ½æ˜¯åº”å¯¹HTTP1.1ä¸è¶³çš„HACKï¼ŒHTTP/2ä¸­è¿™äº›éƒ½å·²ç»ä¸æ˜¯é—®é¢˜äº†ï¼Œæ‰€ä»¥HACKå¯ä»¥å»æ‰äº†ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›ã€‚</p>
<h3 id="é›ªç¢§å›¾ï¼ˆSpriteï¼‰"><a href="#é›ªç¢§å›¾ï¼ˆSpriteï¼‰" class="headerlink" title="é›ªç¢§å›¾ï¼ˆSpriteï¼‰"></a>é›ªç¢§å›¾ï¼ˆSpriteï¼‰</h3><p>è¿™é‡ŒåŒæ ·æˆ‘å†™äº†ä¸€ä¸ªæµ‹è¯•ç¤ºä¾‹ <a href="https://l-zhi.com:8081/item4-1.html" target="_blank" rel="external">Demo é›ªç¢§å›¾</a> &amp; <a href="https://l-zhi.com:8081/item4-2.html" target="_blank" rel="external">Demo æ²¡æœ‰é›ªç¢§å›¾</a>ï¼Œå¦‚ä¸‹å›¾ä¸Šé¢ä¸ºä½¿ç”¨é›ªç¢§å›¾çš„é¡µé¢è¯·æ±‚ï¼Œ ä¸‹é¢æ˜¯æ™®é€šçš„è¯·æ±‚é¡µé¢ã€‚<br><img src="//img.aotu.io/Fp7MpCvakuWNCeo0RoRghoEcpznK" alt="Sprite"></p>
<p>ç”±äºæœ¨æ¡¶ç†è®ºï¼Œåœ¨éé›ªç¢§å›¾è¯·æ±‚ä¸­ï¼Œç”±äºæœ€åè¿”å›é€Ÿåº¦å†³å®šäºé‚£ä¸ªæœ€æ…¢çš„è¯·æ±‚ï¼Œæ‰€ä»¥éé›ªç¢§å›¾å•å¼ 524Bçš„æ–‡ä»¶é€Ÿåº¦ï¼Œè·Ÿé›ªç¢§å›¾6.9Ké€Ÿåº¦æ¯”ï¼Œè¿˜æ…¢ä¸€äº›ï¼Œè™½ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å†çœ‹onloadäº‹ä»¶è§¦å‘æ—¶é—´ï¼Œå› ä¸ºå¤šè·¯å¤ç”¨çš„ç‰¹æ€§ï¼Œè™½ç„¶è¯·æ±‚è¶…è¿‡4å€ä½†æ˜¯è¯·æ±‚æ€»æ—¶é•¿å¹¶ä¸æ˜¯å¤š4å€ï¼Œè€Œæ˜¯å¤šäº†119msï¼ˆ1-2å¼ å›¾ç‰‡çš„è¯·æ±‚æ—¶é•¿ï¼‰ï¼Œè€Œä¸”æ ¹æ®è¯·æ±‚æ›´å¤šå…¶å®å·®è·ä¸ä¼šä½“ç°åœ¨è¯·æ±‚çš„å¤šå°‘ï¼Œè€Œåªä¼šä½“ç°åœ¨è¯·æ±‚çš„å“åº”æ—¶é—´å’Œä¸‹è½½æ•°æ®çš„å¤§å°ï¼Œè€Œé›ªç¢§å›¾å ç”¨çš„è¯·æ±‚åº”è¯¥éƒ½æ˜¯å¾ˆå°çš„ï¼Œæ‰€ä»¥åˆå¹¶ä¸å¦å…¶å®ä¸æ˜æ˜¾ï¼Œå†è€ƒè™‘åˆ°é›ªç¢§å›¾çš„ç»´æŠ¤æˆæœ¬ï¼Œå…¶å®å°±HTTP/2æ¥è¯´å¹¶ä¸æ¨èå†ä½¿ç”¨é›ªç¢§å›¾äº†ã€‚ï¼ˆä¸è¿‡ä¸ºäº†å…¼å®¹HTTP1.1ï¼Œå…¶å®ç°é˜¶æ®µå¤šç‰ˆæœ¬å¹¶å­˜çš„æ—¶å€™è¿˜æ˜¯å»ºè®®ä¿ç•™ï¼Œä¸ç”¨å†å•ç‹¬å¤„ç†é€»è¾‘ï¼‰</p>
<p>HTTP1.1ä¸­ï¼Œæ‰€æœ‰ä¸ºäº†å‡å°‘è¯·æ±‚è€Œåšå‡ºçš„HACKï¼Œåœ¨HTTP/2ä¸­éƒ½å·²ç»ä¸å†æ˜¯æ€§èƒ½ä¼˜åŒ–è€ƒè™‘çš„ä¸»è¦ç‚¹äº†ã€‚</p>
<h3 id="åˆ†åŸŸå"><a href="#åˆ†åŸŸå" class="headerlink" title="åˆ†åŸŸå"></a>åˆ†åŸŸå</h3><p>HTTP1.1æ—¶ä»£ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨å¤šä¸ªåŸŸåæ¥åšè¯·æ±‚ä¼˜åŒ–ï¼Œå› ä¸ºæµè§ˆå™¨åŒåŸŸåä¸‹ä¼šæœ‰å¹¶è¡Œè¯·æ±‚æ•°é™åˆ¶ï¼ˆæ ¹æ®æµè§ˆå™¨ä¸åŒ2-8ä¸ªï¼Œæ¯”å¦‚IE6åªæœ‰ä¸¤ä¸ªï¼‰ï¼Œç„¶è€ŒDNSè§£æåˆå¾—é¢å¤–èŠ±æ—¶é—´ï¼Œæ‰€ä»¥ä»¥å‰å¯¹åŸŸåçš„ä¸ªæ•°è¿˜éœ€è¦æ ¹æ®å„è‡ªç½‘ç«™æ‰¾ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚HTTP/2å°±ä¸ç”¨ç†ä¼šè¿™ä¸ªäº†ï¼Œå› ä¸ºå¤šè·¯å¤ç”¨ï¼Œå¹¶è¡Œè¯·æ±‚ä¸å†æ˜¯ç“¶é¢ˆï¼Œæ”¶æ•›äº†åŸŸååè¿˜èƒ½å‡å°‘DNSè§£ææ—¶é—´ï¼Œæ‰€ä»¥HTTP/2ä¸­æˆ‘ä»¬ä¸ç”¨å†ç»†åˆ†åŸŸåäº†ã€‚</p>
<h3 id="æ¥å£è¯·æ±‚"><a href="#æ¥å£è¯·æ±‚" class="headerlink" title="æ¥å£è¯·æ±‚"></a>æ¥å£è¯·æ±‚</h3><p>HTTP1.1çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæ ¹æ®å½“å‰çš„é¡µé¢ï¼Œå°†è¯·æ±‚åˆå¹¶æˆä¸€ä¸ªã€‚HTTP/2ä¸­å¯ä»¥æ›´ç»†ç²’åº¦çš„ç»„åˆä½ çš„æ¥å£ï¼Œä¸ç”¨å†æ ¹æ®æŸä¸ªé¡µé¢æ‰€éœ€æ•°æ®ï¼Œæ¥ç»„åˆä¸€ä¸ªä¸“é—¨çš„æ— æ„ä¹‰çš„æ¥å£äº†ï¼ˆä¸ç”¨åˆå¹¶è¯·æ±‚ï¼‰ï¼Œä¸æ€•è¯·æ±‚å¤šï¼Œå°±æ€•å•ä¸ªè¯·æ±‚å¤ªæ…¢ã€‚</p>
<h3 id="å†…è”èµ„æº"><a href="#å†…è”èµ„æº" class="headerlink" title="å†…è”èµ„æº"></a>å†…è”èµ„æº</h3><p>æœ‰äººè¯´Server Pushå°±æ˜¯å¦å¤–ä¸€ç§å½¢å¼çš„å†…è”ï¼Œå…¶å®ä¸æ˜¯ï¼Œå†…è”å¤ªLowäº†ï¼Œå®Œå…¨æ— æ³•è·Ÿå®ƒæ¥æ¯”è¾ƒã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬æ¥å›é¡¾ä¸‹ï¼ŒHTTP1.1æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å†…è”ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å‡å°‘è¯·æ±‚ï¼Œæˆ‘ä»¬ä¸ºäº†åŠ å¿«é¦–é¡µçš„æ¸²æŸ“é€Ÿåº¦ï¼Œç”šè‡³ä¼šæŠŠé¦–é¡µç¬¬ä¸€å±çš„æ ·å¼å†…è”åˆ°HTMLä¸­ï¼Œä¸€èµ·è¿”å›ï¼ŒåŠ é€Ÿé¦–å±æ¸²æŸ“ã€‚ç„¶è€Œå½“æœ‰äººæƒ³æ”¹åŠ¨é¦–å±ä»»ä½•å†…å®¹ï¼Œæ— è®ºå¤šå°éƒ½å¾—é‡æ–°æ›¿æ¢æ‰æ•´ä¸ªé¡µé¢ã€‚</p>
<p>åœ¨HTTP/2ä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨é€çš„æ–¹å¼ç»™ä½ æƒ³è¦çš„èµ„æºï¼Œè·Ÿä½ çš„HTMLè¯·æ±‚ä¸€å—å„¿è¿”å›ç»™ä½ ï¼Œä¸ä»…å¦‚æ­¤ï¼Œpushçš„å†…å®¹è¿˜å¯ä»¥è¿›è¡Œç¼“å­˜ï¼Œå¤šé¡µé¢å…±äº«ã€‚</p>
<h3 id="å…¼å®¹"><a href="#å…¼å®¹" class="headerlink" title="å…¼å®¹"></a>å…¼å®¹</h3><p><strong>å…ˆæ¥çœ‹ä¸‹å…¼å®¹å’Œå„ç‰ˆæœ¬å®¢æˆ·ç«¯å æœ‰ç‡ç»Ÿè®¡</strong></p>
<p>æ•°æ®æ¥è‡ª<a href="http://caniuse.com/" target="_blank" rel="external">caniuse</a><br><img src="//img.aotu.io/FsBNKh9HeJfE9WIfM-hMEaw3YxFe" alt="can i use"></p>
<p><strong> PCæµè§ˆå™¨å æœ‰ç‡ </strong><br>æ•°æ®æ¥è‡ªç™¾åº¦ç»Ÿè®¡<br><img src="//img.aotu.io/FvwDB2Ijc9PgYC5ov7c14DXlewwR" alt="pc"></p>
<p><strong> IOS &amp; Andorid æ“ä½œç³»ç»Ÿç‰ˆæœ¬å æœ‰ç‡ </strong><br>æ•°æ®æ¥è‡ªå‹ç›Ÿ 2016å¹´ 6æœˆ5æ—¥ç»Ÿè®¡æ•°æ®ï¼Œçº¢è‰²ä¸ºæ”¯æŒç‰ˆæœ¬<br><img src="//img.aotu.io/FiQfDsFbETYR95vJ8rRUPfrHGtqV" alt="å æœ‰ç‡"></p>
<p>ç»“è®ºï¼šPC ç«¯ Chrome å æœ‰ç‡å·²ç»è¿‘ 40%ï¼Œç§»åŠ¨ Android5.0 ä»¥ä¸Šå  26%ï¼ŒIOS9.2 å  60% ä»¥ä¸Šï¼Œæ‰€ä»¥ä¿å®ˆä¼°è®¡ï¼Œè‡³å°‘ç°é˜¶æ®µå‡çº§HTTP/2ï¼Œå°±å·²ç»èƒ½ä¿è¯ 1/3 çš„äººèƒ½äº«å—åˆ°HTTP/2å¸¦æ¥çš„å¿«æ„Ÿï¼Œè€Œä¸”è¿™ä¸ªæ•°å­—éšç€æ—¶é—´ä¼šå¿«é€Ÿå¢é•¿ã€‚<br>åŒæ—¶HTTPæ˜¯æ”¯æŒå‘å‰å…¼å®¹çš„ï¼Œå¦‚æœä½ çš„æµè§ˆå™¨ä¸æ”¯æŒHTTP/2å¯ä»¥é™çº§æˆHTTP1.1ï¼Œè€Œä¸”æœåŠ¡ç«¯ä¹Ÿå¯ä»¥é€šè¿‡è¯·æ±‚æ¥åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯ä¸æ˜¯æ”¯æŒHTTP/2ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚æ¥è¿”å›HTTP/2ç‰ˆæœ¬çš„ç½‘ç«™ã€‚è¿™æ ·å°±èƒ½å°½é‡è®©æ›´å¤šäººä½“éªŒåˆ°HTTP/2çš„ä¸€äº›ç‰¹æ€§äº†ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–äººçš„ä½¿ç”¨ã€‚</p>
<p>ä»¥å‰å½“æˆ‘ä»¬æ— æ³•å¿«é€Ÿæå‡ç½‘ç»œé€Ÿåº¦ï¼Œæ— æ³•æ”¹å˜ä¸€äº›ç¡¬ä»¶ä¸Šçš„æ€§èƒ½ï¼Œèƒ½åšçš„å¯èƒ½åªæœ‰ä»£ç é˜¶æ®µï¼Œç„¶è€Œç°åœ¨æœ‰äº†ä¸€ç§å¼ºåŠ²çš„æ€§èƒ½æå‡æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯HTTP/2ï¼Œä¹Ÿæ˜¯ç›®å‰æ€§ä»·æ¯”æœ€é«˜çš„æ€§èƒ½æå‡æ–¹æ¡ˆäº†ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ è¿˜æ˜¯å¾ˆçº ç»“HTTP/2çš„å…¼å®¹æ€§ï¼Œæ¨èå¦ä¸€ä¸ªHTTPåè®® <strong>SPDY</strong>ï¼Œè™½ç„¶HTTP/2çš„å‡ºç°ï¼Œè¿Ÿæ—©ä¼šæ›¿æ¢æ‰SPDYï¼Œä½†æ˜¯ä½œä¸ºHTTP/2çš„å‰èº«ï¼Œå…¼å®¹æ€§ä¼šæ›´å¥½,æ¯”å¦‚æ·˜å®ï¼Œå¤©çŒ«éƒ½å·²ç»æ”¯æŒSPDYäº†ï¼Œä¸ªäººè§‰å¾—æ›¿æ¢SPDYå°±æ˜¯æ—¶é—´é—®é¢˜ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èä»HTTP/2å¼€å§‹å§ã€‚</p>
<p>ä¸è¿‡æ—¢ç„¶æåˆ°å°±å…ˆçœ‹çœ‹å…¼å®¹æ€§ï¼š<br><img src="//img.aotu.io/Flx6_y_f3ZCJdDKy1WaZHBhTITHd" alt="å…¼å®¹æ€§"></p>
<p>SPDYä¸æ˜¯æœ¬æ–‡é‡ç‚¹å°±æ¨èä¸€äº›èµ„æ–™ï¼š<br><a href="https://zh.wikipedia.org/zh/SPDY" target="_blank" rel="external">SPDYä»‹ç»</a><br><a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html" target="_blank" rel="external">nginx é…ç½®SPDY</a><br><a href="https://github.com/indutny/node-spdy" target="_blank" rel="external">node-spdy ä¸€ä¸ªnodeåº“æ”¯æŒHTTP/2 å’Œ SPDY</a><br><a href="https://blog.cloudflare.com/introducing-http2/" target="_blank" rel="external">HTTP/2 is here! Goodbye SPDY? Not quite yet</a></p>
<h2 id="æœ¬æ–‡çš„Demo-åŠ-æµ‹è¯•ä»£ç "><a href="#æœ¬æ–‡çš„Demo-åŠ-æµ‹è¯•ä»£ç " class="headerlink" title="æœ¬æ–‡çš„Demo åŠ æµ‹è¯•ä»£ç "></a>æœ¬æ–‡çš„Demo åŠ æµ‹è¯•ä»£ç </h2><p><a href="https://github.com/l-zhi/http2-example" target="_blank" rel="external">ä»£ç åœ°å€</a><br><a href="https://l-zhi.com:8081/" target="_blank" rel="external">æµ‹è¯•Demo</a></p>
<h3 id="æœ¬æ–‡å‚è€ƒèµ„æ–™"><a href="#æœ¬æ–‡å‚è€ƒèµ„æ–™" class="headerlink" title="æœ¬æ–‡å‚è€ƒèµ„æ–™"></a>æœ¬æ–‡å‚è€ƒèµ„æ–™</h3><p><a href="https://nghttp2.org/blog/2014/11/16/visualization-of-http-slash-2-priority/" target="_blank" rel="external">nghttp2.org</a><br><a href="https://kinsta.com/learn/what-is-http2/" target="_blank" rel="external">å¾ˆæ£’çš„ä»‹ç»HTTP/2çš„æ–‡ç« </a><br><a href="http://www.softwareishard.com/har/viewer" target="_blank" rel="external">HAR Viewer æœ€æ£’çš„haré¢„è§ˆæœåŠ¡</a><br><a href="https://imququ.com/series.html" target="_blank" rel="external">Jerry Qu çš„åšå®¢</a><br><a href="https://http2.github.io/" target="_blank" rel="external">HTTP/2ç‰ˆæœ¬å‘å¸ƒé¡µ</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€é¡¹æ–°æŠ€æœ¯çš„æ¥ä¸´ï¼Œæ€»æ˜¯è‡ªä¸Šè€Œä¸‹çš„ï¼Œä»æ ‡å‡†æ¨å‡ºåˆ°è½¯ç¡¬ä»¶æ”¯æŒå†åˆ°å®æ–½ï¼Œç„¶åæ™®åŠï¼Œè¿™ä¸­é—´æ€»è¦ç»å†æ¼«é•¿çš„æ›´æ–°ä¹‹è·¯ã€‚æœ¬æ–‡æˆ‘ä»¬è·¨è¿‡æ…¢æ…¢é•¿å¤œï¼Œç›´æ¥è®¨è®º&lt;code&gt;å‡å¦‚&lt;/code&gt;HTTP/2å·²ç»æ™®åŠï¼Œæˆ‘ä»¬å‰ç«¯è·Ÿç°åœ¨ä¼šæœ‰å“ªäº›ä¸åŒï¼Œä¹Ÿè®¸ä½ ä¼šè§‰å¾—å¤ªæ“ä¹‹è¿‡æ€¥ï¼Œæ²¡å¿…è¦è¿™ä¹ˆæ—©å¼€å§‹è®¨è®ºï¼Œç„¶è€Œå›çœ‹å†å²ï¼Œå„ç§æŠ€æœ¯æ€»ä¼šåœ¨æˆ‘ä»¬ä¸ç»æ„é—´é—¯å…¥æˆ‘ä»¬çš„å·¥ä½œï¼Œæ›´æ–°æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œä¸å…¶æªæ‰‹ä¸åŠä¸å¦‚ææ—©éƒ¨ç½²ï¼Œåªæœ‰å¿ƒæ€€è¿œæ–¹æˆ‘ä»¬æ‰èƒ½èµ°çš„æ›´è¿œã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="HTTP2" scheme="https://aotu.io/tags/HTTP2/"/>
    
      <category term="å‰ç«¯æŠ€æœ¯" scheme="https://aotu.io/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>Adobe Sparkè¯•ç”¨æ‰‹è®°</title>
    <link href="https://aotu.io/notes/2016/05/27/adobe-spark/"/>
    <id>https://aotu.io/notes/2016/05/27/adobe-spark/</id>
    <published>2016-05-27T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>5æœˆï¼Œå¤ï¼Œåˆå¤ã€‚ä¸€ä¸ªä¸èµ·çœ¼çš„æ—¥å­ï¼Œèµ·çœ¼çš„æ˜¯ä¸€å®¶å…¬å¸ï¼Œä¸€æ¬¾äº§å“ï¼Œå®ƒå«Adobeï¼Œå®ƒå«Sparkã€‚æ²¡æœ‰äººçŸ¥é“Adobeç©¶ç«Ÿæœ‰æ²¡æœ‰å‘å¸ƒè¿‡å¤šç»ˆç«¯äº§å“ï¼ŒçœŸæ­£æ„ä¹‰çš„å¤šç»ˆç«¯äº§å“ï¼Œå®ƒä¿¨ç„¶åŠ¨æ‰‹äº†ï¼Œå°±åœ¨ä¸€å‘¨ä¹‹å‰ï¼Œå¹²è„†åˆ©è½ï¼Œä¸å¸¦ä¸€ä¸è¿Ÿç–‘ã€‚</p>
<p>ä¸–äººå°½çŸ¥Adobeä¹‹åï¼Œæºäºå…¶å®¢æˆ·ç«¯è½¯ä»¶ä¹‹ç ”å‘ï¼Œå°¤é•¿äºPhotoshopï¼Œæ˜¾äºFlashã€After Effectsâ€¦ åæ¥è¯¸ç±»äº§å“æ‚‰æ•°å½’äºå¤§å…¨-Creative Suiteï¼Œå½“ä»Šè®¾è®¡ç±»è½¯ä»¶ä»¥å®ƒä¸ºå°Šï¼Œæ‰€å‘æ— æ•Œã€‚å³ä¾¿åæ¥çš„Creative Cloudï¼Œä¹Ÿåªæ˜¯äº§å“è¿è¥æ–¹å¼çš„æ”¹å˜ã€æ•°æ®å±‚é¢çš„äº‘æœåŠ¡åŒ–ï¼Œå¹¶æ²¡æœ‰è„±ç¦»ä¼ ç»Ÿå®¢æˆ·ç«¯è½¯ä»¶çš„å®è´¨èŒƒç•´ï¼Œè°ˆä¸ä¸Šå¤šç»ˆç«¯äº§å“ã€‚</p>
<p>è€Œéšç€äº‘æœåŠ¡ã€HTML5ã€CSS3ç­‰è¶Šæ¥è¶Šé«˜ç«¯çš„ç§»åŠ¨å¼€å‘æŠ€æœ¯çš„æˆç†Ÿä¸å¹¿æ³›åº”ç”¨ï¼Œä»¥åŠæµè§ˆå™¨ä½“éªŒä¸æ€§èƒ½çš„è¿…çŒ›å‘å±•ï¼ŒWebäº§å“ä¸ä¼ ç»Ÿå®¢æˆ·ç«¯äº§å“çš„ä½¿ç”¨ä½“éªŒå·®è·æ­£åœ¨è¿…é€Ÿç¼©å°ã€‚ä¹Ÿè®¸åœ¨ç§»åŠ¨äº’è”ç½‘çš„å¹´ä»£ï¼Œæ•´åˆäº‘æœåŠ¡ä»¥æµè§ˆå™¨ä¸ºå®¢æˆ·ç«¯å®¿ä¸»çš„Webåº”ç”¨ç»“åˆAPPå®¢æˆ·ç«¯çš„å¤šç»ˆç«¯äº§å“æ‰æ˜¯æœªæ¥ã€‚é£å¹èŠ±åŠ¨ï¼ŒèŠ±åŠ¨èŠ±è½ï¼Œå¦‚æ­¤èƒŒæ™¯ä¸‹ï¼ŒAdobeæ¢ç´¢è‡ªå®¶ä¼ ç»Ÿè½¯ä»¶äº§å“WebåŒ–ã€å¤šç»ˆç«¯åŒ–ï¼Œä»¥åŠç ”å‘æ–°çš„å¤šç»ˆç«¯äº§å“å½¢å¼ä¹Ÿåœ¨æƒ…ç†ä¹‹ä¸­ã€‚è€Œçœ‹ä¼¼çªç„¶çš„Sparkï¼Œå…´è®¸åªæ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­çš„ä¸€å°æ­¥ã€‚è¿™ä¸ªä¸–ç•Œä¸Šå¾ˆå¤šäº‹æƒ…å°±æ˜¯è¿™æ ·çš„ï¼Œä½ æ¥äº†ï¼Œæˆ‘ä¹Ÿæ¥äº†ï¼Œä¸ç®¡å®ƒè¯¥ä¸è¯¥æ¥ï¼Œç»ˆç©¶éƒ½å·²ç»æ¥äº†ï¼</p>
<a id="more"></a>
<h2 id="Sparkç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Sparkç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Sparkç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Sparkç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><img src="//img.aotu.io/FqP4YgiLCxNkUHnviioVU9SkcHHw" alt="Spark"></p>
<p>Sparkä¹Ÿè®¸æ˜¯AdobeçœŸæ­£æ„ä¹‰ä¸Šçš„ç¬¬ä¸€æ¬¾å¤šç»ˆç«¯äº§å“ã€‚</p>
<p>å®ƒåŒ…æ‹¬ä¸‰éƒ¨åˆ†åŠŸèƒ½ï¼šPostï¼ˆæµ·æŠ¥åˆ¶ä½œï¼‰ã€Pageï¼ˆé¡µé¢åˆ¶ä½œï¼‰ä»¥åŠVideoï¼ˆè§†é¢‘åˆ¶ä½œï¼‰ï¼Œä¸‰è€…ä¹‹é—´å…¶å®æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œåœ¨PCç«¯å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„Webåº”ç”¨å…¥å£spark.adobe.comè®¿é—®ä½¿ç”¨ï¼Œæ¯éƒ¨åˆ†åŠŸèƒ½å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œä½†å„è‡ªåˆæœ‰å•ç‹¬çš„IOS APPå®¢æˆ·ç«¯ã€‚çœ‹ä¸Šå»æ›´åƒæ˜¯ä¸€ä¸ªå¯è§†åŒ–åª’ä½“å†…å®¹åˆ›ä½œçš„å¥—è£…ï¼Œå“ªå¤©è¯´ä¸å®šä¼šå¢åŠ å…¶ä»–çš„ç‹¬ç«‹åŠŸèƒ½ï¼Œä¾‹å¦‚Slideï¼ˆå¹»ç¯ç‰‡ï¼‰ã€‚</p>
<p>æ›´å¤šå…³äºSparkçš„ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹è½åœ°é¡µï¼ˆç§»åŠ¨ç«¯æ‰«æäºŒç»´ç ï¼ŒPCç«¯ç‚¹å‡»äºŒç»´ç ï¼‰ã€‚</p>
<p><a href="https://spark.adobe.com/about" target="_blank"><img src="//img.aotu.io/FrSDJWzXbL9xgr7LqGYP6updg8Gg" alt="spark-qrcode"></a></p>
<p>é‰´äºSparkçš„IOSå®¢æˆ·ç«¯ç›®å‰åªæœ‰Spark Pageèƒ½å¤Ÿåœ¨å›½å†…ä¸‹è½½ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿™æ¬¡è¯•ç”¨å›´ç»•å®ƒçš„Webåº”ç”¨ï¼ˆ<a href="https://spark.adobe.com" target="_blank" rel="external">spark.adobe.com</a>ï¼‰è¿›è¡Œï¼Œå¦ä¾æ®å¤§æ•°æ®ç»Ÿè®¡çš„æ–‡ç« ç¯‡å¹…é•¿åº¦å»ºè®®ï¼Œæœ¬æ¬¡è¯•ç”¨ä»…é’ˆå¯¹å…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½-Spark Postã€‚</p>
<h2 id="Sparkçš„ç¤¾äº¤è¿åˆ"><a href="#Sparkçš„ç¤¾äº¤è¿åˆ" class="headerlink" title="Sparkçš„ç¤¾äº¤è¿åˆ"></a>Sparkçš„ç¤¾äº¤è¿åˆ</h2><p>è¿åˆäº†ç”¨æˆ·ä¸€ç§æˆ–å¤šç§ç”Ÿæ´»æˆ–å·¥ä½œä¹ æƒ¯çš„äº§å“æ‰æ˜¯å¥½æ»´äº§å“ï¼Œå¤§å¤šæ•°äº§å“æ·±è°™æ­¤é“ã€‚</p>
<p>Sparkè‡ªç„¶ä¹Ÿä¸ä¾‹å¤–ï¼Œçœ‹çœ‹å®ƒé¦–é¡µçš„Sloganï¼šã€åˆ†åˆ†é’Ÿå°†ä½ çš„æƒ³æ³•å˜æˆæå…·å†²å‡»åŠ›çš„ç¤¾äº¤å›¾å½¢ã€ç½‘é¡µæ•…äº‹å’ŒåŠ¨æ€æ˜ åƒã€ï¼ˆTurn your ideas into impactful social graphics, web stories and animated videosâ€”in minutes.ï¼‰ã€‚è€å¤–çš„ç½‘ç»œç¤¾äº¤ä¹ æƒ¯ç¦»ä¸å¼€facebookå’Œgoogleï¼ŒSparksçš„ç™»å½•ç•Œé¢åœ¨åˆ»æ„å¼•å¯¼ç”¨æˆ·ä½¿ç”¨Facebookæˆ–Googleç¬¬ä¸‰æ–¹è´¦å·ç™»å½•ï¼Œå¼±åŒ–è‡ªèº«çš„è´¦å·ä½“ç³»ï¼Œå…¶å®å°±æ˜¯è¦å®‰åˆ©ç”¨æˆ·ï¼šå°å§å‘€ï¼Œå¿«æ¥ç”¨æˆ‘å‘€ï¼Œæˆ‘åˆ¶ä½œçš„æ¼‚æ¼‚çš„å›¾ç‰‡ã€ç½‘é¡µã€è§†é¢‘å¯ä»¥ä¸€é”®åˆ†äº«ç»™ä½ Facebooké‡Œçš„å¥½å‹ï¼Œè§†é¢‘è¿˜å¯ä»¥ä¿å­˜åˆ°googleå®¶çš„youtubeå“Ÿï¼ã€‚</p>
<p>å¯æƒœçš„æ˜¯ï¼ŒFacebookå’ŒGoogleå¯¹äºå›½å†…ç”¨æˆ·æ¥è¯´ï¼Œåœ¨å‡›å†¬ä¹‹åŸå¢™çš„å¦ä¸€è¾¹ã€‚è€Œæˆ‘ä»¬çš„ç¤¾äº¤ä¹ æƒ¯æ˜¯å¾®ä¿¡æœ‹å‹åœˆï¼Œæ˜¯ä¸æ˜¯çº¦ç­‰äºã€Sparkåœ¨å›½å†…ç«ä¸èµ·ã€äº†å‘¢ã€‚</p>
<p>æ²¡æœ‰FQç»éªŒçš„ç«¥é‹ä»å¯ä»¥æ³¨å†Œadobeè´¦å·æ¥è¯•ç”¨Sparkã€‚</p>
<p><img src="//img.aotu.io/FhsWurne9iDpJsQlKWnTooErnYjU" alt="login"></p>
<h2 id="Post-å‚»ç“œå¼æµ·æŠ¥åˆ¶ä½œ"><a href="#Post-å‚»ç“œå¼æµ·æŠ¥åˆ¶ä½œ" class="headerlink" title="Post - å‚»ç“œå¼æµ·æŠ¥åˆ¶ä½œ"></a>Post - å‚»ç“œå¼æµ·æŠ¥åˆ¶ä½œ</h2><p>Spark Postè®©æˆ‘æƒ³åˆ°2ã€3å¹´å‰Bucket Labså‡ºçš„ä¸€æ¬¾æµ·æŠ¥åˆ¶ä½œAPP - Phosterï¼Œå…¶å®æ ¸å¿ƒåŠŸèƒ½å·®ä¸å¤šï¼šåŸºäºæ—¢å®šçš„æ¨¡æ¿ï¼Œç»„åˆæ‹–æ”¾æ›´æ¢èƒŒæ™¯å›¾ã€æ–‡å­—ï¼Œå†é…åˆå„ç§æ ·å¼è°ƒæ•´ï¼Œæœ€åç”Ÿæˆç¾ç¾çš„æµ·æŠ¥å›¾ç‰‡ã€‚Postæ˜¯å¦å¼ºå¤§å…³é”®è¦çœ‹å®ƒçš„æ¨¡æ¿æ˜¯å¦å¥½ç”¨ï¼Œå…ƒç´ é›¶ä»¶çš„ç»„åˆé…ç½®æ˜¯å¦è¶³å¤Ÿçµæ´»æ™ºèƒ½ã€‚å›½å†…ä¹Ÿæœ‰å¾ˆå¤šå…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„äº§å“ï¼Œåªæ˜¯ä¸å«ã€Postã€ç½¢äº†ï¼Œç¾å›¾ç§€ç§€ã€Pituç­‰ç­‰ã€‚</p>
<p>Webç‰ˆçš„Spark Postæ“ä½œç•Œé¢å¦‚ä¸‹é¢çš„å›¾ç¤ºï¼Œéå¸¸ç®€æ´å¤§æ°”ä¸Šæ¡£æ¬¡ï¼Œæ“ä½œæ é›†ä¸­åœ¨å¤´éƒ¨å’Œå³ä¾§ï¼Œå’ŒPSçš„è®¾è®¡åŸºæœ¬ä¸€è‡´ã€‚äº¤äº’å‚»ç“œå¼çš„äººæ€§åŒ–ï¼Œæ‰€ä»¥ç°å¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œç¬¬ä¸€æ¬¡ç”¨å®Œåä¸ç›´æ¥å¥‡ç»å…«è„‰å…¨éƒ¨æ‰“é€šè¿›é˜¶ç‚‰ç«çº¯é’é˜¶æ®µçš„ç«¥é‹éƒ½å¯ä»¥è‡ªæˆ‘æ€€ç–‘ä¸€ä¸‹å¤©èµ‹åŠ ç‚¹æ˜¯å¦æ°å½“ï¼Œç¬¦æ–‡æ˜¯å¦å¸¦é”™ï¼Œç‚¹ç‡ƒæ¢æˆç–¾è·‘å†è¯•ä¸€æ¬¡å§ã€‚</p>
<p>æµ¸æ·«è®¾è®¡å›¾å½¢åˆ¶ä½œè½¯ä»¶ç ”å‘å¤šå¹´çš„Adobeï¼Œå…¶Sparkæµ·æŠ¥åˆ¶ä½œåŠŸèƒ½å½“ç„¶ä¸ä¼šä»…è½äºã€ç•Œé¢ç®€æ´å¤§æ°”ä¸Šæ¡£æ¬¡ï¼Œäº¤äº’å‚»ç“œäººæ€§åŒ–ã€è€Œå·²ã€‚Spark Postçš„5å¤§æ ¸å¿ƒç¼–è¾‘åŠŸèƒ½å…¼å…·å®ç”¨å’Œæ–°æ„ã€‚</p>
<h3 id="Resize-ç¤¾äº¤å¹³å°ä¼˜å…ˆçš„å°ºå¯¸é€‰æ‹©å™¨"><a href="#Resize-ç¤¾äº¤å¹³å°ä¼˜å…ˆçš„å°ºå¯¸é€‰æ‹©å™¨" class="headerlink" title="Resize - ç¤¾äº¤å¹³å°ä¼˜å…ˆçš„å°ºå¯¸é€‰æ‹©å™¨"></a>Resize - ç¤¾äº¤å¹³å°ä¼˜å…ˆçš„å°ºå¯¸é€‰æ‹©å™¨</h3><p>å¯ä»¥å¿«é€Ÿåˆ¶ä½œé€‚ç”¨äºç¬¬ä¸‰æ–¹ç¤¾äº¤å¹³å°çš„æµ·æŠ¥å›¾ç‰‡ï¼Œinstagramï¼ˆé»˜è®¤ï¼‰ã€facebookã€twitterã€pinterestã€‚ã€‚ã€‚åº”ç”¨å°½æœ‰ã€‚å¦‚æœå®ƒå¼€æºï¼Œæˆ‘å€’æ„¿æ„å–é¹…å‚ä¸€ä¸ªäººæƒ…æŠŠå¾®ä¿¡çš„900x500ä»¥åŠ200x200ä¸¤ä¸ªå…¬ä¼—å·å›¾ç‰‡å°ºå¯¸åŠ è¿›å»ã€‚</p>
<p><img src="//img.aotu.io/FvC8qru2nkqO9ubs4C_vqRoYoCmB" alt="resize"></p>
<h3 id="Theme-å®ç”¨çš„æ¨¡æ¿"><a href="#Theme-å®ç”¨çš„æ¨¡æ¿" class="headerlink" title="Theme - å®ç”¨çš„æ¨¡æ¿"></a>Theme - å®ç”¨çš„æ¨¡æ¿</h3><p>æ¨¡æ¿çš„åŠŸèƒ½å’ŒåŒç±»è½¯ä»¶çš„æ¨¡æ¿åŠŸèƒ½å·®ä¸å¤šï¼Œå‚»ç“œå®ç”¨ï¼Œç‰¹åˆ«é€‚åˆæ²¡æœ‰è®¾è®¡åŸºç¡€çš„ç«¥é‹ï¼Œè¿™é‡Œå°±ä¸å¤šæäº†ã€‚</p>
<h3 id="Palette-ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆ"><a href="#Palette-ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆ" class="headerlink" title="Palette - ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆ"></a>Palette - ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆ</h3><p>Spark Postçš„è‰²æ¿åŠŸèƒ½ç®—æ˜¯åŒç±»è½¯ä»¶ä¸­çš„é¦–åˆ›ã€‚ä¹Ÿè®¸å› ä¸ºæˆ‘è¿˜ç®—å¹´è½»è²Œç¾ç»éªŒçœ¼å…‰ä¸å¤Ÿç²—å¤§ï¼Œè‡³ä»Šåœ¨ç¾å›¾ã€æ‰¹å›¾ç­‰å›½äº§è½¯ä»¶é‡Œé¢è¿˜æ²¡æœ‰ç¢°åˆ°è¿‡ã€‚åˆ©ç”¨æ¨¡æ¿ï¼Œåªç»™ç”¨æˆ·è§£å†³äº†åŸºæœ¬çš„å…ƒç´ æ„å›¾éœ€æ±‚ï¼Œå¯¹äºç¼ºä¹è®¾è®¡å®¡ç¾åŸºç¡€çš„äººæ¥è¯´ï¼Œå…ƒç´ é—´çš„é¢œè‰²æ­é…ä¹Ÿæ˜¯ä¸€å¤§éš¾é¢˜ï¼Œè€ŒSpark Postæ°å¥½è¿éš¾è€Œè§£ä¹‹ï¼</p>
<p><img src="//img.aotu.io/FngbRyjZyMRh3x5Cqk9Xn_IbWgvG" alt="palette"></p>
<h3 id="Photo-8ä¸ªç²¾é€‰æ»¤é•œ"><a href="#Photo-8ä¸ªç²¾é€‰æ»¤é•œ" class="headerlink" title="Photo - 8ä¸ªç²¾é€‰æ»¤é•œ"></a>Photo - 8ä¸ªç²¾é€‰æ»¤é•œ</h3><p>Poståªæä¾›äº†8ä¸ªæ»¤é•œæ•ˆæœï¼Œå°‘ä½†æ˜¯å‡å°‘ç”¨æˆ·çŠ¹è±«æŠ‰æ‹©çš„æ—¶é—´ï¼Œä¸ªäººæ„Ÿè§‰æ¯”Instagramçš„æ»¤é•œæœ‰ç‰¹ç‚¹ï¼Œå¤§éƒ¨åˆ†æ»¤é•œæ•ˆæœåå‘æµ“éƒçš„å¤§æµ·æŠ¥æ„Ÿè§‰ã€‚</p>
<p><img src="//img.aotu.io/FihxHbyNFaxO3_BjP6dy21OrygPs" alt="photo"></p>
<h3 id="Text-å­—ä½“é¢œè‰²æ™ºèƒ½æ¨è"><a href="#Text-å­—ä½“é¢œè‰²æ™ºèƒ½æ¨è" class="headerlink" title="Text - å­—ä½“é¢œè‰²æ™ºèƒ½æ¨è"></a>Text - å­—ä½“é¢œè‰²æ™ºèƒ½æ¨è</h3><p>Postèƒ½æ ¹æ®èƒŒæ™¯å›¾è‰²æ¿æ™ºèƒ½æ¨èæ–‡å­—çš„é…è‰²ã€‚è¿™ä¸ªåŠŸèƒ½å·²ç»å®Œçˆ†è®¸å¤šåŒç±»åº”ç”¨äº†å§~</p>
<p><img src="//img.aotu.io/Fnxt7wbqwJZTU5raR_B2-V9yXxJ5" alt="text"></p>
<p>æ€»çš„æ¥è¯´ï¼ŒPostçš„ä½¿ç”¨ä½“éªŒæ„Ÿè§‰ç°å¸¸é¡ºç•…è‰¯å¥½ï¼Œç®€å•çš„è‹±æ–‡æµ·æŠ¥åˆ¶ä½œåŸºæœ¬ä¸Šå¯ä»¥ä¸ç”¨æ‰¾è§†è§‰è®¾è®¡å¸ˆäº†å“ã€‚é—æ†¾çš„æ˜¯ç›®å‰ä¸æ”¯æŒè‡ªå®šä¹‰ä¸­æ–‡å­—ä½“ï¼Œä¹Ÿæ²¡æœ‰æ‰“é€šå¾®ä¿¡ã€æ‰‹Qç­‰ç¤¾äº¤æ¸ é“ï¼Œæœ¬å¤§å¤§çŒœæµ‹å›½å†…åŒè¡Œåº”è¯¥å¾ˆå¿«ä¼šæœ‰å¯¹åº”çš„ä¸­æ–‡é«˜ä»¿ç‰ˆå‡ºç°äº†å§ã€‚<br>æœ‰ä¸€ä¸ªé—®é¢˜ç•™ç»™å¤§å®¶è®¨è®ºï¼Œå¦‚æœä½ æ˜¯äº§å“ç»ç†ï¼ŒPostè¯¥å¦‚ä½•åŠ å…¥æ€æ ·çš„ç›ˆåˆ©æ‰‹æ®µï¼Ÿæ¬¢è¿ç•™è¨€YYã€‚</p>
<h2 id="Sparkçš„æŠ€æœ¯æ‰’"><a href="#Sparkçš„æŠ€æœ¯æ‰’" class="headerlink" title="Sparkçš„æŠ€æœ¯æ‰’"></a>Sparkçš„æŠ€æœ¯æ‰’</h2><p>å‡ºäºå¥½å¥‡å’Œå­¦ä¹ çš„æ€åº¦ï¼Œæœ€åé¡ºæ‰‹ç„äº†ä¸‹Sparkç«™ç‚¹æ¶‰åŠçš„ä¸€äº›æŠ€æœ¯ç‚¹ï¼Œä¸å±€é™äºå‰ç«¯ã€‚</p>
<ol>
<li><p>åŸå‹è®¾è®¡ - Marvel</p>
<p> è¿™ä¸ªåªæ˜¯çŒœæµ‹çš„ï¼Œåœ¨æºç ä¸­æœ‰çœ‹åˆ°Marvel uiï¼Œä¹Ÿè®¸Sparkç«™ç‚¹ä½¿ç”¨Marvelåšçš„åŸå‹è®¾è®¡ã€‚è¿™ä¸ªæˆ‘è¦è¯•ç”¨äº†Marvelä¹‹åæ‰èƒ½ä¸‹å®šè®ºã€‚</p>
</li>
<li><p>Webfont - Typekit</p>
<p> ç”¨äº†Adobe Typekitçš„æœåŠ¡ã€‚</p>
</li>
<li><p>Material Design</p>
<p> ä¸å°‘åœ°æ–¹åº”ç”¨äº†Googleçš„Materialè®¾è®¡é£æ ¼ã€‚</p>
</li>
<li><p>èµ„æºæ„å»º-Webpack</p>
</li>
<li><p>Web worker</p>
<p> worker-color.js</p>
</li>
<li><p>SVG</p>
<p> å¥½å¤šå›¾æ ‡éƒ½ç›´æ¥ç”¨çš„SVGã€‚</p>
</li>
</ol>
<p>ä»Šå¤©çš„Sparkè¯•ç”¨æ‰‹è®°å°±æ­¤ä¸ºæ­¢ï¼Œæˆ‘æ˜¯ã€å‡¹å‡¸å®éªŒå®¤/é˜¿å°”æ³•çªå‡»é˜Ÿ/LVä¸»å”±å¤§äººã€ã€‚è¯·æœŸå¾…æˆ‘ä»¬Alphaä¸‹ä¸€æœŸçš„äº’è”ç½‘æ–°å“è¯•ç”¨æ‰‹è®°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;5æœˆï¼Œå¤ï¼Œåˆå¤ã€‚ä¸€ä¸ªä¸èµ·çœ¼çš„æ—¥å­ï¼Œèµ·çœ¼çš„æ˜¯ä¸€å®¶å…¬å¸ï¼Œä¸€æ¬¾äº§å“ï¼Œå®ƒå«Adobeï¼Œå®ƒå«Sparkã€‚æ²¡æœ‰äººçŸ¥é“Adobeç©¶ç«Ÿæœ‰æ²¡æœ‰å‘å¸ƒè¿‡å¤šç»ˆç«¯äº§å“ï¼ŒçœŸæ­£æ„ä¹‰çš„å¤šç»ˆç«¯äº§å“ï¼Œå®ƒä¿¨ç„¶åŠ¨æ‰‹äº†ï¼Œå°±åœ¨ä¸€å‘¨ä¹‹å‰ï¼Œå¹²è„†åˆ©è½ï¼Œä¸å¸¦ä¸€ä¸è¿Ÿç–‘ã€‚&lt;/p&gt;
&lt;p&gt;ä¸–äººå°½çŸ¥Adobeä¹‹åï¼Œæºäºå…¶å®¢æˆ·ç«¯è½¯ä»¶ä¹‹ç ”å‘ï¼Œå°¤é•¿äºPhotoshopï¼Œæ˜¾äºFlashã€After Effectsâ€¦ åæ¥è¯¸ç±»äº§å“æ‚‰æ•°å½’äºå¤§å…¨-Creative Suiteï¼Œå½“ä»Šè®¾è®¡ç±»è½¯ä»¶ä»¥å®ƒä¸ºå°Šï¼Œæ‰€å‘æ— æ•Œã€‚å³ä¾¿åæ¥çš„Creative Cloudï¼Œä¹Ÿåªæ˜¯äº§å“è¿è¥æ–¹å¼çš„æ”¹å˜ã€æ•°æ®å±‚é¢çš„äº‘æœåŠ¡åŒ–ï¼Œå¹¶æ²¡æœ‰è„±ç¦»ä¼ ç»Ÿå®¢æˆ·ç«¯è½¯ä»¶çš„å®è´¨èŒƒç•´ï¼Œè°ˆä¸ä¸Šå¤šç»ˆç«¯äº§å“ã€‚&lt;/p&gt;
&lt;p&gt;è€Œéšç€äº‘æœåŠ¡ã€HTML5ã€CSS3ç­‰è¶Šæ¥è¶Šé«˜ç«¯çš„ç§»åŠ¨å¼€å‘æŠ€æœ¯çš„æˆç†Ÿä¸å¹¿æ³›åº”ç”¨ï¼Œä»¥åŠæµè§ˆå™¨ä½“éªŒä¸æ€§èƒ½çš„è¿…çŒ›å‘å±•ï¼ŒWebäº§å“ä¸ä¼ ç»Ÿå®¢æˆ·ç«¯äº§å“çš„ä½¿ç”¨ä½“éªŒå·®è·æ­£åœ¨è¿…é€Ÿç¼©å°ã€‚ä¹Ÿè®¸åœ¨ç§»åŠ¨äº’è”ç½‘çš„å¹´ä»£ï¼Œæ•´åˆäº‘æœåŠ¡ä»¥æµè§ˆå™¨ä¸ºå®¢æˆ·ç«¯å®¿ä¸»çš„Webåº”ç”¨ç»“åˆAPPå®¢æˆ·ç«¯çš„å¤šç»ˆç«¯äº§å“æ‰æ˜¯æœªæ¥ã€‚é£å¹èŠ±åŠ¨ï¼ŒèŠ±åŠ¨èŠ±è½ï¼Œå¦‚æ­¤èƒŒæ™¯ä¸‹ï¼ŒAdobeæ¢ç´¢è‡ªå®¶ä¼ ç»Ÿè½¯ä»¶äº§å“WebåŒ–ã€å¤šç»ˆç«¯åŒ–ï¼Œä»¥åŠç ”å‘æ–°çš„å¤šç»ˆç«¯äº§å“å½¢å¼ä¹Ÿåœ¨æƒ…ç†ä¹‹ä¸­ã€‚è€Œçœ‹ä¼¼çªç„¶çš„Sparkï¼Œå…´è®¸åªæ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­çš„ä¸€å°æ­¥ã€‚è¿™ä¸ªä¸–ç•Œä¸Šå¾ˆå¤šäº‹æƒ…å°±æ˜¯è¿™æ ·çš„ï¼Œä½ æ¥äº†ï¼Œæˆ‘ä¹Ÿæ¥äº†ï¼Œä¸ç®¡å®ƒè¯¥ä¸è¯¥æ¥ï¼Œç»ˆç©¶éƒ½å·²ç»æ¥äº†ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="ä½“éªŒæŠ¥å‘Š" scheme="https://aotu.io/cates/%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    
    
      <category term="Spark" scheme="https://aotu.io/tags/Spark/"/>
    
      <category term="æ–°å“è¯•ç”¨" scheme="https://aotu.io/tags/%E6%96%B0%E5%93%81%E8%AF%95%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>CSS3åŠ¨ç”»ä¹‹é€å¸§åŠ¨ç”»</title>
    <link href="https://aotu.io/notes/2016/05/17/css3-animation-frame/"/>
    <id>https://aotu.io/notes/2016/05/17/css3-animation-frame/</id>
    <published>2016-05-17T02:00:00.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»"><a href="#ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»" class="headerlink" title="ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»"></a>ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»</h2><hr>
<p>è¦äº†è§£ CSS3 é€å¸§åŠ¨ç”»ï¼Œé¦–å…ˆè¦æ˜ç¡®ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»ã€‚</p>
<p>çœ‹ä¸€ä¸‹<a href="https://zh.wikipedia.org/zh-cn/%E5%AE%9A%E6%A0%BC%E5%8A%A8%E7%94%BB" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a>ä¸­çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>å®šæ ¼åŠ¨ç”»ï¼Œåˆåé€å¸§åŠ¨ç”»ï¼Œæ˜¯ä¸€ç§åŠ¨ç”»æŠ€æœ¯ï¼Œå…¶åŸç†å³å°†æ¯å¸§ä¸åŒçš„å›¾åƒè¿ç»­æ’­æ”¾ï¼Œä»è€Œäº§ç”ŸåŠ¨ç”»æ•ˆæœã€‚</p>
</blockquote>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå®ç°é€å¸§åŠ¨ç”»éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼š<strong>ï¼ˆ1ï¼‰ç›¸å…³è”çš„ä¸åŒå›¾åƒï¼Œå³åŠ¨ç”»å¸§ï¼›ï¼ˆ2ï¼‰è¿ç»­æ’­æ”¾ã€‚</strong></p>
<p><a href="http://zhuanlan.zhihu.com/p/19855108" target="_blank" rel="external"></a></p>
<p>æˆ‘ä»¬å„¿æ—¶çš„è®°å¿†ï¼Œæ‰‹ç¿»ä¹¦ï¼Œä»–æ‰€å®ç°çš„å°±æ˜¯é€å¸§åŠ¨ç”»ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation-frame/sfs.jpg" alt="é€å¸§åŠ¨ç”»"></p>
<p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="http://zhuanlan.zhihu.com/p/19855108" target="_blank" rel="external">çŸ¥ä¹</a>ï¼‰</p>
<h2 id="å‰ç«¯é€å¸§åŠ¨ç”»å®ç°æ–¹æ¡ˆ"><a href="#å‰ç«¯é€å¸§åŠ¨ç”»å®ç°æ–¹æ¡ˆ" class="headerlink" title="å‰ç«¯é€å¸§åŠ¨ç”»å®ç°æ–¹æ¡ˆ"></a>å‰ç«¯é€å¸§åŠ¨ç”»å®ç°æ–¹æ¡ˆ</h2><hr>
<p>åœ¨ç»†èŠ css3 é€å¸§åŠ¨ç”»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤§è‡´äº†è§£ä¸‹å‰ç«¯å®ç°é€å¸§åŠ¨ç”»æœ‰å“ªäº›æ–¹æ¡ˆã€‚</p>
<p>å…¶å®ä¸å¤–ä¹ä¸‰ç§æŠ€æœ¯ï¼ˆè§†é¢‘å¯ä»¥å®ç°æ‰€æœ‰ç±»å‹çš„åŠ¨ç”»ï¼Œæš‚ä¸çº³å…¥ï¼‰ï¼šgifã€JavaScriptã€CSS3 Animationã€‚</p>
<p>å‰æ–‡æåˆ°ï¼Œå®ç°é€å¸§åŠ¨ç”»éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼šï¼ˆ1ï¼‰åŠ¨ç”»å¸§ï¼›ï¼ˆ2ï¼‰è¿ç»­æ’­æ”¾ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»”ç»†è‡ªå·±åˆ†æä¸‹è¿™ä¸‰ç§æŠ€æœ¯æ˜¯æ€ä¹ˆå®ç°ä¸Šè¿°æ¡ä»¶çš„ï¼š</p>
<h3 id="ï¼ˆ1ï¼‰gif"><a href="#ï¼ˆ1ï¼‰gif" class="headerlink" title="ï¼ˆ1ï¼‰gif"></a>ï¼ˆ1ï¼‰gif</h3><p>åœ¨è§¦å±é¡µä¸­ï¼Œgif å¸¸è¢«ç”¨æ¥åšåŠ è½½åŠ¨ç”»ã€‚å¦‚<a href="http://w.benbun.com/momo/shaibingxiang/?from=timeline&amp;isappinstalled=0" target="_blank" rel="external">ã€Šé™Œé™Œä¸å­¤ç‹¬é¥­å±€ã€‹</a>çš„åŠ è½½åŠ¨ç”»ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation-frame/momo_loading.gif" alt="gif"></p>
<p><strong>gif å¯ä»¥æœ‰å¤šä¸ªåŠ¨ç”»å¸§ï¼Œè¿ç»­æ’­æ”¾æ˜¯å…¶è‡ªèº«å±æ€§ï¼Œæ˜¯å¦å¾ªç¯ä¹Ÿæ˜¯ç”±å…¶æœ¬èº«å†³å®šçš„ã€‚</strong>å®ƒå¾€å¾€ç”¨æ¥å®ç°å°ç»†èŠ‚åŠ¨ç”»ï¼Œæˆæœ¬è¾ƒä½ã€ä½¿ç”¨æ–¹ä¾¿ã€‚</p>
<p>ä½†å…¶ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼š</p>
<ul>
<li>ç”»è´¨ä¸Šï¼Œgif æ”¯æŒé¢œè‰²å°‘(æœ€å¤§256è‰²)ã€Alpha é€æ˜åº¦æ”¯æŒå·®ï¼Œå›¾åƒé”¯é½¿æ¯›è¾¹æ¯”è¾ƒä¸¥é‡ï¼›</li>
<li>äº¤äº’ä¸Šï¼Œä¸èƒ½ç›´æ¥æ§åˆ¶æ’­æ”¾ã€æš‚åœã€æ’­æ”¾æ¬¡æ•°ï¼Œçµæ´»æ€§å·®ï¼›</li>
<li>æ€§èƒ½ä¸Šï¼Œgif ä¼šå¼•èµ·é¡µé¢å‘¨æœŸæ€§çš„ paint ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li>
</ul>
<h3 id="ï¼ˆ2ï¼‰JavaScript"><a href="#ï¼ˆ2ï¼‰JavaScript" class="headerlink" title="ï¼ˆ2ï¼‰JavaScript"></a>ï¼ˆ2ï¼‰JavaScript</h3><p><strong>JS ä¸ CSS3ï¼Œä¸€èˆ¬æ˜¯å°†åŠ¨ç”»å¸§æ”¾åˆ°èƒŒæ™¯å›¾ä¸­ã€‚</strong></p>
<p>ä¸åŒçš„æ˜¯ï¼Œ <strong>JS æ˜¯ä½¿ç”¨è„šæœ¬æ¥æ§åˆ¶åŠ¨ç”»çš„è¿ç»­æ’­æ”¾çš„</strong>ï¼š</p>
<ul>
<li>å¯ä»¥ç›´æ¥æ”¹å˜å…ƒç´ çš„ <code>background-image</code></li>
<li>ä¹Ÿå¯ä»¥å°†åŠ¨ç”»å¸§åˆå¹¶æˆé›ªç¢§å›¾ï¼Œé€šè¿‡æ”¹å˜ <code>background-position</code> æ¥å®ç°</li>
</ul>
<p>è¿˜æ˜¯<a href="http://w.benbun.com/momo/shaibingxiang/?from=timeline&amp;isappinstalled=0" target="_blank" rel="external">ã€Šé™Œé™Œä¸å­¤ç‹¬é¥­å±€ã€‹</a>çš„ä¾‹å­ï¼š</p>
<p>å…¶ä¸­æœ‰ä¸€ä¸ªä¼¸æ‰‹å–é¥­ç›’çš„åŠ¨ç”»ï¼Œä¸€å…±æœ‰19å¸§ï¼Œä¸”åœ¨ç¬¬11å¸§å¤„æœ‰ä¸€ä¸ªäº¤äº’ï¼Œå°†é›ªç¢§å›¾æ”¾å…¥èƒŒæ™¯ä¸­ï¼Œé€šè¿‡ä¸åŒçš„æ ·å¼å®ç°ä¸åŒçš„ <code>background-position</code> ï¼Œä½¿ç”¨ JS æ”¹å˜æ ·å¼åï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.sprite-rice-1</span>,</div><div class="line"><span class="selector-class">.sprite-rice-2</span>,</div><div class="line">â€¦</div><div class="line"><span class="selector-class">.sprite-rice-19</span>&#123;</div><div class="line">	<span class="attribute">background-image</span>:<span class="built_in">url</span>(http://7xnvb2.com2.z0.glb.qiniucdn.com/img/rice.jpg);</div><div class="line">	<span class="attribute">background-repeat</span>:no-repeat</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.sprite-rice-1</span>&#123;<span class="attribute">background-position</span>:-<span class="number">1800px</span> <span class="number">0</span>&#125;</div><div class="line"><span class="selector-class">.sprite-rice-2</span>&#123;<span class="attribute">background-position</span>:-<span class="number">900px</span> -<span class="number">489px</span>&#125;</div><div class="line">â€¦</div><div class="line"><span class="selector-class">.sprite-rice-19</span>&#123;<span class="attribute">background-position</span>:-<span class="number">1200px</span> <span class="number">0</span>&#125;</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation-frame/momo_rice.jpg" alt="sprite"></p>
<p>ä½¿ç”¨ JS çš„ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§ä½³ï¼Œäº¤äº’çµæ´»ã€‚</p>
<h3 id="ï¼ˆ3ï¼‰CSS3-Animation"><a href="#ï¼ˆ3ï¼‰CSS3-Animation" class="headerlink" title="ï¼ˆ3ï¼‰CSS3 Animation"></a>ï¼ˆ3ï¼‰CSS3 Animation</h3><p><strong>CSS3 å®é™…ä¸Šæ˜¯ä½¿ç”¨ <code>animation-timing-function</code> çš„é˜¶æ¢¯å‡½æ•° <code>steps(number_of_steps, direction)</code> æ¥å®ç°é€å¸§åŠ¨ç”»çš„è¿ç»­æ’­æ”¾çš„ã€‚</strong></p>
<p>åœ¨ç§»åŠ¨ç«¯ï¼ŒCSS3 Animation å…¼å®¹æ€§è‰¯å¥½ï¼Œç›¸å¯¹äº JSï¼ŒCSS3 é€å¸§åŠ¨ç”»ä½¿ç”¨ç®€å•ï¼Œä¸”æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºè®¸å¤šä¼˜åŒ–éƒ½åœ¨æµè§ˆå™¨åº•å±‚å®Œæˆã€‚</p>
<p>å› æ­¤åœ¨è§¦å±é¡µé¢ä¸­ CSS3 é€å¸§åŠ¨ç”»ä½¿ç”¨å¹¿æ³›ï¼Œä¸‹æ–‡å°†å¯¹å…¶è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p>
<h2 id="CSS3-é€å¸§åŠ¨ç”»çš„å®ç°"><a href="#CSS3-é€å¸§åŠ¨ç”»çš„å®ç°" class="headerlink" title="CSS3 é€å¸§åŠ¨ç”»çš„å®ç°"></a>CSS3 é€å¸§åŠ¨ç”»çš„å®ç°</h2><hr>
<h3 id="ï¼ˆ1ï¼‰å°†åŠ¨ç”»å¸§åˆå¹¶ä¸ºé›ªç¢§å›¾"><a href="#ï¼ˆ1ï¼‰å°†åŠ¨ç”»å¸§åˆå¹¶ä¸ºé›ªç¢§å›¾" class="headerlink" title="ï¼ˆ1ï¼‰å°†åŠ¨ç”»å¸§åˆå¹¶ä¸ºé›ªç¢§å›¾"></a>ï¼ˆ1ï¼‰å°†åŠ¨ç”»å¸§åˆå¹¶ä¸ºé›ªç¢§å›¾</h3><p>åœ¨è§¦å±é¡µé¢ä¸­ï¼ŒåŠ¨ç”»å¾€å¾€æ‰¿æ‹…é¡µé¢æ ·å¼å®ç°çš„è§’è‰²ï¼ˆå³ä¸éœ€è¦æ›¿æ¢ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¼šå°†å›¾ç‰‡æ”¾åˆ°å…ƒç´ çš„èƒŒæ™¯ä¸­ï¼ˆ<code>background-image</code>ï¼‰ã€‚</p>
<p>é€å¸§åŠ¨ç”»æœ‰ä¸åŒçš„åŠ¨ç”»å¸§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹ <code>background-image</code> çš„å€¼å®ç°å¸§çš„åˆ‡æ¢ï¼Œä½†å¤šå¼ å›¾ç‰‡ä¼šå¸¦æ¥å¤šä¸ª HTTP è¯·æ±‚ï¼Œä¸”ä¸åˆ©äºæ–‡ä»¶çš„ç®¡ç†ã€‚</p>
<p>æ¯”è¾ƒåˆé€‚çš„åšæ³•ï¼Œæ˜¯å°†æ‰€æœ‰çš„åŠ¨ç”»å¸§åˆå¹¶æˆä¸€å¼ é›ªç¢§å›¾ï¼ˆspriteï¼‰ï¼Œé€šè¿‡æ”¹å˜ <code>background-position</code> çš„å€¼æ¥å®ç°åŠ¨ç”»å¸§åˆ‡æ¢ã€‚å› æ­¤ï¼Œé€å¸§åŠ¨ç”»ä¹Ÿè¢«ç§°ä¸ºâ€œç²¾çµåŠ¨ç”»ï¼ˆsprite animationï¼‰â€ã€‚</p>
<p>ä»¥äº¬ä¸œåˆ°å®¶çš„è§¦å±é¡µé¢<a href="http://jdc.jd.com/fd/promote/201601/djnianhuo/" target="_blank" rel="external">ã€Šå¹´è´§é€åˆ°å®¶ã€‹</a>ä¸ºä¾‹ï¼š</p>
<p>è¿™ä¸ªåŠ¨ç”»ä¸€ä¸ªæœ‰ä¸‰å¸§ï¼Œå°†3ä¸ªåŠ¨ç”»å¸§åˆå¹¶ï¼Œå¹¶æ”¾åˆ° <code>.p8 .page_key</code> çš„èƒŒæ™¯ä¸­ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation-frame/p8.png" alt=""></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.p8</span> <span class="selector-class">.page_key</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">width</span>: <span class="number">572px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">586px</span>;</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"../img/p8.png"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ï¼ˆ2ï¼‰ä½¿ç”¨-steps-å®ç°åŠ¨ç”»æ’­æ”¾"><a href="#ï¼ˆ2ï¼‰ä½¿ç”¨-steps-å®ç°åŠ¨ç”»æ’­æ”¾" class="headerlink" title="ï¼ˆ2ï¼‰ä½¿ç”¨ steps å®ç°åŠ¨ç”»æ’­æ”¾"></a>ï¼ˆ2ï¼‰ä½¿ç”¨ steps å®ç°åŠ¨ç”»æ’­æ”¾</h3><p>steps æŒ‡å®šäº†ä¸€ä¸ªé˜¶æ¢¯å‡½æ•°ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä¸­çš„é—´éš”æ•°é‡ï¼ˆå¿…é¡»æ˜¯æ­£æ•´æ•°ï¼‰ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ï¼ŒæŒ‡å®šåœ¨æ¯ä¸ªé—´éš”çš„èµ·ç‚¹æˆ–æ˜¯ç»ˆç‚¹å‘ç”Ÿé˜¶è·ƒå˜åŒ–ï¼Œæ¥å— start å’Œ end ä¸¤ä¸ªå€¼ï¼Œé»˜è®¤ä¸º endã€‚</li>
</ul>
<p>ï¼ˆå‚è€ƒè‡ª<a href="https://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-timing-function-property" target="_blank" rel="external">W3C</a>ï¼‰</p>
<p>é€šè¿‡<a href="https://www.w3.org/TR/css3-transitions/" target="_blank" rel="external">W3C</a>ä¸­çš„è¿™å¼ å›¾ç‰‡æ¥ç†è§£ steps çš„å·¥ä½œæœºåˆ¶ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation-frame/1-2.png" alt="steps"></p>
<p>å›åˆ°ä¸Šè¿°çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ keyframes ä¸­å®šä¹‰å¥½æ¯ä¸ªåŠ¨ç”»å¸§ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> p8&#123;</div><div class="line">    0%&#123;<span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;&#125;</div><div class="line">    33<span class="selector-class">.33</span>%&#123;<span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">586px</span>;&#125;</div><div class="line">    66<span class="selector-class">.66</span>%&#123;<span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">1172px</span>;&#125;</div><div class="line">    100%&#123;<span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">1758px</span>;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œç»™ä»–åŠ ä¸Š <code>animation</code>ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.p8</span> <span class="selector-class">.page_key</span>&#123;</div><div class="line">	<span class="attribute">-webkit-animation</span>: p8 <span class="built_in">steps</span>(1,end) <span class="number">1.5s</span> infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯1ï¼Ÿ</strong></p>
<p>å‰æ–‡ä¸­æåˆ°ï¼Œsteps æ˜¯ <code>animation-timing-function</code> çš„ä¸€ä¸ªå±æ€§å€¼ï¼Œåœ¨ <a href="https://www.w3.org/TR/css3-animations/#animation-timing-function-property" target="_blank" rel="external">W3C</a> ä¸­æœ‰å¦‚ä¸‹è¯´æ˜ï¼š</p>
<blockquote>
<p>For a keyframed animation, the â€˜animation-timing-functionâ€™ applies between keyframes, not over the entire animation. </p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>animation-timing-function</code> åº”è¯¥äºä¸¤ä¸ª keyframes ä¹‹é—´ï¼Œè€Œéæ•´ä¸ªåŠ¨ç”»ã€‚åœ¨ä¸Šé¢çš„ keyframes ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŠŠæ¯ä¸ªå¸§éƒ½å†™å‡ºæ¥äº†ï¼Œæ‰€ä»¥ä¸¤ä¸ª keyframes ä¹‹é—´çš„é—´éš”æ˜¯1ã€‚</p>
<p><strong>æ›´åŠ ç®€ä¾¿çš„å†™æ³•ï¼Ÿ</strong></p>
<p>æ—¢ç„¶è¯´ steps ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å‡½æ•°çš„é—´éš”æ•°é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠ keyframes çš„è®¡ç®—ç›´æ¥äº¤ç»™ steps æ¥å®Œæˆã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.p8</span> <span class="selector-class">.page_key</span>&#123;</div><div class="line">	<span class="attribute">-webkit-animation</span>: p8 <span class="built_in">steps</span>(3,end) <span class="number">1.5s</span> infinite;</div><div class="line">&#125;</div><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> p8 &#123;</div><div class="line">    100% &#123;<span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">1758px</span>;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä¸¤ç§å†™æ³•æ•ˆæœæ˜¯ç­‰åŒçš„ã€‚</p>
<h2 id="CSS3-é€å¸§åŠ¨ç”»ä½¿ç”¨æŠ€å·§"><a href="#CSS3-é€å¸§åŠ¨ç”»ä½¿ç”¨æŠ€å·§" class="headerlink" title="CSS3 é€å¸§åŠ¨ç”»ä½¿ç”¨æŠ€å·§"></a>CSS3 é€å¸§åŠ¨ç”»ä½¿ç”¨æŠ€å·§</h2><hr>
<h3 id="ï¼ˆ1ï¼‰step-start-ä¸-step-end"><a href="#ï¼ˆ1ï¼‰step-start-ä¸-step-end" class="headerlink" title="ï¼ˆ1ï¼‰step-start ä¸ step-end"></a>ï¼ˆ1ï¼‰step-start ä¸ step-end</h3><p>é™¤äº† <code>steps</code> å‡½æ•°ï¼Œ<code>animation-timing-function</code> è¿˜æœ‰ä¸¤ä¸ªä¸é€å¸§åŠ¨ç”»ç›¸å…³çš„å±æ€§å€¼ <code>step-start</code> ä¸ <code>step-end</code>ï¼š</p>
<ul>
<li><code>step-start</code> ç­‰åŒäº <code>steps(1,start)</code>ï¼šåŠ¨ç”»æ‰§è¡Œæ—¶ä»¥å¼€å§‹ç«¯ç‚¹ä¸ºå¼€å§‹ï¼›</li>
<li><code>step-end</code> ç­‰åŒäº <code>steps(1,end)</code>ï¼šåŠ¨ç”»æ‰§è¡Œæ—¶ä»¥ç»“å°¾ç«¯ç‚¹ä¸ºå¼€å§‹ã€‚</li>
</ul>
<h3 id="ï¼ˆ2ï¼‰åŠ¨ç”»å¸§çš„è®¡ç®—ï¼š"><a href="#ï¼ˆ2ï¼‰åŠ¨ç”»å¸§çš„è®¡ç®—ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰åŠ¨ç”»å¸§çš„è®¡ç®—ï¼š"></a>ï¼ˆ2ï¼‰åŠ¨ç”»å¸§çš„è®¡ç®—ï¼š</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$spriteWidth</span>: <span class="number">140px</span>; <span class="comment">// ç²¾çµå®½åº¦ </span></div><div class="line">@keyframes ani &#123;</div><div class="line">  100% &#123;</div><div class="line">    <span class="attribute">background-position</span>: -(<span class="variable">$spriteWidth</span> * <span class="number">12</span>) <span class="number">0</span>; <span class="comment">// 12å¸§</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ï¼ˆ3ï¼‰é€‚é…æ–¹æ¡ˆï¼šrem-scale"><a href="#ï¼ˆ3ï¼‰é€‚é…æ–¹æ¡ˆï¼šrem-scale" class="headerlink" title="ï¼ˆ3ï¼‰é€‚é…æ–¹æ¡ˆï¼šrem+scale"></a>ï¼ˆ3ï¼‰é€‚é…æ–¹æ¡ˆï¼šrem+scale</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œrem çš„è®¡ç®—ä¼šå­˜åœ¨è¯¯å·®ï¼Œå› æ­¤ä½¿ç”¨é›ªç¢§å›¾æ—¶æˆ‘ä»¬å¹¶ä¸æ¨èç”¨ remã€‚å¦‚æœæ˜¯é€å¸§åŠ¨ç”»çš„è¯ï¼Œç”±äºè®¡ç®—çš„è¯¯å·®ï¼Œä¼šå‡ºç°æŠ–åŠ¨çš„æƒ…å†µã€‚</p>
<p>é‚£ä¹ˆåœ¨è§¦å±é¡µä¸­ï¼Œå¦‚ä½•å®ç°é¡µé¢çš„é€‚é…ï¼Ÿ</p>
<p>è¿™é‡Œå°ç¼–æä¾›ä¸€ä¸ªæ€è·¯ï¼š</p>
<ul>
<li>éé€å¸§åŠ¨ç”»éƒ¨åˆ†ï¼Œä½¿ç”¨ <code>rem</code> åšå•ä½ï¼›</li>
<li>é€å¸§åŠ¨ç”»éƒ¨åˆ†ï¼Œä½¿ç”¨ <code>px</code> åšå•ä½ï¼Œå†ç»“åˆ <code>js</code> å¯¹åŠ¨ç”»éƒ¨åˆ†ä½¿ç”¨ <code>scale</code> è¿›è¡Œç¼©æ”¾ã€‚</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;è¦äº†è§£ CSS3 é€å¸§åŠ¨ç”»ï¼Œé¦–å…ˆè¦æ˜ç¡®ä»€ä¹ˆæ˜¯é€å¸§åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¸€ä¸‹&lt;a href
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="åŠ¨ç”»" scheme="https://aotu.io/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>CSS3åŠ¨ç”»ä¹‹è¡¥é—´åŠ¨ç”»</title>
    <link href="https://aotu.io/notes/2016/05/06/Guide-To-Tween-Animation/"/>
    <id>https://aotu.io/notes/2016/05/06/Guide-To-Tween-Animation/</id>
    <published>2016-05-06T03:03:09.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<p><strong>è¡¥é—´åŠ¨ç”»</strong>æ˜¯åŠ¨ç”»çš„åŸºç¡€å½¢å¼ä¹‹ä¸€ï¼ŒæŒ‡çš„æ˜¯äººä¸ºè®¾å®šåŠ¨ç”»çš„å…³é”®çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å…³é”®å¸§ï¼Œè€Œå…³é”®å¸§ä¹‹é—´çš„è¿‡æ¸¡è¿‡ç¨‹åªéœ€è¦ç”±è®¡ç®—æœºå¤„ç†æ¸²æŸ“çš„ä¸€ç§åŠ¨ç”»å½¢å¼ã€‚</p>
<p>åœ¨è§¦å±é¡µé¢ä¸­ï¼Œå¸¸è§çš„å®ç°è¡¥é—´åŠ¨ç”»ä»¥ä¸‹å‡ ç§å½¢å¼ï¼š</p>
<p>ç¬¬ä¸€ï¼ŒCSS3 Animationã€‚</p>
<p>é€šè¿‡animation(é™¤steps()ä»¥å¤–çš„æ—¶é—´å‡½æ•°)å±æ€§åœ¨æ¯ä¸ªå…³é”®å¸§ä¹‹é—´æ’å…¥è¡¥é—´åŠ¨ç”»ã€‚</p>
<p>ç¬¬äºŒï¼ŒCSS3 Transitionã€‚</p>
<p>åŒºåˆ«äºanimationï¼Œtransitionåªèƒ½è®¾å®šåˆå§‹å’Œç»“æŸæ—¶åˆ»çš„ä¸¤ä¸ªå…³é”®å¸§çŠ¶æ€ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œåˆ©ç”¨JavaScriptå®ç°åŠ¨ç”»ï¼Œä¾‹å¦‚JavaScriptåŠ¨ç”»åº“æˆ–æ¡†æ¶ï¼Œè‘—åçš„<a href="http://createjs.cc/tweenjs/" target="_blank" rel="external">TweenJS</a>ï¼Œå®ƒæ˜¯CreateJSçš„å…¶ä¸­ä¸€ä¸ªå¥—ä»¶ã€‚å¦å¤–ï¼Œåœ¨Flashä¸šç•Œä¹…è´Ÿç››åçš„<a href="http://greensock.com/" target="_blank" rel="external">GreenSock</a>æ¨å‡ºçš„GSAP(GreenSock Animation Platform)ä¹Ÿæ–°å¼•å…¥äº†å¯¹JavascriptåŠ¨ç”»çš„æ”¯æŒã€‚</p>
<p>ç¬¬å››ï¼ŒSVG åŠ¨ç”»ã€‚</p>
<p>åŸºäºç§»åŠ¨ç«¯å¯¹SVGæŠ€æœ¯çš„å‹å¥½çš„æ”¯æŒæ€§ï¼Œåˆ©ç”¨SVGæŠ€æœ¯å®ç°åŠ¨ç”»ä¹Ÿæ˜¯ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºåˆ©ç”¨Transitionå®ç°çš„åŠ¨ç”»è€Œè¨€ï¼Œæ˜¯æœ‰ä¸€å®šå±€é™çš„ã€‚</p>
<p>å¼•è¿°é˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« <a href="http://www.ruanyifeng.com/blog/2014/02/css_transition_and_animation.html" target="_blank" rel="external">ã€ŠCSSåŠ¨ç”»ç®€ä»‹ã€‹</a>é‡Œçš„æ€»ç»“ï¼Œ</p>
<blockquote>
<p>transitionçš„ä¼˜ç‚¹åœ¨äºç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯å®ƒæœ‰å‡ ä¸ªå¾ˆå¤§çš„å±€é™ã€‚<br>ï¼ˆ1ï¼‰transitionéœ€è¦äº‹ä»¶è§¦å‘ï¼Œæ‰€ä»¥æ²¡æ³•åœ¨ç½‘é¡µåŠ è½½æ—¶è‡ªåŠ¨å‘ç”Ÿã€‚<br>ï¼ˆ2ï¼‰transitionæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸èƒ½é‡å¤å‘ç”Ÿï¼Œé™¤éä¸€å†è§¦å‘ã€‚<br>ï¼ˆ3ï¼‰transitionåªèƒ½å®šä¹‰å¼€å§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€ï¼Œä¸èƒ½å®šä¹‰ä¸­é—´çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸¤ä¸ªçŠ¶æ€ã€‚<br>ï¼ˆ4ï¼‰ä¸€æ¡transitionè§„åˆ™ï¼Œåªèƒ½å®šä¹‰ä¸€ä¸ªå±æ€§çš„å˜åŒ–ï¼Œä¸èƒ½æ¶‰åŠå¤šä¸ªå±æ€§ã€‚</p>
</blockquote>
<p>å›¿äºè¿™æ ·çš„å±€é™ï¼Œåœ¨è§¦å±é¡µé¢ä¸­å¾ˆå°‘è§åˆ°TransitionåŠ¨ç”»çš„èº«å½±ï¼Œä½†æ˜¯å¹¶ä¸æ„å‘³ç€æ²¡æœ‰ï¼Œè­¬å¦‚ç¿»é¡µåŠ¨ç”»çš„å®ç°å¯ä»¥åˆ©ç”¨Javascriptè„šæœ¬é…åˆtransitionä¸transformå±æ€§æ¥å®ç°ã€‚</p>
<blockquote>
<p>æ¡ˆä¾‹æˆªå›¾æ¥æºäº<a href="http://wqs.jd.com/promote//2015/paper/index.html" target="_blank" rel="external">ã€Šäº¬ä¸œï¼š2015JDCç‡ƒçˆ†äº‹ä»¶ã€‹</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/1.gif" alt="ã€Šäº¬ä¸œï¼š2015JDCç‡ƒçˆ†äº‹ä»¶ã€‹æˆªå›¾" style="display:block;margin: 0 auto;"></p>
<blockquote>
<p>å¯¹åº”çš„ Chrome Dev Tool ä»£ç è°ƒè¯•æˆªå›¾</p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/2.png" alt="ã€Šäº¬ä¸œï¼š2015JDCç‡ƒçˆ†äº‹ä»¶ã€‹Chrome Dev Tool ä»£ç è°ƒè¯•æˆªå›¾" style="display:block;max-width:640px;margin:0 auto;"></p>
<p>æ‰€ä»¥ï¼Œåˆ©ç”¨CSS3å®ç°åŠ¨ç”»çš„é‡å¤´æˆéƒ½åœ¨äº<strong>Animation</strong>çš„è¿ç”¨ã€‚<br>ç„¶è€Œæƒ³å†™å¥½CSS3 AnimationåŠ¨ç”»éœ€è¦èŠ±è´¹ä¸€äº›åŠ›æ°”ï¼Œè¿™æ˜¯çœ‹ä¼¼ç®€å•å®åˆ™éœ€è¦æŠŠæ¡å¥½ç»†èŠ‚çš„æ´»å„¿ã€‚</p>
<h2 id="åŠ¨ç”»è¿‡ç¨‹è¦é¢„å…ˆè§„åˆ’å¥½ï¼Œè¿™å¯ä¸æ˜¯æ˜¯æ•²æ•²è„‘å£³å°±èƒ½ç å‡ºæ¥çš„äº‹å„¿ã€‚"><a href="#åŠ¨ç”»è¿‡ç¨‹è¦é¢„å…ˆè§„åˆ’å¥½ï¼Œè¿™å¯ä¸æ˜¯æ˜¯æ•²æ•²è„‘å£³å°±èƒ½ç å‡ºæ¥çš„äº‹å„¿ã€‚" class="headerlink" title="åŠ¨ç”»è¿‡ç¨‹è¦é¢„å…ˆè§„åˆ’å¥½ï¼Œè¿™å¯ä¸æ˜¯æ˜¯æ•²æ•²è„‘å£³å°±èƒ½ç å‡ºæ¥çš„äº‹å„¿ã€‚"></a>åŠ¨ç”»è¿‡ç¨‹è¦é¢„å…ˆè§„åˆ’å¥½ï¼Œè¿™å¯ä¸æ˜¯æ˜¯æ•²æ•²è„‘å£³å°±èƒ½ç å‡ºæ¥çš„äº‹å„¿ã€‚</h2><p>å¯ä»¥æ˜¯ä¸€å¼ æŠŠä¸è®¾è®¡å¸ˆæ²Ÿé€šçš„ç»“æœåŠ ä¹‹åˆ†æè¾“å‡ºä¸€å¼ åŠ¨ç”»å±æ€§åˆ†è§£è¡¨ã€‚</p>
<blockquote>
<p>åŠ¨ç”»å±æ€§åˆ†è§£è¡¨ç¤ºä¾‹ï¼Œæ¥æºäº<a href="http://isux.tencent.com/h5active.html" target="_blank" rel="external">ã€Šå¸¸è§åŠ¨æ•ˆåˆ¶ä½œæ‰‹æ³•ã€‹</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/3.png" alt="ã€ŠåŠ¨ç”»å±æ€§åˆ†è§£è¡¨ç¤ºä¾‹ã€‹" style="display:block;max-width:640px;margin: 0 auto;"></p>
<p>åˆæˆ–è€…æ˜¯æ ¹æ®æ²Ÿé€šåˆ†æè§„åˆ’å‡ºæ¥çš„åŠ¨ç”»æ—¶é—´è½´ã€‚</p>
<blockquote>
<p>åŠ¨ç”»æ—¶é—´è½´ï¼Œæ¥æºäº<a href="http://aotu.io/notes/2016/01/04/css3-animation/">ã€ŠCSS3åŠ¨ç”»å®è·µã€‹</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/4.png" alt="ã€ŠåŠ¨ç”»æ—¶é—´è½´ç¤ºä¾‹ã€‹" style="display:block;margin: 0 auto;"></p>
<h2 id="åŠ¨ç”»è¦è‡ªç„¶ä¸ç”Ÿç¡¬ï¼ŒåäºŒæ³•åˆ™ä½ å€¼å¾—æ‹¥æœ‰"><a href="#åŠ¨ç”»è¦è‡ªç„¶ä¸ç”Ÿç¡¬ï¼ŒåäºŒæ³•åˆ™ä½ å€¼å¾—æ‹¥æœ‰" class="headerlink" title="åŠ¨ç”»è¦è‡ªç„¶ä¸ç”Ÿç¡¬ï¼ŒåäºŒæ³•åˆ™ä½ å€¼å¾—æ‹¥æœ‰"></a>åŠ¨ç”»è¦è‡ªç„¶ä¸ç”Ÿç¡¬ï¼ŒåäºŒæ³•åˆ™ä½ å€¼å¾—æ‹¥æœ‰</h2><p>ä¸ç®¡æ˜¯åœ¨å½±è§†åŠ¨ç”»ç•Œï¼Œè¿˜æ˜¯å‰ç«¯åŠ¨ç”»ç•Œé‡Œéµå¾ªçš„éƒ½æ˜¯åŒä¸€å¥—é…æ–¹ï¼Œè¿½æ±‚åŒæ ·çš„å‘³é“â€”â€”ã€Œè¿ªå£«å°¼ä¹è€ã€æ€»ç»“çš„<a href="http://markgeyer.com/pres/the-art-of-ui-animations/#/2/5" target="_blank" rel="external">åäºŒé»„é‡‘åŠ¨ç”»æ³•åˆ™</a>ï¼ˆä»¥ä¸‹ç®€ç§°â€œåäºŒæ³•åˆ™â€ï¼‰ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€å¤‡å—æ¨å´‡ä¸æ˜¯æ²¡æœ‰é“ç†çš„ã€‚</p>
<p>åœ¨ä¸€äº›ä¼˜ç§€çš„è§¦å±é¡µé¢æ¡ˆä¾‹é‡Œï¼Œå¯ä»¥è¿½å¯»åˆ°å®ƒçš„è¸ªè¿¹ã€‚</p>
<blockquote>
<p>æ¡ˆä¾‹æˆªå›¾æ¥æºäºã€Šè…¾è®¯ï¼šå¾®ä¼—é“¶è¡Œã€‹ä¸­çš„æ‘©æ‰˜è½¦<a href="http://www.sunnyzhen.com/course/demo/motorcycle/index.html?from=message&amp;isappinstalled=0" target="_blank" rel="external">demo</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/5.gif" alt="ã€Šè…¾è®¯ï¼šå¾®ä¼—é“¶è¡Œã€‹æˆªå›¾" style="display:block;max-width:320px;margin: 0 auto;"><br><img src="//img.aotu.io/Tingglelaoo/20160506/5.png" alt="ã€Šè…¾è®¯ï¼šå¾®ä¼—é“¶è¡Œã€‹æˆªå›¾" style="display:block;max-width:320px;margin: 0 auto;"></p>
<p>ä½œè€…å¯¹è½®å­å’Œæ‘©æ‰˜è½¦çš„å¤„ç†å°±ä½“ç°å‡ºâ€œæŒ¤å‹å’Œæ‹‰ä¼¸â€çš„æ³•åˆ™ï¼Œå¸¦å‡ºé¢ ç°¸çš„ç°å®æ„Ÿã€‚</p>
<p>å°ç¼–æ˜¯éå¸¸æ¨èå¤§å®¶å»è®¤çœŸç ”ç©¶è¿™ä¸ªæ¡ˆä¾‹çš„ï¼Œå› ä¸ºä½œè€…é™ˆåœ¨çœŸå°±æ­¤è¯´æ˜è¿‡ä»–çš„è¿™éƒ¨ä½œå“å°±å®Œå…¨æ˜¯éµå¾ªè¿ªå£«å°¼åŠ¨ç”»åäºŒåŸåˆ™æ‰€ç å‡ºæ¥çš„ã€‚</p>
<p>ä½†æ˜¯å¾ˆå¯æƒœï¼Œæ¡ˆä¾‹å·²ç»ä¸‹çº¿äº†ã€‚</p>
<p>ä¸è¿‡ï¼Œä½ è¿˜å¯ä»¥æ¬£èµåˆ°å¦ä¸€ä½å¯¹è¿ªå£«å°¼åäºŒæ³•åˆ™åŒæ ·æœ‰å¿ƒå¾—çš„å¤§ç¥ECçš„ä½œå“<a href="http://jdc.jd.com/fd/pp/weixiaodian_welcome/index.html" target="_blank" rel="external">ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹</a>ã€‚</p>
<blockquote>
<p>æ¡ˆä¾‹æˆªå›¾æ¥æºäº<a href="http://jdc.jd.com/fd/pp/weixiaodian_welcome/index.html" target="_blank" rel="external">ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/6.gif" alt="ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹æˆªå›¾1" style="display:block;max-width:320px;margin: 0 auto;"><br><img src="//img.aotu.io/Tingglelaoo/20160506/6.png" alt="ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹æˆªå›¾1" style="display:block;max-width:320px;margin: 0 auto;"></p>
<p>ç›’å­çš„æ‰“å¼€è¿‡ç¨‹å°±å¸¦æœ‰ä¸€ä¸ªå¾€ä¸Šå±•å¼€é¢„å¤‡åŠ¨ä½œ(ANTICIPATION)ï¼Œå¹¶ä¸”å±•å¼€æ’’å¼€çš„ç¢å½©çº¸å¸¦æœ‰æ…¢å‡º(SLOW OUT)çš„æ•ˆæœï¼Œæ‹æ‹å°åº—çš„logoå¼¹å‡ºç¬¦åˆå¼§å½¢(ARCS)çš„è¿åŠ¨è½¨è¿¹ã€‚</p>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/7.gif" alt="ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹æˆªå›¾1" style="display:block;max-width:320px;margin: 0 auto;"><br><img src="//img.aotu.io/Tingglelaoo/20160506/7.png" alt="ã€Šæ‹æ‹å°åº—å…¨æ–°ä¸Šçº¿ã€‹æˆªå›¾1" style="display:block;max-width:320px;margin: 0 auto;"></p>
<p>é™¤æ­¤ä¹‹å¤–å¼§å½¢è¿åŠ¨è½¨è¿¹æœ€ä¸ºæ˜æ˜¾çš„åœ°æ–¹å°±æ˜¯é¡µé¢åˆ‡æ¢çš„è¿‡ç¨‹ã€‚</p>
<p>æ•´ä¸ªæ¡ˆä¾‹å¤„å¤„éƒ½éå¸¸ç”ŸåŠ¨è‡ªç„¶ã€åˆ©è½æ„Ÿæ»¡æ»¡ï¼Œä»¤äººèµå¹ã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ€ä¹ˆå»å®ç°æ‰èƒ½å¤Ÿç¬¦åˆåäºŒæ³•åˆ™ï¼Œå¯ä»¥è¿›ä¸€æ­¥é˜…è¯»è¿™ç¯‡æ–‡ç« <a href="https://www.smashingmagazine.com/2011/09/the-guide-to-css-animation-principles-and-examples/#more-105335" target="_blank" rel="external">ã€ŠThe Guide To CSS Animation: Principles and Examplesã€‹</a>å–”ï¼Œä¸è°¢ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨æŠŠæ§åäºŒæ³•åˆ™æ—¶ä¸ºäº†åŠ¨ç”»æ›´åŠ è‡ªç„¶ï¼Œæ—¶é—´å‡½æ•°(animation-timing-function)çš„è®¾è®¡ç»å¯¹æ˜¯ä¸¾è¶³è½»é‡çš„ä¸€ç¯ï¼Œå› ä¸ºåŠ¨ç”»å¯ä»¥è¯´æ˜¯ä¸€ç§å…³äºæ—¶é—´å‡½æ•°çš„è¿åŠ¨æ¼”å˜è¿‡ç¨‹ã€‚è¦ç å¥½åŠ¨ç”»ï¼Œè¿™ç¯‡å…³æ³¨ä»‹ç»ç¼“åŠ¨å‡½æ•°çš„<a href="http://isux.tencent.com/animation-factor.html" target="_blank" rel="external">ã€Šè®©ç•Œé¢åŠ¨ç”»æ›´è‡ªç„¶ã€‹</a>è¯´ä¸å®šèƒ½å¤ŸåŠ©ä½ ä¸€è‡‚ä¹‹åŠ›ã€‚</p>
<h2 id="ç å¥½äº†åŠ¨ç”»ï¼Œåšå¥½äº†é¡µé¢ï¼Œä»¥ä¸ºå°±æ­¤ç»“æŸäº†å—ï¼Ÿä¸è¦å¤ªå¤©çœŸï¼Œç§»åŠ¨ç«¯å¯¹æ€§èƒ½çš„è¦æ±‚ä¹Ÿæ˜¯ä¸€é“éœ€è¦è¿ˆè¿‡çš„åå„¿ã€‚"><a href="#ç å¥½äº†åŠ¨ç”»ï¼Œåšå¥½äº†é¡µé¢ï¼Œä»¥ä¸ºå°±æ­¤ç»“æŸäº†å—ï¼Ÿä¸è¦å¤ªå¤©çœŸï¼Œç§»åŠ¨ç«¯å¯¹æ€§èƒ½çš„è¦æ±‚ä¹Ÿæ˜¯ä¸€é“éœ€è¦è¿ˆè¿‡çš„åå„¿ã€‚" class="headerlink" title="ç å¥½äº†åŠ¨ç”»ï¼Œåšå¥½äº†é¡µé¢ï¼Œä»¥ä¸ºå°±æ­¤ç»“æŸäº†å—ï¼Ÿä¸è¦å¤ªå¤©çœŸï¼Œç§»åŠ¨ç«¯å¯¹æ€§èƒ½çš„è¦æ±‚ä¹Ÿæ˜¯ä¸€é“éœ€è¦è¿ˆè¿‡çš„åå„¿ã€‚"></a>ç å¥½äº†åŠ¨ç”»ï¼Œåšå¥½äº†é¡µé¢ï¼Œä»¥ä¸ºå°±æ­¤ç»“æŸäº†å—ï¼Ÿä¸è¦å¤ªå¤©çœŸï¼Œç§»åŠ¨ç«¯å¯¹æ€§èƒ½çš„è¦æ±‚ä¹Ÿæ˜¯ä¸€é“éœ€è¦è¿ˆè¿‡çš„åå„¿ã€‚</h2><p>Googleåœ¨æœ‰å…³åŠ¨ç”»æ€§èƒ½æ¸²æŸ“ä¼˜åŒ–çš„æ–‡ç« <a href="https://developers.google.com/web/fundamentals/design-and-ui/animations/?hl=zh-cn" target="_blank" rel="external">ã€ŠåŠ¨ç”» | Web Fundamentals - Google Developersã€‹</a>ï¼ˆå¯¹ä¸èµ·ï¼Œè¿™é‡Œæœ‰é“å¢™ï¼‰ä¸­æå‡ºå»ºè®®:</p>
<blockquote>
<p><strong>é¿å…ä¸ºå¼€é”€å¤§çš„å±æ€§è®¾ç½®åŠ¨ç”»</strong>ï¼Œè¦è®©æ¯æ¬¡åœ¨è®¾ç½®åŠ¨ç”»æ—¶å¿…é¡»æ³¨æ„ä¿æŒ 60fpsã€‚</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œå“ªäº›æ˜¯å¼€é”€å¤§çš„å±æ€§å‘¢ï¼Ÿ<br>ï¼ˆä¸‹é¢æ˜¯ç§‘æ™®ç¯èŠ‚ï¼Œæ¸…æ¥šçš„ç«¥é‹å¯ä»¥è·³è¿‡ï¼‰ã€‚</p>
<p>é¡µé¢æ¸²æŸ“çš„ä¸€èˆ¬è¿‡ç¨‹ä¸ºJS &gt; CSS &gt; è®¡ç®—æ ·å¼ &gt; å¸ƒå±€ &gt; ç»˜åˆ¶ &gt; æ¸²æŸ“å±‚åˆå¹¶ã€‚</p>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/8.png" alt="ã€Šé¡µé¢æ¸²æŸ“çš„ä¸€èˆ¬è¿‡ç¨‹ã€‹" style="display:block;max-width:640px;margin: 0 auto;"></p>
<p>å…¶ä¸­ï¼Œ<strong>Layout(é‡æ’)å’ŒPaint(é‡ç»˜)æ˜¯æ•´ä¸ªç¯èŠ‚ä¸­æœ€ä¸ºè€—æ—¶çš„ä¸¤ç¯</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å°½é‡é¿å…ç€è¿™ä¸¤ä¸ªç¯èŠ‚ã€‚ä»æ€§èƒ½æ–¹é¢è€ƒè™‘ï¼Œæœ€ç†æƒ³çš„æ¸²æŸ“æµæ°´çº¿æ˜¯æ²¡æœ‰å¸ƒå±€å’Œç»˜åˆ¶ç¯èŠ‚çš„ï¼Œåªéœ€è¦åšæ¸²æŸ“å±‚çš„åˆå¹¶å³å¯ã€‚</p>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/9.png" alt="ã€Šé¡µé¢æ¸²æŸ“çš„ä¸€èˆ¬è¿‡ç¨‹ã€‹" style="display:block;max-width:640px;margin: 0 auto;"></p>
<p>é‚£æ€ä¹ˆçŸ¥é“å“ªäº›CSSå±æ€§çš„æ”¹å˜æ˜¯ä¼šå½±å“è¿™ä¸¤ä¸ªç¯èŠ‚çš„å‘¢ï¼Ÿè¯ºï¼Œä¸‹é¢å°±æ˜¯å„CSSå±æ€§ä¸å…¶å½±å“çš„ç¯èŠ‚ã€‚</p>
<blockquote>
<p>æˆªå›¾æ¥æºäº<a href="http://csstriggers.com/" target="_blank" rel="external">CSS Triggers</a>ï¼Œæ›´ä¸ºè¯¦ç»†åœ°ç¿»å¢™å»æ‹¿å§</p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/10.png" alt="ã€Šå„ç§CSSå±æ€§å½±å“çš„æ¸²æŸ“ç¯èŠ‚ã€‹" style="display:block;max-width:640px;margin: 0 auto;"></p>
<p>åœ¨å®é™…çš„åº”ç”¨é‡Œï¼Œæœ€ä¸ºç®€å•çš„ä¸€ä¸ªæ³¨æ„ç‚¹å°±æ˜¯ï¼Œè§¦å‘åŠ¨ç”»çš„å¼€å§‹ä¸è¦ç”¨diaplay:noneå±æ€§å€¼ï¼Œå› ä¸ºå®ƒä¼šå¼•èµ·Layoutã€Paintç¯èŠ‚ï¼Œé€šè¿‡åˆ‡æ¢ç±»åå°±å·²ç»æ˜¯ä¸€ç§å¾ˆå¥½çš„åŠæ³•ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// æ ¹æ®ç±»åè§¦å‘åŠ¨ç”»</div><div class="line">.active &#123;</div><div class="line">	 &amp;.flow_away &#123;</div><div class="line">		.mobile,</div><div class="line">		.ground,</div><div class="line">		.platform,</div><div class="line">		.words &#123;</div><div class="line">		  -webkit-animation: flowAwayUp ease .5s forwards;</div><div class="line">		  animation: flowAwayUp ease .5s forwards;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰å°±æ˜¯ï¼Œtranslateå±æ€§å€¼æ¥æ›¿æ¢top/left/right/bottomçš„åˆ‡æ¢ï¼Œscaleå±æ€§å€¼æ›¿æ¢width/heightï¼Œopacityå±æ€§æ›¿æ¢display/visibilityç­‰ç­‰ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹åŠ¨ç”»æ¸²æŸ“çš„ä¼˜åŒ–è¿˜æœ‰å…¶ä»–æ–¹å¼ï¼Œä¸Šé¢è´´å‡ºGoogleæ–‡ç« é“¾æ¥å°±æœ‰ä¸€ç³»åˆ—çš„æ–‡ç« è§£è¯»ï¼Œå°ç¼–å°±ä¸å–å¼„æŒ‰ä¸‹ä¸è¡¨äº†ï¼Œè¿™é‡Œé¡ºä¾¿æŠ›å‡ºå‰è¾ˆå¯¹è¿™æ–¹é¢ç›¸å…³çš„æ€»ç»“ï¼š</p>
<blockquote>
<p>æ€»ç»“æ¥æºäº@ç™»å¹³ç™»å¹³çš„<a href="http://weibo.com/p/1001603865643593165786" target="_blank" rel="external">ã€ŠH5åŠ¨ç”»60fpsä¹‹è·¯ã€‹</a></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160506/12.png" alt="ã€ŠH5åŠ¨ç”»60fpsä¹‹è·¯ã€‹" style="display:block;max-width:640px;margin: 0 auto;"></p>
<p>æœ€åæ€»ç»“ä¸‹è¦ç‚¹å°±æ˜¯</p>
<ul>
<li>äº‹å…ˆåšå¥½è§„åˆ’</li>
<li>ç çš„æ—¶å€™æ³¨æ„åäºŒæ³•åˆ™</li>
<li>è°¨è®°é¿å…å¯¼è‡´layout/paintçš„å±æ€§</li>
</ul>
<p>æå®šï¼</p>
<blockquote>
<p>æœ€åçš„æœ€åï¼Œç”±äºæœ¬æ–‡ä¸»æ¨çš„æ˜¯CSS3 Animationï¼Œå…¶ä½™çš„å®ç°æ–¹å¼ä¸åœ¨è®¨è®ºèŒƒå›´å†…ï¼šPï¼Œæ‹œæ‹œï¼Œä¸‹æ¬¡å†è§ã€‚</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;è¡¥é—´åŠ¨ç”»&lt;/strong&gt;æ˜¯åŠ¨ç”»çš„åŸºç¡€å½¢å¼ä¹‹ä¸€ï¼ŒæŒ‡çš„æ˜¯äººä¸ºè®¾å®šåŠ¨ç”»çš„å…³é”®çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å…³é”®å¸§ï¼Œè€Œå…³é”®å¸§ä¹‹é—´çš„è¿‡æ¸¡è¿‡ç¨‹åªéœ€è¦ç”±è®¡ç®—æœºå¤„ç†æ¸²æŸ“çš„ä¸€ç§åŠ¨ç”»å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è§¦å±é¡µé¢ä¸­ï¼Œå¸¸è§çš„å®ç°è¡¥é—´åŠ¨ç”»ä»¥ä¸‹å‡ ç§å½¢å¼ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS3" scheme="https://aotu.io/tags/CSS3/"/>
    
      <category term="åŠ¨ç”»" scheme="https://aotu.io/tags/%E5%8A%A8%E7%94%BB/"/>
    
      <category term="Aniamtion" scheme="https://aotu.io/tags/Aniamtion/"/>
    
  </entry>
  
  <entry>
    <title>CSS3åŠ¨ç”»ä¹‹3DåŠ¨ç”»</title>
    <link href="https://aotu.io/notes/2016/05/06/CSS3-3D-Animation/"/>
    <id>https://aotu.io/notes/2016/05/06/CSS3-3D-Animation/</id>
    <published>2016-05-06T02:00:00.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰€æœ‰ä¸œè¥¿ä¸€è·Ÿ3Dæ‰¯ä¸Šå…³ç³»ï¼Œå¤æ‚æŒ‡æ•°éƒ½æ˜¯å™Œå™Œå™Œå¾€ä¸Šèµ°ã€‚ä¸è¿‡ä¹Ÿæ­£å¸¸ï¼Œæ¯•ç«Ÿå¤šäº†ä¸€ä¸ªç»´åº¦ï¼Œè¦æœ‰ä¸‰ç»´åº”æœ‰çš„å°Šä¸¥ã€‚</p>
<p>3D Transformsè¦æ€ä¹ˆå†™ï¼Ÿèƒ½å†™ç¿»ç‰Œæ•ˆæœå—ï¼Ÿèƒ½å†™ç¿»ä¹¦æ•ˆæœå—ï¼Ÿèƒ½å†™å‡ºç«‹ä½“ä¹¦çš„æ•ˆæœå—ï¼Ÿç‚¹è¿›æ¥ï¼Œç­”æ¡ˆéƒ½åœ¨è¿™é‡Œé¢ã€‚</p>
<a id="more"></a>
<p>å¾ˆå¤šæ—¶å€™ï¼Œä»…ä»…å°†å…ƒç´ è¿›è¡ŒäºŒç»´å±‚é¢çš„å˜æ¢æ˜¾ç„¶ä¸æ˜¯äººç±»çš„ç»ˆç‚¹ï¼Œæ¯•ç«ŸåäºŒç»´ç©ºé—´éƒ½å¯èƒ½ä¸æ˜¯æé™ï¼ˆè§†é¢‘: <a href="http://v.youku.com/v_show/id_XNjA0MjU5NzA4.html?from=s1.8-1-1.2" target="_blank" rel="external">ä»ä¸€ç»´ç©ºé—´åˆ°åäºŒç»´ç©ºé—´</a>ï¼‰ã€‚</p>
<p><a href="https://desandro.github.io/3dtransforms/" target="_blank" rel="external">Intro to 3D Transforms</a> çš„ä½œè€…David DeSandro è¯´ï¼Œç°åœ¨å¯æ˜¯21ä¸–çºªï¼Œå¯æˆ‘ä»¬ç«Ÿç„¶è¿˜åœ¨è·Ÿä¸‰åå¹´å‰çš„äºŒç»´ç©ºé—´ç•Œé¢æ‰¯çš®ã€‚æ‰€å¹¸2011å¹´ï¼Œæˆ‘ä»¬æœ‰äº†CSS3ï¼Œæˆ‘ä»¬è¿˜æœ‰äº†3D Transformsï¼ŒçœŸæ˜¯ä¸€ä¸ªå€¼å¾—å¥”èµ°ç›¸å‘Šçš„å¤§äº‹ä»¶ã€‚</p>
<h2 id="Transform-2d-3d"><a href="#Transform-2d-3d" class="headerlink" title="Transform 2d 3d"></a>Transform 2d 3d</h2><p>3Då˜æ¢ç›¸è¾ƒ2Då˜æ¢ï¼Œåæ ‡ç³»ä¸­å¤šäº†Zè½´ï¼Œä¹Ÿå°±æ„å‘³ç€ç‰©ä½“é™¤äº†ä¸Šä¸‹å·¦å³ï¼Œè¿˜å¯ä»¥å‰åç§»åŠ¨ã€‚è€Œrotateåœ¨2Dä¸­çš„æ—‹è½¬æ–¹å¼ï¼Œåœ¨3Dä¸­ä¸rotateZç›¸å½“ã€‚</p>
<p>é‚£ä¹ˆï¼Œå•çº¯åœ°å°†transformä¸­çš„å‚æ•°æ‰©å±•å‡ºZç»´åº¦ï¼Œå°±èƒ½å®ç°3Dæ•ˆæœäº†å—ï¼Ÿæˆ‘çœ‹è§CSS3ç¬‘äº†ã€‚</p>
<h2 id="perspective-æ¦‚å¿µç†è§£"><a href="#perspective-æ¦‚å¿µç†è§£" class="headerlink" title="perspective æ¦‚å¿µç†è§£"></a>perspective æ¦‚å¿µç†è§£</h2><p>ä»€ä¹ˆæ˜¯perspectiveï¼Ÿè¯å…¸ä¸­ç¿»è¯‘ä¸ºè§‚ç‚¹ã€è¿œæ™¯ã€é€è§†å›¾ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æŠ½è±¡çš„æ¦‚å¿µï¼Œéœ€è¦ä¸€ç‚¹ç©ºé—´æƒ³è±¡åŠ›ã€‚</p>
<p>æˆ‘ä»¬å…ˆæŠ›å¼€è¿™ä¸ªæ¦‚å¿µï¼Œå°è¯•ä½¿ç”¨åˆšæ‰è¯´åˆ°çš„çŸ¥è¯†ç‚¹è¿›è¡Œç¿»ç‰Œï¼ˆå’¦ï¼‰æ•ˆæœçš„å°è¯•ï¼Œèªæ˜çš„ä½ ä¸€å®šåˆ†åˆ†é’Ÿç å‡ºæ¥ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"card"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- å¡ç‰Œæ­£é¢ --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">figure</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- å¡ç‰Œåé¢ --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">figure</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#card</span> <span class="selector-class">.front</span> &#123;</div><div class="line">	<span class="attribute">background</span>: red;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#card</span> <span class="selector-class">.back</span> &#123;</div><div class="line">	<span class="attribute">background</span>: blue;</div><div class="line">	<span class="attribute">transform</span>: <span class="built_in">rotateY</span>( 180deg );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* ç¿»ç‰ŒåŠ¨ä½œ */</span></div><div class="line"><span class="selector-id">#card</span><span class="selector-class">.flipped</span> &#123;</div><div class="line">	<span class="attribute">transform</span>: <span class="built_in">rotateY</span>( 180deg );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯æ”¾æµè§ˆå™¨ä¸€çœ‹ï¼Œè¿™ä¸å¯¹å‘€ï¼Œä¸ºä»€ä¹ˆç”¨3Dçš„ä»£ç å†™å‡ºäº†2Dçš„æ•ˆæœã€‚</p>
<p><img src="//img.aotu.io/FnsJjBpYlSYLBuEe0icU12X37rzk" alt="è¯´èµ·æ¥ä½ å¯èƒ½ä¸ä¿¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå»¶Yè½´æ—‹è½¬äº†45çš„ç‰Œ"></p>
<p>è¿™ä¸ªæ—¶å€™æœ‰è¯·æˆ‘ä»¬çš„perspectiveé€è§†å›ã€‚</p>
<p>å­¦è¿‡ç´ æçš„äººä¸€å®šå¯¹é€è§†çš„æ¦‚å¿µä¸é™Œç”Ÿï¼Œé€è§†æ˜¯ä¿è¯ç´ æå†™ç”ŸçœŸå®åˆç†çš„åŸºç¡€ã€‚</p>
<blockquote>
<p>è§†é¢‘ï¼š<a href="http://www.qiangwaiba.com/youtube/watch/aI3_R6WAeuQ" target="_blank" rel="external">é€è§†å­¦ä¹‹ä¸€ç‚¹é€è§†æ³•</a></p>
</blockquote>
<p>CSS3ä¸­çš„perspetiveåœ¨è¿™æ ·ä¸€ä¸ªä½“ç³»é‡Œå°±ä»£è¡¨ç€å…ƒç´ ä¸è§‚è€…ä¹‹é—´çš„è·ç¦»ï¼Œå½¢è±¡ç‚¹è¯´ï¼Œå°±æ˜¯å…ƒç´ 3Dæ•ˆæœçš„å¼ºåº¦ã€‚CSS3ä¸­çš„3Dæ•ˆæœæ¶ˆå¤±ç‚¹å›ºå®šï¼Œå˜åŒ–çš„æ˜¯è§‚è€…ä¸å…ƒç´ ä¹‹é—´çš„è·ç¦»ã€‚ä¸è¿‡perspectiveæ•°å€¼ä¸3Dæ•ˆæœå¼ºåº¦æ˜¯æˆåæ¯”çš„ï¼Œæ•°å€¼è¶Šå¤§ï¼Œå…ƒç´ çš„3Dæ•ˆæœè¶Šä¸æ˜æ˜¾â€”â€”2000pxçš„è§†ç‚¹æ„å‘³ç€ä½ çœ‹çš„æ˜¯è¿œæ–¹çš„ç‰©ä½“ï¼Œè€Œ100pxåˆ™æ„å‘³ç€è¿™ä¸ªç‰©ä½“å°±åœ¨ä½ çœ¼å‰ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªå›¾æˆ–è®¸èƒ½å¸®åŠ©æˆ‘ä»¬æƒ³è±¡3Dæ•ˆæœå¼ºåº¦è¿™ä¸ªæ¦‚å¿µâ€”â€”</p>
<p><img src="//img.aotu.io/FrPCDSbOxepqWV8JrDRIzamARiP9" alt="perspective(graphic)"></p>
<p><em>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="https://en.wikipedia.org/wiki/Perspective_%28graphical%29" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a>ï¼‰</em></p>
<p>å¦‚æœè¿˜æ˜¯ä¸æ‡‚ï¼Œè¿˜æœ‰ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨ä¸­è¾¹è°ƒæ•´perspectiveæ•°å€¼è¾¹è§‚å¯Ÿ3Dæ•ˆæœã€‚</p>
<p><img src="//img.aotu.io/FvxF4EoQ7xliwof1HArQO_0UKAZn" alt="æµè§ˆå™¨ä¸­çš„perspective"></p>
<h2 id="æ¶ˆå¤±ç‚¹"><a href="#æ¶ˆå¤±ç‚¹" class="headerlink" title="æ¶ˆå¤±ç‚¹"></a>æ¶ˆå¤±ç‚¹</h2><p><img src="//img.aotu.io/FnvhLwboKDByIz9skLKAifm-TbVZ" alt="perspective-children01"></p>
<p><em>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="https://desandro.github.io/3dtransforms/docs/perspective.html" target="_blank" rel="external">Intro to CSS 3D transforms - Perspective</a>ï¼‰</em></p>
<p>å·¦å›¾ä¸å³å›¾çš„å…ƒç´ å‡ç»•Yè½´æ—‹è½¬äº†45åº¦ï¼Œä½†å·®åˆ«å¾ˆæ˜æ˜¾ï¼Œå³å›¾æ›´å®¹æ˜“è®©äººæƒ³åˆ°ä¸€ä¸ªç”»é¢ä¸­é›†ä½“å¼€å¯çš„çª—æˆ·ã€‚å·¦å›¾çš„é—®é¢˜å°±åœ¨äºï¼Œæ¯ä¸ªå…ƒç´ çš„æ¶ˆå¤±ç‚¹å„è‡ªä¸ºæ”¿ï¼Œéƒ½åœ¨å…ƒç´ çš„ä¸­å¿ƒç‚¹ä½ç½®ï¼Œè€Œå³å›¾çš„æ¶ˆå¤±ç‚¹åˆ™ç»Ÿä¸€åœ¨å®çº¿æ–¹æ¡†çš„ä¸­å¿ƒä½ç½®ã€‚å®ç°æ–¹æ³•å°±æ˜¯å°†å…ƒç´ çš„perspetiveè®¾ç½®è½¬ç§»è‡³å…ƒç´ çˆ¶å®¹å™¨ä¸Šã€‚</p>
<p>è®²åˆ°è¿™é‡Œï¼Œè¿™ç§ç®€å•çš„3Då…¶å®åœ¨å¾ˆå¤šéç«‹ä½“è®¾è®¡çš„è§¦å±é¡µä¸­å·²ç»å¤Ÿç”¨ï¼Œç¨å¾®ä½¿ç”¨ä¸€ç‚¹å°±èƒ½äº§ç”Ÿéå‡¡çš„æ•ˆæœï¼Œæ¯”å¦‚ç¬¬1æœŸä¸­ä»‹ç»è¿‡çš„<a href="http://drose6.adidasevent.com/" target="_blank" rel="external">D Roseè§¦å±æ¡ˆä¾‹</a>ã€‚</p>
<p>æ˜çœ¼äººä¼šè¯´ï¼Œè¿™æ ·å­å¯ä»¥ç”»ä¸ªæ­£æ–¹ä½“å‡ºæ¥äº†ä¹Ÿã€‚æˆ‘çœ‹è§CSS3åˆç¬‘äº†ã€‚</p>
<h2 id="å»ºç«‹ä¸‰ç»´ç©ºé—´ä½“ç³»"><a href="#å»ºç«‹ä¸‰ç»´ç©ºé—´ä½“ç³»" class="headerlink" title="å»ºç«‹ä¸‰ç»´ç©ºé—´ä½“ç³»"></a>å»ºç«‹ä¸‰ç»´ç©ºé—´ä½“ç³»</h2><p><img src="//img.aotu.io/Fp3RHvtFL4VVmPE09kkdVPALrgcP" alt="ä½ æ‰€æœŸå¾…çš„æ­£æ–¹ä½“ï¼Œæµè§ˆå™¨ç»™ä½ çš„â€œæ­£æ–¹ä½“â€"></p>
<p><em>ç°å®æ€»æ˜¯ä¹³é½¿æ®‹é…·</em></p>
<p>æœ‰äº†perspetiveå±æ€§ï¼Œæˆ‘ä»¬é¡¶å¤šæ˜¯ä¸€ç¾¤ä¼šåœ¨çº¸ä¸Šç”»ç´ æçš„å®¶ä¼™ï¼Œè¦æƒ³å¾’æ‰‹é€ æ¨¡å‹ï¼Œè¿˜æ˜¯å¤ªå«©ã€‚å°±æ‹¿åˆšæ‰çš„ç¿»ç‰Œæ•ˆæœæ¥è¯´ï¼Œå¦‚æœä½ ç¿»æ»šcardçˆ¶å®¹å™¨ï¼Œæ— è®ºæ€ä¹ˆç¿»ï¼Œèƒ½çœ‹åˆ°çš„åªæœ‰æ­£é¢çš„å¡ç‰‡ï¼Œå› ä¸ºç°åœ¨çš„ä½“ç³»å°±æ˜¯ä¸€å¼ ç´ æç»˜ç”»ï¼Œä½ æ‹¿ç€å†é€¼çœŸçš„ç´ æç”»ç¿»åˆ°èƒŒé¢ï¼Œä¹Ÿæ˜¯çœ‹ä¸åˆ°çœŸå®ç‰©ä½“çš„èƒŒé¢çš„å¯¹å§ã€‚è¶…è¶Šå¹³é¢3Dçš„å…³éš˜å°±åœ¨äºtransform-style: preserve-3dçš„å±æ€§è®¾ç½®ï¼Œé»˜è®¤å€¼ä¸ºflatï¼Œå³â€œç´ æä½œå“â€ã€‚è¿™ä¸ªå±æ€§çš„è®¾ç½®æ—¨åœ¨å‘Šè¯‰å­å…ƒç´ éœ€è¦éµå¾ªæ€æ ·çš„ç©ºé—´ä½“ç³»è§„åˆ™ã€‚è¿™ä¸ªå±æ€§ä¸èƒ½ç»§æ‰¿ï¼Œå› æ­¤åªè¦æœ‰å­å…ƒç´ éœ€è¦è®¾ç½®ç©ºé—´ä½“ç³»è§„åˆ™ï¼Œå°±å¾—åœ¨çˆ¶å…ƒç´ å£°æ˜è¿™ä¸ªå±æ€§ã€‚</p>
<p>æœ‰äº†æµè§ˆå™¨ä¸ºæˆ‘ä»¬å¤„ç†ç©ºé—´ä½“ç³»è§„åˆ™ï¼Œå¯ä»¥çœä¸å°‘äº‹ï¼Œä¸éœ€è¦ä½ æ‹…å¿ƒå±‚çº§é—®é¢˜ã€ä¸éœ€è¦ä½ æ“å¿ƒå“ªä¸ªå…ƒç´ è½¬åˆ°å“ªé‡Œè¦æ¶ˆå¤±å“ªä¸ªå…ƒç´ è½¬åˆ°å“ªé‡Œè¦å‡ºç°ï¼Œå—¯ï¼Œå°ç¼–ä»æ²¡è‡ªå·±è¿™ä¹ˆå¹²è¿‡ï¼Œä»æ²¡ã€‚</p>
<h2 id="ä»ç¿»ç‰Œåˆ°ç¿»ä¹¦"><a href="#ä»ç¿»ç‰Œåˆ°ç¿»ä¹¦" class="headerlink" title="ä»ç¿»ç‰Œåˆ°ç¿»ä¹¦"></a>ä»ç¿»ç‰Œåˆ°ç¿»ä¹¦</h2><p>ç¿»ç‰Œé‚£æ˜¯çš‡å¸å¹²çš„äº‹å„¿ï¼Œæˆ‘ä»¬æ–‡åŒ–äººå¾—ç¿»ä¹¦ã€‚åˆšæ‰çš„ç¿»ç‰Œéƒ½æ˜¯åœ¨æ–¹å—çš„ä¸­éƒ¨ä¸ºè½´è¿›è¡Œçš„å˜æ¢ï¼Œæˆ‘ä»¬æŠŠå˜æ¢åŸç‚¹ä¸€æ¢ï¼Œå°±å˜æˆä¹¦é¡µåœ¨ç¿»äº†ã€‚</p>
<p>ä¸€æœ¬åˆä¸Šçš„ä¹¦æ­£å¸¸æ¥è¯´æ˜¯åœ¨Yè½´å³ä¾§ï¼Œæ¯ä¸€é¡µéƒ½åŒ…å«ä¸¤é¢ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æœ¬ä¹¦æ˜¯ç”±è‹¥å¹²ä¸ªç¿»é¡µæ•ˆæœç»„åˆè€Œæˆï¼Œæ¯ä¸€é¡µçš„å˜æ¢åŸç‚¹åœ¨å…ƒç´ å·¦ä¾§ã€‚ç”±æ­¤å¯ä»¥åœ¨ç¿»ç‰Œçš„åŸºç¡€ä¸Šè¿…é€Ÿæ•´å‡ºä¸€ä¸ªç¿»ä¹¦demoï¼ˆçŒ›æˆ³æŸ¥çœ‹<a href="http://lyxuncle.github.io/pageturning/demo/demo.html" target="_blank" rel="external">ç¿»ä¹¦demo</a>ï¼‰ã€‚</p>
<p>é˜´å½±çš„ä½¿ç”¨èƒ½è®©ç¿»ä¹¦æ•ˆæœå˜å¾—æ›´çœŸå®</p>
<p><img src="//img.aotu.io/FnW5R4z2f1Ho3BobCx_yC1uH3PNe" alt="å¸¦é˜´å½±çš„ç¿»ä¹¦demo"></p>
<p><em>ï¼ˆ<a href="http://lyxuncle.github.io/pageturning/demo/demo2.html" target="_blank" rel="external">çŒ›æˆ³æŸ¥çœ‹demo</a>ï¼‰</em></p>
<h2 id="3DåŠ¨ç”»ä¹‹Hard-Levelï¼šç«‹ä½“ä¹¦"><a href="#3DåŠ¨ç”»ä¹‹Hard-Levelï¼šç«‹ä½“ä¹¦" class="headerlink" title="3DåŠ¨ç”»ä¹‹Hard Levelï¼šç«‹ä½“ä¹¦"></a>3DåŠ¨ç”»ä¹‹Hard Levelï¼šç«‹ä½“ä¹¦</h2><p>ç«‹ä½“ä¹¦åœ¨å¤–å›½å«Pop-Up Bookï¼Œæ»¡æ»¡çš„â€œSurprise!â€æ„Ÿã€‚è¿™ç§è¶…è¶Šä¼ ç»Ÿå¹³é¢ä¹¦ç±çš„é˜…è¯»æ¨¡å¼å¸¸è¢«ç”¨äºå„¿ç«¥ä¹¦ç±ã€‚</p>
<p><img src="//img.aotu.io/FkhE7EbeXLorH_KIyPT6p5BMW9BJ" alt="A Guided Tour of THE MEL BIRNKRANT COLLECTION"></p>
<p><em>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="http://melbirnkrant.com/collection/page48.html" target="_blank" rel="external">A Guided Tour of THE MEL BIRNKRANT COLLECTION</a>ï¼‰</em></p>
<p>è¦ç”¨CSS3å®ç°è¿™ç§æ•ˆæœï¼Œæƒ³æƒ³è¿˜æœ‰ç‚¹å°æ¿€åŠ¨ã€‚</p>
<p>é¦–å…ˆå»ºç«‹ä¸€ä¸ªç«‹ä½“ä¹¦è§„åˆ™ï¼š</p>
<blockquote>
<p>ä¹¦å¼€ï¼Œå…ƒç´ èµ·<br>å…ƒç´ ç«–èµ·é€Ÿåº¦å°äºç­‰äºä¹¦é¡µå¼€å¯é€Ÿåº¦<br>å…ƒç´ æŠ˜å åä¸å¯éœ²å‡ºä¹¦è¾¹<br>å…ƒç´ å±‚å å…³ç³»ä¸å¯åè‡ªç„¶<br>å‰©ä¸‹çš„äº‹ä¹Ÿå°±æ°´åˆ°æ¸ æˆï¼Œæ— éæ˜¯åœ¨æ¯ä¸€é¡µå»ºç«‹3Dä½“ç³»ã€ç«‹ä½“å…ƒç´ ä»rotateX(90deg)è½¬æ¢åˆ°rotateX(0deg)çš„äº‹å„¿ã€‚</p>
</blockquote>
<p><img src="//img.aotu.io/Fu3qwoFnTKfxqsvE_p3MX_1Vsrl7" alt="Mozzillaçš„å°demo"></p>
<p><em>ï¼ˆ<a href="http://www.html5tricks.com/demo/css3-3d-book/index.html" target="_blank" rel="external">Mozzillaçš„å°demo</a>ï¼‰</em></p>
<p>å°ç¼–æ›¾åšè¿‡ä¸€ä¸ªä¸§å¿ƒç—…ç‹‚çš„ç«‹ä½“ä¹¦è§¦å±é¡µï¼Œç”±äºç«‹ä½“ä¹¦å·¦å³ä¸¤é¡µäº’ç›¸å…³è”çš„ç‰¹æ€§ï¼Œç¿»ç‰Œçš„æ–¹å¼ä¸å¤ªé€‚åˆç”¨åœ¨è¿™é‡Œï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å¦ä¸€ç§è¾ƒä¸ºéº»çƒ¦çš„æ–¹å¼â€”â€”ä¸åƒç¿»ç‰Œæ–¹å¼ä¸­çš„å‰åä¸¤é¡µæ†ç»‘ï¼Œè¿™é‡Œçš„ä¹¦é¡µå·¦å³ä¸¤é¡µå±äºä¸€ä¸ª3Dä½“ç³»ï¼Œé€šè¿‡translateZå€¼çš„å˜æ¢æ§åˆ¶å±‚çº§å…³ç³»ï¼Œå› ä¸ºåœ¨3Dä½“ç³»é‡Œï¼Œz-indexå·²è¢«æŠ›å¼ƒã€‚</p>
<p><a href="http://jdc.jd.com/fd/pp/maimang/index.html" target="_blank" rel="external">çŒ›æˆ³è¿›å…¥ï¼šéº¦èŠ’æ¨å¹¿é¡µ</a></p>
<h2 id="ç»ˆç«¯æ”¯æŒ"><a href="#ç»ˆç«¯æ”¯æŒ" class="headerlink" title="ç»ˆç«¯æ”¯æŒ"></a>ç»ˆç«¯æ”¯æŒ</h2><p>ç”±äºæˆªè‡³ç›®å‰ä¸ºæ­¢ï¼ŒCSS3çš„3DåŠŸèƒ½è¿˜æ­¢äºç‚«æŠ€çš„é˜¶æ®µï¼Œå®‰å“æœºä¸iOSçš„æ”¯æŒæ•ˆæœå­˜åœ¨å·®å¼‚ä¸”éš¾ä»¥è°ƒå’Œï¼Œä»ä¸Šé¢é‚£ä¸ªæ¡ˆä¾‹ä¸­è‚‰çœ¼å¯è§çš„å‘å°±èƒ½çœ‹å‡ºï¼Œå› æ­¤é™¤äº†ç®€å•çš„3Dè½¬æ¢ï¼Œä¸å»ºè®®åœ¨å¤§é¡¹ç›®ä¸­å¤§é¢ç§¯ä½¿ç”¨3Dæ·±å±‚åŠŸèƒ½ã€‚</p>
<p><img src="//img.aotu.io/Fvr8c6UqAazgEMtw4HtO-tBrhGn9" alt="3Dåœ¨æµè§ˆå™¨ä¸­çš„æ”¯æŒæƒ…å†µ"></p>
<h2 id="3Dä¸ç¡¬ä»¶åŠ é€Ÿ"><a href="#3Dä¸ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="3Dä¸ç¡¬ä»¶åŠ é€Ÿ"></a>3Dä¸ç¡¬ä»¶åŠ é€Ÿ</h2><p>åŠé—´æµä¼ è¿™è¿™æ ·ä¸€ä¸ªä¼ è¯´ï¼šä¸€æ—¦ä½¿ç”¨3Då±æ€§ï¼Œå°±èƒ½è§¦å‘è®¾å¤‡çš„ç¡¬ä»¶åŠ é€Ÿï¼Œä»è€Œä½¿å¾—æµè§ˆå™¨çš„è¡¨ç°æ›´ä½³ã€‚ä½†è¿™å¥è¯ä¹Ÿå¾—çœ‹æƒ…å¢ƒâ€”â€”</p>
<blockquote>
<p>æƒ³è±¡ä½¿ç”¨GPUåŠ é€Ÿçš„åŠ¨ç”»å°±åƒæ˜¯Vin Dieselï¼ˆé€Ÿåº¦ä¸æ¿€æƒ…çš„ä¸»è§’ï¼‰å¼€ç€Dominicæ ‡å¿—æ€§çš„æ±½è½¦ â€”â€” Dodge Chargerã€‚å®ƒçš„å®šåˆ¶900 hpå¼•æ“å¯ä»¥è®©å®ƒåœ¨ä¸€ç¬é—´ä»0åŠ é€Ÿåˆ°60ç ã€‚ä½†æ˜¯å¦‚æœä½ å¼€ç€å®ƒåœ¨æ‹¥æŒ¤çš„é«˜é€Ÿå…¬è·¯ä¸Šåˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹ä½ é€‰æ‹©çš„è½¦è¾†Chargeræ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯é—®é¢˜æ˜¯ä½ è¿˜åœ¨ä¸€ä¸ªæ‹¥å µçš„é«˜é€Ÿå…¬è·¯ä¸Šã€‚â€”â€”ã€Š<a href="http://efe.baidu.com/blog/hardware-accelerated-css-the-nice-vs-the-naughty/" target="_blank" rel="external">CSSç¡¬ä»¶åŠ é€Ÿçš„å¥½ä¸å</a>ã€‹</p>
</blockquote>
<p>å› æ­¤åƒä¸‡åˆ«è´ªå¿ƒï¼Œå°†3Dæ•ˆæœæ•°é‡æ§åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œé¡µé¢æ€§èƒ½æ‰æ˜¯é‡ä¸­ä¹‹é‡ã€‚â€”â€”æ¥è‡ªå¾—åˆ°æƒ¨ç—›æ•™è®­çš„å°ç¼–çš„å¿ å‘Š</p>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><p><a href="https://desandro.github.io/3dtransforms/" target="_blank" rel="external">Intro to CSS3 3D transforms</a> by David DeSandro <em>â€”â€”è¯¦å°½åˆæ–°é²œçš„3D Transformersæ‰‹å†Œï¼ŒåŒ…å«è®¸å¤šä¸€çœ‹å°±æ‡‚çš„å°Demoï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„3Däº†ã€‚</em></p>
<p><a href="https://en.wikipedia.org/wiki/Perspective_%28graphical%29" target="_blank" rel="external">Perspective (graphical)</a><em>â€”â€”å¯¹é€è§†å­¦è¿˜ä¸€çŸ¥åŠè§£çš„å¯ä»¥çœ‹çœ‹ç»´åŸºçš„è¯¦ç»†è¯´æ˜ã€‚</em></p>
<p><a href="http://rupl.github.io/unfold/" target="_blank" rel="external">Unfolding the Box Model: Exploring CSS 3D Transforms</a> by Chris Ruppel <em>â€”â€”éå¸¸èµçš„3D Transformsä»‹ç»ï¼Œä»2Dåˆ°3Dè¿‡æ¸¡ï¼Œå¯åŠ¨è”æƒ³å­¦ä¹ æ³•ï¼Œä¸€çœ‹å°±æ˜ç™½ï¼Œå°±æ€•ä½ ä¸çœ‹ã€‚</em></p>
<p><a href="http://efe.baidu.com/blog/hardware-accelerated-css-the-nice-vs-the-naughty/" target="_blank" rel="external">CSSç¡¬ä»¶åŠ é€Ÿçš„å¥½ä¸å</a><em>â€”â€”å¾ˆå¤šäº‹æƒ…éƒ½ä¸æ˜¯ä¸€ä¸¤å¥èƒ½è®²æ¸…æ¥šçš„ï¼Œä½†æ˜¯åªè¦æ·±å…¥äº†è§£åŸç†ï¼Œä¸€ä¸¤å¥éƒ½ä¸ç”¨è®²å°±æ¸…æ¥šäº†ã€‚</em></p>
<hr>
<p><a href="http://jdc.jd.com/h5/case/maga.html" target="_blank" rel="external">æ‹‡æŒ‡æœŸåˆŠ</a>Â·<a href="http://jdc.jd.com/h5/case/maga.html?vol=8" target="_blank" rel="external">ç¬¬8æœŸÂ·CSS3åŠ¨ç”»å¼€å‘æ‰‹å†Œ</a><br>ã€ŠCSS3åŠ¨ç”»ä¹‹è¡¥é—´åŠ¨ç”»ã€‹<br>ã€ŠCSS3åŠ¨ç”»ä¹‹é€å¸§åŠ¨ç”»ã€‹<br>ã€ŠCSS3åŠ¨ç”»ä¹‹3DåŠ¨ç”»ã€‹</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰€æœ‰ä¸œè¥¿ä¸€è·Ÿ3Dæ‰¯ä¸Šå…³ç³»ï¼Œå¤æ‚æŒ‡æ•°éƒ½æ˜¯å™Œå™Œå™Œå¾€ä¸Šèµ°ã€‚ä¸è¿‡ä¹Ÿæ­£å¸¸ï¼Œæ¯•ç«Ÿå¤šäº†ä¸€ä¸ªç»´åº¦ï¼Œè¦æœ‰ä¸‰ç»´åº”æœ‰çš„å°Šä¸¥ã€‚&lt;/p&gt;
&lt;p&gt;3D Transformsè¦æ€ä¹ˆå†™ï¼Ÿèƒ½å†™ç¿»ç‰Œæ•ˆæœå—ï¼Ÿèƒ½å†™ç¿»ä¹¦æ•ˆæœå—ï¼Ÿèƒ½å†™å‡ºç«‹ä½“ä¹¦çš„æ•ˆæœå—ï¼Ÿç‚¹è¿›æ¥ï¼Œç­”æ¡ˆéƒ½åœ¨è¿™é‡Œé¢ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS3" scheme="https://aotu.io/tags/CSS3/"/>
    
      <category term="åŠ¨ç”»" scheme="https://aotu.io/tags/%E5%8A%A8%E7%94%BB/"/>
    
      <category term="H5" scheme="https://aotu.io/tags/H5/"/>
    
      <category term="è§¦å±é¡µ" scheme="https://aotu.io/tags/%E8%A7%A6%E5%B1%8F%E9%A1%B5/"/>
    
      <category term="3D" scheme="https://aotu.io/tags/3D/"/>
    
  </entry>
  
  <entry>
    <title>Swift Package Manager å¿«é€Ÿå…¥é—¨æŒ‡å¼•</title>
    <link href="https://aotu.io/notes/2016/04/28/SPM/"/>
    <id>https://aotu.io/notes/2016/04/28/SPM/</id>
    <published>2016-04-28T02:53:03.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†è¯­è¨€éƒ½æœ‰å®˜æ–¹çš„ä»£ç åˆ†é…è§£å†³æ–¹æ¡ˆï¼Œå¹¸å¥½è‹¹æœä¹Ÿåœ¨å¼€å‘èƒ½æ›¿ä»£ <a href="https://cocoapods.org/" target="_blank" rel="external">Cocoapods</a> å’Œ <a href="https://github.com/Carthage/Carthage" target="_blank" rel="external">Carthage</a> çš„ç®¡ç†å·¥å…·ã€‚<strong>Swift Package Manager</strong>ï¼ˆSwift åŒ…ç®¡ç†å™¨ï¼Œä¸‹é¢æˆ‘ä»¬ç®€ç§° SPM ï¼‰å°±æ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç† Swift ä»£ç çš„åˆ†é…çš„å®˜æ–¹å·¥å…·ï¼Œå®ƒä¸º Swift ç¼–è¯‘ç³»ç»Ÿé›†æˆäº†è‡ªåŠ¨è¿›è¡Œä¸‹è½½ã€ç¼–è¯‘å’Œè¿æ¥ä¾èµ–çš„è¿‡ç¨‹ã€‚</p>
<p>ç›®å‰ï¼ŒSPM è¿˜å¤„äºæ—©æœŸé˜¶æ®µï¼Œç°åœ¨ä»…æ”¯æŒ OS X å’Œ Linux ç³»ç»Ÿï¼Œå°šä¸æ”¯æŒ iOS, watchOS ä»¥åŠ tvOS å¹³å°ï¼Œä½†æœªæ¥å¾ˆå¤§å¸Œæœ›ä¼šæ”¯æŒä¸Šè¿°å¹³å°ã€‚</p>
<p>æœ¬æ–‡ä½¿ç”¨è‹¹æœå®˜æ–¹çš„ä¾‹å­æ¥è®²è§£ SPM çš„ä½¿ç”¨ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åˆ°æœ‰æ„è¿›è¡Œå°è¯•çš„äººï¼ :)</p>
<a id="more"></a>
<h2 id="æ¦‚å¿µæ¦‚è¿°"><a href="#æ¦‚å¿µæ¦‚è¿°" class="headerlink" title="æ¦‚å¿µæ¦‚è¿°"></a>æ¦‚å¿µæ¦‚è¿°</h2><p>è¿™ä¸ªç« èŠ‚æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å…³äº SPM åŠŸèƒ½çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚</p>
<h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>åœ¨ Swift ä¸­æˆ‘ä»¬ä½¿ç”¨æ¨¡å—æ¥ç®¡ç†ä»£ç ï¼Œæ¯ä¸ªæ¨¡å—æŒ‡å®šä¸€ä¸ªå‘½åç©ºé—´å¹¶å¼ºåˆ¶æŒ‡å®šæ¨¡å—å¤–å“ªäº›éƒ¨åˆ†çš„ä»£ç æ˜¯å¯ä»¥è¢«è®¿é—®æ§åˆ¶çš„ã€‚</p>
<p>ä¸€ä¸ªç¨‹åºå¯ä»¥å°†å®ƒæ‰€æœ‰ä»£ç èšåˆåœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œä¹Ÿå¯ä»¥å°†å®ƒä½œä¸ºä¾èµ–å…³ç³»å¯¼å…¥åˆ°å…¶ä»–æ¨¡å—ã€‚é™¤äº†å°‘é‡ç³»ç»Ÿæä¾›çš„æ¨¡å—ï¼Œåƒ OS X ä¸­çš„ Darwin æˆ–è€… Linux ä¸­çš„ Glibc ç­‰çš„å¤§å¤šæ•°ä¾èµ–éœ€è¦ä»£ç è¢«ä¸‹è½½æˆ–è€…å†…ç½®æ‰èƒ½è¢«ä½¿ç”¨ã€‚</p>
<p>å½“ä½ å°†ç¼–å†™çš„è§£å†³ç‰¹å®šé—®é¢˜çš„ä»£ç ç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—æ—¶ï¼Œè¿™æ®µä»£ç å¯ä»¥åœ¨å…¶ä»–æƒ…å†µä¸‹è¢«é‡æ–°åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡å—æä¾›äº†å‘èµ·ç½‘ç»œè¯·æ±‚çš„åŠŸèƒ½ï¼Œåœ¨ä¸€ä¸ªç…§ç‰‡åˆ†äº«çš„ app æˆ–è€… ä¸€ä¸ªå¤©æ°”çš„ app é‡Œå®ƒéƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚ä½¿ç”¨æ¨¡å—å¯ä»¥è®©ä½ çš„ä»£ç å»ºç«‹åœ¨å…¶ä»–å¼€å‘è€…çš„ä»£ç ä¹‹ä¸Šï¼Œè€Œä¸æ˜¯ä½ è‡ªå·±å»é‡å¤å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<h3 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h3><p>ä¸€ä¸ªåŒ…ç”± Swift æºæ–‡ä»¶å’Œä¸€ä¸ªæ¸…å•æ–‡ä»¶ç»„æˆã€‚è¿™ä¸ªæ¸…å•æ–‡ä»¶ç§°ä¸º Package.swiftï¼Œå®šä¹‰åŒ…åæˆ–è€…å®ƒçš„å†…å®¹ä½¿ç”¨ <code>PackageDescription</code> æ¨¡å—ã€‚</p>
<p>ä¸€ä¸ªåŒ…æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›®æ ‡ï¼Œæ¯ä¸ªç›®æ ‡æŒ‡å®šä¸€ä¸ªäº§å“å¹¶ä¸”å¯èƒ½å£°æ˜ä¸€ä¸ªæˆ–è€…å¤šä¸ªä¾èµ–ã€‚</p>
<h3 id="äº§å“"><a href="#äº§å“" class="headerlink" title="äº§å“"></a>äº§å“</h3><p>ä¸€ä¸ªç›®æ ‡å¯èƒ½æ„å»ºä¸€ä¸ªåº“æˆ–è€…ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºå…¶äº§å“ã€‚åº“æ˜¯åŒ…å«å¯ä»¥è¢«å…¶ä»– Swift ä»£ç å¯¼å…¥çš„æ¨¡å—ã€‚å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€æ®µå¯ä»¥è¢«æ“ä½œç³»ç»Ÿè¿è¡Œçš„ç¨‹åºã€‚</p>
<h3 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h3><p>ç›®æ ‡ä¾èµ–æ˜¯æŒ‡åŒ…ä¸­ä»£ç å¿…é¡»æ·»åŠ çš„æ¨¡å—ã€‚ä¾èµ–ç”±åŒ…èµ„æºçš„ç»å¯¹æˆ–è€…ç›¸å¯¹ URL å’Œä¸€äº›å¯ä»¥è¢«ä½¿ç”¨çš„åŒ…çš„ç‰ˆæœ¬è¦æ±‚æ‰€ç»„æˆã€‚åŒ…ç®¡ç†å™¨çš„ä½œç”¨æ˜¯é€šè¿‡è‡ªåŠ¨ä¸ºå·¥ç¨‹ä¸‹è½½å’Œç¼–è¯‘æ‰€æœ‰ä¾èµ–çš„è¿‡ç¨‹ä¸­ï¼Œå‡å°‘åè°ƒçš„æˆæœ¬ã€‚è¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼šä¾èµ–èƒ½æœ‰è‡ªå·±çš„ä¾èµ–ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªä¹Ÿå¯ä»¥å…·æœ‰ä¾èµ–ï¼Œå½¢æˆäº†ä¸€ä¸ªä¾èµ–ç›¸å…³å›¾ã€‚åŒ…ç®¡ç†å™¨ä¸‹è½½å’Œç¼–è¯‘æ‰€éœ€è¦æ»¡è¶³æ•´ä¸ªä¾èµ–ç›¸å…³å›¾çš„ä¸€åˆ‡ã€‚</p>
<blockquote>
<p>ä¸‹ä¸€ä¸ªç« èŠ‚å¯èƒ½éœ€è¦ä½ äº†è§£ä¸€äº› Swift çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¦‚æœä½ æ˜¯ Swift çš„æ–°æ‰‹ï¼Œå¯ä»¥å…ˆè¿›è¿™ä¸ªä¼ é€é—¨å­¦ä¹ ä¸€ä¸‹ Swift çš„åŸºæœ¬çŸ¥è¯†: <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html#//apple_ref/doc/uid/TP40014097-CH2-ID1" target="_blank" rel="external">Swift å…¥é—¨æ•™ç¨‹</a></p>
</blockquote>
<h2 id="å¼€æº-Swift-å…¥é—¨"><a href="#å¼€æº-Swift-å…¥é—¨" class="headerlink" title="å¼€æº Swift å…¥é—¨"></a><span id="å¼€æº Swift å…¥é—¨">å¼€æº Swift å…¥é—¨</span></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä¸€ä¸‹å¼€æº Swift çš„ä¸€äº›å…¥é—¨çŸ¥è¯†ã€‚</p>
<ul>
<li>ä¸‹è½½å’Œå®‰è£… Swift</li>
<li>ä½¿ç”¨ REPL </li>
<li>ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ</li>
<li>ä½¿ç”¨ LLDB è°ƒè¯•å™¨</li>
</ul>
<p>ç”±äºæœ¬æ–‡é‡ç‚¹ä¸åœ¨è¿™é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç®€å•ä»‹ç»ä¸‹å¦‚ä½•ä¸‹è½½å’Œå®‰è£… Swift ä»¥åŠå¦‚ä½•ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿï¼Œ å…³äº ä½¿ç”¨ REPL å’Œ LLDB è°ƒè¯•å™¨çš„å†…å®¹å…·ä½“å¯ä»¥å‚é˜…å®˜æ–¹æ–‡æ¡£ <a href="https://swift.org/getting-started/#using-the-repl" target="_blank" rel="external">ä½¿ç”¨ REPL</a> å’Œ <a href="https://swift.org/getting-started/#using-the-lldb-debugger" target="_blank" rel="external">ä½¿ç”¨ LLDB è°ƒè¯•å™¨</a></p>
<h3 id="ä¸‹è½½å’Œå®‰è£…-Swift"><a href="#ä¸‹è½½å’Œå®‰è£…-Swift" class="headerlink" title="ä¸‹è½½å’Œå®‰è£… Swift"></a><span id="ä¸‹è½½å’Œå®‰è£… Swift">ä¸‹è½½å’Œå®‰è£… Swift</span></h3><p>åˆšå¼€å§‹ä½¿ç”¨ Swift éœ€è¦ä¸‹è½½å¹¶å®‰è£…ç¼–è¯‘å™¨å’Œå…¶ä»–å¿…å¤‡ç»„ä»¶ã€‚è¿›å…¥åˆ° <a href="https://swift.org/download/#releases" target="_blank" rel="external">https://swift.org/download/#releases</a> æŒ‰ç›®æ ‡å¹³å°çš„è¯´æ˜è¿›è¡Œã€‚</p>
<blockquote>
<p>ä¸‹è½½çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸‹ï¼Œç”±äº SPM è¿˜ä¸æ˜¯ç‰¹åˆ«çš„æˆç†Ÿï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­å°†ä¸ä½¿ç”¨ Releases çš„ Swiftï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½å¼€å‘ç‰ˆçš„ Snapshotsã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¥æœŸä¸º April 12, 2016 çš„ Snapshotsï¼Œå¦å¤–åƒä¸‡ä¸è¦ç‚¹å‡»ä¸‹è½½ Debugging Symbols æˆ–è€… Signature çš„å®‰è£…åŒ…ï¼Œå› ä¸ºé‚£æ ·ä¼šç¼ºå¤±ä¸€äº›å†…ç½®çš„ä¾èµ–åº“ï¼ï¼</p>
</blockquote>
<p><img src="//img.aotu.io/FvuhoI_27Eif1mIrbdEylkSexuXO" alt="image"></p>
<p>ä¸‹è½½å®Œæˆåç‚¹å‡»æŒ‰æ­¥éª¤å®‰è£…å°±å¯ä»¥äº†ï¼</p>
<h4 id="OS-X"><a href="#OS-X" class="headerlink" title="OS X"></a>OS X</h4><p>åœ¨ OS X ä¸Šä¸‹è½½å·¥å…·é“¾é»˜è®¤çš„åœ°å€æ˜¯ <code>/Library/Developer/Toolchains</code>ã€‚æ¥ç€æˆ‘ä»¬è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯¼å‡ºç¼–è¯‘è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">export</span> PATH=/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin:<span class="string">"<span class="variable">$&#123;PATH&#125;</span>"</span></div></pre></td></tr></table></figure>
<h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>é¦–å…ˆéœ€è¦å®‰è£… clang :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install clang</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ åœ¨ Linux ä¸Šå®‰è£…çš„ Swift å·¥å…·é“¾åœ¨ç³»ç»Ÿæ ¹ç›®å½•ä»¥å¤–çš„ç›®å½•ï¼Œä½ éœ€è¦ä½¿ç”¨ä½ å®‰è£… Swift çš„å®é™…è·¯å¾„æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">export</span> PATH=/path/to/Swift/usr/bin:<span class="string">"<span class="variable">$&#123;PATH&#125;</span>"</span></div></pre></td></tr></table></figure>
<p>å¯¼å‡ºè·¯å¾„ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡è¾“å…¥ <code>swift</code> å‘½ä»¤å¹¶ä¼ å…¥ <code>--version</code> æ ‡å¿—æ¥æ ¡éªŒä½ æ˜¯å¦è¿è¡Œäº† Swift çš„é¢„æœŸç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ swift --version</div><div class="line">Apple Swift version 3.0-dev (LLVM ..., Clang ..., Swift ...)</div></pre></td></tr></table></figure>
<p>åœ¨ç‰ˆæœ¬å·çš„åç¼€<code>-dev</code>ç”¨æ¥è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªå¼€å‘çš„ç¼–è¯‘ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‘å¸ƒçš„ç‰ˆæœ¬ã€‚</p>
<h3 id="ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ"><a href="#ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ" class="headerlink" title="ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ"></a>ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ</h3><p>Swift ç¼–è¯‘ç³»ç»Ÿä¸ºç¼–è¯‘åº“ã€å¯æ‰§è¡Œæ–‡ä»¶å’Œåœ¨ä¸åŒå·¥ç¨‹ä¹‹é—´å…±äº«ä»£ç æä¾›äº†åŸºæœ¬çš„çº¦å®šã€‚</p>
<h4 id="åˆ›å»ºåŒ…"><a href="#åˆ›å»ºåŒ…" class="headerlink" title="åˆ›å»ºåŒ…"></a>åˆ›å»ºåŒ…</h4><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Swift åŒ…ï¼Œé¦–å…ˆåˆ›å»ºå¹¶è¿›å…¥åˆ°ä¸€ä¸ªæ–°çš„ç›®å½•å‘½åä¸º <code>Hello</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir Hello</div><div class="line">$ <span class="built_in">cd</span> Hello</div></pre></td></tr></table></figure>
<p>æ¯ä¸ªåŒ…åœ¨å…¶æ ¹ç›®å½•ä¸‹éƒ½å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªå‘½åä¸º <code>Package.swift</code> æ¸…å•æ–‡ä»¶ã€‚å¦‚æœæ¸…å•æ–‡ä»¶ä¸ºç©ºï¼Œé‚£åŒ…ç®¡ç†å™¨å°†ä¼šä½¿ç”¨å¸¸è§„é»˜è®¤çš„æ–¹å¼æ¥ç¼–è¯‘åŒ…ã€‚åˆ›å»ºä¸€ä¸ªç©ºçš„æ¸…ç©ºæ–‡ä»¶ä½¿ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ touch Package.swift</div></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨é»˜è®¤æ–¹å¼æ—¶ï¼ŒåŒ…ç®¡ç†å™¨é¢„è®¡å°†åŒ…å«åœ¨ <code>Sources/</code> å­ç›®å½•ä¸‹çš„æ‰€æœ‰æºä»£ç ã€‚åˆ›å»ºæ–¹å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir Sources</div></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶"><a href="#ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶"></a>ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶</h4><p>é»˜è®¤æ–¹å¼ä¸‹ï¼Œç›®å½•ä¸­åŒ…å«ä¸€ä¸ªæ–‡ä»¶ç§°ä¸º <code>main.swift</code> å°†ä¼šå°†æ–‡ä»¶ç¼–è¯‘æˆä¸åŒ…åç§°ç›¸åŒçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ…å°†ç”Ÿæˆä¸€ä¸ªå¯ä»¥è¾“å‡º <code>Hello, world!</code> çš„å¯æ‰§è¡Œæ–‡ä»¶å‘½åä¸º <code>Hello</code>ã€‚</p>
<p>åœ¨ <code>Sources/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå‘½åä¸º <code>main.swift</code> çš„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä½ å–œæ¬¢çš„ä»»æ„ä¸€ç§ç¼–è¾‘å™¨è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"Hello, world!"</span>)</div></pre></td></tr></table></figure>
<p>è¿”å›åˆ° <code>Hello</code> ç›®å½•ä¸­ï¼Œé€šè¿‡è¿è¡Œ <code>swift build</code> å‘½ä»¤æ¥ç¼–è¯‘åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ swift build</div></pre></td></tr></table></figure>
<p>å½“å‘½ä»¤å®Œæˆä¹‹åï¼Œç¼–è¯‘äº§å“å°†ä¼šå‡ºç°åœ¨ <code>.build</code> ç›®å½•ä¸­ã€‚é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿è¡Œ <code>Hello</code> ç¨‹åº:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ .build/debug/Hello</div><div class="line">Hello, world!</div></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ­¥ï¼Œè®©æˆ‘ä»¬åœ¨æ–°çš„èµ„æºæ–‡ä»¶é‡Œå®šä¹‰ä¸€ä¸ªæ–°çš„æ–¹æ³• <code>sayHello(_:)</code> ç„¶åç›´æ¥ç”¨ <code>print(_:)</code> æ›¿æ¢æ‰§è¡Œè°ƒç”¨çš„å†…å®¹ã€‚ </p>
<h4 id="å¤šä¸ªæºæ–‡ä»¶åä½œ"><a href="#å¤šä¸ªæºæ–‡ä»¶åä½œ" class="headerlink" title="å¤šä¸ªæºæ–‡ä»¶åä½œ"></a>å¤šä¸ªæºæ–‡ä»¶åä½œ</h4><p>åœ¨ <code>Sources/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å‘½åä¸º <code>Greeter.swift</code> ç„¶åè¾“å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(name: String)</span></span> &#123;</div><div class="line">	<span class="built_in">print</span>(<span class="string">"Hello, <span class="subst">\(name)</span>!"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>sayHello(_:)</code> æ–¹æ³•å¸¦ä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶ååœ¨å‰é¢æ‰“å°ä¸€ä¸ª â€œHelloâ€ï¼Œåé¢è·Ÿç€å‡½æ•°å‚æ•°å•è¯ â€œWorldâ€ã€‚</p>
<p>ç°åœ¨æ‰“å¼€ <code>main.swift</code>ï¼Œ ç„¶åæ›¿æ¢åŸæ¥çš„å†…å®¹ä¸ºä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="type">Process</span>.arguments.<span class="built_in">count</span> != <span class="number">2</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Usage: hello NAME"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">let</span> name = <span class="type">Process</span>.arguments[<span class="number">1</span>]</div><div class="line">    sayHello(name)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è·Ÿä¹‹å‰çš„ç¡¬ç¼–ç ä¸åŒï¼Œ<code>main.swift</code> ç°åœ¨ä»å‘½ä»¤è¡Œå‚æ•°ä¸­è¯»å–ã€‚æ›¿ä»£ä¹‹å‰ç›´æ¥è°ƒç”¨ <code>print(_:)</code>ï¼Œ <code>main.swift</code> ç°åœ¨è°ƒç”¨ <code>sayHello(_:)</code> æ–¹æ³•ã€‚å› ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯ <code>Hello</code> æ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨åˆ° <code>import</code> è¯­å¥ã€‚</p>
<p>è¿è¡Œ <code>swift build</code> å¹¶å°è¯• <code>Hello</code> çš„æ–°ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ swift build</div><div class="line">$ .build/debug/Hello <span class="string">'whoami'</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»èƒ½å¤Ÿè¿ç”¨å¼€æº Swift æ¥è¿è¡Œä¸€äº›ä½ æƒ³è¦çš„ç¨‹åºäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥è¿›å…¥æ­£é¢˜å¼€å§‹å…¥æ‰‹ SPM ã€‚</p>
</blockquote>
<h2 id="å¿«é€Ÿå…¥é—¨å®ä¾‹"><a href="#å¿«é€Ÿå…¥é—¨å®ä¾‹" class="headerlink" title="å¿«é€Ÿå…¥é—¨å®ä¾‹"></a>å¿«é€Ÿå…¥é—¨å®ä¾‹</h2><p>åœ¨ <a href="#å¼€æº Swift å…¥é—¨">å¼€æº Swift å…¥é—¨</a> ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç®€å•åœ°å­¦ä¼šäº†ç¼–è¯‘ä¸€ä¸ª â€œHello world!â€ ç¨‹åºã€‚</p>
<p>ä¸ºäº†äº†è§£ SPM ç©¶ç«Ÿèƒ½å¤Ÿåšä»€ä¹ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªç”±4ä¸ªç‹¬ç«‹çš„åŒ…ç»„æˆçš„ä¾‹å­ï¼š</p>
<ul>
<li><a href="https://github.com/marklin2012/O2PlayingCard.git" target="_blank" rel="external">O2PlayingCard</a> - å®šä¹‰äº† <code>O2PlayingCard</code>ï¼Œ <code>O2Suit</code>ï¼Œ <code>O2Rank</code>ï¼Œ 3ä¸ªç±»å‹ã€‚</li>
<li><a href="https://github.com/marklin2012/O2FisherYates.git" target="_blank" rel="external">O2FisherYates</a> - å®šä¹‰äº† <code>shuffle()</code> å’Œ <code>shuffleInPlace()</code> æ–¹æ³•å®ç°çš„æ‰©å±•ã€‚</li>
<li><a href="https://github.com/marklin2012/O2DeckOfPlayingCards.git" target="_blank" rel="external">O2DeckOfPlayingCards</a> - å®šä¹‰äº†ä¸€ä¸ª <code>O2Deck</code> ç±»å‹å¯¹ <code>O2PlayingCard</code> å€¼å¾—æ•°æ®è¿›è¡Œæ´—ç‰Œå’ŒæŠ½ç‰Œã€‚</li>
<li><a href="https://github.com/marklin2012/O2Dealer.git" target="_blank" rel="external">O2Dealer</a>  - å®šä¹‰äº†ä¸€ä¸ªç”¨æ¥åˆ›å»º <code>O2DeckOfPlayingCards</code> è¿›è¡Œæ´—ç‰Œå’ŒæŠ½å‡ºå‰10ä¸ªå¡ç‰‡çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ul>
<blockquote>
<p>ä½ å¯ä»¥ä» <a href="https://github.com/marklin2012/O2Dealer.git" target="_blank" rel="external">O2Dealer from GitHub</a> ç¼–è¯‘å¹¶è¿è¡Œå®Œæ•´ä¾‹å­ï¼Œç„¶åè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> O2Dealer</div><div class="line">$ swift build</div><div class="line">$ .build/debug/O2Dealer</div></pre></td></tr></table></figure>
</blockquote>
<h3 id="åˆ›å»ºä¸€ä¸ªåº“åŒ…"><a href="#åˆ›å»ºä¸€ä¸ªåº“åŒ…" class="headerlink" title="åˆ›å»ºä¸€ä¸ªåº“åŒ…"></a>åˆ›å»ºä¸€ä¸ªåº“åŒ…</h3><p>æˆ‘ä»¬å°†ä»åˆ›å»ºä¸€ä¸ªä»£è¡¨ä¸€å‰¯æ ‡å‡†çš„52å¼ æ‰‘å…‹ç‰Œçš„æ¨¡å—å¼€å§‹ã€‚<code>O2PlayingCard</code> æ¨¡å—å®šä¹‰äº† ç”± <code>O2Suit</code> æšä¸¾å€¼ï¼ˆClubs, Diamonds, Hearts, spadesï¼‰å’Œ <code>O2Rank</code> æšä¸¾å€¼ï¼ˆAce, Two, Three, â€¦, Jack, Queen, Kingï¼‰ç»„æˆçš„ <code>O2PlayingCard</code> ç±»ã€‚å„ä¸ªç±»çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">O2Rank</span> : <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Ace</span> = <span class="number">1</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Two</span>, <span class="type">Three</span>, <span class="type">Four</span>, <span class="type">Five</span>, <span class="type">Six</span>, <span class="type">Seven</span>, <span class="type">Eight</span>, <span class="type">Nine</span>, <span class="type">Ten</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Jack</span>, <span class="type">Queen</span>, <span class="type">King</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">O2Suit</span>: <span class="title">String</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Spades</span>, <span class="type">Hearts</span>, <span class="type">Diamonds</span>, <span class="type">Clubs</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">O2PlayingCard</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> rank: <span class="type">O2Rank</span></div><div class="line">    <span class="keyword">let</span> suit: <span class="type">O2Suit</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œ ä¸€ä¸ªåŒ…åŒ…æ‹¬ä»»ä½•ä½äº <code>Sources/</code> çš„æºæ–‡ä»¶ã€‚ </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">O2PlayingCard</div><div class="line">â”œâ”€â”€ Sources</div><div class="line">â”‚   â”œâ”€â”€ O2PlayingCard<span class="selector-class">.swift</span></div><div class="line">â”‚   â”œâ”€â”€ O2Rank<span class="selector-class">.swift</span></div><div class="line">â”‚   â””â”€â”€ O2Suit<span class="selector-class">.swift</span></div><div class="line">â””â”€â”€ Package.swift</div></pre></td></tr></table></figure>
<p>ç”±äº <code>O2PlayingCard</code> æ¨¡å—å¹¶ä¸ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™é‡Œåº”è¯¥ç§°ä¸º<strong>åº“</strong>ã€‚ åº“è¡¨ç¤ºè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯ä»¥è¢«å…¶ä»–åŒ…å¯¼å…¥çš„æ¨¡å—çš„åŒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº“æ¨¡å—å…¬å¼€æ‰€æœ‰ä½äº <code>Sources/</code> ç›®å½•ä¸‹æºä»£ç ä¸­å£°æ˜çš„å…¬å…±ç±»å‹å’Œæ–¹æ³•ã€‚</p>
<p>è¿è¡Œ <code>swift build</code> å¼€å§‹å¯åŠ¨ Swift ç¼–è¯‘çš„è¿‡ç¨‹ã€‚å¦‚æœä¸€åˆ‡è¿›è¡Œé¡ºåˆ©ï¼Œå°†ä¼šåœ¨ <code>.build/debug</code> ç›®å½•ä¸‹ç”Ÿæˆ <code>O2PlayingCard.build</code> ç›®å½•ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ <code>Package.swift</code> æ–‡ä»¶ä¸­å®šä¹‰åŒ…åï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PackageDescription</div><div class="line"></div><div class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</div><div class="line">  name: <span class="string">"O2PlayingCard"</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åªè¦å°† <code>O2PlayingCard</code> æäº¤åˆ° Github ä¸Šï¼Œå¹¶ä¸”ç»™ä»–å‘å¸ƒä¸€ä¸ª Release ç‰ˆæœ¬å³å¯å®Œæˆè¯¥åº“åŒ…ã€‚è¿™é‡Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª <code>.gitignore</code> æ–‡ä»¶ï¼Œå¿½ç•¥æ‰ <code>/.build</code> ï¼Œå› ä¸ºæˆ‘ä»¬çš„åŒ…æ˜¯ä¸éœ€è¦åŒ…æ‹¬ç”Ÿæˆçš„ç¼–è¯‘ç»“æœçš„å†…å®¹çš„ã€‚</p>
<blockquote>
<p>å®Œæ•´ <code>O2PlayingCard</code> ä»£ç å¯ä»¥åœ¨ <a href="https://github.com/marklin2012/O2PlayingCard.git" target="_blank" rel="external">https://github.com/marklin2012/O2PlayingCard.git</a> æŸ¥çœ‹ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨ç¼–è¯‘é…ç½®è¯­å¥"><a href="#ä½¿ç”¨ç¼–è¯‘é…ç½®è¯­å¥" class="headerlink" title="ä½¿ç”¨ç¼–è¯‘é…ç½®è¯­å¥"></a>ä½¿ç”¨ç¼–è¯‘é…ç½®è¯­å¥</h3><p>ä¸‹ä¸€ä¸ªå³å°†ç¼–è¯‘çš„æ¨¡å—æ˜¯ <code>O2FisherYates</code>ã€‚è·Ÿä¹‹å‰ <code>O2PlayingCard</code> æœ‰æ‰€ä¸åŒï¼Œè¯¥æ¨¡å—æ²¡æœ‰å®šä¹‰æ–°çš„ç±»ã€‚å–è€Œä»£ä¹‹çš„æ˜¯è¯¥æ¨¡å—æ‹“å±•äº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç‰¹æ®Šçš„ <code>CollectionType</code> å’Œ <code>MutableCollectionType</code> æ¥å£åè®®ï¼Œ ç”¨æ¥æ·»åŠ  <code>shuffle()</code> æ–¹æ³•å’Œå¯¹åº”çš„ <code>shuffleInPlace()</code> æ–¹æ³•ã€‚</p>
<p><code>shuffleInPlace()</code> æ–¹æ³•çš„å®ç°ä½¿ç”¨äº† <a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" target="_blank" rel="external">Fisher-Yates</a> ç»å…¸æ´—ç‰Œç®—æ³•æ¥éšæœºäº¤æ¢é›†åˆä¸­çš„å…ƒç´ ã€‚ç”±äº Swift æ ‡å‡†åº“æ²¡æœ‰æä¾›ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆæ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦è°ƒç”¨ä¸€ä¸ªä»ç³»ç»Ÿæ¨¡å—å¯¼å…¥çš„å‡½æ•°ã€‚ä¸ºäº†ä½¿è¿™ä¸ªæ–¹æ³•èƒ½å¤ŸåŒæ—¶é€‚é… OSX å’Œ Linuxï¼Œ ä»£ç å°†è¦ç”¨åˆ°ç¼–è¯‘é…ç½®è¯­å¥ã€‚</p>
<p>åœ¨ OS X ä¸­ï¼Œç³»ç»Ÿæ¨¡å—æ˜¯ <code>Darwin</code>, æä¾›çš„å‡½æ•°æ˜¯ <code>arc4random_uniform(_:)</code>ã€‚åœ¨ Linux ä¸­ï¼Œ ç³»ç»Ÿæ¨¡å—æ˜¯ <code>Glibc</code>ï¼Œ æä¾›çš„å‡½æ•°æ˜¯ <code>random()</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">#<span class="keyword">if</span> os(<span class="type">Linux</span>)</div><div class="line">  <span class="keyword">import</span> Glibc</div><div class="line">#<span class="keyword">else</span></div><div class="line">  <span class="keyword">import</span> Darwin.C</div><div class="line">#endif</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">Collection</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">shuffle</span><span class="params">()</span></span> -&gt; [<span class="type">Generator</span>.<span class="type">Element</span>] &#123;</div><div class="line">    <span class="keyword">var</span> array = <span class="type">Array</span>(<span class="keyword">self</span>)</div><div class="line">    array.shuffleInPlace()</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> array</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">MutableCollection</span> <span class="title">where</span> <span class="title">Index</span> == <span class="title">Int</span> </span>&#123;</div><div class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">shuffleInPlace</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="built_in">count</span> &gt; <span class="number">1</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">    v </div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> - <span class="number">1</span> &#123;</div><div class="line">      #<span class="keyword">if</span> os(<span class="type">Linux</span>)</div><div class="line">        <span class="keyword">let</span> j = <span class="type">Int</span>(random() % (<span class="built_in">count</span> - i)) + i</div><div class="line">      #<span class="keyword">else</span></div><div class="line">        <span class="keyword">let</span> j = <span class="type">Int</span>(arc4random_uniform(<span class="type">UInt32</span>(<span class="built_in">count</span> - i))) + i</div><div class="line">      #endif</div><div class="line">      <span class="keyword">guard</span> i != j <span class="keyword">else</span> &#123; <span class="keyword">continue</span> &#125;</div><div class="line">      <span class="built_in">swap</span>(&amp;<span class="keyword">self</span>[i], &amp;<span class="keyword">self</span>[j])</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‰©ä¸‹çš„æ­¥éª¤å’Œå‰é¢çš„ç±»ä¼¼ï¼Œç¼–è¯‘é€šè¿‡åä¸Šä¼ åˆ° Github ï¼Œ å‘å¸ƒ Release ç‰ˆæœ¬ã€‚</p>
<blockquote>
<p>å®Œæ•´çš„ <code>O2FisherYates</code> ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æ‰¾åˆ° <a href="https://github.com/marklin2012/O2FisherYates.git" target="_blank" rel="external">https://github.com/marklin2012/O2FisherYates.git</a>ã€‚</p>
</blockquote>
<h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><p><code>O2DeckOfPlayingCards</code>åŒ…æŠŠå‰ä¸¤ä¸ªåŒ…èšåˆåˆ°ä¸€èµ·ï¼šå®ƒå®šä¹‰äº†ä¸€ä¸ªåœ¨ <code>O2PlayingCard</code> æ•°ç»„ä¸­ä½¿ç”¨ <code>O2FisherYates</code> çš„ <code>shuffle()</code> æ–¹æ³•çš„ <code>Deck</code> ç±»å‹ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨ <code>O2FisherYates</code> å’Œ <code>O2PlayingCards</code> æ¨¡å—ï¼Œ <code>O2DeckOfPlayingCards</code> åŒ…å¿…é¡»åœ¨ <code>Package.Swift</code> æ¸…å•ä¸­å°†ä¸Šè¿°æ¨¡å—å£°æ˜ä¸ºä¾èµ–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PackageDescription</div><div class="line"></div><div class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</div><div class="line">    name: <span class="string">"O2DeckOfPlayingCards"</span>,</div><div class="line">    dependencies: [</div><div class="line">        .<span class="type">Package</span>(url: <span class="string">"https://github.com/marklin2012/O2PlayingCard.git"</span>,</div><div class="line">                 majorVersion: <span class="number">1</span>),</div><div class="line">        .<span class="type">Package</span>(url: <span class="string">"https://github.com/marklin2012/O2FisherYates.git"</span>,</div><div class="line">                 majorVersion: <span class="number">1</span>),</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>æ¯ä¸ªä¾èµ–éƒ½éœ€è¦åˆ¶å®šä¸€ä¸ªæº URL å’Œç‰ˆæœ¬å·ã€‚æº URL æ˜¯æŒ‡å…è®¸å½“å‰ç”¨æˆ·è§£æåˆ°å¯¹åº”çš„ Git ä»“åº“ã€‚ç‰ˆæœ¬å·éµå¾ª <a href="http://semver.org/lang/zh-CN/" target="_blank" rel="external">è¯­ä¹‰åŒ–ç‰ˆæœ¬å· 2.0.0</a>  çš„çº¦å®šï¼Œç”¨æ¥å†³å®šæ£€å‡ºæˆ–è€…ä½¿ç”¨å“ªä¸ª Git æ ‡ç­¾ç‰ˆæœ¬æ¥å»ºç«‹ä¾èµ–ã€‚å¯¹äº <code>FisherYates</code> å’Œ <code>PlayingCard</code> è¿™ä¸¤ä¸ªä¾èµ–æ¥è¯´ï¼Œ æœ€æ–°çš„å°†è¦è¢«ä½¿ç”¨çš„ä¸»ç‰ˆæœ¬å·ä¸º <code>1</code> ï¼ˆä¾‹å¦‚ï¼š 1.0.0ï¼‰ã€‚</p>
<p>å½“ä½ è¿è¡Œ <code>swift build</code> å‘½ä»¤æ—¶ï¼ŒåŒ…ç®¡ç†å™¨å°†ä¼šä¸‹è½½æ‰€æœ‰çš„ä¾èµ–ï¼Œ å¹¶å°†ä»–ä»¬ç¼–è¯‘æˆé™æ€åº“ï¼Œå†æŠŠå®ƒä»¬é“¾æ¥åˆ°åŒ…æ¨¡å—ä¸­ã€‚è¿™æ ·å°†ä¼šä½¿ <code>O2DeckOfPlayingCards</code> å¯ä»¥è®¿é—®ä¾èµ– <code>import</code> è¯­å¥çš„æ¨¡å—çš„å…¬å…±æˆå‘˜ã€‚</p>
<p>ä½ å¯ä»¥çœ‹åˆ°è¿™äº›èµ„æºè¢«ä¸‹è½½åˆ°ä½ å·¥ç¨‹æ ¹ç›®å½•çš„ <code>Packages</code> ç›®å½•ä¸‹ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆç¼–è¯‘äº§å“åœ¨ä½ å·¥ç¨‹æ ¹ç›®å½•çš„ <code>.build</code> ç›®å½•ä¸‹ã€‚</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> O2DeckOfPlayingcards</div><div class="line">â”œâ”€â”€ <span class="selector-class">.build</span></div><div class="line">â”‚   â””â”€â”€ debug</div><div class="line">â”‚       â”œâ”€â”€ O2DeckOfPlayingCards<span class="selector-class">.build</span></div><div class="line">â”‚       â”œâ”€â”€ O2DeckOfPlayingCards<span class="selector-class">.swiftdoc</span></div><div class="line">â”‚       â”œâ”€â”€ O2DeckOfPlayingCards<span class="selector-class">.swiftmodule</span></div><div class="line">â”‚       â”œâ”€â”€ O2FisherYates<span class="selector-class">.build</span></div><div class="line">â”‚       â”œâ”€â”€ O2FisherYates<span class="selector-class">.swiftdoc</span></div><div class="line">â”‚       â”œâ”€â”€ O2FisherYates<span class="selector-class">.swiftmodule</span></div><div class="line">â”‚       â”œâ”€â”€ O2PlayingCard<span class="selector-class">.build</span></div><div class="line">â”‚       â”œâ”€â”€ O2PlayingCard<span class="selector-class">.swiftdoc</span></div><div class="line">â”‚       â””â”€â”€ O2PlayingCard<span class="selector-class">.swiftmodule</span></div><div class="line">â””â”€â”€ Packages</div><div class="line">    â””â”€â”€ O2FisherYates-<span class="number">1.0</span>.<span class="number">0</span></div><div class="line">    â”‚   â”œâ”€â”€ Package<span class="selector-class">.swift</span></div><div class="line">    â”‚   â”œâ”€â”€ README<span class="selector-class">.md</span></div><div class="line">    â”‚   â””â”€â”€ Sources</div><div class="line">    â””â”€â”€ O2Playingcard-<span class="number">1.0</span>.<span class="number">1</span></div><div class="line">        â”œâ”€â”€ Package<span class="selector-class">.swift</span></div><div class="line">        â”œâ”€â”€ README<span class="selector-class">.md</span></div><div class="line">        â””â”€â”€ Sources</div></pre></td></tr></table></figure>
</blockquote>
<p><code>Packages</code> ç›®å½•åŒ…å«äº†è¢«å¤åˆ¶çš„åŒ…ä¾èµ–çš„æ‰€æœ‰ä»“åº“ã€‚è¿™æ ·å°†ä½¿ä½ èƒ½ä¿®æ”¹æºä»£ç å¹¶ç›´æ¥æ¨é€è¿™äº›ä¿®æ”¹åˆ°ä»–ä»¬çš„æºï¼Œè€Œä¸éœ€è¦å†å¯¹æ¯ä¸ªåŒ…åœ¨å•ç‹¬è¿›è¡Œå¤åˆ¶ã€‚å‰©ä¸‹çš„æ­¥éª¤å‚è€ƒå‰é¢å†…å®¹ã€‚</p>
<blockquote>
<p>å®Œæ•´çš„ <code>O2DeckOfPlayingCards</code> åŒ…å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æŸ¥çœ‹ï¼š <a href="https://github.com/marklin2012/O2DeckOfPlayingCards.git" target="_blank" rel="external">https://github.com/marklin2012/O2DeckOfPlayingCards.git</a>ã€‚</p>
</blockquote>
<h3 id="è§£å†³å­ä¾èµ–"><a href="#è§£å†³å­ä¾èµ–" class="headerlink" title="è§£å†³å­ä¾èµ–"></a>è§£å†³å­ä¾èµ–</h3><p>åˆ°è¿™ä¸€æ­¥ï¼Œä½ å·²ç»å¯ä»¥å»ºç«‹ <code>O2Dealer</code> æ¨¡å—äº†ã€‚ <code>O2Dealer</code> æ¨¡å—ä¾èµ–äº <code>O2DeckOfPlayingCards</code> åŒ…ï¼Œè€Œè¯¥æ¨¡å—åˆä¾èµ–äº <code>O2PlayingCard</code> å’Œ <code>O2FisherYates</code> åŒ…ã€‚ç„¶è€Œï¼Œç”±äº SPM ä¼šè‡ªåŠ¨è§£å†³å­ä¾èµ–ï¼Œæ‰€ä»¥ä½ éœ€è¦å£°æ˜ <code>O2DeckOfPlayingCards</code> åŒ…ä½œä¸ºä¾èµ–å³å¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PackageDescription</div><div class="line"></div><div class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</div><div class="line">    name: <span class="string">"O2Dealer"</span>,</div><div class="line">    dependencies: [</div><div class="line">        .<span class="type">Package</span>(url: <span class="string">"https://github.com/marklin2012/O2DeckOfPlayingCards.git"</span>,</div><div class="line">                 majorVersion: <span class="number">1</span>),</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>å¯¹äºåœ¨ä»£ç ä¸­å¼•ç”¨ä»»æ„ç±»å‹ï¼Œ Swift éœ€è¦åœ¨æºæ–‡ä»¶ä¸­å¯¼å…¥æ¨¡å—ã€‚åœ¨ <code>O2Dealer</code> æ¨¡å—çš„ <code>main.swift</code> æ–‡ä»¶ä¸­ï¼Œ <code>O2DeckOfPlayingCards</code> ä¸­çš„ <code>O2Deck</code> ç±»å‹å’Œ <code>O2PlayingCard</code> çš„ <code>O2PlayingCard</code> ç±»å‹æ˜¯å¼•ç”¨ã€‚è™½ç„¶ <code>O2Deck</code> ç±»å‹ä¸­çš„ <code>shuffle()</code> æ–¹æ³•ä½¿ç”¨åœ¨ <code>O2FisherYates</code> æ¨¡å—å†…ï¼Œä½†æ˜¯ <code>O2FisherYates</code> æ¨¡å—å¹¶ä¸éœ€è¦åœ¨ <code>main.swift</code> ä¸­è¢«å¯¼å…¥ã€‚</p>
<p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> O2DeckOfPlayingCards</div><div class="line"></div><div class="line"><span class="keyword">let</span> numberOfCards = <span class="number">10</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> deck = <span class="type">O2Deck</span>.standard52CardDeck()</div><div class="line">deck.shuffle()</div><div class="line"></div><div class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;numberOfCards &#123;</div><div class="line">  <span class="keyword">guard</span> <span class="keyword">let</span> card = deck.deal() <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"No More Cards!"</span>)</div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="built_in">print</span>(card)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªåŒ…åœ¨æ ¹ç›®å½•ä¸­åŒ…å«ä¸€ä¸ªå‘½åä¸º <code>main.swift</code> çš„æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>è¿è¡Œ <code>swift build</code> å‘½ä»¤å¼€å§‹ç”¨ Swift ç¼–è¯‘æ¥ç”Ÿæˆå¯ä»¥è¢«è¿è¡Œåœ¨ <code>.build/debug</code> ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ <code>O2Dealer</code>ã€‚</p>
<blockquote>
<p>æ³¨ï¼šè¿™é‡Œæµ‹è¯•çš„æ—¶å€™ä¼šæŠ¥é”™æ²¡æœ‰å­æ¨¡å—ï¼Œéœ€è¦å†è¿è¡Œ <code>swift build</code> å°±å¯ä»¥é€šè¿‡äº†ã€‚åŸå› ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæ²¡æœ‰åŠ è¯ä¹¦ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆç¼–è¯‘ï¼Œåç»­å†æŸ¥æ‰¾åŸå› ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ swift build</div><div class="line">$ ./.build/debug/O2Dealer</div><div class="line">â™ ï¸6</div><div class="line">â™¢K</div><div class="line">â™¢2</div><div class="line">â™¡8</div><div class="line">â™ ï¸7</div><div class="line">â™£ï¸10</div><div class="line">â™£ï¸5</div><div class="line">â™¢A</div><div class="line">â™¡Q</div><div class="line">â™¡7</div></pre></td></tr></table></figure>
<blockquote>
<p>å®Œæ•´å…³äº <code>O2Dealer</code> ä»£ç å¯ä»¥åœ¨å¦‚ä¸‹åœ°å€æŸ¥é˜… <a href="https://github.com/marklin2012/O2Dealer.git" target="_blank" rel="external">https://github.com/marklin2012/O2Dealer.git</a>ã€‚</p>
</blockquote>
<p>æ›´å¤šå…³äº SPM ä¿¡æ¯æŸ¥çœ‹æ–‡æ¡£ï¼š <a href="https://github.com/apple/swift-package-manager" target="_blank" rel="external">Swift package Manager project on GitHub</a></p>
<h2 id="æ€»ç»“ä¸å±•æœ›"><a href="#æ€»ç»“ä¸å±•æœ›" class="headerlink" title="æ€»ç»“ä¸å±•æœ›"></a>æ€»ç»“ä¸å±•æœ›</h2><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæ•´åœ°å¯¹ SPM æœ‰äº†å¼€å‘çš„ç»éªŒäº†ï¼å¦‚æœä½ æœ‰è¿‡ NodeJS çš„å¼€å‘ç»å†ï¼Œä½ ä¹Ÿè®¸ä¼šæœ‰ä¼¼æ›¾ç›¸ä¼¼çš„æ„Ÿè§‰ï¼Œä½†æˆ‘ä»¬ç”¨çš„å¯æ˜¯ Swiftï¼</p>
<p>Swift æ˜¯ä¸€é—¨å…ˆè¿›çš„è¯­è¨€ï¼Œ SPM çš„ç¤¾åŒºä¹Ÿåœ¨ä¸æ–­åœ°å®Œå–„ä¸­ã€‚åœ¨ Swift å¼€æºä¹‹åï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¯ä»¥çœ‹åˆ°å®ƒçš„æ½œåŠ›ï¼Œçœ‹æ¥æŒæ¡è¿™é—¨è¯­è¨€å¿…å°†æ˜¯ä¸€ä¸ªå¤§è¶‹åŠ¿ã€‚è€Œå®è·µå®Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»å¿«äººä¸€æ­¥å•¦ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§éƒ¨åˆ†è¯­è¨€éƒ½æœ‰å®˜æ–¹çš„ä»£ç åˆ†é…è§£å†³æ–¹æ¡ˆï¼Œå¹¸å¥½è‹¹æœä¹Ÿåœ¨å¼€å‘èƒ½æ›¿ä»£ &lt;a href=&quot;https://cocoapods.org/&quot;&gt;Cocoapods&lt;/a&gt; å’Œ &lt;a href=&quot;https://github.com/Carthage/Carthage&quot;&gt;Carthage&lt;/a&gt; çš„ç®¡ç†å·¥å…·ã€‚&lt;strong&gt;Swift Package Manager&lt;/strong&gt;ï¼ˆSwift åŒ…ç®¡ç†å™¨ï¼Œä¸‹é¢æˆ‘ä»¬ç®€ç§° SPM ï¼‰å°±æ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç† Swift ä»£ç çš„åˆ†é…çš„å®˜æ–¹å·¥å…·ï¼Œå®ƒä¸º Swift ç¼–è¯‘ç³»ç»Ÿé›†æˆäº†è‡ªåŠ¨è¿›è¡Œä¸‹è½½ã€ç¼–è¯‘å’Œè¿æ¥ä¾èµ–çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ï¼ŒSPM è¿˜å¤„äºæ—©æœŸé˜¶æ®µï¼Œç°åœ¨ä»…æ”¯æŒ OS X å’Œ Linux ç³»ç»Ÿï¼Œå°šä¸æ”¯æŒ iOS, watchOS ä»¥åŠ tvOS å¹³å°ï¼Œä½†æœªæ¥å¾ˆå¤§å¸Œæœ›ä¼šæ”¯æŒä¸Šè¿°å¹³å°ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä½¿ç”¨è‹¹æœå®˜æ–¹çš„ä¾‹å­æ¥è®²è§£ SPM çš„ä½¿ç”¨ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åˆ°æœ‰æ„è¿›è¡Œå°è¯•çš„äººï¼ :)&lt;/p&gt;
    
    </summary>
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://aotu.io/cates/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://aotu.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://aotu.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ç”¨ArrayBufferæ„é€ ä¸€ä¸ªformè¯·æ±‚</title>
    <link href="https://aotu.io/notes/2016/04/21/form-request/"/>
    <id>https://aotu.io/notes/2016/04/21/form-request/</id>
    <published>2016-04-21T02:53:03.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»formæ•°æ®çš„æ ¼å¼ä»¥åŠå¦‚ä½•ç”¨ä»£ç æ‰‹åŠ¨æ„é€ ä¸€ä¸ªè¯·æ±‚ã€‚</p>
<a id="more"></a>
<h2 id="ä¸€ã€å¸¸ç”¨çš„form-enctypeç±»å‹ï¼š"><a href="#ä¸€ã€å¸¸ç”¨çš„form-enctypeç±»å‹ï¼š" class="headerlink" title="ä¸€ã€å¸¸ç”¨çš„form enctypeç±»å‹ï¼š"></a>ä¸€ã€å¸¸ç”¨çš„form enctypeç±»å‹ï¼š</h2><ol>
<li>application/x-www-form-urlencoded<br>formé»˜è®¤çš„ç¼–ç æ–¹å¼ï¼Œä¼šç¼–ç ç‰¹æ®Šæ–‡å­—ï¼Œä¹Ÿæ˜¯jqç­‰åº“ajaxæäº¤æ•°æ®é»˜è®¤çš„ç¼–ç æ ¼å¼</li>
<li>multi/formdata<br>è¿™ç§æ–¹å¼å¯ä»¥æäº¤æ–‡æœ¬+äºŒè¿›åˆ¶æ ¼å¼</li>
<li>text/plain<br>åªç¼–ç ç©ºæ ¼ç¬¦ï¼Œè¿™ç§æ–¹å¼ä¸å¤ªå¸¸ç”¨</li>
</ol>
<p>å…¶ä¸­æ¯”è¾ƒå¤æ‚çš„æ˜¯multi/formdataç±»å‹çš„ï¼Œå¯æ··åˆæäº¤æ–‡æœ¬æ•°æ®ä¸äºŒè¿›åˆ¶æ•°æ®(å›¾ç‰‡ã€zipç­‰)ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸€ä¸‹è¿™ç§ç¼–ç çš„è§„å¾‹ä»¥åŠåœ¨jsä»¥åŠnodejsçš„æ„é€ çš„æ–¹æ³•ã€‚</p>
<h2 id="äºŒã€åˆ†æä¸€ä¸ªmulti-formdataçš„ä¾‹å­"><a href="#äºŒã€åˆ†æä¸€ä¸ªmulti-formdataçš„ä¾‹å­" class="headerlink" title="äºŒã€åˆ†æä¸€ä¸ªmulti/formdataçš„ä¾‹å­"></a>äºŒã€åˆ†æä¸€ä¸ªmulti/formdataçš„ä¾‹å­</h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªformdataçš„æ ¼å¼ï¼ˆchromeä¸­ï¼‰ï¼š<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">------WebKitFormBoundary0yB3cIYoABZUBzEm</span></div><div class="line"><span class="type">Content</span>-<span class="type">Disposition</span>: form-<span class="class"><span class="keyword">data</span>; name="user"</span></div><div class="line"></div><div class="line"><span class="title">aotu</span>.io</div><div class="line"><span class="comment">------WebKitFormBoundary0yB3cIYoABZUBzEm</span></div><div class="line"><span class="type">Content</span>-<span class="type">Disposition</span>: form-<span class="class"><span class="keyword">data</span>; name="psw"</span></div><div class="line"></div><div class="line"><span class="number">123456</span></div><div class="line"><span class="comment">------WebKitFormBoundary0yB3cIYoABZUBzEm</span></div><div class="line"><span class="type">Content</span>-<span class="type">Disposition</span>: form-<span class="class"><span class="keyword">data</span>; name="onefile"; filename="onefile-1460812719250.png"</span></div><div class="line"><span class="type">Content</span>-<span class="type">Type</span>: image/png</div><div class="line"></div><div class="line">.... (png binary <span class="class"><span class="keyword">data</span>) ....</span></div><div class="line"><span class="comment">------WebKitFormBoundary0yB3cIYoABZUBzEm--</span></div></pre></td></tr></table></figure></p>
<p>åˆ†æä¸€ä¸‹è¿™ç§ç¼–ç æ ¼å¼çš„ç‰¹ç‚¹ï¼š</p>
<p>1ã€request headeré‡Œå£°æ˜Content-Typeï¼Œå¹¶ä¸”åœ¨å…¶ååŠ ä¸Šæ•°æ®åˆ†ç•Œç¬¦ï¼šboundaryï¼Œå³ï¼šContent-Type:multipart/form-data; boundary=â€”-WebKitFormBoundary0yB3cIYoABZUBzEmã€‚</p>
<p>boundaryçš„å­—ç¬¦åº”è¯¥æ˜¯éšæœºçš„ï¼Œé˜²æ­¢æäº¤çš„æ•°æ®é‡Œæœ‰ç›¸åŒå­—ç¬¦è€Œå½±å“æœåŠ¡å™¨çš„æ•°æ®è§£æã€‚</p>
<p>2ã€request bodyçš„éƒ¨åˆ†ï¼Œè§„å¾‹å¯çœ‹ä¸‹é¢çš„å›¾è§£ï¼š</p>
<p><img src="//img.aotu.io/FqTCYAQuN8OeV8yFvva4_TUvCgxs" alt="request bodyè¯´æ˜"></p>
<p>å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>bodyé‡Œçš„boundaryæ€»æ¯”Content-Typeå£°æ˜çš„boundaryå‰é¢å¤šä¸¤ä¸ªä¸­åˆ’çº¿ï¼›</li>
<li>è€Œbodyç»“æŸéƒ¨åˆ†çš„boundaryåˆ™åœ¨åé¢å†åŠ ä¸Šä¸¤ä¸ªä¸­åˆ’çº¿;</li>
<li>æ¯è¡Œåé¢éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ã€\r\nã€ï¼Œfield nameè¡Œä¸fieldå€¼è¡Œä¹‹é—´è¿˜æœ‰ä¸€è¡Œä»…æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦çš„ç©ºç™½è¡Œã€‚</li>
</ul>
<h2 id="ä¸‰ã€å¦‚ä½•æ„é€ "><a href="#ä¸‰ã€å¦‚ä½•æ„é€ " class="headerlink" title="ä¸‰ã€å¦‚ä½•æ„é€ "></a>ä¸‰ã€å¦‚ä½•æ„é€ </h2><p>ä»¥ä¸Šä»‹ç»å®Œäº†multi/formdataçš„ç¼–ç ç»“æ„ï¼Œä¸‹é¢è¯´è¯´åœ¨jsé‡Œé¢æ˜¯æ€ä¹ˆæ„é€ çš„è¿™æ ·çš„ä¸€ä¸ªè¯·æ±‚çš„ã€‚</p>
<p>æœ‰åŒå­¦é—®äº†ï¼Œä¸ºå•¥ä¸ç”¨new FormData()ç›´æ¥æ„é€ æ•°æ®å‘¢ï¼Ÿå—¯ã€‚ã€‚ã€‚</p>
<ul>
<li><p>1)ç¬¬ä¸€ç§æƒ…å†µæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯è¡¨å•å­—æ®µåªæœ‰æ–‡æœ¬ï¼ˆæ•°å­—ï¼‰çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„ç»“æ„ï¼Œè¿›è¡Œç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¹¶è®¾ç½®å¥½headerï¼Œæœ€åxhr.send(form_str)ï¼›</p>
</li>
<li><p>2)è¿™ç§æ˜¯æ··åˆäº†æ–‡æœ¬ä¸äºŒè¿›åˆ¶æ•°æ®çš„æƒ…å†µï¼Œå³ä¸Šå›¾è¡¨ç¤ºçš„æƒ…å†µï¼Œè¿™æ—¶å€™éœ€è¦ç»“åˆxhr2ã€ArrayBufferã€FileReaderç­‰apiã€‚</p>
</li>
</ul>
<p>è¯·çœ‹ä»¥ä¸‹ä»£ç ä»¥åŠæ³¨é‡Šï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"J_form"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"aotu.io"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"psw"</span> <span class="attr">value</span>=<span class="string">"123456"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"onefile"</span>&gt;</span>pngå›¾ç‰‡ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"onefile"</span> <span class="attr">id</span>=<span class="string">"onefile"</span> <span class="attr">class</span>=<span class="string">"J_file"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> <span class="attr">class</span>=<span class="string">"J_submit"</span> <span class="attr">title</span>=<span class="string">"è¯·é€‰æ‹©æ–‡ä»¶åå†æäº¤"</span> <span class="attr">style</span>=<span class="string">"font-size:14px;"</span> <span class="attr">disabled</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size:12px;color:#999;"</span>&gt;</span>(è¯·é€‰æ‹©æ–‡ä»¶åå†æäº¤)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿”å›ç»“æœï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"J_ret"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"J_img"</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> picBuffer = <span class="literal">null</span>; <span class="comment">// å›¾ç‰‡æ•°æ®</span></div><div class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.J_file'</span>).onchange = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> fileReader = <span class="keyword">new</span> FileReader();</div><div class="line">        <span class="keyword">var</span> file = evt.target.files[<span class="number">0</span>];</div><div class="line">        <span class="built_in">document</span>.querySelector(<span class="string">'.J_submit'</span>).removeAttribute(<span class="string">'disabled'</span>);</div><div class="line">        fileReader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">            picBuffer = e.target.result; <span class="comment">// æ–‡ä»¶çš„ArrayBufferæ•°æ®</span></div><div class="line">        &#125;</div><div class="line">        fileReader.readAsArrayBuffer(file);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.J_submit'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> boundary_key = <span class="string">'aotu_lab'</span>; <span class="comment">// æ•°æ®åˆ†å‰²ç¬¦ï¼Œä¸€èˆ¬æ˜¯éšæœºçš„å­—ç¬¦ä¸²</span></div><div class="line">        <span class="keyword">var</span> boundary = <span class="string">'--'</span> + boundary_key;</div><div class="line">        <span class="keyword">var</span> end_boundary = <span class="string">'\r\n'</span> + boundary + <span class="string">'--'</span>;</div><div class="line">        <span class="comment">// ä»¥ä¸‹æ˜¯æ‹¼æ¥æ–‡æœ¬åŸŸçš„çš„æ•°æ®ã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºä»¥ä¸‹æ•°æ®éƒ½æ˜¯å•å­—èŠ‚ã€å¹¶æ²¡æœ‰è€ƒè™‘å…¼å®¹ä¸­æ–‡</span></div><div class="line">        <span class="keyword">var</span> retsult = <span class="string">''</span>;</div><div class="line">          retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">          retsult += <span class="string">'Content-Disposition: form-data; name="user"'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">          retsult += <span class="built_in">document</span>.querySelector(<span class="string">'input[name=user]'</span>).value + <span class="string">'\r\n'</span>; </div><div class="line">          <span class="comment">// å¦å¤–ä¸€ä¸ªæ‹¼æ¥æ–‡æœ¬åŸŸçš„çš„æ•°æ®</span></div><div class="line">          retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">          retsult += <span class="string">'Content-Disposition: form-data; name="psw"'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">          retsult += <span class="built_in">document</span>.querySelector(<span class="string">'input[name=psw]'</span>).value + <span class="string">'\r\n'</span>;</div><div class="line">          <span class="comment">// æ‹¼æ¥äºŒè¿›åˆ¶æ•°æ®ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºåªç”¨äº†pngçš„æ•°æ®</span></div><div class="line">          retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">          retsult += <span class="string">'Content-Disposition: form-data; name="onefile"; filename="pic.png"'</span> + <span class="string">'\r\n'</span>;</div><div class="line">          retsult += <span class="string">'Content-Type: image/png'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">         </div><div class="line">        <span class="keyword">var</span> resultArray = [];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; retsult.length; i++) &#123; <span class="comment">// å–å‡ºæ–‡æœ¬çš„charCodeï¼ˆ10è¿›åˆ¶ï¼‰</span></div><div class="line">           resultArray.push(retsult.charCodeAt(i));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> pic_typedArray = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(picBuffer); <span class="comment">// æŠŠbufferè½¬ä¸ºtyped arrayæ•°æ®ã€å†è½¬ä¸ºæ™®é€šæ•°ç»„ä½¿ä¹‹å¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•</span></div><div class="line">        <span class="keyword">var</span> endBoundaryArray = [];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; end_boundary.length; i++) &#123; <span class="comment">// æœ€åå–å‡ºç»“æŸboundaryçš„charCode</span></div><div class="line">           endBoundaryArray.push(end_boundary.charCodeAt(i));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> postArray = resultArray.concat(<span class="built_in">Array</span>.prototype.slice.call(pic_typedArray), endBoundaryArray); <span class="comment">// åˆå¹¶æ–‡æœ¬ã€å›¾ç‰‡æ•°æ®å¾—åˆ°æœ€ç»ˆè¦å‘é€çš„æ•°æ®</span></div><div class="line">        <span class="keyword">var</span> post_typedArray = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(postArray); <span class="comment">// æŠŠæœ€ç»ˆç»“æœè½¬ä¸ºtyped arrayï¼Œä»¥ä¾¿æœ€åå–å¾—bufferæ•°æ®</span></div><div class="line">        </div><div class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</div><div class="line">                <span class="comment">//do something</span></div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        xhr.open(<span class="string">"POST"</span>, <span class="string">"/submit"</span>);</div><div class="line">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'multipart/form-data; boundary='</span>+boundary_key); <span class="comment">// è®°å¾—åœ¨å¤´éƒ¨å¸¦ä¸Šboundary</span></div><div class="line">        xhr.send(post_typedArray.buffer); <span class="comment">// å‘é€bufferæ•°æ®ï¼Œè¿™æ˜¯xhr2çš„ä¸€ä¸ªç‰¹æ€§</span></div><div class="line">    &#125;;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œç”±äºæš‚æ—¶æ²¡èƒ½åœ¨å®˜æ–¹æ–‡æ¡£æ‰¾åˆ°æ‹·è´æˆ–concatæ•´æ®µbufferçš„æ–¹æ³•ï¼Œæ‰€ä»¥åˆå¹¶å­—ç¬¦æ•°æ®ä¸å›¾ç‰‡æ•°æ®çš„æ–¹æ³•å¹¶ä¸ååˆ†é«˜æ•ˆï¼Œéœ€è¦è½¬ä¸ºæ™®é€šæ•°ç»„ï¼Œåˆå¹¶æ•°æ®åå†æ¬¡è½¬ä¸ºtyped arrayä»¥è·å¾—bufferæ•°æ®ã€‚ç»è¿‡ä¸€ç•ªè½¬æ¢åè®¡ç®—æ•ˆç‡åœ¨å¤§æ–‡ä»¶ä¸‹æˆ–è€…æ‰‹æœºç«¯è¿™ç§æ–¹æ³•çš„æ•ˆç‡è¿˜å¾…éªŒè¯ï¼Œå› ä¸ºå¤„ç†æ™®é€šæ•°ç»„ä¼šæ¯”ç›´æ¥æ“ä½œäºŒè¿›åˆ¶æ…¢ä¸å°‘ã€‚</p>
<p>æ³¨æ„ï¼Œä»¥ä¸Šä»£ç å¹¶ä¸å…¼å®¹å‘é€ä¸­æ–‡çš„æƒ…å†µï¼Œå¤§æ¦‚å°±æ˜¯æ€è·¯ç”¨åˆé€‚å­—èŠ‚é•¿åº¦å»å­˜å‚¨ç»è¿‡encodeURIComponent(æˆ–charCode)åçš„å­—ç¬¦ï¼Œå­—ç¬¦codeä¸äºŒè¿›åˆ¶ç¼–ç ä¹‹é—´çš„è½¬æ¢è¿™ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯å‚è€ƒæ–‡åçš„å‚è€ƒèµ„æ–™ã€‚</p>
<p>FormDataçš„apiä½¿æˆ‘ä»¬å¯ä»¥å¤„ç†blob(buffer)ã€textç­‰æ•°æ®çš„æäº¤ï¼Œå¹³å¸¸å¼€å‘å·²è¶³å¤Ÿã€‚ä½†æ˜¯é€šè¿‡äº†è§£formdataçš„æ•°æ®åº•å±‚ç»„è£…æ–¹å¼ï¼Œæˆ–è®¸æœ‰åŠ©äºæˆ‘ä»¬åœ¨æµè§ˆå™¨ç«¯æ›´çµæ´»çš„å¤„ç†ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ã€æä¾›ä¸€äº›æ–°æ€è·¯ã€‚</p>
<p>æœ€åå†é™„ä¸Šnodejsç‰ˆçš„æ„é€ æ–¹å¼çš„ä¸»è¦ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> boundary_key = <span class="string">'aotu_lab'</span>;</div><div class="line"><span class="keyword">var</span> boundary = <span class="string">'--'</span> + boundary_key;</div><div class="line"><span class="keyword">var</span> end_boundary = boundary + <span class="string">'--'</span>;</div><div class="line"><span class="keyword">var</span> request = http.request(&#123;</div><div class="line">    <span class="attr">host</span>: <span class="string">'127.0.0.1'</span>,</div><div class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/submit'</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">'post'</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">req</span>) </span>&#123;</div><div class="line">req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">buf</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'response from node:'</span>);</div><div class="line">    <span class="built_in">console</span>.log(buf.toString()); <span class="comment">// æ¥å£è¿”å›çš„json stringç»“æœ</span></div><div class="line">&#125;);</div><div class="line">&#125;);</div><div class="line">request.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'multipart/form-data; boundary='</span>+ boundary_key);</div><div class="line"><span class="keyword">var</span> retsult = <span class="string">''</span>;</div><div class="line">retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">retsult += <span class="string">'Content-Disposition: form-data; name="user"'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">retsult += <span class="string">'aotu.io'</span> + <span class="string">'\r\n'</span>;</div><div class="line">retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">retsult += <span class="string">'Content-Disposition: form-data; name="psw"'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">retsult += <span class="string">'123456'</span> + <span class="string">'\r\n'</span>;</div><div class="line">retsult += boundary + <span class="string">'\r\n'</span>;</div><div class="line">retsult += <span class="string">'Content-Disposition: form-data; name="onefile"; filename="pic.png"'</span> + <span class="string">'\r\n'</span>;</div><div class="line">retsult += <span class="string">'Content-Type: image/png'</span> + <span class="string">'\r\n\r\n'</span>;</div><div class="line">request.write(retsult); <span class="comment">// å†™å…¥æ–‡æœ¬æ•°æ®ï¼Œè¯¥æ–¹æ³•ä¼šè‡ªåŠ¨ç¼–ç å­—ç¬¦ä¸ºäºŒè¿›åˆ¶</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> picStream = fs.createReadStream(<span class="string">'./public/images/o2logo.png'</span>); <span class="comment">// è¯»å–ä¸€å¼ å›¾ç‰‡</span></div><div class="line">picStream.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            request.write(<span class="string">'\r\n'</span> + end_boundary); <span class="comment">// å†™å…¥ç»“æŸç¬¦</span></div><div class="line">            request.end();</div><div class="line">            res.end(<span class="string">'post form data success!'</span>);</div><div class="line">         &#125;)</div><div class="line">         .pipe(request, &#123;<span class="attr">end</span>: <span class="literal">false</span>&#125;); <span class="comment">// å†™å…¥å›¾ç‰‡æ•°æ®request</span></div></pre></td></tr></table></figure></p>
<p>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥cloneè¿™ä¸ªgitåœ°å€è·å–ä»£ç ï¼š<a href="https://github.com/cos2004/formrequest_app.git" target="_blank" rel="external">https://github.com/cos2004/formrequest_app.git</a></p>
<p>ä»£ç ä»‹ç»ï¼š</p>
<p>é¦–å…ˆnpm installï¼Œç„¶ånpm startå¯åŠ¨æœåŠ¡å™¨</p>
<p><a href="http://127.0.0.1:3000/" target="_blank" rel="external">http://127.0.0.1:3000/</a> ï¼Œå¯æ¼”ç¤ºjsç‰ˆçš„æäº¤ï¼Œè¯·é€‰æ‹©pngæ ¼å¼æ–‡ä»¶</p>
<p><a href="http://127.0.0.1:3000/formdata" target="_blank" rel="external">http://127.0.0.1:3000/formdata</a> æ¼”ç¤ºnodejsç‰ˆæäº¤ï¼Œåœ¨terminalå¯ä»¥çœ‹åˆ°è¾“å‡ºç»“æœ</p>
<p><a href="http://127.0.0.1:3000/submit" target="_blank" rel="external">http://127.0.0.1:3000/submit</a> è¡¨å•æ•°æ®æäº¤æ¥å£</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.w3.org/TR/html401/interact/forms.html" target="_blank" rel="external">W3Cå…³äºFormsçš„è¯´æ˜</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html" target="_blank" rel="external">å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicodeå’ŒUTF-8</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="external">MDN docs</a></p>
<p><a href="http://www.cnblogs.com/hustskyking/p/javascript-array.html" target="_blank" rel="external">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptæ•°ç»„</a></p>
<p><a href="http://cnodejs.org/topic/4ffed8544764b729026b1da3" target="_blank" rel="external">å¦‚ä½•ç”¨nodejsé€šè¿‡postå‘é€multipart/form-dataç±»å‹çš„httpè¯·æ±‚</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»formæ•°æ®çš„æ ¼å¼ä»¥åŠå¦‚ä½•ç”¨ä»£ç æ‰‹åŠ¨æ„é€ ä¸€ä¸ªè¯·æ±‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="form" scheme="https://aotu.io/tags/form/"/>
    
      <category term="xhr2" scheme="https://aotu.io/tags/xhr2/"/>
    
      <category term="ArrayBuffer" scheme="https://aotu.io/tags/ArrayBuffer/"/>
    
      <category term="æ„é€ formæ•°æ®" scheme="https://aotu.io/tags/%E6%9E%84%E9%80%A0form%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­reduce()æ–¹æ³•ä¸å®Œå…¨æŒ‡å—</title>
    <link href="https://aotu.io/notes/2016/04/14/js-reduce/"/>
    <id>https://aotu.io/notes/2016/04/14/js-reduce/</id>
    <published>2016-04-14T08:41:22.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="JavaScriptä¸­reduce-æ–¹æ³•ä¸å®Œå…¨æŒ‡å—"><a href="#JavaScriptä¸­reduce-æ–¹æ³•ä¸å®Œå…¨æŒ‡å—" class="headerlink" title="JavaScriptä¸­reduce()æ–¹æ³•ä¸å®Œå…¨æŒ‡å—"></a>JavaScriptä¸­reduce()æ–¹æ³•ä¸å®Œå…¨æŒ‡å—</h2><p>reduce() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆä¸ºä¸€ä¸ªå€¼ï¼Œæ˜¯ES5ä¸­æ–°å¢çš„åˆä¸€ä¸ªæ•°ç»„é€é¡¹å¤„ç†æ–¹æ³•ï¼Œé‚£reduceæ–¹æ³•è·Ÿforeachã€mapç­‰æ•°ç»„æ–¹æ³•åˆæœ‰å•¥åŒºåˆ«å‘¢ã€‚</p>
<h4 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><blockquote>
<p>arr.reduce(callback[, initialValue])   â€”<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="external">More From MDN</a></p>
</blockquote>
<h4 id="å‚æ•°ï¼š"><a href="#å‚æ•°ï¼š" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h4><ul>
<li>callbackï¼ˆä¸€ä¸ªåœ¨æ•°ç»„ä¸­æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°ï¼Œæ¥å—å››ä¸ªå‡½æ•°ï¼šï¼‰<ul>
<li>previousValueï¼ˆä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ï¼‰</li>
<li>currentValueï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼‰</li>
<li>currentIndexï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ä¸‹æ ‡ï¼‰</li>
<li>arrayï¼ˆè°ƒç”¨reduce()æ–¹æ³•çš„æ•°ç»„ï¼‰</li>
</ul>
</li>
<li>initialValueï¼ˆå¯é€‰çš„åˆå§‹å€¼ã€‚ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ä¼ ç»™previousValueçš„å€¼ï¼‰</li>
</ul>
<h4 id="å›¾è§£å‚æ•°"><a href="#å›¾è§£å‚æ•°" class="headerlink" title="å›¾è§£å‚æ•°"></a>å›¾è§£å‚æ•°</h4><p><img src="http://ww3.sinaimg.cn/large/80c4aaf9gw1f2rxtqh8nqj20ur07jaam.jpg" alt="img"></p>
<p><strong>æŠ›å¼€ä¸Šé¢æ™¦æ¶©éš¾æ‡‚çš„è¯­æ³•ä»‹ç»ï¼Œä¸‹é¢æˆ‘ä»¬ç›´æ¥ä¸Šå®ä¾‹ï¼š</strong></p>
<h4 id="å®ä¾‹ï¼š"><a href="#å®ä¾‹ï¼š" class="headerlink" title="å®ä¾‹ï¼š"></a>å®ä¾‹ï¼š</h4><p>æ•°ç»„ arr = [1,2,3,4] æ±‚æ•°ç»„çš„å’Œ</p>
<h5 id="forEach-å®ç°"><a href="#forEach-å®ç°" class="headerlink" title="forEach å®ç°"></a>forEach å®ç°</h5><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</div><div class="line">sum = <span class="number">0</span>;</div><div class="line">arr.forEach(function(e)&#123;sum += e;&#125;); <span class="comment">// sum = 10  just for demo</span></div></pre></td></tr></table></figure>
<h5 id="map-å®ç°"><a href="#map-å®ç°" class="headerlink" title="map å®ç°"></a>map å®ç°</h5><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</div><div class="line"><span class="built_in">sum</span> = <span class="number">0</span>;</div><div class="line">arr.<span class="built_in">map</span>(function(obj)&#123;<span class="built_in">sum</span> += obj&#125;);//<span class="built_in">return</span> undefined <span class="built_in">array</span>. <span class="built_in">sum</span> = <span class="number">10</span>  just <span class="keyword">for</span> <span class="built_in">demo</span></div></pre></td></tr></table></figure>
<h5 id="reduceå®ç°"><a href="#reduceå®ç°" class="headerlink" title="reduceå®ç°"></a>reduceå®ç°</h5><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</div><div class="line">arr.reduce(<span class="function"><span class="keyword">function</span><span class="params">(pre,cur)</span></span>&#123;<span class="keyword">return</span> pre + cur&#125;); <span class="comment">// return 10</span></div></pre></td></tr></table></figure>
<p>æ²¡é”™ï¼Œreduce ä¸“ä¸ºç´¯åŠ è¿™ç§æ“ä½œè€Œè®¾è®¡ï¼Œä¸ºç´¯åŠ è¿™ç±»æ“ä½œè€Œè®¾è®¡çš„å‚æ•°ï¼Œååˆ†æ–¹ä¾¿ã€‚<br>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œreduceæ–¹æ³•çš„å‚æ•°åˆ°åº•æœ‰å“ªäº›ç”¨æ³•å‘¢ï¼Ÿ</p>
<h5 id="å‚æ•°åˆ†è§£"><a href="#å‚æ•°åˆ†è§£" class="headerlink" title="å‚æ•°åˆ†è§£"></a>å‚æ•°åˆ†è§£</h5><h6 id="1-ä¸ä¼ initialValueå€¼"><a href="#1-ä¸ä¼ initialValueå€¼" class="headerlink" title="1. ä¸ä¼ initialValueå€¼"></a>1. ä¸ä¼ initialValueå€¼</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">pre,cur,index,arr</span>)</span>&#123;<span class="keyword">debugger</span>;<span class="keyword">return</span> pre+cur&#125;);</div></pre></td></tr></table></figure>
<p>æ¢æŸ¥Argumentsæ•°ç»„å¾—åˆ°ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡debugger<br>![img](<a href="http://ww4.sinaimg.cn/large/80c4aaf9gw1f2s2mrbkk4j205b045dft.jpg" target="_blank" rel="external">http://ww4.sinaimg.cn/large/80c4aaf9gw1f2s2mrbkk4j205b045dft.jpg</a> [JavaScript/reduce] %}</li>
<li>ç¬¬äºŒæ¬¡debugger<br>![img](<a href="http://ww1.sinaimg.cn/large/80c4aaf9gw1f2s2n930loj205r046glk.jpg" target="_blank" rel="external">http://ww1.sinaimg.cn/large/80c4aaf9gw1f2s2n930loj205r046glk.jpg</a> [JavaScript/reduce] %}</li>
<li>ç¬¬ä¸‰æ¬¡debugger<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="number">6</span>;</div></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="2-ä¼ å…¥initialValue-å€¼"><a href="#2-ä¼ å…¥initialValue-å€¼" class="headerlink" title="2. ä¼ å…¥initialValue å€¼"></a>2. ä¼ å…¥initialValue å€¼</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line">arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">pre,cur,index,arr</span>)</span>&#123;<span class="keyword">debugger</span>;<span class="keyword">return</span> pre+cur&#125;,<span class="number">10</span>);</div></pre></td></tr></table></figure>
<ul>
<li>ç¬¬ä¸€æ¬¡debugger<br>![img](<a href="http://ww3.sinaimg.cn/large/80c4aaf9gw1f2s2nlfrt3j205y044glk.jpg" target="_blank" rel="external">http://ww3.sinaimg.cn/large/80c4aaf9gw1f2s2nlfrt3j205y044glk.jpg</a> [JavaScript/reduce] %}</li>
<li>ç¬¬äºŒæ¬¡debugger<br>![img](<a href="http://ww4.sinaimg.cn/large/80c4aaf9gw1f2s2ns1hnuj205o040mx5.jpg" target="_blank" rel="external">http://ww4.sinaimg.cn/large/80c4aaf9gw1f2s2ns1hnuj205o040mx5.jpg</a> [JavaScript/reduce] %}</li>
<li>ç¬¬ä¸‰æ¬¡debugger<br>![img](<a href="http://ww1.sinaimg.cn/large/80c4aaf9gw1f2s2o49b49j205n0420sq.jpg" target="_blank" rel="external">http://ww1.sinaimg.cn/large/80c4aaf9gw1f2s2o49b49j205n0420sq.jpg</a> [JavaScript/reduce] %}</li>
<li>ç¬¬å››æ¬¡debugger<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="number">16</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å¯ä»¥çœ‹å‡ºä¼ å…¥initialValue ä¼šå¤šé€’å½’ä¸€æ¬¡ï¼Œè€ŒinitialValueçš„å€¼çš„ä½œç”¨å¤§å®¶åº”è¯¥ä¹Ÿæ˜äº†äº†ï¼šä¸ºç´¯åŠ ç­‰æ“ä½œä¼ å…¥èµ·å§‹å€¼ï¼ˆé¢å¤–çš„åŠ å€¼ï¼‰ã€‚<br>è€Œcallbackfnä¸­çš„å››ä¸ªå‚æ•°ä¹Ÿå¯ä»¥åœ¨debuggerçš„åŠ¨æ€å˜åŒ–ä¸­æŸ¥çœ‹å‡ºå…·æœ‰çš„ç‰¹æ€§ã€‚<br>é‚£ä¹ˆåˆ©ç”¨reduceæ–¹æ³•è¿˜å¯ä»¥åšå“ªäº›äº‹æƒ…å‘¢?</p>
<h4 id="æ›´å¤šå®ä¾‹"><a href="#æ›´å¤šå®ä¾‹" class="headerlink" title="æ›´å¤šå®ä¾‹"></a>æ›´å¤šå®ä¾‹</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>æ±‚ä¹˜ç§¯<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pro = arr.reduce(<span class="function"><span class="keyword">function</span><span class="params">(pre,cur,index,arr)</span></span>&#123;<span class="keyword">return</span> pre * cur&#125;)</div></pre></td></tr></table></figure></p>
<p>æ±‚æœ€å¤§å€¼<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> max = a.reduce(<span class="function"><span class="keyword">function</span><span class="params">(pre,cur,inde,arr)</span></span>&#123;<span class="keyword">return</span> pre&gt;cur?pre:cur;&#125;);</div></pre></td></tr></table></figure></p>
<p>å¦å¤–ï¼Œå¦‚æœä½ åœ¨NodeJsçš„ç¯å¢ƒä¸­ä½¿ç”¨reduceå‡ ä¹æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä½¿ç”¨reduceæ–¹æ³•ï¼Œé‚£å¯èƒ½å°±è¦å…¼å®¹IE8ä»¥ä¸‹çš„æµè§ˆå™¨äº†ã€‚<br>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥åº“æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œåœ¨jQueryå®˜ç½‘ä¸­ï¼Œæœ‰ä¸€ä¸ªå¯¹reduceé•¿è¾¾8å¹´çš„è®¨è®º<a href="https://bugs.jquery.com/ticket/1886" target="_blank" rel="external">Add jQuery.reduce()</a> è€ŒJqueryå®˜æ–¹è‡³ä»Šä»ç„¶åšæŒreduceé€‚åˆä½œä¸ºJqueryçš„ä¸€ä¸ªæ’ä»¶å­˜åœ¨ã€‚å³ä½¿åæ¥ES5ä¸­åŠ å…¥äº†reduceçš„å®ç°ã€‚</p>
<blockquote>
<p>This wonâ€™t be useful in the core, it can always be included in a plugin. â€”- by flesler</p>
</blockquote>
<ul>
<li><p>å› æ­¤ï¼Œå¦‚æœåœ¨Jqueryä¸­ä½¿ç”¨reduceæ–¹æ³•ï¼Œéœ€å¼•å…¥reduceæ’ä»¶<a href="https://github.com/xhroot/jQuery-reduce-plugin" target="_blank" rel="external">jQuery-reduce-plugin</a></p>
</li>
<li><p>underscorejs ä¸­æ—©å·²å®ç°reduceæ–¹æ³• <a href="http://underscorejs.org/#reduce" target="_blank" rel="external">http://underscorejs.org/#reduce</a></p>
</li>
</ul>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå½¢è±¡çš„å½’çº³å‡ºæ¥forEachã€mapä»¥åŠreduceçš„ä¸åŒç‚¹ï¼š</p>
<ul>
<li>forEach æ–¹æ³•æ˜¯å°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå€¼å–å‡ºåšä¸€äº›ç¨‹åºå‘˜æƒ³è®©ä»–ä»¬åšçš„äº‹æƒ…</li>
<li>map æ–¹æ³• æ˜¯å°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå€¼æ”¾å…¥ä¸€ä¸ªæ–¹æ³•ä¸­åšä¸€äº›ç¨‹åºå‘˜æƒ³è®©ä»–ä»¬åšçš„äº‹æƒ…åè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</li>
<li>reduce æ–¹æ³• å°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå€¼ä¸å‰é¢çš„è¢«è¿”å›ç›¸åŠ çš„æ€»å’Œ(åˆè¯•å€¼ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼æˆ–è€…initialValue)</li>
</ul>
<h4 id="Final-insert-a-little-deeper"><a href="#Final-insert-a-little-deeper" class="headerlink" title="Final: insert a little deeper"></a>Final: insert a little deeper</h4><p>reduceæ–¹æ³•åœ¨æ•°ç»„å¯¹è±¡ä¸­çš„è¿ç”¨ï¼š</p>
<blockquote>
<p>æ¬ç –å·¥å°ç‹æ‹¿åˆ°äº†è¿™æ ·çš„æ•°æ®æ ¼å¼ï¼š<code>var arr =  [ {name: &#39;brick1&#39;}, {name: &#39;brick2&#39;}, {name: &#39;brick3&#39;} ]</code><br>å¸Œæœ›å¾—åˆ°è¿™æ ·çš„æ•°æ®æ ¼å¼ï¼š <code>&#39;brick1, brick2 &amp; brick3&#39;</code><br>å½“ç„¶æ•°ç»„å¼‚å¸¸æµï¼š[ {name: â€˜brick1â€™} ] å’Œ ç©ºæ•°ç»„ä¼ å…¥å¾—åˆ°<code>&#39;brick1&#39;</code> å’Œ ç©º</p>
</blockquote>
<h6 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h6><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr =  [ &#123;name: <span class="string">'brick11'</span>&#125;, &#123;name: <span class="string">'brick12'</span>&#125;, &#123;name: <span class="string">'brick13'</span>&#125; ]</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">carryBricks</span><span class="params">(arr)</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span><span class="params">(prev, current, index, array)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (index === <span class="number">0</span>)&#123;</div><div class="line">      <span class="keyword">return</span> current.name;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">array</span>.length - <span class="number">1</span>)&#123;</div><div class="line">      <span class="keyword">return</span> prev + <span class="string">' &amp; '</span> + current.name;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> prev + <span class="string">', '</span> + current.name;</div><div class="line">    &#125;</div><div class="line">  &#125;, <span class="string">''</span>);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>è¿”å›ç»“æœï¼š<code>brick11, brick12 &amp; brick13</code></p>
<p>æ­¤æ—¶è¿›ä¸€æ­¥å»¶ä¼¸å¦‚æœåŸæ¥æœ‰ä¸€å †ç –å·²ç»å †å¥½ï¼Œä¼ å…¥ initialValueå€¼ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr =  [ &#123;name: <span class="string">'brick11'</span>&#125;, &#123;name: <span class="string">'brick12'</span>&#125;, &#123;name: <span class="string">'brick13'</span>&#125; ]</div><div class="line"><span class="keyword">var</span> bricks = <span class="string">'brick1, brick2, brick3, '</span> <span class="comment">//å·²ç»å †å¥½çš„ç –</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">carryBricks</span><span class="params">(arr,bricks)</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span><span class="params">(prev, current, index, array)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span> (index === <span class="number">0</span>)&#123;</div><div class="line">      <span class="keyword">return</span> prev + current.name;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">array</span>.length - <span class="number">1</span>)&#123;</div><div class="line">      <span class="keyword">return</span> prev + <span class="string">' &amp; '</span> + current.name;</div><div class="line">    &#125;</div><div class="line">      <span class="keyword">return</span> prev + <span class="string">', '</span> + current.name;</div><div class="line">  &#125;, bricks);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>è¿”å›ç»“æœï¼š<code>brick1, brick2, brick3, brick11, brick12 &amp; brick13</code></p>
<p>-EOF-</p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;JavaScriptä¸­reduce-æ–¹æ³•ä¸å®Œå…¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­reduce-æ–¹æ³•ä¸å®Œå…¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­reduce()æ–¹æ³•ä¸å®Œå…¨
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="JavaScript" scheme="https://aotu.io/tags/JavaScript/"/>
    
      <category term="reduce" scheme="https://aotu.io/tags/reduce/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­Math.randomçš„ç§å­è®¾å®šæ–¹æ³•</title>
    <link href="https://aotu.io/notes/2016/04/14/math-random/"/>
    <id>https://aotu.io/notes/2016/04/14/math-random/</id>
    <published>2016-04-14T08:30:45.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h3 id="JavaScriptä¸­Math-randomçš„ç§å­è®¾å®šæ–¹æ³•"><a href="#JavaScriptä¸­Math-randomçš„ç§å­è®¾å®šæ–¹æ³•" class="headerlink" title="JavaScriptä¸­Math.randomçš„ç§å­è®¾å®šæ–¹æ³•"></a>JavaScriptä¸­Math.randomçš„ç§å­è®¾å®šæ–¹æ³•</h3><p> CodeWarsä¸Šæœ‰è¿™ä¹ˆä¸ªé¢˜ç›®ï¼š <code>ã€ŠDon&#39;t rely on luckã€‹</code> çš„å¥‡è‘©é¢˜ç›®ï¼Œå…ˆçœ‹ä¸€ä¸‹é¢˜ç›®æè¿°ï¼š</p>
<h5 id="Description"><a href="#Description" class="headerlink" title="Description:"></a>Description:</h5><blockquote>
<p>The test fixture I use for this kata is pre-populated.<br>It will compare your guess to a random number generated in  JavaScript by:<br><code>Math.floor(Math.random() * 100 + 1)</code><br>You can pass by relying on luck or skill but try not to rely on luck.<br>â€œThe power to define the situation is the ultimate power.â€ - Jerry Rubin<br>Good luck!</p>
</blockquote>
<h5 id="ç»™å‡ºçš„Test-Case"><a href="#ç»™å‡ºçš„Test-Case" class="headerlink" title="ç»™å‡ºçš„Test Case:"></a>ç»™å‡ºçš„Test Case:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> lucky_number = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100</span> + <span class="number">1</span>);</div><div class="line">Test.assertEquals(guess, lucky_number, <span class="string">"Sorry. Unlucky this time."</span>);</div></pre></td></tr></table></figure>
<p>å‡ºé¢˜è€…å¤§çº¦æ˜¯æƒ³è®©æ¯æ¬¡éšæœºæ•°ä¸ä½ guessåˆ°çš„æ•°å­—ç›¸åŒï¼ŒSo â€˜Donâ€™t rely on luckâ€™.<br>è¿™æ˜¯ä¸€ä¸ªå¤§å‘ï¼ŒåŸæœ¬è¯»å®Œé¢˜åç™¾æ€ä¸å¾—å…¶è§£ï¼Œå½“UnSolutionåï¼Œå¿ƒé‡ŒçœŸçš„æ˜¯ä¸‡é©¬å¥”è…¾ã€‚</p>
<p>This is solution<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.random=<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line"><span class="keyword">var</span> guess = <span class="number">1</span>;</div></pre></td></tr></table></figure></p>
<p>æˆ–è€…<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> guess = <span class="number">10</span></div><div class="line"><span class="built_in">Math</span>.floor = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123; <span class="keyword">return</span> guess; &#125;</div></pre></td></tr></table></figure></p>
<p>æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ã€‚å°±æ˜¯å°†Math.random æˆ–è€… Math.floor é‡å†™ã€‚<br>çœ‹åˆ°æœ‰ä¸ªè€å¤–ä¼°è®¡ä¹Ÿæ˜¯UnLock solutionåå¿ƒé‡Œæ„¤æ¨å†™äº†è¿™ä¹ˆä¸€ä¸ªç­”æ¡ˆï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.floor = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="string">"F*** ***"</span>; &#125;</div><div class="line">guess = <span class="string">"F*** ***"</span>;</div></pre></td></tr></table></figure></p>
<p>ç„¶è€Œè¿™é“é¢˜ç›®æ˜æ˜¾æ˜¯æƒ³è®©ä½ äº†è§£ä¼ªéšæœºæ•°äº§ç”Ÿçš„åŸç†ä»¥åŠç§å­éšæœºæ•°åœ¨JavaScriptå®ç°æ–¹æ³•ã€‚</p>
<blockquote>
<p>ä»£ç è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä»£ç å¦‚åˆæ‹ã€‚</p>
</blockquote>
<h4 id="é‚£ä¹ˆJavaScriptä¸­çš„ç§å­éšæœºæ•°åˆ°åº•æ€ä¹ˆå®ç°å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆJavaScriptä¸­çš„ç§å­éšæœºæ•°åˆ°åº•æ€ä¹ˆå®ç°å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆJavaScriptä¸­çš„ç§å­éšæœºæ•°åˆ°åº•æ€ä¹ˆå®ç°å‘¢ï¼Ÿ"></a>é‚£ä¹ˆJavaScriptä¸­çš„ç§å­éšæœºæ•°åˆ°åº•æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</h4><p>åœ¨Cæˆ–è€…Rubyä¸­éƒ½æœ‰ä½å±‚çš„é‡ç½®seedçš„æ–¹æ³•ï¼Œæ¯”å¦‚Cä¸­çš„seedå€¼å½“è®¡ç®—æœºæ­£å¸¸å¼€æœºåï¼Œè¿™ä¸ªç§å­çš„å€¼æ˜¯å®šäº†çš„ï¼ŒCæä¾›äº† <code>srand()</code>å‡½æ•°ï¼Œå®ƒçš„åŸå½¢æ˜¯<code>void srand( int a)</code>ã€‚è€ŒRubyä¸­é»˜è®¤æ˜¯æ ¹æ®ç³»ç»Ÿæ—¶é—´ã€è¿›ç¨‹idã€ä¸€ä¸ªå¯å‡åºçš„æ•°å­—æ¥ç”Ÿæˆéšæœºæ•°ç§å­ã€‚ç„¶è€ŒJavaScriptä¸­å¹¶æ²¡æœ‰ç±»ä¼¼ä¸Šé¢åº•å±‚è¯­è¨€æä¾›çš„seedRandomRå‡½æ•°ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯è‡ªå·±å®ç°ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯é‡å†™<code>Math.random()</code>æ–¹æ³•ã€‚</p>
<blockquote>
<p>åœ¨å¼€å§‹æˆ‘çš„é‡å†™<code>Math.random()</code>æ–¹æ³•å‰è¿˜æ˜¯éœ€è¦åšä¸€äº›çŸ¥è¯†å‚¨å¤‡å·¥ä½œï¼š<br>å®ç°éšæœºå‡½æ•°çš„æ–¹æ³•å¾ˆå¤šï¼Œå¦‚æ–æ³¢é‚£å¥‘æ³•ã€çº¿æ€§åŒä½™æ³•ã€æ¢…æ£®æ—‹è½¬ç®—æ³•Mersenne twisterï¼Œ ç°åœ¨æœ€å¥½çš„éšæœºæ•°äº§ç”Ÿç®—æ³•æ˜¯æ¢…æ£®æ—‹è½¬ç®—æ³•Mersenne twisterã€‚<a href="https://zh.wikipedia.org/zh/%E6%A2%85%E6%A3%AE%E6%97%8B%E8%BD%AC%E7%AE%97%E6%B3%95" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
</blockquote>
<p>chrome v8 å¼•æ“ä½¿ç”¨çš„éšæœºå‡½æ•°ç®—æ³•ï¼š(æ¯ä¸ªæµè§ˆå™¨å‚å•†å®ç°Math.randomå¹¶ä¸ç›¸åŒ)<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ECMA 262 - 15.8.2.14</span></div><div class="line"><span class="keyword">var</span> rngstate;  <span class="comment">// Initialized to a Uint32Array during genesis.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MathRandom</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> r0 = (MathImul(<span class="number">18030</span>, rngstate[<span class="number">0</span>] &amp; <span class="number">0xFFFF</span>) + (rngstate[<span class="number">0</span>] &gt;&gt;&gt; <span class="number">16</span>)) | <span class="number">0</span>;</div><div class="line">  rngstate[<span class="number">0</span>] = r0;</div><div class="line">  <span class="keyword">var</span> r1 = (MathImul(<span class="number">36969</span>, rngstate[<span class="number">1</span>] &amp; <span class="number">0xFFFF</span>) + (rngstate[<span class="number">1</span>] &gt;&gt;&gt; <span class="number">16</span>)) | <span class="number">0</span>;</div><div class="line">  rngstate[<span class="number">1</span>] = r1;</div><div class="line">  <span class="keyword">var</span> x = ((r0 &lt;&lt; <span class="number">16</span>) + (r1 &amp; <span class="number">0xFFFF</span>)) | <span class="number">0</span>;</div><div class="line">  <span class="comment">// Division by 0x100000000 through multiplication by reciprocal.</span></div><div class="line">  <span class="keyword">return</span> (x &lt; <span class="number">0</span> ? (x + <span class="number">0x100000000</span>) : x) * <span class="number">2.3283064365386962890625e-10</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">// Non-standard extension.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MathImul</span><span class="params">(x, y)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> %NumberImul(TO_NUMBER_INLINE(x), TO_NUMBER_INLINE(y));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>From: <a href="https://github.com/v8/v8/blob/dae6dfe08ba9810abbe7eee81f7c58e999ae8525/src/math.js#L144" target="_blank" rel="external">chrome v8å¼•æ“éšæœºæ•°å®ç°æ–¹æ³•</a></p>
<p>å¯ä»¥çœ‹å¾—å‡ºV8å¼•æ“ä¸­çš„seed å€¼æ˜¯é€šè¿‡<code>MathImul</code>æ–¹æ³•åˆ›é€ å‡ºæ¥çš„ã€‚æ‰€ä»¥å¹¶æ²¡æœ‰ä¸ºæˆ‘ä»¬é¢„ç•™å¼€å‘è€…ä¼ å…¥seedå€¼çš„å‚æ•°ã€‚</p>
<p>é‚£æˆ‘ä»¬è¦æƒ³å®æ—¶æŒæ¡æ¯æ¬¡éšæœºäº§ç”Ÿçš„å€¼ç›¸åŒï¼ˆé¢„ç•™seedå‚æ•°ï¼‰ï¼Œåªèƒ½è‡ªå·±é‡å†™<code>Math.random</code>æ–¹æ³•äº†ã€‚ ##### æ¯”è¾ƒç»å…¸çš„è·å–éšæœºæ•°çš„å†™æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.random = <span class="function"><span class="keyword">function</span>(<span class="params">seed</span>)</span>&#123;</div><div class="line"><span class="keyword">return</span> (<span class="string">'0.'</span>+<span class="built_in">Math</span>.sin(seed).toString().substr(<span class="number">6</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ‰“å¼€Nodeç»ˆç«¯è·‘ä¸€ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.random = <span class="function"><span class="keyword">function</span>(<span class="params">seed</span>)</span>&#123;<span class="keyword">return</span> (<span class="string">'0.'</span>+<span class="built_in">Math</span>.sin(seed).toString().substr(<span class="number">6</span>));&#125;</div><div class="line"><span class="built_in">Math</span>.random(<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<p>seedå€¼å§‹ç»ˆä¸º1æ—¶å§‹ç»ˆå¾—åˆ°ï¼š<code>0.709848078965</code><br>è‡³æ­¤æˆ‘ä»¬å¯ä»¥æ¢ç´¢ç§å­éšæœºæ•°çš„ç”¨é€”ï¼š</p>
<blockquote>
<p>æ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘äº¬ä¸œçš„H5æ´»åŠ¨é¡µé¢çš„å°æ¸¸æˆæ—¶ï¼Œå¯èƒ½éœ€è¦éšæœºäº§ç”Ÿä¸€äº›èƒŒæ™¯ã€éšæœºæ‰è½é“å…·ã€å°æ€ªç‰©ï¼›å½“ç”¨æˆ·ä¸­é€”é€€å‡º(å¾®ä¿¡ä¸å°å¿ƒå³æ»‘ï¼Œä¸€å®šæœ‰ä¸å°‘äººè¢«è¿™ä¸ªæ¶å¿ƒåˆ°[å½“ç„¶ç°åœ¨å·²ç»ä¼˜åŒ–])ï¼Œå½“ç”¨æˆ·é‡æ–°æ‰“å¼€å°æ¸¸æˆæ—¶ï¼Œç”¨æˆ·æ•´ä½“è¿›åº¦ã€ç§¯åˆ†æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è®°å½•åˆ°æœ¬åœ°æˆ–è€…å­˜å‚¨åˆ°å¾®ä¿¡IDå»ºç«‹çš„å­˜å‚¨æœºåˆ¶ä¸­ä»è€Œå¾—ä»¥æ¢å¤ï¼Œä½†æ˜¯éšæœºäº§ç”Ÿçš„åœºæ™¯ã€éšæœºæ‰è½é“å…·ã€å°æ€ªç‰©ç­‰å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“å­˜å‚¨æ¢å¤ï¼Œé‡æ–°è·å–åœºæ™¯ã€å°æ€ªç‰©é‚£æœªå…ç”¨æˆ·ä½“éªŒå¤ªå·®ï¼ï¼ï¼æŠŠç”»å¸ƒä¸Šçš„æ‰€æœ‰ç‰©ä»¶ã€æ€ªç‰©å±æ€§å…¨éƒ¨å­˜å‚¨ä¸‹æ¥æ›´æ˜¯æ²¡æœ‰å¿…è¦ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨æˆ‘ä»¬é‡å†™çš„<code>Math.random()</code>(æ­¤æ—¶å¯ä¸é‡å†™å†…ç½®æ–¹æ³•ï¼Œå¯å¦èµ·åˆ«å)ã€‚åªè¦æˆ‘ä»¬ä¿å­˜ä¸‹æ¥ä¸€ä¸ªéšæœºæ•°seedå€¼ï¼Œåˆ©ç”¨seedå€¼æ¥æ¢å¤æ‰€æœ‰çš„åœºæ™¯å°±å¥½äº†ã€‚</p>
</blockquote>
<p>å¦å¤–<a href="https://github.com/davidbau/seedrandom" target="_blank" rel="external"> David Bau</a>æä¾›äº†ä¸€ä¸ªseedrandomåº“ä»¥ä¾›å¼€å‘è€…è°ƒç”¨:</p>
<h6 id="Script-tag-usage"><a href="#Script-tag-usage" class="headerlink" title="Script tag usage"></a>Script tag usage</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.0/seedrandom.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h6 id="Require-js-usage"><a href="#Require-js-usage" class="headerlink" title="Require.js usage"></a>Require.js usage</h6><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">bower </span><span class="keyword">install </span>seedrandom</div></pre></td></tr></table></figure>
<h6 id="Node-js-usage"><a href="#Node-js-usage" class="headerlink" title="Node.js usage"></a>Node.js usage</h6><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> seedrandom</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä¸ç®¡æˆ‘ä»¬å¦‚ä½•ä¼˜åŒ–ç§å­éšæœºæ•°ï¼Œäº§ç”Ÿçš„éšæœºæ•°éƒ½æ˜¯ä¼ªéšæœºæ•°ä¹Ÿå°±æ˜¯å‡çš„éšæœºæ•°ï¼Œå®ƒæ˜¯æ ¹æ®æŸç§å·²çŸ¥çš„æ–¹æ³•è·å–éšæœºæ•°ï¼Œæœ¬è´¨ä¸Šå·²ç»å»é™¤äº†çœŸæ­£éšæœºçš„å¯èƒ½ã€‚è¿™ç§æ–¹æ³•ä¸€æ—¦é‡å¤ï¼Œåˆ™è·å–åˆ°çš„éšæœºæ•°ä¹Ÿä¼šé‡å¤ã€‚</p>
<p>é‚£ä¹ˆè®¡ç®—æœºèƒ½å¦äº§ç”ŸçœŸçš„éšæœºæ•°å‘¢ï¼Ÿ<br>GitHubä¸Šæœ‰ä¸€ä¸ªå«<a href="https://github.com/maik/RealRand" target="_blank" rel="external">RealRand</a> çš„é¡¹ç›®ã€‚åŒ…è£…äº†3ä¸ªçœŸæ­£çš„éšæœºæ•°æœåŠ¡ç”ŸæˆæœåŠ¡ï¼š(åŸºäºRuby)</p>
<ul>
<li>random.orgï¼šæ­¤ç½‘ç«™æ ¹æ®å¤§æ°”å™ªå£°æ¥ç”Ÿæˆéšæœºæ•°</li>
<li>FourmiLabï¼ˆHotBitsï¼‰ï¼šä½¿ç”¨æ”¾å°„æ€§è¡°å˜æ¥ç”Ÿæˆéšæœºæ•°</li>
<li>random.hd.orgï¼ˆEntropyPoolï¼‰ï¼šå£°ç§°ä½¿ç”¨å„ç§æ¥æºæ¥äº§ç”Ÿéšæœºæ•°ï¼ŒåŒ…æ‹¬æœ¬åœ°ç¨‹åº/æ–‡ä»¶/è®¾å¤‡ï¼Œç½‘é¡µçš„ç‚¹å‡»ç‡ï¼Œä»¥åŠè¿œç¨‹Webç«™ç‚¹ã€‚</li>
</ul>
<p>è·‘åäº†ï¼Œå†å›åˆ°JavaScriptä¸­ç§å­éšæœºæ•°çš„è¯é¢˜ï¼š</p>
<blockquote>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼šéšæœºæ•°ç§å­çš„å­˜åœ¨å¯ä»¥è®©éšæœºæ•°åœ¨å¼€å‘è€…æ‰‹ä¸­å®ç°å¯æ§ã€‚è€Œå®ç°éšæœºæ•°â€œç§å­çš„éšæœºâ€å¯ä»¥æ¥å®ç°H5å°æ¸¸æˆé“å…·çš„éšæœºæ‰è½çš„å¯æ§æ€§æ›´ç”šè‡³çœŸéšæœºæ•°çš„å¯èƒ½æ€§(åƒä¸Šæ–‡ä¸­æåˆ°çš„é€šè¿‡å¤§æ°”å™ªå£°ã€æ”¾å°„æ€§è¡°å˜ç­‰ç‰©ç†éšæœºåå¢ƒæ¥äº§ç”Ÿéšæœºæ•°ç§å­)ã€‚</p>
</blockquote>
<p>-EOF-</p>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;JavaScriptä¸­Math-randomçš„ç§å­è®¾å®šæ–¹æ³•&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­Math-randomçš„ç§å­è®¾å®šæ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­Math.
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="JavaScript" scheme="https://aotu.io/tags/JavaScript/"/>
    
      <category term="Random" scheme="https://aotu.io/tags/Random/"/>
    
  </entry>
  
  <entry>
    <title>Canvasè™¹è†œæ¶ˆé™¤è½¬åœº</title>
    <link href="https://aotu.io/notes/2016/04/13/Iris-Wipe/"/>
    <id>https://aotu.io/notes/2016/04/13/Iris-Wipe/</id>
    <published>2016-04-13T02:59:20.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªç”¨ä»£ç å®ç°å½±è§†è½¬åœºæ•ˆæœçš„è„‘æ´ä¹‹ä½œã€‚</p>
<a id="more"></a>
<h2 id="ä»éœ€æ±‚è¯´èµ·"><a href="#ä»éœ€æ±‚è¯´èµ·" class="headerlink" title="ä»éœ€æ±‚è¯´èµ·"></a>ä»éœ€æ±‚è¯´èµ·</h2><p>æœ‰ä¸€å¤©é˜¿å©†ä¸»æ¥åˆ°äº†ä¸€ä¸ªè§¦å±é¡µéœ€æ±‚ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/design.png" alt="img"></p>
<ul>
<li>è®¾è®¡å¸ˆï¼šå‰å‰</li>
</ul>
<p>è®©æˆ‘ä»¬ä¸Šä¸Šä¸‹ä¸‹æ‰“é‡æ‰“é‡è¿™ä¸ªéœ€æ±‚ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/omg_yue.gif" alt="img"></p>
<p>loadingè·Ÿæ­£ç‰‡èƒŒæ™¯å®Œå…¨ä¸ä¸€æ ·ï¼<br>æ•´ä¸ªéœ€æ±‚è¿˜åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼šå¯¼è¯­éƒ¨åˆ†ï¼ˆå¼€ç‰‡ï¼‰ã€èŒä½ä»‹ç»éƒ¨åˆ†ï¼ˆæ­£ç‰‡ï¼‰ã€ç»“æŸéƒ¨åˆ†ï¼ˆå­—å¹•ï¼‰ï¼›æ¯ä¸ªé˜¶æ®µä¹‹é—´çš„å…ƒç´ å°‘åˆ™ä¸‰å››ä¸ªï¼Œå¤šåˆ™å››äº”ä¸ªï¼Œå¦‚æœä¸€ä¸ªä¸€ä¸ªåœ°transitionï¼Œæƒ³æƒ³éƒ½æ›¿æµè§ˆå™¨è§‰å¾—å¡ã€‚<br>è¿™ä¸ªæ—¶å€™ï¼Œä¸€ä¸ªç«¥å¹´çš„ä¹…è¿œè®°å¿†æµ®å‡ºæ°´é¢â€”â€”å¥½åƒæœ‰ä¸ªç±»ä¼¼èˆå°èšå…‰ç¯çš„è½¬åœºæ¥ç€â€¦â€¦</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/tom_and_jerry_01_16.gif" alt="img"></p>
<ul>
<li>ç«¥å¹´çš„å›å¿†ï¼šçŒ«å’Œè€é¼ </li>
</ul>
<p>äºæ˜¯é˜¿å©†ä¸»å¼€å§‹äº†æ¼«é•¿çš„è€ƒæ®å¾é€”ã€‚</p>
<h2 id="è½¬åœºï¼ˆTransitionï¼‰çš„åˆå½¢æ€"><a href="#è½¬åœºï¼ˆTransitionï¼‰çš„åˆå½¢æ€" class="headerlink" title="è½¬åœºï¼ˆTransitionï¼‰çš„åˆå½¢æ€"></a>è½¬åœºï¼ˆTransitionï¼‰çš„åˆå½¢æ€</h2><p>ä¸çŸ¥å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œå‡¡æ˜¯æœ‰presentationçš„åœ°æ–¹å°±æœ‰è½¬åœºçš„å­˜åœ¨ã€‚<br>åˆ©å™¨PPTä»¥åŠæ›´ä¸ºé«˜ç«¯çš„Keynoteéƒ½ä¸ºæˆ‘ä»¬æä¾›äº†ç°æˆçš„äº”èŠ±å…«é—¨çš„è½¬åœºæ•ˆæœã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/ppt_keynote_transition.png" alt="img"></p>
<p>å†å¾€äººç”Ÿå‰åŠæ®µæ¨ï¼Œå°å­¦è€å¸ˆå¶å°”ä¼šç”¨é»‘ç™½å¹»ç¯ç‰‡æ¥å±•ç¤ºä¸€äº›å›¾æ¡ˆå†…å®¹ï¼Œå³ä¾¿æ˜¯è¿™ç§å½¢å¼ä¹Ÿæœ‰ç€å…¶ç‹¬ç‰¹çš„è½¬åœºæ•ˆæœã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/the_man_from_uncle.gif" alt="img"></p>
<ul>
<li>[ç§˜å¯†ç‰¹å·¥]</li>
</ul>
<p>æœ€åŸå§‹çš„çŸ¥è¯†æµ·æ´‹é»‘æ¿ï¼Œä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™å¯æ²¡æœ‰è½¬åœºæ•ˆæœäº†å§ï¼Ÿå…¶å®ï¼Œæ“¦é»‘æ¿ä¹Ÿæ˜¯ä¸€ç§è½¬åœºå‘€ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/wipe_blackboard.gif" alt="img"></p>
<ul>
<li>å›¾ç‰‡æ¥æºï¼š<a href="http://blog.yzjy.com.cn/group/916/post/109251.aspx" target="_blank" rel="external">æ‰¬å·å¸‚æ±¶æ²³å°å­¦æ•™å¸ˆåšå®¢ç¾¤</a></li>
</ul>
<p>è½¬åœºè¿™ä¸ªæ¦‚å¿µæœ€å…ˆå‡ºç°äºå½±è§†ç•Œã€‚åœ¨å½±åƒç”±åŠ¨æ€ç…§ç‰‡çš„ç®€å•åŠŸèƒ½ä¸€ç›´å‘å±•åˆ°ç°åœ¨å¯å•†ä¸šå¯è‰ºæœ¯çš„å¤šå…ƒç”µå½±è¡Œä¸šçš„è¿‡ç¨‹ä¸­ï¼Œç»å†äº†æ•°ä»£å½±è§†äººçš„æ¢ç´¢ä¸åˆ›æ–°ï¼Œæ‰æœ‰äº†ç°åœ¨å„å¼å„æ ·çš„è½¬åœºå½¢å¼çš„æ²‰æ·€ã€‚</p>
<p>ç»´åŸºç™¾ç§‘ä¸­å¯¹è½¬åœºçš„å®šä¹‰â€”â€”</p>
<blockquote>
<p>å½±ç‰‡è½¬åœºæ˜¯ä¸€ç§ç”¨äºå½±ç‰‡ã€è§†é¢‘å‰ªè¾‘åæœŸåˆ¶ä½œçš„æŠ€æœ¯ï¼Œç”¨äºè¿æ¥åœºæ™¯æˆ–é•œå¤´ã€‚å¸¸è§çš„è½¬åœºæ–¹å¼æ˜¯ç”Ÿåˆ‡ï¼ˆnormal cutï¼‰ã€‚å¤§å¤šæ•°å½±ç‰‡ä¼šé€‰æ‹©æ€§åœ°ä½¿ç”¨å…¶ä»–æ–¹å¼çš„è½¬åœºï¼Œä»¥ä¾¿æ›´å¥½åœ°ä¼ è¾¾ä¸€ç§æƒ…ç»ªã€æŒ‡æ˜ä¸€ä¸ªæ—¶é—´æ®µï¼Œæˆ–è€…å°†ä¸€ä¸ªæ•…äº‹æ®µè½åŒ–ã€‚è½¬åœºæ–¹å¼åŒ…å«æº¶è§£ï¼ˆdissolvesï¼‰ã€Lå‹å‰ªè¾‘ï¼ˆL cutsï¼‰ã€æ¸å‡ºï¼ˆfadesï¼Œå¸¸è§æ–¹å¼æ˜¯æ¸æ¸é»‘å±ï¼‰ã€å¯¹ç§°å‰ªè¾‘ï¼ˆmatch cutsï¼‰ã€æ¶ˆé™¤ï¼ˆwipesï¼‰ã€‚ </p>
</blockquote>
<p>æ‰€æœ‰çš„è¿™äº›è½¬åœºæ–¹å¼éƒ½èƒ½åœ¨PPTä¸­ä¸€ä¸€æ˜ å°„ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/ppt_transition.png" alt="img"></p>
<p>èƒ½å’ŒPPTä¸€ä¸€æ˜ å°„çš„è¿˜æœ‰ä¸€ç§ä¸œè¥¿ï¼Œé‚£å°±æ˜¯å°±æ˜¯ä¹åå¹´ä»£çš„MVâ€¦â€¦</p>
<p>ä»”ç»†æƒ³æƒ³ï¼Œæµ®å¤¸çš„æ¶ˆé™¤è½¬åœºä¼¼ä¹å¤§å¤šæ•°æ˜¯åœ¨presentationçš„åœºåˆè§åˆ°ï¼Œä¸è¿‡æœ€è¿‘é™¤äº†ç”µå­å¹»ç¯ç‰‡è¿™æ ·çš„è½½ä½“ï¼Œåˆå¢åŠ äº†ä¸€ç§å¸¸è§è½½ä½“â€”â€”è§¦å±é¡µã€‚æ²¡é”™ï¼Œè§¦å±é¡µä¹Ÿæ˜¯ä¸€ç§presentationçš„é€”å¾„ã€‚</p>
<p>åœ¨è§¦å±é¡µé£é€Ÿå‘å±•çš„è¿™å‡ å¹´ï¼Œä¸šç•Œçš„èƒ½äººæŒ–æ˜å‡ºä¸å°‘å®è—ï¼Œè½¬åœºæ•ˆæœä¹Ÿæ˜¯ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ï¼ŒåŒ…æ‹¬ä½†ä¸æ­¢äºç”Ÿåˆ‡ï¼Œæ»‘åŠ¨ï¼Œè¦†ç›–ï¼Œå…ƒç´ è¿‡æ¸¡ã€‚å…¶ä¸­çš„è¦†ç›–è½¬åœºï¼Œå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„æ¶ˆé™¤è½¬åœºçš„ä¸€ç§ã€‚</p>
<p>åœ¨éå†äº†ç»´åŸºä¸­ç½—åˆ—çš„è½¬åœºç±»å‹ä¹‹åï¼Œåˆæ­¥è®¤å®šé˜¿å©†ä¸»è„‘å†…çš„è½¬åœºå±äºæ¶ˆé™¤è½¬åœºã€‚</p>
<h2 id="æ¶ˆé™¤è½¬åœºï¼ˆWipeï¼‰æ˜¯ä»€ä¹ˆæ ·çš„"><a href="#æ¶ˆé™¤è½¬åœºï¼ˆWipeï¼‰æ˜¯ä»€ä¹ˆæ ·çš„" class="headerlink" title="æ¶ˆé™¤è½¬åœºï¼ˆWipeï¼‰æ˜¯ä»€ä¹ˆæ ·çš„"></a>æ¶ˆé™¤è½¬åœºï¼ˆWipeï¼‰æ˜¯ä»€ä¹ˆæ ·çš„</h2><p>å†æ¬¡è¯·å‡ºæˆ‘ä»¬çš„ç»´åŸºå›â€”â€”</p>
<blockquote>
<p>ä¸€ä¸ªé•œå¤´ä»ç”»é¢çš„ä¸€å¤´æ¶ˆé™¤åˆ°ç”»é¢çš„å¦ä¸€å¤´ï¼Œæˆ–è€…ä»¥ä¸€ä¸ªç‰¹æ®Šçš„å½¢çŠ¶æ¶ˆé™¤ï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ªé•œå¤´çš„æ–¹å¼å«åšæ¶ˆé™¤è½¬åœºã€‚å¦‚æœæ¶ˆé™¤çš„æ–¹å¼æ˜¯ä»ç”»é¢çš„ä¸¤ä¾§å¾€ä¸­å¿ƒè½´æˆ–ä»ä¸­å¿ƒå¾€ä¸¤ä¾§æ¶ˆé™¤ï¼Œè¿™ç§æ¶ˆé™¤ç§°ä¸ºä»“é—¨æ¶ˆé™¤ï¼ˆa barn door wipeï¼‰ï¼Œå› ä¸ºæ•ˆæœç±»ä¼¼æ‰“å¼€æˆ–è€…å…³é—­ä»“é—¨ã€‚</p>
</blockquote>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/barn.jpg" alt="img"></p>
<ul>
<li>è°·ä»“</li>
</ul>
<p>çœ‹çœ‹ç»´åŸºå›ç»™å‡ºçš„æµ®å¤¸ä¾‹å­</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/wiki_wipes_s.gif" alt="img"></p>
<p>çœ¼è§ç€èƒœåˆ©å°±åœ¨å‰æ–¹ï¼Œè¿™å°±æ˜¯æˆ‘è¦çš„è½¬åœºæ–¹å¼ï¼Œåªæ˜¯å½¢çŠ¶æ¢æˆäº†åœ†å½¢ã€‚</p>
<p>ç»§ç»­å¾€ä¸‹é˜…è¯»ï¼Œå“æˆ‘å»ï¼Œä¼—é‡Œå¯»ä»–åƒç™¾åº¦å•Šâ€”â€”</p>
<h2 id="è™¹è†œæ¶ˆé™¤ï¼ˆIris-slowï¼‰è½¬åœº"><a href="#è™¹è†œæ¶ˆé™¤ï¼ˆIris-slowï¼‰è½¬åœº" class="headerlink" title="è™¹è†œæ¶ˆé™¤ï¼ˆIris slowï¼‰è½¬åœº"></a>è™¹è†œæ¶ˆé™¤ï¼ˆIris slowï¼‰è½¬åœº</h2><p>å‡ºæ¥å§ï¼Œç»´åŸºç¥å…½â€”â€”</p>
<blockquote>
<p>è™¹è†œè½¬åœºæ˜¯æ¶ˆé™¤è½¬åœºçš„ä¸€ç§ï¼Œç”»é¢ä¸­ä¸€ä¸ªé€æ¸å˜å¤§æˆ–å˜å°çš„åœ†åœˆè´Ÿè´£ç”»é¢é—´çš„åˆ‡æ¢ã€‚å¸¸è§äºåŠ¨ç”»çŸ­ç‰‡ï¼Œæ¯”å¦‚å…”å…«å“¥ï¼ˆå¤´ä¸€å›çŸ¥é“åŸæ¥å…«å“¥å«Looney Tunesï¼‰å•Šã€ï¼ˆé˜¿å©†ä¸»æ²¡å¬è¯´è¿‡çš„ï¼‰Merrie Melodiesç­‰åŠ¨ç”»ç³»åˆ—å•Šï¼Œç”¨äºè¡¨ç¤ºæ•…äº‹ç»“æŸã€‚åœ¨è¿™ç§æƒ…æ™¯ä¸‹ï¼Œè™¹è†œæ¶ˆé™¤å¯ä»¥ç”¨äºèšç„¦åœ¨æŸä¸ªç‰¹å®šçš„ç‚¹ï¼Œè¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªé“å…·è®©äººç‰©æ¥ä¸ªç»“æŸè¯­ï¼Œæˆ–è€…ä½œä¸ºç¬¬å››é¢å¢™ä»»ç”±äººç‰©é’»è¿›é’»å‡ºï¼Œä»¥åŠå…¶ä»–ã€‚</p>
</blockquote>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/I_Love_to_Singa.gif" alt="img"></p>
<ul>
<li>Merrie Melodiesï¼ˆæç„¶å¤§æ‚Ÿï¼‰å‡ºå“çš„åŠ¨ç”»çŸ­ç‰‡ï¼š<a href="http://www.dailymotion.com/video/x2ijkn_i-love-to-singa_shortfilms" target="_blank" rel="external">I Love to Singa</a>å°çŒ«å¤´é¹°ä¸ç¬¬å››é¢å¢™çš„äº’åŠ¨</li>
</ul>
<p>æ¶ˆé™¤è½¬åœºå€Ÿé‰´äº†èˆå°è¡¨æ¼”ä¸­å¹•å¸ƒçš„è½¬åœºå½¢å¼ï¼Œå¹¶åˆ©ç”¨ç”µè„‘å‰ªè¾‘æ¯”è¾ƒè‡ªç”±çš„ä¼˜åŠ¿åœ¨å¹•å¸ƒä¸Šå¢åŠ äº†ä¸€äº›å½¢çŠ¶ã€‚åœ¨è§†é¢‘è¿™ä¸ªç‰¹æ®Šçš„åª’ä»‹ä¸­ï¼Œå±å¹•è¢«çœ‹ä½œé“¶å¹•ä¸–ç•Œä¸­çš„ç¬¬å››é¢å¢™ã€‚</p>
<p>æœ‰äº›å½±è§†ä½œå“ä¸­çš„è§’è‰²ä¼šä¸è§‚ä¼—å¯¹è¯ï¼Œç§°ä¸ºæ‰“ç ´ç¬¬å››é¢å¢™ï¼Œè¿™ç§åšæ³•å‡ºç°åœ¨äº†ç¾å‰§ã€Šçº¸ç‰Œå±‹ã€‹ä¸­ï¼Œé¼»ç¥–æ˜¯èç¿çš„å“ˆå§†è±ç‰¹ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/House.Of.Cards.S02E01.jpg" alt="img"></p>
<ul>
<li>ã€Šçº¸ç‰Œå±‹ã€‹</li>
</ul>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/iris-pupil-anatomy-illustration_medical512.png" alt="img"></p>
<ul>
<li>è™¹è†œä½äºç³å­”åéƒ¨ï¼Œç³å­”çš„æ”¾å¤§ç¼©å°å°±ç±»ä¼¼è™¹è†œæ¶ˆé™¤è½¬åœºä¸­çš„åœ†åœˆç¼©æ”¾ã€‚</li>
</ul>
<h2 id="è™¹è†œæ¶ˆé™¤è½¬åœºçš„åº”ç”¨åœºæ™¯"><a href="#è™¹è†œæ¶ˆé™¤è½¬åœºçš„åº”ç”¨åœºæ™¯" class="headerlink" title="è™¹è†œæ¶ˆé™¤è½¬åœºçš„åº”ç”¨åœºæ™¯"></a>è™¹è†œæ¶ˆé™¤è½¬åœºçš„åº”ç”¨åœºæ™¯</h2><p>è§¦å±é¡µä½œä¸ºä¸€ç§ç±»å¹»ç¯ç‰‡çš„å±•ç¤ºæ‰‹æ®µï¼Œå¸‚é¢ä¸Šçš„ä½œå“ä¸­ä¹Ÿå‡ ä¹æ¶µç›–äº†ä¸Šé¢æåˆ°çš„è½¬åœºæ–¹å¼ï¼Œé™¤äº†é‚£äº›è¾ƒä¸ºé«˜çº§çš„éœ€è¦ä¸éŸ³é¢‘é…åˆç´§å¯†çš„è½¬åœºæ–¹å¼ã€‚ä½†è™¹è†œè½¬åœºå´å¾ˆå°‘è§ï¼Œå—¯ï¼Œé˜¿å©†ä¸»æ­¤ç”Ÿæœªè§ã€‚</p>
<p>è™½è¯´è¿™ç§ç®€é™‹çš„è½¬åœºåœ¨ç°ä»£å½±è§†ä½œå“ä¸­å·²ç»é”€å£°åŒ¿è¿¹ï¼Œä½†å¹¶ä¸å¦¨ç¢å®ƒåœ¨è§¦å±é¡µä¸­çš„åº”ç”¨ã€‚ä½¿ç”¨è¿™ç§è½¬åœºï¼Œè¯´å¥½å¬äº†å«å¤å¤ï¼Œè¯´ä¸å¥½å¬äº†å«å·æ‡’ã€‚å› ä¸ºä¸€æ—¦ä½¿ç”¨äº†è¿™ä¸­ä¸€é»‘åˆ°åº•çš„è½¬åœºï¼Œä½ å®Œå…¨ä¸ç”¨è€ƒè™‘å‰åä¸¤å±ä¹‹é—´æœ‰ä½•è§†è§‰è”ç³»ï¼Œè¿™ä¸ªå…ƒç´ æ€ä¹ˆæ¶ˆå¤±é‚£ä¸ªå…ƒç´ æ€ä¹ˆå‡ºç°ï¼Œç®€ç›´æ˜¯æ‡’ç™Œæ‚£è€…çš„ç¦éŸ³ã€‚</p>
<p>æ ¹æ®è™¹è†œè½¬åœºçš„å†å²ç‰¹ç‚¹ä¸è§†è§‰ç‰¹ç‚¹ï¼Œè™¹è†œè½¬åœºçš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¤å¤é£ </li>
<li>ä¸­å¿ƒç‚¹æ˜ç¡® </li>
<li>å…¶ä»–è½¬åœºæ€§èƒ½è¿‡å·® </li>
</ul>
<h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><p>éƒ½è¯´æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼Œæ¥ä¸‹æ¥å’±ä»¬å°±å…ˆæ¥æ¢è®¨ä¸€ä¸‹å®ç°è™¹è†œæ¶ˆé™¤è½¬åœºçš„æ€è·¯ï¼ˆæ˜æ˜æ˜¯ä»£ç å†™å¾—çƒ‚ä¸æ•¢æ”¾å‡ºæ¥ï¼‰ã€‚<br>åœ¨å„å¤§åˆ¶å›¾å·¥å…·ä¸­ï¼Œå¦‚æœä½ æ˜¯é«˜çº§ç©å®¶ï¼Œä½ ä¸€å®šå¯¹è¿™ä¸ªå›¾æ ‡ä¸é™Œç”Ÿã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/substract.png" alt="img"></p>
<p>è¿™ä¸ªå›¾æ ‡åœ¨å¤§éƒ¨åˆ†çš„åˆ¶å›¾è½¯ä»¶ä¸­éƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œå‡å»ä¸Šå±‚å½¢çŠ¶ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/substract_compare.png" alt="img"></p>
<p>è¿™ä¸ªåŠŸèƒ½æ˜¯å®ç°è™¹è†œæ¶ˆé™¤è½¬åœºä¹ƒè‡³æ‰€æœ‰æ¶ˆé™¤è½¬åœºçš„åŸºæœ¬æ€è·¯ã€‚é¡ºç€è¿™æ¡è·¯ï¼Œå¯ä»¥è®¾æƒ³å‡ºæ— æ•°ç§å®ç°æŠ€æœ¯ï¼š</p>
<ul>
<li>png+CSS3ï¼ˆé€šè¿‡æ”¾å¤§ç¼©å°å¸¦æœ‰é€æ˜åœ†åœˆçš„pngå›¾å®ç°ï¼Œç¼ºç‚¹ï¼šå‰©ä½™åŒºåŸŸè¡¥å…¨è¾ƒè´¹äº‹ï¼‰</li>
<li>SVG/clip-pathï¼ˆé€šè¿‡æ”¹å˜çŸ¢é‡å›¾è·¯å¾„ï¼Œç»˜åˆ¶å‡ºå˜åŒ–ä¸­çš„é»‘å¹•åŠ åœ†åœˆï¼Œç¼ºç‚¹ï¼šç®—æ³•è¾ƒå¤æ‚ï¼Œä¸å¤Ÿç›´è§‚ï¼‰</li>
<li>borderï¼‹border-radiusï¼‹CSS3ï¼ˆé€šè¿‡æ”¹å˜å…ƒç´ å®½åº¦ä¸è¾¹æ¡†å®½åº¦å®ç°ï¼Œç¼ºç‚¹ï¼šé€ æˆé¡µé¢é‡ç»˜ï¼Œå½±å“æ€§èƒ½ï¼‰</li>
<li>Canvasï¼ˆglobalCompositeOperationå±æ€§å®Œç¾åŒæ­¥åˆ¶å›¾è½¯ä»¶ä¸­çš„å‡å»ä¸Šå±‚å½¢çŠ¶åŠŸèƒ½ï¼Œç”šè‡³è¿˜æœ‰å„ç§å¥‡å½¢æ€ªçŠ¶çš„å…¶å®ƒåŠŸèƒ½ï¼Œå…·ä½“å‚è§<a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing" target="_blank" rel="external">Compositing and clipping</a>ï¼‰</li>
</ul>
<p>æ˜¾ç„¶ï¼ŒCanvasçš„globalCompositeOperationå±æ€§æœ€æ¥è¿‘æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<h2 id="globalCompositeOperation"><a href="#globalCompositeOperation" class="headerlink" title="globalCompositeOperation"></a>globalCompositeOperation</h2><p>è¿™ä¸ªå±æ€§æ‹¥æœ‰11ä¸ªå€¼ï¼Œä¸ºçŸ¢é‡å›¾ç»˜åˆ¶æ‰“å¼€äº†æ— æ•°æ‰‡å¤§é—¨ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/mdn_globalcompsiteoperation.png" alt="img"><br><img src="//img.aotu.io/lyxuncle/iriswipe/destination-out.png" alt="img"></p>
<p>æœ‰äº†è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼Œæå‡ºè™¹è†œæ¶ˆé™¤è½¬åœºç®€ç›´æ˜¯åˆ†åˆ†é’Ÿçš„äº‹ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬æ¥æ’¸ä¸€æ’¸æˆ‘ä»¬éœ€è¦å“ªäº›å€¼æ¥è¿›è¡Œä¸€ä¸ªè™¹è†œæ¶ˆé™¤è½¬åœºçš„ç»˜åˆ¶ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/precious_sketch.png" alt="img"></p>
<ul>
<li>æ¥è‡ªé˜¿å©†ä¸»çš„çï¼ˆchouï¼‰è´µï¼ˆlouï¼‰æ‰‹ç¨¿</li>
</ul>
<p><strong>é¦–å…ˆæ˜¯ç”»å¸ƒå°ºå¯¸ã€‚</strong>è¿™å°±ä¸ç”¨å¤šè¯´äº†ï¼Œæ²¡æœ‰ç”»å¸ƒå†å¤§çš„è™¹è†œä¹Ÿä»€ä¹ˆéƒ½ä¸æ˜¯ã€‚</p>
<p><strong>æ¥ç€ç¡®å®šè™¹è†œçš„åœ†å¿ƒä½ç½®ã€‚</strong>è¿™ç›´æ¥å†³å®šç€è½¬åœºä¸­åœ†åœˆçš„æœ€å¤§åŠå¾„å€¼ã€‚èªæ˜çš„ä½ ä¸€å®šçŸ¥é“è¿™ä¸ªå€¼æ€ä¹ˆç®—ï¼ˆå‹¾è‚¡å®šç†ï¼‰ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/Pythagorean_theorem.png" alt="img"></p>
<ul>
<li>ä»–ä»¬è¯´æ”¾ä¸ªå…¬å¼ä¼šé«˜å¤§ä¸Šä¸€ç‚¹ã€‚</li>
</ul>
<p><strong>ç„¶åå°±æ˜¯è™¹è†œçš„æ”¶ç¼©é€Ÿåº¦ã€‚</strong></p>
<p>æœ‰äº†è¿™å‡ ä¸ªå€¼ï¼Œå°±å¯ä»¥å«æ¥RAFä¸€èµ·æä¸€æäº†ã€‚</p>
<p>æ•´ä½“ä»£ç æ€è·¯å°±æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯ç¼©å°åœ†åœˆï¼Œåˆ™åŠå¾„ç¼©å°è‡³0ç»“æŸã€‚</li>
<li>å¦‚æœæ˜¯æ”¾å¤§åœ†åœˆï¼Œåˆ™åŠå¾„å¢åŠ è‡³æœ€å¤§åŠå¾„ç»“æŸã€‚</li>
<li>å˜åŒ–é€Ÿåº¦é€šè¿‡æ¯å¸§åŠå¾„å˜åŒ–çš„å·®å€¼å¤§å°æ¥æ§åˆ¶ã€‚</li>
</ul>
<p>ç”±äºè§¦å±é¡µçš„è½¬åœºç›¸æ¯”åŠ¨ç”»çŸ­ç‰‡ä¸­å‡ºç°çš„é¢‘ç‡è¦é«˜å¾—å¤šï¼Œä¸”è§¦å±é¡µåŸºæœ¬æ²¡æœ‰é»‘å±é€€åœºçš„åœºæ™¯éœ€æ±‚ï¼Œå› æ­¤å•çº¯çš„æ”¾å¤§æˆ–è€…ç¼©å°åœ†åœˆæ˜¾ç„¶ä¸å¤ªç°å®ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ç»˜åˆ¶ç”»å¸ƒçš„æ–¹æ³•ä¸­åŠ å…¥ä¸€ä¸ªæ ‡å¿—ç¬¦ï¼Œç”¨äºåˆ¤å®šæ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªè½¬åœºï¼Œå¦‚æœæœ‰ï¼Œåˆ™è®¾ä¸º1ï¼Œå¹¶åœ¨ç¬¬4ä¸ªå‚æ•°ä¼ å…¥ä¸‹ä¸€ä¸ªè½¬åœºçš„åœ†å¿ƒä½ç½®ä»¥åŠè®¡ç®—å¥½çš„æœ€å¤§åŠå¾„ï¼ˆé¿å…æ¯æ¬¡è¿­ä»£éƒ½è®¡ç®—ä¸€æ¬¡ï¼‰ã€‚</p>
<p>å…·ä½“ä»£ç å‚è§<a href="https://github.com/lyxuncle/iriswipe" target="_blank" rel="external">https://github.com/lyxuncle/iriswipe</a></p>
<p>å¥½å•¦ï¼Œå¥åº·åˆå«ç”Ÿçš„è™¹è†œæ¶ˆé™¤è½¬åœºå°±å®Œæˆå•¦ï¼Œæ”¾åˆ°éœ€æ±‚é‡Œå°±æ˜¯è¿™æ ·å“’ï½</p>
<p><img src="//img.aotu.io/lyxuncle/iriswipe/iris_mobi.gif" alt="img"></p>
<ul>
<li>çº¿ä¸Šåœ°å€ï¼š<a href="http://jdc.jd.com/fd/h5/xin/index/index.html" target="_blank" rel="external">æ–°é€šè·¯äº‹ä¸šéƒ¨æ‹›è˜</a></li>
</ul>
<p>æœ€åï¼ŒæŒ‰ç…§æƒ¯ä¾‹è¦è£…é€¼ï¼Œæ”¾ä¸Šè€ƒæ®è¿‡ç¨‹ä¸­çœ‹åˆ°çš„ä¸€å¥è¯ï¼Œå¹²äº†è¿™æ¯é¸¡æ±¤ï¼š</p>
<blockquote>
<p>Fades, wipes, cuts and dissolves are always great tools for telling stories on video, but true video artists use editing techniques that cannot be selected from a pull-down menu.<br>    by Don Dollins in <a href="http://www.videomaker.com/article/c3/7998-computer-editing-split-man" target="_blank" rel="external">Computer Editing: Split Man</a></p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><p><a href="https://en.wikipedia.org/wiki/Film_transition" target="_blank" rel="external">Transition</a>ï¼Œç»´åŸºç™¾ç§‘<br><a href="https://en.wikipedia.org/wiki/Wipe_(transition" target="_blank" rel="external">Wipe (transition)</a>)ï¼Œç»´åŸºç™¾ç§‘<br><a href="http://www.videomaker.com/article/c3/7998-computer-editing-split-man" target="_blank" rel="external">COMPUTER EDITING: SPLIT MAN</a>ï¼ŒDon Collins<br><a href="https://vimeo.com/blog/post/j-cuts-l-cuts" target="_blank" rel="external">J-Cuts &amp; L-Cuts</a>ï¼ŒCameron Christopher<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing" target="_blank" rel="external">Compositing and clipping</a>ï¼ŒMDN<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation" target="_blank" rel="external">CanvasRenderingContext2D.globalCompositeOperation</a>ï¼ŒMDN</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ä¸ªç”¨ä»£ç å®ç°å½±è§†è½¬åœºæ•ˆæœçš„è„‘æ´ä¹‹ä½œã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Canvas" scheme="https://aotu.io/tags/Canvas/"/>
    
      <category term="è½¬åœº" scheme="https://aotu.io/tags/%E8%BD%AC%E5%9C%BA/"/>
    
      <category term="è§¦å±é¡µè½¬åœº" scheme="https://aotu.io/tags/%E8%A7%A6%E5%B1%8F%E9%A1%B5%E8%BD%AC%E5%9C%BA/"/>
    
      <category term="æ¶ˆé™¤è½¬åœº" scheme="https://aotu.io/tags/%E6%B6%88%E9%99%A4%E8%BD%AC%E5%9C%BA/"/>
    
      <category term="è™¹è†œ" scheme="https://aotu.io/tags/%E8%99%B9%E8%86%9C/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ä¼˜åŒ–å®è·µæ€»ç»“</title>
    <link href="https://aotu.io/notes/2016/04/12/jcloud-opt/"/>
    <id>https://aotu.io/notes/2016/04/12/jcloud-opt/</id>
    <published>2016-04-12T07:50:35.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<p>è®°å¾—å‰ç™¾åº¦å·¥ç¨‹å¸ˆå¼ äº‘é¾™è¯´è¿‡ï¼Œé¡µé¢å‰ç«¯ä¼˜åŒ–é—®é¢˜ç»å¯¹ä¸ä»…ä»…æ˜¯ä¸ºé¡µé¢æé€Ÿçš„é—®é¢˜ï¼Œæ›´æ˜¯å·¥ç¨‹çš„é—®é¢˜ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ã€Š<a href="https://github.com/fouber/blog/issues/3" target="_blank" rel="external">å‰ç«¯å·¥ç¨‹ä¸æ€§èƒ½ä¼˜åŒ–</a>ã€‹ã€‚é‡Œé¢æœ‰æåˆ°æ ¹æ®é›…è™14æ¡ä¼˜åŒ–åŸåˆ™ï¼Œã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹ä»¥åŠã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾è¿›é˜¶æŒ‡å—ã€‹ä¸­æåˆ°çš„ä¼˜åŒ–ç‚¹æ¢³ç†å‡ºæ¥çš„ä¼˜åŒ–æ–¹å‘ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_31.png" alt="img"></p>
<p>å¼ äº‘é¾™å…ˆç”ŸæåŠåˆ°çš„ä¼˜åŒ–æ–¹å‘ä»æå‡ºåˆ°ç°åœ¨è™½å·²ç›¸éš”ä¸¤å¹´æ—¶é—´ï¼Œå‰ç«¯æŠ€æœ¯ä¹Ÿåœ¨é£é€Ÿå‘å±•ï¼Œä½†å…¶æåˆ°çš„å·¥ç¨‹åŒ–æ€æƒ³ä»æ˜¯å‰ç«¯ä¼˜åŒ–çš„ä¸€ä¸ªå¤§æ–¹å‘ï¼Œäº¦æœ‰å¾ˆå¤§çš„æŒ‡å¯¼æ„ä¹‰ã€‚</p>
<p>å½“ç„¶è¿™æ˜¯å¦å¤–æ›´å¤§çš„è¯é¢˜äº†ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯å°†æœ¬æ¬¡çš„ä¼˜åŒ–ç‚¹æŒ‰ç…§èŒå¦¹å­æš–æš–å†™çš„ã€Š<a href="http://aotu.io/notes/2016/03/16/optimization/#comments">å‰ç«¯ä¼˜åŒ–ä¸å®Œå…¨æŒ‡å—</a>ã€‹ä¸€ä¸€åˆ—å‡ºï¼ˆå½“ç„¶å¹¶æ²¡æœ‰é‚£ä¹ˆå¤šï¼Œå‰ç«¯ä¼˜åŒ–æ°¸è¿œå†™ä¸å®Œï¼Œå†™ä¸å®Œï¼š- Oï¼‰ï¼Œè€Œæ˜¯<strong>é‡ç‚¹ç»“åˆé¡¹ç›®æ€»ç»“</strong>è¿™ä¸€æ¬¡ä¼˜åŒ–ä¸­<strong>å¦‚ä½•å¯»æ‰¾ä¼˜åŒ–ç‚¹</strong>ä»¥åŠ<strong>æ”¶ç›Šæ¯”è¾ƒå¤§çš„å¸¸è§æ–¹æ³•</strong>ï¼Œå¸Œæœ›å¯ä»¥å¯¹é‡åˆ°ç›¸ä¼¼é—®é¢˜çš„åŒå­¦æœ‰å¸®åŠ©ï¼Œå‰ç«¯å¤§ç¥å¯è½»è½»æ·¡ç¬‘è€Œè¿‡ã€‚</p>
<h2 id="é«˜æ¸…å›¾é€‚é…ä¼˜åŒ–"><a href="#é«˜æ¸…å›¾é€‚é…ä¼˜åŒ–" class="headerlink" title="é«˜æ¸…å›¾é€‚é…ä¼˜åŒ–"></a>é«˜æ¸…å›¾é€‚é…ä¼˜åŒ–</h2><p>æˆ‘ä»¬æ‰€è¯´çš„é«˜æ¸…å›¾ä¸€èˆ¬æ˜¯æŒ‡è‡³å°‘å…·æœ‰ Retina å±çº§åˆ«ç²¾åº¦çš„å›¾ç‰‡ï¼Œå°±æ˜¯å¹³æ—¶æ‰€è¯´çš„ã€2xã€å›¾ã€‚å¯¹äºé«˜æ¸…å›¾çš„é€‚é…ï¼Œä¸€èˆ¬ä¼šæ ¹æ®å›¾ç‰‡ç‰¹ç‚¹ä»¥åŠé¡¹ç›®å®é™…æƒ…å†µå»åˆ¶å®šé€‚é…æ–¹æ¡ˆã€‚</p>
<h3 id="çº¯è‰²å›¾"><a href="#çº¯è‰²å›¾" class="headerlink" title="çº¯è‰²å›¾"></a>çº¯è‰²å›¾</h3><p>çº¯è‰²å›¾ä¸€èˆ¬åº”ç”¨åˆ°è£…é¥°æ€§çš„å° iconï¼Œå¦‚ä¾§å¯¼èˆªçš„æ ‡é¢˜ iconï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_1.jpg" alt="img"> </p>
<p>æ­¤ç±»å›¾æ ‡ç”±å•è‰²ç»„æˆï¼Œå¯ä»¥æ ¹æ®ä¸€å®šçš„ç»˜åˆ¶è§„åˆ™åˆ¶æˆ iconfont å›¾æ ‡ï¼Œiconfont çš„å›¾æ ‡å…·æœ‰çŸ¢é‡æ€§ï¼Œå…¶å¤§å°å’Œé¢œè‰²å¯ä»¥éƒ½å¯ä»¥é€šè¿‡æ ·å¼æ¥æ§åˆ¶ã€‚</p>
<p>æ–°ç‰ˆé¦–é¡µå‡ºç°äº† 33 ä¸ªå•è‰²å›¾æ ‡ï¼Œè¿™äº›å›¾æ ‡å¤ç”¨æ€§å¾ˆå¼ºï¼ŒåŒä¸€ä¸ªå›¾æ ‡åœ¨ä¸åŒé¡µé¢éƒ½æœ‰å‡ºç°ï¼Œè€Œä¸”åŒä¸€ä¸ªå›¾æ ‡è¿˜æœ‰ä¸ä¸€æ ·çš„å°ºå¯¸ï¼Œå¦‚æœç”¨ä¼ ç»Ÿæ–¹æ³•åšæˆå›¾ç‰‡çš„è¯å›¾ç‰‡æ•°é‡ä¼šå¾ˆå¤šï¼Œå³ä½¿å…¨éƒ¨åˆå¹¶æˆ sprite å›¾ï¼Œå›¾ç‰‡çš„ K æ•°ä¹Ÿä¼šå¾ˆå¤§ï¼Œè€Œä¸”åæœŸå¦‚æœæœ‰ä¿®æ”¹çš„è¯è¿˜å¾—é‡æ–°åˆå¹¶ sprite å›¾ï¼Œå› æ­¤è¿™æ¬¡é¦–é¡µæ”¹ç‰ˆæ‰€æœ‰çš„çº¯è‰²å›¾æ ‡çš„é«˜æ¸…é€‚é…å…¨éƒ¨ä½¿ç”¨ iconfont å›¾æ ‡ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_4.jpg" alt="img"> </p>
<h4 id="ICONFONTå›¾æ ‡ç®¡ç†"><a href="#ICONFONTå›¾æ ‡ç®¡ç†" class="headerlink" title="ICONFONTå›¾æ ‡ç®¡ç†"></a>ICONFONTå›¾æ ‡ç®¡ç†</h4><p>æ”¹ç‰ˆæ‰€ç”¨åˆ°çš„ ICONFONT å›¾æ ‡ç”Ÿæˆä»¥åŠç®¡ç†é€‰æ‹©äº†ã€<a href="http://iconfont.cn/" target="_blank" rel="external">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</a>ã€çº¿ä¸ŠæœåŠ¡ï¼Œåœ¨ä¸Šé¢é€šè¿‡ä¸Šä¼ å›¾æ ‡çš„ SVG æ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„å­—ä½“æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ ¹æ®å›¾æ ‡åˆ†é¡¹ç›®ç®¡ç†ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_7.jpg" alt="img"></p>
<p>å›¾æ ‡ç”Ÿæˆåï¼Œè¯¥æœåŠ¡è¿˜ä¼šè‡ªåŠ¨æ‰“åŒ…å¥½æ‰€éœ€æ–‡ä»¶ï¼Œå¹¶åˆ¶æˆ DEMO ç½‘é¡µï¼Œä¾›æœ¬åœ°é¢„è§ˆæŸ¥æ‰¾å›¾æ ‡å¯¹åº”çš„å­—ä½“ç¼–ç ä»¥åŠä½¿ç”¨æ–¹æ³•ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_8.png" alt="img"></p>
<p>ç›¸ä¿¡å‰ç«¯çš„åŒå­¦å¾ˆæ—©å°±ä½¿ç”¨è¿‡ ICONFONT æœåŠ¡ï¼Œç¬”è€…è¡·å¿ƒæ„Ÿè°¢æä¾› ICONFONT æœåŠ¡çš„ <a href="http://thx.github.io/" target="_blank" rel="external">THX</a> ç»„ç»‡ï¼Œé™¤äº† ICONFONT æœåŠ¡ï¼ŒTHX è¿˜æä¾›äº†ä¸å°‘ä¸šç•Œè‰¯å¿ƒçš„å‰ç«¯ç²¾å“å·¥å…·æœåŠ¡ï¼Œæ„Ÿè°¢ä»–ä»¬ä¸ºä¸šç•Œä½œå‡ºçš„è´¡çŒ®ã€‚</p>
<h3 id="éçº¯è‰²å›¾"><a href="#éçº¯è‰²å›¾" class="headerlink" title="éçº¯è‰²å›¾"></a>éçº¯è‰²å›¾</h3><p>éçº¯è‰²å›¾é€šå¸¸ç”¨ã€2Xã€å›¾é€‚é…ï¼Œé€‚é…æ–¹æ¡ˆå¯ä»¥æœ‰å¾ˆå¤šé€‰æ‹©ï¼šåª’ä½“æŸ¥è¯¢ã€srcsetå±æ€§ã€image-setå±æ€§ã€è„šæœ¬æ§åˆ¶ã€‚</p>
<p>åª’ä½“æŸ¥è¯¢ã€srcsetå±æ€§ å’Œ image-setå±æ€§æˆåŠŸåŒ¹é…çš„åŸºæœ¬æ˜¯é«˜ç«¯æµè§ˆå™¨ï¼Œå…¼å®¹æ€§ç•¥å·®ï¼Œè„šæœ¬æ§åˆ¶å…¼å®¹æ€§æ›´ä½³ï¼Œé¡¹ç›®å…·ä½“ç”¨å“ªä¸€ç§è¦çœ‹ã€å›½æƒ…ã€äº†ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_32.png" alt="img"> </p>
<p>ä¸Šå›¾æ˜¯æˆ‘å›½PCç«¯æ“ä½œç³»ç»Ÿå¸‚åœºä»½é¢çš„å¤§æ¦‚åˆ†å¸ƒæƒ…å†µï¼Œå¯ä»¥çœ‹å‡º 95% ä»¥ä¸Šçš„ç”¨æˆ·éƒ½æ˜¯ä½¿ç”¨ Windows ç³»ç»Ÿçš„ï¼Œä½¿ç”¨ Windows ç³»ç»Ÿçš„ç”¨æˆ·è®¾å¤‡å±å¹•å¤§éƒ¨åˆ†éƒ½æ˜¯æ™®æ¸…å±ï¼Œè€Œä½¿ç”¨é«˜æ¸…å±çš„ç”¨æˆ·åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨ Mac OS ç³»ç»Ÿï¼ŒMac OS ç³»ç»Ÿçš„æµè§ˆå™¨åˆä»¥ã€é«˜å¯Œå¸…ã€Chrome å’Œ Safari ä¸ºä¸»ï¼Œå› æ­¤åªè€ƒè™‘é€‚é… Mac OS è®¾å¤‡ï¼Œæœ€ç»ˆé€‰æ‹©æ¯”åª’ä½“æŸ¥è¯¢æ›´ä¸ºæ–¹ä¾¿çš„ã€srcsetå±æ€§ã€å’Œã€image-setå±æ€§ã€æ–¹æ¡ˆï¼šå†…å®¹å›¾ä½¿ç”¨ srcset å±æ€§é€‚é…ï¼ŒèƒŒæ™¯å›¾ä½¿ç”¨ image-set å±æ€§é€‚é…é«˜æ¸…å›¾ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/bg_eco_v2_@1x.png"</span> <span class="attr">srcset</span>=<span class="string">"images/bg_eco_v2_@1x.png 1x, images/bg_eco_v2_@2x.png 2x"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.chain_item_icon</span>&#123;</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-image-set</span>(url(<span class="string">"images/bg_chains_@1x.png"</span>) <span class="number">1</span>x, <span class="built_in">url</span>(<span class="string">"images/bg_chains_@2x.png"</span>) <span class="number">2</span>x);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">image-set</span>(url(<span class="string">"images/bg_chains_@1x.png"</span>) <span class="number">1</span>x, <span class="built_in">url</span>(<span class="string">"images/bg_chains_@2x.png"</span>) <span class="number">2</span>x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è®¾è®¡ç±»å­—ä½“"><a href="#è®¾è®¡ç±»å­—ä½“" class="headerlink" title="è®¾è®¡ç±»å­—ä½“"></a>è®¾è®¡ç±»å­—ä½“</h3><p>æ–°ç‰ˆäº¬ä¸œäº‘å‡ºç°äº†å¾ˆå¤šè®¾è®¡ç±»å­—ä½“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„éç³»ç»Ÿå­—ä½“ï¼Œå¦‚æ–°ç‰ˆäº¬ä¸œäº‘é¦–é¡µç‰ˆå—æ ‡é¢˜ç”¨çš„å­—ä½“ â€”-ã€æ–¹æ­£å…°äº­è¶…ç»†é»‘ä½“ã€</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_9.png" alt="img"></p>
<p>å¯¹äºè®¾è®¡ç±»å­—ä½“ï¼Œå‰ç«¯å’Œè§†è§‰ä¼šè¾¾æˆå…±è¯†ä¸ä¼šå¤§é¢ç§¯ä½¿ç”¨ï¼Œå› ä¸ºè¯¥ç±»å­—ä½“çš„å®ç°åªèƒ½ç”¨å›¾ç‰‡æˆ–é€šè¿‡æ ·å¼ <code>@font-face</code> å±æ€§å»å®ç°ï¼š</p>
<ul>
<li><p><strong>å›¾ç‰‡æ–¹æ¡ˆï¼š</strong>è™½ç„¶å¯ä»¥é«˜ç²¾åº¦è¿˜åŸï¼Œå…¼å®¹æ€§å¼ºï¼Œä½†æ˜¯æ¯æ”¹åŠ¨ä¸€å¤„åœ°æ–¹éƒ½éœ€è¦æ¢å›¾ï¼Œä¸æ–¹ä¾¿ç»´æŠ¤ï¼Œå†…å®¹æ‰©å±•æ€§å·®ï¼Œè€Œä¸”å¦‚æœè¦é€‚é…é«˜æ¸…è®¾å¤‡ï¼Œåˆå¾—å¤šä¸€å¥—å›¾ã€‚</p>
</li>
<li><p><strong><code>@font-face</code> å±æ€§æ–¹æ¡ˆï¼š</strong>å­—ä½“å…·æœ‰çŸ¢é‡æ€§ï¼Œé«˜æ¸…è®¾å¤‡å¯ä»¥è½»æ¾é€‚é…ï¼Œå†…å®¹æ‰©å±•æ€§å¼ºï¼Œä½†æ˜¯ä¸åŒçš„æµè§ˆå™¨å­˜åœ¨æ¸²æŸ“çš„å·®å¼‚ï¼Œå…¼å®¹æ€§ç•¥å¼±ï¼Œ<code>@font-face</code> å­—ä½“æ–‡ä»¶å¤§å°ä¸€èˆ¬åˆæ˜¯ M çº§åˆ«ï¼Œä¼šä¸åŒç¨‹åº¦å½±å“é¡µé¢åŠ è½½ä½“éªŒã€‚</p>
</li>
</ul>
<p>å¦‚æœéç³»ç»Ÿå­—ä½“åº”ç”¨çš„åœ°æ–¹åªæœ‰å‡ ä¸ªæ ‡é¢˜ï¼Œè€Œä¸”ä¸å¸¸æ”¹åŠ¨çš„è¯ï¼Œç”¨å›¾ç‰‡æ–¹æ¡ˆè¾ƒä¼˜ï¼Œä½†æ˜¯æ–°ç‰ˆäº¬ä¸œäº‘åœ¨å…¶å®ƒé¢‘é“çš„é¦–é¡µä¹Ÿä¼šåº”ç”¨åˆ°ï¼Œå†…å®¹è¾ƒå¤šï¼Œè€Œä¸”è¦é€‚é…é«˜æ¸…å›¾ï¼Œæ‰€ä»¥å›¾ç‰‡æ–¹æ¡ˆå¹¶ä¸é€‚ç”¨ï¼Œ<code>@font-face</code> å±æ€§æ–¹æ¡ˆæ›´åˆé€‚ã€‚</p>
<p>é’ˆå¯¹ ã€<code>@font-face</code> å±æ€§æ–¹æ¡ˆã€<strong>æ–‡ä»¶ä½“ç§¯å¤§</strong>å’Œ<strong>æµè§ˆå™¨æ¸²æŸ“å·®å¼‚</strong>çš„ä¸¤ä¸ªä¸è¶³ä¹‹å¤„ï¼Œé‡‡å–äº†ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯<strong>æµè§ˆå™¨çš„æ¸²æŸ“å·®å¼‚åœ¨è§†è§‰å¯ä»¥æ¥å—çš„èŒƒå›´ä¸‹ï¼ŒåªæŠ½å–è¦ç”¨åˆ°çš„å­—ä½“ç”Ÿæˆä½“ç§¯ç›¸å¯¹è¾ƒå°çš„å­—ä½“æ–‡ä»¶ã€‚</strong></p>
<p>Junmer å‡ºå“çš„ <a href="http://ecomfe.github.io/fontmin/tw#feature" target="_blank" rel="external">Fontmin</a> å·¥å…·å¯ä»¥å¤§å¤§æ»¡è¶³è¿™ä¸ªéœ€æ±‚ï¼Œåªéœ€è¦å°†ç”¨åˆ°äº†å­—ä½“æºä»¥åŠéœ€è¦ç”Ÿæˆçš„æ–‡å­—å†…å®¹åŠ å…¥åˆ°å·¥å…·ä¸­ï¼Œå°±å¯ä»¥ç”Ÿæˆç›¸åº”çš„å­—ä½“æ–‡ä»¶ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_10.png" alt="img"></p>
<p>åŸæ¥ 2MB çš„å­—ä½“</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_12.png" alt="img"></p>
<p>ç”Ÿæˆçš„å­—ä½“æ–‡ä»¶åªæœ‰ 11KBï¼Œå­—ä½“æ–‡ä»¶ä½“ç§¯å‡å°‘è¾¾åˆ°äº† 99%</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_11.png" alt="img"></p>
<h2 id="å›¾ç‰‡èµ„æºä¼˜åŒ–"><a href="#å›¾ç‰‡èµ„æºä¼˜åŒ–" class="headerlink" title="å›¾ç‰‡èµ„æºä¼˜åŒ–"></a>å›¾ç‰‡èµ„æºä¼˜åŒ–</h2><h3 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h3><h4 id="é¢å¤–è¯·æ±‚æ•°è¿‡å¤š"><a href="#é¢å¤–è¯·æ±‚æ•°è¿‡å¤š" class="headerlink" title="é¢å¤–è¯·æ±‚æ•°è¿‡å¤š"></a>é¢å¤–è¯·æ±‚æ•°è¿‡å¤š</h4><p>æ—§ç‰ˆé¦–é¡µåŠ è½½çš„æ—¶å€™ï¼Œä¸€å…±æœ‰40ä¸ªè¯·æ±‚ï¼Œå…¶ä¸­å›¾ç‰‡çš„è¯·æ±‚å°±æœ‰ 31 ä¸ªï¼Œå æ€»è¯·æ±‚æ•°çš„ 77%</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_14.png" alt="img"></p>
<p>æœ‰äº›å¯ä»¥åˆå¹¶çš„å›¾ç‰‡å¹¶æ²¡æœ‰åšå¤„ç†ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_16.png" alt="img"> </p>
<p>å…¶ä¸­è‡³å°‘æœ‰ 11 å¼ å›¾ç‰‡æ˜¯å¯ä»¥åˆå¹¶æˆä¸€å¼ å›¾ç‰‡çš„ï¼Œä¹Ÿå°±æ˜¯è‡³å°‘å¤šäº† 27% çš„é¢å¤–è¯·æ±‚æ•°</p>
<h4 id="èµ„æºæµªè´¹"><a href="#èµ„æºæµªè´¹" class="headerlink" title="èµ„æºæµªè´¹"></a>èµ„æºæµªè´¹</h4><p>é¦–å±çš„å›¾ç‰‡èµ„æºåŠ è½½äº† 31ä¸ªï¼Œä½†å…¶å¯è§çš„å›¾ç‰‡åªæœ‰ 2 å¼ ï¼ŒåŠ è½½äº† 100% çš„å›¾ç‰‡èµ„æºï¼Œé¦–å±å›¾ç‰‡èµ„æºåˆ©ç”¨ç‡åªæœ‰ 6%</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_15.png" alt="img"></p>
<p>åªè¦ç”¨æˆ·æ²¡æœ‰å®Œå…¨æµè§ˆå®Œç½‘é¡µå°±è·³åˆ°å…¶å®ƒé¡µé¢çš„è¯ï¼Œéƒ½ä¼šé€ æˆèµ„æºæµªè´¹ã€‚</p>
<h4 id="å›¾ç‰‡åŠ è½½ä½“éªŒå·®"><a href="#å›¾ç‰‡åŠ è½½ä½“éªŒå·®" class="headerlink" title="å›¾ç‰‡åŠ è½½ä½“éªŒå·®"></a>å›¾ç‰‡åŠ è½½ä½“éªŒå·®</h4><p>é¦–å±è€—æ—¶è¾ƒé•¿çš„å¤§å›¾åŠ è½½è¿‡ç¨‹å¹¶æ²¡æœ‰åš Loadingå ä½å›¾ æç¤ºï¼Œæœ‰æœºä¼šå‡ºç°è½®æ’­å›¾åŒºåŸŸç©ºç™½æ—¶é—´è¿‡é•¿ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_17.png" alt="img"></p>
<p>ä¸Šå›¾æ˜¾ç¤ºé¡µé¢åŠ è½½ 1.8s åï¼ŒBanner èƒŒæ™¯å›¾è¿˜æ˜¯æ²¡æœ‰å‡ºæ¥ï¼Œè™½ç„¶ç½‘é€Ÿé£å¿«çš„ç”¨æˆ·æœ‰å¯èƒ½ä¸å‡ºç°è¿™ç§æƒ…å†µï¼Œä½†æ˜¯ä¸æ’é™¤ç½‘ç»œæ…¢çš„ç”¨æˆ·ä¼šç¢°ä¸Šã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå›¾ç‰‡åŠ è½½å¤±è´¥çš„æ—¶å€™ä¹Ÿæ²¡æœ‰åšå®¹é”™å¤„ç†ï¼Œå°±æœ‰æœºä¼šå‡ºç°å›¾ç‰‡åŠ è½½å¤±è´¥çš„ç³»ç»Ÿé»˜è®¤å›¾æ ‡æ ·å¼ï¼Œä¼šå½±å“é¡µé¢çš„ç¾è§‚æ€§ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_18.png" alt="img"> </p>
<h3 id="ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="ä¼˜åŒ–æ–¹æ¡ˆ"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h3><p>è™½ç„¶æ–°ç‰ˆé¦–é¡µçš„å›¾ç‰‡èµ„æºçš„æ’ç‰ˆå’Œå†…å®¹æœ‰æ‰€ä¸åŒï¼Œä½†è‡³å°‘å¯ä»¥é’ˆå¯¹æ—§ç‰ˆé¢å¤–è¯·æ±‚æ•°å¤šã€èµ„æºæµªè´¹ã€åŠ è½½ä½“éªŒå·®è¿™ä¸‰ä¸ªæ–¹å‘å»æ”¹è¿›ã€‚</p>
<h4 id="å‡å°‘é¢å¤–è¯·æ±‚æ•°"><a href="#å‡å°‘é¢å¤–è¯·æ±‚æ•°" class="headerlink" title="å‡å°‘é¢å¤–è¯·æ±‚æ•°"></a>å‡å°‘é¢å¤–è¯·æ±‚æ•°</h4><p>å‡å°‘å›¾ç‰‡é¢å¤–è¯·æ±‚æ•°ï¼Œæ”¶ç›Šæ¯”è¾ƒæ˜æ˜¾çš„ä¸€èˆ¬æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼šå›¾ç‰‡åˆå¹¶ã€iconfont å›¾æ ‡ã€Base64ï¼Œä¸‰ä¸ªæ–¹æ³•éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li><p>å›¾ç‰‡åˆå¹¶</p>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¼ºå¯ç¼“å­˜å¯æå‰åŠ è½½å¤šæ€å›¾å¯æå‡å›¾ç‰‡åŠ è½½æ˜¾ç¤ºä½“éªŒ</p>
<p>ç¼ºç‚¹ï¼šç»´æŠ¤æ€§å·®ã€åˆå¹¶å›¾ç‰‡ç±»å‹ä»¥åŠå¤§å°æ§åˆ¶é™åˆ¶é«˜ã€æœ‰å¯èƒ½é€ æˆèµ„æºæµªè´¹</p>
<p>é€‚åˆï¼šä¿®æ”¹æ›´æ–°å°‘çš„å¸¸é©»å‹ä½è‰²ä½çš„è£…é¥°å°å›¾</p>
</li>
<li><p>Iconfont</p>
<p>ä¼˜ç‚¹ï¼šå¯ç¼“å­˜çŸ¢é‡æ€§å¯æ§æ€§å¼º</p>
<p>ç¼ºç‚¹ï¼šå­˜åœ¨æµè§ˆå™¨æ¸²æŸ“å·®å¼‚æ€§ã€åªèƒ½çº¯è‰²ã€æ–‡ä»¶ä½“ç§¯ç•¥å¤§</p>
<p>é€‚åˆï¼šçº¯è‰²å›¾æ ‡</p>
</li>
<li><p>Base64</p>
<p>ä¼˜ç‚¹ï¼šæ— é¢å¤–è¯·æ±‚</p>
<p>ç¼ºç‚¹ï¼šä¸å¯ç¼“å­˜ã€å…¼å®¹æ€§å·®ã€ä»£ç å†—ä½™ã€å¯è¯»æ€§å·®ã€ç»´æŠ¤ä¸ä¾¿ã€CPUå†…å­˜è€—æŸå¤§</p>
<p>é€‚åˆï¼šä½“ç§¯å°å¤ç”¨ç‡ä½çš„èƒŒæ™¯è£…é¥°å›¾æ ‡</p>
</li>
</ul>
<p>æ–°ç‰ˆé¦–é¡µä¸€å…±æœ‰ 70 ä¸ªå›¾ç‰‡èµ„æºï¼Œå…¶ä¸­æœ‰ 49 ä¸ªæ˜¯çº¯è‰²å›¾æ ‡ï¼Œ16 ä¸ªæ˜¯ä½è‰²ä½éçº¯è‰²å›¾ï¼Œ5 ä¸ªæ˜¯é«˜è‰²ä½å›¾ã€‚</p>
<p>49 ä¸ªçº¯è‰²å›¾æ ‡å…¨éƒ¨ä½¿ç”¨äº† Iconfont æ–¹æ³•å¤„ç†ï¼Œ13 ä¸ªä½è‰²ä½éçº¯è‰²å›¾ä½¿ç”¨äº†åˆå¹¶æ–¹æ³•ï¼Œä¸€å…±æœ‰ 62 ä¸ªå›¾ç‰‡åšäº†å‡å°‘é¢å¤–è¯·æ±‚å¤„ç†ï¼Œæœ€ç»ˆå›¾ç‰‡èµ„æºè¯·æ±‚æ•°ä¸€å…±åªæœ‰ 14 ä¸ªï¼Œå…¶ä¸­çº¯è‰²å›¾çš„è¯·æ±‚æ•°å  2 ä¸ªï¼Œä½è‰²ä½éçº¯è‰²å›¾è¯·æ±‚æ•°å  6 ä¸ªï¼Œ<strong>å›¾ç‰‡æ€»è¯·æ±‚æ•°å‡å°‘äº† 80% ï¼Œå›¾ç‰‡åˆå¹¶å’Œ Iconfont çš„é¢å¤–è¯·æ±‚å¤„ç†ç‡åˆ†åˆ«è¾¾åˆ°äº† 56% å’Œ 96%</strong></p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_19.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ° Iconfont çš„é¢å¤–è¯·æ±‚å¤„ç†ç‡ç›¸å½“å‡ºè‰²ï¼Œå› ä¸ºé€‚åˆåº”ç”¨ä»–çš„å¯¹è±¡ç‰¹ç‚¹æ¯”è¾ƒç®€å•ï¼Œè€Œå›¾ç‰‡åˆå¹¶ä¼šå—åˆ°åˆå¹¶å›¾ç‰‡çš„æ ¼å¼ã€èµ„æºåˆ†å¸ƒã€æ¨¡å—åˆ†å¸ƒç­‰æƒ…å†µå½±å“ï¼Œå…¶é¢å¤–è¯·æ±‚å¤„ç†ç‡ä¼šç›¸å¯¹ä½äº Iconfontã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¼˜åŒ–å›¾ç‰‡é¢å¤–è¯·æ±‚çš„å°ç»“è®ºï¼š<strong>çº¯è‰²å›¾æ ‡ä¼˜å…ˆè€ƒè™‘ Iconfontï¼Œä½è‰²ä½éçº¯è‰²å›¾ç‰‡æ ¹æ®é¡¹ç›®å®é™…éœ€è¦æ¥åšåˆå¹¶ä¼˜åŒ–ï¼ŒBase64éç‰¹æ®Šå›¾ç‰‡ä¸ä½¿ç”¨</strong></p>
<h4 id="èµ„æºæŒ‰éœ€åŠ è½½"><a href="#èµ„æºæŒ‰éœ€åŠ è½½" class="headerlink" title="èµ„æºæŒ‰éœ€åŠ è½½"></a>èµ„æºæŒ‰éœ€åŠ è½½</h4><p>æ–°ç‰ˆé¦–é¡µéœ€è¦åŠ è½½çš„å›¾ç‰‡èµ„æºä¸€å…±æœ‰ 14ä¸ªï¼Œå…¶ä¸­é¦–å±çš„å›¾ç‰‡èµ„æºæœ‰ 8 ä¸ªï¼Œå¯è§å›¾ç‰‡æœ‰ 5 ä¸ªï¼Œå¦‚æœä¸ä½œå¤„ç†ï¼Œé‚£ä¹ˆé¦–å±å›¾ç‰‡èµ„æºçš„åˆ©ç”¨ç‡åªæœ‰ 35%</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_20.png" alt="img"></p>
<p>å¦‚æœè¿›è¡Œèµ„æºæŒ‰éœ€åŠ è½½ï¼Œåœ¨éé¦–å±çš„å›¾ç‰‡èµ„æºå®è¡Œæ‡’åŠ è½½ï¼Œå°†è½®æ’­å›¾ä¸å¯è§çš„ä¸¤å¼ å›¾ç‰‡åšè§¦å‘åŠ è½½å¤„ç†ï¼Œè¿™æ ·é¦–å±çš„åŠ è½½å›¾ç‰‡èµ„æºåªæœ‰ 8 ä¸ªï¼Œé¦–å±å›¾ç‰‡èµ„æºåˆ©ç”¨ç‡åˆ™å¯è¾¾åˆ° 60%ï¼Œæé«˜äº† 70% çš„å›¾ç‰‡èµ„æºåˆ©ç”¨ç‡ï¼Œ<strong>èµ„æºæŒ‰éœ€åŠ è½½ä¸å¤±ä¸ºä¸€ç§é¿å…èµ„æºæµªè´¹çš„æœ€æŒ‚å®è·µæ–¹æ³•</strong></p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_21.png" alt="img"></p>
<h4 id="å ä½æç¤ºå›¾æé«˜åŠ è½½ä½“éªŒ"><a href="#å ä½æç¤ºå›¾æé«˜åŠ è½½ä½“éªŒ" class="headerlink" title="å ä½æç¤ºå›¾æé«˜åŠ è½½ä½“éªŒ"></a>å ä½æç¤ºå›¾æé«˜åŠ è½½ä½“éªŒ</h4><p>å›¾ç‰‡åŠ è½½çš„æ—¶é—´é•¿çŸ­ç”±å¾ˆå¤šå› ç´ å†³å®šï¼Œå¦‚æœåŠ¡å™¨å“åº”æ—¶é—´ã€ç”¨æˆ·æ‰€ç”¨ç½‘ç»œå¸¦å®½ã€å›¾ç‰‡å¤§å°ç­‰ï¼Œä½†æ— è®ºæ˜¯å“ªä¸€ç§æƒ…å†µï¼Œæ€»æœ‰ä¸€ä¸ªç­‰å¾…çš„è¿‡ç¨‹ï¼Œåœ¨è¿™è¿‡ç¨‹æ€»ä¼šæœ‰ä¸€ä¸ªç©ºç™½æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯å å±é¢ç§¯æ¯”è¾ƒå¤§çš„é¦–å±è½®æ’­å¤§å›¾å’Œé‡‡å–æ‡’åŠ è½½çš„å›¾ç‰‡ï¼Œå³ä½¿å›¾ç‰‡ç©ºç™½æ—¶é—´å¾ˆçŸ­ï¼Œç”¨æˆ·ä¹Ÿä¼šæœ‰ä¸åŒç¨‹åº¦çš„æ„ŸçŸ¥ï¼Œä¼šç»™ç”¨æˆ·å¸¦æ¥ä¸€ç§å”çªæˆ–æ¼«é•¿ç­‰å¾…çš„æ„Ÿè§‰ï¼Œå¦‚æœåŠ è½½è¿‡ç¨‹ç»™å›¾ç‰‡åŠ ä¸Šä½“ç§¯æ¯”è¾ƒå°çš„å ä½æç¤ºå›¾ï¼Œåˆ™ä¼šè®©ç”¨æˆ·æœ‰ä¸€ä¸ªå›¾ç‰‡åŠ è½½é¢„çŸ¥ï¼Œå½“å›¾ç‰‡åŠ è½½å®Œæˆåå†å‘ˆç°ç»™ç”¨æˆ·çœ‹ï¼Œè¿™æ ·ç”¨æˆ·åœ¨å›¾ç‰‡åŠ è½½è¿‡ç¨‹ä¸­çœ‹åˆ°çš„éƒ½æ˜¯å®Œæ•´çš„å›¾ç‰‡</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_24.png" alt="img"></p>
<p>å½“å›¾ç‰‡åŠ è½½å¤±è´¥çš„æ—¶å€™ï¼Œå±•ç¤ºå ä½å›¾ï¼Œé¿å…ç³»ç»Ÿé»˜è®¤çš„å›¾ç‰‡åŠ è½½å¤±è´¥å›¾æ ‡å‡ºç°</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_23.png" alt="img"> </p>
<h2 id="æ¸è¿›å¢å¼ºä¼˜åŒ–"><a href="#æ¸è¿›å¢å¼ºä¼˜åŒ–" class="headerlink" title="æ¸è¿›å¢å¼ºä¼˜åŒ–"></a>æ¸è¿›å¢å¼ºä¼˜åŒ–</h2><p>æ¸è¿›å¢å¼ºæ˜¯æŒ‡ä»æœ€åŸºæœ¬çš„åŠŸèƒ½å‡ºå‘ï¼Œåœ¨ä¿è¯ç³»ç»Ÿåœ¨ä»»ä½•ç¯å¢ƒä¸­çš„å¯ç”¨æ€§åŸºç¡€ä¸Šï¼Œé€æ­¥å¢åŠ åŠŸèƒ½ï¼Œæé«˜ç”¨æˆ·ä½“éªŒï¼Œ</p>
<h3 id="åŠ¨ç”»æ€§èƒ½æ¸è¿›å¢å¼º"><a href="#åŠ¨ç”»æ€§èƒ½æ¸è¿›å¢å¼º" class="headerlink" title="åŠ¨ç”»æ€§èƒ½æ¸è¿›å¢å¼º"></a>åŠ¨ç”»æ€§èƒ½æ¸è¿›å¢å¼º</h3><p>å‡ºç°åœ¨é¡µé¢æ¯”è¾ƒé‡è¦ä½ç½®çš„æ¨¡å—ï¼Œå¦‚è½®æ’­å›¾ã€å¯¼èˆªç­‰ï¼Œå¦‚æœéœ€è¦åšåŠ¨ç”»æ•ˆæœçš„è¯ï¼Œåœ¨é«˜ä½ç«¯æµè§ˆå™¨ä¸Šéƒ½åº”è¯¥èƒ½ç»Ÿä¸€å®ç°å‡ºæ¥ï¼Œæ–°æ—§ç‰ˆé¦–é¡µé¦–å±éƒ½ä»¥è½®æ’­å›¾ä¸ºä¸»ï¼Œè½®æ’­å›¾åˆ‡æ¢éƒ½ä½¿ç”¨äº†æ¸éšæ¸ç°çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<p>æ—§ç‰ˆçš„åŠ¨ç”»å®ç°åœ¨é«˜ä½ç«¯æµè§ˆå™¨éƒ½ä½¿ç”¨äº† JQ ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jcloud_new/jquery.SuperSlide.2.1.1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">..</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">//banner</span></div><div class="line">$(<span class="string">".banner-slider"</span>).slide(&#123;<span class="attr">mainCell</span>:<span class="string">".bd ul"</span>,<span class="attr">effect</span>:<span class="string">"fold"</span>,<span class="attr">autoPlay</span>:<span class="literal">true</span>,<span class="attr">interTime</span>:<span class="number">4000</span>,<span class="attr">delayTime</span>:<span class="number">1000</span>&#125;);</div><div class="line">$(<span class="string">".box-slider"</span>).slide(&#123;<span class="attr">mainCell</span>: <span class="string">".bd ul"</span>, <span class="attr">effect</span>: <span class="string">"left"</span>, <span class="attr">autoPlay</span>: <span class="literal">true</span>, <span class="attr">interTime</span>: <span class="number">5000</span>, <span class="attr">scroll</span>: <span class="number">6</span>, <span class="attr">vis</span>: <span class="number">6</span>&#125;);</div><div class="line">...</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å…¶å®æ¸éšæ¸ç°çš„æ•ˆæœ CSS3 åŠ¨ç”»ä¹Ÿèƒ½å®ç°ã€‚æ–°ç‰ˆé¦–é¡µçš„è½®æ’­å›¾åŠ¨ç”»è®¾ç½®äº† CSS3 åŠ¨ç”»åï¼Œå†åˆ©ç”¨è„šæœ¬æ§åˆ¶æ ·å˜åŒ–ä»¥è§¦å‘ CSS3 åŠ¨ç”»ï¼Œè¿™æ ·æ”¯æŒåŠ¨ç”»å±æ€§çš„æµè§ˆå™¨å°±èƒ½ä»¥ CSS3 åŠ¨ç”»å®ç°æ•ˆæœï¼Œè€Œä¸æ”¯æŒçš„æµè§ˆå™¨åˆ™é€šè¿‡è„šæœ¬çš„å±æ€§åˆ¤æ–­ï¼Œç”¨ JQ åŠ¨ç”»å®ç°ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.fc_item</span>&#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">filter</span>: alpha(opacity=<span class="number">0</span>);</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</div><div class="line">    @<span class="keyword">include</span> trst(opacity 0.8s linear);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// è½®æ’­å›¾åˆ‡æ¢</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">imgChange</span>(<span class="params">opt</span>)</span>&#123;  </div><div class="line">    ...   </div><div class="line">    <span class="comment">// å¦‚æœæ”¯æŒ transform å±æ€§ï¼Œä½¿ç”¨CSS3åŠ¨ç”»</span></div><div class="line">    <span class="keyword">if</span>(supports(<span class="string">'transform'</span>))&#123;</div><div class="line">      $imgList.eq(opt).addClass(<span class="string">'active'</span>).css(<span class="string">'opacity'</span>,<span class="string">'1'</span>).siblings().removeClass(<span class="string">'active'</span>).css(<span class="string">'opacity'</span>,<span class="string">'0'</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="comment">// å¦‚æœä¸æ”¯æŒ transform å±æ€§ï¼Œä½¿ç”¨JQåŠ¨ç”»</span></div><div class="line">      $imgList.eq(opt).stop().animate(&#123;</div><div class="line">        <span class="string">'opacity'</span>: <span class="string">'1'</span></div><div class="line">      &#125;,<span class="number">800</span>).addClass(<span class="string">'active'</span>).siblings().stop().animate(&#123;</div><div class="line">        <span class="string">'opacity'</span>: <span class="string">'0'</span></div><div class="line">      &#125;,<span class="number">800</span>).removeClass(<span class="string">'active'</span>);</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>JQ åŠ¨ç”»è™½ç„¶å…¼å®¹æ€§å¥½ï¼Œä½†å…¶åŠ¨ç”»æ€§èƒ½è¿œè¿œä¸åŠ CSS3 åŠ¨ç”»ï¼Œ<strong>å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹æ³•å¯¹åŠ¨ç”»æ€§èƒ½å®ç°æ¸è¿›å¢å¼ºï¼šé«˜ç«¯æµè§ˆå™¨å¯ä»¥é€šè¿‡è§¦å‘ CSS3 åŠ¨ç”»å®ç°æ•ˆæœï¼Œä½ç«¯æµè§ˆå™¨åˆ™ä½¿ç”¨ JQ åŠ¨ç”»å®ç°ã€‚</strong></p>
<h3 id="è§†è§‰æ¸è¿›å¢å¼º"><a href="#è§†è§‰æ¸è¿›å¢å¼º" class="headerlink" title="è§†è§‰æ¸è¿›å¢å¼º"></a>è§†è§‰æ¸è¿›å¢å¼º</h3><p><strong>è§†è§‰æ¸è¿›å¢å¼ºé€šå¸¸å¯ä»¥é€šè¿‡ CSS3 å±æ€§å’Œå¢åŠ  CSS3 åŠ¨ç”»æ¥å®ç°</strong>ï¼Œç°ä¸»æµçš„ç½‘ç«™åŸºæœ¬éƒ½ä¼šå¯¹è§†è§‰åšæ¸è¿›å¢å¼ºå¤„ç†ã€‚æœ¬æ¬¡é¦–é¡µæ”¹ç‰ˆä¸»è¦åœ¨å¤šæ€å…ƒç´ ã€åˆ‡æ¢å…ƒç´ ä¸Šåšäº†å¤„ç†</p>
<p>æ”¯æŒ CSS3 åŠ¨ç”»çš„ SexyGuy</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_25.gif" alt="img"></p>
<p>ä¸æ”¯æŒ CSS3 åŠ¨ç”»çš„ PoorGuy</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_33.gif" alt="img">  </p>
<h2 id="Tab-é”®é”šç‚¹èšç„¦ä¼˜åŒ–"><a href="#Tab-é”®é”šç‚¹èšç„¦ä¼˜åŒ–" class="headerlink" title="Tab é”®é”šç‚¹èšç„¦ä¼˜åŒ–"></a>Tab é”®é”šç‚¹èšç„¦ä¼˜åŒ–</h2><p>æµè§ˆé¡µé¢çš„æ—¶å€™ï¼Œé€šè¿‡ Tab é”®å¯ä»¥èšç„¦é¡µé¢ä¸Šçš„é“¾æ¥é”šç‚¹ï¼Œè¿™æ—¶å€™æµè§ˆå™¨ä¼šåœ¨é”šç‚¹å¢åŠ ä¸€ä¸ªç³»ç»Ÿé»˜è®¤è¾¹æ¡†æ ·å¼å‘Šè¯‰ç”¨æˆ·é”šç‚¹å·²é€‰ä¸­ï¼ŒæŒ‰ <code>Enter</code> å°±å¯ä»¥æ‰“å¼€é€‰ä¸­çš„é”šç‚¹ï¼Œå¦‚ Chrome æµè§ˆå™¨ä¸Š google é¦–é¡µçš„è¯­éŸ³æœç´¢æŒ‰é’®ï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_26.png" alt="img"> </p>
<p>å³ä½¿ç”¨æˆ·åœ¨æµè§ˆé¡µé¢çš„æ—¶å€™é¼ æ ‡çªç„¶å¤±çµäº†ä¹Ÿå¯ä»¥é€šè¿‡é”®ç›˜æ“ä½œç»§ç»­å®Œæˆæµè§ˆç½‘é¡µï¼Œè¿™æ ·çš„è®¾è®¡æ˜¾ç„¶æ˜¯ä¸ºäº†å¢å¼ºé¡µé¢çš„å¯ç”¨æ€§ã€‚</p>
<p>ä½†å¾ˆå¤šæ—¶å€™ï¼Œåœ¨ä¸€äº›é‡è¦ä½ç½®çš„å†…å®¹ï¼Œå¦‚å…¨ç«™çš„å¯¼èˆªï¼Œäº§å“ç»ç†æˆ–è§†è§‰è®¾è®¡å¸ˆä¼šè¦æ±‚å°†è¿™ä¸ªç³»ç»Ÿçš„æ ·å¼å»æ‰ï¼Œäºæ˜¯å¾ˆå¤šåŒå­¦å¯èƒ½ä¼šé€‰æ‹©è®¾ç½®<code>outline:none</code>å»æ‰è¾¹æ¡†æ ·å¼ï¼Œæœ‰äº›ç”šè‡³ä¼šåœ¨å…¨å±€ a æ ‡ç­¾ä¸Šè®¾ç½®ï¼Œå¦‚æ—§ç‰ˆçš„äº¬ä¸œäº‘é¦–é¡µï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_27.png" alt="img"></p>
<p><code>outline:none</code>è®¾ç½®ä¹‹åï¼Œé¡µé¢ä¸Šçš„æ‰€æœ‰é“¾æ¥è™½ç„¶èƒ½é€šè¿‡<code>Tab</code>é”®èšç„¦ï¼Œä½†é“¾æ¥å¹¶æ²¡æœ‰è¢«é€‰ä¸­çš„æ ·å¼ï¼Œæ²¡æœ‰åŠæ³•ç›´è§‚è¾¨å‡ºé€‰ä¸­çš„é“¾æ¥</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_28.gif" alt="img"></p>
<p>è™½ç„¶å¹¶éæ‰€æœ‰ç”¨æˆ·éƒ½ä¼šç”¨åˆ° Tab é”®ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰å°‘æ•°ç”¨æˆ·ä¼šç”¨åˆ°ï¼Œå¦‚é”®ç›˜å…šï¼Œè€Œè¿™ç§é™ä½å¯ç”¨æ€§çš„ä½“éªŒå­˜åœ¨è¡¨æ˜é¡µé¢å¹¶æ²¡æœ‰å¥å…¨ï¼Œå› æ­¤å¹¶ä¸å»ºè®®å»æ‰<code>outline</code>æ ·å¼ã€‚</p>
<p>å¦‚æœçœŸçš„æœ‰å»æ‰ <code>outline</code>æ ·å¼çš„éœ€æ±‚æ€ä¹ˆåŠï¼Ÿå…¶å®ï¼Œé¡µé¢é“¾æ¥ä¸€èˆ¬éƒ½ä¼šè¢«è®¾è®¡ä¸ºå¤šæ€çš„ï¼Œåˆ©ç”¨é“¾æ¥çš„å¤šæ€æ ·å¼ï¼Œä¸ºé“¾æ¥åŠ ä¸Š<code>:focus</code>ä¼ªç±»é€‰ä¸­æ ·å¼ï¼ŒTab é€‰ä¸­é“¾æ¥åå°±ä¼šå±•ç¤º <code>:focus</code>ä¼ªç±»æ ·å¼äº†ï¼Œå¦‚æ–°ç‰ˆé¦–é¡µçš„å¯¼èˆªï¼š</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_29.png" alt="img"></p>
<p>å¯ä»¥ä¸ºé“¾æ¥åŠ ä¸Š<code>:focus</code>ä¼ªç±»æ ·å¼</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.mod_hd_nav_sub_col</span>&#123;</div><div class="line">	...</div><div class="line">	<span class="selector-tag">a</span>&#123;</div><div class="line">		<span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">		<span class="attribute">text-decoration</span>: none;</div><div class="line">		<span class="attribute">outline</span>: none;</div><div class="line">		&amp;:hover,&amp;:focus&#123;</div><div class="line">			<span class="attribute">color</span>: <span class="number">#ffe400</span>;</div><div class="line">			<span class="attribute">text-decoration</span>: none;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“é€‰ä¸­é“¾æ¥è¿˜ç»‘å®šæœ‰äº‹ä»¶çš„æ—¶å€™ï¼Œä¹Ÿåº”è¯¥ä¸ºä¹‹ç»‘å®šç›¸åº”äº‹ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">$navBox.on(&#123;</div><div class="line">	<span class="string">'mouseenter'</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		...</div><div class="line">	&#125;,</div><div class="line">	</div><div class="line">	<span class="string">'focus'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		$(<span class="keyword">this</span>).trigger(<span class="string">'mouseenter'</span>); <span class="comment">// Tab æ“ä½œæ”¯æŒ</span></div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	<span class="string">'mouseleave'</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		...</div><div class="line">	&#125;,</div><div class="line">	</div><div class="line">	<span class="string">'blur'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		$(<span class="keyword">this</span>).trigger(<span class="string">'mouseleave'</span>); <span class="comment">// Tab æ“ä½œæ”¯æŒ</span></div><div class="line">	&#125;</div><div class="line">&#125;, <span class="string">'.mod_hd_nav_item'</span>);</div><div class="line">...</div></pre></td></tr></table></figure>
<p>å¤„ç†å®Œï¼Œè™½ç„¶ <code>outline</code>æ ·å¼å»æ‰äº†ï¼Œä½†ä¾ç„¶å¯ä»¥ç”¨ Tab é”®å®Œæˆé“¾æ¥çš„é€‰ä¸­</p>
<p><img src="//img.aotu.io/mihanX/jcloud-opt/img_30.gif" alt="img"></p>
<h2 id="é™æ€èµ„æºæ›´æ–°å‘å¸ƒ"><a href="#é™æ€èµ„æºæ›´æ–°å‘å¸ƒ" class="headerlink" title="é™æ€èµ„æºæ›´æ–°å‘å¸ƒ"></a>é™æ€èµ„æºæ›´æ–°å‘å¸ƒ</h2><p>æ—§ç‰ˆé¦–é¡µæ‰€æœ‰çš„é™æ€èµ„æºçš„æ›´æ–°å‘å¸ƒæ–¹å¼éƒ½æ˜¯é‡‡ç”¨è¦†ç›–å¼æ›´æ–°ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jcloud_new/jquery-1.7.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jcloud_new/jquery.SuperSlide.2.1.1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/jcloud_new/login_w.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://jcms.jd.com/resource/js/cms.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>è¦†ç›–å¼æ›´æ–°å‘å¸ƒæœ‰æœºä¼šé‡åˆ°ç¼“å­˜é—®é¢˜ä»¥åŠåœ¨å‘å¸ƒçš„æ—¶å€™å¯¼è‡´é¡µé¢é”™ä¹±é—®é¢˜ï¼Œè¯¦æƒ…å¯ä»¥çœ‹ä¸€ä¸‹å¼ äº‘é¾™å‰è¾ˆåœ¨çŸ¥ä¹å¯¹é—®é¢˜ã€<a href="https://www.zhihu.com/question/20790576/answer/32602154" target="_blank" rel="external">å¤§å…¬å¸é‡Œæ€æ ·å¼€å‘å’Œéƒ¨ç½²å‰ç«¯ä»£ç ï¼Ÿ</a>ã€çš„å›ç­”ï¼Œè§£å†³è¦†ç›–å¼æ›´æ–°äº§ç”Ÿçš„é—®é¢˜ï¼Œç°ä¸»æµæ–¹æ³•å°±æ˜¯ä½¿ç”¨ MD5 æ–‡ä»¶åè¿›è¡Œéè¦†ç›–å¼å‘å¸ƒï¼Œäº¬ä¸œäº‘æ–°ç‰ˆé¦–é¡µæ‰€æœ‰çš„é™æ€èµ„æºçš„æ›´æ–°å‘å¸ƒéƒ½é‡‡ç”¨äº†è¿™ç§æ–¹å¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//labs.qiang.it/pc/jcloud/gb/js/lib.min_2f4dab0c.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//labs.qiang.it/pc/jcloud/gb/js/gb.min_b599b860.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//labs.qiang.it/pc/jcloud/home/js/index.min_9d957a15.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>OKï¼Œä¼˜åŒ–æ°¸è¿œè¯´ä¸å®Œçš„ï¼Œä»¥ä¸Šæ‰€è¯´çš„åªæ˜¯å‰ç«¯ä¼˜åŒ–çš„å†°å±±ä¸€è§’ï¼Œä¸šç•Œç»ä¸ç¼ºé«˜å¤§ä¸Šçš„ä¼˜ç§€ä¼˜åŒ–æ–¹æ¡ˆï¼Œä½†ä»ä¸šåŠ¡å®é™…è§„æ¨¡å‡ºå‘çš„è¯ï¼Œè¿™äº›å°ä¼˜åŒ–åœ¨æœ¬æ¬¡æ”¹ç‰ˆä¸­å·²å¾—åˆ°å¾ˆæ˜æ˜¾çš„æ”¶ç›Šï¼ŒæœŸå¾…ä»¥åæœ‰æ›´å…·è§„æ¨¡çš„é¡¹ç›®å¯ä»¥æŒ¥éœé«˜å¤§ä¸Šçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œæœ€åæŠŠæ–°æ—§ç‰ˆçš„é¡µé¢éƒ½æ”¾åˆ°é¢„è§ˆæœåŠ¡å™¨ä¸Šäº†</p>
<ul>
<li><a href="http://labs.qiang.it/pc/jcloud_com/index.html" target="_blank" rel="external">æ—§ç‰ˆé¦–é¡µ</a></li>
<li><a href="http://labs.qiang.it/pc/jcloud/home/index.html" target="_blank" rel="external">æ–°ç‰ˆé¦–é¡µ</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;è®°å¾—å‰ç™¾åº¦å·¥ç¨‹å¸ˆå¼ äº‘é¾™è¯´è¿‡ï¼Œé¡µé¢å‰ç«¯ä¼˜åŒ–é—®é¢˜ç»å¯¹ä¸ä»…ä»…æ˜¯ä¸ºé¡µé¢æé€Ÿçš„é—®é¢˜ï¼Œæ›´æ˜¯å·¥ç¨‹çš„é—®é¢˜ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ã€Š&lt;a href=&quot;https://github.com/fouber/blog/issues/3&quot; target=&quot;_blan
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
      <category term="é¡µé¢ä¼˜åŒ–" scheme="https://aotu.io/tags/%E9%A1%B5%E9%9D%A2%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Nodeè¯»å†™Excelæ–‡ä»¶æ¢ç©¶å®è·µ</title>
    <link href="https://aotu.io/notes/2016/04/07/node-excel/"/>
    <id>https://aotu.io/notes/2016/04/07/node-excel/</id>
    <published>2016-04-07T10:32:18.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ¬æ–‡ä»‹ç»ç”¨ Node.js ä¸­çš„ä¾èµ–åº“æ¥å¤„ç† Excel æ–‡ä»¶ï¼Œæ·±å…¥åˆ†æå¯¹æ¯”å¸¸è§npmåº“å¤„ç†Excel æ–‡ä»¶å­˜åœ¨çš„ä¼˜ç¼ºç‚¹ï¼Œä¸»è¦é˜è¿°ç”¨js-xlsxã€excel-export åº“æ¥å¤„ç† Excel æ–‡ä»¶ã€‚ </p>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ul>
<li>æœ‰å“ªäº›å¤–éƒ¨æ¨¡å—æ”¯æŒè¯»å†™Excel</li>
<li>å¼•å…¥ä¾èµ–æ¨¡å—</li>
<li>ç¼–å†™ä¸šåŠ¡é€»è¾‘å‡½æ•°</li>
<li>å®è·µåº”ç”¨</li>
</ul>
<h2 id="æ”¯æŒè¯»å†™Excelçš„node-jsæ¨¡å—"><a href="#æ”¯æŒè¯»å†™Excelçš„node-jsæ¨¡å—" class="headerlink" title="æ”¯æŒè¯»å†™Excelçš„node.jsæ¨¡å—"></a>æ”¯æŒè¯»å†™Excelçš„node.jsæ¨¡å—</h2><p>é€šè¿‡npmæœç´¢ï¼Œæ”¯æŒè¯»å†™excelæ–‡ä»¶çš„æ¨¡å—æœ‰å¾ˆå¤šï¼Œä½†æ˜¯éƒ½å„æœ‰å¿§ç¼ºç‚¹ï¼Œæœ‰äº›ä»…æ”¯æŒxls/xlsxçš„ä¸€ç§æ ¼å¼ï¼Œæœ‰äº›ä»…æ”¯æŒè¯»å–æ•°æ®ï¼Œæœ‰äº›ä»…æ”¯æŒå¯¼å‡ºæ–‡ä»¶ï¼Œæœ‰äº›éœ€è¦ä¾èµ–pythonè§£æã€‚å¸¸è§çš„npmä¾èµ–æ¨¡å—å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><a href="https://github.com/SheetJS/js-xlsx" target="_blank" rel="external">js-xlsx</a>: ç›®å‰ Github ä¸Š star æ•°é‡æœ€å¤šçš„å¤„ç† Excel çš„åº“ï¼Œæ”¯æŒè§£æå¤šç§æ ¼å¼è¡¨æ ¼XLSX / XLSM / XLSB / XLS / CSVï¼Œè§£æé‡‡ç”¨çº¯jså®ç°ï¼Œå†™å…¥éœ€è¦ä¾èµ–nodejsæˆ–è€…<a href="https://github.com/eligrey/FileSaver.js/" target="_blank" rel="external">FileSaver</a>.jså®ç°ç”Ÿæˆå†™å…¥Excelï¼Œå¯ä»¥ç”Ÿæˆå­è¡¨Excelï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†ä¸Šæ‰‹éš¾åº¦ç¨å¤§ã€‚ä¸æä¾›åŸºç¡€è®¾ç½®Excelè¡¨æ ¼apiä¾‹å•å…ƒæ ¼å®½åº¦ï¼Œæ–‡æ¡£æœ‰äº›ä¹±ï¼Œä¸é€‚åˆå¿«é€Ÿä¸Šæ‰‹ï¼›</li>
<li><a href="https://github.com/mgcrea/node-xlsx" target="_blank" rel="external">node-xlsx</a>: åŸºäºNode.jsè§£æexcelæ–‡ä»¶æ•°æ®åŠç”Ÿæˆexcelæ–‡ä»¶ï¼Œä»…æ”¯æŒxlsxæ ¼å¼æ–‡ä»¶ï¼›</li>
<li><a href="https://github.com/leftshifters/excel-parser" target="_blank" rel="external">excel-parser</a>: åŸºäºNode.jsè§£æexcelæ–‡ä»¶æ•°æ®ï¼Œæ”¯æŒxlsåŠxlsxæ ¼å¼æ–‡ä»¶ï¼Œéœ€è¦ä¾èµ–pythonï¼Œå¤ªé‡ä¸å¤ªå®ç”¨ï¼›</li>
<li><a href="https://github.com/functionscope/Node-Excel-Export" target="_blank" rel="external">excel-export</a> : åŸºäºNode.jså°†æ•°æ®ç”Ÿæˆå¯¼å‡ºexcelæ–‡ä»¶ï¼Œç”Ÿæˆæ–‡ä»¶æ ¼å¼ä¸ºxlsxï¼Œå¯ä»¥è®¾ç½®å•å…ƒæ ¼å®½åº¦ï¼ŒAPIå®¹æ˜“ä¸Šæ‰‹ï¼Œæ— æ³•ç”Ÿæˆworksheetå­—è¡¨ï¼Œæ¯”è¾ƒå•ä¸€ï¼ŒåŸºæœ¬åŠŸèƒ½å¯ä»¥åŸºæœ¬æ»¡è¶³ï¼›</li>
<li><a href="https://segmentfault.com/a/1190000004062768" target="_blank" rel="external">node-xlrd</a>: åŸºäºnode.jsä»excelæ–‡ä»¶ä¸­æå–æ•°æ®ï¼Œä»…æ”¯æŒxlsæ ¼å¼æ–‡ä»¶,ä¸æ”¯æŒxlsx,æœ‰ç‚¹è¿‡æ—¶ï¼Œå¸¸ç”¨çš„éƒ½æ˜¯XLSX æ ¼å¼ã€‚</li>
</ul>
</blockquote>
<p>é€šè¿‡ä»¥ä¸Šåˆ†æå¯¹æ¯”ï¼Œæœ¬äººæ¯”è¾ƒæ¨å´‡<code>js-xlsx</code>ã€<code>excel-export</code>æ¥è¯»å†™Excelæ–‡ä»¶ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨<code>js-xlsx</code>è§£æExcelã€<code>excel-export</code>ç”Ÿæˆï¼Œæ•ˆæœæ›´åŠ ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å®è·µ<code>js-xlsx</code>ã€<code>excel-export</code>ã€‚</p>
<h2 id="ç¬¬ä¸€è®²ï¼šåˆ©ç”¨-js-xlsx-å¤„ç†-Excel-æ–‡ä»¶"><a href="#ç¬¬ä¸€è®²ï¼šåˆ©ç”¨-js-xlsx-å¤„ç†-Excel-æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸€è®²ï¼šåˆ©ç”¨ js-xlsx å¤„ç† Excel æ–‡ä»¶"></a>ç¬¬ä¸€è®²ï¼šåˆ©ç”¨ js-xlsx å¤„ç† Excel æ–‡ä»¶</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>nodeä¸­ä½¿ç”¨é€šè¿‡npmï¼š<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> xlsx</div></pre></td></tr></table></figure></p>
<p>æµè§ˆå™¨ä½¿ç”¨ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"javascript"</span> <span class="attr">src</span>=<span class="string">"dist/xlsx.core.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>é€šè¿‡bowerå®‰è£…ï¼š<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">bower </span><span class="keyword">install </span><span class="keyword">js-xlsx</span></div></pre></td></tr></table></figure></p>
<p><code>æ³¨æ„</code>ï¼Œåœ¨å®¢æˆ·ç«¯ä½¿ç”¨æ—¶ï¼Œå»ºè®®ä½¿ç”¨<code>dist/xlsx.full.min.js</code>ï¼ŒåŒ…å«äº†js-xlsxæ‰€æœ‰æ¨¡å—ã€‚</p>
<h3 id="ä¸€äº›æ¦‚å¿µ"><a href="#ä¸€äº›æ¦‚å¿µ" class="headerlink" title="ä¸€äº›æ¦‚å¿µ"></a>ä¸€äº›æ¦‚å¿µ</h3><p>åœ¨ä½¿ç”¨è¿™ä¸ªåº“ä¹‹å‰ï¼Œå…ˆä»‹ç»åº“ä¸­çš„ä¸€äº›æ¦‚å¿µã€‚</p>
<blockquote>
<ul>
<li>workbook å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ•´ä»½ Excel æ–‡æ¡£ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ js-xlsx è¯»å– Excel æ–‡æ¡£ä¹‹åå°±ä¼šè·å¾— workbook å¯¹è±¡ã€‚</li>
<li>worksheet å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯ Excel æ–‡æ¡£ä¸­çš„è¡¨ã€‚æˆ‘ä»¬çŸ¥é“ä¸€ä»½ Excel æ–‡æ¡£ä¸­å¯ä»¥åŒ…å«å¾ˆå¤šå¼ è¡¨ï¼Œè€Œæ¯å¼ è¡¨å¯¹åº”çš„å°±æ˜¯ worksheet å¯¹è±¡ã€‚</li>
<li>cell å¯¹è±¡ï¼ŒæŒ‡çš„å°±æ˜¯ worksheet ä¸­çš„å•å…ƒæ ¼ï¼Œä¸€ä¸ªå•å…ƒæ ¼å°±æ˜¯ä¸€ä¸ª cell å¯¹è±¡ã€‚</li>
</ul>
</blockquote>
<p>å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹ï¼š<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// workbook</div><div class="line">&#123;</div><div class="line">    SheetNames: [<span class="string">'sheet1'</span>, <span class="string">'sheet2'</span>],</div><div class="line">    Sheets: &#123;</div><div class="line">        // worksheet</div><div class="line">        <span class="string">'sheet1'</span>: &#123;</div><div class="line">            // cell</div><div class="line">            <span class="string">'A1'</span>: &#123; ... &#125;,</div><div class="line">            // cell</div><div class="line">            <span class="string">'A2'</span>: &#123; ... &#125;,</div><div class="line">            ...</div><div class="line">        &#125;,</div><div class="line">        // worksheet</div><div class="line">        <span class="string">'sheet2'</span>: &#123;</div><div class="line">            // cell</div><div class="line">            <span class="string">'A1'</span>: &#123; ... &#125;,</div><div class="line">            // cell</div><div class="line">            <span class="string">'A2'</span>: &#123; ... &#125;,</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p><strong>åŸºæœ¬ç”¨æ³•</strong></p>
<p>1.ç”¨ <code>XLSX.read</code> è¯»å–è·å–åˆ°çš„ Excel æ•°æ®ï¼Œè¿”å› workbook<br>2.ç”¨ <code>XLSX.readFile</code> æ‰“å¼€ Excel æ–‡ä»¶ï¼Œè¿”å› workbook<br>3.ç”¨ <code>workbook.SheetNames</code> è·å–è¡¨å<br>4.ç”¨ <code>workbook.Sheets[xxx]</code> é€šè¿‡è¡¨åè·å–è¡¨æ ¼<br>5.ç”¨ <code>worksheet[address]</code>æ“ä½œå•å…ƒæ ¼<br>6.ç”¨<code>XLSX.utils.sheet_to_json</code>é’ˆå¯¹å•ä¸ªè¡¨è·å–è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºjsonæ ¼å¼<br>7.ç”¨<code>XLSX.writeFile(wb, &#39;output.xlsx&#39;)</code>ç”Ÿæˆæ–°çš„ Excel æ–‡ä»¶</p>
<p><strong>å…·ä½“ç”¨æ³•</strong><br>è¯»å– Excel æ–‡ä»¶<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">workbook</span> ï¼ <span class="selector-tag">XLSX</span><span class="selector-class">.read</span>(excelData, &#123;<span class="attribute">type</span>: <span class="string">'base64'</span>&#125;);</div><div class="line"><span class="selector-tag">workbook</span> ï¼ <span class="selector-tag">XLSX</span><span class="selector-class">.writeFile</span>(<span class="string">'someExcel.xlsx'</span>, opts);</div></pre></td></tr></table></figure></p>
<p>è·å– Excel æ–‡ä»¶ä¸­çš„è¡¨<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è·å– Excel ä¸­æ‰€æœ‰è¡¨å</span></div><div class="line"><span class="keyword">var</span> sheetNames = workbook.SheetNames; <span class="comment">// è¿”å› ['sheet1', 'sheet2',â€¦â€¦]</span></div><div class="line"><span class="comment">// æ ¹æ®è¡¨åè·å–å¯¹åº”æŸå¼ è¡¨</span></div><div class="line"><span class="keyword">var</span> worksheet = workbook.Sheets[sheetNames[<span class="number">0</span>]];</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡ <code>worksheet[address]</code> æ¥æ“ä½œè¡¨æ ¼ï¼Œä»¥ ! å¼€å¤´çš„ key æ˜¯ç‰¹æ®Šçš„å­—æ®µã€‚<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> è·å– A1 å•å…ƒæ ¼å¯¹è±¡</div><div class="line">let a1 = worksheet[<span class="string">'A1'</span>]; <span class="regexp">//</span> è¿”å› &#123; v: <span class="string">'hello'</span>, t: <span class="string">'s'</span>, ... &#125;</div><div class="line"><span class="regexp">//</span> è·å– A1 ä¸­çš„å€¼</div><div class="line">a1.v <span class="regexp">//</span> è¿”å› <span class="string">'hello'</span></div><div class="line"></div><div class="line"><span class="regexp">//</span> è·å–è¡¨çš„æœ‰æ•ˆèŒƒå›´</div><div class="line">worksheet[<span class="string">'!ref'</span>] <span class="regexp">//</span> è¿”å› <span class="string">'A1:B20'</span></div><div class="line">worksheet[<span class="string">'!range'</span>] <span class="regexp">//</span> è¿”å› range å¯¹è±¡ï¼Œ&#123; s: &#123; r: <span class="number">0</span>, c: <span class="number">0</span>&#125;, e: &#123; r: <span class="number">100</span>, c: <span class="number">2</span> &#125; &#125;</div><div class="line"></div><div class="line"><span class="regexp">//</span> è·å–åˆå¹¶è¿‡çš„å•å…ƒæ ¼</div><div class="line">worksheet[<span class="string">'!merges'</span>] <span class="regexp">//</span> è¿”å›ä¸€ä¸ªåŒ…å« range å¯¹è±¡çš„åˆ—è¡¨ï¼Œ[ &#123;s: &#123; r: <span class="number">0</span>, c: <span class="number">0</span> &#125;, c: &#123; r: <span class="number">2</span>, c: <span class="number">1</span> &#125; &#125; ]</div></pre></td></tr></table></figure></p>
<p>è·å– Excel æ–‡ä»¶ä¸­çš„è¡¨è½¬æ¢ä¸ºjsonæ•°æ®<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XLSX<span class="selector-class">.utils</span><span class="selector-class">.sheet_to_json</span>(worksheet)  <span class="comment">//é’ˆå¯¹å•ä¸ªè¡¨ï¼Œè¿”å›åºåˆ—åŒ–jsonæ•°æ®</span></div></pre></td></tr></table></figure></p>
<p>ç”Ÿæˆæ–°çš„ Excel æ–‡ä»¶<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æœåŠ¡ç«¯é€šè¿‡XLSX.writeFile</span></div><div class="line">XLSX = <span class="built_in">require</span>(<span class="string">"xlsx"</span>);</div><div class="line">XLSX.writeFile(wb, <span class="string">'output.xlsx'</span>)   </div><div class="line"></div><div class="line"><span class="comment">//å®¢æœç«¯ï¼Œåªèƒ½é€šè¿‡XLSX.write(wb, write_opts) å†™å…¥ è¡¨æ ¼æ•°æ®ï¼Œå€ŸåŠ©FileSaverç”Ÿæˆï¼Œä¸”åªæ”¯æŒåœ¨é«˜ç‰ˆæœ¬æµè§ˆå™¨ã€‚</span></div><div class="line"><span class="keyword">var</span> wopts = &#123; bookType:<span class="string">'xlsx'</span>, bookSST:<span class="literal">false</span>, <span class="keyword">type</span>:<span class="string">'binary'</span> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> wbout = XLSX.write(wb,wopts);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">s2ab</span>(<span class="params">s</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length);</div><div class="line">  <span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i!=s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</div><div class="line">  <span class="keyword">return</span> buf;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* the saveAs call downloads a file on the local machine */</span></div><div class="line">saveAs(<span class="keyword">new</span> Blob([s2ab(wbout)],&#123;<span class="keyword">type</span>:<span class="string">""</span>&#125;), <span class="string">"test.xlsx"</span>)</div></pre></td></tr></table></figure></p>
<h2 id="js-xlsxå®æˆ˜"><a href="#js-xlsxå®æˆ˜" class="headerlink" title="js-xlsxå®æˆ˜"></a>js-xlsxå®æˆ˜</h2><p><strong>è§£æ Excel ç”Ÿæˆ JSON</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">to_json</span>(<span class="params">workbook</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> result = &#123;&#125;;</div><div class="line"></div><div class="line">	<span class="comment">// è·å– Excel ä¸­æ‰€æœ‰è¡¨å</span></div><div class="line">	<span class="keyword">var</span> sheetNames = workbook.SheetNames; <span class="comment">// è¿”å› ['sheet1', 'sheet2']</span></div><div class="line"></div><div class="line">	workbook.SheetNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sheetName</span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> worksheet = workbook.Sheets[sheetName];</div><div class="line">		result[sheetName] = XLSX.utils.sheet_to_json(worksheet);</div><div class="line">	&#125;);	</div><div class="line"></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"æ‰“å°è¡¨ä¿¡æ¯"</span>,<span class="built_in">JSON</span>.stringify(result, <span class="number">2</span>, <span class="number">2</span>));  <span class="comment">//æ˜¾ç¤ºæ ¼å¼&#123;"è¡¨1":[],"è¡¨2":[]&#125;</span></div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>å¯¼å‡ºè¡¨æ ¼</strong><br>1.æ„å»ºç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡new Blobå¦‚ä¸‹ã€‚<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// workbook</span></div><div class="line">&#123;</div><div class="line">    <span class="attribute">SheetNames</span>: [<span class="string">'mySheet'</span>],</div><div class="line">    <span class="attribute">Sheets</span>: &#123;</div><div class="line">        <span class="string">'mySheet'</span>: &#123;</div><div class="line">            <span class="string">'!ref'</span>: <span class="string">'A1:E4'</span>, <span class="comment">// å¿…é¡»è¦æœ‰è¿™ä¸ªèŒƒå›´æ‰èƒ½è¾“å‡ºï¼Œå¦åˆ™å¯¼å‡ºçš„ excel ä¼šæ˜¯ä¸€ä¸ªç©ºè¡¨</span></div><div class="line">            <span class="attribute">A1</span>: &#123; <span class="attribute">v</span>: <span class="string">'id'</span> &#125;,</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.è°ƒç”¨ XLSX.writeï¼Œ å€ŸåŠ©FileSaverä¸­new Blobç”Ÿæˆå³å¯ã€‚<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">var _headers = [<span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'country'</span>, <span class="string">'remark'</span>]</div><div class="line">var _data = [ &#123; id: <span class="string">'1'</span>,</div><div class="line">                name: <span class="string">'test1'</span>,</div><div class="line">                age: <span class="string">'30'</span>,</div><div class="line">                country: <span class="string">'China'</span>,</div><div class="line">                remark: <span class="string">'hello'</span> &#125;,</div><div class="line">              &#123; id: <span class="string">'2'</span>,</div><div class="line">                name: <span class="string">'test2'</span>,</div><div class="line">                age: <span class="string">'20'</span>,</div><div class="line">                country: <span class="string">'America'</span>,</div><div class="line">                remark: <span class="string">'world'</span> &#125;,</div><div class="line">              &#123; id: <span class="string">'3'</span>,</div><div class="line">                name: <span class="string">'test3'</span>,</div><div class="line">                age: <span class="string">'18'</span>,</div><div class="line">                country: <span class="string">'Unkonw'</span>,</div><div class="line">                remark: <span class="string">'???'</span> &#125; ];</div><div class="line"></div><div class="line">var headers = _headers</div><div class="line">                // ä¸º _headers æ·»åŠ å¯¹åº”çš„å•å…ƒæ ¼ä½ç½®</div><div class="line">                // [ &#123; v: <span class="string">'id'</span>, position: <span class="string">'A1'</span> &#125;,</div><div class="line">                //   &#123; v: <span class="string">'name'</span>, position: <span class="string">'B1'</span> &#125;,</div><div class="line">                //   &#123; v: <span class="string">'age'</span>, position: <span class="string">'C1'</span> &#125;,</div><div class="line">                //   &#123; v: <span class="string">'country'</span>, position: <span class="string">'D1'</span> &#125;,</div><div class="line">                //   &#123; v: <span class="string">'remark'</span>, position: <span class="string">'E1'</span> &#125; ]</div><div class="line">                .<span class="keyword">map</span>((v, i) =&gt; Object.assign(&#123;&#125;, &#123;v: v, position: String.fromCharCode(<span class="number">65</span>+i) + <span class="number">1</span> &#125;))</div><div class="line">                // è½¬æ¢æˆ worksheet éœ€è¦çš„ç»“æ„</div><div class="line">                // &#123; A1: &#123; v: <span class="string">'id'</span> &#125;,</div><div class="line">                //   B1: &#123; v: <span class="string">'name'</span> &#125;,</div><div class="line">                //   C1: &#123; v: <span class="string">'age'</span> &#125;,</div><div class="line">                //   D1: &#123; v: <span class="string">'country'</span> &#125;,</div><div class="line">                //   E1: &#123; v: <span class="string">'remark'</span> &#125; &#125;</div><div class="line">                .reduce((prev, <span class="keyword">next</span>) =&gt; Object.assign(&#123;&#125;, prev, &#123;[next.position]: &#123;v: next.v&#125;&#125;), &#123;&#125;);</div><div class="line"></div><div class="line">var data = _data</div><div class="line">              // åŒ¹é… headers çš„ä½ç½®ï¼Œç”Ÿæˆå¯¹åº”çš„å•å…ƒæ ¼æ•°æ®</div><div class="line">              // [ [ &#123; v: <span class="string">'1'</span>, position: <span class="string">'A2'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'test1'</span>, position: <span class="string">'B2'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'30'</span>, position: <span class="string">'C2'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'China'</span>, position: <span class="string">'D2'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'hello'</span>, position: <span class="string">'E2'</span> &#125; ],</div><div class="line">              //   [ &#123; v: <span class="string">'2'</span>, position: <span class="string">'A3'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'test2'</span>, position: <span class="string">'B3'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'20'</span>, position: <span class="string">'C3'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'America'</span>, position: <span class="string">'D3'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'world'</span>, position: <span class="string">'E3'</span> &#125; ],</div><div class="line">              //   [ &#123; v: <span class="string">'3'</span>, position: <span class="string">'A4'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'test3'</span>, position: <span class="string">'B4'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'18'</span>, position: <span class="string">'C4'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'Unkonw'</span>, position: <span class="string">'D4'</span> &#125;,</div><div class="line">              //     &#123; v: <span class="string">'???'</span>, position: <span class="string">'E4'</span> &#125; ] ]</div><div class="line">              .<span class="keyword">map</span>((v, i) =&gt; _headers.<span class="keyword">map</span>((k, j) =&gt; Object.assign(&#123;&#125;, &#123; v: v[k], position: String.fromCharCode(<span class="number">65</span>+j) + (i+<span class="number">2</span>) &#125;)))</div><div class="line">              // å¯¹åˆšæ‰çš„ç»“æœè¿›è¡Œé™ç»´å¤„ç†ï¼ˆäºŒç»´æ•°ç»„å˜æˆä¸€ç»´æ•°ç»„ï¼‰</div><div class="line">              // [ &#123; v: <span class="string">'1'</span>, position: <span class="string">'A2'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'test1'</span>, position: <span class="string">'B2'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'30'</span>, position: <span class="string">'C2'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'China'</span>, position: <span class="string">'D2'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'hello'</span>, position: <span class="string">'E2'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'2'</span>, position: <span class="string">'A3'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'test2'</span>, position: <span class="string">'B3'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'20'</span>, position: <span class="string">'C3'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'America'</span>, position: <span class="string">'D3'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'world'</span>, position: <span class="string">'E3'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'3'</span>, position: <span class="string">'A4'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'test3'</span>, position: <span class="string">'B4'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'18'</span>, position: <span class="string">'C4'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'Unkonw'</span>, position: <span class="string">'D4'</span> &#125;,</div><div class="line">              //   &#123; v: <span class="string">'???'</span>, position: <span class="string">'E4'</span> &#125; ]</div><div class="line">              .reduce((prev, <span class="keyword">next</span>) =&gt; prev.concat(<span class="keyword">next</span>))</div><div class="line">              // è½¬æ¢æˆ worksheet éœ€è¦çš„ç»“æ„</div><div class="line">              //   &#123; A2: &#123; v: <span class="string">'1'</span> &#125;,</div><div class="line">              //     B2: &#123; v: <span class="string">'test1'</span> &#125;,</div><div class="line">              //     C2: &#123; v: <span class="string">'30'</span> &#125;,</div><div class="line">              //     D2: &#123; v: <span class="string">'China'</span> &#125;,</div><div class="line">              //     E2: &#123; v: <span class="string">'hello'</span> &#125;,</div><div class="line">              //     A3: &#123; v: <span class="string">'2'</span> &#125;,</div><div class="line">              //     B3: &#123; v: <span class="string">'test2'</span> &#125;,</div><div class="line">              //     C3: &#123; v: <span class="string">'20'</span> &#125;,</div><div class="line">              //     D3: &#123; v: <span class="string">'America'</span> &#125;,</div><div class="line">              //     E3: &#123; v: <span class="string">'world'</span> &#125;,</div><div class="line">              //     A4: &#123; v: <span class="string">'3'</span> &#125;,</div><div class="line">              //     B4: &#123; v: <span class="string">'test3'</span> &#125;,</div><div class="line">              //     C4: &#123; v: <span class="string">'18'</span> &#125;,</div><div class="line">              //     D4: &#123; v: <span class="string">'Unkonw'</span> &#125;,</div><div class="line">              //     E4: &#123; v: <span class="string">'???'</span> &#125; &#125;</div><div class="line">              .reduce((prev, <span class="keyword">next</span>) =&gt; Object.assign(&#123;&#125;, prev, &#123;[next.position]: &#123;v: next.v&#125;&#125;), &#123;&#125;);</div><div class="line"></div><div class="line">// åˆå¹¶ headers å’Œ data</div><div class="line">var output = Object.assign(&#123;&#125;, headers, data);</div><div class="line">// è·å–æ‰€æœ‰å•å…ƒæ ¼çš„ä½ç½®</div><div class="line">var outputPos = Object.keys(output);</div><div class="line">// è®¡ç®—å‡ºèŒƒå›´</div><div class="line">var ref = outputPos[<span class="number">0</span>] + <span class="string">':'</span> + outputPos[outputPos.length - <span class="number">1</span>];</div><div class="line"></div><div class="line">// æ„å»º workbook å¯¹è±¡</div><div class="line">var wb = &#123;</div><div class="line">    SheetNames: [<span class="string">'mySheet'</span>],</div><div class="line">    Sheets: &#123;</div><div class="line">        <span class="string">'mySheet'</span>: Object.assign(&#123;&#125;, output, &#123; <span class="string">'!ref'</span>: ref &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// å¯¼å‡º Excel</div><div class="line">//XLSX.writeFile(wb, <span class="string">'output.xlsx'</span>);</div><div class="line"></div><div class="line">var wopts = &#123; bookType:<span class="string">'xlsx'</span>, bookSST:false, type:<span class="string">'binary'</span> &#125;;</div><div class="line"></div><div class="line">var wbout = XLSX.write(wb,wopts);</div><div class="line"></div><div class="line"><span class="keyword">function</span> s2ab(s) &#123;</div><div class="line">  var buf = new ArrayBuffer(s.length);</div><div class="line">  var view = new Uint8Array(buf);</div><div class="line">  for (var i=<span class="number">0</span>; i!=s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</div><div class="line">  return buf;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/* the saveAs call downloads a file on the local machine */</div><div class="line">saveAs(new Blob([s2ab(wbout)],&#123;type:<span class="string">""</span>&#125;), <span class="string">"test.xlsx"</span>)</div></pre></td></tr></table></figure></p>
<p>å®è·µDemoï¼š<a href="http://doc.pfan123.com/excel.html" target="_blank" rel="external">RDå¿«é€Ÿç”Ÿæˆexcelè¡¨</a></p>
<h2 id="ç¬¬äºŒè®²ï¼šåˆ©ç”¨-excel-export-ç”Ÿæˆ-Excel-æ–‡ä»¶"><a href="#ç¬¬äºŒè®²ï¼šåˆ©ç”¨-excel-export-ç”Ÿæˆ-Excel-æ–‡ä»¶" class="headerlink" title="ç¬¬äºŒè®²ï¼šåˆ©ç”¨ excel-export ç”Ÿæˆ Excel æ–‡ä»¶"></a>ç¬¬äºŒè®²ï¼šåˆ©ç”¨ excel-export ç”Ÿæˆ Excel æ–‡ä»¶</h2><p>excel-exportæ¨¡å—ï¼Œä¸Šæ‰‹èµ·æ¥å°±æ¯”è¾ƒå®¹æ˜“äº†ï¼Œå…¶ä¸­åŸç†æ˜¯é€šè¿‡ä¿®æ”¹ï¼Œä¿®æ”¹header ä¿¡æ¯ã€æ‹¼æ¥å­—ç¬¦ä¸²ã€ä¿®æ”¹å­—ç¬¦é›†ã€è¾“å‡ºå­—ç¬¦ä¸²çš„å½¢å¼å®ç°çš„ï¼Œåœ¨éƒ¨åˆ†firefoxä½ç‰ˆæœ¬ä¸‹è½½ä¸­æ–‡åä¼šå‡ºç°ä¹±ç æƒ…å†µã€‚æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§APIè®¾ç½®å¥½æ•°æ®å‚æ•°ï¼Œé€šè¿‡nodeExcel.executeè°ƒç”¨æ‰§è¡Œï¼Œç³»ç»Ÿè°ƒç”¨æ¨¡ç‰ˆâ€styles.xmlâ€å°±å¯ä»¥ç”ŸæˆExcelæ–‡ä»¶ï¼Œæ¯”è¾ƒå¥½çš„å°±æ˜¯ï¼Œå®ƒå¯ä»¥è®¾ç½®å•å…ƒæ ¼çš„å®½åº¦ï¼Œç±»å‹ã€‚<br>æˆ‘ä»¬å…ˆçœ‹çœ‹ï¼Œå®˜æ–¹æä¾›çš„ä¾‹å­ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> nodeExcel = <span class="built_in">require</span>(<span class="string">'excel-export'</span>);</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line">app.get(<span class="string">'/Excel'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> conf =&#123;&#125;;</div><div class="line">    conf.stylesXmlFile = <span class="string">"styles.xml"</span>;</div><div class="line">    conf.name = <span class="string">"mysheet"</span>;</div><div class="line">    conf.cols = [&#123;</div><div class="line">        <span class="attr">caption</span>:<span class="string">'string'</span>,</div><div class="line">        <span class="attr">type</span>:<span class="string">'string'</span>,</div><div class="line">        <span class="attr">beforeCellWrite</span>:<span class="function"><span class="keyword">function</span>(<span class="params">row, cellData</span>)</span>&#123;</div><div class="line">             <span class="keyword">return</span> cellData.toUpperCase();</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">width</span>:<span class="number">28.7109375</span></div><div class="line">    &#125;,&#123;</div><div class="line">        <span class="attr">caption</span>:<span class="string">'date'</span>,</div><div class="line">        <span class="attr">type</span>:<span class="string">'date'</span>,</div><div class="line">        <span class="attr">beforeCellWrite</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> originDate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC(<span class="number">1899</span>,<span class="number">11</span>,<span class="number">30</span>));</div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">row, cellData, eOpt</span>)</span>&#123;</div><div class="line">                <span class="keyword">if</span> (eOpt.rowNum%<span class="number">2</span>)&#123;</div><div class="line">                    eOpt.styleIndex = <span class="number">1</span>;</div><div class="line">                &#125;  </div><div class="line">                <span class="keyword">else</span>&#123;</div><div class="line">                    eOpt.styleIndex = <span class="number">2</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (cellData === <span class="literal">null</span>)&#123;</div><div class="line">                  eOpt.cellType = <span class="string">'string'</span>;</div><div class="line">                  <span class="keyword">return</span> <span class="string">'N/A'</span>;</div><div class="line">                &#125; <span class="keyword">else</span></div><div class="line">                  <span class="keyword">return</span> (cellData - originDate) / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</div><div class="line">            &#125; </div><div class="line">        &#125;()</div><div class="line">    &#125;,&#123;</div><div class="line">        <span class="attr">caption</span>:<span class="string">'bool'</span>,</div><div class="line">        <span class="attr">type</span>:<span class="string">'bool'</span></div><div class="line">    &#125;,&#123;</div><div class="line">        <span class="attr">caption</span>:<span class="string">'number'</span>,</div><div class="line">         <span class="attr">type</span>:<span class="string">'number'</span>              </div><div class="line">    &#125;];</div><div class="line">    conf.rows = [</div><div class="line">        [<span class="string">'pi'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC(<span class="number">2013</span>, <span class="number">4</span>, <span class="number">1</span>)), <span class="literal">true</span>, <span class="number">3.14</span>],</div><div class="line">        [<span class="string">"e"</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2012</span>, <span class="number">4</span>, <span class="number">1</span>), <span class="literal">false</span>, <span class="number">2.7182</span>],</div><div class="line">        [<span class="string">"M&amp;M&lt;&gt;'"</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC(<span class="number">2013</span>, <span class="number">6</span>, <span class="number">9</span>)), <span class="literal">false</span>, <span class="number">1.61803</span>],</div><div class="line">        [<span class="string">"null date"</span>, <span class="literal">null</span>, <span class="literal">true</span>, <span class="number">1.414</span>]  </div><div class="line">    ];</div><div class="line">    <span class="keyword">var</span> result = nodeExcel.execute(conf);</div><div class="line">    res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/vnd.openxmlformats'</span>);</div><div class="line">    res.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename="</span> + <span class="string">"Report.xlsx"</span>);</div><div class="line">    res.end(result, <span class="string">'binary'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.listen(<span class="number">3000</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Listening on port 3000'</span>);</div></pre></td></tr></table></figure></p>
<p><strong> åˆ†æç”Ÿæˆexcelæµç¨‹ï¼š</strong><br>1.é…ç½®excelæ–‡ä»¶åconf.name<br>2.è®¾ç½®è¡¨captionï¼Œæ¯åˆ—å•å…ƒæ ¼æ•°æ®ç±»å‹ï¼Œå®½åº¦<br>3.å¡«å……è¡¨ä¸­æ¯è¡Œæ•°æ®conf.rowsï¼ŒnodeExcel.executeç”Ÿæˆæ•°æ®ç»“æ„ï¼Œè®¾ç½®å¤´éƒ¨ï¼Œæ‹¼æ¥ç”Ÿæˆè¡¨</p>
<p><strong>å†™åœ¨æœ€åï¼Œä»¥ä¸Šä»…ä¸ºä¸ªäººè§‚ç‚¹ï¼Œå¦‚æœ‰çº°æ¼ä¹‹å¤„ï¼Œæ¬¢è¿å„ä½å¤§ä¾ æ‹ç –ï¼</strong> </p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://github.com/functionscope/Node-Excel-Export" target="_blank" rel="external">Node-Excel-Export excelå¯¼å‡º</a></li>
<li><a href="https://segmentfault.com/a/1190000004062768" target="_blank" rel="external">node.jsè¯»å†™excelæ–‡ä»¶</a></li>
<li><a href="http://www.uedsc.com/js-xlsx.html" target="_blank" rel="external">JS-XLSXè¯»å–å’Œè§£æExcelè¡¨æ ¼æ–‡ä»¶(xls/xlsx)çš„JavaScriptæ’ä»¶</a> </li>
<li><a href="http://scarletsky.github.io/2016/01/30/nodejs-process-excel/" target="_blank" rel="external">åœ¨ Node.js ä¸­åˆ©ç”¨ js-xlsx å¤„ç† Excel æ–‡ä»¶</a> </li>
<li><a href="https://segmentfault.com/a/1190000004062768" target="_blank" rel="external">node-xlrd</a></li>
<li><a href="https://github.com/leftshifters/excel-parser" target="_blank" rel="external">excel-parser</a></li>
<li><a href="https://github.com/eligrey/FileSaver.js/" target="_blank" rel="external">FileSaveræµè§ˆå™¨ä¿å­˜excel</a> </li>
<li><a href="http://stackoverflow.com/questions/30859901/parse-xlsx-with-node-and-create-json" target="_blank" rel="external">stackoverflow xlsxç›¸å…³é—®é¢˜</a> </li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ä»‹ç»ç”¨ Node.js ä¸­çš„ä¾èµ–åº“æ¥å¤„ç† Excel æ–‡ä»¶ï¼Œæ·±å…¥åˆ†æå¯¹æ¯”å¸¸è§npmåº“å¤„ç†Excel æ–‡ä»¶å­˜åœ¨çš„ä¼˜ç¼ºç‚¹ï¼Œä¸»è¦é˜è¿°ç”¨js-x
    
    </summary>
    
      <category term="NodeJS" scheme="https://aotu.io/cates/NodeJS/"/>
    
    
      <category term="node" scheme="https://aotu.io/tags/node/"/>
    
      <category term="excel" scheme="https://aotu.io/tags/excel/"/>
    
      <category term="JS-XLSX" scheme="https://aotu.io/tags/JS-XLSX/"/>
    
      <category term="Node-Excel-Export" scheme="https://aotu.io/tags/Node-Excel-Export/"/>
    
  </entry>
  
  <entry>
    <title>æå‡ä»£ç çš„å¯è¯»æ€§ç³»åˆ—(ä¸€)--åŸºç¡€ç¯‡</title>
    <link href="https://aotu.io/notes/2016/03/31/readable/"/>
    <id>https://aotu.io/notes/2016/03/31/readable/</id>
    <published>2016-03-31T05:30:12.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ç¼–ç¨‹æ˜¯ä¸€é—¨è‰ºæœ¯æ´»ï¼Œå¥½çš„ä»£ç åº”è¯¥å°±åƒä½çš„æˆ¿å­ä¸€æ ·ï¼Œæœ‰æ•´ä½“çš„æ¡†æ¶ï¼Œæœ‰é—¨ï¼Œæœ‰çª—æˆ·ï¼Œç›¸äº’ç‹¬ç«‹åˆå®Œç¾ç»„åˆã€‚ä½ è§‰å¾—é—¨ä¸å¤Ÿç»“å®ï¼Œå°±æ‹†ä¸‹æ¥æ¢ä¸ªå®å¿ƒçš„ï¼›ä½ è§‰å¾—çª—æˆ·ä¸å¤Ÿæ˜äº®å°±æ¢ä¸ªå…¨ç»ç’ƒçš„ï¼Œæ€»ä¹‹å¯¹æˆ¿å­çš„å…¶ä»–éƒ¨ä½æ²¡æœ‰ä»»ä½•å½±å“ã€‚æ‰€ä»¥è¯´æ¯ä¸€ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰ä¸€é¢—è®¾è®¡å¸ˆçš„å¿ƒã€‚æœ¬æ–‡ä¸»è¦ä»<strong>ç¼–ç </strong>ã€<strong>å˜é‡</strong>ã€<strong>å¤„ç†é”™è¯¯</strong>ã€<strong>å¯¹è±¡</strong>ç­‰åŸºç¡€æ–¹é¢è¿›è¡Œç®€å•çš„æ¢è®¨ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶çš„å·¥ä½œæœ‰æ‰€å¸®åŠ©~~</p>
<a id="more"></a>
<h2 id="1-ç¼–ç é£æ ¼"><a href="#1-ç¼–ç é£æ ¼" class="headerlink" title="1 ç¼–ç é£æ ¼"></a>1 ç¼–ç é£æ ¼</h2><p>è€ç”Ÿå¸¸è°ˆï¼Œæˆ‘ä»¬å…ˆä»æœ€åŸºç¡€çš„ç¼–ç è¯´èµ·å§ï¼å¥½çš„ç¼–ç è§„èŒƒä¸ä»…ä»…èƒ½å¤Ÿæå‡ä»£ç çš„å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ï¼Œæé«˜å›¢é˜Ÿçš„å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿèƒ½å¤Ÿé¿å¼€ä¸€äº›ä½çº§çš„é”™è¯¯ï¼Œå‡å°‘bugçš„éšæ‚£ï¼Œæå‡ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‚ç¼–ç è™½å°ï¼Œä½†å´æ˜¯ä¸‡ä¸ˆé«˜æ¥¼çš„åŸºç¡€ï¼Œå¯¹äºç¼–å†™æ¸…æ™°è¿è´¯çš„ä»£ç æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚ä»¥ä¸‹éƒ¨åˆ†ç¼–ç è§„èŒƒå‚è€ƒè‡ª<a href="http://aotu.io">å‡¹å‡¸å®éªŒå®¤</a>ã€‚</p>
<h4 id="1-1-ç¼©è¿›"><a href="#1-1-ç¼©è¿›" class="headerlink" title="1.1 ç¼©è¿›"></a>1.1 ç¼©è¿›</h4><p>é€šå¸¸ä½¿ç”¨å››ä¸ªç©ºæ ¼è¿›è¡Œä»£ç ç¼©è¿›ï¼Œæœ‰äº›ä¹Ÿç”¨tabæ¥ç¼©è¿›ï¼Œè¿™ä¸»è¦æ ¹æ®å›¢é˜Ÿçš„é£æ ¼è·Ÿä¸ªäººå–œå¥½</p>
<h4 id="1-2-ç©ºæ ¼"><a href="#1-2-ç©ºæ ¼" class="headerlink" title="1.2 ç©ºæ ¼"></a>1.2 ç©ºæ ¼</h4><ul>
<li>å·¦æ‹¬å·ä¸ç±»åä¹‹é—´ä¸€ä¸ªç©ºæ ¼</li>
<li>å†’å·ä¸å±æ€§å€¼ä¹‹é—´ä¸€ä¸ªç©ºæ ¼</li>
<li>æ“ä½œç¬¦å‰å</li>
<li>åŒ¿åå‡½æ•°è¡¨è¾¾å¼ä¹‹åç­‰</li>
</ul>
<h4 id="1-3-ç©ºè¡Œ"><a href="#1-3-ç©ºè¡Œ" class="headerlink" title="1.3 ç©ºè¡Œ"></a>1.3 ç©ºè¡Œ</h4><p>è¿™æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«å¤§å®¶å¿½ç•¥çš„ç‚¹ï¼Œä½†å®ƒæ‰€å¸¦æ¥çš„æ•ˆæœæ˜¯æ¯‹åº¸ç½®ç–‘çš„ï¼é€šå¸¸ä¸€æ®µä»£ç çš„è¯­ä¹‰å’Œå¦ä¸€æ®µä»£ç ä¸ç›¸å…³ï¼Œå°±åº”è¯¥ç”¨ç©ºè¡Œéš”å¼€ï¼Œé¿å…ä¸€å¤§æ®µçš„ä»£ç æ‰åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚</p>
<ul>
<li>åœ¨æ–¹æ³•ä¹‹é—´ï¼›</li>
<li>æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å’Œç¬¬ä¸€æ¡è¯­å¥ä¹‹é—´ï¼›</li>
<li>æ³¨é‡Šä¹‹å‰</li>
<li>æ–¹æ³•å†…çš„é€»è¾‘ç‰‡æ®µä¹‹é—´</li>
</ul>
<h4 id="1-4-å‘½åçº¦å®š"><a href="#1-4-å‘½åçº¦å®š" class="headerlink" title="1.4 å‘½åçº¦å®š"></a>1.4 å‘½åçº¦å®š</h4><p>æœ‰ä¸€ä½å¤§å¸ˆæ›¾è¯´è¿‡ï¼Œè®¡ç®—æœºç§‘å­¦åªå­˜åœ¨ä¸¤ä¸ªéš¾é¢˜ï¼š<strong>ç¼“å­˜</strong>å’Œ<strong>å‘½å</strong>ã€‚ç”±æ­¤å¯è§å‘½åä¸ä»…æ˜¯ä¸€é—¨ç§‘å­¦ï¼Œä¹Ÿæ˜¯ä¸€é—¨æŠ€æœ¯ã€‚<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œå˜é‡ä¸å‡½æ•°ä¸€èˆ¬ä½¿ç”¨é©¼å³°å¤§å°å†™å‘½åæ³•ï¼Œå…¶ä¸­ä¸ºäº†åŒºåˆ†å˜é‡ä¸å‡½æ•°ï¼Œå˜é‡å‘½åå‰ç¼€åº”å½“æ˜¯åè¯ï¼Œå‡½æ•°å‰ç¼€åº”å½“æ˜¯åŠ¨è¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åº”å½“è®©å‘½å<strong>æ‰¿è½½ä¸€å®šçš„å«ä¹‰</strong>ï¼Œå› æ­¤è¦é¿å…ä½¿ç”¨æ²¡æœ‰æ„ä¹‰çš„å‘½åã€‚</p>
<h4 id="1-4-æ³¨é‡Š"><a href="#1-4-æ³¨é‡Š" class="headerlink" title="1.4 æ³¨é‡Š"></a>1.4 æ³¨é‡Š</h4><p>é€šå¸¸æˆ‘ä»¬åœ¨ç¼–å†™å®Œä¸€æ®µä»£ç çš„çŸ­æ—¶é—´å†…ï¼Œä¼šæ¸…æ¥šè¿™æ®µä»£ç çš„å·¥ä½œåŸç†ã€‚ä½†æ˜¯å½“è¿‡ä¸€æ®µæ—¶é—´å†æ¬¡å›åˆ°ä»£ç ä¸­ï¼Œå¯èƒ½ä¼šèŠ±å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½è¯»æ‡‚ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–å†™æ³¨é‡Šå°±å˜å¾—å°¤ä¸ºé‡è¦äº†ã€‚</p>
<h2 id="2-å˜é‡"><a href="#2-å˜é‡" class="headerlink" title="2 å˜é‡"></a>2 å˜é‡</h2><p>é¦–å…ˆè¯´ä¸€è¯´å…¨å±€å˜é‡å­˜åœ¨å“ªäº›çš„é—®é¢˜å§ï¼<strong>å‘½åå†²çª</strong>ã€<strong>æµ‹è¯•éš¾åº¦å¤§</strong>ã€<strong>æ·±è€¦åˆ</strong>ç­‰ç­‰ã€‚åœ¨åˆ›å»ºå˜é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æ³¨æ„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢</p>
<h4 id="2-1-é¿å…éšæ€§çš„åˆ›å»ºå…¨å±€å˜é‡"><a href="#2-1-é¿å…éšæ€§çš„åˆ›å»ºå…¨å±€å˜é‡" class="headerlink" title="2.1 é¿å…éšæ€§çš„åˆ›å»ºå…¨å±€å˜é‡"></a>2.1 é¿å…éšæ€§çš„åˆ›å»ºå…¨å±€å˜é‡</h4><p>ä»€ä¹ˆæ˜¯éšæ€§çš„å…¨å±€å˜é‡å‘¢ï¼Ÿå®˜æ–¹çš„å›ç­”æ˜¯ï¼š<strong>ä»»ä½•å˜é‡ï¼Œå¦‚æœæœªç»å£°æ˜ï¼Œå°±ä¸ºå…¨å±€å¯¹è±¡æ‰€æœ‰</strong>ã€‚å•¥æ„æ€å‘¢ï¼Ÿå…¶å®å°±æ˜¯æ²¡æœ‰åŠ <strong>var</strong>å£°æ˜çš„ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">obj</span><span class="params">()</span> </span>&#123;</div><div class="line">    name = <span class="string">"aotu"</span>;</div><div class="line">    <span class="keyword">return</span> name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦å¤–ä¸€ç§å®¹æ˜“åˆ›å»ºéšå½¢å…¨å±€å˜é‡çš„æƒ…å†µå°±æ˜¯varå£°æ˜çš„é“¾å¼èµ‹å€¼ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>ï¼ˆï¼‰ </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = b = <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šè¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼šaæ˜¯å±€éƒ¨å˜é‡ï¼Œbæ˜¯å…¨å±€å˜é‡ï¼Œä¸»è¦åŸå› æ˜¯<strong>ä»å³è‡³å·¦</strong>çš„æ“ä½œç¬¦ä¼˜å…ˆçº§ï¼Œå®ƒå®é™…æ‰§è¡Œçš„ç»“æœç­‰åŒäº<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var a</span> = ( b = 0 );</div></pre></td></tr></table></figure></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œéšå¼å…¨å±€å˜é‡å¹¶ä¸æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨varå£°æ˜çš„å˜é‡ï¼Œè€Œæ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œæ—¢ç„¶æ˜¯å±æ€§ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥é€šè¿‡deleteæ“ä½œç¬¦åˆ é™¤ï¼Œä½†å˜é‡ä¸å¯ä»¥ï¼Œä¸”åœ¨<strong>ES5 strict</strong>ä»¥ä¸Šä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<h4 id="2-2-åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜å˜é‡"><a href="#2-2-åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜å˜é‡" class="headerlink" title="2.2 åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜å˜é‡"></a>2.2 åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜å˜é‡</h4><p>åœ¨javascriptä¸­ï¼Œå£°æ˜å˜é‡æœ‰ä¸€ä¸ªâ€œæå‡â€çš„æ¦‚å¿µï¼Œå³æ— è®ºåœ¨å‡½æ•°å“ªé‡Œå£°æ˜ï¼Œæ•ˆæœéƒ½ç­‰åŒäºåœ¨å‡½æ•°é¡¶éƒ¨è¿›è¡Œå£°æ˜ã€‚æ‰€ä»¥æˆ‘ä»¬ç»Ÿä¸€æŠŠå˜é‡åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜ï¼Œæ—¢æœ‰åˆ©äºå¯è¯»æ€§ä¸å¯ç»´æŠ¤è¡Œï¼Œä¹Ÿä¸æ˜“å‡ºé”™ã€‚</p>
<h4 id="2-3-ä½¿ç”¨å•ä¸€varæ¨¡å¼"><a href="#2-3-ä½¿ç”¨å•ä¸€varæ¨¡å¼" class="headerlink" title="2.3 ä½¿ç”¨å•ä¸€varæ¨¡å¼"></a>2.3 ä½¿ç”¨å•ä¸€varæ¨¡å¼</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = <span class="number">1</span>,</div><div class="line">    b = <span class="number">1</span>,</div><div class="line">    c = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å£°æ˜çš„å˜é‡ä¸ä»…å¯è¯»æ€§å¥½ï¼Œè€Œä¸”å¯ä»¥é˜²æ­¢å˜é‡åœ¨å®šä¹‰å‰å°±è¢«ä½¿ç”¨çš„é€»è¾‘é”™è¯¯ï¼Œä¸”ç¼–ç æ›´å°‘ã€‚</p>
<h4 id="2-4-å•å…¨å±€å˜é‡æ–¹å¼"><a href="#2-4-å•å…¨å±€å˜é‡æ–¹å¼" class="headerlink" title="2.4 å•å…¨å±€å˜é‡æ–¹å¼"></a>2.4 å•å…¨å±€å˜é‡æ–¹å¼</h4><p>è™½ç„¶å…¨å±€å˜é‡çš„å®¹æ˜“æ±¡æŸ“å‘½åç©ºé—´ï¼Œä½†æœ‰äº›åŠŸèƒ½çš„éœ€è¦ï¼Œéš¾ä»¥é¿å…ä½¿ç”¨ï¼Œå…³é”®æ˜¯æˆ‘ä»¬åº”è¯¥åšåˆ°é¿å…å…¨å±€å˜é‡è¶…å‡ºæˆ‘ä»¬çš„æŒæ§ï¼Œæœ€ä½³çš„æ–¹æ³•æ˜¯ä¾èµ–å°½å¯èƒ½å°‘çš„å…¨å±€å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•å…¨å±€å˜é‡çš„æ–¹å¼æ¥å¼€å¯æˆ‘ä»¬çš„é¡¹ç›®ï¼Œè¿™ç§æ–¹å¼åœ¨è®¸å¤šçš„javascriptç±»åº“ä¸­éƒ½æœ‰è¿™æ ·ä½¿ç”¨ã€‚å¦‚jQuery,å®ƒå®šä¹‰äº†ä¸¤ä¸ªå…¨å±€å˜é‡$å’ŒjQueryã€‚</p>
<h2 id="3-UIæ¾è€¦åˆ"><a href="#3-UIæ¾è€¦åˆ" class="headerlink" title="3 UIæ¾è€¦åˆ"></a>3 UIæ¾è€¦åˆ</h2><p>ä»€ä¹ˆæ˜¯æ¾è€¦åˆï¼Ÿå½“ä¿®æ”¹ä¸€ä¸ªç»„ä»¶çš„é€»è¾‘ï¼Œè€Œå¯¹å¦ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å½±å“ï¼Œå°±è¯´è¿™å«æ¾è€¦åˆã€‚é€šå¸¸ä¸€ä¸ªå¤§å‹çš„webåº”ç”¨ï¼Œéƒ½æ˜¯ç”±å¤šäººå…±åŒå¼€å‘ç»´æŠ¤ï¼Œè¿™æ—¶å€™æ¾è€¦åˆæ˜¾å¾—è‡³å…³é‡è¦ï¼Œå‡å¦‚ä½ ä¿®æ”¹äº†æŸä¸€å¤„çš„ä»£ç è€Œå½±å“äº†å›¢é˜Ÿå…¶ä»–äººçš„åŠŸèƒ½ï¼Œè¿™æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚é€šå¸¸æˆ‘ä»¬ä¸»è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹</p>
<ul>
<li>å°†javascriptä»cssä¸­æŠ½ç¦»ï¼Œå¦‚é¿å…ä½¿ç”¨cssè¡¨è¾¾å¼</li>
<li>å°†csstä»javascripä¸­æŠ½ç¦»,å¦‚é¿å…ä½¿ç”¨javascriptç›´æ¥ä¿®æ”¹cssï¼Œæœ€ä½³çš„æ–¹æ³•æ˜¯æ“ä½œcssçš„className;</li>
<li>å°†javascriptä»HTMLä¸­æŠ½ç¦»ï¼Œå¦‚é¿å…å°†å‡½æ•°ç›´æ¥åµŒå…¥åˆ°htmlæ‰§è¡Œï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åšåˆ°å°†æ‰€æœ‰çš„jsä»£ç éƒ½æ”¾å…¥å¤–ç½®æ–‡ä»¶ä¸­ï¼Œç¡®ä¿<br>htmlä¸­ä¸ä¼šæœ‰å†…è”çš„jsä»£ç ã€‚</li>
<li>å°†htmlä»javascriptä¸­æŠ½ç¦»,å¦‚é¿å…åœ¨jsä¸­æ‹¼æ¥htmlç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¨¡æ¿å¼•æ“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Vueã€Reactç­‰ã€‚</li>
</ul>
<h2 id="4-é”™è¯¯å¤„ç†"><a href="#4-é”™è¯¯å¤„ç†" class="headerlink" title="4 é”™è¯¯å¤„ç†"></a>4 é”™è¯¯å¤„ç†</h2><h4 id="4-1-ä¸ºä»€ä¹ˆè¦æŠ›å‡ºé”™è¯¯ï¼Ÿ"><a href="#4-1-ä¸ºä»€ä¹ˆè¦æŠ›å‡ºé”™è¯¯ï¼Ÿ" class="headerlink" title="4.1 ä¸ºä»€ä¹ˆè¦æŠ›å‡ºé”™è¯¯ï¼Ÿ"></a>4.1 ä¸ºä»€ä¹ˆè¦æŠ›å‡ºé”™è¯¯ï¼Ÿ</h4><p>åœ¨javascriptå¼€å‘ä¸­ï¼Œæ€»æ˜¯ä¼šæ‚„æ— å£°æ¯çš„å‡ºç°ä¸€äº›è¶…å‡ºæˆ‘ä»¬é¢„æœŸçš„ï¼Œæºå¸¦çš„ä¿¡æ¯ç¨€å°‘çš„ï¼Œéšæ™¦å«ç³Šçš„bugï¼Œè®©æˆ‘ä»¬æªæ‰‹ä¸åŠï¼Œå¤§å¤§å¢åŠ äº†æˆ‘ä»¬è°ƒè¯•é”™è¯¯ã€å®šä½é”™è¯¯çš„éš¾åº¦ï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚å‡è®¾é”™è¯¯ä¸­åŒ…å«è¿™æ ·çš„ä¿¡æ¯ï¼šâ€œç”±äºæŸæŸæƒ…å†µï¼Œå¯¼è‡´æŸæŸå‡½æ•°æ‰§è¡Œé”™è¯¯â€ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯é©¬ä¸Šå°±å¯ä»¥å¼€å§‹è°ƒè¯•è€Œä¸ç”¨èŠ±å¤§é‡çš„æ—¶å€™å»å®šä½é”™è¯¯ï¼Ÿ</p>
<h4 id="4-2-ä½•æ—¶æŠ›å‡ºé”™è¯¯"><a href="#4-2-ä½•æ—¶æŠ›å‡ºé”™è¯¯" class="headerlink" title="4.2 ä½•æ—¶æŠ›å‡ºé”™è¯¯?"></a>4.2 ä½•æ—¶æŠ›å‡ºé”™è¯¯?</h4><p>ä¸»è¦æ˜¯è¾¨è¯†ä»£ç ä¸­å“ªäº›éƒ¨åˆ†åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹æœ€åå¯èƒ½å¯¼è‡´é”™è¯¯,è¿™é‡Œçš„é”™è¯¯é€šå¸¸éƒ½æ˜¯æˆ‘ä»¬åœ¨æ€è€ƒçš„è¿‡ç¨‹ä¸­çš„ä¸€äº›å¯é¢„æœŸçš„é”™è¯¯ã€‚</p>
<h4 id="4-3-æ€æ ·æŠ›å‡ºé”™è¯¯ï¼Ÿ"><a href="#4-3-æ€æ ·æŠ›å‡ºé”™è¯¯ï¼Ÿ" class="headerlink" title="4.3 æ€æ ·æŠ›å‡ºé”™è¯¯ï¼Ÿ"></a>4.3 æ€æ ·æŠ›å‡ºé”™è¯¯ï¼Ÿ</h4><h5 id="4-3-1-ä½¿ç”¨try-catch"><a href="#4-3-1-ä½¿ç”¨try-catch" class="headerlink" title="4.3.1 ä½¿ç”¨try-catch"></a>4.3.1 ä½¿ç”¨try-catch</h5><p>å°†å¯èƒ½å¼•å‘é”™è¯¯çš„ä»£ç æ”¾åœ¨tryå—ä¸­ï¼Œå¤„ç†é”™è¯¯çš„ä»£ç æ”¾åœ¨catchä¸­ï¼Œå¦‚<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    someMethod();</div><div class="line">&#125; <span class="keyword">catch</span> (ex) &#123;</div><div class="line">    catchError(ex);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥å¢åŠ ä¸€ä¸ªfinallyå—ï¼Œè¿™é‡Œéœ€æ³¨æ„çš„æ˜¯finallyå—ä¸­çš„ä»£ç å—ä¸ç®¡æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿï¼Œæœ€åéƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
<h5 id="4-3-2-throw"><a href="#4-3-2-throw" class="headerlink" title="4.3.2 throw"></a>4.3.2 throw</h5><p>å½“æˆ‘ä»¬èƒ½æ¸…æ™°çš„æ•æ‰åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œæœ€å¥½çš„åšæ³•å°±æ˜¯æŠ›å‡ºè¿™ä¸ªé”™è¯¯ï¼Œé¿å…åœ¨ä¸ç»æ„çš„æ—¶å€™åˆé‡åˆ°å®ƒï¼Œè®©å¤§å®¶å°´å°¬ã€‚è¿™é‡Œéœ€æ³¨æ„çš„æ˜¯å½“é‡åˆ°throwæ“ä½œç¬¦æ—¶ï¼Œä»£ç ä¼šç«‹å³åœæ­¢æ‰§è¡Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"method(): descdescdesc"</span>);</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹,æ€»ä¹‹å°±æ˜¯å°½å¯èƒ½ç”¨æœ€çŸ­çš„å­—ç¬¦æè¿°æ¸…æ¥š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">throw</span> &#123; </div><div class="line">    <span class="attribute">name</span>: <span class="string">"myErrorType"</span>,</div><div class="line">    message: <span class="string">"arguments must be a DOM element"</span>,</div><div class="line">    errorMethod: errorMethod</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="5-åˆ›å»ºå¯¹è±¡"><a href="#5-åˆ›å»ºå¯¹è±¡" class="headerlink" title="5 åˆ›å»ºå¯¹è±¡"></a>5 åˆ›å»ºå¯¹è±¡</h2><h4 id="5-1-å¯¹è±¡å­—é¢é‡"><a href="#5-1-å¯¹è±¡å­—é¢é‡" class="headerlink" title="5.1 å¯¹è±¡å­—é¢é‡"></a>5.1 å¯¹è±¡å­—é¢é‡</h4><p>æ‰€è°“çš„å¯¹è±¡å­—é¢é‡å…¶å®å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„é”®å€¼å¯¹å“ˆå¸Œè¡¨ï¼Œè¿™ç§æ–¹å¼ä¸ä»…å¯Œæœ‰è¡¨ç°åŠ›ï¼Œå¯è¯»æ€§å¥½ï¼Œä¸”å­—ç¬¦æ›´çŸ­ï¼Œæ²¡æœ‰ä½œç”¨åŸŸè§£æã€‚å®ƒçš„è¯­æ³•è§„åˆ™å¦‚ä¸‹</p>
<ul>
<li>å¯¹è±¡åŒ…è£…åœ¨å¤§æ‹¬å·ä¸­</li>
<li>é€—å·åˆ†éš”å±æ€§å’Œæ–¹æ³•</li>
<li>ç”¨å†’å·åˆ†éš”å±æ€§åç§°å’Œå±æ€§çš„å€¼<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    name: <span class="string">"aotu"</span>,</div><div class="line">    job: <span class="string">"farmer"</span>,</div><div class="line">    getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line">obj.getName();</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å®ç°ç§æœ‰å±æ€§"><a href="#å®ç°ç§æœ‰å±æ€§" class="headerlink" title="å®ç°ç§æœ‰å±æ€§"></a>å®ç°ç§æœ‰å±æ€§</h5><p>ä»¥ä¸Šä¾‹å­çš„nameã€jobå±æ€§éƒ½æ˜¯å¯ç›´æ¥è®¿é—®çš„ã€‚æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³å®ç°ä¸€äº›ç§æœ‰çš„å±æ€§ï¼Œç„¶åæä¾›ä¸€ä¸ªå…¬æœ‰çš„æ¥å£æ¥å¯¹å¤–è®¿é—®ã€‚è™½ç„¶javascriptå¹¶æ²¡æœ‰ç‰¹æ®Šçš„è¯­æ³•æ¥è¡¨ç¤ºç§æœ‰ã€å…¬å…±å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡<strong>åŒ¿åé—­åŒ…</strong>æ¥å®ç°ï¼Œå†…éƒ¨çš„ä»»æ„å˜é‡éƒ½ä¸ä¼šæš´éœ²ï¼Œæ¥çœ‹ä»¥ä¸‹ä»£ç <br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj;</div><div class="line">   </div><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//è¿™æ ·å°±èƒ½å®ç°ç§æœ‰æˆå‘˜</span></div><div class="line">    <span class="keyword">var</span> name = <span class="string">"aotu"</span>,</div><div class="line">        job = <span class="string">"farmer"</span>;</div><div class="line">       </div><div class="line">    obj = &#123;</div><div class="line">        getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> name;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;())</div></pre></td></tr></table></figure></p>
<p>æ›´ä¼˜é›…çš„å†™æ³•<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"aotu"</span>,</div><div class="line">        job = <span class="string">"farmer"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> name;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure></p>
<p>è¿™ç§å†™æ³•ä¹Ÿæ˜¯<strong>æ¨¡å—æ¨¡å¼</strong>çš„åŸºç¡€æ¡†æ¶ï¼Œåç»­ä¼šæœ‰è¯¦ç»†ä»‹ç»ã€‚</p>
<p>ç†Ÿæ‚‰äº†è¿™ç§æ¨¡å¼ä¹‹åå®ƒè¿˜æœ‰å¾ˆå¤šç§ç©æ³•ï¼Œæ¯”å¦‚å¯ä»¥åƒjQueryè¿™æ ·é“¾å¼è°ƒç”¨ï¼šâ€œ$(â€˜#idâ€™).siblings(â€˜ulâ€™).find(â€œliâ€).addClass();<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">num</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">add</span>: <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.num += arg;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">red</span>: <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.num -= arg;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">setTotal</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.num);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line">obj.add(<span class="number">5</span>).red(<span class="number">2</span>).setTotal(); <span class="comment">//3</span></div></pre></td></tr></table></figure></p>
<h4 id="5-2-æ„é€ å‡½æ•°"><a href="#5-2-æ„é€ å‡½æ•°" class="headerlink" title="5.2 æ„é€ å‡½æ•°"></a>5.2 æ„é€ å‡½æ•°</h4><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ„é€ å‡½æ•°çš„åŸºç¡€æ¡†æ¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//å…¬æœ‰å±æ€§</span></div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"aotu"</span>;</div><div class="line">    <span class="keyword">this</span>.job = <span class="string">"farmer"</span>;</div><div class="line">       </div><div class="line">    <span class="comment">//å…¬æœ‰æ–¹æ³•</span></div><div class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125; </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Obj();</div><div class="line">obj.getName();</div></pre></td></tr></table></figure></p>
<p>åœ¨ä½¿ç”¨newæ–¹å¼å®ä¾‹åŒ–æ„é€ å‡½æ•°é€šå¸¸ä¼šç»å†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶ä¸”thiså˜é‡å¼•ç”¨äº†è¯¥å¯¹è±¡ï¼Œä¸”ç»§æ‰¿äº†è¯¥å¯¹è±¡çš„åŸå‹     </li>
<li>å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ°thiså¼•ç”¨çš„å¯¹è±¡ä¸­</li>
<li>éšå¼çš„è¿”å›æ–°å¯¹è±¡</li>
</ul>
<h5 id="å¿˜è®°ä½¿ç”¨NEWçš„æƒ…å†µ"><a href="#å¿˜è®°ä½¿ç”¨NEWçš„æƒ…å†µ" class="headerlink" title="å¿˜è®°ä½¿ç”¨NEWçš„æƒ…å†µ"></a>å¿˜è®°ä½¿ç”¨NEWçš„æƒ…å†µ</h5><p>å½“ç„¶æˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¿˜è®°ä½¿ç”¨newæ“ä½œç¬¦çš„å®ä¾‹åŒ–çš„æƒ…å†µï¼Œç„¶è€Œè¿™å¹¶ä¸ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œä½†æ„é€ å‡½æ•°çš„thisæŒ‡å‘äº†å…¨å±€å¯¹è±¡ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé€»è¾‘é”™è¯¯æˆ–è€…æ„å¤–ï¼Œæ¥çœ‹ä¸‹é¢æ‰§è¡Œçš„ç»“æœ<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var obj = Obj();</div><div class="line">obj.getName(); //Cannot <span class="keyword">read</span> <span class="keyword">property</span><span class="title"> </span>'get<span class="literal">Inf</span>o' of undefined</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†é¿å…è¿™ç§æ„å¤–å‘ç”Ÿï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­æ£€æŸ¥thisæ˜¯å¦ä¸ºæ„é€ å‡½æ•°çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¼ºåˆ¶ä½¿ç”¨newæ“ä½œç¬¦ï¼Œç»§ç»­çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Obj))&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Obj();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"aotu"</span>;</div><div class="line">    <span class="keyword">this</span>.age = <span class="number">25</span>;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†çœ‹æ‰§è¡Œçš„ç»“æœ<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var obj = Obj()<span class="comment">;</span></div><div class="line">obj.getName()<span class="comment">; //"aotu"</span></div></pre></td></tr></table></figure></p>
<h5 id="é™æ€æˆå‘˜"><a href="#é™æ€æˆå‘˜" class="headerlink" title="é™æ€æˆå‘˜"></a>é™æ€æˆå‘˜</h5><p>åœ¨javascriptä¸­ï¼Œå¹¶æ²¡æœ‰ç‰¹æ®Šçš„è¯­æ³•æ¥è¡¨ç¤ºé™æ€æˆå‘˜ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä¸ºæ„é€ å‡½æ•°æ·»åŠ å±æ€§è¿™ç§æ–¹å¼æ¥å®ç°è¿™ç§è¯­æ³•ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ„é€ å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">//æ·»åŠ é™æ€æ–¹æ³•</span></div><div class="line">Obj.getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">25</span>); </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//æ³¨æ„è¿™é‡Œçš„è°ƒç”¨æ–¹å¼</span></div><div class="line">Obj.getAge(); <span class="comment">//25</span></div><div class="line"></div><div class="line"><span class="comment">//å¦‚æœä½¿ç”¨å®ä¾‹å¯¹è±¡è°ƒç”¨</span></div><div class="line">obj.getAge(); <span class="comment">//Object #&lt;Obj&gt; has no method 'getAge'</span></div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œå¤§å®¶éœ€è¦æ³¨æ„è°ƒç”¨é™æ€æ–¹æ³•çš„æ–¹å¼ï¼Œè‹¥ä»¥å®ä¾‹å¯¹è±¡è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•æ˜¯æ— æ³•æ­£å¸¸è¿è¡Œçš„ï¼Œåä¹‹åŒç†ã€‚</p>
<h5 id="ç§æœ‰å±æ€§ä¸æ–¹æ³•"><a href="#ç§æœ‰å±æ€§ä¸æ–¹æ³•" class="headerlink" title="ç§æœ‰å±æ€§ä¸æ–¹æ³•"></a>ç§æœ‰å±æ€§ä¸æ–¹æ³•</h5><p>åœ¨ä»¥ä¸Šä¾‹å­ä¸­æ„é€ å‡½æ•°çš„å±æ€§ä¸æ–¹æ³•éƒ½å±äºå…¬æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æ„é€ å‡½æ•°æ·»åŠ ç§æœ‰æ–¹æ³•ä¸ç§æœ‰å±æ€§<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"auto"</span>;</div><div class="line">    <span class="keyword">this</span>.age = <span class="number">25</span>;</div><div class="line">     </div><div class="line">    <span class="comment">//ç§æœ‰å±æ€§</span></div><div class="line">    <span class="keyword">var</span> address = <span class="string">"sz"</span>,</div><div class="line">        that = <span class="keyword">this</span>;</div><div class="line">      </div><div class="line">    <span class="comment">//ç§æœ‰æ–¹æ³•</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getAddress</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(that.address);</div><div class="line">    &#125;</div><div class="line">       </div><div class="line">    <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="æ„é€ å‡½æ•°å­˜åœ¨çš„é—®é¢˜"><a href="#æ„é€ å‡½æ•°å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="æ„é€ å‡½æ•°å­˜åœ¨çš„é—®é¢˜"></a>æ„é€ å‡½æ•°å­˜åœ¨çš„é—®é¢˜</h5><p>æ„é€ å‡½æ•°çš„ä¸»è¦é—®é¢˜å°±æ˜¯å½“å¤šæ¬¡å®ä¾‹åŒ–è¿™ä¸ªæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€éï¼Œè¿™æ ·å°±ç­‰äºåœ¨å†…å­˜ä¸­çš„æ‹·è´ã€‚è§£å†³é—®é¢˜çš„ç¬¬ä¸€ç§æ€è·¯å°±æ˜¯å°†å‡½æ•°ä¸­çš„æ–¹æ³•é€šè¿‡å‡½æ•°å®šä¹‰è½¬ç§»åˆ°å‡½æ•°å¤–é¢ï¼Œå¹¶å°†æŒ‡é’ˆä¼ é€’ç»™æ„é€ å‡½æ•°ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"aotu"</span>;</div><div class="line">    <span class="keyword">this</span>.age = <span class="number">25</span>;</div><div class="line"></div><div class="line">    <span class="comment">//å°†æŒ‡é’ˆèµ‹ç»™getName</span></div><div class="line">    <span class="keyword">this</span>.getName = getName;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;   </div><div class="line"></div><div class="line"><span class="keyword">var</span> obj1 = <span class="keyword">new</span> Obj();</div><div class="line"><span class="keyword">var</span> obj2 = <span class="keyword">new</span> Obj()</div></pre></td></tr></table></figure></p>
<p>è™½ç„¶ä¹Ÿè§£å†³äº†ä»¥ä¸Šçš„é—®é¢˜ï¼Œä½†å¹¶æ²¡æœ‰è¾¾åˆ°å°è£…çš„æ•ˆæœã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¼•å…¥åŸå‹<strong>prototype</strong>çš„æ¦‚å¿µã€‚</p>
<h4 id="5-3-åŸå‹æ¨¡å¼"><a href="#5-3-åŸå‹æ¨¡å¼" class="headerlink" title="5.3 åŸå‹æ¨¡å¼"></a>5.3 åŸå‹æ¨¡å¼</h4><p>æ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹prototypeï¼ŒåŸå‹å¯¹è±¡åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨åŸå‹å¯¹è±¡å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒçš„å±æ€§å’Œæ–¹æ³•ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line">Obj.prototype.name = <span class="string">"aotu"</span>;</div><div class="line">Obj.prototype.age = <span class="number">25</span>;</div><div class="line">Obj.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj1 = <span class="keyword">new</span> Obj();</div><div class="line">obj1.getName() <span class="comment">//"aotu"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = <span class="keyword">new</span> Obj();</div><div class="line">obj2.getName() <span class="comment">//"aotu"</span></div><div class="line"></div><div class="line">alert(obj1.getName == obj2.getName); <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>ç”±æ­¤å¯è§obj1 å’Œ obj2 è®¿é—®çš„æ˜¯åŒä¸€ä¸ªgetNameå‡½æ•°</p>
<h5 id="æ›´å¥½çš„å†™æ³•"><a href="#æ›´å¥½çš„å†™æ³•" class="headerlink" title="æ›´å¥½çš„å†™æ³•"></a>æ›´å¥½çš„å†™æ³•</h5><p>æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„åŸå‹éƒ½å†™åœ¨ä¸€ä¸ªå¯¹è±¡å­—é¢é‡é‡Œï¼Œè¿™æ ·æ•´ä¸ªä»£ç çœ‹èµ·æ¥æ›´åŠ ç®€æ´æ¸…æ™°ï¼Œç»§ç»­å¾€ä¸‹çœ‹<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">Obj.prototype = &#123;</div><div class="line">    name: <span class="string">"aotu"</span>,</div><div class="line">    age: <span class="number">25</span>,</div><div class="line">    getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼éœ€æ³¨æ„çš„é—®é¢˜"><a href="#ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼éœ€æ³¨æ„çš„é—®é¢˜" class="headerlink" title="ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼éœ€æ³¨æ„çš„é—®é¢˜"></a>ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼éœ€æ³¨æ„çš„é—®é¢˜</h5><p>åœ¨ä½¿ç”¨è¿™ç§å­—é¢é‡çš„æ–¹å¼çš„æ—¶å€™éœ€æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹</p>
<p>1.å°†prototypeè®¾ç½®ä¸ºç­‰äºä¸€ä¸ªå¯¹è±¡å­—é¢é‡å½¢å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œå®ƒæœ¬è´¨ä¸Šå·²ç»å®Œå…¨é‡å†™äº†é»˜è®¤çš„prototypeå¯¹è±¡ï¼Œæœ€ç»ˆç»“æœè™½ç„¶ç›¸åŒä½†æ˜¯å…¶constructorå±æ€§ä¸å†æŒ‡å‘è¯¥å¯¹è±¡ã€‚</p>
<p>constructoræ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªconstructorï¼Œå®ƒæŒ‡å‘prototypeå±æ€§æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆï¼Œæ¢å¥è¯è¯´è¿™ä¸ªconstructorå°±æ˜¯æŒ‡è¿™ä¸ªæ„é€ å‡½æ•°ã€‚ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º<br><figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj= <span class="function"><span class="keyword">new</span> <span class="title">Obj</span>();</span></div><div class="line"><span class="title">alert</span>(obj.cnstructor == <span class="type">Obj</span>) <span class="comment">//false;</span></div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨é‡å†™prototypeçš„æ—¶å€™ç»™constructoræŒ‡å®šæ„é€ å‡½æ•°ï¼Œæ¥ç€å¾€ä¸‹çœ‹<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">Obj.prototype = &#123;</div><div class="line">    constructor: Obj,</div><div class="line">    name: <span class="string">"aotu"</span>,</div><div class="line">    age: <span class="number">25</span>,</div><div class="line">    getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj= <span class="keyword">new</span> Obj();</div><div class="line">alert(obj.cnstructor == Obj) <span class="comment">//true;</span></div></pre></td></tr></table></figure></p>
<p>2.å½“æˆ‘ä»¬é‡å†™æ•´ä¸ªåŸå‹çš„æ—¶å€™å¦‚æœå…ˆåˆ›å»ºäº†å®ä¾‹ï¼Œå°±ä¼šåˆ‡æ–­æ„é€ å‡½æ•°ä¸åŸå‹ä¹‹é—´çš„è”ç³»ï¼Œå› ä¸º<strong>å®ä¾‹çš„æŒ‡é’ˆä»…ä»…æŒ‡å‘åŸå‹ï¼Œè€Œä¸æ˜¯æ„é€ å‡½æ•°</strong>ï¼Œåœ¨å®é™…çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œåº”è¯¥å°½é‡é¿å…è¿™ç§é”™è¯¯<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Obj();</div><div class="line"></div><div class="line">Obj.prototype = &#123;</div><div class="line">    constructor: Obj,</div><div class="line">    name: <span class="string">"aotu"</span>,</div><div class="line">    age: <span class="number">25</span>,</div><div class="line">    getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">obj.getName();  <span class="comment">//error</span></div></pre></td></tr></table></figure></p>
<h5 id="ç»„åˆä½¿ç”¨äºŒè€…"><a href="#ç»„åˆä½¿ç”¨äºŒè€…" class="headerlink" title="ç»„åˆä½¿ç”¨äºŒè€…"></a>ç»„åˆä½¿ç”¨äºŒè€…</h5><p>åœ¨æˆ‘ä»¬çš„å…·ä½“åº”ç”¨ä¸­ï¼Œé€šå¸¸æ¯”è¾ƒå¤šçš„æ˜¯ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼ã€‚<strong>æ„é€ å‡½æ•°ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼ŒåŸå‹ç”¨äºå®šäºå…±äº«çš„å±æ€§å’Œæ–¹æ³•</strong>ï¼Œè¿™æ ·èƒ½å¤Ÿæœ€å¤§é™åº¦çš„èŠ‚çœå†…å­˜ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°ä¸åŸå‹çš„ä¾‹å­<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(!ï¼ˆ<span class="keyword">this</span> <span class="keyword">instanceof</span> Objï¼‰)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Obj();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"aotu"</span>;</div><div class="line">    <span class="keyword">this</span>.age = <span class="number">25</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Obj.prototype = &#123;</div><div class="line">    constructor: Obj,</div><div class="line">    getName: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = Obj();</div><div class="line">obj.getName();</div></pre></td></tr></table></figure></p>
<h4 id="5-4-æ¨¡å—æ¨¡å¼"><a href="#5-4-æ¨¡å—æ¨¡å¼" class="headerlink" title="5.4 æ¨¡å—æ¨¡å¼"></a>5.4 æ¨¡å—æ¨¡å¼</h4><p>æ¨¡å—æ¨¡å¼æ˜¯ä¸€ç§éå¸¸é€šç”¨çš„æ¨¡å¼ï¼Œä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„æ¨¡å¼ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹</p>
<ul>
<li>æ¨¡å—åŒ–</li>
<li>å¯å¤ç”¨</li>
<li>æ¾è€¦åˆ</li>
<li>åŒºåˆ†äº†ç§æœ‰æ–¹æ³•ä¸å…¬å…±æ–¹æ³•</li>
</ul>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹æ¨¡å—æ¨¡å¼çš„åŸºç¡€æ¡†æ¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> testModule = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//ç§æœ‰æˆå‘˜</span></div><div class="line">    <span class="keyword">var</span> testNode = <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>);</div><div class="line"></div><div class="line">    <span class="comment">//ä¹Ÿå¯åœ¨æ­¤å®šä¹‰ç§æœ‰æ–¹æ³•</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateMethod</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"this is Private method!"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="comment">//å¯¹å¤–å…¬å¼€çš„æ–¹æ³•</span></div><div class="line">        setHtml: <span class="function"><span class="keyword">function</span> (<span class="params">txt</span>) </span>&#123;</div><div class="line">            testNode.innerHTML = txt;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line"><span class="keyword">var</span> testModule = <span class="keyword">new</span> testModule();</div><div class="line">testModule.setHtml(<span class="string">"Hello"</span>);</div></pre></td></tr></table></figure></p>
<p>è¿™ç§æ–¹å¼çœ‹èµ·æ¥æ¯”è¾ƒæ¸…æ™°ã€ç®€æ´ï¼Œä½†å°±æ˜¯æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½éœ€è¦ç”¨newæ¥å®ä¾‹åŒ–ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªå®ä¾‹åœ¨å†…å­˜é‡Œéƒ½æ˜¯ä¸€ä»½æ‹·è´ã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿâ€¦æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸ªåŒ¿åé—­åŒ…æ¥å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span> &#123;</div><div class="line">   //å°†æ‰€æœ‰çš„å˜é‡å’Œ<span class="function"><span class="keyword">function</span>æ”¾åœ¨è¿™é‡Œå£°æ˜ï¼Œå…¶ä½œç”¨åŸŸä¹Ÿåªèƒ½åœ¨è¿™ä¸ªåŒ¿åé—­åŒ…é‡Œé¢,æ—¢è¾¾åˆ°äº†å°è£…çš„ç›®çš„ï¼Œä¹Ÿèƒ½é˜²æ­¢å‘½åå†²çª</span></div><div class="line">&#125;<span class="params">()</span>)</div></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ƒåº”ç”¨åˆ°å…·ä½“çš„å®ä¾‹ä¸­ï¼Œä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„Moduleæ¨¡å¼<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> testModule =(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> my = &#123;&#125;,</div><div class="line">        testNode = <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>);</div><div class="line">     </div><div class="line">    my.setHtml = <span class="function"><span class="keyword">function</span>(<span class="params">txt</span>) </span>&#123;</div><div class="line">        testNode.innerHTML = txt;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> my;</div><div class="line">&#125; ())</div><div class="line"></div><div class="line"><span class="comment">//è°ƒç”¨æ–¹å¼</span></div><div class="line">testModule.setHtml(<span class="string">"Hello"</span>);</div></pre></td></tr></table></figure></p>
<p>é€šå¸¸åœ¨ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ä¸­ï¼Œä¼šæœ‰å¤šäººå…±åŒå¼€å‘ä¸€ä¸ªåŠŸèƒ½çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è¿ç”¨è¿™ç§æ¨¡å¼å°†å…¨å±€å˜é‡å½“ä½œå‚æ•°ä¼ é€’ï¼Œç„¶åé€šè¿‡å˜é‡è¿”å›ï¼Œä»è€Œè¾¾åˆ°å¤šäººåä½œçš„ç›®çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> testModule =(<span class="function"><span class="keyword">function</span> (<span class="params">my</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> testNode = <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>);</div><div class="line">     </div><div class="line">    my.setHtml = <span class="function"><span class="keyword">function</span>(<span class="params">txt</span>) </span>&#123;</div><div class="line">        testNode.innerHTML = txt;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> my;</div><div class="line">&#125; (testModule || &#123;&#125;))</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡å¼å°†ç§æœ‰çš„å¯¹è±¡æˆ–è€…å±æ€§ä¿æŠ¤èµ·æ¥ï¼Œç„¶åè®¾ç½®ä¸€äº›å…¬å…±æ¥å£å¯¹å¤–è®¿é—®ï¼Œç»§ç»­æ¥çœ‹ä¸‹é¢çš„ä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> testModule =(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> testNode = <span class="built_in">document</span>.getElementById(<span class="string">"test"</span>),</div><div class="line">     </div><div class="line">        setHtml = <span class="function"><span class="keyword">function</span>(<span class="params">txt</span>) </span>&#123;</div><div class="line">            testNode.innerHTML = txt;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">//è®¾ç½®å…¬å…±è°ƒç”¨æ–¹æ³•</span></div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">setHtml</span>: setHtml</div><div class="line">        &#125;</div><div class="line">    &#125; ())</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šå‡ ç§æ–¹å¼ä»…ä»…åªæ˜¯ä¸€äº›åˆ›å»ºå¯¹è±¡çš„åŸºç¡€ï¼Œé€šè¿‡çµæ´»è¿ç”¨è¿™äº›åŸºç¡€ï¼Œå¯ä»¥å˜æ¢å‡ºä¼ è¯´ä¸­å„ç§å„æ ·çš„æ¨¡å¼ï¼Œå¦‚è¿­ä»£å™¨æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ç­‰ï¼Œå¯¹äºåç»­å­¦ä¹ å…¶ä»–çš„æŠ€æœ¯ä¹Ÿæ˜¯ææœ‰å¸®åŠ©çš„ï¼Œå¦‚<strong>React</strong>:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyTitle = React.createClass(&#123;</div><div class="line">    <span class="attr">getDefaultProps</span> : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">title</span> : <span class="string">'Hello World'</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> &#123;this.props.title&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Vue</strong>:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">new</span> <span class="selector-tag">Vue</span>(&#123;</div><div class="line">    <span class="attribute">el</span>: <span class="string">'#app'</span>,</div><div class="line">    data: &#123;</div><div class="line">        message: <span class="string">'Hello Vue.js!'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="selector-tag">methods</span>: &#123;</div><div class="line">        <span class="attribute">reverseMessage</span>: function () &#123;</div><div class="line">            this.message = this.message.<span class="built_in">split</span>(<span class="string">''</span>).<span class="built_in">reverse</span>().<span class="built_in">join</span>(<span class="string">''</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœ‰é”™æ¼ï¼Œæ³è¯·æŒ‡æ­£ï¼Œå¤§å®¶å…±åŒè¿›æ­¥ï¼åœ¨ä¸‹ä¸€æœŸä¸­ï¼Œä¼šç»§ç»­è·Ÿå¤§å®¶æ¢è®¨æ›´å¤šå¥½ç©çš„ä¸œè¥¿ï¼Œæ•¬è¯·æœŸå¾…~~~</p>
<h2 id="6-å‚è€ƒèµ„æ–™"><a href="#6-å‚è€ƒèµ„æ–™" class="headerlink" title="6 å‚è€ƒèµ„æ–™"></a>6 å‚è€ƒèµ„æ–™</h2><p>ã€Šç¼–å†™å¯ç»´æŠ¤çš„JavaScriptã€‹[ç¾] Nicholas C. Zakas è‘—<br>ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ã€‹[ç¾] Addy Osmani è‘—<br>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡(ç¬¬3ç‰ˆ)ã€‹<br>åšæ–‡ï¼š<a href="http://www.cnblogs.com/TomXu/tag/JavaScript/" target="_blank" rel="external">æ·±å…¥ç†è§£JavaScriptç³»åˆ—</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¼–ç¨‹æ˜¯ä¸€é—¨è‰ºæœ¯æ´»ï¼Œå¥½çš„ä»£ç åº”è¯¥å°±åƒä½çš„æˆ¿å­ä¸€æ ·ï¼Œæœ‰æ•´ä½“çš„æ¡†æ¶ï¼Œæœ‰é—¨ï¼Œæœ‰çª—æˆ·ï¼Œç›¸äº’ç‹¬ç«‹åˆå®Œç¾ç»„åˆã€‚ä½ è§‰å¾—é—¨ä¸å¤Ÿç»“å®ï¼Œå°±æ‹†ä¸‹æ¥æ¢ä¸ªå®å¿ƒçš„ï¼›ä½ è§‰å¾—çª—æˆ·ä¸å¤Ÿæ˜äº®å°±æ¢ä¸ªå…¨ç»ç’ƒçš„ï¼Œæ€»ä¹‹å¯¹æˆ¿å­çš„å…¶ä»–éƒ¨ä½æ²¡æœ‰ä»»ä½•å½±å“ã€‚æ‰€ä»¥è¯´æ¯ä¸€ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æœ‰ä¸€é¢—è®¾è®¡å¸ˆçš„å¿ƒã€‚æœ¬æ–‡ä¸»è¦ä»&lt;strong&gt;ç¼–ç &lt;/strong&gt;ã€&lt;strong&gt;å˜é‡&lt;/strong&gt;ã€&lt;strong&gt;å¤„ç†é”™è¯¯&lt;/strong&gt;ã€&lt;strong&gt;å¯¹è±¡&lt;/strong&gt;ç­‰åŸºç¡€æ–¹é¢è¿›è¡Œç®€å•çš„æ¢è®¨ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶çš„å·¥ä½œæœ‰æ‰€å¸®åŠ©~~&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ç¼–ç é£æ ¼" scheme="https://aotu.io/tags/%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC/"/>
    
      <category term="å˜é‡" scheme="https://aotu.io/tags/%E5%8F%98%E9%87%8F/"/>
    
      <category term="UIæ¾è€¦åˆ" scheme="https://aotu.io/tags/UI%E6%9D%BE%E8%80%A6%E5%90%88/"/>
    
      <category term="é”™è¯¯å¤„ç†" scheme="https://aotu.io/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"/>
    
      <category term="åˆ›å»ºå¯¹è±¡" scheme="https://aotu.io/tags/%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/"/>
    
      <category term="å¯è¯»æ€§" scheme="https://aotu.io/tags/%E5%8F%AF%E8%AF%BB%E6%80%A7/"/>
    
      <category term="å¯ç»´æŠ¤æ€§" scheme="https://aotu.io/tags/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…åœ°åœ¨Storyboardä¸­è®¾ç½®åœ†è§’</title>
    <link href="https://aotu.io/notes/2016/03/30/cornerRadius-in-Storyboard/"/>
    <id>https://aotu.io/notes/2016/03/30/cornerRadius-in-Storyboard/</id>
    <published>2016-03-30T08:56:03.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>é¡¹ç›®ä¸­ç»å¸¸é‡åˆ°ä¸€äº›è®¾è®¡ä½¿ç”¨åœ†è§’ï¼Œä¸å¾—ä¸è¯´è¿™æ ·çš„è®¾è®¡ç»å¸¸èƒ½å¤Ÿä¸ºAppçš„è§†å›¾æ¶¦è‰²ä¸å°‘ï¼<br><a id="more"></a></p>
<h3 id="é€šå¸¸åšæ³•"><a href="#é€šå¸¸åšæ³•" class="headerlink" title="é€šå¸¸åšæ³•"></a>é€šå¸¸åšæ³•</h3><p>å¯¹äºä»£ç å…šæ¥è¯´ï¼Œå¾ˆç®€å•çš„åŠ ä¸Šä¸€è¡Œä»£ç å°±èƒ½å¤Ÿæå®šï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">view<span class="selector-class">.layer</span><span class="selector-class">.cornerRadius</span> = <span class="number">5</span></div></pre></td></tr></table></figure>
<p>å¯¹äº Storyboard ç‹‚é­”ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¾ˆå¤šäººä¼šå…ˆæŠŠè§†å›¾æ‹‰ä¸€ä¸ª IBOutlet ç„¶åå†åˆ° <code>awakeFromeNib:</code> æˆ–è€… <code>viewDidLoad:</code> æ–¹æ³•ä¸­å»è®¾ç½®åœ†è§’ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> customView: <span class="type">UIView</span>!</div><div class="line"></div><div class="line">   <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="keyword">super</span>.viewDidLoad()</div><div class="line">       customView.layer.cornerRadius = <span class="number">5</span></div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¯¹ä»£ç æœ‰ä¸€å®šæ´ç™–çš„å¼ºè¿«ç—‡æ‚£è€…æ¥è¯´ï¼Œè¿™æ ·çš„åšæ³•ç»å¸¸æ˜¯è¦å‘½çš„ï¼å®åœ¨æ— æ³•å¿å—ä¸€ä¸ªå°å°åœ†è§’éƒ½ä¸èƒ½åœ¨IBä¸­è®¾ç½®ï¼Œéœ€è¦å¦å¤–å•ç‹¬åŠ ä¸€è¡Œä»£ç æ¥å®Œæˆï¼Œè¿èƒŒäº†ä½è€¦åˆï¼Œé«˜å†…èšçš„åŸåˆ™ã€‚æœ‰äººé©¬ä¸Šæå‡ºå»ºè®®ï¼Œé‚£å°±ä½¿ç”¨IBçš„è¿è¡Œæ—¶å±æ€§ï¼ˆRuntime Attributesï¼‰ï¼Œæœ‰äº›æ–°æ‰‹å¯èƒ½å¯¹å®ƒè¿˜ä¸å¤ªç†Ÿæ‚‰ï¼š</p>
<p><img src="http://mark2012.qiniudn.com/runtime_attributes.png" alt="IBçš„è¿è¡Œæ—¶å±æ€§è®¾ç½®"></p>
<p>è¿™çš„ç¡®ä¹Ÿæ˜¯ä¸ªä¸é”™çš„æ–¹æ³•ï¼Œå¯ä»¥è¾¾åˆ°é«˜å†…èšçš„æ•ˆæœã€‚ä¸è¿‡ç”¨è¿‡çš„äººéƒ½çŸ¥é“ï¼Œå¾ˆå®¹æ˜“å°±æŠŠ keyPath æ‹¼å†™é”™ï¼Œè€Œä¸”ç”±äºè¿™ä¸ªè®¾ç½®å’Œå…¶ä»–å±æ€§çš„è®¾ç½®åˆ†å¼€ï¼Œå¯è¯»æ€§å¯ä»¥è¯´å¾ˆå·®å¾ˆå·®ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å‘¢ï¼Ÿ</p>
<h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><p>Xcode6ä¹‹åè¿è¡Œæ—¶å±æ€§å‡çº§åˆ°äº† <strong>@IBInspectable</strong> ï¼Œåˆ©ç”¨è¿™ä¸ªæˆ‘ä»¬å¯ä»¥ç»™ UIView æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œç„¶åå°±å¯ä»¥åœ¨IBä¸­è¿›è¡Œè®¾ç½®ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³ç»™ <strong>ViewController</strong> æ·»åŠ ä¸€ä¸ªæ•°å€¼åˆ°IBä¸­è®¾ç½®ï¼Œåœ¨ä¸Šè¿°ä»£ç çš„æœ€å‰é¢æ’å…¥ä»£ç ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBInspectable</span> <span class="keyword">var</span> customNumber: <span class="built_in">Int</span>?</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬å°±èƒ½åœ¨å±æ€§æ£€æŸ¥å™¨ä¸Šçœ‹åˆ°å¦‚å›¾æ‰€ç¤ºå†…å®¹ï¼Œå¾ˆå®¹æ˜“åœ°å¯¹æ•°å€¼è¿›è¡Œè®¾ç½®:</p>
<p><img src="http://mark2012.qiniudn.com/custom_number.png" alt="è‡ªå®šä¹‰å±æ€§è®¾ç½®"></p>
<blockquote>
<p><strong>@IBInspectable</strong> è¿˜æ”¯æŒä»¥ä¸‹ç±»å‹å±æ€§ï¼š</p>
<ul>
<li><strong>Boolean</strong></li>
<li><strong>Number</strong></li>
<li><strong>String</strong></li>
<li><strong>Point</strong></li>
<li><strong>Size</strong> </li>
<li><strong>Rect</strong></li>
<li><strong>Range</strong></li>
<li><strong>Color</strong></li>
<li><strong>Image</strong></li>
<li><strong>nil</strong></li>
</ul>
</blockquote>
<p>å›åˆ°æ­£é¢˜ï¼Œæˆ‘ä»¬è§†å›¾çš„åœ†è§’è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿä¹Ÿè®¸ä½ ä»¬é©¬ä¸Šæƒ³åˆ°äº†ç»§æ‰¿ï¼Œå®ç°ä¸€ä¸ª <strong>UIView</strong> çš„åŸºç±»ï¼ŒåŸºç±»ä¸­æ·»åŠ åœ†è§’çš„ <strong>@IBInspectable</strong> å±æ€§ã€‚ä½†è¿™æ ·ä½ é©¬ä¸Šå—…åˆ°äº†ä¸å¥½çš„å‘³é“ï¼Œä½ æ‰€æœ‰æƒ³è¦ä½¿ç”¨è¯¥å±æ€§çš„è§†å›¾éƒ½è¦ç»§æ‰¿è‡ªè¯¥åŸºç±»ï¼Œé‚£å²‚ä¸æ˜¯æ›´åŠ éº»çƒ¦ï¼</p>
<p>å…¶å®æœ€å¥½çš„è§£å†³æ–¹æ³•ä½ åº”è¯¥å¿ƒé‡Œæœ‰æ•°ï¼Œå¦‚æœè¯´åœ¨ Object-C ä¸­ç»™å·²æœ‰çš„ç±»æ·»åŠ æ–¹æ³•ï¼Œä½ è‚¯å®šé©¬ä¸Šèƒ½æƒ³åˆ° <strong>Category</strong> ï¼ä¸è¿‡å¯èƒ½æœ‰äº›äººè¿˜æ²¡ä¸æ¸…æ¥šåº”è¯¥å¦‚ä½•åœ¨ <strong>Category</strong> ä¸­æ·»åŠ å±æ€§ã€‚ç”±äºè¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯ Swift ï¼Œç¨åæˆ‘ä»¬å†è¯´OCä¸­åº”è¯¥å¦‚ä½•å®ç°ã€‚ Swift ä¸­åº”è¯¥ä½¿ç”¨ <strong>extension</strong> æ¥å¯¹ <strong>UIView</strong> è¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦æ·»åŠ  <strong>@IBInspectable</strong> æ¥æ‰©å±•å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŒæ—¶å®ç° <strong>setter &amp; getter</strong> ï¼Œåˆ›å»ºä¸€ä¸ªå‘½åä¸º <code>UIView+O2CornerRadius.swift</code> çš„æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> cornerRadius: <span class="type">CGFloat</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">return</span> layer.cornerRadius</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// also  set(newValue)</span></div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            layer.cornerRadius = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªéœ€è¦å¦‚æ­¤ç®€å•åœ°æ·»åŠ ä¸€ä¸ªæ‰©å±•ï¼Œä¸éœ€è¦ <strong>import</strong> ï¼Œä¸å¿…ä»»ä½•å¤šä½™ä»£ç ï¼Œæˆ‘ä»¬å°±å¯ä»¥éå¸¸éå¸¸æ–¹ä¾¿åœ°åœ¨ä»»æ„IBçš„å±æ€§æ£€æŸ¥å™¨ä¸­å¯¹åœ†è§’è¿›è¡Œè®¾ç½®äº†ï¼è¿™ä¸å°±æ˜¯æˆ‘ä»¬æ¢¦å¯ä»¥æ±‚çš„è§£è€¦å—ï¼Ÿï¼ï¼:)</p>
<p><img src="http://mark2012.qiniudn.com/corner_radius.png" alt="è‡ªå®šä¹‰åœ†è§’å±æ€§è®¾ç½®"></p>
<p>å®é™…ä¸Šï¼Œ <strong>@IBInspectable</strong> æ˜¯å¯¹è¿è¡Œæ—¶çš„ä¸€ç§æ‰©å±•ï¼Œä½ æ‰€æœ‰çš„è®¾ç½®éƒ½ä¼šåœ¨ä¸Šè¿°æåˆ°çš„è¿è¡Œæ—¶å±æ€§ï¼ˆRuntime Attributesï¼‰æœ‰æ‰€ä½“ç°ã€‚</p>
<h3 id="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"><a href="#æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"></a>æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</h3><p>æˆ‘ä»¬è¿˜å¯ä»¥å¢åŠ å¾ˆå¤šå†…å®¹çš„æ‰©å±•ï¼Œä¾‹å¦‚é˜´å½±ã€è¾¹æ¡†ã€è¾¹æ¡†é¢œè‰²ç­‰ç­‰ï¼å­¦ä¼šäº†è¿™æ ·çš„å¥‡æ·«æŠ€å·§ï¼Œè¿˜ä¸èµ¶ç´§åˆ°ä½ çš„é¡¹ç›®ä¸­å»å®è·µï¼</p>
<p>è¯´è¯´ Object-C çš„ä»£ç å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>Category</strong> åŒæ ·éœ€è¦åŒæ—¶å®ç° <strong>setter &amp; getter</strong> :</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//UIView+O2CornerRadius.h</span></div><div class="line"><span class="variable">@interface</span> UIView (O2CornerRadius)</div><div class="line"> </div><div class="line"><span class="variable">@property</span> (nonatomic, assign) IBInspectable CGFloat cornerRadius;</div><div class="line"> </div><div class="line"><span class="variable">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//UIView+O2CornerRadius.m</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIView</span> (<span class="title">O2CornerRadius</span>)</span></div><div class="line"> </div><div class="line">- (<span class="keyword">void</span>)setCornerRadius:(<span class="built_in">CGFloat</span>)cornerRadius</div><div class="line">&#123;</div><div class="line">    <span class="keyword">self</span>.layer.cornerRadius = cornerRadius;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">- (<span class="built_in">CGFloat</span>)cornerRadius</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.layer.cornerRadius;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¡¹ç›®ä¸­ç»å¸¸é‡åˆ°ä¸€äº›è®¾è®¡ä½¿ç”¨åœ†è§’ï¼Œä¸å¾—ä¸è¯´è¿™æ ·çš„è®¾è®¡ç»å¸¸èƒ½å¤Ÿä¸ºAppçš„è§†å›¾æ¶¦è‰²ä¸å°‘ï¼&lt;br&gt;
    
    </summary>
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://aotu.io/cates/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://aotu.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://aotu.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å¼€å‘ä¸ HTTP/2 çš„ç¾ç»Šâ€”â€”å®‰åˆ©ç¯‡</title>
    <link href="https://aotu.io/notes/2016/03/17/http2-char/"/>
    <id>https://aotu.io/notes/2016/03/17/http2-char/</id>
    <published>2016-03-17T08:54:00.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>HTTP/2 æ˜¯ä¸‡ç»´ç½‘ï¼ˆWWWï¼‰åŸºç¡€åè®® HTTP 16å¹´æ¥çš„é¦–æ¬¡é‡å¤§å‡çº§ã€‚å…±ç»å†äº†18ç‰ˆè‰æ¡ˆï¼ˆ00-17ï¼‰ï¼Œäº2015å¹´2æœˆ18æ—¥æ­£å¼å®šç¨¿ï¼Œ2015å¹´5æœˆ14æ—¥ HTTP/2 æ­£å¼ç‰ˆå‘å¸ƒï¼Œæ­£å¼ç‰ˆ HTTP/2 è§„æ ¼æ ‡å‡†å«åš RFC7540 ã€‚</p>
</blockquote>
<p>å¥½å§ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€è½¬èº«å°±å¿˜äº†ä¸Šé¢æåˆ°çš„è¿™ä¸€é•¿ä¸²ä½ å†…å®¹ï¼Œç‰¹åˆ«æ˜¯è¿™ä¸ªå¤æ‚çš„è§„èŒƒåç§°ã€‚æ©~æ²¡å…³ç³»ï¼Œè¦äº†è§£ HTTP/2ï¼Œè¿˜æ˜¯å…ˆè¦äº†è§£å®ƒçš„æ–°ç‰¹æ€§ä»¥åŠå®ç°åŸç†ã€‚</p>
<h2 id="ä¸€ã€é¦–å…ˆä½ å¿…é¡»çŸ¥é“ä¸€ç‚¹å„¿-HTTP-1-x"><a href="#ä¸€ã€é¦–å…ˆä½ å¿…é¡»çŸ¥é“ä¸€ç‚¹å„¿-HTTP-1-x" class="headerlink" title="ä¸€ã€é¦–å…ˆä½ å¿…é¡»çŸ¥é“ä¸€ç‚¹å„¿ HTTP/1.x"></a>ä¸€ã€é¦–å…ˆä½ å¿…é¡»çŸ¥é“ä¸€ç‚¹å„¿ HTTP/1.x</h2><p>ä½œä¸ºä¸€ä¸ªå‰ç«¯å°ç™½ï¼Œå‰äº›å¤©æˆ‘åšäº†ä¸€ä¸ªç®€å•çš„æ´»åŠ¨ï¼Œæœ¬åœ°è°ƒè¯•å®Œåæˆ‘æŠŠå®ƒæ”¾åˆ°æœåŠ¡å™¨ï¼ˆå‡è®¾åŸŸåä¸ºï¼šjdc.jd.comï¼‰ä¸Šï¼Œè¿™æ—¶å€™ä½ é€šè¿‡åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è®¿é—®ä»¥ä¸‹ï¼šjdc.jd.com/act/index.htmlï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘çš„æ´»åŠ¨é¡µé¢äº†ï¼ˆå½“ç„¶ï¼Œè¦ç»è¿‡ä¸€å°æ®µæ—¶é—´çš„ç­‰å¾…ï¼‰ã€‚</p>
<p>é‚£ä¹ˆå®¢æˆ·ç«¯æ˜¯å¦‚ä½•å–å¾—æœåŠ¡ç«¯çš„è¿™äº›èµ„æºçš„ï¼Ÿå®ƒä»¬ä¹‹é—´çš„é€šä¿¡æ˜¯æ€æ ·çš„ï¼Ÿ</p>
<p>ä¾§é‡è®²è®²ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>TCP è¿æ¥ï¼š</strong> æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹ TCP è¿æ¥</li>
<li><strong>å®¢æˆ·ç«¯è¯·æ±‚ï¼š</strong> å»ºç«‹ TCP è¿æ¥åï¼Œå®¢æˆ·ç«¯å°±ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ä¿¡æ¯ï¼ˆæ¯”å¦‚è¯·æ±‚ HTML èµ„æºï¼Œæˆ‘ä»¬æš‚ä¸”å°±æŠŠè¿™ä¸ªç§°ä¸ºâ€œ HTML è¯·æ±‚â€ï¼‰</li>
<li><strong>æœåŠ¡å™¨å“åº”ï¼š</strong> æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åè¿›è¡Œå¤„ç†å¹¶å‘å›ä¸€ä¸ª HTTP å“åº”ä¿¡æ¯</li>
</ul>
<p>å½“ç„¶ï¼Œæ¥ä¸‹æ¥è¿˜æœ‰æµè§ˆå™¨è§£ææ¸²æŸ“çš„è¿‡ç¨‹~å·´æ‹‰å·´æ‹‰~æˆ‘ä»¬æ‰èƒ½æœ€ç»ˆçœ‹åˆ°é¡µé¢~~</p>
<p>ç€é‡çœ‹ä¸‹ HTTP/1.0 å’Œ HTTP/1.1 è¿™ä¸‰ä¸ªçš„è¿‡ç¨‹ä¸åŒï¼š</p>
<h3 id="HTTP-1-0-çš„é€šä¿¡"><a href="#HTTP-1-0-çš„é€šä¿¡" class="headerlink" title="HTTP/1.0 çš„é€šä¿¡"></a>HTTP/1.0 çš„é€šä¿¡</h3><p>åœ¨ HTTP/1.0 ä¸‹ï¼Œæ¯å®Œæˆä¸€æ¬¡è¯·æ±‚å’Œå“åº”ï¼ŒTCP è¿æ¥å°±ä¼šæ–­å¼€ã€‚ä½†æˆ‘ä»¬çŸ¥é“ï¼Œå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚åªèƒ½è¯·æ±‚ä¸€ä¸ªèµ„æºï¼Œè€Œæˆ‘ä»¬çš„ç½‘ç«™ä¸å¯èƒ½åªæœ‰å•å•ä¸€ä¸ª HTML æ–‡ä»¶å§ï¼Ÿè‡³å°‘è¿˜è¦æœ‰ CSS å§ï¼Ÿè¿˜è¦æœ‰å›¾ç‰‡å§ï¼Ÿäºæ˜¯åˆè¦ä¸€æ¬¡ TCP è¿æ¥ï¼Œç„¶åè¯·æ±‚å’Œå“åº”ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº† HTTP/1.0 è¯·æ±‚ä¸€ä¸ª HTML å’Œä¸€ä¸ª CSS éœ€è¦ç»å†çš„ä¸¤æ¬¡ TCP è¿æ¥ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/1.png" alt="img"></p>
<h3 id="HTTP-1-1-çš„é€šä¿¡"><a href="#HTTP-1-1-çš„é€šä¿¡" class="headerlink" title="HTTP/1.1 çš„é€šä¿¡"></a>HTTP/1.1 çš„é€šä¿¡</h3><p>è¦çŸ¥é“ï¼ŒTCP è¿æ¥æœ‰ RTTï¼ˆRound Trip Timeï¼Œå³å¾€è¿”æ—¶å»¶ï¼‰çš„ï¼Œæ¯è¯·æ±‚ä¸€ä¸ªèµ„æºå°±è¦æœ‰ä¸€æ¬¡ RTT ï¼Œç”¨æˆ·å¯æ˜¯ç­‰ä¸å¾—è¿™ç§æ…¢èŠ‚å¥çš„å“åº”çš„ã€‚äºæ˜¯åˆ°äº† HTTP/1.1 ï¼ŒTCP å¯ä»¥æŒä¹…è¿æ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ¬¡ TCP è¿æ¥è¦ç­‰åˆ°åŒåŸŸåä¸‹çš„æ‰€æœ‰èµ„æºè¯·æ±‚/å“åº”å®Œæ¯•äº†è¿æ¥æ‰ä¼šæ–­å¼€ã€‚æ©ï¼å¬èµ·æ¥æƒ…å†µå¥½åƒå¥½äº†å¾ˆå¤šï¼Œè¯·æ±‚åŒåŸŸåä¸‹çš„ n ä¸ªèµ„æºï¼Œå¯ä»¥èŠ‚çº¦ (n-1)*RTT çš„æ—¶é—´ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº† HTTP/1.1 æ—¶è¯·æ±‚ä¸€ä¸ª HTML å’Œä¸€ä¸ª CSS åªéœ€è¦ç»å†ä¸€æ¬¡ TCP è¿æ¥ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/2.png" alt="img"></p>
<p>ä½†å‰é¢æåˆ°äº†ï¼Œå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚åªèƒ½è¯·æ±‚ä¸€ä¸ªèµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šäº§ç”Ÿå¦‚ä¸‹ç–‘é—®ï¼š</p>
<p><strong>Qï¼šä¸ºä»€ä¹ˆä¸ä¸€æ¬¡å‘é€å¤šä¸ªè¯·æ±‚ï¼Ÿ</strong></p>
<p>äº‹å®ä¸Šï¼ŒHTTP/1.x å¤šæ¬¡è¯·æ±‚å¿…é¡»ä¸¥æ ¼æ»¡è¶³å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—é¡ºåºï¼šå‘é€è¯·æ±‚ï¼Œç­‰å¾…å“åº”å®Œæˆï¼Œå†å‘é€å®¢æˆ·ç«¯é˜Ÿä¼ä¸­çš„ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ª TCP è¿æ¥ä¸Šåªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªè¯·æ±‚/å“åº”ã€‚è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨åœ¨å®Œæˆè¯·æ±‚å¼€å§‹å›ä¼ åˆ°æ”¶åˆ°ä¸‹ä¸€ä¸ªè¯·æ±‚ä¹‹é—´çš„æ—¶é—´æ®µå¤„äºç©ºé—²çŠ¶æ€ã€‚</p>
<p><strong>Qï¼šæœ‰ä»€ä¹ˆåŠæ³•å»æ”¹å˜å—ï¼Ÿ</strong></p>
<p>â€œ HTTP ç®¡é“â€æŠ€æœ¯å®ç°äº†å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ã€‚è€ŒæœåŠ¡å™¨ä¹Ÿæ˜¯å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªè¯·æ±‚çš„ã€‚è¿™ä¹ˆä¸€æ¥ï¼Œä¸å°±å¯ä»¥å¤šè·¯å¤ç”¨äº†å—ï¼Ÿä½†æ˜¯ï¼Œ HTTP/1.x æœ‰ä¸¥æ ¼çš„ä¸²è¡Œè¿”å›å“åº”æœºåˆ¶ï¼Œé€šè¿‡ TCP è¿æ¥è¿”å›å“åº”æ—¶ï¼Œå°±æ˜¯å¿…é¡» one by one ï¼Œå‰ä¸€ä¸ªå“åº”æ²¡æœ‰å®Œæˆï¼Œä¸‹ä¸€ä¸ªå“åº”å°±ä¸èƒ½è¿”å›ã€‚æ‰€ä»¥ä½¿ç”¨â€œ HTTP ç®¡é“â€æŠ€æœ¯æ—¶ï¼Œä¸‡ä¸€ç¬¬ä¸€ä¸ªå“åº”æ—¶é—´å¾ˆé•¿ï¼Œé‚£ä¹ˆåé¢çš„å“åº”å¤„ç†å®Œäº†ä¹Ÿæ— æ³•å‘é€ï¼Œåªèƒ½è¢«ç¼“å­˜èµ·æ¥ï¼Œå ç”¨æœåŠ¡å™¨å†…å­˜ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„â€œé˜Ÿé¦–é˜»å¡â€ã€‚</p>
<p><strong>Qï¼šæ—¢ç„¶ä¸€ä¸ª TCP è¿æ¥è§£å†³ä¸äº†é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å¼€å¤šä¸ªå—ï¼Ÿ</strong></p>
<p>æ—¢ç„¶ä¸€æ¡é€šé“ï¼ˆTCP è¿æ¥ï¼‰é€šä¿¡æ•ˆç‡ä½ï¼Œé‚£ä¹ˆå°±å¼€å¤šæ¡é€šé“å‘—ï¼çš„ç¡®ï¼ŒHTTP/1.1 ä¸‹ï¼Œæµè§ˆå™¨æ˜¯æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ª TCP ä¼šè¯çš„ï¼ˆä¸€èˆ¬ä¸º6ä¸ªï¼‰ã€‚ä¸€ä¸ª TCP åªèƒ½å“åº”ä¸€ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆå…­ä¸ª TCP å²‚ä¸å°±èƒ½è¾¾åˆ°å…­å€é€Ÿï¼Ÿæƒ³æƒ³è¿˜æœ‰ç‚¹å„¿å°æ¿€åŠ¨ï¼ä½†äº‹æƒ…å¾€å¾€ä¸æ˜¯è¿™ä¹ˆç®€å•ã€‚å¼€å¯å¤šä¸ª TCP ä¼šè¯ï¼Œæ— ç–‘ä¼šç»™å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¸¦æ¥è´Ÿæ‹…ï¼Œæ¯”å¦‚ç¼“å­˜ã€CPU æ—¶é’Ÿå‘¨æœŸç­‰ï¼Œè€Œä¸”å¹¶è¡Œçš„ TCP ä¹Ÿä¼šç«äº‰å¸¦å®½ï¼Œå¹¶è¡Œèƒ½åŠ›ä¹Ÿæ˜¯å—é™åˆ¶çš„ï¼Œå¾€å¾€æ— æ³•è¾¾åˆ°ç†æƒ³çŠ¶æ€ä¸‹çš„å…­å€é€Ÿã€‚</p>
<p>å¯è§ï¼Œæˆ‘ä»¬é‡‡å–äº†è®¸å¤šæ–¹æ³•ï¼Œå¸Œæœ›å¯ä»¥å¹¶è¡Œå¤„ç†è¯·æ±‚/å“åº”ï¼Œä½†éƒ½ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚å†µä¸”ï¼Œå¾ˆå¤šæ–¹æ³•ä¸ HTTP/1.x çš„è®¾è®¡ç†å¿µæ˜¯èƒŒé“è€Œé©°çš„ï¼Œåœ¨ HTTP/1.x ä¸‹ï¼Œå´æ²¡æœ‰æ­£ç¡®åˆ©ç”¨å¥½ HTTP/1.x çš„ç‰¹æ€§ã€‚</p>
<p>äºæ˜¯ï¼Œ HTTP/2 å¸¦ç€æé«˜æ€§èƒ½çš„ä½¿å‘½ï¼Œåº”è¿è€Œç”Ÿã€‚</p>
<h2 id="äºŒã€é‚£ä¹ˆ-HTTP-2-åšäº†ä»€ä¹ˆæ”¹å˜"><a href="#äºŒã€é‚£ä¹ˆ-HTTP-2-åšäº†ä»€ä¹ˆæ”¹å˜" class="headerlink" title="äºŒã€é‚£ä¹ˆ HTTP/2 åšäº†ä»€ä¹ˆæ”¹å˜"></a>äºŒã€é‚£ä¹ˆ HTTP/2 åšäº†ä»€ä¹ˆæ”¹å˜</h2><p>å…ˆå¯¹ HTTP/2 äº§ç”Ÿçš„å½±å“æœ‰ä¸€ä¸ªç›´è§‚çš„è®¤è¯†ï¼š</p>
<p>è¿™æ˜¯<a href="https://http2.akamai.com/demo" target="_blank" rel="external">Akamaiå…¬å¸ï¼ˆå…¨çƒæœ€å¤§çš„CDNæœåŠ¡å•†ï¼‰çš„ä¸€ä¸ªå®˜æ–¹æ¼”ç¤º</a>ï¼ŒHTTP/1.1 å’Œ HTTP/2 è¯·æ±‚300+å¼ å›¾ç‰‡çš„å¯¹æ¯”ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/3.gif" alt="img"></p>
<p>æ˜æ˜¾å¯ä»¥çœ‹å‡ºï¼Œ HTTP/2 ä¸‹åŠ è½½æ—¶é—´ä¸º HTTP/1.1 çš„ 1/5 ä¸åˆ°ï¼Œé‚£ä¹ˆ HTTP/2 åˆ°åº•ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä»å®ƒçš„æ–°ç‰¹æ€§æ¥è¿›è¡Œå…¨é¢çš„äº†è§£ã€‚</p>
<p>ä»¥ä¸‹ç€é‡ä»‹ç»äº”ä¸ªç‰¹æ€§ï¼šäºŒè¿›åˆ¶åˆ†å¸§å±‚ã€å¤šå‘è¯·æ±‚ä¸å“åº”ã€ä¼˜å…ˆçº§å’Œä¾èµ–æ€§ã€é¦–éƒ¨å‹ç¼©ã€æœåŠ¡å™¨æ¨é€ã€‚</p>
<h3 id="äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼ˆBinary-Framing-Layerï¼‰"><a href="#äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼ˆBinary-Framing-Layerï¼‰" class="headerlink" title="äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼ˆBinary Framing Layerï¼‰"></a>äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼ˆBinary Framing Layerï¼‰</h3><blockquote>
<p>æŒ‡çš„æ˜¯ä½äºå¥—æ¥å­—æ¥å£ä¸åº”ç”¨å¯è§çš„é«˜å±‚ HTTP API ä¹‹é—´çš„ä¸€ä¸ªæ–°æœºåˆ¶ï¼š<strong>HTTP çš„è¯­ä¹‰ï¼ŒåŒ…æ‹¬å„ç§åŠ¨è¯ã€æ–¹æ³•ã€é¦–éƒ¨ï¼Œéƒ½ä¸å—å½±å“ï¼Œ</strong>ä¸åŒçš„æ˜¯ä¼ è¾“æœŸé—´å¯¹å®ƒä»¬çš„<strong>ç¼–ç æ–¹å¼</strong>å˜äº†ã€‚</p>
</blockquote>
<p>åœ¨æ–°å¼•è¿›çš„äºŒè¿›åˆ¶åˆ†å¸§å±‚ä¸Šï¼ŒHTTP/2 å°†æ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œä¸”éƒ½é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼çš„ç¼–ç ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/4.png" alt="img"></p>
<p>ä»å›¾ä¸Šå¯ä»¥çœ‹åˆ°ï¼šåœ¨é«˜å±‚ HTTP API å’Œä½å±‚ TCP è¿æ¥ä¸­å¼•å…¥äº†ä¸€ä¸ªäºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼›åœ¨äºŒè¿›åˆ¶åˆ†å¸§å±‚ä¸Šï¼ŒHTTP/1.1 çš„ä¸€ä¸ª POST è¯·æ±‚ï¼ˆèµ·å§‹è¡Œã€é¦–éƒ¨ã€å®ä½“æ­£æ–‡ï¼‰ï¼Œè¢«åˆ†å‰²æˆäº†æ›´å°çš„ HEADERS å¸§å’Œ DATA å¸§ã€‚èµ·å§‹è¡Œã€é¦–éƒ¨è¢«åˆ†å‰²åˆ° HEADERS å¸§ï¼Œå®ä½“æ­£æ–‡è¢«åˆ†å‰²åˆ° DATA å¸§ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ·±å…¥åœ°äº†è§£ä¸‹è¿™äº›è¢«åˆ†å‰²åçš„äºŒè¿›åˆ¶å¸§æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼š</p>
<blockquote>
<p>HTTP/2 åŒåŸŸåçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åœ¨<strong>ä¸€ä¸ª TCP è¿æ¥</strong>ä¸Šå®Œæˆï¼Œè¿™ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„<strong>åŒå‘æ•°æ®æµ</strong>ã€‚è€Œæ¯ä¸ªæ•°æ®æµéƒ½æ˜¯ä»¥<strong>æ¶ˆæ¯</strong>çš„å½¢å¼å‘é€çš„ï¼Œæ¶ˆæ¯ç”±<strong>ä¸€ä¸ªå¸§æˆ–å¤šä¸ªå¸§</strong>ç»„æˆã€‚</p>
<ul>
<li><strong>æµï¼š</strong>å·²å»ºç«‹çš„è¿æ¥ä¸Šçš„åŒå‘å­—èŠ‚æµ</li>
<li><strong>æ¶ˆæ¯ï¼š</strong>ä¸é€»è¾‘æ¶ˆæ¯å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—æ•°æ®å¸§</li>
<li><strong>å¸§ï¼š</strong>HTTP/2 é€šä¿¡çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªå¸§åŒ…å«å¸§é¦–éƒ¨</li>
</ul>
</blockquote>
<p>å¥½åƒå¾ˆå¤æ‚çš„æ ·å­ï¼Œå’±ä»¬æ¥æ‹ä¸€æ‹ï¼š</p>
<p>TCP è¿æ¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é—´å»ºç«‹äº†ä¸€æ¡è¿è¾“çš„é€šé“ï¼Œå¯ä»¥åŒå‘é€šè¡Œï¼Œå½“ä¸€ç«¯è¦å‘å¦ä¸€ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªæ¶ˆæ¯æ‹†åˆ†æˆå‡ éƒ¨åˆ†ï¼ˆå¸§ï¼‰ï¼Œç„¶åé€šè¿‡å‘èµ·ä¸€ä¸ªæµå¯¹è¿™äº›å¸§è¿›è¡Œå‘é€ï¼Œæœ€ååœ¨å¦ä¸€ç«¯å°†åŒä¸€ä¸ªæµçš„å¸§é‡æ–°ç»„åˆã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å°±å¥½åƒæˆ‘ä»¬åœ¨æ¬å®¶çš„æ—¶å€™ï¼Œä¼šæŠŠä¸€ä¸ªæ¡Œå­å…ˆæ‹†æ•£æˆé›¶éƒ¨ä»¶ï¼Œç„¶åé€šè¿‡å‡ æ¬¡çš„æ¬è¿ï¼Œåˆ°äº†æ–°å®¶åï¼Œå†æŠŠæ¡Œå­é‡æ–°æ‹¼è£…èµ·æ¥ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†æµã€æ¶ˆæ¯ä¸å¸§çš„å…³ç³»ï¼ˆæ³¨æ„åˆ°æ²¡ï¼ŒHEADERS å¸§æ€»æ˜¯åœ¨æœ€å‰é¢çš„ï¼‰ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/5.png" alt="img"></p>
<p>HTTP/2 è§„èŒƒä¸€å…±è§„å®šäº† 10 ç§ä¸åŒçš„å¸§ï¼Œ å…¶ä¸­æœ€åŸºç¡€çš„ä¸¤ç§åˆ†åˆ«å¯¹åº”äº HTTP/1.1 çš„ DATA å¸§ å’Œ HEADERS å¸§ ã€‚</p>
<h3 id="å¤šå‘è¯·æ±‚ä¸å“åº”ï¼ˆå¤šè·¯å¤ç”¨ï¼‰"><a href="#å¤šå‘è¯·æ±‚ä¸å“åº”ï¼ˆå¤šè·¯å¤ç”¨ï¼‰" class="headerlink" title="å¤šå‘è¯·æ±‚ä¸å“åº”ï¼ˆå¤šè·¯å¤ç”¨ï¼‰"></a>å¤šå‘è¯·æ±‚ä¸å“åº”ï¼ˆå¤šè·¯å¤ç”¨ï¼‰</h3><blockquote>
<p>å¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„ TCP è¿æ¥å‘èµ·<strong>å¤šé‡çš„è¯·æ±‚/å“åº”æ¶ˆæ¯</strong>ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥æŠŠ HTTP æ¶ˆæ¯åˆ†è§£ä¸ºäº’ä¸ä¾èµ–çš„å¸§ï¼Œç„¶åä¹±åºå‘é€ï¼Œæœ€åå†åœ¨å¦ä¸€ç«¯æ ¹æ® <strong>Stream ID</strong> æŠŠå®ƒä»¬é‡æ–°ç»„åˆèµ·æ¥ã€‚</p>
</blockquote>
<p>å‰é¢æåˆ°çš„ä¸€ç«¯å‘é€æ¶ˆæ¯ä¼šå…ˆå¯¹æ¶ˆæ¯è¿›è¡Œæ‹†åˆ†ï¼Œä¸æ­¤åŒæ—¶ï¼Œä¹Ÿä¼šç»™åŒä¸€ä¸ªæ¶ˆæ¯æ‹†åˆ†å‡ºæ¥çš„å¸§å¸¦ä¸Šä¸€ä¸ªç¼–å·ï¼ˆStream IDï¼‰ï¼Œè¿™æ ·åœ¨å¦ä¸€ç«¯æ¥æ”¶è¿™äº›å¸§åå°±å¯ä»¥æ ¹æ®ç¼–å·å¯¹å®ƒä»¬è¿›è¡Œç»„åˆã€‚</p>
<p>ä¹Ÿæ­£æ˜¯æœ‰äº†è¿™ç§ç¼–å·çš„æ–¹å¼ï¼Œå½“æŸä¸€ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥å‘é€å¤šä¸ªæ¶ˆæ¯æ‹†åˆ†å‡ºæ¥çš„å¤šä¸ªå¸§ï¼ˆå‘èµ·å¤šä¸ªæµï¼‰ï¼Œä¸”è¿™äº›å¸§å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºè¿™äº›å¸§éƒ½æœ‰è‡ªå·±çš„ç¼–å·ï¼Œå®ƒä»¬ä¹‹é—´äº’ä¸å½±å“ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†å•ä¸€çš„ TCP è¿æ¥ä¸Šæœ‰å¤šä¸ªè¯·æ±‚/å“åº”å¹¶è¡Œäº¤æ¢ï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/6.png" alt="img"></p>
<p>ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ stream1 çš„å¤šä¸ª DATA å¸§ï¼ˆè¯´æ˜ HEADERS å¸§å·²å‘é€å®Œæ¯•ï¼‰ä¸ stream3 çš„ HEADERS å¸§å’Œ DATA å¸§ ï¼Œå®¢æˆ·ç«¯æ­£åœ¨å‘æœåŠ¡å™¨å‘é€ stream5 çš„ DATA å¸§ï¼Œå¯è§ï¼Œå¸§çš„å‘é€æ˜¯ä¹±åºçš„ï¼Œä¸”è¯·æ±‚/å“åº”æ˜¯å¹¶è¡Œçš„ã€‚</p>
<p>ç»†å¿ƒçš„ä½ ä¼šå‘ç°ï¼Œstream1 ä¸­æœ‰å¤šä¸ª DATA å¸§ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæœ‰ DATA å¸§æœ‰é•¿åº¦çš„æ§åˆ¶ï¼ˆ2çš„14æ¬¡æ–¹-1 å­—èŠ‚ï¼Œçº¦ 16383 ä¸ªå­—èŠ‚ï¼‰ï¼Œåº”ç”¨æ•°æ®è¿‡å¤§æ—¶ï¼Œä¼šè¢«æ‹†åˆ†æˆå¤šä¸ª DATA å¸§ï¼ˆè¿˜è®°å¾—è®²äºŒè¿›åˆ¶åˆ†å¸§å±‚å±•ç¤ºçš„ HTTP/1.1 çš„è¯·æ±‚è¢«åˆ†å‰²æˆæ›´å°çš„å¸§å—ï¼ŸDATA å¸§å°±æ˜¯ç”¨æ¥æºå¸¦åº”ç”¨æ•°æ®çš„ï¼‰ã€‚</p>
<h3 id="ä¼˜å…ˆçº§å’Œä¾èµ–æ€§"><a href="#ä¼˜å…ˆçº§å’Œä¾èµ–æ€§" class="headerlink" title="ä¼˜å…ˆçº§å’Œä¾èµ–æ€§"></a>ä¼˜å…ˆçº§å’Œä¾èµ–æ€§</h3><blockquote>
<p>æ–°å»ºæµçš„ç»ˆç«¯å¯ä»¥åœ¨<strong>æŠ¥å¤´å¸§</strong>ä¸­åŒ…å«ä¼˜å…ˆçº§ä¿¡æ¯æ¥<strong>å¯¹æµæ ‡è®°ä¼˜å…ˆçº§</strong>ã€‚</p>
<p>ä¼˜å…ˆçº§çš„ç›®çš„æ˜¯å…è®¸ç»ˆç«¯è¡¨è¾¾å®ƒå¦‚ä½•è®©å¯¹ç­‰ç«¯ç®¡ç†å¹¶å‘æµæ—¶<strong>åˆ†é…èµ„æº</strong>ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨å‘é€å®¹é‡æœ‰é™æ—¶ä¼˜å…ˆçº§èƒ½ç”¨æ¥é€‰æ‹©æµæ¥ä¼ è¾“å¸§ã€‚</p>
</blockquote>
<p>HTTP/2 ä¸­ï¼Œæµå¯ä»¥æœ‰ä¸€ä¸ªä¼˜å…ˆçº§å±æ€§ï¼ˆå³â€œæƒé‡â€ï¼‰ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ HEADERS å¸§ä¸­åŒ…å«ä¼˜å…ˆçº§ priority å±æ€§ï¼›</li>
<li>å¯ä»¥å•ç‹¬é€šè¿‡ PRIORITY å¸§ä¸“é—¨è®¾ç½®æµçš„ä¼˜å…ˆçº§å±æ€§ã€‚</li>
</ul>
<p>æµçš„ä¼˜å…ˆçº§ç”¨äºå‘èµ·æµçš„ç»ˆç«¯ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼‰å‘å¯¹ç«¯ï¼ˆæ¥æ”¶çš„ä¸€æ–¹ï¼‰è¡¨è¾¾éœ€è¦å¤šå¤§æ¯”é‡çš„èµ„æºæ”¯æŒï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œä¸èƒ½å¼ºåˆ¶è¦æ±‚å¯¹ç«¯ä¸€å®šä¼šéµå®ˆã€‚</p>
<blockquote>
<p>å€ŸåŠ©äº <strong>PRIORITY å¸§</strong>ï¼Œå®¢æˆ·ç«¯åŒæ ·å¯ä»¥å‘ŠçŸ¥æœåŠ¡å™¨å½“å‰çš„æµä¾èµ–äºå…¶ä»–å“ªä¸ªæµã€‚è¯¥åŠŸèƒ½è®©å®¢æˆ·ç«¯èƒ½å»ºç«‹ä¸€ä¸ª<strong>ä¼˜å…ˆçº§â€œæ ‘â€</strong>ï¼Œæ‰€æœ‰<strong>â€œå­æµâ€</strong>ä¼šä¾èµ–äº<strong>â€œçˆ¶æµâ€</strong>çš„ä¼ è¾“å®Œæˆæƒ…å†µã€‚</p>
<p>ä¸ä¾èµ–ä»»ä½•æµçš„æµçš„æµä¾èµ–ä¸º <strong>0x0</strong>ã€‚æ¢å¥è¯è¯´ï¼Œä¸å­˜åœ¨çš„æµæ ‡è¯† 0 ç»„æˆäº†æ ‘çš„æ ¹ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‡ ä¸ªä¾‹å­æ¥ç†è§£ä¸‹ä¼˜å…ˆçº§â€œæ ‘â€ï¼š<br><img src="//img.aotu.io/Yettyzyt/http2-1/9.png" alt="img"></p>
<ul>
<li><strong>ç¬¬ä¸€ç§æƒ…å†µï¼š</strong>æµ A å’Œæµ B ä¸ä¾èµ–æµï¼Œå³ä¸º 0x0 ï¼›æµ A çš„æƒé‡ä¸º 12 ï¼Œæµ B çš„æƒé‡ä¸º 4 ï¼›åˆ™æµ A åˆ†é…åˆ°çš„èµ„æºå æ¯”ä¸º 12/(12+4)= 12/16ï¼Œæµ B åˆ†é…åˆ°çš„èµ„æºå æ¯”ä¸º 4/(12+4)= 4/16ã€‚</li>
<li><strong>ç¬¬äºŒç§æƒ…å†µï¼š</strong>æµ D ä¸º 0x0 ï¼Œæµ C ä¾èµ–äºæµ D ï¼›æµ D èƒ½è¢«åˆ†é…åˆ°å…¨é¢èµ„æºï¼Œç­‰åˆ°æµ D å…³é—­åï¼Œä¾èµ–äºæµ D çš„æµ C ä¹Ÿä¼šè¢«åˆ†é…åˆ°å…¨é¢èµ„æºï¼ˆå®ƒæ˜¯å”¯ä¸€ä¾èµ–äºæµ D çš„æµï¼Œå®ƒçš„æƒé‡çš„å¤§å°æ­¤æ—¶å¹¶ä¸é‡è¦ï¼Œå› ä¸ºæ²¡æœ‰ç«äº‰çš„æµï¼‰ã€‚</li>
<li><strong>ç¬¬ä¸‰ç§æƒ…å†µï¼š</strong>æµ D ä¸º 0x0 ï¼Œæµ C ä¾èµ–äºæµ D ï¼Œæµ A å’Œ æµ B ä¾èµ–äºæµ C ï¼›æµ D èƒ½è¢«åˆ†é…åˆ°å…¨é¢èµ„æºï¼Œç­‰åˆ°æµ D å…³é—­åï¼Œä¾èµ–äºæµ D çš„æµ C ä¹Ÿä¼šè¢«åˆ†é…åˆ°å…¨é¢èµ„æºï¼›ç­‰åˆ°æµ C å…³é—­åï¼Œä¾èµ–äºæµ C çš„æµ A å’Œæµ B æ ¹æ®æƒé‡åˆ†é…èµ„æºï¼ˆ3ï¼š1ï¼‰ã€‚</li>
<li><strong>ç¬¬å››ç§æƒ…å†µï¼š</strong>æµ D ä¸º 0x0 ï¼Œæµ C å’Œæµ E ä¾èµ–äºæµ D ï¼Œæµ A å’Œ æµ B ä¾èµ–äºæµ C ï¼›æµ D èƒ½è¢«åˆ†é…åˆ°å…¨é¢èµ„æºï¼Œç­‰åˆ°æµ D å…³é—­åï¼Œä¾èµ–äºæµ D çš„æµ C çš„æµ E å’Œæµ B æ ¹æ®æƒé‡åˆ†é…èµ„æºï¼ˆ1ï¼š1ï¼‰ï¼›ç­‰åˆ°æµ C å…³é—­åï¼Œä¾èµ–äºæµ C çš„æµ A å’Œæµ B æ ¹æ®æƒé‡åˆ†é…èµ„æºï¼ˆ3ï¼š1ï¼‰ã€‚</li>
</ul>
<p>å‰é¢è¯´åˆ°ï¼Œâ€œå¯ä»¥å•ç‹¬é€šè¿‡ PRIORITY å¸§ä¸“é—¨è®¾ç½®æµçš„ä¼˜å…ˆçº§å±æ€§â€ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å¯¹åŸæœ¬æ²¡æœ‰ä¼˜å…ˆçº§å±æ€§ï¼ˆåŒ…æ‹¬ä¾èµ–å…³ç³»ï¼‰çš„æµè¿›è¡Œè®¾ç½®ï¼Œä¹Ÿå¯ä»¥å¯¹åŸæœ¬å·²æœ‰ä¼˜å…ˆçº§å±æ€§çš„æµè¿›è¡Œä¿®æ”¹ã€‚å› æ­¤ï¼Œä¼˜å…ˆçº§å¯ä»¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ¨æ€çš„æ”¹å˜ã€‚</p>
<h3 id="é¦–éƒ¨å‹ç¼©"><a href="#é¦–éƒ¨å‹ç¼©" class="headerlink" title="é¦–éƒ¨å‹ç¼©"></a>é¦–éƒ¨å‹ç¼©</h3><p>HPACK æ˜¯ä¸“é—¨ä¸º HTTP/2 é‡èº«å®šåˆ¶çš„å‹ç¼©æŠ€æœ¯ã€‚</p>
<blockquote>
<p>åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å„ç»´æŠ¤ä¸€ä¸ª<strong>â€œé¦–éƒ¨è¡¨â€</strong>ï¼Œè¡¨ä¸­ç”¨ç´¢å¼•ä»£è¡¨<strong>é¦–éƒ¨å</strong>ï¼Œæˆ–è€…<strong>é¦–éƒ¨é”® - å€¼å¯¹</strong>ï¼Œä¸Šä¸€æ¬¡å‘é€ä¸¤ç«¯éƒ½ä¼šè®°ä½å·²å‘é€è¿‡å“ªäº›é¦–éƒ¨ï¼Œä¸‹ä¸€æ¬¡å‘é€åªéœ€è¦ä¼ è¾“å·®å¼‚çš„æ•°æ®ï¼Œç›¸åŒçš„æ•°æ®ç›´æ¥ç”¨ç´¢å¼•è¡¨ç¤ºå³å¯ã€‚</p>
</blockquote>
<p>å…·ä½“å®ç°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/7.png" alt="img"></p>
<p>è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼šé€šè¿‡ç´¢å¼•è¡¨çš„å¯¹åº”å…³ç³»ï¼Œæ¥æ ‡è®°é¦–éƒ¨è¡¨ä¸­çš„ä¸åŒä¿¡æ¯ã€‚</p>
<p>åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚/å“åº”çš„é¦–éƒ¨å¾€å¾€æœ‰å¾ˆå¤šé‡å¤çš„ä¿¡æ¯ï¼Œå½“å®¢æˆ·ç«¯è¦å‘æœåŠ¡å™¨å‘é€æŸä¸ªè¯·æ±‚æ—¶ï¼Œé€šè¿‡æŸ¥æ‰¾ç´¢å¼•è¡¨ï¼Œå‘ç°è¯¥ä¿¡æ¯çš„é¦–éƒ¨å·²ç»å‘é€è¿‡ï¼Œæ­¤æ—¶æœåŠ¡å™¨ç«¯çš„ç´¢å¼•è¡¨ä¹Ÿåº”è¯¥æœ‰å¯¹åº”çš„ä¿¡æ¯ï¼Œåˆ™ä¸éœ€è¦å†æ¬¡å‘é€ï¼›è‹¥æŸ¥æ‰¾å‘ç°éƒ¨åˆ†é¦–éƒ¨ä¿¡æ¯ä¸åœ¨ç´¢å¼•è¡¨ä¸­ï¼Œåˆ™å‘é€è¯¥éƒ¨åˆ†ä¿¡é¦–éƒ¨æ¯å³å¯ã€‚</p>
<p>å¦‚åœ¨ä¸Šå›¾çš„ç¤ºä¾‹ä¸­ï¼Œç¬¬äºŒä¸ªè¯·æ±‚åªéœ€è¦å‘é€å˜åŒ–äº†çš„è·¯å¾„é¦–éƒ¨ï¼ˆ:pathï¼‰ï¼Œå…¶ä»–é¦–éƒ¨æ²¡æœ‰å˜åŒ–ï¼Œå°±ä¸ç”¨å†å‘é€äº†ã€‚</p>
<h3 id="æœåŠ¡å™¨æ¨é€ï¼ˆserver-Pushï¼‰"><a href="#æœåŠ¡å™¨æ¨é€ï¼ˆserver-Pushï¼‰" class="headerlink" title="æœåŠ¡å™¨æ¨é€ï¼ˆserver Pushï¼‰"></a>æœåŠ¡å™¨æ¨é€ï¼ˆserver Pushï¼‰</h3><blockquote>
<p>æœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº†å¯¹æœ€åˆè¯·æ±‚çš„å“åº”å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥<strong>é¢å¤–å‘å®¢æˆ·ç«¯æ¨é€èµ„æº</strong>ã€‚</p>
</blockquote>
<p>åœ¨äº†è§£â€œäºŒè¿›åˆ¶åˆ†å¸§å±‚â€çš„æ—¶å€™æˆ‘ä»¬æåˆ°ï¼Œâ€œHTTP/2 è§„èŒƒè§„å®šäº†10ç§ä¸åŒçš„å¸§â€ï¼Œå…¶ä¸­æœ‰ä¸€ç§åä¸ºâ€œPUSH_PROMISEâ€ï¼Œå°±æ˜¯åœ¨æœåŠ¡å™¨æ¨é€çš„æ—¶å€™å‘é€çš„ã€‚å½“å®¢æˆ·ç«¯è§£æå¸§æ—¶ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ª PUSH_PROMISE ç±»å‹ï¼Œä¾¿ä¼šå‡†å¤‡æ¥æ”¶æœåŠ¡ç«¯è¦æ¨é€çš„æµã€‚</p>
<p><img src="//img.aotu.io/Yettyzyt/http2-1/8.png" alt="img"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå½“æœåŠ¡å™¨å“åº”äº† HTML è¯·æ±‚åï¼Œå¯ä»¥çŸ¥é“å®¢æˆ·ç«¯æ¥ä¸‹æ¥è¦å‘é€ JS è¯·æ±‚ã€CSS è¯·æ±‚ï¼Œäºæ˜¯æœåŠ¡å™¨é€šè¿‡æ¨é€çš„æ–¹å¼ï¼ˆä¸»åŠ¨å‘èµ·æ–°æµï¼Œè€Œä¸æ˜¯ç­‰å®¢æˆ·ç«¯è¯·æ±‚ç„¶åå†å“åº”ï¼‰ï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºè¦çº¦ï¼ˆPUSH_PROMISEï¼‰ã€‚å½“ç„¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ç¼“å­˜è¿™ä¸ªèµ„æºï¼Œä¹Ÿå¯ä»¥æ‹’ç»è¿™ä¸ªèµ„æºã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬å¸¸ç”¨çš„èµ„æºå†…åµŒçš„æ‰‹æ®µï¼šå°†ä¸€ä¸ªå›¾ç‰‡èµ„æºè½¬ä¸º base64 ç¼–ç åµŒå…¥ CSS æ–‡ä»¶ä¸­ï¼Œå½“å®¢æˆ·ç«¯å‘èµ· CSS è¯·æ±‚æ—¶ï¼Œä¹Ÿä¼šè¯·æ±‚è¯¥å›¾ç‰‡ã€‚å› æ­¤åœ¨å“åº” CSS è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¼šå¼ºåˆ¶ï¼ˆå®¢æˆ·ç«¯æ˜¯æ— æ³•æ‹’ç»çš„ï¼‰å‘å®¢æˆ·ç«¯å‘é€å›¾ç‰‡å“åº”ã€‚ä½†å†…åµŒèµ„æºæ˜¯æ— æ³•è¢«å•ç‹¬ç¼“å­˜çš„ï¼Œè€ŒæœåŠ¡å™¨æ¨é€çš„èµ„æºæ˜¯å¯ä»¥è¢«ç¼“å­˜çš„ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼ŒæœåŠ¡å™¨å¿…é¡»éµå¾ªè¯·æ±‚-å“åº”çš„å¾ªç¯ï¼Œåªèƒ½å€Ÿç€è¯·æ±‚çš„å“åº”æ¥æ¨é€èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ˜¯æ²¡æ³•å…ˆæ‰‹æ¨é€çš„ã€‚è€Œä¸”ï¼Œå¦‚ä¸Šå›¾ä¸­ stream4 ï¼ŒPUSH_PROMISE å¸§å¿…é¡»åœ¨è¿”å›å“åº”ï¼ˆDATA å¸§ï¼‰ä¹‹å‰å‘é€ï¼Œå› ä¸ºä¸‡ä¸€å®¢æˆ·ç«¯è¯·æ±‚çš„æ°å¥½æ˜¯æœåŠ¡å™¨æ‰“ç®—æ¨é€çš„èµ„æºï¼Œé‚£ä¼ è¾“è¿‡ç¨‹å°±ä¼šæ··ä¹±äº†ã€‚</p>
<p>æ³¨ï¼šç”±å®¢æˆ·ç«¯å‘èµ·çš„æµ Stream ID ä¸ºå¥‡æ•°ï¼Œç”±æœåŠ¡å™¨å‘èµ·çš„æµ Stream ID ä¸ºå¶æ•°ï¼Œå›é¡¾ä¸Šé¢çš„å›¾å°±èƒ½å‘ç°å•¦ï¼</p>
<h2 id="ä¸‰ã€å°ç»“"><a href="#ä¸‰ã€å°ç»“" class="headerlink" title="ä¸‰ã€å°ç»“"></a>ä¸‰ã€å°ç»“</h2><ul>
<li>HTTP/2 é€šè¿‡äºŒè¿›åˆ¶åˆ†å¸§ä¸å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œæœ‰æ•ˆè§£å†³äº† HTTP/1.x ä¸‹è¯·æ±‚/å“åº”å»¶è¿Ÿçš„é—®é¢˜</li>
<li>æ–°çš„é¦–éƒ¨å‹ç¼©æŠ€æœ¯ä½¿ HTTP/1.x é¦–éƒ¨ä¿¡æ¯è‡ƒè‚¿çš„é—®é¢˜å¾—åˆ°è§£å†³</li>
<li>ä¼˜å…ˆçº§å’Œä¾èµ–æ€§ä¸æœåŠ¡å™¨æ¨é€ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¥½è¿™ä¸ªå•ä¸€çš„ TCP è¿æ¥</li>
</ul>
<p>å¯è§ï¼ŒHTTP/2 åœ¨ HTTP/1.1 çš„åŸºç¡€ä¸Šæœ‰äº†ä¸€ä¸ªè¾ƒå¤§çš„æ€§èƒ½æå‡ã€‚è¿™æ—¶å€™ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬é’ˆå¯¹ HTTP/1.x çš„ä¸€äº›ä¼˜åŒ–æ‰‹æ®µï¼ˆå¦‚ä¸Šæ–‡æåˆ°çš„èµ„æºå†…åµŒï¼‰ä¼¼ä¹æœ‰ç‚¹ä¸é€‚ç”¨äº†ã€‚</p>
<p>ä¸‹ä¸€æ¬¡çš„æ–‡ç« ã€Šå‰ç«¯å¼€å‘ä¸ HTTP/2 çš„ç¾ç»Šâ€”â€”æ€§èƒ½ç¯‡ã€‹ï¼Œå°†å’Œå¤§å®¶ä¸€èµ·æ·±å…¥æ¢è®¨ HTTP/2 ä¸‹çš„æ€§èƒ½ä¼˜åŒ–é—®é¢˜ã€‚</p>
<hr>
<p>æ–‡ç« æ’°å†™å‚è€ƒï¼š</p>
<ul>
<li>ä¹¦ç±ï¼š<a href="http://chimera.labs.oreilly.com/books/1230000000545/" target="_blank" rel="external">ã€ŠHigh Performance Browser Networkingã€‹(Ilya Grigorik)</a></li>
<li>è¯‘æœ¬ï¼š<a href="http://www.ituring.com.cn/book/1194" target="_blank" rel="external">ã€ŠWebæ€§èƒ½æƒå¨æŒ‡å—ã€‹ï¼ˆææ¾å³°ï¼‰</a></li>
<li>åšæ–‡ï¼š<a href="http://www.blogjava.net/yongboy/archive/2015/03/19/423611.html" target="_blank" rel="external">ã€ŠHTTP/2ç¬”è®°ä¹‹æµå’Œå¤šè·¯å¤ç”¨ã€‹(è‚æ°¸)</a></li>
<li>åšæ–‡ï¼š<a href="http://www.2cto.com/kf/201510/446824.html" target="_blank" rel="external">ã€ŠWebæ€§èƒ½ä¼˜åŒ–ä¸Http2ã€‹ï¼ˆå­™é£ï¼‰</a></li>
<li>åšæ–‡ï¼š<a href="https://imququ.com/post/header-compression-in-http2.html" target="_blank" rel="external">ã€ŠHTTP/2 å¤´éƒ¨å‹ç¼©æŠ€æœ¯ä»‹ç»ã€‹ï¼ˆå±ˆå…‰å®‡ï¼‰</a></li>
<li>è¯‘æœ¬ï¼š<a href="http://yuedu.baidu.com/ebook/478d1a62376baf1ffc4fad99" target="_blank" rel="external">ã€ŠHTTP/2.0ä¸­æ–‡ç¿»è¯‘ï¼ˆFEXï¼‰ã€‹</a></li>
<li>è¯‘æœ¬ï¼š<a href="https://www.gitbook.com/book/ye11ow/http2-explained/details" target="_blank" rel="external">ã€Šhttp2è®²è§£ã€‹ï¼ˆye11owï¼‰</a></li>
</ul>
<p>å›¾ç‰‡æ¥æºï¼š</p>
<ul>
<li>ä¹¦ç±ï¼š<a href="http://chimera.labs.oreilly.com/books/1230000000545/" target="_blank" rel="external">ã€ŠHigh Performance Browser Networkingã€‹(Ilya Grigorik)</a></li>
<li>è¯‘æœ¬ï¼š<a href="http://www.ituring.com.cn/book/1194" target="_blank" rel="external">ã€ŠWebæ€§èƒ½æƒå¨æŒ‡å—ã€‹ï¼ˆææ¾å³°ï¼‰</a></li>
</ul>
<p>å¦‚æœ‰é”™æ¼ï¼Œæ¬¢è¿æ–§æ­£ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;HTTP/2 æ˜¯ä¸‡ç»´ç½‘ï¼ˆWWWï¼‰åŸºç¡€åè®® HTTP 16å¹´æ¥çš„é¦–æ¬¡é‡å¤§å‡çº§ã€‚å…±ç»å†äº†18ç‰ˆè‰æ¡ˆï¼ˆ00-17ï¼‰ï¼Œäº2015å¹´2æœˆ18æ—¥æ­£å¼å®šç¨¿ï¼Œ2015å¹´5æœˆ14æ—¥ HTTP/2 æ­£å¼ç‰ˆå‘å¸ƒï¼Œæ­£å¼ç‰ˆ HTTP/2 è§„æ ¼æ ‡å‡†å«åš RFC7540 ã€‚&lt;/
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="HTTP2" scheme="https://aotu.io/tags/HTTP2/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ä¼˜åŒ–ä¸å®Œå…¨æŒ‡å—</title>
    <link href="https://aotu.io/notes/2016/03/16/optimization/"/>
    <id>https://aotu.io/notes/2016/03/16/optimization/</id>
    <published>2016-03-16T07:26:12.000Z</published>
    <updated>2016-11-03T03:32:54.969Z</updated>
    
    <content type="html"><![CDATA[<p>ç¯‡å¹…å¯èƒ½æœ‰ç‚¹é•¿ï¼Œæˆ‘æƒ³å…ˆèŠä¸€èŠé˜…è¯»çš„æ–¹å¼ï¼Œæˆ‘å¸Œæœ›ä½ é˜…è¯»çš„æ—¶å€™ï¼Œèƒ½å¤ŸæŠŠæˆ‘å½“ä½œä½ çš„ç«äº‰å¯¹æ‰‹ï¼Œä½ çš„æ¢¦æƒ³æ˜¯è¶…è¶Šæˆ‘ã€‚ä½ æƒ³è¶…è¶Šæˆ‘ï¼Œå°±å¾—äº†è§£æˆ‘æ‡‚ä»€ä¹ˆå¯¹å§ï¼Œå¥½ï¼Œå¼€å§‹é˜…è¯»~ ~ å“ˆå“ˆå“ˆ ~ ~ ~</p>
<p>å†æ—¶144000000æ¯«ç§’å‡ºå±±çš„å‰ç«¯ä¼˜åŒ–ç¯‡ï¼Œè‹¥ä½ é—®æˆ‘æœ‰ä»€ä¹ˆæ„Ÿæ‚Ÿï¼Ÿ<br>é‚£æˆ‘å‘Šè¯‰ä½ ï¼Œçœ‹åˆ°æ¯«ç§’å•Šï¼Œç«ç®­å•Šï¼Œè¿™äº›ä¸ä¼˜åŒ–ç›¸å…³çš„è¯ï¼Œéƒ½æœ‰è«åçš„äº²åˆ‡æ„Ÿã€‚<br>æœ¬æ–‡ä¸»è¦ä»<strong>å·¥ä½œæ•ˆç‡</strong>ã€<strong>é€Ÿåº¦æ€§èƒ½</strong>ã€<strong>ç¨³å®šæ€§</strong>ã€<strong>å“åº”å¼</strong>ã€<strong>å…¼å®¹æ€§</strong>ã€<strong>æœç´¢SEO</strong>ã€<strong>ä¿¡æ¯æ— éšœç¢</strong>ç­‰æ–¹é¢è¿›è¡Œè®²è§£ã€‚<br>å‰ç«¯ä¼˜åŒ–æ˜¯ä¸€ä¸ªè®©äººæŠ€æœ¯æå‡çš„pointï¼Œå¸Œæœ›ä½ ä¹Ÿèƒ½ä»è¿™é‡Œå­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚<br><a id="more"></a></p>
<h2 id="1-å·¥ä½œæ•ˆç‡"><a href="#1-å·¥ä½œæ•ˆç‡" class="headerlink" title="1 å·¥ä½œæ•ˆç‡"></a>1 å·¥ä½œæ•ˆç‡</h2><p>ä½ æ˜¯å¦ç»å¸¸å¤„äºè¿™æ ·çš„åœºæ™¯ï¼šä»æ—©ä¸Šå¿™åˆ°æ™šä¸Šå…«ä¹ç‚¹ï¼Œä¸€ä¼šä¸äº§å“ç»ç†æ²Ÿé€šï¼Œä¸€ä¼šåœ¨éƒ¨é—¨ç¾¤èŠä¸€ä¸‹æ–°å¥‡çš„ä¸œè¥¿ï¼Œä¸€ä¼šè¢«è®¾è®¡ç¾çœ‰çº ç¼ ä½æ‹–ä¸äº†èº«ï¼Œæœ‰æ—¶è¿˜å¼€ä¸äº†éƒ¨é—¨çš„ä¼šè®®å› ä¸ºé¡µé¢æ€¥ç€ä¸Šçº¿ï¼Œç„¶åç»§ç»­åŠ ç­~~~</p>
<p>æ€ä¹ˆæé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Ÿä¸‹é¢ä»å››ä¸ªæ–¹é¢è®²è§£ï¼š</p>
<ul>
<li>æ—¶é—´ç®¡ç†</li>
<li>åˆ©ç”¨å·¥å…·</li>
<li>ç»éªŒå’Œé˜…å† </li>
<li>ä½¿ç”¨æ–°æŠ€æœ¯</li>
</ul>
<h3 id="1-1-æ—¶é—´ç®¡ç†"><a href="#1-1-æ—¶é—´ç®¡ç†" class="headerlink" title="1.1 æ—¶é—´ç®¡ç†"></a>1.1 æ—¶é—´ç®¡ç†</h3><p>å‡¡æ˜¯æ—¶é—´ç®¡ç†ï¼Œéƒ½ä¼šè”æƒ³åˆ°è®¡åˆ’è¿™ä¸ªè¯ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹åˆ«äººå®¶çš„æœˆè®¡åˆ’è¡¨å’Œå‘¨è®¡åˆ’è¡¨ï¼Œä¹‹æ‰€ä»¥å‘¨è®¡åˆ’è¡¨ä¸ºç©ºï¼Œæ˜¯å¸Œæœ›ä½ èƒ½æŠŠå®ƒä¸‹è½½å¹¶æ‰“å°å‡ºæ¥ï¼Œè¡ŒåŠ¨ä»è®¡åˆ’å¼€å§‹ï¼š<br>æœˆè®¡åˆ’è¡¨ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/æœˆè®¡åˆ’.jpg" alt="img"><br>å‘¨è®¡åˆ’è¡¨ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/å‘¨è®¡åˆ’.jpg" alt="img"></p>
<p>å½“ç„¶è®¡åˆ’ä¸è¦åšå¾—è¿‡äºçç¢ï¼Œä¸”ä¸è¦å ç”¨è‡ªå·±å¤ªå¤šæ—¶é—´ã€‚åšå¥½è®¡åˆ’ä¹‹ä½™ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>æ­£ç¡®çš„æ—¶é—´ç‚¹åšæ­£ç¡®çš„äº‹ï¼Œæ¯”å¦‚æ—©ä¸Šæ¯”è¾ƒç²¾ç¥ï¼Œå¯é€‰æ‹©æ¯”è¾ƒéš¾çš„é¡¹ç›®å¼€å±•ï¼Œå¯å®¹æ˜“è¾¾åˆ°é«˜æ•ˆç‡</strong>ã€‚</li>
<li><strong>ä¸“æ³¨ä¸€ä»¶äº‹æƒ…ï¼Œå°½é‡ä¸è¦è¢«çç¢æˆ–å…¶ä»–äº‹æƒ…å½±å“ï¼Œè€Œä¸”ä¸è¦é¢‘ç¹åœ°å»çœ‹è®¡åˆ’è¡¨ï¼Œæœ€å¥½æ˜¯åšå®Œä¸€ä»¶å†å»çœ‹ï¼Œå¦åˆ™å®¹æ˜“ç„¦è™‘å¯¼è‡´æ— æ³•ä¸“å¿ƒ</strong>ã€‚</li>
</ul>
<h3 id="1-2-åˆ©ç”¨å·¥å…·"><a href="#1-2-åˆ©ç”¨å·¥å…·" class="headerlink" title="1.2 åˆ©ç”¨å·¥å…·"></a>1.2 åˆ©ç”¨å·¥å…·</h3><p>ç¬¬ä¸€æ ·å·¥å…·ï¼Œæ¯”å¦‚ç¨‹åºå‘˜æ¯å­ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/gité©¬å…‹æ¯.jpg" alt="img"></p>
<p>åˆ©ç”¨å·¥å…·æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p>
<ul>
<li>å‡å°‘é‡å¤æ€§å·¥ä½œã€‚</li>
<li>å‡å°‘ç¹çå·¥ä½œæµç¨‹ï¼Œä¸€é”®å¼åŒ–ã€‚</li>
</ul>
<h4 id="1-2-1-ç¼–è¾‘å™¨"><a href="#1-2-1-ç¼–è¾‘å™¨" class="headerlink" title="1.2.1 ç¼–è¾‘å™¨"></a>1.2.1 ç¼–è¾‘å™¨</h4><p>é€‰æ‹©å¥½ä¸€ä¸ªå‰ç«¯ç¼–è¾‘å™¨æ˜¯æ¯”è¾ƒé‡è¦çš„ã€‚ç›®å‰sublimeã€webstormå’Œvimæ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå»ºè®®ä¸ä½¿ç”¨Dreamweaverã€‚<br>sublimeç›®å‰è¿˜æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œå¯ä»¥å®‰è£…æ’ä»¶ï¼Œæ¯”å¦‚BracketHighlighter é«˜äº®æ˜¾ç¤ºã€JsFormatã€Emmet html/CSSå¿«é€Ÿç¼–è¾‘ä»¥åŠDocBlockræ’ä»¶ï¼Œå¿«é€Ÿè¾“å…¥jsDocæ³¨é‡Šç­‰ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰ä»£ç æ®µsnippetsã€‚<br>æ— è®ºä½ ä½¿ç”¨å“ªç§ç¼–è¾‘å™¨ï¼Œä½ éœ€è¦çš„æ˜¯<strong>ç†Ÿæ‚‰è¿™ä¸ªç¼–è¾‘å™¨å¹¶ç†Ÿç»ƒå®ƒçš„å¿«æ·é”®</strong>ã€‚</p>
<h4 id="1-2-2-æµè§ˆå™¨å¼€å‘è€…å·¥å…·"><a href="#1-2-2-æµè§ˆå™¨å¼€å‘è€…å·¥å…·" class="headerlink" title="1.2.2 æµè§ˆå™¨å¼€å‘è€…å·¥å…·"></a>1.2.2 æµè§ˆå™¨å¼€å‘è€…å·¥å…·</h4><p>ä½œä¸ºå‰ç«¯äººå‘˜ï¼Œé¦–é€‰çš„æµè§ˆå™¨å½“ç„¶æ˜¯chromeã€‚æ¨èé˜…è¯»<a href="http://web.jobbole.com/82558/" target="_blank" rel="external">Chromeå¼€å‘è€…å·¥å…·ä¸å®Œå…¨æŒ‡å—</a>ä¸€ç³»åˆ—æ–‡ç« ï¼Œå®ƒä»ä¸€äº›åŸºç¡€çš„åŠŸèƒ½å¼€å§‹åˆ°å®ƒçš„ä¸€äº›é«˜çº§æ€§èƒ½åˆ†æå™¨ï¼ˆTimelineã€Profilesï¼‰ï¼Œç†Ÿæ‚‰chromeå¯¹æˆ‘ä»¬çš„å¼€å‘å·¥ä½œæœ‰å¾ˆå¤§çš„ä½œç”¨ã€‚</p>
<h4 id="1-2-3-å…¶ä»–å¸¸ç”¨å·¥å…·"><a href="#1-2-3-å…¶ä»–å¸¸ç”¨å·¥å…·" class="headerlink" title="1.2.3 å…¶ä»–å¸¸ç”¨å·¥å…·"></a>1.2.3 å…¶ä»–å¸¸ç”¨å·¥å…·</h4><p>åˆ‡å›¾å·¥å…·ï¼š<a href="http://jingyan.baidu.com/article/e73e26c0c9971524adb6a7a6.html" target="_blank" rel="external">photoshop ccåˆ‡å›¾ä¹‹æ™ºèƒ½åˆ‡å›¾</a>ã€ <a href="http://www.cutterman.cn/v2/cutterman" target="_blank" rel="external">cutterman</a><br>é‡è‰²ã€æµ‹è·å·¥å…·ï¼šFastStone Captureã€<a href="http://www.getmarkman.com/" target="_blank" rel="external">é©¬å…‹é³— - è®¾è®¡ç¨¿æ ‡æ³¨</a><br>å›¾ç‰‡å‹ç¼©ï¼š<a href="https://tinypng.com/" target="_blank" rel="external">tinypng</a>ã€<a href="http://zhitu.isux.us/" target="_blank" rel="external">æ™ºå›¾</a><br>ç”Ÿæˆé›ªç¢§å›¾ï¼š<a href="http://www.spritebox.net/" target="_blank" rel="external">spritebox</a>ã€<a href="http://www.cn.spritegen.website-performance.org/" target="_blank" rel="external">CSS Sprite Generator</a>ã€cssgaga<br>è°ƒè¯•å·¥å…·ï¼šFiddler ã€weinre ã€å¾®ä¿¡è°ƒè¯•å·¥å…·ï¼›</p>
<h4 id="1-2-4-å‰ç«¯å·¥ç¨‹åŒ–"><a href="#1-2-4-å‰ç«¯å·¥ç¨‹åŒ–" class="headerlink" title="1.2.4 å‰ç«¯å·¥ç¨‹åŒ–"></a>1.2.4 å‰ç«¯å·¥ç¨‹åŒ–</h4><p>å‡¡æ˜¯é‡å¤çš„ï¼Œå¿…é¡»ä½¿ç”¨å·¥å…·è‡ªåŠ¨å®Œæˆã€‚<br>å·¥å…·ä¼—å¤šï¼Œæˆ‘ä»¬å°±æœ‰ä¸€ç§æƒ³æ³•ï¼Œèƒ½ä¸èƒ½æœ‰ä¸€ç§å·¥å…·èƒ½å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆé›ªç¢§å›¾ã€ csså‹ç¼©ã€å›¾ç‰‡å‹ç¼©ç­‰ç­‰ï¼Œç„¶åå°±å‡ºç°äº†å‰ç«¯å·¥ç¨‹åŒ–ã€‚å‰ç«¯å·¥ç¨‹åŒ–ä¸€èˆ¬å¯åˆ†ä¸ºäº”ä¸ªæ­¥éª¤ï¼š<br>ï¼ˆ1ï¼‰ åˆå§‹ï¼Œç”ŸæˆåŸºç¡€ç›®å½•ç»“æ„å’Œæ ·å¼åº“ã€‚<br>ï¼ˆ2ï¼‰ å¼€å‘ï¼Œå®æ—¶é¢„è§ˆã€é¢„ç¼–è¯‘ã€‚<br>ï¼ˆ3ï¼‰ æ„å»ºï¼Œé¢„ç¼–è¯‘ã€åˆå¹¶ã€å‹ç¼©ã€‚<br>ï¼ˆ4ï¼‰ å‘å¸ƒï¼Œå°†æ„å»ºåé™æ€æ–‡ä»¶å‘å¸ƒä¸Šçº¿ã€‚<br>ï¼ˆ5ï¼‰ æ‰“åŒ…ï¼Œèµ„æºè·¯å¾„è½¬æ¢ï¼Œæºç æ‰“åŒ… ã€‚</p>
<p>è¿™é‡Œæ¨èä¸€ä¸ªå·¥å…·<a href="http://fis.baidu.com/" target="_blank" rel="external">fis</a>ï¼Œè§£å†³å‰ç«¯å¼€å‘ä¸­è‡ªåŠ¨åŒ–å·¥å…·ã€æ€§èƒ½ä¼˜åŒ–ã€æ¨¡å—åŒ–æ¡†æ¶ã€å¼€å‘è§„èŒƒã€ä»£ç éƒ¨ç½²ã€å¼€å‘æµç¨‹ç­‰é—®é¢˜ã€‚è¿˜æœ‰å‡¹å‡¸å®éªŒå®¤ç ”å‘çš„<a href="http://aotu.io/athena/">athena</a>ï¼ŒO2Teamæ„å»ºé¡¹ç›®æµç¨‹å·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆç›¸åº”ç›®å½•å’Œä»£ç ï¼ŒåŒæ—¶å¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œ ä¸€æ¬¡å®‰è£…ï¼Œåˆ°å¤„è¿è¡Œã€‚</p>
<h3 id="1-3-é˜…å†å’Œç»éªŒ"><a href="#1-3-é˜…å†å’Œç»éªŒ" class="headerlink" title="1.3 é˜…å†å’Œç»éªŒ"></a>1.3 é˜…å†å’Œç»éªŒ</h3><p>æˆ‘æ‰€ç†è§£çš„ç¨‹åºå‘˜å…¼å¹¶èªæ˜ä»¥åŠâ€œæ‡’æƒ°â€ç²¾ç¥ï¼Œæ¨å´‡æ‡’æƒ°å¼å¼€å‘ï¼Œå³æŠŠé—®é¢˜ç†è§£æ¸…æ¥šï¼Œç¡®ä¿å°†è¦å†™çš„ä»£ç èƒ½çœŸæ­£çš„è§£å†³é—®é¢˜ï¼Œè¿™å°†ä¼šé¿å…ä¹‹åå†™å‡ºå¤§é‡æ— ç”¨çš„ä»£ç ï¼Œæ­£æ‰€è°“â€œæ‡’â€å‡ºæ•ˆç‡ã€‚<br>æˆ‘ä»¬çš„é˜…å†å’Œç»éªŒå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼Œæ€è€ƒä»£ç çš„æ—¶é—´å¢åŠ ä»è€Œé€‰å‡ºæœ€ä¼˜æ–¹æ¡ˆï¼Œå› æ­¤å†™ä»£ç é€Ÿåº¦æ›´å¿«ä»¥åŠä»£ç é•¿åº¦æ›´çŸ­ï¼Œå¯¹é—®é¢˜çš„é€å½»ç†è§£ä½¿è°ƒè¯•ä»£ç çš„é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚<br>æ ¹æ®é˜…å†å’Œç»éªŒï¼Œæˆ–å€ŸåŠ©å…¶ä»–äººçš„ï¼Œæˆ‘ä»¬è¿›è¡Œæ•´ç†ä»è€Œå½¢æˆè‡ªå·±æˆ–å›¢é˜Ÿçš„è§„èŒƒï¼Œè¿™å¯å¤§å¤§æé«˜æˆ‘ä»¬çš„å†™ç é€Ÿåº¦ã€‚</p>
<h3 id="1-4-ä½¿ç”¨æ–°æŠ€æœ¯"><a href="#1-4-ä½¿ç”¨æ–°æŠ€æœ¯" class="headerlink" title="1.4 ä½¿ç”¨æ–°æŠ€æœ¯"></a>1.4 ä½¿ç”¨æ–°æŠ€æœ¯</h3><p>ä½¿ç”¨æ–°æŠ€æœ¯å¦‚ä½•æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚ä¸€è´¯æˆ‘ä»¬éƒ½ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„æŠ€æœ¯å»å¼€å‘ä¸€ä¸ªæŠ€æœ¯å¤„ç†æ–¹æ¡ˆï¼Œæ¯•ç«Ÿå­¦ä¹ æ–°æŠ€æœ¯çš„æ—¶é—´æˆæœ¬è¿˜æ˜¯å­˜åœ¨çš„ã€‚ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½å¿½ç•¥ä¸€äº›æ–°æŠ€æœ¯çš„å­˜åœ¨ï¼Œä¸€èˆ¬æ–°æŠ€æœ¯åŒ…å«äº†ä¸€äº›å¾ˆæ£’çš„æ–°ç‰¹æ€§ï¼Œå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å®ç°å¾ˆå¤šå¤æ‚çš„æ“ä½œï¼Œæé«˜å¼€å‘äººå‘˜çš„æ•ˆç‡ï¼Œæ¯”å¦‚ES6ã€‚<strong>ç”¨ä½ çš„æ…§çœ¼å»ç§¯ç´¯æ–°æŠ€æœ¯ï¼Œä¼šæ´¾ä¸Šç”¨åœºçš„</strong>ã€‚</p>
<h2 id="2-é€Ÿåº¦æ€§èƒ½"><a href="#2-é€Ÿåº¦æ€§èƒ½" class="headerlink" title="2 é€Ÿåº¦æ€§èƒ½"></a>2 é€Ÿåº¦æ€§èƒ½</h2><p>ä¸ºä»€ä¹ˆéœ€è¦å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Ÿæ€§èƒ½ä¼˜åŒ–å¯ä»¥ä»å“ªå‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼Ÿ<br>é‡åˆ°ä¸€ä¸ªé¡µé¢ï¼Œ5ç§’è¿˜æ²¡åŠ è½½å®Œæˆï¼Œé‚£ä¸ªèŠèŠ±è½¬å•Šè½¬ï¼Œæˆ–è€…é¡µé¢å®Œå…¨ç™½å±ï¼Œé‚£ç®€ç›´æŠŠäººé€¼ç–¯äº†ã€‚ä»ç”¨æˆ·ä½“éªŒçš„è§’åº¦çœ‹ï¼Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚ç½‘é¡µæœ€é•¿åŠ è½½æ—¶é—´ä¸€èˆ¬ä¸èƒ½è¶…è¿‡3ç§’ã€‚<br>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®å®šç½‘é¡µçš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¯é‡åŒ–çš„ç›®æ ‡ä»¥åŠå¯æŒç»­è·Ÿè¸ªçš„ä¼˜åŒ–æ•°æ®æ˜¯æ€§èƒ½ä¼˜åŒ–å·¥ä½œå¾—ä»¥æŒç»­è¿›è¡Œçš„ä¿éšœï¼ŒåŒæ—¶ä¹Ÿæ˜¯æºåŠ¨åŠ›ï¼æ¯”å¦‚ï¼š</p>
<ul>
<li>é¦–å±åŠ è½½æ—¶é•¿</li>
<li>DOMåŠ è½½æ—¶é•¿</li>
<li>é¡µé¢ç™½å±æ—¶é•¿</li>
</ul>
<p>æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ä¸‰ç§æ–¹å¼æ¥æ£€éªŒæˆ‘ä»¬çš„ç½‘é¡µæ€§èƒ½ï¼š</p>
<ul>
<li>é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆ–æµè§ˆå™¨æ’ä»¶ã€Fiddlerã€Charlesç­‰æŸ¥çœ‹é¡µé¢åŠ è½½æƒ…å†µã€‚åŸç†æ˜¯é€šè¿‡è¿½è¸ªHTTPè¯·æ±‚ä¸å“åº”çš„æ—¶é—´ï¼Œä»¥å›¾å½¢çš„æ–¹å¼åˆ—å‡ºæ‰€æœ‰èµ„æºçš„ä¸‹è½½æƒ…å†µã€‚ç¼ºç‚¹æ˜¯äººä¸ºæ“ä½œï¼Œéš¾ä»¥å®ç°æ‰¹é‡æµ‹è¯•ä¸ç»Ÿè®¡ã€‚</li>
<li>åœ¨é¡µé¢ä¸­å¼•å…¥é¢å¤–çš„ä»£ç é’©å­æ¥è®°å½•æ—¶é—´ç­‰ç›¸å…³æ•°æ®ã€‚ç¼ºç‚¹æ˜¯åŠ é‡äº†å¼€å‘è€…ä¸æµ‹è¯•äººå‘˜çš„è´Ÿæ‹…ï¼Œè¿˜æœ‰å¯èƒ½å› ä¸ºæ£€æµ‹ä»£ç æœ¬èº«çš„æ½œåœ¨é—®é¢˜å½±å“é¡µé¢çš„æ€§èƒ½ã€‚å¦‚æœå¥½ä¸€ç‚¹çš„è¯ï¼Œä¼šæ¥å…¥ä¸€ä¸ªæ€§èƒ½æ•°æ®æ”¶é›†ç³»ç»Ÿï¼Œé‡‡å–å¹¶åˆ†ææ•°æ®ã€‚</li>
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å·¥å…·å¦‚Page Speedã€YSlowå’ŒWebPagetestï¼Œèƒ½å¤Ÿé€‰æ‹©åœ¨ä¸åŒæµè§ˆå™¨å’Œä¸åŒåœ°åŸŸè¿›è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”ç»™å‡ºå„æ–¹é¢çš„è¯„åˆ†ä»¥åŠæä¾›ä¸€äº›ä¼˜åŒ–å»ºè®®ã€‚ä½†æŸäº›æœåŠ¡éœ€è¦æ’é˜Ÿç­‰å¾…ï¼Œå¹¶ä¸”éš¾ä»¥å®ç°æ‰¹é‡æµ‹è¯•ä¸ç»Ÿè®¡ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨WebPagetestæµ‹è¯•äº¬ä¸œé¦–é¡µçš„æƒ…å†µï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/webpagetest.jpg" alt="img"></li>
</ul>
<p>å¯å–œå¯è´ºï¼ŒW3Cæ¨å‡ºäº†ä¸€å¥—<strong><a href="https://www.w3.org/wiki/Web_Performance/Publications" target="_blank" rel="external">æ€§èƒ½APIæ ‡å‡†</a></strong>ï¼Œç›®çš„æ˜¯ç®€åŒ–å¼€å‘è€…å¯¹ç½‘ç«™æ€§èƒ½è¿›è¡Œç²¾ç¡®åˆ†æä¸æ§åˆ¶çš„è¿‡ç¨‹ï¼Œæœ€ç»ˆå®ç°æ€§èƒ½çš„æé«˜ã€‚æ¯”å¦‚é€šè¿‡Navigation Timingè®°å½•çš„å…³é”®æ—¶é—´ç‚¹æ¥ç»Ÿè®¡é¡µé¢å®Œæˆæ‰€ç”¨çš„æ—¶é—´ï¼Œéƒ¨åˆ†ä½¿ç”¨æ–¹æ³•ï¼š    </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> timing = <span class="built_in">window</span>.performance.timing</div><div class="line">timing.domLoading  <span class="comment">//æµè§ˆå™¨å¼€å§‹è§£æ HTML æ–‡æ¡£ç¬¬ä¸€æ‰¹æ”¶åˆ°çš„å­—èŠ‚</span></div><div class="line">timing.domInteractive  <span class="comment">// æµè§ˆå™¨å®Œæˆè§£æå¹¶ä¸”æ‰€æœ‰ HTML å’Œ DOM æ„å»ºå®Œæ¯•</span></div><div class="line">timing.domContentLoadedEventStart <span class="comment">//DOM è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å¼€å§‹çš„æ—¶é—´</span></div><div class="line">timing.domContentLoadedEventEnd <span class="comment">// DOM è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å®Œæˆçš„æ—¶é—´ï¼ˆå¦‚ JS è„šæœ¬åŠ è½½æ‰§è¡Œå®Œæ¯•ï¼‰</span></div><div class="line">timing.domComplete <span class="comment">//ç½‘é¡µä¸Šæ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ç­‰ï¼‰ä¸‹è½½å®Œæˆ,ä¸”å‡†å¤‡å°±ç»ªçš„æ—¶é—´</span></div></pre></td></tr></table></figure>
<p><strong>æŒç»­è¿½è¸ªæ€§èƒ½æ•°æ®ï¼Œè¦é€‰æ‹©åˆé€‚çš„é¡µé¢æ€§èƒ½æµ‹é‡å·¥å…·æˆ–APIï¼Œä¸€æ—¦é€‰å®šåï¼Œä¸å†æ›´æ¢ï¼Œä»¥ä¿è¯å†å²æ•°æ®çš„å¯å‚ç…§æ€§ã€‚</strong>æˆ‘ä»¬è¿˜è¦å½¢æˆä¸€ç§æ„è¯†ï¼Œè¾¾æˆæ€§èƒ½è”ç›Ÿå°ç»„ï¼Œå¯¹äºé‡è¦çš„ä¸šåŠ¡æˆ–è€…é¡µé¢ï¼Œä¸€å®šè¦ä»æ€§èƒ½çš„è§’åº¦è€ƒè™‘é—®é¢˜ï¼Œæœ‰ç†æœ‰æ®åœ°æ‹’ç»æœ‰æŸäºå‰ç«¯æ€§èƒ½çš„ä¸šåŠ¡éœ€æ±‚æˆ–æ”¹åŠ¨ã€‚</p>
<p>äººäººéƒ½çŸ¥é“é›…è™å†›è§„ï¼Œé‚£æˆ‘å°±æ¥ä¸ªæˆªå›¾å§ï¼</p>
<p><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/é›…è™35æ¡å†›è§„.jpg" alt="img"></p>
<p>ä»¥ä¸‹ï¼Œæˆ‘ä»¬ä»æœåŠ¡ç«¯ã€ç½‘ç»œã€å®¢æˆ·ç«¯ä¸‰ä¸ªæ–¹é¢æ¥ä¸€ä¸€çªç ´é€Ÿåº¦æ€§èƒ½çš„æå‡ã€‚</p>
<h3 id="2-1-æ²¡äº‹å°‘çƒ¦æˆ‘-æœåŠ¡ç«¯"><a href="#2-1-æ²¡äº‹å°‘çƒ¦æˆ‘-æœåŠ¡ç«¯" class="headerlink" title="2.1 æ²¡äº‹å°‘çƒ¦æˆ‘-æœåŠ¡ç«¯"></a>2.1 æ²¡äº‹å°‘çƒ¦æˆ‘-æœåŠ¡ç«¯</h3><h4 id="2-1-1-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent-Delivery-Networkï¼ŒCDNï¼‰"><a href="#2-1-1-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent-Delivery-Networkï¼ŒCDNï¼‰" class="headerlink" title="2.1.1 ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent Delivery Networkï¼ŒCDNï¼‰"></a>2.1.1 ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent Delivery Networkï¼ŒCDNï¼‰</h4><p>é€šè¿‡åœ¨ç°æœ‰çš„Internetä¸­å¢åŠ ä¸€å±‚æ–°çš„ç½‘ç»œæ¶æ„ï¼Œå°†ç½‘ç«™çš„å†…å®¹å‘å¸ƒåˆ°æœ€æ¥è¿‘ç”¨æˆ·çš„ cacheæœåŠ¡å™¨å†…ï¼Œé€šè¿‡DNSè´Ÿè½½å‡è¡¡çš„æŠ€æœ¯ï¼Œ<strong>åˆ¤æ–­ç”¨æˆ·æ¥æºå°±è¿‘è®¿é—®cacheæœåŠ¡å™¨å–å¾—æ‰€éœ€çš„å†…å®¹</strong>ã€‚æ·±åœ³ç”¨æˆ·è®¿é—®é¥è¿œçš„ç¾å›½æœåŠ¡å™¨ï¼Œå½“ç„¶ä¸ç†æƒ³äº†ã€‚æŠŠé™æ€å†…å®¹åˆ†å¸ƒåˆ°CDNå¯ä»¥å‡å°‘ç”¨æˆ·å“åº”æ—¶é—´20%æˆ–æ›´å¤šã€‚</p>
<h4 id="2-1-2-é™æ€èµ„æºç¼“å­˜ï¼Œç§»åŠ¨ç«¯ç¦»çº¿ç¼“å­˜"><a href="#2-1-2-é™æ€èµ„æºç¼“å­˜ï¼Œç§»åŠ¨ç«¯ç¦»çº¿ç¼“å­˜" class="headerlink" title="2.1.2 é™æ€èµ„æºç¼“å­˜ï¼Œç§»åŠ¨ç«¯ç¦»çº¿ç¼“å­˜"></a>2.1.2 é™æ€èµ„æºç¼“å­˜ï¼Œç§»åŠ¨ç«¯ç¦»çº¿ç¼“å­˜</h4><p>å¦‚æœå¯ä»¥å‡å°‘æœåŠ¡ç«¯çš„è´Ÿæ‹…ï¼Œåœ¨åº”ç”¨ç¦»çº¿æ—¶å¯ä½¿ç”¨èµ„æºæˆ–åŠ è½½èµ„æºæ›´å¿«ï¼Œå²‚ä¸ä¹å“‰ï¼Ÿ<br>ç¼“å­˜åˆ©ç”¨å¯åŒ…æ‹¬ï¼šæ·»åŠ  Expires å¤´ï¼Œé…ç½® ETagï¼Œä½¿ Ajax å¯ç¼“å­˜ç­‰ã€‚å…¶å®ï¼Œæ°å½“çš„ç¼“å­˜è®¾ç½®å¯ä»¥å¤§å¤§çš„å‡å°‘ HTTPè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥èŠ‚çœå¸¦å®½ ã€‚</p>
<ul>
<li>é…ç½® ETagï¼šå³If-None-Match: ä¸Šæ¬¡ ETag çš„å†…å®¹ã€‚æµè§ˆå™¨ä¼šå‘å‡ºè¯·æ±‚è¯¢é—®æœåŠ¡ç«¯ï¼Œèµ„æºæ˜¯å¦è¿‡æœŸï¼›æœåŠ¡ç«¯å‘ç°,æ²¡æœ‰è¿‡æœŸï¼Œç›´æ¥è¿”å›ä¸€ä¸ªçŠ¶æ€ç ä¸º 304ã€æ­£æ–‡ä¸ºç©ºçš„å“åº”ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼›å¦‚æœèµ„æºæœ‰æ›´æ–°ï¼ŒæœåŠ¡ç«¯è¿”å›çŠ¶æ€ç  200ã€Etag å’Œæ­£æ–‡ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¹‹ä¸º HTTP çš„åå•†ç¼“å­˜ï¼Œé€šå¸¸ä¹Ÿå«åšå¼±ç¼“å­˜ã€‚</li>
<li>æ·»åŠ  Expires å¤´ï¼šæœåŠ¡ç«¯é€šè¿‡å“åº”å¤´å‘Šè¯‰æµè§ˆå™¨ï¼Œåœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼ˆExpiresï¼‰æˆ–åœ¨å¤šé•¿æ—¶é—´ä¹‹å†…ï¼ˆCache-Control: Max-age=xxxï¼‰ï¼Œä¸è¦å†è¯·æ±‚æœåŠ¡å™¨äº†ã€‚è¿™ä¸ªæœºåˆ¶æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸º HTTP çš„å¼ºç¼“å­˜ã€‚ä¸€èˆ¬ä¼šå¯¹ CSSã€JSã€å›¾ç‰‡ç­‰èµ„æºä½¿ç”¨å¼ºç¼“å­˜ï¼Œè€Œå…¥å£æ–‡ä»¶ï¼ˆHTMLï¼‰ä¸€èˆ¬ä½¿ç”¨åå•†ç¼“å­˜æˆ–ä¸ç¼“å­˜ã€‚</li>
<li><p>AppCacheï¼š</p>
<p>  AppCacheä¸»è¦åˆ©ç”¨manifest æ–‡æœ¬æ–‡ä»¶ï¼Œå‘ŠçŸ¥æµè§ˆå™¨è¢«ç¼“å­˜çš„å†…å®¹ä»¥åŠä¸ç¼“å­˜çš„å†…å®¹ã€‚<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/ç¦»çº¿å­˜å‚¨.jpg" alt="img"></p>
<p>  manifest æ–‡ä»¶å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<br>  ï¼ˆ1ï¼‰ CACHE MANIFEST - åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶å°†åœ¨é¦–æ¬¡ä¸‹è½½åè¿›è¡Œç¼“å­˜ï¼Œç­‰ä»·äºCACHE<br>  ï¼ˆ2ï¼‰ NETWORK - åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶éœ€è¦ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œä¸”ä¸ä¼šè¢«ç¼“å­˜<br>  ï¼ˆ3ï¼‰ FALLBACK - åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶è§„å®šå½“é¡µé¢æ— æ³•è®¿é—®æ—¶çš„å›é€€é¡µé¢    </p>
<p>  ä½¿ç”¨AppCacheæ–¹æ¡ˆçš„æ­¥éª¤ï¼š<br>  ï¼ˆ1ï¼‰ æ•´ç†å‡ºéœ€è¦ç¼“å­˜çš„é™æ€æ–‡ä»¶åˆ—è¡¨ï¼Œå¦‚juqery.jså’Œgb.cssã€‚<br>  ï¼ˆ2ï¼‰ é…ç½®æœåŠ¡å™¨æ”¯æŒã€‚<br>  ï¼ˆ3ï¼‰ ç¡®å®šå†…å®¹æ›´æ–°æœºåˆ¶å’Œæµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<ul>
<li>LocalStorageï¼šç”¨äºæŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚</li>
</ul>
<h3 id="2-2-çœç€ç‚¹ç”¨-ç½‘ç»œ"><a href="#2-2-çœç€ç‚¹ç”¨-ç½‘ç»œ" class="headerlink" title="2.2 çœç€ç‚¹ç”¨-ç½‘ç»œ"></a>2.2 çœç€ç‚¹ç”¨-ç½‘ç»œ</h3><h4 id="2-2-1-å‡å°‘è¯·æ±‚æ•°"><a href="#2-2-1-å‡å°‘è¯·æ±‚æ•°" class="headerlink" title="2.2.1 å‡å°‘è¯·æ±‚æ•°"></a>2.2.1 å‡å°‘è¯·æ±‚æ•°</h4><p>å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å‡å°‘è¯·æ±‚æ•°ï¼š</p>
<ul>
<li>å°å›¾ç‰‡åˆå¹¶é›ªç¢§å›¾ï¼›</li>
<li>JSã€CSSæ–‡ä»¶é€‰æ‹©æ€§åˆå¹¶ï¼›</li>
<li>é¿å…é‡å¤çš„èµ„æºè¯·æ±‚ã€‚</li>
</ul>
<p>å‡å°‘è¯·æ±‚æ•°å¯¹äºé€Ÿåº¦ä¼˜åŒ–æ¥è¯´æœ€é‡è¦æœ€æœ‰æ•ˆçš„ï¼Œç‰¹åˆ«æ˜¯ç½‘ç»œå·®çš„ç”¨æˆ·ã€‚ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚éœ€è¦ç»è¿‡åŸŸåè§£æä»¥åŠDNSå¯»å€ã€ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€å‘é€æ•°æ®ã€ç­‰å¾…æœåŠ¡å™¨å“åº”ã€æ¥æ”¶æ•°æ®çš„è¿‡ç¨‹ï¼›æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦æºå¸¦æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦å ç”¨å¸¦å®½ï¼›æµè§ˆå™¨è¿›è¡Œå¹¶å‘è¯·æ±‚çš„è¯·æ±‚æ•°æ˜¯æœ‰ä¸Šé™çš„ã€‚è¯·æ±‚å¤šäº†çš„æƒ…å†µï¼Œæ˜æ˜¾å¢åŠ äº†ç½‘é¡µçš„å“åº”æ—¶é—´ã€‚ä¸€ä¸ªé¡µé¢ç”±å¤šä¸ªæ¨¡å—æ‹¼æ¥è€Œæˆï¼Œå‡ ä¸ªæ¨¡å—ä¸­è¯·æ±‚äº†åŒæ ·çš„èµ„æºæ—¶ï¼Œå°±ä¼šå¯¼è‡´èµ„æºçš„é‡å¤è¯·æ±‚ã€‚</p>
<h4 id="2-2-2-å‡å°‘æ–‡ä»¶å¤§å°ï¼ˆå‡å°‘è¯·æ±‚å¸¦å®½ï¼‰"><a href="#2-2-2-å‡å°‘æ–‡ä»¶å¤§å°ï¼ˆå‡å°‘è¯·æ±‚å¸¦å®½ï¼‰" class="headerlink" title="2.2.2 å‡å°‘æ–‡ä»¶å¤§å°ï¼ˆå‡å°‘è¯·æ±‚å¸¦å®½ï¼‰"></a>2.2.2 å‡å°‘æ–‡ä»¶å¤§å°ï¼ˆå‡å°‘è¯·æ±‚å¸¦å®½ï¼‰</h4><ul>
<li>å‹ç¼©CSSã€JSã€å›¾ç‰‡ï¼›</li>
<li>å°½å¯èƒ½æ§åˆ¶DOMèŠ‚ç‚¹æ•°ï¼›</li>
<li>ç²¾ç®€cssã€ JavaScriptï¼Œç§»é™¤æ³¨é‡Šã€ç©ºæ ¼ã€é‡å¤csså’Œè„šæœ¬ã€‚</li>
<li>å¼€å¯Gzipï¼ŒGzipçš„æ€æƒ³å°±æ˜¯æŠŠæ–‡ä»¶å…ˆåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œå‹ç¼©ï¼Œä¸”å‹ç¼©ç‡è¾¾åˆ°85%ï¼Œç„¶åå†ä¼ è¾“ï¼Œä¼ è¾“å®Œæ¯•åæµè§ˆå™¨ä¼š é‡æ–°å¯¹å‹ç¼©è¿‡çš„å†…å®¹è¿›è¡Œè§£å‹ç¼©ï¼Œå¹¶æ‰§è¡Œã€‚ã€‚å¥½å¤„åœ¨äºGzipçš„æ”¯æŒå·²ç»å¾ˆå¥½ï¼Œä¸”çˆ¬è™«å¯è¯†åˆ«ï¼Œå‹ç¼©ç‡è¾¾åˆ°66%-85%æ˜¾è‘—å‡å°‘äº†æ–‡ä»¶ä¼ è¾“çš„å¤§å°ã€‚å¦å¤–ï¼Œgzipå¯¹pdfæ–‡ä»¶çš„å‹ç¼©æ•ˆæœä¸å¤§ï¼Œè€Œä¸”ä¼šæµªè´¹CPUã€‚</li>
</ul>
<h4 id="2-2-3-åˆç†ä½¿ç”¨é™æ€èµ„æºåŸŸå"><a href="#2-2-3-åˆç†ä½¿ç”¨é™æ€èµ„æºåŸŸå" class="headerlink" title="2.2.3 åˆç†ä½¿ç”¨é™æ€èµ„æºåŸŸå"></a>2.2.3 åˆç†ä½¿ç”¨é™æ€èµ„æºåŸŸå</h4><p><strong>åŸŸåçš„è¦æ±‚æ˜¯çŸ­å°ä¸”ç‹¬ç«‹</strong>ã€‚<br>çŸ­å°å¯ä»¥å‡å°‘å¤´éƒ¨å¼€é”€ï¼Œå› ä¸ºåŸŸåè¶ŠçŸ­è¯·æ±‚å¤´èµ·å§‹è¡Œçš„ URI å°±è¶ŠçŸ­ã€‚ä¹‹æ‰€ä»¥è¦æ±‚ç‹¬ç«‹ï¼Œå› ä¸ºç‹¬ç«‹åŸŸåä¸ä¼šå…±äº«ä¸»åŸŸçš„ Cookieï¼Œå¯ä»¥æœ‰æ•ˆå‡å°è¯·æ±‚å¤´å¤§å°ï¼Œè¿™ä¸ªç­–ç•¥ä¸€èˆ¬ç§°ä¹‹ä¸º Cookie-Free Domainï¼›å¦å¤–ä¸€ä¸ªåŸå› æ˜¯æµè§ˆå™¨å¯¹ç›¸åŒåŸŸåçš„å¹¶å‘è¿æ¥æ•°é™åˆ¶ï¼Œä¸€èˆ¬å…è®¸åŒåŸŸåå¹¶å‘ 6~8 ä¸ªè¿æ¥ï¼ŒåŸŸåä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œæ¯ä¸ªåŸŸåçš„ç¬¬ä¸€ä¸ªè¿æ¥éƒ½è¦ç»å† DNS æŸ¥è¯¢ï¼ˆDNS Lookupï¼‰ï¼Œå¯¼è‡´ä¼šè€—è´¹ä¸€å®šçš„æ—¶é—´ï¼Œæ§åˆ¶åŸŸåä½¿ç”¨åœ¨2-4ä¸ªä¹‹é—´ã€‚å¦å¤–æ³¨æ„ï¼šåŒä¸€é™æ€èµ„æºåœ¨ä¸åŒé¡µé¢è¢«æ•£åˆ—åˆ°ä¸åŒå­åŸŸä¸‹ï¼Œä¼šå¯¼è‡´æ— æ³•åˆ©ç”¨ HTTP ç¼“å­˜ã€‚</p>
<h4 id="2-2-4-ä½¿ç”¨HTTP-2"><a href="#2-2-4-ä½¿ç”¨HTTP-2" class="headerlink" title="2.2.4 ä½¿ç”¨HTTP 2"></a>2.2.4 ä½¿ç”¨HTTP 2</h4><p>HTTP 2 ç›¸æ¯” HTTP 1.1 çš„æ›´æ–°å¤§éƒ¨åˆ†é›†ä¸­äºï¼š</p>
<ul>
<li><strong>å¤šè·¯å¤ç”¨</strong>ï¼šå¤šè·¯å¤ç”¨å¾ˆå¥½åœ°è§£å†³å¦‚ä½•è®©é‡è¦èµ„æºå°½å¿«åŠ è½½è¿™ä¸ªé—®é¢˜ã€‚åŒåŸŸåä¸‹æˆ–è€…ä¸åŒåŸŸä½†æ˜¯åŒæ—¶æ»¡è¶³åŒä¸€ä¸ª IPä»¥åŠä½¿ç”¨åŒä¸€ä¸ªè¯ä¹¦çš„è¿™ä¸¤ä¸ªæ¡ä»¶ä¸­çš„æ‰€æœ‰é€šä¿¡éƒ½åœ¨<strong>å•ä¸ªè¿æ¥</strong>ä¸Šå®Œæˆï¼Œæ­¤è¿æ¥ä¸ŠåŒæ—¶æ‰“å¼€ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼ˆ HTTP 1.1 æœ‰è¿æ¥æ•°é™åˆ¶ï¼‰ã€‚ä½¿ç”¨å¤šåŸŸååŠ ä¸Šç›¸åŒçš„ IP å’Œè¯ä¹¦éƒ¨ç½² Web æœåŠ¡æœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼šè®©æ”¯æŒ HTTP/2 çš„ç»ˆç«¯åªå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç”¨ä¸Š HTTP/2 åè®®å¸¦æ¥çš„å„ç§å¥½å¤„ï¼›è€Œåªæ”¯æŒ HTTP/1.1 çš„ç»ˆç«¯åˆ™ä¼šå»ºç«‹å¤šä¸ªè¿æ¥ï¼Œè¾¾åˆ°åŒæ—¶æ›´å¤šå¹¶å‘è¯·æ±‚çš„ç›®çš„ã€‚</li>
<li><strong>HEAD å‹ç¼©</strong>ï¼šHTTP/2 å°†è¯·æ±‚å’Œå“åº”æ•°æ®åˆ†å‰²ä¸ºæ›´å°çš„å¸§ï¼Œå¹¶å¯¹å®ƒä»¬é‡‡ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼ˆ Binary Framing ï¼‰ã€‚åœ¨ HTTP/1 ä¸­ï¼ŒHTTP è¯·æ±‚å’Œå“åº”éƒ½æ˜¯ç”±ã€ŒçŠ¶æ€è¡Œã€è¯·æ±‚ / å“åº”å¤´éƒ¨ã€æ¶ˆæ¯ä¸»ä½“ã€ä¸‰éƒ¨åˆ†ç»„æˆï¼ŒçŠ¶æ€è¡Œå’Œå¤´éƒ¨å´æ²¡æœ‰ç»è¿‡ä»»ä½•å‹ç¼©ï¼Œç›´æ¥ä»¥çº¯æ–‡æœ¬ä¼ è¾“ã€‚å¦‚ä¸‹å›¾çš„æ¯”è¾ƒï¼š<br> <img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/http2.png" alt="img"><br>åœ¨ HTTP/2 ä¸­ï¼Œæ¯ä¸ªæ•°æ®æµéƒ½ä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆã€‚å¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚</li>
<li><strong>è¯·æ±‚ä¼˜å…ˆçº§</strong>ï¼šæœåŠ¡å™¨å¯ä»¥æ ¹æ®æµçš„ä¼˜å…ˆçº§ï¼Œæ§åˆ¶èµ„æºåˆ†é…(CPUã€å†…å­˜ã€å¸¦å®½)ï¼Œè€Œåœ¨å“åº”æ•°æ®å‡†å¤‡å¥½ä¹‹åï¼Œä¼˜å…ˆå°†æœ€é«˜ä¼˜å…ˆçº§çš„å¸§å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li><strong>æœåŠ¡å™¨æ¨é€</strong>ï¼šå¯åŠ¨Server Pushï¼Œæ„å‘³ç€æœåŠ¡ç«¯å¯ä»¥åœ¨å‘é€é¡µé¢HTMLæ—¶ä¸»åŠ¨æ¨é€å…¶å®ƒèµ„æºï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„URLï¼Œå¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ï¼›å¦‚æœæœåŠ¡ç«¯æ¨é€çš„èµ„æºå·²ç»è¢«æµè§ˆå™¨ç¼“å­˜è¿‡ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡å‘é€ RST_STREAM å¸§æ¥æ‹’æ”¶ã€‚</li>
</ul>
<h3 id="2-2-å­¦ä¼šæŒå®¶ï¼Œè®©å®¶å˜å¾—ç®€æ´æ¼‚äº®-å®¢æˆ·ç«¯"><a href="#2-2-å­¦ä¼šæŒå®¶ï¼Œè®©å®¶å˜å¾—ç®€æ´æ¼‚äº®-å®¢æˆ·ç«¯" class="headerlink" title="2.2 å­¦ä¼šæŒå®¶ï¼Œè®©å®¶å˜å¾—ç®€æ´æ¼‚äº®-å®¢æˆ·ç«¯"></a>2.2 å­¦ä¼šæŒå®¶ï¼Œè®©å®¶å˜å¾—ç®€æ´æ¼‚äº®-å®¢æˆ·ç«¯</h3><ul>
<li>ä½¿ç”¨å¤–é“¾CSSå’ŒJSï¼ŒCSSæ”¾å¤´ï¼ŒJSæ”¾å°¾ï¼Œé˜²æ­¢é˜»å¡ä»¥å‡å°‘å¯¹å¹¶å‘ä¸‹è½½çš„å½±å“ï¼Œå°½æ—©åˆ·æ–°æ–‡æ¡£çš„è¾“å‡ºã€‚</li>
<li>htmlçš„ä»£ç ä¼˜åŒ–ï¼Œå¦‚ï¼š<ul>
<li>é¿å…ç©ºçš„å›¾ç‰‡srcï¼›</li>
<li>åè®®è‡ªé€‚åº”ï¼Œå‡å°‘htmlæ–‡ä»¶å¤§å°ï¼Œå°†<a href="https://å’Œhttp://éƒ½æ›¿æ¢æˆ//ã€‚" target="_blank" rel="external">https://å’Œhttp://éƒ½æ›¿æ¢æˆ//ã€‚</a></li>
</ul>
</li>
<li>cssçš„ä»£ç ä¼˜åŒ–ï¼Œå¦‚ï¼š<ul>
<li>å»ºè®®ä½¿ç”¨ç±»é€‰æ‹©å™¨ï¼Œè®¿é—®æ¯”è¾ƒå¿«ï¼›</li>
<li>ä¸å»ºè®®ä½¿ç”¨å¾ˆé•¿çš„base64ï¼›</li>
<li>é¿å…CSSè¡¨è¾¾å¼ï¼›</li>
<li>é¿å…ä½¿ç”¨Filtersã€‚</li>
</ul>
</li>
<li>jsçš„ä»£ç ä¼˜åŒ–ï¼Œå¦‚ï¼š<ul>
<li>é¿å…ä½¿ç”¨evalå’Œwidthï¼›</li>
<li>å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼›</li>
<li>å‡å°‘DOMè®¿é—®ï¼Œå°½é‡ç¼“å­˜DOMï¼›</li>
<li>å……åˆ†åˆ©ç”¨äº‹ä»¶å§”æ‰˜ï¼›</li>
<li>å‡å°‘Repaintï¼ˆé‡ç»˜ï¼‰å’ŒReflowï¼ˆé‡æ’ï¼‰æœ€å¥½é€šè¿‡æ‰¹é‡æ›´æ–°å…ƒç´ å‡å°‘é‡æ’æ¬¡æ•°ï¼Œå¦‚è®¾ç½®ç±»classç»Ÿä¸€æ›´æ–°æ ·å¼ï¼Œåœ¨æ·»åŠ å¤šä¸ªli</li>
<li>å…ƒç´ å°†ä¼šè§¦å‘å¤šæ¬¡é¡µé¢é‡æ’çš„æƒ…å†µä¸‹ä½¿ç”¨ DOM fargment åœ¨å†…å­˜ä¸­åˆ›å»ºå®Œæ•´çš„ DOM èŠ‚ç‚¹ï¼Œç„¶åå†ä¸€æ¬¡æ€§æ·»åŠ åˆ° DOM ä¸­ã€‚</li>
</ul>
</li>
<li>å›¾ç‰‡æ ¼å¼çš„é€‰æ‹©ï¼š<ul>
<li>é¢œè‰²è¾ƒä¸ºä¸°å¯Œçš„å›¾ç‰‡è€Œä¸”æ–‡ä»¶æ¯”è¾ƒå¤§çš„ï¼ˆ40KB - 200KBï¼‰æˆ–è€…æœ‰å†…å®¹çš„å›¾ç‰‡ä¼˜å…ˆè€ƒè™‘ jpgï¼›å›¾æ ‡ç­‰é¢œè‰²æ¯”è¾ƒç®€å•ã€æ–‡ä»¶ä½“ç§¯ä¸å¤§ã€èµ·ä¿®é¥°ä½œç”¨çš„å›¾ç‰‡ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ PNG8 æ ¼å¼ï¼›å›¾åƒé¢œè‰²ä¸°å¯Œè€Œä¸”å›¾ç‰‡æ–‡ä»¶ä¸å¤ªå¤§çš„ï¼ˆ40KB ä»¥ä¸‹ï¼‰æˆ–æœ‰åŠé€æ˜æ•ˆæœçš„ä¼˜å…ˆè€ƒè™‘ PNG24 æ ¼å¼ã€‚</li>
<li>æ¡ä»¶å…è®¸çš„ï¼Œä½¿ç”¨æ–°æ ¼å¼WEBPå’ŒBPGã€‚</li>
<li>ç”¨SVGå’ŒICONFONTä»£æ›¿ç®€å•çš„å›¾æ ‡ã€‚</li>
<li>ç”¨<a href="https://isux.tencent.com/font-spider.html" target="_blank" rel="external">å­—è››</a>æ¥ä»£æ›¿è‰ºæœ¯å­—ä½“åˆ‡å›¾ï¼Œå®ƒå¯å‰”é™¤æ²¡æœ‰ä½¿ç”¨çš„å­—ç¬¦ï¼Œä»è€Œè§£å†³ä¸­æ–‡å­—ä½“è¿‡å¤§çš„é—®é¢˜ï¼Œå¹¶ç¼–ç æˆè·¨å¹³å°å…¼å®¹çš„æ ¼å¼ã€‚</li>
</ul>
</li>
<li>åˆç†åˆ†é…èµ„æºåŠ è½½æ—¶é—´ï¼ŒæŒ‰éœ€åŠ è½½ï¼ŒåŒ…æ‹¬CSSã€JSæ–‡ä»¶ä»¥åŠå›¾ç‰‡ã€ä¸šåŠ¡æ¨¡å—ç­‰ã€‚<br>æ ¹æ®æˆ‘ä»¬ç½‘é¡µæœ€åˆåŠ è½½éœ€è¦çš„æœ€å°å†…å®¹é›†æ¨æ–­å…¶ä»–å†…å®¹å»¶è¿ŸåŠ è½½ï¼›æ— æ¡ä»¶æå‰åŠ è½½å…¬å…±å†…å®¹æˆ–æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ¨æ–­æå‰åŠ è½½æŸäº›å†…å®¹ï¼Œå¦‚æ ¹æ®æœç´¢æ¡†è¾“å…¥çš„æ–‡å­—æ¥åˆ¤æ–­åŠ è½½çš„å†…å®¹ã€‚åŠ è½½æœºåˆ¶å¦‚ä¸‹ï¼š<ul>
<li>é¢„åŠ è½½</li>
<li>Dom ReadyååŠ è½½</li>
<li>onLoadååŠ è½½</li>
<li>æ»šåŠ¨åŠ è½½</li>
</ul>
</li>
<li>å‡å°‘DNS æŸ¥è¯¢ï¼šDNS æŸ¥è¯¢ä¸€èˆ¬éœ€è¦å‡ æ¯«ç§’åˆ°å‡ ç™¾æ¯«ç§’ï¼Œç§»åŠ¨ç¯å¢ƒä¸‹ä¼šæ›´æ…¢ã€‚æˆ‘ä»¬å¯ä»¥é¢„å…ˆè¯»å–DNSï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ã€‚<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/dns_prefetch.jpg" alt="img"></li>
</ul>
<h2 id="3-ç¨³å®šæ€§"><a href="#3-ç¨³å®šæ€§" class="headerlink" title="3 ç¨³å®šæ€§"></a>3 ç¨³å®šæ€§</h2><p>ç¨³å®šæ€§çš„ç¬¬ä¸€è¦æ±‚æ˜¯å¯ç”¨ã€‚æœ€èµ·ç çš„è¦æ±‚æ˜¯é¡µé¢å¾—å‡ºæ¥ï¼Œè¦ä¸ç„¶æ²¡æ³•ç”¨äº†ã€‚<br>å…¶æ¬¡è®²ç©¶çš„æ˜¯é¡µé¢çš„å¯ç»´æŠ¤æ€§ï¼Œå‡å¦‚é¡µé¢æŒ‚äº†ï¼Œå¤šä¹…å¯ä»¥æ¢å¤è¿‡æ¥ï¼Œå¦å¤–è€ƒè™‘é¡µé¢æŒ‚çš„æœŸé—´æ˜¯å¦å¯ä»¥é‡‡å–é™æ€é¡µé¢å¤„ç†ç­‰æ–¹å¼ã€‚<br>é¡µé¢çš„ç¨³å®šæ€§å…¶å®å’Œå‰ç«¯å®‰å…¨æŒ‚é’©ï¼Œå³ä½¿é¡µé¢å¯ä»¥å‡ºæ¥äº†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ä¸ä¼šè¢«é»‘æ‰ï¼Œä¸‹æ–‡ä»å‰ç«¯å®‰å…¨çš„æ–¹é¢è®²è§£ã€‚</p>
<h3 id="3-1-å¸¸è§æ”»å‡»ï¼š"><a href="#3-1-å¸¸è§æ”»å‡»ï¼š" class="headerlink" title="3.1 å¸¸è§æ”»å‡»ï¼š"></a>3.1 å¸¸è§æ”»å‡»ï¼š</h3><ul>
<li><p>XSS (Cross Site Script) ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œå¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„htmlä»£ç ã€‚ç‰¹ç‚¹æ˜¯æ”»å‡»è€…çš„ä»£ç å¿…é¡»èƒ½è·å–ç”¨æˆ·æµè§ˆå™¨ç«¯çš„æ‰§è¡Œæƒé™ï¼Œè¦æœç»æ­¤ç±»æ”»å‡»å‡ºç°å¯ä»¥åœ¨å…¥å£å’Œå‡ºå£è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤ã€‚<br>  ä¸‰ç§ç±»å‹ï¼š<br>  ï¼ˆ1ï¼‰ åå°„å‹XSSï¼šä¸€æ¬¡æ€§ï¼›å°†åŒ…å«æ³¨å…¥è„šæœ¬çš„æ¶æ„é“¾æ¥å‘é€ç»™å—å®³è€…ã€‚<br>  ï¼ˆ2ï¼‰ æŒä¹…å‹XSSï¼šç”¨æˆ·è¾“å…¥çš„æ•°æ®â€œå­˜å‚¨â€åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ¯”å¦‚ä¸€æ¡åŒ…å«XSSä»£ç çš„ç•™è¨€ã€‚<br>  ï¼ˆ3ï¼‰ DOM XSSï¼šä½¿ç”¨ä¸€äº›evalç­‰æœ‰è¾“å‡ºçš„è¯­å¥æ„å‘³ç€å¤šäº†ä¸€ä»½è¢«XSSçš„é£é™©ã€‚</p>
<p>  åº”å¯¹ç­–ç•¥ï¼š</p>
<ul>
<li>å½“æ¶æ„ä»£ç å€¼è¢«ä½œä¸ºæŸä¸€æ ‡ç­¾çš„å†…å®¹æ˜¾ç¤ºï¼šåœ¨ä¸éœ€è¦htmlè¾“å…¥çš„åœ°æ–¹å¯¹html æ ‡ç­¾åŠä¸€äº›ç‰¹æ®Šå­—ç¬¦( â€ &lt; &gt; &amp; ç­‰ç­‰ )åšè¿‡æ»¤ï¼Œå°†å…¶è½¬åŒ–ä¸ºä¸è¢«æµè§ˆå™¨è§£é‡Šæ‰§è¡Œçš„å­—ç¬¦ã€‚</li>
<li>å½“æ¶æ„ä»£ç è¢«ä½œä¸ºæŸä¸€æ ‡ç­¾çš„å±æ€§æ˜¾ç¤ºï¼Œé€šè¿‡ç”¨ â€œå°†å±æ€§æˆªæ–­æ¥å¼€è¾Ÿæ–°çš„å±æ€§æˆ–æ¶æ„æ–¹æ³•ï¼šå±æ€§æœ¬èº«å­˜åœ¨çš„ å•å¼•å·å’ŒåŒå¼•å·éƒ½éœ€è¦è¿›è¡Œè½¬ç ï¼›å¯¹ç”¨æˆ·è¾“å…¥çš„html æ ‡ç­¾åŠæ ‡ç­¾å±æ€§åšç™½åå•è¿‡æ»¤ï¼Œä¹Ÿå¯ä»¥å¯¹ä¸€äº›å­˜åœ¨æ¼æ´çš„æ ‡ç­¾å’Œå±æ€§è¿›è¡Œä¸“é—¨è¿‡æ»¤ã€‚</li>
</ul>
</li>
</ul>
<ul>
<li><p>CSRF(Cross Site Request Forgery)ï¼Œè·¨ç«™ç‚¹ä¼ªé€ è¯·æ±‚ï¼Œé€šè¿‡ä¼ªé€ è¿æ¥è¯·æ±‚åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œè®©ç”¨æˆ·ä»¥è‡ªå·±çš„èº«ä»½æ¥å®Œæˆæ”»å‡»è€…éœ€è¦è¾¾åˆ°çš„ä¸€äº›ç›®çš„ã€‚</p>
</li>
<li><p>cookieåŠ«æŒï¼Œé€šè¿‡è·å–é¡µé¢çš„æƒé™ï¼Œåœ¨é¡µé¢ä¸­å†™ä¸€ä¸ªç®€å•çš„åˆ°æ¶æ„ç«™ç‚¹çš„è¯·æ±‚ï¼Œå¹¶è·å–ç”¨æˆ·çš„cookieç™»å½•æŸäº›ç«™ç‚¹ã€‚</p>
</li>
</ul>
<p>å¯¹äºcrsf å’Œcookie åŠ«æŒçš„ç­–ç•¥ï¼š</p>
<ul>
<li>é€šè¿‡ refererã€token æˆ–è€… éªŒè¯ç  æ¥æ£€æµ‹ç”¨æˆ·æäº¤ã€‚</li>
<li>å°½é‡ä¸è¦åœ¨é¡µé¢çš„é“¾æ¥ä¸­æš´éœ²ç”¨æˆ·éšç§ä¿¡æ¯ã€‚</li>
<li>å¯¹äºç”¨æˆ·ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œæœ€å¥½éƒ½ä½¿ç”¨post æ“ä½œ ã€‚</li>
<li>é¿å…å…¨ç«™é€šç”¨çš„cookieï¼Œä¸¥æ ¼è®¾ç½®cookieçš„åŸŸã€‚</li>
</ul>
<h3 id="3-2-æ•°æ®é€šé“å®‰å…¨"><a href="#3-2-æ•°æ®é€šé“å®‰å…¨" class="headerlink" title="3.2 æ•°æ®é€šé“å®‰å…¨"></a>3.2 æ•°æ®é€šé“å®‰å…¨</h3><p>å›½å†…çš„ä¼—å¤šç½‘ç«™éƒ½æ²¡æœ‰å®ç°å…¨ç«™HTTPSã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢æœ€é‡è¦çš„ä¸€æ­¥ï¼Œæ‰€æœ‰çš„æ•°æ®åœ¨å‘é€ä¹‹å‰å°±ä¼šè¢«åŠ å¯†ï¼Œæ”»å‡»è€…æ— æ³•æŸ¥çœ‹æˆ–ç¯¡æ”¹æ•°æ®åŒ…çš„å†…å®¹ã€‚HTTPSå¯ä»¥ç†è§£ä¸ºHTTP+SSL/TLSï¼Œé€šè¿‡æ•°æ®åŠ å¯†ã€æ ¡éªŒæ•°æ®å®Œæ•´æ€§å’Œèº«ä»½è®¤è¯ä¸‰ç§æœºåˆ¶æ¥ä¿éšœå®‰å…¨ã€‚HTTPSçš„ç¼ºç‚¹æ˜¯ç½‘ç«™åœ¨åŠ ä¸ŠTLSè¯ä¹¦æ—¶ï¼Œå¯èƒ½å¯¼è‡´RTTå¾€è¿”æ—¶å»¶å¢åŠ ï¼Œå¹¶ä¸” HTTPSé€šä¿¡è¿‡ç¨‹çš„éå¯¹ç§°å’Œå¯¹ç§°åŠ è§£å¯†è®¡ç®—ä¼šäº§ç”Ÿæ›´å¤šçš„æœåŠ¡å™¨æ€§èƒ½å’Œæ—¶é—´ä¸Šçš„æ¶ˆè€—ï¼Œä½†æ˜¯è¿™æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚</p>
<h3 id="3-3æµè§ˆå™¨å®‰å…¨"><a href="#3-3æµè§ˆå™¨å®‰å…¨" class="headerlink" title="3.3æµè§ˆå™¨å®‰å…¨"></a>3.3æµè§ˆå™¨å®‰å…¨</h3><h4 id="3-3-1-åŒæºç­–ç•¥"><a href="#3-3-1-åŒæºç­–ç•¥" class="headerlink" title="3.3.1 åŒæºç­–ç•¥"></a>3.3.1 åŒæºç­–ç•¥</h4><p>é¦–å…ˆäº†è§£ä¸€ä¸‹åŒæºç­–ç•¥ï¼š</p>
<ul>
<li>æºæŒ‡çš„æ˜¯æœ‰ç›¸åŒçš„HOSTã€ç›¸åŒçš„åè®®ã€ç›¸åŒçš„ç«¯å£ã€‚</li>
<li>åŒæºç­–ç•¥ä»¥æºä¸ºå•ä½ï¼ŒæŠŠèµ„æºå¤©ç„¶åˆ†éš”ï¼Œä¿æŠ¤äº†ç”¨æˆ·çš„ä¿¡æ¯å®‰å…¨ã€‚</li>
<li>ç»•è¿‡åŒæºç­–ç•¥è®©javascriptè®¿é—®å…¶ä»–æºçš„èµ„æºçš„æ–¹æ³•ï¼Œå¦‚ï¼šJSONPã€CORSã€flashç­‰ã€‚</li>
<li>åŒæºç­–ç•¥ä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œé¢å¯¹å¾ˆå¤šæ”»å‡»æ˜¯æ— èƒ½ä¸ºåŠ›çš„ï¼Œæ¯”å¦‚XSSï¼Œå› ä¸ºæ­¤æ—¶æ”»å‡»è€…å°±åœ¨åŒæºä¹‹å†…ã€‚</li>
</ul>
<p>ä¸å»ºè®®ä½¿ç”¨JSONPï¼Œå› ä¸ºJSONPé€šå¸¸åœ¨è„šæœ¬ä¸­å†™ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç„¶åæŠŠå›è°ƒå‡½æ•°çš„åå­—å†™åœ¨è¯·æ±‚çš„URLä¸­ï¼Œå› æ­¤å¦‚æœè¯·æ±‚æ•°æ®çš„æœåŠ¡å™¨è¢«é»‘äº†ï¼Œé‚£ä¹ˆé»‘å®¢å°±èƒ½åœ¨è¿”å›çš„æ•°æ®ä¸­æ¤å…¥æ¶æ„ä»£ç ï¼Œä»è€Œçªƒå–ç”¨æˆ·çš„éšç§ä¿¡æ¯ã€‚</p>
<p>è·¨åŸŸèµ„æºå…±äº«CORSå…è®¸èµ„æºæä¾›æ–¹åœ¨å“åº”å¤´ä¸­åŠ å…¥ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼Œä½¿ä½ èƒ½é€šè¿‡XHRæ¥è·å–ã€è§£æå¹¶éªŒè¯æ•°æ®ã€‚è¿™æ ·å°±èƒ½é¿å…æ¶æ„ä»£ç åœ¨ä½ çš„åº”ç”¨ä¸­æ‰§è¡Œã€‚åœ¨å“åº”å¤´ä¸­åŠ å…¥çš„æ ‡è®°å¦‚ä¸‹ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Access</span>-Control-Allow-Origin: allowed origins</div></pre></td></tr></table></figure>
<p>å¦‚æœå¯¹Accessâ€“Control-Allow-Originè®¾ç½®ä¸º*å…¶å®æ˜¯æ¯”è¾ƒå±é™©çš„ï¼Œå¦‚æœæ²¡æœ‰æºå¸¦ä¼šè¯è®¤è¯æ„å‘³ç€ä¿¡æ¯è¢«å…¬å¼€åœ¨å…¨ç½‘ï¼Œå»ºè®®è®¾ç½®å…·ä½“çš„åŸŸåï¼Œè€Œä¸”è·¨åŸŸçš„æ—¶å€™è®°å¾—å¸¦ä¸Šsession idï¼›ä¸¥æ ¼å®¡æŸ¥è¯·æ±‚ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚å‚æ•°ï¼Œè¿˜æœ‰httpå¤´ä¿¡æ¯ï¼Œå› ä¸º httpå¤´å¯ä»¥ä¼ªé€ ã€‚</p>
<h4 id="3-3-2-CSP-Content-Security-Policy"><a href="#3-3-2-CSP-Content-Security-Policy" class="headerlink" title="3.3.2 CSP(Content Security Policy)"></a>3.3.2 CSP(Content Security Policy)</h4><p>CSPæŒ‡å®šç½‘ç«™ä¸Šæ‰€æœ‰è„šæœ¬å’Œå›¾ç‰‡ç­‰èµ„æºçš„æºç«™ç‚¹ï¼Œä¹Ÿèƒ½é˜»æ­¢æ‰€æœ‰å†…è”ï¼ˆinlineï¼‰çš„è„šæœ¬å’Œæ ·å¼ã€‚å³ä½¿æœ‰äººåœ¨é¡µé¢è¯„è®ºæˆ–è€…ç•™è¨€ä¸­åµŒå…¥äº†è„šæœ¬æ ‡ç­¾ï¼Œè¿™äº›è„šæœ¬ä»£ç ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œã€‚å¯é€šè¿‡ä¸¤ç§æ–¹å¼è®¾ç½®ï¼Œå¦‚æœ HTTP å¤´ä¸ Meta å®šä¹‰åŒæ—¶å­˜åœ¨ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨ HTTP å¤´ä¸­çš„å®šä¹‰ï¼š</p>
<ul>
<li>é€šè¿‡ HTTP å¤´ï¼Œæ¯”å¦‚åªå…è®¸è„šæœ¬ä»æœ¬æºåŠ è½½ï¼šContent-Security-Policy: script-src â€˜selfâ€™ï¼Œå…¶ä¸­script-src â€˜selfâ€™æ˜¯ç­–ç•¥ã€‚</li>
<li><p>é€šè¿‡HTMLçš„Metaæ ‡ç­¾ï¼Œæ¯”å¦‚åªå…è®¸è„šæœ¬ä»æœ¬æºåŠ è½½ï¼š</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Security-Policy"</span> <span class="attr">content</span>=<span class="string">"script-src 'self'"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶ä»–ç­–ç•¥ï¼š</p>
<ul>
<li>script-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„JavaScriptä»£ç çš„æºç«™ç‚¹</li>
<li>style-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„CSSæ ·å¼ä»£ç çš„æºç«™ç‚¹</li>
<li>connect-src â€“ å®šä¹‰æµè§ˆå™¨å¯ä»¥é€šè¿‡XHRã€WebSocketæˆ–è€… EventSourceè®¿é—®å“ªäº›ç«™ç‚¹</li>
<li>font-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„å­—ä½“æ–‡ä»¶çš„æºç«™ç‚¹</li>
<li>frame-src â€“ å®šä¹‰æµè§ˆå™¨å¯ä»¥é€šè¿‡iframeè®¿é—®å“ªäº›ç«™ç‚¹</li>
<li>img-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„å›¾ç‰‡çš„æºç«™ç‚¹</li>
<li>media-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶çš„æºç«™ç‚¹</li>
<li>object-src â€“ è®¾ç½®å¯ä»¥æ¥å—çš„Flashå’Œå…¶å®ƒæ’ä»¶çš„æºç«™ç‚¹</li>
</ul>
<p>ç¼ºç‚¹ï¼š<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å†…è”JavaScriptè„šæœ¬éƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºæµè§ˆå™¨æ— æ³•åŒºåˆ†è‡ªå·±çš„å†…è”è„šæœ¬å’Œé»‘å®¢æ³¨å…¥çš„è„šæœ¬ã€‚<br>CSPè¿˜ä¼šé»˜è®¤é˜»æ­¢æ‰€æœ‰eval()é£æ ¼çš„ä»£ç çš„æ‰§è¡Œï¼ŒåŒ…æ‹¬setInterval/setTimeoutä¸­çš„å­—ç¬¦ä¸²å’Œç±»ä¼¼äºnew Function(â€˜return falseâ€™)ä¹‹ç±»çš„ä»£ç ã€‚</p>
<h4 id="3-3-3-iframe-æ²™ç®±ç¯å¢ƒ"><a href="#3-3-3-iframe-æ²™ç®±ç¯å¢ƒ" class="headerlink" title="3.3.3 iframe æ²™ç®±ç¯å¢ƒ"></a>3.3.3 iframe æ²™ç®±ç¯å¢ƒ</h4><p>åˆ©ç”¨iframeè¿›è¡Œè·¨æºï¼šHTML5ä¸ºiframeæä¾›äº†å®‰å…¨å±æ€§ sandboxï¼Œiframeçš„èƒ½åŠ›å°†ä¼šè¢«é™åˆ¶ã€‚</p>
<h4 id="3-3-4-Secureå’ŒHttpOnlyå±æ€§"><a href="#3-3-4-Secureå’ŒHttpOnlyå±æ€§" class="headerlink" title="3.3.4 Secureå’ŒHttpOnlyå±æ€§"></a>3.3.4 Secureå’ŒHttpOnlyå±æ€§</h4><p>Secureèƒ½ç¡®ä¿cookieçš„å†…å®¹åªèƒ½é€šè¿‡SSLè¿æ¥è¿›è¡Œä¼ è¾“ã€‚Secureå’ŒHttpOnlyå±æ€§å‘Šè¯‰æµè§ˆå™¨cookieçš„å†…å®¹åªèƒ½åˆ†åˆ«é€šè¿‡HTTP(S)åè®®è¿›è¡Œè®¿é—®ï¼Œä»è€Œé¿å…äº†è¢«è½»æ˜“çªƒå–ï¼Œæ¯”å¦‚ç¦æ­¢ä»JavaScriptä¸­çš„document.cookieè®¿é—®ï¼Œå› æ­¤cookieåœ¨æµè§ˆå™¨documentä¸­ä¸å¯è§äº†ã€‚å¦‚æœå•ç‹¬ä½¿ç”¨çš„è¯ï¼Œæ— æ³•å…¨é¢æŠµå¾¡è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ï¼Œé€šå¸¸å’Œå…¶ä»–æŠ€æœ¯ç»„åˆä½¿ç”¨ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Set-Cookie: <span class="xml"><span class="tag">&lt;<span class="name">name</span>&gt;</span></span>=<span class="xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>[<span class="string">; &lt;name&gt;=&lt;value&gt;</span>] [<span class="string">; expires=&lt;date&gt;</span>][<span class="symbol">; domain=&lt;domain_name&gt;</span>][<span class="string">; path=&lt;some_path&gt;</span>][<span class="symbol">; secure</span>][<span class="string">; HttpOnly</span>]</div></pre></td></tr></table></figure></p>
<h4 id="3-3-5-å…¶ä»–å®‰å…¨ç›¸å…³çš„HTTP-å¤´"><a href="#3-3-5-å…¶ä»–å®‰å…¨ç›¸å…³çš„HTTP-å¤´" class="headerlink" title="3.3.5 å…¶ä»–å®‰å…¨ç›¸å…³çš„HTTP å¤´"></a>3.3.5 å…¶ä»–å®‰å…¨ç›¸å…³çš„HTTP å¤´</h4><ul>
<li><p>X-Content-Type-Options å‘Šè¯‰æµè§ˆå™¨ç›¸ä¿¡æ­¤æœåŠ¡å™¨ä¸‹å‘çš„èµ„æºçš„ç±»å‹ï¼Œé˜²æ­¢ç±»å‹å—…æ¢æ”»å‡»ã€‚</p>
</li>
<li><p>HPKP(Public Key Pinning) Public Key Pinning æ˜¯ä¸€ä¸ªresponse å¤´ï¼Œç”¨æ¥æ£€æµ‹ä¸€ä¸ªè¯ä¹¦çš„å…¬é’¥æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚</p>
</li>
<li><p>HSTS (HTTP Strict-Transport-Security) å¼ºåˆ¶ä½¿ç”¨TSLä½œä¸ºæ•°æ®é€šé“ã€‚</p>
</li>
</ul>
<h3 id="3-4-HTML5-å¯¹webå®‰å…¨çš„å½±å“"><a href="#3-4-HTML5-å¯¹webå®‰å…¨çš„å½±å“" class="headerlink" title="3.4 HTML5 å¯¹webå®‰å…¨çš„å½±å“"></a>3.4 HTML5 å¯¹webå®‰å…¨çš„å½±å“</h3><p>html5æœ‰å¾ˆå¤šæ–°çš„ç‰¹æ€§èƒ½åŠ›ï¼Œç„¶è€Œèƒ½åŠ›è¶Šå¤§ï¼Œè¢«æ”»ç ´åçš„å±é™©å°±è¶Šå¤§ã€‚<br>HTML5 å¯¹xssçš„å½±å“ä¸»è¦ä½“ç°åœ¨:</p>
<ul>
<li>æ”»å‡»é¢æ›´å¤§ï¼Œhtml5å¸¦æ¥æ›´å¤šçš„æ ‡ç­¾å’Œæ›´å¤šçš„å±æ€§å¦‚<code>&lt;video&gt;,&lt;audio&gt;,&lt;canvas&gt;</code>ç­‰ï¼›</li>
<li>å±å®³æ›´å¤§ï¼ŒHTML5æ›´å¤šçš„èµ„æºå¯ä»¥è¢«xssåˆ©ç”¨ã€‚é»‘å®¢å¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„ä¸€åˆ‡æƒé™ï¼Œæ¯”å¦‚æœ¬åœ°å­˜å‚¨ã€GEOã€æœåŠ¡å™¨æ¨é€æœºåˆ¶WebSocketï¼Œjså¤šçº¿ç¨‹æ‰§è¡ŒWebworkerç­‰ã€‚</li>
</ul>
<p>æ¯”å¦‚localstorageåªèƒ½é€šè¿‡jsè®¾ç½®å’Œè·å–ï¼Œå¯¼è‡´çš„ç»“æœæ˜¯ä¸èƒ½åƒcookieä¸€æ ·è®¾ç½®httponlyç­‰å±æ€§ï¼Œæ‰€ä»¥localstorageä¸­ä¸èƒ½å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œæœ€å¥½èƒ½å¤Ÿåœ¨æœåŠ¡ç«¯è¿›è¡ŒåŠ å¯†ï¼Œå¯ä»¥é…åˆCORSæ¥è·å–ç½‘ç«™çš„localstorageçš„ä¿¡æ¯ã€‚</p>
<h2 id="4-å“åº”å¼"><a href="#4-å“åº”å¼" class="headerlink" title="4 å“åº”å¼"></a>4 å“åº”å¼</h2><p>å“åº”å¼å¸ƒå±€ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªç½‘ç«™èƒ½å¤Ÿå…¼å®¹å¤šä¸ªç»ˆç«¯ï¼Œå¯ä»¥ä¸ºä¸åŒç»ˆç«¯çš„ç”¨æˆ·æä¾›æ›´åŠ èˆ’é€‚çš„ç•Œé¢å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<ul>
<li>åŸºäºæ …æ ¼å¸ƒå±€è§„åˆ’å“åº”å¼è®¾è®¡ï¼Œæ¯ä¸ªæ¨¡å—å°½å¯èƒ½ä¸¥æ ¼éµå¾ªæ …æ ¼å¸ƒå±€ï¼Œç¬¦åˆæ …æ ¼çš„å°æ¨¡å—èƒ½å¾ˆçµæ´»çš„é€‚åº”å¤šä¸ªåˆ†è¾¨ç‡çš„å±•ç¤ºã€‚</li>
<li>æ‹¥æŠ±flexboxã€‚</li>
<li>ä½¿ç”¨åŠ¨æ€çš„å­—ä½“å¤§å°å•ä½+remå•ä½ä½¿ç”¨ã€‚</li>
<li>ä½¿ç”¨CSS3 mediaQuery æŠ€æœ¯å“åº”ç”¨æˆ·è®¾å¤‡ã€‚</li>
<li>åˆ©ç”¨ç™¾åˆ†æ¯”ã€‚</li>
<li>å¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨ä½¿ç”¨JSåŠ¨æ€å“åº”ã€‚</li>
<li>ä¸€å¥—â€œè‡ªé€‚åº”â€ç´ æå…¼å®¹å„ç§åˆ†è¾¨ç‡ï¼Œæå‡é¡µé¢æ€§èƒ½ï¼Œæ¯”å¦‚è‡ªé€‚åº”çš„å›¾ç‰‡/è§†é¢‘ç´ æã€‚</li>
</ul>
<p>æ¯”å¦‚<a href="http://aotu.io/notes/">å‡¹å‡¸å®éªŒå®¤åšå®¢</a>é¡µé¢åœ¨PCç«¯ã€iPadã€æ‰‹æœºç«¯çš„æ’ç‰ˆï¼š<br>PCç«¯ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/å‡¹å‡¸å®éªŒå®¤1.jpg" alt="img"></p>
<p>iPadï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/å‡¹å‡¸å®éªŒå®¤2.jpg" alt="img"></p>
<p>æ‰‹æœºç«¯ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/å‡¹å‡¸å®éªŒå®¤3.jpg" alt="img"></p>
<h2 id="5-å…¼å®¹æ€§"><a href="#5-å…¼å®¹æ€§" class="headerlink" title="5 å…¼å®¹æ€§"></a>5 å…¼å®¹æ€§</h2><p>ä¼°è®¡å¾ˆå¤šäººå¯¹è¿™å¥è¯éƒ½æœ‰ä½“ä¼šï¼šIEè™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…IEå¦‚åˆæ‹ã€‚å½“ç„¶ï¼Œé™¤äº† IE ä¸Šæœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå…¶ä»–æµè§ˆå™¨æ¯”å¦‚ Android ä¸Šçš„ä½ç‰ˆæœ¬æµè§ˆå™¨ä¹Ÿæœ‰è¾ƒå¤šé—®é¢˜ã€‚<br>æ˜¯å¦ç»§ç»­ä¿æŒå¯¹ä½ç«¯æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ•°æ®è·Ÿäº§å“ç»ç†æˆ–è€…è€æ¿è¯´è¯ï¼Œå‡å°‘æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œæœ€å¥½åœ¨é¡¹ç›®ä¹‹å‰å°±å®šä¸‹æ¥æ”¯æŒæœ€ä½æ”¯æŒçš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆï¼Œç„¶åè®¾è®¡ä¸€ä¸ªå¯¹åº”å…¼å®¹æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯ç™¾åº¦ç»Ÿè®¡çš„2015å¹´çš„æµè§ˆå™¨å¸‚åœºä»½é¢æ•°æ®ï¼š</p>
<p><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/æµè§ˆå™¨å¸‚åœºä»½é¢æŠ¥å‘Š_2015.01-2015.12.jpg" alt="img"></p>
<p>å…¼å®¹æ€§çš„åŸåˆ™ï¼š<strong>æ¸è¿›å¢å¼ºä¸å¹³ç¨³é€€åŒ–</strong>ã€‚å°±æ˜¯è¯´ï¼Œåœ¨ä½çº§æµè§ˆå™¨èƒ½å¤Ÿä¿è¯å…¶å¯ç”¨æ€§å’Œå¯è®¿é—®æ€§ï¼›æ¸è¿›å¢å¼ºï¼Œåœ¨ä¿è¯ä»£ç ã€é¡µé¢åœ¨ä½çº§æµè§ˆå™¨ä¸­çš„å¯ç”¨æ€§åŠå¯è®¿é—®æ€§çš„åŸºç¡€ä¸Šï¼Œé€æ­¥å¢åŠ åŠŸèƒ½åŠç”¨æˆ·ä½“éªŒã€‚<br>å¦‚æœå‡ºç°å…¼å®¹æ€§é—®é¢˜äº†ï¼Œæ€ä¹ˆå¤„ç†ï¼š</p>
<ol>
<li>ç¡®è®¤è§¦å‘åœºæ™¯ï¼Œä»€ä¹ˆæµè§ˆå™¨ã€ç‰ˆæœ¬ã€ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œåšåˆ°ç¨³å®šå¤ç°ã€‚</li>
<li>æ‰¾åˆ°é—®é¢˜åŸå› ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼ˆè‡ªå·±ç¢ç£¨ã€ç½‘ä¸Šæœã€é—®åŒäº‹ï¼‰ã€‚</li>
<li>ç¡®å®šè§£å†³åŠæ³•ï¼šå‚è€ƒç°æˆçš„è§„èŒƒï¼Œæ¯”å¦‚æŸäº›å±æ€§ä¸èƒ½ä½¿ç”¨ä»¥åŠä¸€äº›hackçš„å¤„ç†ã€‚</li>
<li>ç§¯ç´¯å…¼å®¹æ€§å¤„ç†æ–¹æ³•ã€‚</li>
</ol>
<p>æ·˜å®é¦–é¡µåœ¨å…¼å®¹æ€§ä¸Šåšäº†ä¸€ä¸ªå°åˆ›æ–°ï¼šHtmlé’©å­<br>åœ¨htmlä¸ŠåŠ ä¸Šæ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å†…æ ¸ã€æµè§ˆå™¨ç±»å‹ã€CSS3åŠ¨ç”»æ”¯æŒã€IEå„ç‰ˆæœ¬ç±»ï¼Œå¥½å¤„åœ¨äºï¼š</p>
<ul>
<li>æ¸è¿›å¢å¼º å¯ä»¥å®ç°ä¸åŒæµè§ˆå™¨ä¸‹å·®å¼‚åŒ–ä½“éªŒã€‚</li>
<li>èƒ½å¿«é€Ÿå®šä½å¹¶ä¿®å¤æŸä¸ªæµè§ˆå™¨ä¸‹çš„ç‰¹å®šbugã€‚</li>
</ul>
<p>æ·˜å®é¦–é¡µhtmlé’©å­ï¼š<br><img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/æ·˜å®é¦–é¡µæµè§ˆå™¨ç±».png" alt="img"></p>
<p>å…¼å®¹æ€§é—®é¢˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œå›¢é˜Ÿä¹‹é—´å…±åŒåŠªåŠ›å½¢æˆä¸€ä¸ªbugå…¼å®¹æ€§ç§¯ç´¯æ–‡æ¡£ï¼Œæ˜¯æœ€å¥½ä¸è¿‡çš„äº†ã€‚</p>
<h2 id="6-æœç´¢SEO"><a href="#6-æœç´¢SEO" class="headerlink" title="6 æœç´¢SEO"></a>6 æœç´¢SEO</h2><h2 id="6-1-è¯­ä¹‰åŒ–"><a href="#6-1-è¯­ä¹‰åŒ–" class="headerlink" title="6.1 è¯­ä¹‰åŒ–"></a>6.1 è¯­ä¹‰åŒ–</h2><ul>
<li>æ ‡ç­¾è¯­ä¹‰åŒ–å¯¹æœç´¢å¼•æ“å‹å¥½ï¼Œè‰¯å¥½çš„ç»“æ„å’Œè¯­ä¹‰å®¹æ˜“è¢«æœç´¢å¼•æ“æŠ“å–ã€‚</li>
<li>å–„ç”¨æ ‡é¢˜h1ï¼Œh2ï¼Œh3ï¼Œh4ï¼Œh5ï¼Œh6ï¼Œç‰¹åˆ«æ˜¯h1å’Œh2ï¼›H(x)æ ‡ç­¾ä¸­ä½¿ç”¨å…³é”®å­—ï¼Œå¯æå‡æ’åã€‚åŒæ—¶è®¾ç½® rel=â€œnofollowâ€é¿å…æƒé‡æµå¤±ã€‚</li>
<li>ä½¿ç”¨ HTML5 ä¸­çš„ Microdata å¯¹ Web é¡µé¢ä¸Šå·²ç»å­˜åœ¨çš„æ•°æ®æä¾›é™„åŠ çš„è¯­ä¹‰ã€‚Microdata ç”±åå­— / å€¼ï¼ˆname/valueï¼‰å¯¹ç»„æˆï¼Œæ¯ä¸€ä¸ªè¯æ±‡è¡¨å®šä¹‰ä¸€ç»„å‘½åçš„å±æ€§ã€‚å¯¹ Microdata çš„æ”¯æŒå¯ä»¥å½±å“æœç´¢ç»“æœçš„æ˜¾ç¤ºï¼Œä½¿å¾—æ˜¾ç¤ºç»“æœæ›´åŠ ä¸°å¯Œï¼Œè™½ç„¶ä¸èƒ½å½±å“æœç´¢ç»“æœçš„æ’åï¼Œä½†æ˜¯ç½‘ç«™çš„æµé‡å¯èƒ½ä¼šæœ‰æ‰€å¢åŠ ã€‚ç±»ä¼¼çš„æŠ€æœ¯è¿˜æœ‰èµ„æºæè¿°æ¡†æ¶RDFã€å¾®æ ¼å¼Microformat ã€‚</li>
</ul>
<h2 id="6-2-è¡¡é‡ç«™ç‚¹å…³é”®è¯ä¼˜åŒ–"><a href="#6-2-è¡¡é‡ç«™ç‚¹å…³é”®è¯ä¼˜åŒ–" class="headerlink" title="6.2 è¡¡é‡ç«™ç‚¹å…³é”®è¯ä¼˜åŒ–"></a>6.2 è¡¡é‡ç«™ç‚¹å…³é”®è¯ä¼˜åŒ–</h2><ul>
<li>ç«™ç‚¹å†…å®¹ä»¥åŠå…³é”®è¯çš„é€‰æ‹©ã€‚</li>
<li>æè¿°æ ‡ç­¾ã€å…³é”®è¯æ ‡ç­¾ã€ä»£æ›¿å±æ€§ã€‚</li>
<li>é•¿å°¾å…³é”®è¯ï¼šéç›®æ ‡å…³é”®è¯ä½†ä¹Ÿå¯ä»¥å¸¦æ¥æœç´¢æµé‡çš„å…³é”®è¯ï¼›ä¾‹å¦‚ï¼Œç›®æ ‡å…³é”®è¯æ˜¯æœè£…ï¼Œå…¶é•¿å°¾å…³é”®è¯å¯ä»¥æ˜¯ç”·å£«æœè£…ã€å†¬è£…ã€æˆ·å¤–è¿åŠ¨è£…ç­‰ã€‚é•¿å°¾å…³é”®è¯åŸºæœ¬å±æ€§æ˜¯ï¼šå¯å»¶ä¼¸æ€§ï¼Œé’ˆå¯¹æ€§å¼ºï¼ŒèŒƒå›´å¹¿ã€‚</li>
<li>å…³é”®è¯çš„åˆ†å¸ƒæƒ…å†µã€‚</li>
<li>å…³é”®è¯å¯†åº¦ã€çœ‹é‡ï¼šåˆç†çš„å…³é”®å­—å¯†åº¦å¯è·å¾—è¾ƒé«˜çš„æ’åä½ç½®ï¼Œå¯†åº¦è¿‡å¤§ä¼šèµ·åˆ°ç›¸åçš„æ•ˆæœã€‚ä¸€èˆ¬è¯´æ¥ï¼Œåœ¨å¤§å¤šæ•°çš„æœç´¢å¼•æ“ä¸­ï¼Œå…³é”®è¯å¯†åº¦åœ¨2%~8%æ˜¯ä¸€ä¸ªè¾ƒä¸ºé€‚å½“çš„èŒƒå›´ï¼Œæœ‰åˆ©äºç½‘ç«™åœ¨æœç´¢å¼•æ“ä¸­æ’åã€‚</li>
<li>æ˜¯å¦å­˜åœ¨ä½œå¼Šè¡Œä¸ºã€‚</li>
</ul>
<h2 id="6-3-é“¾æ¥"><a href="#6-3-é“¾æ¥" class="headerlink" title="6.3 é“¾æ¥"></a>6.3 é“¾æ¥</h2><ul>
<li>ä¼˜åŒ–æ–‡ä»¶ç›®å½•ç»“æ„å’ŒURLã€‚URLåº”è¯¥æœ‰è¯­ä¹‰æ€§ï¼Œç®€çŸ­æ˜“æ‡‚ã€‚</li>
<li>é€šè¿‡æ¨å¹¿æš´éœ²è‡ªå·±çš„é“¾æ¥ï¼Œå¢åŠ ä¿¡ä»»åº¦ã€‚é“¾æ¥åˆ†ä¸ºå¤–å‘é“¾æ¥å’Œå†…å‘ï¼ˆåå‘ï¼‰é“¾æ¥ï¼Œå¤–å‘é“¾æ¥å°±æ˜¯ä»æœ¬ç«™ç‚¹åˆ°å…¶ä»–ç«™ç‚¹ï¼Œå†…å‘é“¾æ¥å°±æ˜¯ä»å…¶ä»–ç«™ç‚¹åˆ°æˆ‘çš„ç«™ç‚¹ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨<a href="http://www.backlinkpro.net/" target="_blank" rel="external">åå‘é“¾æ¥ç”Ÿæˆå™¨</a>ã€‚æˆ–è€…é€šè¿‡å†™è½¯æ–‡ã€å‘å¸ƒåˆ†ç±»ä¿¡æ¯ã€å‘å¸ƒåšå®¢æ–‡ç« æ¥æ¨å¹¿è‡ªå·±çš„ç½‘ç«™ã€‚</li>
<li>é”šæ–‡æœ¬ ï¼šæŠŠå…³é”®è¯åšä¸€ä¸ªé“¾æ¥ï¼ŒæŒ‡å‘åˆ«çš„ç½‘é¡µï¼Œè¿™ç§å½¢å¼çš„é“¾æ¥å°±å«ä½œé”šæ–‡æœ¬ã€‚æœç´¢å¼•æ“å¯ä»¥æ ¹æ®æŒ‡å‘æŸä¸€ä¸ªç½‘é¡µçš„é“¾æ¥çš„é”šæ–‡æœ¬æè¿°æ¥åˆ¤æ–­è¯¥ç½‘é¡µçš„å†…å®¹å±æ€§ã€‚</li>
</ul>
<h2 id="6-4-è‰¯å¥½çš„ç½‘ç«™å¯¼èˆªå’Œsitemap"><a href="#6-4-è‰¯å¥½çš„ç½‘ç«™å¯¼èˆªå’Œsitemap" class="headerlink" title="6.4 è‰¯å¥½çš„ç½‘ç«™å¯¼èˆªå’Œsitemap"></a>6.4 è‰¯å¥½çš„ç½‘ç«™å¯¼èˆªå’Œsitemap</h2><p>ç½‘ç«™éœ€è¦æœ‰ä¸€ä¸ªè‰¯å¥½çš„å¯¼èˆªï¼Œæ§åˆ¶æ ¹ç›®å½•å’Œå„å­ç›®å½•çš„å…³é”®ï¼Œé€šè¿‡sitemapå¯ä»¥å¸®åŠ©ç½‘ç«™ä¸»äº†è§£ç½‘ç«™ç»“æ„ï¼Œä¹Ÿæ–¹ä¾¿æœç´¢å¼•æ“æ”¶å½•æ•´ä¸ªç«™ç‚¹ã€‚</p>
<h2 id="7-å…¶ä»–ä¼˜åŒ–"><a href="#7-å…¶ä»–ä¼˜åŒ–" class="headerlink" title="7 å…¶ä»–ä¼˜åŒ–"></a>7 å…¶ä»–ä¼˜åŒ–</h2><h3 id="7-1-ä¿¡æ¯æ— éšœç¢"><a href="#7-1-ä¿¡æ¯æ— éšœç¢" class="headerlink" title="7.1 ä¿¡æ¯æ— éšœç¢"></a>7.1 ä¿¡æ¯æ— éšœç¢</h3><p>ä¿¡æ¯æ— éšœç¢ä¸€èˆ¬å¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹å…¥æ‰‹ï¼š</p>
<ul>
<li>æ·»åŠ landmarkè§’è‰²ï¼Œåœ¨é¡µé¢ä¸»è¦æ“ä½œåŒºåŸŸï¼ˆæœç´¢æ¡†ã€ç™»å½•æ¡†ã€åˆ—è¡¨å†…å®¹ï¼‰æ·»åŠ â€œroleâ€æ ‡ç­¾åŠ ä»¥è¯´æ˜ã€‚landmarkå€¼ä¸€èˆ¬æœ‰ï¼šbannerï¼ˆbannerï¼‰ã€complementaryï¼ˆè¾…åŠ©å†…å®¹åŒºï¼‰ã€contentinfoï¼ˆç½‘ç«™ä¿¡æ¯å’Œç‰ˆæƒï¼‰ã€formï¼ˆè¡¨å•ï¼‰ã€mainï¼ˆä¸»å†…å®¹åŒºï¼‰ã€navigationï¼ˆå¯¼èˆªåŒºï¼‰ã€searchï¼ˆæœç´¢åŒºï¼‰ï¼Œå¦‚ï¼š<br> <img src="//img.aotu.io/wangcainuan/2016-03-16-optimization/role.jpg" alt="img"></li>
<li>æä¾›æ–‡å­—æ›¿ä»£æ–¹æ¡ˆã€‚æ¯”å¦‚ç»™å›¾ç‰‡æˆ–å…¶ä»–å…ƒç´ æä¾›é€‚å½“çš„altå±æ€§æˆ–è€…titleå±æ€§çš„å€¼ã€‚</li>
<li>è¡¨å•ä½¿ç”¨labelæ ‡ç­¾ã€‚</li>
<li>ä½¿ç”¨headingåšä¿¡æ¯æ¶æ„ã€‚è¯»å±è½¯ä»¶æä¾›äº†å¿«æ·é”®åˆ‡æ¢headingï¼Œç›¸å…³ç”¨æˆ·å¯é€šè¿‡è¯»å±è½¯ä»¶äº†è§£æˆ‘ä»¬çš„ç½‘ç«™ä¿¡æ¯æ¶æ„ã€‚</li>
<li>ç»™é¡µé¢é‡Œé‡è¦åŒºå—å’ŒåŠŸèƒ½æ·»åŠ accesskeyï¼Œå¯ä»¥å¿«é€Ÿå®šä½ã€‚</li>
<li>è§¦å‘ç•Œé¢è½¬æ¢éœ€è®¾ç½®ç„¦ç‚¹ã€‚æ¯”å¦‚ï¼Œå¯¹äºæµ®å±‚éœ€è¦æ³¨æ„é¿å…â€œTabâ€ç„¦ç‚¹ä¸­æ–­ã€‚</li>
<li>è€ƒè™‘åˆ°è€å¹´çœ¼ç›è€èŠ±ï¼Œå› æ­¤éœ€è¦ä¿è¯å­—ä½“å¤Ÿå¤§ï¼Œæˆ–è€…ç½‘ç«™å¯ç¼©æ”¾ã€‚</li>
</ul>
<p>å…·ä½“å¯å‚è€ƒ<a href="http://www.qq.com/demo/accessibility.htm" target="_blank" rel="external">æ— éšœç¢é˜…è¯»</a></p>
<h3 id="7-2-å¾®åŠ¨ç”»"><a href="#7-2-å¾®åŠ¨ç”»" class="headerlink" title="7.2 å¾®åŠ¨ç”»"></a>7.2 å¾®åŠ¨ç”»</h3><p>é€šè¿‡å‰ç«¯åŠ¨ç”»æŠ€æœ¯ç»™é¡µé¢è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å•†å“å›¾ç‰‡hoveræ•ˆæœ</li>
<li>å°å›¾æ ‡æ—‹è½¬æ•ˆæœ</li>
<li>è´­ç‰©è½¦å¾®åŠ¨ç”»</li>
<li>loadingåŠ¨ç”»ï¼Œå½“åŠ è½½é¡µé¢éœ€è¦ä¸€å®šæ—¶é—´ï¼Œç‰¹åˆ«æ˜¯ç§»åŠ¨ç«¯ï¼Œå¯ä»¥é€šè¿‡æœ‰è¶£çš„loadingåŠ¨ç”»å¸å¼•ç”¨æˆ·ï¼Œè¿™é‡Œæœ‰ä¸€äº›æœ‰è¶£çš„<a href="http://www.instantshift.com/2016/01/22/free-html5-css3-loaders-preloaders/" target="_blank" rel="external">loadingåŠ¨ç”»</a></li>
</ul>
<h3 id="7-3-requireJs"><a href="#7-3-requireJs" class="headerlink" title="7.3 requireJs"></a>7.3 requireJs</h3><p>requireJsæ¡†æ¶ç‰¹æ€§ï¼š</p>
<ul>
<li>å‰ç«¯è®¾è®¡åŠå¼€å‘äººå‘˜ç»Ÿä¸€ä»£ç è§„èŒƒã€‚</li>
<li>æŒ‰éœ€åŠ è½½ã€‚</li>
<li>AMDè§„èŒƒï¼šä»¥ç®€å•è€Œä¼˜é›…çš„æ–¹å¼ç»Ÿä¸€äº†JavaScriptçš„æ¨¡å—å®šä¹‰å’ŒåŠ è½½æœºåˆ¶ï¼Œé™ä½äº†å­¦ä¹ å’Œä½¿ç”¨å„ç§æ¡†æ¶çš„é—¨æ§›ï¼Œèƒ½å¤Ÿä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å»å®šä¹‰å’Œä½¿ç”¨æ¨¡å—ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½äº†åº”ç”¨ç»´æŠ¤æˆæœ¬ã€‚</li>
<li>ä¸Gruntç»“åˆå¯å®ç°ä¸€ç«™å¼å·¥ä½œæµã€‚</li>
</ul>
<h3 id="7-4-å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥"><a href="#7-4-å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥" class="headerlink" title="7.4 å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥"></a>7.4 å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥</h3><p>åœºæ™¯å¦‚ä¸‹ï¼š<br>é¡µé¢ä¸€ï¼šå»ä¸€ä¸ªç½‘ç«™ä¹°ä¸œè¥¿ï¼Œæœªç™»å½•çŠ¶æ€ä¸‹ï¼Œè¿›å…¥é¦–é¡µï¼›<br>é¡µé¢äºŒï¼šç„¶åæ–°çª—å£æ‰“å¼€ä»»æ„é¡µé¢ï¼Œç™»å½•å¹¶æˆåŠŸè¿”å›ã€‚<br>å†æ¬¡è®¿é—®é¡µé¢ä¸€ï¼Œå‘ç°é¡µé¢è¿˜æ˜¯æœªç™»å½•çŠ¶æ€ï¼Œå®é™…ä¸Šç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œè¿™ç§ä½“éªŒæ˜¯å¾ˆå·®çš„ã€‚æˆ‘ä»¬æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å®ç°å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥å‘¢ï¼Ÿæœ‰çš„ï¼Œåˆ©ç”¨Page Visibilityï¼š</p>
<ul>
<li>é¡µé¢å¯è§æ€§APIå°±æ˜¯è¡¨ç¤ºç½‘é¡µå¯è§è¿˜æ˜¯ä¸å¯è§çš„ã€‚é¡µé¢å¯è§æ€§APIæœ‰ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªäº‹ä»¶ï¼Œå¦‚ä¸‹ï¼š<ul>
<li>document.hidden: Booleanå€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µé¢å¯è§è¿˜æ˜¯ä¸å¯è§</li>
<li>document.visibilityState: è¿”å›å½“å‰é¡µé¢çš„å¯è§çŠ¶æ€ï¼ŒçŠ¶æ€å€¼æœ‰hiddenã€visibleã€prerenderã€previewã€‚</li>
<li>visibilitychange: å½“å¯è§çŠ¶æ€æ”¹å˜æ—¶å€™è§¦å‘çš„äº‹ä»¶ã€‚</li>
</ul>
</li>
<li>æµè§ˆå™¨æ”¯æŒï¼šIE10+ã€Chromeã€FireFoxã€‚</li>
<li>å¤šæ ‡ç­¾çŠ¶æ€åŒæ­¥demo: <a href="http://www.zhangxinxu.com/study/201211/page-visibility-api-login-same-step-1.html" target="_blank" rel="external">ç½‘é¡µå¯è§æ€§APIä¸ç™»å½•åŒæ­¥</a></li>
</ul>
<h3 id="7-5-ä¸ªæ€§åŒ–æ¨è"><a href="#7-5-ä¸ªæ€§åŒ–æ¨è" class="headerlink" title="7.5 ä¸ªæ€§åŒ–æ¨è"></a>7.5 ä¸ªæ€§åŒ–æ¨è</h3><ul>
<li>HTML5 Geolocation APIè·å¾—ç”¨æˆ·çš„åœ°ç†ä½ç½®ï¼Œè¿›è¡ŒåŸºäºåœ°ç†ä½ç½®çš„è¿è¥ã€‚</li>
</ul>
<h2 id="8-å‚è€ƒ"><a href="#8-å‚è€ƒ" class="headerlink" title="8 å‚è€ƒ"></a>8 å‚è€ƒ</h2><p><a href="http://www.jianshu.com/p/9bc4951c9d80" target="_blank" rel="external">èƒ½æé«˜å‰ç«¯å·¥ä½œæ•ˆç‡çš„é‚£äº›äº‹</a><br><a href="http://vdisk.weibo.com/s/cSKQveSBNY4yH" target="_blank" rel="external">åŸºäºGulpçš„å‰ç«¯è‡ªåŠ¨åŒ–</a><br><a href="http://vdisk.weibo.com/s/cSKQveSBEu3e5" target="_blank" rel="external">ç¹æ˜Ÿç½‘çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹è·¯</a><br><a href="http://www.cnblogs.com/lei2007/archive/2013/08/16/3262897.html" target="_blank" rel="external">å‰ç«¯æ€§èƒ½ä¼˜åŒ–â€”-yahooå‰ç«¯æ€§èƒ½å›¢é˜Ÿæ€»ç»“çš„35æ¡é»„é‡‘å®šå¾‹</a><br><a href="http://vdisk.weibo.com/s/cSKQveSBEudR2" target="_blank" rel="external">å‰ç«¯æ€§èƒ½æ•°æ®ä¹‹é‡‡é›†å’Œåˆ†æ</a><br><a href="http://www.infoq.com/cn/news/2015/06/web-performance-api" target="_blank" rel="external">Webæ€§èƒ½APIâ€”â€”å¸®ä½ åˆ†æWebå‰ç«¯æ€§èƒ½</a><br><a href="http://www.zhihu.com/question/20984284" target="_blank" rel="external">å‰ç«¯å·¥ç¨‹å¸ˆå¦‚ä½•ç³»ç»Ÿåœ°æ•´ç†å’Œç´¯ç§¯å…¼å®¹æ€§ç›¸å…³çš„çŸ¥è¯†ï¼Ÿ</a><br><a href="https://isux.tencent.com/play-with-html5-optimize.html" target="_blank" rel="external">ç©è½¬HTML5ç§»åŠ¨é¡µé¢(ä¼˜åŒ–ç¯‡)</a><br><a href="https://imququ.com/post/http2-and-wpo-1.html" target="_blank" rel="external">HTTP/2 ä¸ WEB æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€ï¼‰</a><br><a href="https://imququ.com/post/http2-and-wpo-2.html" target="_blank" rel="external">HTTP/2 ä¸ WEB æ€§èƒ½ä¼˜åŒ–ï¼ˆäºŒï¼‰</a><br><a href="https://imququ.com/post/http2-and-wpo-3.html" target="_blank" rel="external">HTTP/2 ä¸ WEB æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰</a><br><a href="https://imququ.com/post/header-compression-in-http2.html" target="_blank" rel="external">HTTP/2 å¤´éƒ¨å‹ç¼©æŠ€æœ¯ä»‹ç»</a><br><a href="http://www.imweb.io/topic/568958714c44bcc56092e409" target="_blank" rel="external">ä»é›¶å¼€å§‹å­¦webå®‰å…¨ï¼ˆ1ï¼‰</a><br><a href="https://blog.wilddog.com/?p=290&amp;utm_source=baidu.keywords&amp;utm_medium=cpc&amp;utm_content=blog&amp;utm_campaign=orangemarch#more-290" target="_blank" rel="external">å…³äºWebå®‰å…¨ï¼Œ99%çš„ç½‘ç«™éƒ½å¿½ç•¥äº†è¿™äº›</a><br><a href="http://www.jb51.net/web/24351.html" target="_blank" rel="external">ç½‘é¡µå‰ç«¯å¸¸è§çš„æ”»å‡»æ–¹å¼å’Œé¢„é˜²æ”»å‡»çš„æ–¹æ³•</a><br><a href="https://segmentfault.com/a/1190000000382944" target="_blank" rel="external">Webå®¢æˆ·ç«¯å®‰å…¨æ€§æœ€ä½³å®è·µ</a><br><a href="https://segmentfault.com/a/1190000003756563" target="_blank" rel="external">HTML5 å®‰å…¨é—®é¢˜è§£æ</a><br><a href="https://isux.tencent.com/ten-steps-enhance-web-accessibility.html" target="_blank" rel="external">10æ­¥å¤§å¹…æå‡ç½‘ç«™å¯è®¿é—®æ€§</a><br><a href="http://www.zhangxinxu.com/wordpress/2012/11/page-visibility-api-introduction-extend/" target="_blank" rel="external">Page Visibility(é¡µé¢å¯è§æ€§)APIä»‹ç»ã€å¾®æ‹“å±•</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¯‡å¹…å¯èƒ½æœ‰ç‚¹é•¿ï¼Œæˆ‘æƒ³å…ˆèŠä¸€èŠé˜…è¯»çš„æ–¹å¼ï¼Œæˆ‘å¸Œæœ›ä½ é˜…è¯»çš„æ—¶å€™ï¼Œèƒ½å¤ŸæŠŠæˆ‘å½“ä½œä½ çš„ç«äº‰å¯¹æ‰‹ï¼Œä½ çš„æ¢¦æƒ³æ˜¯è¶…è¶Šæˆ‘ã€‚ä½ æƒ³è¶…è¶Šæˆ‘ï¼Œå°±å¾—äº†è§£æˆ‘æ‡‚ä»€ä¹ˆå¯¹å§ï¼Œå¥½ï¼Œå¼€å§‹é˜…è¯»~ ~ å“ˆå“ˆå“ˆ ~ ~ ~&lt;/p&gt;
&lt;p&gt;å†æ—¶144000000æ¯«ç§’å‡ºå±±çš„å‰ç«¯ä¼˜åŒ–ç¯‡ï¼Œè‹¥ä½ é—®æˆ‘æœ‰ä»€ä¹ˆæ„Ÿæ‚Ÿï¼Ÿ&lt;br&gt;é‚£æˆ‘å‘Šè¯‰ä½ ï¼Œçœ‹åˆ°æ¯«ç§’å•Šï¼Œç«ç®­å•Šï¼Œè¿™äº›ä¸ä¼˜åŒ–ç›¸å…³çš„è¯ï¼Œéƒ½æœ‰è«åçš„äº²åˆ‡æ„Ÿã€‚&lt;br&gt;æœ¬æ–‡ä¸»è¦ä»&lt;strong&gt;å·¥ä½œæ•ˆç‡&lt;/strong&gt;ã€&lt;strong&gt;é€Ÿåº¦æ€§èƒ½&lt;/strong&gt;ã€&lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt;ã€&lt;strong&gt;å“åº”å¼&lt;/strong&gt;ã€&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ã€&lt;strong&gt;æœç´¢SEO&lt;/strong&gt;ã€&lt;strong&gt;ä¿¡æ¯æ— éšœç¢&lt;/strong&gt;ç­‰æ–¹é¢è¿›è¡Œè®²è§£ã€‚&lt;br&gt;å‰ç«¯ä¼˜åŒ–æ˜¯ä¸€ä¸ªè®©äººæŠ€æœ¯æå‡çš„pointï¼Œå¸Œæœ›ä½ ä¹Ÿèƒ½ä»è¿™é‡Œå­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="èµ„æºåˆé›†" scheme="https://aotu.io/cates/%E8%B5%84%E6%BA%90%E5%90%88%E9%9B%86/"/>
    
    
      <category term="å·¥ä½œæ•ˆç‡" scheme="https://aotu.io/tags/%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/"/>
    
      <category term="é€Ÿåº¦æ€§èƒ½" scheme="https://aotu.io/tags/%E9%80%9F%E5%BA%A6%E6%80%A7%E8%83%BD/"/>
    
      <category term="å®‰å…¨æ€§" scheme="https://aotu.io/tags/%E5%AE%89%E5%85%A8%E6%80%A7/"/>
    
      <category term="å“åº”å¼" scheme="https://aotu.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
      <category term="å…¼å®¹æ€§" scheme="https://aotu.io/tags/%E5%85%BC%E5%AE%B9%E6%80%A7/"/>
    
      <category term="æœç´¢SEO" scheme="https://aotu.io/tags/%E6%90%9C%E7%B4%A2SEO/"/>
    
      <category term="ä¿¡æ¯æ— éšœç¢" scheme="https://aotu.io/tags/%E4%BF%A1%E6%81%AF%E6%97%A0%E9%9A%9C%E7%A2%8D/"/>
    
      <category term="å‰ç«¯ä¼˜åŒ–" scheme="https://aotu.io/tags/%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>æŸè¶…é•¿æ–‡æ¡£çš„æ¢ç´¢ä¹‹è·¯</title>
    <link href="https://aotu.io/notes/2016/03/15/jcloud-sum/"/>
    <id>https://aotu.io/notes/2016/03/15/jcloud-sum/</id>
    <published>2016-03-15T08:18:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰€è°“çš„æ–‡æ¡£, å¤§æ¦‚å°±æ˜¯æŒ‡é‚£ç§æ´‹æ´‹æ´’æ´’å†™äº†ä¸ä¸‹å‡ ä¸‡å­—, æœ€åæ²¡æœ‰å¤šå°‘äººä¼šçœ‹å®Œçš„ä¸œè¥¿. å¯¹, æ¯”æŠ€æœ¯ä¸ä¸€å®š, ä½†æ¯”å­—æ•°è°éƒ½èµ¢ä¸äº†æˆ‘! </p>
<a id="more"></a>
<p>è¿™æ¬¡äº¬ä¸œäº‘æ”¹ç‰ˆçš„é¡¹ç›®, é™¤äº†éœ€è¦æ­å»ºä¸€ä¸ªæ”¾ç½®äº¬ä¸œäº‘æ–‡æ¡£çš„å¹³å°, è¿˜åŒ…æ‹¬äº†æ–‡æ¡£å½•å…¥çš„å·¥ä½œ. ä¹‹å‰ä½¿ç”¨<a href="http://hexo.io" target="_blank" rel="external"><strong>Hexo</strong></a>åšè¿‡<a href="http://aotu.io/halojs/"><strong>HaloJS</strong></a>çš„æ–‡æ¡£å¹³å°, åœ¨æ–‡æ¡£å½•å…¥çš„æ—¶å€™å¹¶æ²¡æœ‰ç¢°åˆ°å¤ªå¤šé—®é¢˜. æœ¬ä»¥ä¸ºæ­å»ºæ–‡æ¡£é¡µé¢ä¹Ÿå°±ä»…æ­¤è€Œå·², ç›´åˆ°ç¢°åˆ°äº†é•¿è¾¾104é¡µçš„docæ–‡æ¡£â€¦</p>
<h3 id="æ­å»ºæ¡†æ¶"><a href="#æ­å»ºæ¡†æ¶" class="headerlink" title="æ­å»ºæ¡†æ¶"></a>æ­å»ºæ¡†æ¶</h3><p>ä¸åŒäºå…¶ä»–é›¶æ•£çš„é¡µé¢, æ–‡æ¡£é¡µé¢æ˜¯ä¸€æ•´ä¸ªç³»åˆ—çš„, å…·æœ‰ç›¸åŒçš„é¡µé¢ç»“æ„. é¡µé¢å¤´éƒ¨, åº•éƒ¨, å¯¼èˆªç­‰ç»„ä»¶. å¦‚æœåƒå¹³æ—¶åˆ¶ä½œé™æ€é¡µé¢é‚£æ ·æ¯ä¸ªé¡µé¢éƒ½ä»ä¸€ä¸ªç©ºç™½çš„æ¨¡æ¿htmlæ–‡ä»¶å¼€å§‹ä¸‹æ‰‹, åœ¨å¼€å‘é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™, é¡µé¢æ•´ä½“çš„ç»´æŠ¤å°±ä¼šéå¸¸å›°éš¾. é¦–å…ˆæ˜¯æ— æ³•å¾ˆç—›å¿«åœ°è¿›è¡ŒæŸäº›å…¬å…±æ¨¡å—çš„ä¿®æ”¹: å°±ç®—åªæ˜¯åœ¨åº•éƒ¨åŠ å¤šä¸€ä¸ªé“¾æ¥, æˆ–è€…åœ¨å¯¼èˆªä¸­åˆ é™¤ä¸€ä¸ªæ¡ç›®, æˆ‘ä»¬éƒ½éœ€è¦å¯¹æ¯ä¸ªé¡µé¢éƒ½è¿›è¡Œæ‰‹åŠ¨ä¿®æ”¹. å¦å¤–, é¡µé¢çš„èµ„æºç®¡ç†ä¼šè¶Šæ¥è¶Šéš¾. æ¯ä¸ªé¡µé¢éƒ½éœ€è¦å¼•ç”¨æ•´ä½“é¡µé¢çš„æ ·å¼æ–‡ä»¶ä¸è„šæœ¬æ–‡ä»¶, è¿˜éƒ½æœ‰é¡µé¢ç§æœ‰çš„æ ·å¼æ–‡ä»¶, è„šæœ¬æ–‡ä»¶, è¿˜æœ‰å›¾ç‰‡æ–‡ä»¶ç­‰. å¦‚æœè¿™äº›èµ„æºå…±ç”¨ä¸€ä¸ªæ–‡ä»¶å¤¹, æœ‰æ—¶å€™å°±ä¼šé¢ä¸´æ–‡ä»¶å‘½åçš„éš¾é¢˜. </p>
<p>å¦‚ä¸Šé¢è¯´, æ–‡æ¡£é¡µé¢å¯è°“æ˜¯é‡å¤å·¥ä½œæœ€ä¸¥é‡çš„ä¸€ç§é¡µé¢. å¥½åœ¨æ­å»ºæ¡†æ¶çš„å°ä¼™ä¼´éå¸¸ç»™åŠ›, ä½¿ç”¨äº†åŒæ ·å¾ˆç»™åŠ›çš„å¼€æºçš„å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘å·¥å…·<a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>,è‡ªå¸¦æ”¯æŒä»£ç çƒ­æ›´æ–°çš„é¢„è§ˆæœåŠ¡, è‡ªå¸¦å‹ç¼©ä»£ç , ç¼–è¯‘sass/lessçš„å·¥å…·, è‡ªå¸¦ä¸Šä¼ sftpçš„å·¥å…·ç­‰ç­‰. è€Œå¯¹äºè¿™ä¸ªéœ€æ±‚æ¥è¯´, æœ€å¥½ç”¨çš„è«è¿‡äºejsæ¨¡æ¿è¯­æ³•çš„æ”¯æŒäº†. æœ‰äº†æ¨¡æ¿, å…¬å…±çš„ç»„ä»¶åœ¨ä¸åŒé¡µé¢éƒ½å¯ä»¥éšæ„å¼•ç”¨, å·¥ä½œé‡å‡å°‘äº†éå¸¸å¤š. </p>
<p>æ¯ä¸ªé¡µé¢éƒ½ç”±ç»„ä»¶ç»„æˆ, å¹³æ—¶å†™é¡µé¢çš„æ—¶å€™åªéœ€è¦ç‚¹åå¼•ç”¨éœ€è¦çš„ç»„ä»¶. æ­å»ºå®Œæˆå, ä½¿ç”¨Athenaå·¥å…·çš„buildå‘½ä»¤, å°±å¯ä»¥å°†é¡µé¢çš„é™æ€æ–‡ä»¶è¾“å‡º. å¯¹äºè¿™æ‰¹æ–‡æ¡£çš„é¡µé¢, æ¯ä¸ªé¡µé¢ä¼šè¢«æ‹†åˆ†ä¸ºå¤´éƒ¨ç»„ä»¶, åº•éƒ¨ç»„ä»¶, å¯¼èˆªç»„ä»¶. å¦‚æœå¼€å‘è¿‡ç¨‹ä¸­æŸä¸ªç»„ä»¶äº§ç”Ÿå˜åŒ–, åªéœ€è¦ç›´æ¥ä¿®æ”¹ç»„ä»¶, å†é‡æ–°è¿è¡Œbuildå‘½ä»¤, å°±å¯ä»¥ä½¿æ¯ä¸ªå¼•ç”¨äº†è¿™ä¸ªç»„ä»¶çš„é¡µé¢éƒ½ä¸€èµ·å˜è¿‡æ¥, å¯è°“ååˆ†æ–¹ä¾¿.</p>
<h3 id="å½•å…¥æ–‡æ¡£"><a href="#å½•å…¥æ–‡æ¡£" class="headerlink" title="å½•å…¥æ–‡æ¡£"></a>å½•å…¥æ–‡æ¡£</h3><p>å½•å…¥æ–‡æ¡£å¯èƒ½æ˜¯è¿™ä¸€æ•´ä¸ªéœ€æ±‚æœ€ç—›è‹¦çš„å·¥ä½œäº†. ä¸€ç™¾å¤šé¡µA4çº¸å¤§å°çš„DOCæ–‡æ¡£, è¿˜éœ€è¦ä¾æ®è®¾è®¡ç¨¿é‡æ–°è®¾ç½®æ ·å¼, æ˜¯ååˆ†æœºæ¢°åŒ–çš„å·¥ä½œ. åœ¨è¿™é‡Œ, æˆ‘çš„å°ä¼™ä¼´å°†æ–‡æ¡£ä¸­çš„ä¸åŒæ ·å¼å»ºç«‹ä¸ºä¸åŒçš„ç»„ä»¶, æ¯”å¦‚ä¸€çº§æ ‡é¢˜ç»„ä»¶, æˆ–æ˜¯äºŒçº§æ ‡é¢˜ç»„ä»¶ç­‰ç­‰. è¿™äº›ç»„ä»¶ä½¿ç”¨èµ·æ¥å°±åƒä¸‹é¢è¿™æ ·:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">widget.load</span>('<span class="attr">doc_mod_list3</span>', &#123;</span></div><div class="line">  <span class="attr">title1:</span> 'æ“ä½œæŒ‡å—',</div><div class="line">  <span class="attr">item1:</span> ['æŒ‚è½½äº‘ç¡¬ç›˜','ç»‘å®šå…¬ç½‘<span class="attr">IP</span>','å¸¸è§é—®é¢˜','ä¸»æœºæ•°é‡','ç›‘æ§æŠ¥è­¦','åˆ é™¤äº‘ä¸»æœº','ç»‘å®šç›‘æ§æŠ¥è­¦','é‡ç½®å¯†ç ','åˆ¶ä½œé•œåƒ'],</div><div class="line">  <span class="attr">title2:</span> 'å¸¸è§é—®é¢˜',</div><div class="line">  <span class="attr">item2:</span> ['ä¸»æœºæ•°é‡','ç›‘æ§æŠ¥è­¦','åˆ é™¤äº‘ä¸»æœº'],</div><div class="line">  <span class="attr">item3show:</span> <span class="attr">false</span></div><div class="line">&#125;) %&gt;</div></pre></td></tr></table></figure>
<p>ç»„ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªejsæ¨¡æ¿:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;ul class="doc_mod_list3"&gt;</div><div class="line">  &lt;li class="item1"&gt;</div><div class="line">    &lt;div class="doc_mod_list3_title"&gt;&lt;%= title1 %&gt;&lt;/div&gt;</div><div class="line">    &lt;span class="doc_mod_list3_link"&gt;</div><div class="line">      &lt;% for (var i=0;i&lt;item1.length;i++) &#123; %&gt;</div><div class="line">        &lt;a href=""&gt;&lt;%= item1[i] %&gt;&lt;/a&gt;</div><div class="line">      &lt;% &#125; %&gt;</div><div class="line">      &lt;a href="" class="doc_mod_list3_lmore"&gt;æ›´å¤š&amp;gt;&amp;gt;&lt;/a&gt;</div><div class="line">    &lt;/span&gt;</div><div class="line">  &lt;/li&gt;</div><div class="line">  &lt;li class="item2"&gt;</div><div class="line">    &lt;div class="doc_mod_list3_title"&gt;&lt;%= title2 %&gt;&lt;/div&gt;</div><div class="line">    &lt;span class="doc_mod_list3_link"&gt;</div><div class="line">      &lt;% for (var i=0;i&lt;item2.length;i++) &#123; %&gt;</div><div class="line">        &lt;a href=""&gt;&lt;%= item2[i] %&gt;&lt;/a&gt;</div><div class="line">      &lt;% &#125; %&gt;</div><div class="line">      &lt;a href="" class="doc_mod_list3_lmore"&gt;æ›´å¤š&amp;gt;&amp;gt;&lt;/a&gt;</div><div class="line">    &lt;/span&gt;</div><div class="line">  &lt;/li&gt;</div><div class="line">  &lt;% if(item3show == true) &#123; %&gt;</div><div class="line">    &lt;li class="item3"&gt;</div><div class="line">      &lt;div class="doc_mod_list3_title"&gt;&lt;%= title3 %&gt;&lt;/div&gt;</div><div class="line">      &lt;span class="doc_mod_list3_link"&gt;</div><div class="line">        &lt;% for (var i=0;i&lt;item3.length;i++) &#123; %&gt;</div><div class="line">          &lt;a href=""&gt;&lt;%= item3[i] %&gt;&lt;/a&gt;</div><div class="line">        &lt;% &#125; %&gt;</div><div class="line">        &lt;a href="" class="doc_mod_list3_lmore"&gt;æ›´å¤š&amp;gt;&amp;gt;&lt;/a&gt;</div><div class="line">      &lt;/span&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">  &lt;% &#125; %&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥, æˆ‘ä»¬å†™é¡µé¢çš„å·¥ä½œ, å˜æˆäº†å†™ejsç»„ä»¶, å†ç”¨widget.loadå‡½æ•°åŠ è½½è‡ªå®šä¹‰çš„ç»„ä»¶, ç”¨getCSS/getJSå‡½æ•°è°ƒç”¨å¯¹åº”çš„css/jsæ–‡ä»¶èµ„æº. æŠŠé¡µé¢ä¸­æ¯”è¾ƒé€šç”¨, å¤æ‚çš„ç»„ä»¶æ‹†åˆ†å‡ºæ¥, æœ‰åˆ©äºå°†é¡µé¢æ¨¡å—åŒ–, ä»£ç å¤ç”¨å¯ä»¥æ›´çˆ½å¿«.</p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>å…·ä½“åˆ°è¿™ä¸ªé¡¹ç›®, æ–‡æ¡£å½•å…¥æ˜¯ä¸ªéå¸¸ç—›è‹¦çš„æ´». æŒ‰ç…§ç›®å‰çš„æ–¹æ¡ˆ, æ–‡æ¡£é‡Œé¢çš„ä¸€çº§æ ‡é¢˜, äºŒçº§æ ‡é¢˜, æ­£æ–‡, å›¾ç‰‡ç­‰, éƒ½æ˜¯ç”±ç»„ä»¶æ„æˆ, åƒ<code>&lt;h3 class=â€œxxxxâ€&gt;xxxx&lt;/h3&gt;</code>è¿™æ ·çš„ç®€å•ä»£ç , ä¹Ÿè¢«åšæˆäº†ç»„ä»¶. ä¸ªäººè®¤ä¸ºè¿™æ ·çš„åšæ³•ä¸å¤ªç§‘å­¦. è¿™ç§å¤ªè¿‡ç»†å°çš„ç»„ä»¶åè€Œä½¿å½•å…¥æ–‡æ¡£å˜æˆäº†ååˆ†ç—›è‹¦çš„äº‹æƒ…. ä¸Šé¢æ‰€è¯´çš„æƒ…å†µ, ä¸€ä¸ªæ ‡ç­¾å¯ä»¥è§£å†³çš„é—®é¢˜, å˜æˆå¼•ç”¨ç»„ä»¶çš„å·¥ä½œå, ä»£ç é‡å¹¶æ²¡æœ‰å¤šå°‘å·®åˆ«:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- å£°æ˜ç»„ä»¶ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"doc_mod_title3"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%=</span> <span class="attr">title</span> %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç»„ä»¶ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">widget.load</span>('<span class="attr">doc_mod_title3</span>', &#123;</span></div><div class="line">  <span class="attr">title:</span> 'äº¬ä¸œäº‘å…¥é—¨æ‰‹å†Œ'</div><div class="line">&#125;) %&gt;</div></pre></td></tr></table></figure>
<p>å·¦è¾¹æ˜¯å¼•ç”¨ç»„ä»¶çš„å†™æ³•, å³è¾¹æ˜¯ç»„ä»¶å†…éƒ¨çš„ä»£ç . å¯ä»¥çœ‹è§, <strong>è¿‡åº¦æ¨¡å—åŒ–å¯¼è‡´äº†ç»†å°ç»„ä»¶çš„äº§ç”Ÿ</strong>. è¿™é‡Œåº”è¯¥æœ‰æ›´åŠ æ–¹ä¾¿çš„åšæ³•. </p>
<p>Pythonä¸­æœ‰ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—docx2html, å®ç°äº†å°†docxæ–‡ä»¶è½¬åŒ–ä¸ºhtmlä»£ç çš„åŠŸèƒ½, å¹¶ä¸”è½¬åŒ–å®Œçš„ä»£ç ååˆ†çº¯å‡€, åªæœ‰htmlç»“æ„ä¸å†…å®¹, ä¸å¸¦æ ·å¼, å¾ˆé€‚åˆåœ¨å¯¼å‡ºåå†é‡ç½®æ ·å¼. é’ˆå¯¹è¿™ä¸ªé¡¹ç›®, æˆ‘ä»¬å¯ä»¥åšä¸ªå°æ”¹é€ , æ¯ä¸ªé¡µé¢ä¾ç„¶ç”±å¤´éƒ¨, å¯¼èˆªè¿˜æœ‰åº•éƒ¨ç»„æˆ, è€Œæ–‡æ¡£å†…å®¹åˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ªcssç±»<code>doc_mod_content</code>, è¡¨ç¤ºå…¶ä¸­æ˜¯æ–‡æ¡£çš„å†…å®¹, è€Œæ–‡æ¡£çš„å„ç§æ ·å¼, åˆ™å†™åœ¨è¿™ä¸ªç±»çš„åä»£é€‰æ‹©å™¨ä¸Š. å¦‚æœæ ‡ç­¾çš„ç§ç±»æ— æ³•æ»¡è¶³åŒºåˆ†ç‰¹å®šèŠ‚ç‚¹çš„éœ€è¦, è¿˜å¯ä»¥é€šè¿‡ç¼–è¾‘å™¨çš„æœç´¢æ›¿æ¢åŠŸèƒ½å»æ‰¹é‡æ·»åŠ ç‰¹å®šçš„ç±». è¿™æ ·çš„è¯, é¦–å…ˆæ˜¯å°‘å»äº†å¼€å‘ç»„ä»¶çš„å·¥ä½œ, æ–‡æ¡£çš„å½•å…¥ä¹Ÿä¼šè½»æ¾å¾ˆå¤š. é—æ†¾çš„æ˜¯, ç”±äºæ—¶é—´ç´§è¿«, è¿™ä¸ªéœ€æ±‚å¹¶æ²¡æœ‰ä½¿ç”¨è¿™ç§æ–¹å¼. è¿‡åæœ‰æœºä¼šå¯ä»¥å°è¯•. æ–‡æ¡£å½•å…¥æœ¬æ¥å°±è¯¥æ˜¯ä¸ªè½»æ¾çš„æ´». </p>
<h3 id="å¯¼èˆªä¼˜åŒ–"><a href="#å¯¼èˆªä¼˜åŒ–" class="headerlink" title="å¯¼èˆªä¼˜åŒ–"></a>å¯¼èˆªä¼˜åŒ–</h3><p>å¯¹äºæ™®é€šçš„é¡µé¢, ä¾§å¯¼èˆªè·Ÿé¡µé¢ä¸»ä½“å¹¶ä¸éœ€è¦åˆ†å¼€, ç›´æ¥æ”¾ç½®å³å¯, å°±åƒhexoçš„<a href="https://hexo.io/api/" target="_blank" rel="external">æ–‡æ¡£é¡µé¢</a>ä¸€æ ·. ä½†å‰é¢è¯´è¿‡, æ–‡æ¡£é¡µæ˜¯éå¸¸é•¿çš„. å¯¹äºè¿™ç§è¶…é•¿çš„é¡µé¢, ä½¿ç”¨ä¸Šè¿°çš„å®ç°æ–¹å¼, æœ‰å¯èƒ½ä¼šå‡ºç°æ»šåŠ¨åˆ°é¡µé¢å†…å®¹ä¸­é—´, çœ‹ä¸è§å¯¼èˆªçš„çª˜è¿«å±€é¢. </p>
<p><img src="//img.aotu.io/Littly/2016-03-15/hexo.png" alt="img"></p>
<p>çœ‹è§è¿™ç§æƒ…å†µ, äº§å“çš„å°ä¼™ä¼´å°±è¯¥æ‰¾æˆ‘ä»¬äº†. é‡æ„å“¥å“¥, æˆ‘æƒ³è®©å¯¼èˆªå§‹ç»ˆåœ¨è§†é‡é‡Œé¢. ä½ èƒ½å®ç°ä¸?<br>Of Course! åªéœ€è¦æŠŠå¯¼èˆªæ è®¾ç½®ä¸ºposition: fixedå°±okäº†. ä¸è¿‡å¯¹äºè¿™ç§é¡µé¢ä¸­åŒæ—¶è¿˜å­˜åœ¨å¤´éƒ¨ä¸åº•éƒ¨çš„é¡µé¢, ä¼šæ¯”è¾ƒéº»çƒ¦. è·Ÿäº¤äº’çš„ç«¥é‹å•†é‡è¿‡å, æˆ‘ä»¬æŠŠæ–¹æ¡ˆç¡®å®šäº†ä¸‹æ¥. å…·ä½“è€Œè¨€, ä¾§å¯¼èˆªå…±æœ‰ä¸‰ç§çŠ¶æ€:</p>
<ol>
<li>å¯¼èˆªæ¡å°šæœªæ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨çš„çŠ¶æ€, <code>position: static</code></li>
<li>å¯¼èˆªæ¡æ»šåŠ¨åˆ°è¶…å‡ºé¡µé¢é¡¶éƒ¨çš„ä½ç½®, <code>position: fixed</code></li>
<li>å¯¼èˆªæ¡åº•éƒ¨ä¸é¡µé¢å†…å®¹çš„åº•éƒ¨å¯¹é½, <code>position: absolute; bottom: 0</code>,  æˆ–è€…ä½¿ç”¨JSæ§åˆ¶å¯¼èˆªæ¡çš„åº•éƒ¨å¯¹é½é¡µé¢å†…å®¹åº•éƒ¨. </li>
</ol>
<p>å†å…·ä½“ä¸€ç‚¹è¯´, è¿™ä¸‰ç§çŠ¶æ€çš„è§¦å‘æ¡ä»¶åˆ†åˆ«æ˜¯:</p>
<ol>
<li>é¡µé¢æ»šåŠ¨è·ç¦» &lt; å¯¼èˆªè·ç¦»é¡¶éƒ¨çš„è·ç¦»</li>
<li>é¡µé¢æ»šåŠ¨è·ç¦» &gt; å¯¼èˆªè·ç¦»é¡¶éƒ¨çš„è·ç¦» &amp;&amp; é¡µé¢æ»šåŠ¨è·ç¦» &lt; å†…å®¹çš„é«˜åº¦ + å†…å®¹è·ç¦»é¡¶éƒ¨çš„è·ç¦» - å¯¼èˆªæ¡çš„é«˜åº¦ + å¯¼èˆªæ¡çš„æ»šåŠ¨è·ç¦»</li>
<li>å‰©ä¸‹çš„æƒ…å†µ. </li>
</ol>
<p>å°±ç®—å¦‚æ­¤, è¿™æ ·çš„å®ç°è¿˜æ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜å­˜åœ¨, æ¯”å¦‚åœ¨è·³è½¬åˆ°æŸä¸ªé¡µé¢ä¹‹å, å¯¼èˆªçš„é«˜äº®æ¡ç›®ä¸ä¸€å®šä¼šåœ¨è§†é‡ä¸­, è¿™ä¼šå¯¼è‡´åœ¨ä¸åŒé¡µé¢é—´è·³è½¬çš„è¿‡ç¨‹ä¸­, å¯¼èˆªæ¡ä¸å›ºå®š, æ‰¾ä¸åˆ°é«˜äº®æ¡ç›®çš„å°´å°¬. </p>
<p><img src="//img.aotu.io/Littly/2016-03-15/out_of_view.png" alt="img"></p>
<p>åœ¨å½“å‰å®ç°æ–¹å¼ä¸‹, å¹¶æ²¡æœ‰ç‰¹åˆ«å¥½çš„åŠæ³•èƒ½è§£å†³è¿™ç§æƒ…å†µ. ä¸åŒé¡µé¢çš„é•¿åº¦ä¸æ˜¯ç›¸åŒçš„, å¯¼èˆªçš„ä½ç½®è·Ÿé¡µé¢çš„ä½ç½®å…³ç³»å¤„äºä¸Šé¢ä¸‰ç§çŠ¶æ€ä¸­çš„å“ªä¸€ç§ä¹Ÿæ˜¯éš¾ä»¥é¢„æµ‹çš„, å°±æ›´æ²¡åŠæ³•å°†å¯¼èˆªç§»å…¥è§†é‡ä¸­äº†. è¯´åˆ°åº•, è¿™ç§æƒ…å†µéƒ½æ˜¯ç”±äºé¡µé¢å’Œå¯¼èˆªå¤ªé•¿å¯¼è‡´çš„. <a href="http://www.qcloud.com/product/cvm.html" target="_blank" rel="external">è…¾è®¯äº‘</a>çš„æ–‡æ¡£é¡µé¢ä¹Ÿæ˜¯è¿™æ ·å¤„ç†çš„. </p>
<h4 id="æ€è€ƒ-1"><a href="#æ€è€ƒ-1" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>é‚£ä¹ˆ, åœ¨ä¸ç¼©çŸ­é¡µé¢å¯¼èˆªçš„æƒ…å†µä¸‹, æœ‰æ²¡æœ‰åŠæ³•åšå¥½è¿™æ ·çš„é¡µé¢çš„æ•ˆæœå‘¢? ç­”æ¡ˆæ˜¯æœ‰çš„, å¹¶ä¸”ä¸æ­¢ä¸€ç§. </p>
<p>é¦–å…ˆ, æœ‰ä¸€ç§æ¯”è¾ƒæŠ˜ä¸­çš„æ–¹æ¡ˆ(å½“ç„¶, è¦å…ˆé—®é—®äº§å“çš„å°ä¼™ä¼´åŒä¸åŒæ„), æŠŠå¯¼èˆªä¸­çš„é«˜äº®æ¡ç›®æŠ½å‡ºæ¥æ”¾åˆ°å¯¼èˆªçš„ç¬¬ä¸€ä½. å‚è€ƒå„ç§åŸºäºJSDoc3çš„æ–‡æ¡£é¡µé¢. ä¸‹é¢æ˜¯<a href="http://pixijs.github.io/docs/" target="_blank" rel="external">PIXI</a>çš„æ–‡æ¡£: </p>
<p><img src="//img.aotu.io/Littly/2016-03-15/pixi.png" alt="img"></p>
<p>æ”¾åˆ°é¡¹ç›®ä¸­çš„è¯, è¿™ç§åŠæ³•å¤§æœ‰æ›²çº¿æ•‘å›½çš„å‘³é“: ä¸æƒœä¿®æ”¹å‡ åä¸ªé¡µé¢ä¸­çš„å¯¼èˆªé¡ºåºæ¥è¾¾æˆé«˜äº®æ¡ç›®çš„å›ºå®š. è¿™ç§æœºæ¢°åŒ–çš„å·¥ä½œ, åšèµ·æ¥å·²ç»å¾ˆç´¯äºº. å¦‚æœåšå®Œåäº§å“çš„å°ä¼™ä¼´å¯¹æ•ˆæœä¸æ»¡æ„â€¦. æ˜¯çš„, è¿˜å¾—å‡ åä¸ªé¡µé¢ä¸€ä¸ªä¸€ä¸ªçš„æ”¹å›æ¥. å½“ç„¶, æˆ‘ä»¬ä¹Ÿå¯ä»¥é¢„å…ˆæŠŠè€ç‰ˆæœ¬å¤‡ä»½ä¸€ä¸‹, ä¸æ»¡æ„äº†å°±ç›´æ¥è¦†ç›–æ–‡ä»¶å®Œäº‹. è¿™ä¸€åˆ‡åšèµ·æ¥æ˜¯é‚£ä¹ˆçš„éº»çƒ¦. ä½†å¦‚æœæ˜¯æ­é…ç€<a href="https://github.com/o2team/athena" target="_blank" rel="external">Athena</a>å·¥å…·ä½¿ç”¨, å°±ç®€å•å¤šäº†. å¯¼èˆªæ ç»„ä»¶ä¸­ç”¨æ•°ç»„menuæ¥å‚¨å­˜å¯¼èˆªæ æ¡ç›®ä¿¡æ¯, åªéœ€è¦ç”¨forEachå°±å¯ä»¥è¾“å‡ºæ‰€æœ‰çš„èœå•é¡¹. å¦‚æœè¦å°†é«˜äº®æ¡ç›®ä¸ç¬¬ä¸€é¡¹å¯¹è°ƒ, åªéœ€è¦ä¸€å¥è¯å°±å®Œäº‹:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// var menu, curIdx;</span></div><div class="line">menu.unshift(menu.splice(curIdx<span class="comment">/*é«˜äº®æ¡ç›®çš„ç´¢å¼•*/</span>, <span class="number">1</span>)[<span class="number">0</span>]);</div><div class="line"><span class="comment">// menu.forEach(function (val, idx) &#123;...&#125;);</span></div></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹çˆ½?</p>
<p>ä¸Šé¢è¿™ç§æ–¹æ³•, è¯´å®è¯æ˜¯æœ‰ç‚¹ä¸å®Œç¾çš„. ç”¨æˆ·å½“ç„¶ä¸å¸Œæœ›ä¾§å¯¼èˆªçš„ä½ç½®ä¸€ç›´ä¸å›ºå®š. åœ¨è¿™é‡Œ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡µé¢å±€éƒ¨åˆ·æ–°æŠ€æœ¯æ¥è§„é¿è¿™ä¸ªé—®é¢˜. å¦‚æœèƒ½å¤Ÿåœ¨è·³è½¬åˆ°å…¶ä»–æ–‡æ¡£çš„æ—¶å€™ä¸åˆ·æ–°é¡µé¢, è€Œæ˜¯åœ¨è„šæœ¬ä¸­é€šè¿‡å¼‚æ­¥è¯·æ±‚è·å–åˆ°æ–°çš„æ–‡æ¡£çš„å†…å®¹. è¿™ä¸ªå†…å®¹å¯ä»¥æ˜¯json, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªhtmlæ–‡æ¡£, ç”šè‡³æ˜¯ä¸€ä¸ªhtmlç‰‡æ®µ. è¿‡åæˆ‘ä»¬å†å°†å…¶ç”¨åˆé€‚çš„å§¿åŠ¿å±•ç¤ºåœ¨å³ä¾§å†…å®¹åŒº. ç»“æœä¸Šçœ‹, é¡µé¢ä»…ä»…æ˜¯åˆ·æ–°äº†å†…å®¹åŒº, å¯¼èˆªä½ç½®ä¸ä¼šæ”¹å˜, æ¯”èµ·ä¹‹å‰çš„ç‰ˆæœ¬, æ•ˆç‡è¿˜ä¼šæ›´é«˜. </p>
<h3 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h3><p>è¿™ä¸ªé¡¹ç›®åšä¸‹æ¥, æœ€åè¿˜æ˜¯ç•™ä¸‹äº†ä¸€äº›é—æ†¾çš„åœ°æ–¹. è¿«äºæ—¶é—´, æ„Ÿè§‰æ‰‹å¤´è¿˜æœ‰å¾ˆå¤šçš„æŠ€æœ¯æ²¡ç”¨ä¸Š, æˆ–è€…è¿˜æœ‰è®¸å¤šçš„æ–¹æ¡ˆæ²¡å®ç°. è¦åšå¥½ä¸€ä¸ªé¡¹ç›®, è¿˜æ˜¯éœ€è¦ä»é¡¹ç›®ä¸€å¼€å§‹å°±ä¸äº§å“, äº¤äº’, è§†è§‰ç­‰ä¸šåŠ¡ä¸Šæ¸¸å›¢é˜Ÿä¿æŒè‰¯å¥½çš„æ²Ÿé€š, å¯¹æ•´ä¸ªé¡¹ç›®æ‹¥æœ‰ç›¸å½“çš„äº†è§£, é—­é—¨é€ è½¦ä¸å¯å–, <strong>ç”¨æˆ·ä½“éªŒ</strong>æ‰æ˜¯ç‹é“. </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰€è°“çš„æ–‡æ¡£, å¤§æ¦‚å°±æ˜¯æŒ‡é‚£ç§æ´‹æ´‹æ´’æ´’å†™äº†ä¸ä¸‹å‡ ä¸‡å­—, æœ€åæ²¡æœ‰å¤šå°‘äººä¼šçœ‹å®Œçš„ä¸œè¥¿. å¯¹, æ¯”æŠ€æœ¯ä¸ä¸€å®š, ä½†æ¯”å­—æ•°è°éƒ½èµ¢ä¸äº†æˆ‘! &lt;/p&gt;
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="jcloud" scheme="https://aotu.io/tags/jcloud/"/>
    
      <category term="sum" scheme="https://aotu.io/tags/sum/"/>
    
  </entry>
  
  <entry>
    <title>è®©å›¾ç‰‡åŠ è½½è¿™ä»¶äº‹å„¿å˜å¾—æ›´ç¾å¥½</title>
    <link href="https://aotu.io/notes/2016/03/09/img-loading-optimization-in-mobile/"/>
    <id>https://aotu.io/notes/2016/03/09/img-loading-optimization-in-mobile/</id>
    <published>2016-03-09T09:38:02.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ é—®æˆ‘æ„å»ºè§¦å±é¡µé¢çš„è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆå›°éš¾çš„ï¼Ÿ<br>æˆ‘å¯ä»¥æ‹ç€èƒ¸å£è·Ÿå¯ä»¥è·Ÿä½ è®²ï¼Œæœ‰ä¸‰å¤§é—®é¢˜ï¼é‚£å°±æ˜¯å›¾ç‰‡ã€å›¾ç‰‡ã€å›¾ç‰‡ã€‚<br>å°¤å…¶æ˜¯é¢å¯¹æ´»åŠ¨è¿è¥ä¾§çš„éœ€æ±‚çš„æ—¶å€™ï¼Œè¿å¦ˆå¦ˆéƒ½è¦é—®æˆ‘ä¸ºä»€ä¹ˆè¦è·ªç€åšéœ€æ±‚ã€‚<br>ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæ€»æœ‰ä¸€ä¸ªèåœé€‚åˆä½ çš„å‘ã€‚ä»Šå¤©å°±æ¥è®©å›¾ç‰‡åŠ è½½è¿™ä»¶äº‹å„¿å˜å¾—æ›´ç¾å¥½ï¼Œè®©ç”¨æˆ·è·ªå€’ä½ çš„çŸ³æ¦´è£™(ç‰›ä»”è£¤)ä¸‹ã€‚<br><a id="more"></a></p>
<h2 id="å›¾ç‰‡ä¼˜åŒ–çš„ä¸€èˆ¬æ–¹æ³•"><a href="#å›¾ç‰‡ä¼˜åŒ–çš„ä¸€èˆ¬æ–¹æ³•" class="headerlink" title="å›¾ç‰‡ä¼˜åŒ–çš„ä¸€èˆ¬æ–¹æ³•"></a>å›¾ç‰‡ä¼˜åŒ–çš„ä¸€èˆ¬æ–¹æ³•</h2><p> åœ¨æœ¬æ–‡æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œç¬”è€…å…ˆææå›¾ç‰‡ä¼˜åŒ–çš„ä¸€èˆ¬æ–¹æ³•ï¼Œäº†è§£å›¾ç‰‡ä¼˜åŒ–çš„æ–¹æ³•æœ‰åŠ©äºç†è§£åé¢å›¾ç‰‡åŠ è½½å®ç°å½¢å¼çš„å¤šæ ·åŒ–ã€‚<br> ä¸€èˆ¬å¸¸è§çš„å›¾ç‰‡ä¼˜åŒ–æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>å‡å°‘æ–‡ä»¶ä½“ç§¯å¤§å°</li>
<li>å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°(åˆå¹¶HTTPè¯·æ±‚)</li>
</ul>
<h3 id="å‡å°‘å›¾ç‰‡æ–‡ä»¶ä½“ç§¯å¤§å°"><a href="#å‡å°‘å›¾ç‰‡æ–‡ä»¶ä½“ç§¯å¤§å°" class="headerlink" title="å‡å°‘å›¾ç‰‡æ–‡ä»¶ä½“ç§¯å¤§å°"></a>å‡å°‘å›¾ç‰‡æ–‡ä»¶ä½“ç§¯å¤§å°</h3><p>å¯ä»¥ä»</p>
<ul>
<li>å‹ç¼©ä¼˜åŒ–å›¾ç‰‡å¤§å°</li>
<li>é‡‡ç”¨åˆé€‚çš„å›¾ç‰‡æ ¼å¼</li>
</ul>
<p>ä¸¤ä¸ªé€”å¾„æ¥è¿›è¡Œå¯¹ä½“ç§¯å¤§å°çš„ä¼˜åŒ–ã€‚<br>è¿™é‡Œæ¨èé˜…è¯»<a href="http://cabbit.me/web-image-optimization/" target="_blank" rel="external">ã€ŠWebæ€§èƒ½ä¼˜åŒ–ï¼šå›¾ç‰‡ä¼˜åŒ–ã€‹</a>ï¼Œåšä¸»åœ¨æ–‡ä¸­è®¨è®ºå¦‚ä½•æ›´ä¼˜åœ°é€‰æ‹©å›¾ç‰‡çš„æ°å½“æ ¼å¼ä»¥åŠæ¨èäº†ä¼˜åŒ–å›¾ç‰‡å¤§å°çš„å·¥å…·ã€‚</p>
<h3 id="å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°-åˆå¹¶HTTPè¯·æ±‚"><a href="#å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°-åˆå¹¶HTTPè¯·æ±‚" class="headerlink" title="å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°(åˆå¹¶HTTPè¯·æ±‚)"></a>å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°(åˆå¹¶HTTPè¯·æ±‚)</h3><p>å‡å°‘å›¾ç‰‡èµ„æºè¯·æ±‚æ•°(åˆå¹¶HTTPè¯·æ±‚)çš„é€”å¾„é™¤äº†æœ€ä¸ºæ™®éçš„</p>
<ul>
<li>åˆæˆé›ªç¢§å›¾</li>
</ul>
<p>è¿˜æœ‰</p>
<ul>
<li>ä½¿ç”¨DataURL</li>
</ul>
<p>è¿™é‡Œç‰¹åˆ«æä¸‹ï¼Œé‡‡ç”¨DataURLè¿™ç§æ–¹å¼å°†å›¾ç‰‡è¢«è½¬æ¢æˆbase64ç¼–ç çš„å­—ç¬¦ä¸²å½¢å¼çš„ï¼Œå¦‚æœå•çº¯åœ°â€œåµŒâ€å…¥HTMLä¸­æ˜¯ä¸ä¼šè¢«ç¼“å­˜çš„ï¼Œä½†æ˜¯åŠ åœ¨CSSæˆ–JSæ–‡ä»¶ä¸­ï¼Œé€šè¿‡ç¼“å­˜CSSæˆ–JSåˆ™è¾¾åˆ°äº†é—´æ¥ç¼“å­˜ä»¥base64ç¼–ç çš„å›¾ç‰‡ã€‚<br>è¿™é‡Œæ¨èä¸€ä¸ªå°†å›¾ç‰‡è½¬æ¢æˆBase64ç¼–ç çš„å­—ç¬¦ä¸²çš„åœ¨çº¿å·¥å…·ï¼š <a href="http://dataurl.net/#dataurlmaker" target="_blank" rel="external">DataURLMakeråœ¨çº¿å·¥å…·</a><br>å› ä¸ºæœ¬æ–‡çš„é‡ç‚¹ä¸åœ¨äºè®¨è®ºå›¾ç‰‡ä¼˜åŒ–çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç®€å•æ€»ç»“ä¸‹å¯¹å›¾ç‰‡è¿›è¡Œä¼˜åŒ–çš„æ–¹æ³•ï¼Œå¯¹äºæ›´è¯¦ç»†çš„å†…å®¹ï¼Œç¬”è€…åˆ™æŒ‰ä¸‹ä¸è¡¨äº†ã€‚<br>å¯¹äºè§¦å±é¡µé¢ä¸­å¸¸è§çš„çš„å›¾ç‰‡èµ„æºåŠ è½½æ–¹å¼ï¼Œç¬”è€…å½’çº³ä¸ºä¸‰ç±»ï¼šæ­£å¸¸åŠ è½½ã€é¢„åŠ è½½ã€æ‡’åŠ è½½ã€‚</p>
<h2 id="æ­£å¸¸åŠ è½½"><a href="#æ­£å¸¸åŠ è½½" class="headerlink" title="æ­£å¸¸åŠ è½½"></a>æ­£å¸¸åŠ è½½</h2><p>æ‰€è°“æ­£å¸¸åŠ è½½ï¼Œåˆ™æ˜¯å¼€å‘è€…ä¸é‡‡ç”¨äººä¸ºåœ°æ–¹å¼å»å¹²æ‰°ï¼ŒæŒ‰ç…§æµè§ˆå™¨æ­£å¸¸åŠ è½½çš„æ–¹å¼å»åŠ è½½æ¸²æŸ“é¡µé¢ã€‚<br>é€‚åˆé‡‡ç”¨æ­£å¸¸åŠ è½½çš„æ–¹å¼çš„æƒ…æ™¯æ˜¯å›¾ç‰‡æ•°é‡è¾ƒå°‘ä»¥åŠå›¾ç‰‡ä½“ç§¯è¾ƒå°ï¼Œå¯¹è§¦å±é¡µé¢å‘ˆç°çš„ç”¨æˆ·ä½“éªŒä¸å½±å“æˆ–å½±å“è¾ƒå°‘ã€‚<br>ä½†æ˜¯åœ¨ç°æœ‰çš„å¤§ç¯å¢ƒä¸­ï¼Œé™åˆ¶äºç½‘ç»œå®½å¸¦ç­‰å®¢è§‚çš„å› ç´ ï¼Œè€Œä¸”è§¦å±é¡µé¢çš„åä¸½ç‚«ç›®çš„è®¾è®¡éƒ½éœ€è¦ä¾é å›¾ç‰‡ï¼Œå•çº¯çš„CSSæ˜¯æ— æ³•æ»¡è¶³è¦æ±‚çš„ï¼Œå¯¹å›¾ç‰‡çš„åº”ç”¨è¿˜æ˜¯æœ‰ä¸€å®šé‡ã€‚<br>æ‰€ä»¥ï¼Œèƒ½å¤Ÿæ¯«æ— é¡¾å¿Œåœ°é‡‡ç”¨æ­£å¸¸åŠ è½½çš„æ–¹å¼çš„æ¡ˆä¾‹è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œç›®å‰ç¬”è€…æš‚æ—¶æ˜¯æ²¡æœ‰è§è¿‡ã€‚</p>
<h2 id="é¢„åŠ è½½"><a href="#é¢„åŠ è½½" class="headerlink" title="é¢„åŠ è½½"></a>é¢„åŠ è½½</h2><p>åœ¨è§¦å±é¡µé¢å¤„ç†ä¸­æœ€ä¸ºå¸¸è§çš„å¯ä»¥æ˜¯è¯´é¢„åŠ è½½ï¼Œå‡ ä¹æ¯ä¸ªè§¦å±é¡µé¢çš„æ¡ˆä¾‹éƒ½ä½¿ç”¨åˆ°äº†è¿™ç§æ–¹å¼ã€‚<br>ä¸ºäº†å®Œæ•´åœ°å‘ˆç°é¡µé¢ç»™ç”¨æˆ·ï¼Œå¼€å‘è€…ä¼šé€šè¿‡ä¸€å®šçš„æŠ€æœ¯é¢„å…ˆåŠ è½½å›¾ç‰‡èµ„æºï¼ˆä»¥åŠé¡µé¢å…¶å®ƒèµ„æºï¼‰ï¼Œç­‰åŠ è½½æ¸²æŸ“å®Œæ¯•å†æŠŠé¡µé¢å‘ˆç°ç»™ç”¨æˆ·ã€‚<br>è€Œæ ¹æ®è¿™ä¸ªé¢„åŠ è½½çš„è¿‡ç¨‹æ˜¯å¦æœ‰æ˜æ˜¾çš„è¿›åº¦æç¤ºï¼Œç¬”è€…æŠŠå¸¸è§çš„é¢„åŠ è½½æ–¹å¼åˆ’åˆ†ä¸ºä¸¤ç§å½¢å¼ï¼š</p>
<ul>
<li>æ˜¾æ€§é¢„åŠ è½½</li>
<li>éšæ€§é¢„åŠ è½½</li>
</ul>
<h3 id="æ˜¾æ€§é¢„åŠ è½½"><a href="#æ˜¾æ€§é¢„åŠ è½½" class="headerlink" title="æ˜¾æ€§é¢„åŠ è½½"></a>æ˜¾æ€§é¢„åŠ è½½</h3><p>æ˜¾æ€§é¢„åŠ è½½æŒ‡çš„åˆ™æ˜¯å¤„äºé¢„åŠ è½½è¿‡ç¨‹æ—¶é¡µé¢æœ‰æ˜ç¡®çš„åŠ è½½æç¤ºï¼Œæ¯”å¦‚è¿›åº¦æ¡æˆ–è€…æ˜¯Loadingå›¾æ ‡ã€‚<br>è­¬å¦‚ï¼Œæˆ‘å‚çš„è§¦å±é¡µé¢æ¡ˆä¾‹ã€Šç‚¹ç‡ƒä½ å¿ƒä¸­çš„é‡å…½ã€‹ï¼Œåœ¨é¢„åŠ è½½è¿‡ç¨‹æç¤ºåŠ è½½çš„è¿›åº¦ï¼Œè®©ç”¨æˆ·æœ‰ä¸ªå¿ƒç†é¢„æœŸï¼Œå‡å°‘ç­‰å¾…çš„çƒ¦èºæ„Ÿã€‚</p>
<blockquote>
<p>ä»¥ä¸‹æˆªå›¾æ¥æºè‡ªäº¬ä¸œçš„<a href="http://wqs.jd.com/promote/CH77/2015/paper/index.html" target="_blank" rel="external">ã€Šç‚¹ç‡ƒä½ å¿ƒä¸­çš„é‡å…½ã€‹</a><br><img src="//img.aotu.io/Tingglelaoo/20160302/yeshou.png" alt="img" style="display:inline-block;max-width:200px;max-height:200px;width:100%;"></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160302/paper.png" alt="img" style="display:block;width:100%;max-width:320px;margin:0 auto;"><br>è¿™ä¸ªæ¡ˆä¾‹ä¸‹çš„é¢„åŠ è½½å¤„ç†æŠ€æœ¯æ˜¯ï¼Œå…ˆæŠŠé¡µé¢DOMç»“æ„æ”¾å…¥JSæ¨¡ç‰ˆä¸­ï¼Œé¢„åŠ è½½å®Œæˆåå†æŠŠé¡µé¢ä»JSæ¨¡ç‰ˆæ‹å‡ºæ¥ï¼Œé¡µé¢æ¸²æŸ“å®Œåèƒ½å¤Ÿå®Œæ•´åœ°å‘ˆç°é¡µé¢ç»™ç”¨æˆ·ã€‚<br>å…¶ä¸­ï¼Œå›¾ç‰‡èµ„æºç›¸å…³é¢„åŠ è½½å¤„ç†ä»£ç æ®µä¸ºï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">PreLoad.prototype.image = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">       <span class="keyword">var</span> b = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</div><div class="line">       b.src = a</div><div class="line">       ...</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡åˆ›å»ºimageå…ƒç´ ï¼Œè®¾ç½®å…¶srcï¼Œå°±ç®€å•æ–¹ä¾¿å¯ä»¥é¢„å…ˆå‘èµ·HTTPè¯·æ±‚ï¼Œå®ç°é¢„åŠ è½½å›¾ç‰‡ã€‚<br>é™¤äº†å¯¹png/jpgç­‰æ ¼å¼å›¾ç‰‡èƒ½å¤Ÿåˆ©ç”¨ä»¥ä¸Šæ–¹æ³•å®ç°é¢„åŠ è½½ï¼Œå¯¹äºDataURLè½¬æ¢å›¾ç‰‡ä¸ºbase64ç¼–ç çš„å­—ç¬¦ä¸²ä¹Ÿèƒ½å¤Ÿå®ç°é¢„åŠ è½½ã€‚<br>  åœ¨Adidasçš„ã€Šç½—æ–¯Â·å†³ä¸å‡‹è°¢ã€‹ä¸­ï¼Œåˆ©ç”¨DataURLåè®®å°†å›¾ç‰‡è½¬æ¢æˆbase64ç¼–ç çš„å­—ç¬¦ä¸²å†™å…¥JSä¸­ï¼Œé¢„åŠ è½½JSæ–‡ä»¶å®Œæˆåé€šè¿‡JSæ¥è¿›è¡Œå†…è”åœ¨DOMå…ƒç´ ä¸­ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹æˆªå›¾æ¥è‡ªæ¡ˆä¾‹<a href="http://drose6.adidasevent.com/]" target="_blank" rel="external">ã€ŠAdidasï¼šç½—æ–¯Â·å†³ä¸å‡‹è°¢ã€‹</a>![img](//img.aotu.io/Tingglelaoo/20160302/rose.png â€˜ç¤ºä¾‹å›¾ç‰‡â€™ â€˜{â€œstyleâ€:â€display:inline-block;max-width:200px;max-height:200px;width:100%;â€}â€™ %}</p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160302/drose6.png" alt="img" style="display:block;width:100%;max-width:320px;margin:0 auto;"></p>
<p>è¿™é‡Œè´´å‡ºè¯¥æ¡ˆä¾‹ä¸­éƒ¨åˆ†é¢„åŠ è½½å¤„ç†ä»£ç ä»£ç ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è¯¦è§0.main.jsã€2.main.jsã€3.main.jså¤„æ·±å…¥ç ”ç©¶ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹ä¸ºChrome Dev Tool å¯¹æ¡ˆä¾‹èµ„æºæŸ¥çœ‹çš„ç•Œé¢æˆªå›¾</p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160302/drose6-code.png" alt="img" style="display:block;width:100%;"></p>
<p>è™½ç„¶ï¼Œä¸šç•Œæœ‰ä¸€ç§è¯´æ³•æ˜¯ä¸å»ºè®®åœ¨ç§»åŠ¨ç«¯å¼€å‘ä¸­ä½¿ç”¨DataURLè½¬æ¢å›¾ç‰‡ä¸ºbase64ç¼–ç çš„åšæ³•ï¼Œå› ä¸ºå¯¹å¤§é‡çš„base64å›¾ç‰‡è§£ç æ¯”è¾ƒæŸè€—å†…å­˜å’Œæ€§èƒ½ï¼Œä½†æ˜¯ä½¿ç”¨base64åœ¨ä¸€å®šæ¡ä»¶ä¸‹æ˜¯æœ‰åŠ©äºé¡µé¢åŠ è½½é€Ÿåº¦æå‡ï¼Œå…·ä½“çš„åŸç”±å¯ä»¥å‰å¾€<a href="http://aotu.io/notes/2016/03/04/can-we-use-base64-in-h5-webapps/">ã€Šå›¾ç‰‡èµ„æºBase64åŒ–åœ¨H5é¡µé¢é‡Œæœ‰ç”¨æ­¦ä¹‹åœ°å—ï¼Ÿã€‹</a>é˜…è¯»ã€‚</p>
<h3 id="éšæ€§é¢„åŠ è½½"><a href="#éšæ€§é¢„åŠ è½½" class="headerlink" title="éšæ€§é¢„åŠ è½½"></a>éšæ€§é¢„åŠ è½½</h3><p>é™¤äº†æ˜ç¡®çš„é¢„åŠ è½½æç¤ºï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡æ¨è¿›è§¦å±é¡µé¢è¿›åº¦çš„è¶£å‘³äº’åŠ¨çš„æ–¹å¼ï¼Œç¬”è€…ç§°ä¹‹æ­¤ç§ç±»ä¼¼çš„æƒ…å†µä¸ºéšæ€§é¢„åŠ è½½ã€‚</p>
<blockquote>
<p>æˆªå›¾æ¥è‡ªæ¡ˆä¾‹<a href="http://evt.dianping.com/market/20151207/" target="_blank" rel="external">ã€Šå¤§ä¼—ç‚¹è¯„ï¼šé˜¿æƒ æ•…äº‹1 - åƒé¥­åˆ«å¸¦å§¥çˆ·ã€‹</a>![img](//img.aotu.io/Tingglelaoo/20160302/ahui.png â€˜ç¤ºä¾‹å›¾ç‰‡â€™ â€˜{â€œstyleâ€:â€display:inline-block;max-width:200px;max-height:200px;width:100%;â€}â€™ %}</p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160302/hui-loading.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="display:block;width:100%;max-width:640px;margin:0 auto;"></p>
<p>åœ¨å¤§ä¼—ç‚¹è¯„çš„ã€Šé˜¿æƒ æ•…äº‹1 - åƒé¥­åˆ«å¸¦å§¥çˆ·ã€‹çš„é¢„åŠ è½½ä¸­ï¼Œå…ˆæ˜¯æ˜¾æ€§é¢„åŠ è½½(é’±å¸å°å›¾æ ‡Loding)å¿«é€Ÿåœ°å‘ˆç°éƒ¨åˆ†ç”»é¢(æˆªå›¾å³éƒ¨åˆ†)ç»™ç”¨æˆ·ï¼Œå†é€šè¿‡äº’åŠ¨(å‘ä¸Šæ»‘åŠ¨æ•°é’±)æ¥ç»§ç»­åˆ†æ®µåŠ è½½èµ„æºã€‚è¿™æ ·çš„åšæ³•ä¸€æ”¹ç”¨æˆ·å¾€æ—¥æ²‰é—·çš„ç­‰å¾…ï¼Œèƒ½å¤Ÿç»™äºˆç”¨æˆ·æ›´å¥½çš„ä½“éªŒã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„æ¡ˆä¾‹æ˜¯å¤§ä¼—ç‚¹è¯„å’Œæ¬§è±é›…åˆä½œçš„ã€Šå¥½å¹´ä»å¤´å¼€å§‹ã€‹ï¼Œç¬”è€…ä¹Ÿå°†ä¹‹å½’çº³ä¸ºéšæ€§é¢„åŠ è½½ã€‚</p>
<blockquote>
<p>æˆªå›¾æ¥æºäºæ¡ˆä¾‹<a href="http://evt.dianping.com/midas/160108-loreal/index.html" target="_blank" rel="external">ã€Šå¤§ä¼—ç‚¹è¯„ï¼šå¥½å¹´ä»å¤´å¼€å§‹ã€‹</a><br><img src="//img.aotu.io/Tingglelaoo/20160302/oulaiya.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="display:inline-block;max-width:200px;max-height:200px;width:100%;"></p>
</blockquote>
<p><img src="//img.aotu.io/Tingglelaoo/20160302/head-loading.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="display:block;width:100%;max-width:640px;margin:0 auto;"></p>
<p>åœ¨è¿™é‡Œï¼Œå¼€å‘è€…å…ˆé¢„åŠ è½½äº†éƒ¨åˆ†å›¾ç‰‡ä»¥å‘ˆç°é¦–å±ç”»é¢ç»™ç”¨æˆ·ï¼ŒåŒæ—¶å›¾ç‰‡é¢„åŠ è½½ä¾ç„¶åœ¨è¿›è¡Œï¼Œå½“ç”¨æˆ·è§¦å‘çš„é¡µé¢å†…çš„å›¾ç‰‡èµ„æºè¿˜æœªåŠ è½½å®Œæ—¶åˆ™ä¼šæ˜¾ç¤ºè¿›åº¦æ¡ï¼ŒåŠ è½½å®Œæ¯•åˆ™å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªç”»é¢ã€‚</p>
<p>ç¬”è€…è§‰å¾—é‡‡ç”¨è¿™ç§æ–¹å¼çš„åŸå› æœ‰äºŒï¼Œç¬¬ä¸€ï¼Œé¡µé¢å†…å®¹éœ€è¦åŠ è½½çš„èµ„æºè¿‡å¤šï¼Œè‹¥ç­‰å¾…å…¨éƒ¨åŠ è½½å®Œæ¯•æ‰€éœ€æ—¶é—´è€—è´¹è¿‡é•¿ï¼Œå®¹æ˜“å¯¼è‡´æµå¤±ç”¨æˆ·ï¼›ç¬¬äºŒï¼Œé¡µé¢å†…å®¹è¶³å¤Ÿå¸å¼•ï¼Œå³æ—¶åœ¨äº¤äº’è¿‡ç¨‹ä¸­æ’å…¥ç­‰å¾…è¿‡ç¨‹ï¼Œç”¨æˆ·ä¹Ÿæ„¿æ„å»ç­‰å¾…ã€‚</p>
<h2 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h2><p>æ‡’åŠ è½½ï¼Œåˆç§°ä¸ºå»¶è¿ŸåŠ è½½ã€æŒ‰éœ€åŠ è½½ã€‚æŒ‡çš„æ˜¯å›¾ç‰‡åœ¨é¡µé¢æ¸²æŸ“çš„æ—¶å€™å…ˆä¸åŠ è½½ï¼Œé¡µé¢æ¸²æŸ“å®Œæˆååœ¨æŒ‡å®šåŠ¨ä½œè§¦å‘åå†åŠ è½½å›¾ç‰‡ã€‚<br>è¿™ç§æ–¹å¼é€šå¸¸æ¯”è¾ƒåˆé€‚äºç¯‡å¹…è¾ƒé•¿çš„é¡µé¢ï¼Œå¹¶ä¸”å›¾ç‰‡å†…å®¹çš„é‡è¦æ€§ä½äºé¡µé¢ä¿¡æ¯å†…å®¹ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ°å…ˆå°†é‡è¦çš„é¡µé¢ä¿¡æ¯å‘ˆç°ç»™ç”¨æˆ·ã€‚<br>è­¬å¦‚ï¼Œè¿™ç§æ–¹å¼åˆ™åº”ç”¨äºç”µå•†å•†å“ä¿¡æ¯é›†åˆé¡µé¢ï¼ŒåŒæ—¶ä¹Ÿå¸¸ç”¨äºæ–‡ç« é˜…è¯»çš„æƒ…æ™¯ä¸‹ã€‚é™¤äº†åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨åœºæ™¯ä¹‹å¤–ï¼Œåœ¨PCç«¯æ‡’åŠ è½½ä¹Ÿæ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§å›¾ç‰‡åŠ è½½ä¼˜åŒ–æ–¹å¼ã€‚<br>æœ€ä¸ºå¸¸è§çš„ä¸€ç§æ‡’åŠ è½½æŠ€æœ¯æ˜¯ä»¥å¯è§è·ç¦»ä½œä¸ºè§¦å‘ç‚¹ã€‚å½“é¡µé¢æ»‘åŠ¨åˆ°å±å¹•å¯è§åŒºåŸŸæ—¶ï¼Œåˆ™è¿›è¡ŒåŠ è½½å›¾ç‰‡ã€‚å®ç°çš„åŸç†æ˜¯ï¼š</p>
<ul>
<li>å…ˆå°†å›¾ç‰‡çš„å®é™…srcï¼Œè®°å½•åœ¨data-setå±æ€§ä¸­ã€‚</li>
<li>ç›‘å¬å±å¹•æ»šåŠ¨ï¼Œè®¡ç®—å›¾ç‰‡çš„Yåæ ‡ï¼Œå¹¶è®¡ç®—å¯è§†åŒºåŸŸçš„é«˜åº¦heightï¼Œå½“Yå°äºç­‰äº(height+scrollTop)æ—¶ï¼Œå›¾ç‰‡çš„srcçš„å€¼ç”¨data-srcçš„æ¥æ›¿æ¢ï¼Œä»è€Œæ¥å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½ã€‚</li>
</ul>
<p>å…·ä½“å¯ä»¥å‰å¾€<a href="http://jdc.jd.com/h5/case/maga.html" target="_blank" rel="external">æ‹‡æŒ‡æœŸåˆŠ</a>ç‚¹å‡»æ–‡ç« é˜…è¯»ä½“éªŒå–”ã€‚</p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>  å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸¦ç»™è¯»è€…ä¸€äº›å¯å‘ã€‚å¹¶ä¸æ˜¯æŸä¸€ç§æ¡ˆä¾‹åªä½¿ç”¨ä¸€ç§åŠ è½½æ–¹å¼ã€‚åŒæ—¶ï¼Œä¹Ÿä¸æ˜¯è§¦å±é¡µé¢çš„åŠ è½½æ–¹å¼ä»…é™äºä»¥ä¸Šæ–¹æ³•ä¹‹ä¸€ã€‚<br>  è¿™é‡Œä»…æ˜¯åˆ—ä¸¾å¹¶è®¨è®ºå¸¸è§çš„åŠ è½½æ–¹å¼ï¼Œå‡¡äº‹è®²ç©¶å®è·µå‡ºçœŸçŸ¥ï¼Œåœ¨å®è·µçš„æ—¶å€™å¿…ç„¶ä¼šæœ‰æ›´åŠ åˆ‡åˆå…·ä½“æ¡ˆä¾‹çš„å¥½æ–¹æ³•ã€‚<br>  Keep Movingï¼Œåœ¨è§¦å±é¡µé¢çš„å¼€å‘ä¸­ï¼Œå…´è®¸è¿˜æœ‰æ›´å¤šæ›´ä¼˜ç§€çš„å›¾ç‰‡èµ„æºåŠ è½½æ–¹å¼ç­‰ç€æˆ‘ä»¬å»å‘æ˜ã€‚</p>
<blockquote>
<p> æ–‡ä¸­æ¡ˆä¾‹æœé›†å‡æ¥æºäº<a href="http://www.digitaling.com/projects" target="_blank" rel="external">æ•°è‹±ç½‘</a>:)</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚æœä½ é—®æˆ‘æ„å»ºè§¦å±é¡µé¢çš„è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆå›°éš¾çš„ï¼Ÿ&lt;br&gt;æˆ‘å¯ä»¥æ‹ç€èƒ¸å£è·Ÿå¯ä»¥è·Ÿä½ è®²ï¼Œæœ‰ä¸‰å¤§é—®é¢˜ï¼é‚£å°±æ˜¯å›¾ç‰‡ã€å›¾ç‰‡ã€å›¾ç‰‡ã€‚&lt;br&gt;å°¤å…¶æ˜¯é¢å¯¹æ´»åŠ¨è¿è¥ä¾§çš„éœ€æ±‚çš„æ—¶å€™ï¼Œè¿å¦ˆå¦ˆéƒ½è¦é—®æˆ‘ä¸ºä»€ä¹ˆè¦è·ªç€åšéœ€æ±‚ã€‚&lt;br&gt;ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæ€»æœ‰ä¸€ä¸ªèåœé€‚åˆä½ çš„å‘ã€‚ä»Šå¤©å°±æ¥è®©å›¾ç‰‡åŠ è½½è¿™ä»¶äº‹å„¿å˜å¾—æ›´ç¾å¥½ï¼Œè®©ç”¨æˆ·è·ªå€’ä½ çš„çŸ³æ¦´è£™(ç‰›ä»”è£¤)ä¸‹ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://aotu.io/cates/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="Images" scheme="https://aotu.io/tags/Images/"/>
    
      <category term="Load" scheme="https://aotu.io/tags/Load/"/>
    
      <category term="optimize" scheme="https://aotu.io/tags/optimize/"/>
    
      <category term="Mobile" scheme="https://aotu.io/tags/Mobile/"/>
    
  </entry>
  
  <entry>
    <title>å›¾ç‰‡èµ„æºBase64åŒ–åœ¨H5é¡µé¢é‡Œæœ‰ç”¨æ­¦ä¹‹åœ°å—ï¼Ÿ</title>
    <link href="https://aotu.io/notes/2016/03/04/can-we-use-base64-in-h5-webapps/"/>
    <id>https://aotu.io/notes/2016/03/04/can-we-use-base64-in-h5-webapps/</id>
    <published>2016-03-04T09:45:03.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>å°†å›¾ç‰‡èµ„æºè½¬è‡³base64æ ¼å¼åå¯ç›´æ¥æ”¾å…¥é¡µé¢ä½œä¸ºé¦–å±ç›´å‡ºï¼Œä¹Ÿå¯ä»¥æ”¾å…¥cssæ–‡ä»¶ä¸­ï¼Œå‡å°‘è¯·æ±‚ï¼Œä»¥åŠ å¿«é¦–å±çš„å‘ˆç°é€Ÿåº¦ã€‚<br>ä¸è¿‡å›¾ç‰‡base64åŒ–ï¼Œå°†å¸¦æ¥ä¸€ä¸ªè‡ƒè‚¿çš„htmlæˆ–cssæ–‡ä»¶ï¼Œæ˜¯å¦ä¼šå½±å“é¡µé¢çš„æ¸²æŸ“æ€§èƒ½ï¼Œæµè§ˆå™¨åˆæ”¯æŒå¦‚ä½•å‘¢ï¼Ÿ</p>
<h3 id="å¦‚ä½•ç»Ÿè®¡ï¼Ÿ"><a href="#å¦‚ä½•ç»Ÿè®¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç»Ÿè®¡ï¼Ÿ"></a>å¦‚ä½•ç»Ÿè®¡ï¼Ÿ</h3><blockquote>
<p>é€šè¿‡Navigation Timingè®°å½•çš„å…³é”®æ—¶é—´ç‚¹æ¥ç»Ÿè®¡é¡µé¢å®Œæˆæ‰€ç”¨çš„æ—¶é—´ï¼Œå¹¶é€šè¿‡Chromeå¼€å‘å·¥å…·æ¥è·Ÿè¸ªç»†èŠ‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> timing = <span class="built_in">window</span>.performance.timing</div><div class="line">timing.domLoading  <span class="comment">//æµè§ˆå™¨å¼€å§‹è§£æ HTML æ–‡æ¡£ç¬¬ä¸€æ‰¹æ”¶åˆ°çš„å­—èŠ‚</span></div><div class="line">timing.domInteractive  <span class="comment">//  æµè§ˆå™¨å®Œæˆè§£æå¹¶ä¸”æ‰€æœ‰ HTML å’Œ DOM æ„å»ºå®Œæ¯•timing.domContentLoadedEventStart //DOM è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å¼€å§‹çš„æ—¶é—´</span></div><div class="line">timing.domContentLoadedEventEnd <span class="comment">//DOM è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å®Œæˆçš„æ—¶é—´ï¼ˆå¦‚ JS è„šæœ¬åŠ è½½æ‰§è¡Œå®Œæ¯•ï¼‰</span></div><div class="line">timing.domComplete <span class="comment">//ç½‘é¡µä¸Šæ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ç­‰ï¼‰ ä¸‹è½½å®Œæˆ,ä¸”å‡†å¤‡å°±ç»ªçš„æ—¶é—´</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šå®šä¹‰æ¥è‡ª<a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/measure-crp?hl=zh-cn" target="_blank" rel="external">chromeå®˜æ–¹æ–‡æ¡£</a>ï¼Œåœ¨å…¶å®ƒç¯å¢ƒä¸‹ä¹Ÿè®¸ä¼šæœ‰å·®å¼‚ï¼Œä»æµ‹è¯•ç»“æœçœ‹ï¼Œä¸‹é¢çš„buildæ—¶é—´åœ¨android+å¾®ä¿¡ç¯å¢ƒä¸­ä¸€ç›´æ˜¯0ï¼Œå¯¹æ­¤å¯èƒ½æ˜¯å› ä¸ºæ¸²æŸ“æœºåˆ¶å·®åˆ«ï¼Œæ­¤å¤„ä¸åšæ·±å…¥æµ‹è¯•ã€‚é™¤osx+chromeä¹‹å¤–ç¯å¢ƒçš„æ•°æ®ä»…ä½œå‚è€ƒã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">build = timing.domComplete - timing.domContentLoadedEventStart <span class="comment">//é—´éš”è®°å½•ç½‘é¡µå†…èµ„æºåŠ è½½å’Œå‘ˆç°æ—¶é—´ã€‚</span></div><div class="line">complete = timing.domComplete - timing.domLoading <span class="comment">//é¡µé¢æ¥æ”¶åˆ°æ•°æ®å¼€å§‹åˆ°å‘ˆç°å®Œæ¯•çš„æ€»æ—¶é—´ã€‚</span></div></pre></td></tr></table></figure>
<h2 id="åœºæ™¯1ï¼Œå†…åµŒè‡³cssæ–‡ä»¶ä¸­"><a href="#åœºæ™¯1ï¼Œå†…åµŒè‡³cssæ–‡ä»¶ä¸­" class="headerlink" title="åœºæ™¯1ï¼Œå†…åµŒè‡³cssæ–‡ä»¶ä¸­"></a>åœºæ™¯1ï¼Œå†…åµŒè‡³cssæ–‡ä»¶ä¸­</h2><h4 id="1ã€åŸç”Ÿå¼•å…¥å›¾ç‰‡é“¾æ¥åšèƒŒæ™¯å›¾"><a href="#1ã€åŸç”Ÿå¼•å…¥å›¾ç‰‡é“¾æ¥åšèƒŒæ™¯å›¾" class="headerlink" title="1ã€åŸç”Ÿå¼•å…¥å›¾ç‰‡é“¾æ¥åšèƒŒæ™¯å›¾"></a>1ã€åŸç”Ÿå¼•å…¥å›¾ç‰‡é“¾æ¥åšèƒŒæ™¯å›¾</h4><p>ä¸€å¼ å¤§å°ä¸º<strong>50kb</strong>çš„<strong>jpgæ ¼å¼</strong>å›¾ç‰‡ï¼Œåº”ç”¨åˆ°9x15=135ä¸ªdomåšèƒŒæ™¯å›¾ï¼Œæ¨¡æ‹Ÿé›ªç¢§å›¾çš„æ¨¡å¼ï¼Œå¤šä¸ªèŠ‚ç‚¹å¼•ç”¨åŒä¸€å¼ å›¾ç‰‡åšèƒŒæ™¯ï¼Œï¼ˆç¤ºä¾‹ï¼‰å¦‚å›¾ã€‚<br><img src="//img.aotu.io/Simbachen/base64/1455676041355.png" alt="img"><br><code>æµ‹è¯•ç¯å¢ƒ</code>ï¼šMac OS X EI Capitan 10.xx + Chrome 48.xx<br><code>å…¶å®ƒè¾…åŠ©æµ‹è¯•æœºå™¨</code>ï¼š  iPhone 6 plus iOS 9.xxï¼› é­…æ—Note Android 4.xx</p>
<blockquote>
<p>å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå…¶å®ƒç‰ˆæœ¬å’Œæœºå‹çš„Androidæ‰‹æœºè¿˜æœ‰å¾…æµ‹è¯•</p>
</blockquote>
<p>å…³é—­ç¼“å­˜çŠ¶æ€ä¸‹ï¼Œbuild:150ms | complete: 200msï¼ˆæ€»æ—¶é—´å—ç½‘ç»œçŠ¶æ€ç­‰å› ç´ å½±å“ï¼Œæ•°æ®åšæ¯”è¾ƒç”¨ï¼‰<br><img src="//img.aotu.io/Simbachen/base64/1455624301638.png" alt="img"></p>
<p>å¼€å¯ç¼“å­˜çŠ¶æ€ä¸‹ï¼Œbuild: 7ms |  complete: 59msï¼ˆåŒ…æ‹¬ä»¥ä¸‹ç¨³å®šçŠ¶æ€ä¸‹å¤šæ¬¡æµ‹è¯•çš„å¹³å‡å€¼ï¼Œæˆªå›¾ä¸ºæœ€æ¥è¿‘å¹³å‡å€¼çš„çŠ¶æ€ï¼Œé»˜è®¤æ•°æ®æ¥è‡ªMac+Chrome[48.XXç‰ˆæœ¬]ï¼‰</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455624345624.png" alt="img"></p>
<table>
<thead>
<tr>
<th style="text-align:left">æµ‹è¯•ç¯å¢ƒ</th>
<th style="text-align:center">build(å•ä½:ms)</th>
<th style="text-align:center">complete(å•ä½:ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">OS X+Chrome</td>
<td style="text-align:center">7</td>
<td style="text-align:center">59</td>
</tr>
<tr>
<td style="text-align:left">iOS+å¾®ä¿¡</td>
<td style="text-align:center">45</td>
<td style="text-align:center">90</td>
</tr>
<tr>
<td style="text-align:left">OS X+Safari</td>
<td style="text-align:center">50</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:left">Android+å¾®ä¿¡</td>
<td style="text-align:center">0</td>
<td style="text-align:center">120</td>
</tr>
</tbody>
</table>
<h4 id="2ã€å¼•å…¥base64æ ¼å¼å›¾ç‰‡åšèƒŒæ™¯å›¾"><a href="#2ã€å¼•å…¥base64æ ¼å¼å›¾ç‰‡åšèƒŒæ™¯å›¾" class="headerlink" title="2ã€å¼•å…¥base64æ ¼å¼å›¾ç‰‡åšèƒŒæ™¯å›¾"></a>2ã€å¼•å…¥base64æ ¼å¼å›¾ç‰‡åšèƒŒæ™¯å›¾</h4><p>å°†ä¸Šé¢50kbå¤§å°çš„jpgå›¾ç‰‡è½¬æ¢ä¸ºbase64æ ¼å¼ï¼ŒåŠ åœ¨cssæ–‡ä»¶ä¸­ã€‚</p>
<p>å…³é—­ç¼“å­˜çŠ¶æ€ä¸‹ï¼Œbuild:80ms | complete: 280ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455629551042.png" alt="img"><br>å¼€å¯ç¼“å­˜çŠ¶æ€ä¸‹ï¼Œbuild: 160ms |  complete: 210ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455629572545.png" alt="img"></p>
<table>
<thead>
<tr>
<th style="text-align:left">æµ‹è¯•ç¯å¢ƒ</th>
<th style="text-align:center">build(å•ä½:ms)</th>
<th style="text-align:center">complete(å•ä½:ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">OS X+chrome</td>
<td style="text-align:center">160</td>
<td style="text-align:center">210</td>
</tr>
<tr>
<td style="text-align:left">iOS+å¾®ä¿¡</td>
<td style="text-align:center">35</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:left">OS X+Safari</td>
<td style="text-align:center">9</td>
<td style="text-align:center">90</td>
</tr>
<tr>
<td style="text-align:left">Android+å¾®ä¿¡</td>
<td style="text-align:center">12</td>
<td style="text-align:center">150</td>
</tr>
</tbody>
</table>
<h4 id="3ã€è°ƒæ•´å›¾ç‰‡ä½“ç§¯"><a href="#3ã€è°ƒæ•´å›¾ç‰‡ä½“ç§¯" class="headerlink" title="3ã€è°ƒæ•´å›¾ç‰‡ä½“ç§¯"></a>3ã€è°ƒæ•´å›¾ç‰‡ä½“ç§¯</h4><p>è°ƒæ•´ä¸Šé¢å›¾ç‰‡çš„ï¼ˆå‹ç¼©å“è´¨ï¼‰ä½“ç§¯ï¼Œbase64åŒ–åï¼Œå¯¹åº”çš„cssæ–‡ä»¶å¤§å°ä¹Ÿè·Ÿç€æ”¹å˜</p>
<table>
<thead>
<tr>
<th style="text-align:left">å›¾ç‰‡å¤§å°</th>
<th style="text-align:center">10kb</th>
<th style="text-align:center">20kb</th>
<th style="text-align:center">45kb</th>
<th style="text-align:center">100kb</th>
<th style="text-align:center">180kb</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å¯¹åº”cssæ–‡ä»¶å¤§å°</td>
<td style="text-align:center">27kb</td>
<td style="text-align:center">42kb</td>
<td style="text-align:center">76kb</td>
<td style="text-align:center">150kb</td>
<td style="text-align:center">260kb</td>
</tr>
<tr>
<td style="text-align:left">Renderingæ—¶é—´</td>
<td style="text-align:center">30ms</td>
<td style="text-align:center">46ms</td>
<td style="text-align:center">81ms</td>
<td style="text-align:center">156ms</td>
<td style="text-align:center">258ms</td>
</tr>
</tbody>
</table>
<p><img src="//img.aotu.io/Simbachen/base64/data1.png" alt="img"></p>
<h4 id="4ã€è°ƒæ•´å¼•ç”¨æ¬¡æ•°"><a href="#4ã€è°ƒæ•´å¼•ç”¨æ¬¡æ•°" class="headerlink" title="4ã€è°ƒæ•´å¼•ç”¨æ¬¡æ•°"></a>4ã€è°ƒæ•´å¼•ç”¨æ¬¡æ•°</h4><p>50kbå¤§å°çš„å›¾ç‰‡ï¼Œbase64åŒ–åï¼Œè°ƒæ•´å¼•ç”¨å›¾ç‰‡åšèƒŒæ™¯å›¾çš„domçš„ä¸ªæ•°</p>
<table>
<thead>
<tr>
<th style="text-align:left">å¼•ç”¨æ¬¡æ•°</th>
<th style="text-align:center">10</th>
<th style="text-align:center">20</th>
<th style="text-align:center">50</th>
<th style="text-align:center">100</th>
<th style="text-align:center">135</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Renderingæ—¶é—´</td>
<td style="text-align:center">15ms</td>
<td style="text-align:center">19ms</td>
<td style="text-align:center">44ms</td>
<td style="text-align:center">74ms</td>
<td style="text-align:center">83ms</td>
</tr>
</tbody>
</table>
<p><img src="//img.aotu.io/Simbachen/base64/data2.png" alt="img"></p>
<h4 id="åˆ†æå’Œå°ç»“ï¼š"><a href="#åˆ†æå’Œå°ç»“ï¼š" class="headerlink" title="åˆ†æå’Œå°ç»“ï¼š"></a>åˆ†æå’Œå°ç»“ï¼š</h4><p>åœ¨OSX+Chromeç¯å¢ƒä¸‹ï¼Œå°†50kbçš„å›¾ç‰‡base64åæ”¾å…¥æ ·å¼ä¸­ï¼Œbuildè¿‡ç¨‹æ‹‰é•¿äº†çº¦20å€ï¼Œä½¿ç”¨Timelineå·¥å…·å¯ä»¥çœ‹åˆ°ï¼Œè®¡ç®—æ ·å¼é˜»å¡äº†æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455634381569.png" alt="img"></p>
<ol>
<li>æ¯”èµ·ç›´æ¥å¼•å…¥å›¾ç‰‡åœ°å€ï¼Œcssæ–‡ä»¶ä¸­å¼•å…¥base64æ ¼å¼çš„å›¾ç‰‡å¯¹æ ·å¼æ¸²æŸ“çš„æ€§èƒ½æ¶ˆè€—æ˜æ˜¾ï¼Œå¦‚æœå¤§é‡ä½¿ç”¨ï¼Œä¼šå¸¦æ¥è€—ç”µå’Œå‘çƒ­çš„é—®é¢˜ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</li>
<li>Renderingæ¶ˆè€—çš„æ—¶é—´åŒcssæ–‡ä»¶å¤§å°ã€å¼•ç”¨æ¬¡æ•°å‡ ä¹æˆæ­£æ¯”ï¼ˆæœªæµ‹è¯•å…¶å®ƒæé™æƒ…å†µï¼‰ï¼Œåœ¨ç½‘ç»œæ¡ä»¶ä¼˜è´¨çš„4Gç¯å¢ƒï¼Œ50~70msçš„RTT(å¾€è¿”æ—¶å»¶ï¼‰æƒ…å†µä¸‹ï¼Œé€šå¸¸ç§»åŠ¨ç½‘ç»œçš„çŠ¶å†µä¼šæ›´å·®ï¼Œå¯¹äºé¦–å±ä¼˜åŒ–ï¼Œåˆé€‚çš„ä½¿ç”¨è¿˜æ˜¯å¾ˆå€¼å¾—çš„ã€‚</li>
<li>å›¾ç‰‡è½¬æˆbase64ç¼–ç åï¼Œæ–‡æ¡£å¤§å°è¾ƒåŸæ–‡ä»¶å¤§äº†ä¸€äº›ï¼Œè€Œç»è¿‡ gzip åä¸¤è€…å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚</li>
</ol>
<h2 id="åœºæ™¯2ï¼Œå†…åµŒè‡³jsæ–‡ä»¶ä¸­"><a href="#åœºæ™¯2ï¼Œå†…åµŒè‡³jsæ–‡ä»¶ä¸­" class="headerlink" title="åœºæ™¯2ï¼Œå†…åµŒè‡³jsæ–‡ä»¶ä¸­"></a>åœºæ™¯2ï¼Œå†…åµŒè‡³jsæ–‡ä»¶ä¸­</h2><h4 id="1ã€åŸç”Ÿæ–¹å¼ç›´æ¥åŠ è½½å¤šå¼ å›¾ç‰‡"><a href="#1ã€åŸç”Ÿæ–¹å¼ç›´æ¥åŠ è½½å¤šå¼ å›¾ç‰‡" class="headerlink" title="1ã€åŸç”Ÿæ–¹å¼ç›´æ¥åŠ è½½å¤šå¼ å›¾ç‰‡"></a>1ã€åŸç”Ÿæ–¹å¼ç›´æ¥åŠ è½½å¤šå¼ å›¾ç‰‡</h4><p>å¤§å°10~70kbå…±9å¼ å›¾ç‰‡ã€‚æ€»å¤§å°çº¦300kb</p>
<p>å…³é—­ç¼“å­˜ï¼šbuild: 300ms |  complete: 310ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455634756427.png" alt="img"><br>å¼€å¯ç¼“å­˜ï¼šbuild: 110ms |  complete: 120ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455634772411.png" alt="img"></p>
<table>
<thead>
<tr>
<th style="text-align:left">æµ‹è¯•ç¯å¢ƒ</th>
<th style="text-align:center">build(å•ä½:ms)</th>
<th style="text-align:center">complete(å•ä½:ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">OS X+Chrome</td>
<td style="text-align:center">110</td>
<td style="text-align:center">120</td>
</tr>
<tr>
<td style="text-align:left">iOS+å¾®ä¿¡</td>
<td style="text-align:center">50</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:left">OS X+Safari</td>
<td style="text-align:center">148</td>
<td style="text-align:center">150</td>
</tr>
<tr>
<td style="text-align:left">Android+å¾®ä¿¡</td>
<td style="text-align:center">50</td>
<td style="text-align:center">100</td>
</tr>
</tbody>
</table>
<h4 id="2ã€è½¬æ¢æˆbase64æ ¼å¼ï¼Œåˆå¹¶è¯·æ±‚"><a href="#2ã€è½¬æ¢æˆbase64æ ¼å¼ï¼Œåˆå¹¶è¯·æ±‚" class="headerlink" title="2ã€è½¬æ¢æˆbase64æ ¼å¼ï¼Œåˆå¹¶è¯·æ±‚"></a>2ã€è½¬æ¢æˆbase64æ ¼å¼ï¼Œåˆå¹¶è¯·æ±‚</h4><p>å°†ä¸Šé¢çš„å›¾ç‰‡è½¬æˆbase64åï¼Œæ”¾åœ¨jsæ–‡ä»¶ä¸­ï¼ŒåŠ è½½è¿›æ¥ã€‚</p>
<p>å…³é—­ç¼“å­˜ï¼šbuild: 0ms |  complete: 400ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455634859983.png" alt="img"></p>
<p>å¼€å¯ç¼“å­˜ï¼šbuild: 0ms |  complete: 80ms</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455634882064.png" alt="img"></p>
<table>
<thead>
<tr>
<th style="text-align:center">æµ‹è¯•ç¯å¢ƒ</th>
<th style="text-align:center">build(å•ä½:ms)</th>
<th style="text-align:center">complete(å•ä½:ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">OSX+Chrome</td>
<td style="text-align:center">110</td>
<td style="text-align:center">120</td>
</tr>
<tr>
<td style="text-align:center">iOS+å¾®ä¿¡</td>
<td style="text-align:center">0</td>
<td style="text-align:center">35</td>
</tr>
<tr>
<td style="text-align:center">OS X+Safari</td>
<td style="text-align:center">7</td>
<td style="text-align:center">70</td>
</tr>
<tr>
<td style="text-align:center">Android+å¾®ä¿¡</td>
<td style="text-align:center">0</td>
<td style="text-align:center">250</td>
</tr>
</tbody>
</table>
<h4 id="3ã€æ¯”è¾ƒä¸åŒç½‘é€Ÿä¸‹åŒæ­¥è¯·æ±‚å’Œåˆå¹¶è¯·æ±‚çš„åŠ è½½æ•ˆç‡"><a href="#3ã€æ¯”è¾ƒä¸åŒç½‘é€Ÿä¸‹åŒæ­¥è¯·æ±‚å’Œåˆå¹¶è¯·æ±‚çš„åŠ è½½æ•ˆç‡" class="headerlink" title="3ã€æ¯”è¾ƒä¸åŒç½‘é€Ÿä¸‹åŒæ­¥è¯·æ±‚å’Œåˆå¹¶è¯·æ±‚çš„åŠ è½½æ•ˆç‡"></a>3ã€æ¯”è¾ƒä¸åŒç½‘é€Ÿä¸‹åŒæ­¥è¯·æ±‚å’Œåˆå¹¶è¯·æ±‚çš„åŠ è½½æ•ˆç‡</h4><p>ä½¿ç”¨ä¸Šè¿°1ã€2çš„æµ‹è¯•demoåˆ†åˆ«åœ¨3Gã€4Gç½‘é€Ÿæ¡ä»¶ä¸‹æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ï¼Œåˆå¹¶è¯·æ±‚æ˜æ˜¾ç¼©çŸ­äº†æ•´ä¸ªåŠ è½½æ—¶é—´ï¼›</li>
<li>åœ¨ç½‘ç»œç¯å¢ƒè¾ƒå¥½çš„WIFIå’Œ4Gä¸‹åˆ™å·®åˆ«ä¸å¤§ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">æµ‹è¯•ç¯å¢ƒ</th>
<th style="text-align:center">å›¾ç‰‡ç›´æ¥åŠ è½½ complete(å•ä½:ms)</th>
<th style="text-align:center">base64åˆå¹¶è¯·æ±‚ complete(å•ä½:ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">3G</td>
<td style="text-align:center">6000</td>
<td style="text-align:center">4500</td>
</tr>
<tr>
<td style="text-align:center">4G</td>
<td style="text-align:center">450</td>
<td style="text-align:center">400</td>
</tr>
<tr>
<td style="text-align:center">WIFI</td>
<td style="text-align:center">320</td>
<td style="text-align:center">340</td>
</tr>
</tbody>
</table>
<p><img src="//img.aotu.io/Simbachen/base64/data3.png" alt="img"></p>
<h4 id="åˆ†æå’Œå°ç»“ï¼š-1"><a href="#åˆ†æå’Œå°ç»“ï¼š-1" class="headerlink" title="åˆ†æå’Œå°ç»“ï¼š"></a>åˆ†æå’Œå°ç»“ï¼š</h4><p>base64åçš„çš„jsèµ„æºè¾¾381kbï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡ŒåŠ è½½ï¼Œæ¶ˆè€—å¤§é‡æ—¶é—´ï¼Œä»ç»Ÿè®¡ç»“æœçœ‹ï¼Œåœ¨æ¸²æŸ“æ€§èƒ½å·®å¼‚ä¸Šå¹¶æ²¡æœ‰åœºæ™¯1é‚£ä¹ˆæ˜æ˜¾ã€‚<br>ä½†æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œé¡µé¢æ¸²æŸ“å®Œæˆçš„é€Ÿåº¦ç”šè‡³æ›´å¿«ã€‚<br>ä»Timelineé‡Œçœ‹åˆ°ç»†èŠ‚ï¼Œè§£æè¿™ä¸ªè¿‘400kbçš„jsæ–‡ä»¶å¯¹æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹é€ æˆäº†ä¸€å®šå‹åŠ›ï¼Œä¸è¿‡æ€»å…±40msçš„è§£ææ—¶é—´æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚</p>
<p><img src="//img.aotu.io/Simbachen/base64/1455635010603.png" alt="img"></p>
<ol>
<li>ä»htmlé‡Œç›´ç›´æ¥å¼•ç”¨å›¾ç‰‡é“¾æ¥å’Œbase64å›¾ç‰‡å¯¹æ¸²æŸ“æ€§èƒ½çš„å½±å“å‡ ä¹æ²¡æœ‰åŒºåˆ«ï¼Œåœ¨ç½‘ç»œæ¡ä»¶å·®çš„æƒ…å†µä¸‹ï¼Œåˆå¹¶è¯·æ±‚å´èƒ½å¤§å¤§æé«˜åŠ è½½æ•ˆç‡ï¼›</li>
<li>ç›´æ¥å¼•ç”¨è‡³htmlï¼Œæ— æ³•ç¼“å­˜ï¼Œå°†base64åçš„å›¾ç‰‡èµ„æºæ”¾åœ¨jsæ–‡ä»¶ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿è®¾ç½®ç¼“å­˜ã€‚</li>
<li>æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å›¾ç‰‡èµ„æºbase64åŒ–éœ€è¦æ‰©å±•æ„å»ºå·¥å…·æ¥æ”¯æŒã€‚</li>
</ol>
<h2 id="ä½¿ç”¨å»ºè®®"><a href="#ä½¿ç”¨å»ºè®®" class="headerlink" title="ä½¿ç”¨å»ºè®®"></a>ä½¿ç”¨å»ºè®®</h2><ol>
<li><p>å›¾ç‰‡èµ„æºçš„base64ç¼–ç è¿›cssæ–‡ä»¶ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æ¶ˆè€—ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
</li>
<li><p>å°†å›¾ç‰‡èµ„æºç¼–ç è¿›jsæ–‡ä»¶ä¸­ï¼Œç®¡ç†å’Œé¢„åŠ è½½H5åº”ç”¨çš„å›¾ç‰‡èµ„æºï¼Œåˆç†çš„åˆå¹¶è¯·æ±‚å¯ä»¥å¤§å¤§æé«˜é¡µé¢ä½“éªŒã€‚</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å°†å›¾ç‰‡èµ„æºè½¬è‡³base64æ ¼å¼åå¯ç›´æ¥æ”¾å…¥é¡µé¢ä½œä¸ºé¦–å±ç›´å‡ºï¼Œä¹Ÿå¯ä»¥æ”¾å…¥cssæ–‡ä»¶ä¸­ï¼Œå‡å°‘è¯·æ±‚ï¼Œä»¥åŠ å¿«é¦–å±çš„å‘ˆç°é€Ÿåº¦ã€‚&lt;br&gt;ä¸è¿‡å›¾ç‰‡base64åŒ–ï¼Œå°†å¸¦æ¥ä¸€ä¸ªè‡ƒè‚¿çš„htmlæˆ–cssæ–‡ä»¶ï¼Œæ˜¯å¦ä¼šå½±å“é¡µé¢çš„æ¸²æŸ“æ€§èƒ½ï¼Œæµè§ˆå™¨åˆæ”¯æŒå¦‚ä½•å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•ç»Ÿè®¡ï¼Ÿ&quot;&gt;&lt;
    
    </summary>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://aotu.io/cates/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="base64" scheme="https://aotu.io/tags/base64/"/>
    
      <category term="h5" scheme="https://aotu.io/tags/h5/"/>
    
  </entry>
  
  <entry>
    <title>createjså¼€å‘å…¥é—¨</title>
    <link href="https://aotu.io/notes/2016/03/01/createjs-get-started/"/>
    <id>https://aotu.io/notes/2016/03/01/createjs-get-started/</id>
    <published>2016-03-01T02:10:15.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>é€šè¿‡å®ä¾‹ç®€å•ä»‹ç»createjsçš„ä½¿ç”¨æ–¹æ³•<br><a id="more"></a></p>
<h2 id="PRELOADJS"><a href="#PRELOADJS" class="headerlink" title="PRELOADJS"></a>PRELOADJS</h2><p>PreloadJSæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†å’Œåè°ƒç›¸å…³èµ„æºåŠ è½½çš„ç±»åº“ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿çš„å¸®åŠ©ä½ é¢„å…ˆåŠ è½½ç›¸å…³èµ„æºã€‚</p>
<h3 id="LoadQueueç±»ä»‹ç»"><a href="#LoadQueueç±»ä»‹ç»" class="headerlink" title="LoadQueueç±»ä»‹ç»"></a>LoadQueueç±»ä»‹ç»</h3><p>LoadQueueæ˜¯ä¸€ä¸ªåŠ è½½ç®¡ç†å™¨ï¼Œå¯ä»¥é¢„å…ˆåŠ è½½ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ä¸€ä¸ªæ–‡ä»¶é˜Ÿåˆ—ã€‚</p>
<p>LoadQueueåŒ…å«äº†å‡ ä¸ªå¯ä»¥è®¢é˜…çš„äº‹ä»¶ï¼š</p>
<ul>
<li>complete: å½“é˜Ÿåˆ—å®Œæˆå…¨éƒ¨åŠ è½½åè§¦å‘</li>
<li>error: å½“é˜Ÿåˆ—é‡åˆ°é”™è¯¯æ—¶è§¦å‘</li>
<li>progress: æ•´ä¸ªé˜Ÿåˆ—å˜åŒ–æ—¶å±•ç¤ºçš„è¿›åº¦</li>
<li>fileload: ä¸€ä¸ªå•ç‹¬æ–‡ä»¶åŠ è½½å®Œæ¯•</li>
<li>fileprogress: ä¸€ä¸ªå•ç‹¬æ–‡ä»¶å˜åŒ–çš„è¿›åº¦ï¼Œè¯·æ³¨æ„åªæœ‰æ–‡ä»¶ä½¿ç”¨XHRåŠ è½½æ‰ä¼šè§¦å‘ï¼Œå…¶å®ƒåªä¼šæ˜¾ç¤º0æˆ–è€…100%</li>
</ul>
<p>LoadQueueæ”¯æŒç›¸å…³æ–‡ä»¶ç±»å‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>BINARY:  XHRè°ƒç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶</li>
<li>CSS: CSSæ–‡ä»¶</li>
<li>IMAGE: ä¸€èˆ¬å›¾ç‰‡æ–‡ä»¶æ ¼å¼</li>
<li>JAVASCRIPT: JavaScriptæ–‡ä»¶</li>
<li>JSON: JSONæ•°æ®</li>
<li>JSONP: è·¨åŸŸJSONæ–‡ä»¶</li>
<li>MANIFEST: JSONæ ¼å¼çš„æ–‡ä»¶åˆ—è¡¨</li>
<li>SOUND: éŸ³é¢‘æ–‡ä»¶</li>
<li>SVG: SVGæ–‡ä»¶</li>
<li>TEXT: æ–‡æœ¬æ–‡ä»¶ - ä»…æ”¯æŒXHR</li>
<li>XML: XMLæ•°æ®</li>
</ul>
<h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">manifest = [</div><div class="line">	&#123;<span class="string">src:</span> <span class="string">"art/sky.png"</span>, <span class="string">id:</span> <span class="string">"sky"</span>&#125;,</div><div class="line">	&#123;<span class="string">src:</span> <span class="string">"art/ground.png"</span>, <span class="string">id:</span> <span class="string">"ground"</span>&#125;,</div><div class="line">	&#123;<span class="string">src:</span> <span class="string">"art/hill2.png"</span>, <span class="string">id:</span> <span class="string">"hill2"</span>&#125;,</div><div class="line">	&#123;<span class="string">src:</span> <span class="string">"art/hill1.png"</span>, <span class="string">id:</span> <span class="string">"hill"</span>&#125;,</div><div class="line">	&#123;<span class="string">src:</span> <span class="string">"static/grant.json"</span>, <span class="string">id:</span><span class="string">"grant"</span>, <span class="string">type:</span><span class="string">"spritesheet"</span>&#125;</div><div class="line">];</div><div class="line"></div><div class="line">var loader = <span class="keyword">new</span> createjs.LoadQueue(<span class="literal">true</span>, <span class="string">"../_assets/"</span>);</div><div class="line">loader.on(<span class="string">"fileload"</span>, handleFileLoad);</div><div class="line">loader.on(<span class="string">"complete"</span>, handleComplete);</div><div class="line">loader.loadManifest(manifest);</div></pre></td></tr></table></figure>
<ul>
<li>é¢„åŠ è½½éŸ³é¢‘æ–‡ä»¶</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åˆå§‹åŒ–æ’ä»¶</span></div><div class="line"><span class="selector-tag">preload</span><span class="selector-class">.installPlugin</span>(createjs.Sound);</div></pre></td></tr></table></figure>
<ul>
<li>è®¾ç½®åŠ è½½è·¯å¾„</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">preload</span> = new createjs.LoadQueue(<span class="literal">true</span>, <span class="string">"../_assets/art/"</span>);</div></pre></td></tr></table></figure>
<ul>
<li>è·å–é¢„åŠ è½½èµ„æº</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">preload.getResult(â€˜idâ€™)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>é€šå¸¸è¿›åº¦æ¡å¯ä»¥é€šè¿‡<code>fileload</code>å’Œ<code>complete</code>æ¥å®ç°ã€‚</p>
<h2 id="SOUNDJS"><a href="#SOUNDJS" class="headerlink" title="SOUNDJS"></a>SOUNDJS</h2><p>ä¸€ä¸ªéŸ³é¢‘æ’­æ”¾å¼•æ“ï¼Œèƒ½å¤Ÿæ ¹æ®æµè§ˆå™¨æ€§èƒ½é€‰æ‹©éŸ³é¢‘æ’­æ”¾æ–¹å¼ã€‚å°†éŸ³é¢‘æ–‡ä»¶ä½œä¸ºæ¨¡å—ï¼Œå¯éšæ—¶åŠ è½½å’Œå¸è½½ã€‚</p>
<h3 id="å•ä¸ªéŸ³é¢‘åŸºæœ¬ç”¨æ³•"><a href="#å•ä¸ªéŸ³é¢‘åŸºæœ¬ç”¨æ³•" class="headerlink" title="å•ä¸ªéŸ³é¢‘åŸºæœ¬ç”¨æ³•"></a>å•ä¸ªéŸ³é¢‘åŸºæœ¬ç”¨æ³•</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> assetsPath = <span class="string">"../_assets/audio/"</span>;</div><div class="line">src = assetsPath + <span class="string">"M-GameBG.ogg"</span>;</div><div class="line"></div><div class="line">createjs.Sound.alternateExtensions = [<span class="string">"mp3"</span>];	<span class="comment">// æºæ ¼å¼ä¸æ”¯æŒæ—¶ï¼Œç”¨æ­¤æ ¼å¼æ›¿æ¢</span></div><div class="line">createjs.Sound.addEventListener(<span class="string">"fileload"</span>, playSound); <span class="comment">// åŠ è½½å®Œå›è°ƒ</span></div><div class="line">createjs.Sound.registerSound(src);  <span class="comment">// æ³¨å†Œ</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">playSound</span><span class="params">(event)</span> </span>&#123;</div><div class="line">	soundInstance = createjs.Sound.play(event.src);  <span class="comment">// æ’­æ”¾å®ä¾‹</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¤šä¸ªéŸ³é¢‘ç”¨æ³•"><a href="#å¤šä¸ªéŸ³é¢‘ç”¨æ³•" class="headerlink" title="å¤šä¸ªéŸ³é¢‘ç”¨æ³•"></a>å¤šä¸ªéŸ³é¢‘ç”¨æ³•</h3><p><code>registerSounds</code></p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> assetsPath = <span class="string">"../_assets/audio/"</span>;</div><div class="line"><span class="built_in">var</span> sounds = [</div><div class="line">	&#123;<span class="attribute">src</span>: <span class="string">"Game-Break.ogg"</span>, <span class="attribute">id:</span><span class="string"> 1&#125;,</span></div><div class="line">	&#123;src: <span class="string">"Game-Spawn.ogg"</span>, <span class="attribute">id:</span><span class="string"> 2&#125;,</span></div><div class="line">	&#123;src: <span class="string">"Game-Shot.ogg"</span>, <span class="attribute">id:</span><span class="string"> 3&#125;,</span></div><div class="line"></div><div class="line">	&#123;src: <span class="string">"GU-StealDaisy.ogg"</span>, <span class="attribute">id:</span><span class="string"> 4&#125;,</span></div><div class="line">	&#123;src: <span class="string">"Humm.ogg"</span>, <span class="attribute">id:</span><span class="string"> 5&#125;,</span></div><div class="line">	&#123;src: <span class="string">"R-Damage.ogg"</span>, <span class="attribute">id:</span><span class="string"> 6&#125;,</span></div><div class="line"></div><div class="line">	&#123;src: <span class="string">"Thunder1.ogg"</span>, <span class="attribute">id:</span><span class="string"> 7&#125;,</span></div><div class="line">	&#123;src: <span class="string">"S-Damage.ogg"</span>, <span class="attribute">id:</span><span class="string"> 8&#125;,</span></div><div class="line">	&#123;src: <span class="string">"U-CabinBoy3.ogg"</span>, <span class="attribute">id:</span><span class="string"> 9&#125;,</span></div><div class="line"></div><div class="line">	&#123;src: <span class="string">"ToneWobble.ogg"</span>, <span class="attribute">id:</span><span class="string"> 10&#125;,</span></div><div class="line">	&#123;src: <span class="string">"Game-Death.ogg"</span>, <span class="attribute">id:</span><span class="string"> 11&#125;,</span></div><div class="line">	&#123;src: <span class="string">"Game-Break.ogg"</span>, <span class="attribute">id:</span><span class="string"> 12&#125; </span></div><div class="line">];</div><div class="line"></div><div class="line">createjs.Sound.alternateExtensions = [<span class="string">"mp3"</span>];</div><div class="line">createjs.Sound.addEventListener(<span class="string">"fileload"</span>, createjs.proxy(soundLoaded, <span class="keyword">this</span>)); </div><div class="line">createjs.Sound.registerSounds(sounds, assetsPath);</div></pre></td></tr></table></figure>
<h3 id="å£°éŸ³åˆæˆ"><a href="#å£°éŸ³åˆæˆ" class="headerlink" title="å£°éŸ³åˆæˆ"></a>å£°éŸ³åˆæˆ</h3><ul>
<li>AudioSpriteä¾‹å­</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">createjs.Sound.initializeDefaultPlugins();</div><div class="line">var assetsPath = <span class="string">"./assets/"</span>;</div><div class="line">var sounds = [&#123;</div><div class="line"><span class="symbol">    src:</span><span class="string">"MyAudioSprite.ogg"</span>, <span class="string">data:</span> &#123;</div><div class="line"><span class="symbol">        audioSprite:</span> [</div><div class="line">            &#123;<span class="string">id:</span><span class="string">"sound1"</span>, <span class="string">startTime:</span><span class="number">0</span>, <span class="string">duration:</span><span class="number">500</span>&#125;,</div><div class="line">            &#123;<span class="string">id:</span><span class="string">"sound2"</span>, <span class="string">startTime:</span><span class="number">1000</span>, <span class="string">duration:</span><span class="number">400</span>&#125;,</div><div class="line">            &#123;<span class="string">id:</span><span class="string">"sound3"</span>, <span class="string">startTime:</span><span class="number">1700</span>, <span class="string">duration:</span> <span class="number">1000</span>&#125;</div><div class="line">        ]&#125;</div><div class="line">    &#125;</div><div class="line">];</div><div class="line">createjs.Sound.alternateExtensions = [<span class="string">"mp3"</span>];</div><div class="line">createjs.Sound.on(<span class="string">"fileload"</span>, loadSound);</div><div class="line">createjs.Sound.registerSounds(sounds, assetsPath);</div><div class="line"><span class="comment">// after load is complete</span></div><div class="line">createjs.Sound.play(<span class="string">"sound2"</span>);</div></pre></td></tr></table></figure>
<ul>
<li>AudioSpriteå®‰è£…</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g audiosprite</div></pre></td></tr></table></figure>
<ul>
<li>homebrewå®‰è£…ffmpeg</li>
</ul>
<p>FFmpeg and the ogg codecs on OSX using brew:</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install ffmpeg --<span class="keyword">with</span>-theora --<span class="keyword">with</span>-libogg --<span class="keyword">with</span>-libvorbis</div></pre></td></tr></table></figure>
<ul>
<li>ç”ŸæˆéŸ³é¢‘æ–‡ä»¶</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">audiosprite</span> --autoplay <span class="keyword">bg_loop </span>--output mygameaudio <span class="keyword">bg_loop.wav </span>*.mp3</div></pre></td></tr></table></figure>
<p>å¯é€‰å‚æ•°å¯ä»¥è®¾ç½®æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ç­‰ï¼Œå…·ä½“è¯·å‚è€ƒ<a href="https://github.com/tonistiigi/audiosprite" target="_blank" rel="external">è¿™é‡Œ</a></p>
<ul>
<li>åœ¨çº¿å¯¼å‡º</li>
</ul>
<p>æŠŠç”Ÿæˆå¥½çš„jsonæ–‡ä»¶ï¼Œå¯¼å…¥åˆ°ä»¥ä¸‹é“¾æ¥ï¼Œæ‰èƒ½ä¾›soundjsä½¿ç”¨</p>
<p><a href="http://jsfiddle.net/bharat_battu/g8fFP/12/" target="_blank" rel="external">http://jsfiddle.net/bharat_battu/g8fFP/12/</a></p>
<h2 id="TWEENJS"><a href="#TWEENJS" class="headerlink" title="TWEENJS"></a>TWEENJS</h2><p>TweenJSç±»åº“ä¸»è¦ç”¨æ¥è°ƒæ•´å’ŒåŠ¨ç”»HTML5å’ŒJavascriptå±æ€§ã€‚æä¾›äº†ç®€å•å¹¶ä¸”å¼ºå¤§çš„tweeningæ¥å£ã€‚æ”¯æŒæ•°å­—å¯¹è±¡å±æ€§å’ŒCSSæ ·å¼å±æ€§ï¼Œå…è®¸ä½ ä½¿ç”¨é“¾å¼è¯­æ³•æ¥ç”Ÿæˆå¤æ‚çš„è¿‡ç¨‹</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><img src="//img.aotu.io/youing/20160229/tweenjs.gif" alt="img"></p>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Tween</span><span class="selector-class">.get</span>(<span class="selector-tag">target</span>)</div><div class="line">    <span class="selector-class">.to</span>(&#123;<span class="attribute">x</span>:<span class="number">300</span>&#125;,400,<span class="selector-tag">createjs</span><span class="selector-class">.Ease</span><span class="selector-class">.bounceInOut</span>)</div><div class="line">    <span class="selector-class">.set</span>(&#123;<span class="attribute">label</span>:<span class="string">"hello!"</span>&#125;)</div><div class="line">    <span class="selector-class">.wait</span>(500)</div><div class="line">    <span class="selector-class">.to</span>(&#123;<span class="attribute">alpha</span>:<span class="number">0</span>,visible:false&#125;,1000)</div><div class="line">    <span class="selector-class">.call</span>(<span class="selector-tag">onComplete</span>);</div></pre></td></tr></table></figure>
<ul>
<li><code>get</code> è·å–ç›®æ ‡å…ƒç´ </li>
<li><code>to</code> æ‰§è¡ŒåŠ¨ç”»</li>
<li><code>set</code> è®¾ç½®å±æ€§</li>
<li><code>wait</code> é˜Ÿåˆ—ç­‰å¾…</li>
<li><code>call</code> æ‰§è¡Œå›è°ƒå‡½æ•°</li>
<li><code>createjs.Ease.bounceInOut</code> ç¼“åŠ¨æ•ˆæœ</li>
</ul>
<h3 id="å¼•å¯¼åŠ¨ç”»"><a href="#å¼•å¯¼åŠ¨ç”»" class="headerlink" title="å¼•å¯¼åŠ¨ç”»"></a>å¼•å¯¼åŠ¨ç”»</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.MotionGuidePlugin</span><span class="selector-class">.install</span>(createjs.Tween);</div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Tween</span><span class="selector-class">.get</span>(target)<span class="selector-class">.to</span>(&#123;<span class="attribute">guide</span>:&#123; <span class="attribute">path</span>:[<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>, <span class="number">200</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>] &#125;&#125;,<span class="number">7000</span>);</div><div class="line"><span class="comment">//pathæ‰€è®¾ç½®çš„åæ ‡ç­‰åŒäºä¸‹é¢ç”»æ›²çº¿çš„åæ ‡</span></div><div class="line"><span class="selector-tag">graphics</span><span class="selector-class">.moveTo</span>(<span class="number">0</span>,<span class="number">0</span>)<span class="selector-class">.curveTo</span>(<span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>)<span class="selector-class">.curveTo</span>(<span class="number">200</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure>
<ul>
<li>ä¾‹å­</li>
</ul>
<p><img src="//img.aotu.io/youing/20160229/guidemotion.gif" alt="img"></p>
<h2 id="EASELJS"><a href="#EASELJS" class="headerlink" title="EASELJS"></a>EASELJS</h2><p>EaselJS æ˜¯ä¸€ä¸ªç”¨ä»¥ä¸ HTML5 canvas åä½œçš„åº“ã€‚å®ƒåŒ…å«ä¸€ä¸ªå®Œæ•´çš„åˆ†å±‚å±•ç¤ºåˆ—è¡¨ã€ä¸€ä¸ªæ ¸å¿ƒäº¤äº’æ¨¡å‹ä»¥åŠä¸€äº›è¾…åŠ©ç±»ï¼Œé€šè¿‡å…¶æ¥ä½¿ä¸ Canvas çš„åä½œæ›´ç®€å•ã€‚</p>
<h3 id="å…ˆçœ‹ä¾‹å­"><a href="#å…ˆçœ‹ä¾‹å­" class="headerlink" title="å…ˆçœ‹ä¾‹å­"></a>å…ˆçœ‹ä¾‹å­</h3><p><img src="//img.aotu.io/youing/20160229/grantrun.gif" alt="img"></p>
<p>ä¸‹é¢ä»‹ç»è¿™ä¸ªä¾‹å­çš„åˆ¶ä½œè¿‡ç¨‹</p>
<h3 id="ç´ æå‡†å¤‡"><a href="#ç´ æå‡†å¤‡" class="headerlink" title="ç´ æå‡†å¤‡"></a>ç´ æå‡†å¤‡</h3><p><img src="//img.aotu.io/youing/20160229/1.pic.jpg" alt="img"></p>
<p>äººç‰©ç²¾çµå›¾ä¼šç”¨åˆ°<strong>flash</strong>+<strong>zoe</strong>æ¥ç”Ÿæˆ</p>
<p>æ‰“å¼€flashï¼Œæ–°å»ºä¸€ä¸ªæ–°çš„as3é¡¹ç›®ï¼Œå¯¼å…¥å›¾ç‰‡ï¼Œåªè¦æ–‡ä»¶åæ˜¯æœ‰åºçš„ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥åˆ°æ¯ä¸€å¸§ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="//img.aotu.io/youing/20160229/2.pic.png" alt="img"></p>
<p><img src="//img.aotu.io/youing/20160229/3.pic.png" alt="img"></p>
<p>å¯¼å…¥å®Œä¹‹åï¼Œæ–°å»ºä¸€ä¸ªå›¾å±‚ï¼Œæ¥æ”¾åŠ¨ä½œæ ‡ç­¾ï¼Œå¦‚ä¸Šé¢çš„<code>run</code>å’Œ<code>jump</code></p>
<p>æœ€åå†æ–°å»ºä¸€ä¸ªæ–°çš„å›¾å±‚ç”¨æ¥æ”¾åŠ¨ä½œè„šæœ¬ï¼Œè¿™é‡Œåªéœ€è¦å†™<code>stop()</code>å°±å¯ä»¥äº†ï¼Œè¿™æ ·æ•´ä¸ªåŠ¨ç”»æ˜¯å¤„äºé™æ­¢çŠ¶æ€ã€‚</p>
<p>ç„¶åç”¨å¿«æ·é”®<code>Ctrl + enter</code>å‘å¸ƒæˆswfæ ¼å¼ï¼Œå¹¶æŠŠå®ƒå¯¼å…¥åˆ°<strong>zoe</strong>å·¥å…·,æ•ˆæœå¦‚ä¸‹</p>
<p><img src="//img.aotu.io/youing/20160229/4.pic.png" alt="img"></p>
<p>tabé€‰é¡¹å¡åˆ‡æ¢åˆ°<code>Animations</code> å¯ä»¥é¢„è§ˆå’Œè®¾ç½®åˆšæ‰åœ¨flashè®¾ç½®çš„åŠ¨ä½œã€‚</p>
<p>æœ€åå¯¼å‡ºjsonä»£ç ä¾›åç»­ä½¿ç”¨</p>
<h3 id="å¼€å‘é˜¶æ®µ"><a href="#å¼€å‘é˜¶æ®µ" class="headerlink" title="å¼€å‘é˜¶æ®µ"></a>å¼€å‘é˜¶æ®µ</h3><p>createjsä¸­ï¼Œå…ƒç´ éƒ½æ˜¯æ”¾åˆ°èˆå°ä¸­</p>
<ol>
<li>èˆå°åˆ›å»º</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;canvas id=<span class="string">"testCanvas"</span> width=<span class="string">"960"</span> height=<span class="string">"400"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> stage = <span class="keyword">new</span> createjs.Stage(<span class="string">"testCanvas"</span>);</div></pre></td></tr></table></figure>
<ol>
<li>å¤©ç©º</li>
</ol>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sky = <span class="function"><span class="keyword">new</span> <span class="title">createjs</span>.<span class="title">Shape</span>();</span></div><div class="line"><span class="title">sky</span>.<span class="title">graphics</span>.<span class="title">beginBitmapFill</span>(loader.getResult("sky")).<span class="title">drawRect</span>(<span class="number">0</span>, <span class="number">0</span>, w, h);</div></pre></td></tr></table></figure>
<p><code>Shape</code>ç±»ï¼Œé€šå¸¸ç”¨äºç”»å›¾ï¼Œä¾‹å¦‚ç”»çŸ©å½¢ï¼Œåœ†å½¢æ—¶ä¼šä½¿ç”¨åˆ°</p>
<ol>
<li>åœ°æ¿</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var groundImg = loader.<span class="built_in">getResult</span>(<span class="string">"ground"</span>);</div><div class="line">ground = <span class="keyword">new</span> createjs.Shape();</div><div class="line">ground.graphics.beginBitmapFill(groundImg).drawRect(<span class="number">0</span>, <span class="number">0</span>, w + groundImg.<span class="built_in">width</span>, groundImg.<span class="built_in">height</span>);</div><div class="line">ground.tileW = groundImg.<span class="built_in">width</span>;</div><div class="line">ground.y = h - groundImg.<span class="built_in">height</span>;</div></pre></td></tr></table></figure>
<ol>
<li>å±±</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hill = <span class="keyword">new</span> createjs.Bitmap(loader.<span class="built_in">getResult</span>(<span class="string">"hill"</span>));</div><div class="line">hill.setTransform(Math.<span class="built_in">random</span>() * w, h - hill.<span class="built_in">image</span>.<span class="built_in">height</span> * <span class="number">4</span> - groundImg.<span class="built_in">height</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">hill.alpha = <span class="number">0.5</span>;</div></pre></td></tr></table></figure>
<p><code>Bitmap</code>ç±»ï¼Œå¸¸ç”¨äºä½å›¾å¤„ç†</p>
<ol>
<li>äººç‰©</li>
</ol>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> spriteSheet = <span class="keyword">new</span> createjs.SpriteSheet(</div><div class="line">&#123;</div><div class="line">	framerate: <span class="number">30</span>,</div><div class="line">	<span class="string">"images"</span>: [loader.getResult(<span class="string">"grant"</span>)],</div><div class="line">	<span class="string">"frames"</span>: &#123;<span class="string">"regX"</span>: <span class="number">82</span>, <span class="string">"height"</span>: <span class="number">292</span>, <span class="string">"count"</span>: <span class="number">64</span>, <span class="string">"regY"</span>: <span class="number">0</span>, <span class="string">"width"</span>: <span class="number">165</span>&#125;,</div><div class="line">	<span class="string">"animations"</span>: &#123;</div><div class="line">		<span class="string">"run"</span>: [<span class="number">0</span>, <span class="number">25</span>, <span class="string">"run"</span>, <span class="number">1.5</span>],</div><div class="line">		<span class="string">"jump"</span>: [<span class="number">26</span>, <span class="number">63</span>, <span class="string">"run"</span>]</div><div class="line">	&#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">var</span> grant = <span class="keyword">new</span> createjs.Sprite(spriteSheet, <span class="string">"run"</span>);</div></pre></td></tr></table></figure>
<p>äººç‰©ç”¨åˆ°<code>Sprite</code>ç±»ï¼Œç²¾çµå›¾å­˜æ”¾åœ¨<code>SpriteSheet</code>ä¸­ï¼Œåˆšæ‰ç”¨<strong>flash</strong> + <strong>zoe</strong> ç”Ÿæˆçš„jsonï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥åˆ°<code>SpriteSheet</code>åˆå§‹åŒ–å¯¹è±¡ä¸­ã€‚</p>
<p>è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨ä»£ç <code>gotoAndPlay(&#39;run&#39;)</code>æ¥è¿›è¡ŒåŠ¨ä½œé—´çš„åˆ‡æ¢ã€‚</p>
<ol>
<li>å…ƒç´ åŠ å…¥èˆå°</li>
</ol>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">stage.<span class="keyword">addChild(sky, </span>hill, hill2, ground, grant)<span class="comment">;</span></div></pre></td></tr></table></figure>
<ol>
<li>è®©ç‰©ä½“åŠ¨èµ·æ¥</li>
</ol>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Ticker</span><span class="selector-class">.setFPS</span>(<span class="number">30</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Ticker</span><span class="selector-class">.addEventListener</span>(<span class="string">"tick"</span>, handleTick);</div><div class="line"><span class="selector-tag">function</span> <span class="selector-tag">handleTick</span>(event) &#123;</div><div class="line"><span class="comment">//ç‰©å“ç§»åŠ¨é€»è¾‘</span></div><div class="line">    <span class="selector-tag">stage</span><span class="selector-class">.update</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><h3 id="å¼€å¯é¼ æ ‡æ£€æµ‹"><a href="#å¼€å¯é¼ æ ‡æ£€æµ‹" class="headerlink" title="å¼€å¯é¼ æ ‡æ£€æµ‹"></a>å¼€å¯é¼ æ ‡æ£€æµ‹</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">stage.enableMouseOver(<span class="number">20</span>)<span class="comment">;</span></div></pre></td></tr></table></figure>
<h3 id="å¼€å¯è§¦æ‘¸"><a href="#å¼€å¯è§¦æ‘¸" class="headerlink" title="å¼€å¯è§¦æ‘¸"></a>å¼€å¯è§¦æ‘¸</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">createjs</span><span class="selector-class">.Touch</span><span class="selector-class">.enable</span>(<span class="selector-tag">this</span><span class="selector-class">.stage</span>)</div></pre></td></tr></table></figure>
<h3 id="Request-Animation-Frame"><a href="#Request-Animation-Frame" class="headerlink" title="Request Animation Frame"></a>Request Animation Frame</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">createjs.Ticker.timingMode = createjs.Ticker.RAF<span class="comment">;</span></div></pre></td></tr></table></figure>
<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">shape</span>.cache(x,y,<span class="built_in">width</span>,<span class="built_in">height</span>)</div></pre></td></tr></table></figure>
<h3 id="Mask"><a href="#Mask" class="headerlink" title="Mask"></a>Mask</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">bmp.mask </span>= star<span class="comment">;</span></div></pre></td></tr></table></figure>
<h3 id="ç¢°æ’æ£€æµ‹"><a href="#ç¢°æ’æ£€æµ‹" class="headerlink" title="ç¢°æ’æ£€æµ‹"></a>ç¢°æ’æ£€æµ‹</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">myShape</span><span class="selector-class">.hitTest</span>(<span class="selector-tag">x</span>,<span class="selector-tag">y</span>)</div></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><a href="http://createjs.com/" target="_blank" rel="external">http://createjs.com/</a></li>
<li><a href="https://github.com/CreateJS" target="_blank" rel="external">https://github.com/CreateJS</a></li>
<li><a href="https://github.com/tonistiigi/audiosprite" target="_blank" rel="external">https://github.com/tonistiigi/audiosprite</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€šè¿‡å®ä¾‹ç®€å•ä»‹ç»createjsçš„ä½¿ç”¨æ–¹æ³•&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="createjs" scheme="https://aotu.io/tags/createjs/"/>
    
      <category term="tweenjs" scheme="https://aotu.io/tags/tweenjs/"/>
    
      <category term="zoe" scheme="https://aotu.io/tags/zoe/"/>
    
      <category term="preloadjs" scheme="https://aotu.io/tags/preloadjs/"/>
    
      <category term="soundjs" scheme="https://aotu.io/tags/soundjs/"/>
    
      <category term="easeljs" scheme="https://aotu.io/tags/easeljs/"/>
    
  </entry>
  
  <entry>
    <title>åˆæ¢Docker</title>
    <link href="https://aotu.io/notes/2016/02/27/docker/"/>
    <id>https://aotu.io/notes/2016/02/27/docker/</id>
    <published>2016-02-27T09:55:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ—¨åœ¨è®©å¤§å®¶äº†è§£ä»€ä¹ˆæ˜¯Dockerï¼Œå¹¶å¸¦é¢†å¤§å®¶ä½“éªŒDockerä½¿ç”¨çš„æ•´ä¸ªæµç¨‹ã€‚</p>
<a id="more"></a>
<p>å¼€å¯Dockerå­¦ä¹ ä¹‹æ—…å‰ï¼Œæˆ‘ä»¬ç®€å•æè¿°å‡ ä¸ªåœºæ™¯ï¼Œåº”è¯¥å¾ˆå¤šäººéƒ½æœ‰ç¢°åˆ°è¿‡ï¼š</p>
<p>å°å‡¹åŒå­¦å¼€å‘äº†ä¸€ä¸ªwebåº”ç”¨ï¼ŒæœåŠ¡å™¨ç¯å¢ƒæ˜¯: <code>centos 7</code> + <code>nginx</code> + <code>node4.6</code> + <code>mongodb3.2.3</code> æœ€è¿‘è¦ä¸Šçº¿äº†ã€‚</p>
<p>ã€åœºæ™¯1ã€‘ï¼šåˆšå¥½å…¬å¸æœ‰ä¸€å°æœåŠ¡å™¨å¯ä»¥ç”¨ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸Šæœ‰ä¸€äº›å…¶ä»–æœåŠ¡ï¼Œè€Œä¸”å·²ç»è£…äº†<code>node3.31</code>å’Œ<code>mongodb2.3</code>ï¼Œå°å‡¹è’™äº†ï¼Œåˆ°åº•æ˜¯ç›´æ¥å‡çº§ç¯å¢ƒå‘¢ï¼Ÿè¿˜æ˜¯æ”¹ä¸€ä¸ªé€‚é…ä½ç‰ˆæœ¬çš„åº”ç”¨å‘¢ï¼Ÿ</p>
<p>ã€åœºæ™¯2ã€‘ï¼šç»ˆäºèŠ±äº†å¾ˆä¹…æ—¶é—´éƒ¨ç½²ä¸Šäº†ï¼Œæ…¢æ…¢çš„é¡¹ç›®éœ€æ±‚è¶Šæ¥è¶Šå¤šï¼Œå°å‡¹çš„åŒäº‹å°å‡¸ä¹Ÿå‡†å¤‡ä¸€èµ·è¿­ä»£è¿™ä¸ªé¡¹ç›®ï¼Œå°å‡¸åˆè¦é‡æ–°é…ç½®ä¸€éåº”ç”¨ç¯å¢ƒåˆ°æœ¬åœ°åšæµ‹è¯•ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„åŒäº‹å‚ä¸è¿›æ¥ï¼Œæ¯ä¸ªäººéƒ½è¦é…ç½®ä¸€éæœ¬åœ°æµ‹è¯•ç¯å¢ƒï¼Œé‡å¤å·¥ä½œï¼Œæ—¶é—´åˆç™½ç™½æµªè´¹æ‰ã€‚</p>
<p>ã€åœºæ™¯3ã€‘ï¼šéšç€é¡¹ç›®è¶Šåšè¶Šå¤§ï¼Œç°æœ‰æœåŠ¡å™¨é…ç½®å’Œå¸¦å®½å·²ç»ä¸èƒ½æ»¡è¶³äº†ï¼Œå°å‡¹éœ€è¦æŠŠè¿™ä¸ªé¡¹ç›®è¿ç§»å‡ºå»å¹¶åšæ°´å¹³æ‰©å±•ï¼Œç„¶ååˆå¾—é‡å¤é…ç½®ç¯å¢ƒåˆ°å¤šå°æœåŠ¡å™¨ï¼Œè€Œä¸”è¿™äº›æœåŠ¡å™¨æœ‰å¯èƒ½è¿˜æ˜¯ä¼šé‡å¤å‰é¢çš„åœºæ™¯1ã€‚</p>
<p>ã€åœºæ™¯4ã€‘ï¼šè¿ç»´è¦æ¸…ç†ä¸€äº›æœåŠ¡å™¨ï¼Œæ•´ç†å‡ºæ¥ï¼ŒæŠŠæ²¡æœ‰å®Œå…¨åˆ©ç”¨çš„æœåŠ¡å™¨ï¼Œåˆ†ç»™æ–°çš„é¡¹ç›®ç”¨ï¼Œè¦ç½—åˆ—å‡ºæ¥æ¯å°æœåŠ¡å™¨çš„æœåŠ¡ï¼Œç„¶ååˆ é™¤æ‰ä¸éœ€è¦çš„ï¼Œè¿™æ—¶å€™å‘ç°å®Œå…¨æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>ä¸Šé¢çš„åœºæ™¯ç»å¸¸å‘ç”Ÿï¼Œä¹Ÿè®¸å°±å‘ç”Ÿåœ¨ä½ æˆ‘èº«è¾¹ï¼Œè€Œä¸”æ— æ¯”å¤´ç–¼ï¼Œä½†å¯¹Dockeræ¥è¯´è§£å†³è¿™äº›é—®é¢˜éƒ½æ˜“å¦‚åæŒï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¸€æ­¥æ­¥æ¥äº†è§£å¹¶ä½¿ç”¨Dockerã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯Dockerï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Dockerï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Dockerï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Dockerï¼Ÿ</h2><p><a href="https://www.docker.com/" target="_blank" rel="external">Docker</a>æ˜¯ä¸€ä¸ª<a href="https://github.com/docker/docker" target="_blank" rel="external">å¼€æº</a>çš„å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚å¼€å‘è€…åœ¨ç¬”è®°æœ¬ä¸Šç¼–è¯‘æµ‹è¯•é€šè¿‡çš„å®¹å™¨å¯ä»¥æ‰¹é‡åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼ŒåŒ…æ‹¬VMsï¼ˆ<a href="https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E6%A9%9F%E5%99%A8" target="_blank" rel="external">è™šæ‹Ÿæœº</a>ï¼‰ã€<a href="https://en.wikipedia.org/wiki/BareMetal" target="_blank" rel="external">bare metal</a>ã€<a href="https://zh.wikipedia.org/wiki/OpenStack" target="_blank" rel="external">OpenStack</a> é›†ç¾¤å’Œå…¶ä»–çš„åŸºç¡€åº”ç”¨å¹³å°ã€‚</p>
<p>å®˜æ–¹çš„æè¿°æ˜¯ï¼šBuild, Ship, and Run Any App, Anywhere åœ¨ä»»ä½•åœ°æ–¹éƒ¨ç½²ï¼Œä¼ è¾“ï¼Œè¿è¡Œä»»ä½•åº”ç”¨ã€‚</p>
<p>å…¶å®å¾ˆåƒè™šæ‹Ÿæœºï¼Œä½†æ˜¯è·Ÿè™šæ‹Ÿæœºæ¯”èµ·æ¥ æ›´çµæ´»,é€Ÿåº¦æ›´å¿«ï¼ŒCPU/å†…å­˜æ¶ˆè€—æ›´ä½ï¼Œå…³é”®æ˜¯æ›´æ–¹ä¾¿ç®¡ç†ã€‚</p>
<p><img src="//img.aotu.io/lizhi/docker/docker-filesystems-multilayer3.png" alt="img"></p>
<p>ä¸Šå›¾å°±æ˜¯ä¸€å¼ Dockerå±‚çº§å›¾ï¼Œ æœ€ä¸‹é¢æ˜¯æ ¸å¿ƒç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰æ„æˆDokceråº•å±‚ï¼Œä¸Šé¢çš„æ˜¯é•œåƒï¼ˆimageï¼‰ï¼Œåˆ†ä¸ºåŸºç¡€é•œåƒå’Œæ™®é€šé•œåƒï¼Œæ‰€æœ‰é•œåƒå¯ä»¥ç›´æ¥å¯åŠ¨ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼ˆcontainerï¼‰ï¼Œcontaineræˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„è™šæ‹Ÿæœºäº†ã€‚</p>
<p>å…¶ä¸­åŸºç¡€image å¯åŠ¨åç”Ÿæˆcontainerï¼Œç„¶åæ·»åŠ ä¸€äº›åº”ç”¨å¦‚ <code>apache</code>ï¼Œ<code>emacs</code>ï¼Œå¯ä»¥é€šè¿‡æäº¤æ“ä½œç›´æ¥ç”Ÿæˆæ™®é€šçš„imageã€‚ æˆ‘ä»¬å¯ä»¥å…±äº«è¿™ä¸ªimageåˆ°ä»»ä½•åœ°æ–¹ï¼Œå¹¶å¯åŠ¨å®ƒã€‚</p>
<h2 id="ä½¿ç”¨Docker"><a href="#ä½¿ç”¨Docker" class="headerlink" title="ä½¿ç”¨Docker"></a>ä½¿ç”¨Docker</h2><h3 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h3><p>Docker å¯ä»¥å®‰è£…åœ¨ <code>Linux</code>, <code>Mac OS</code>, <code>Windows</code> ä¸Šï¼Œè¯¦ç»†å®‰è£…æ­¥éª¤å¯ä»¥å‚è€ƒ <strong><a href="https://docs.docker.com/engine/installation/" target="_blank" rel="external">å®˜æ–¹å®‰è£…æ–‡æ¡£</a></strong> ã€‚</p>
<p><em>æ³¨ï¼šæœ¬æ–‡å°±ä¸ä¸€ä¸€ä¸¾ä¾‹æ‰€æœ‰çš„å®‰è£…æ–¹æ³•ï¼Œå°±ä»¥æ“ä½œç³»ç»Ÿ <strong><a href="https://zh.wikipedia.org/wiki/CentOS" target="_blank" rel="external">centos</a></strong> ä¸ºä¾‹ã€‚</em></p>
<p>ç”±äºdocker åªæ”¯æŒ <code>centos6</code>ä»¥ä¸Šï¼Œ<code>64</code>ä½çš„ç‰ˆæœ¬æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥å®‰è£…å‰å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨ç³»ç»Ÿã€‚<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ getconf LONG_BIT           <span class="comment">//æŸ¥çœ‹æ“ä½œç³»ç»Ÿæ˜¯å¤šå°‘ä½</span></div><div class="line">&gt; <span class="number">64</span></div><div class="line">$ cat /etc/redhat-release    <span class="comment">//æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬</span></div><div class="line">&gt; CentOS Linux release <span class="number">7.0</span><span class="number">.1406</span> (Core)</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢æ˜¯æˆ‘ä½¿ç”¨çš„æœºå™¨ <code>centos7</code> <code>64</code>ä½ç³»ç»Ÿï¼Œæˆ‘å°±ä»¥è¿™ä¸ªä¸ºä¾‹è®²ä¸‹é¢çš„ä½¿ç”¨æ­¥éª¤ã€‚<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ curl -fsSL <span class="keyword">https</span>://<span class="built_in">get</span>.docker.com/ | sh<span class="comment"> //å®‰è£…</span></div><div class="line">$ docker <span class="built_in">version</span><span class="comment"> // æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span></div></pre></td></tr></table></figure></p>
<p>å¦‚æœ <strong>å®‰è£…å¤±è´¥</strong> å¯ä»¥å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘çš„ä»£ç†å®‰è£…ã€‚<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ curl -sSL http://acs-public-mirror.oss-<span class="keyword">cn</span>-hangzhou.aliyuncs.<span class="keyword">com</span>/docker-engine/internet | <span class="keyword">sh</span> -</div></pre></td></tr></table></figure></p>
<p>å…¶ä»–æ›´è¯¦ç»†çš„é˜¿é‡Œäº‘Dockerä»£ç†åŠ é€Ÿå™¨æ–‡æ¡£ï¼Œå¯ä»¥ç‚¹å‡»<a href="https://help.aliyun.com/knowledge_detail/5974865.html" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p>å®‰è£…æˆåŠŸåå¯åŠ¨Dockerï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨ã€‚<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">$</span> sudo service docker start  <span class="comment">//å¼€å¯Docker æœåŠ¡</span></div><div class="line"><span class="symbol">$</span> sudo chkconfig docker on   <span class="comment">//å¼€æœºå¯åŠ¨</span></div></pre></td></tr></table></figure></p>
<h3 id="è·å–åŸºç¡€é•œåƒ"><a href="#è·å–åŸºç¡€é•œåƒ" class="headerlink" title="è·å–åŸºç¡€é•œåƒ"></a>è·å–åŸºç¡€é•œåƒ</h3><p><em>æ³¨ï¼šå‡å®šæˆ‘éœ€è¦éƒ¨ç½²ä¸€ä¸ªåŸºäº<code>centos</code>çš„åº”ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¢æˆåˆ«çš„ï¼Œæ¯”å¦‚ï¼š<code>Redis</code> æˆ–è€… <code>Ubuntu</code>ï¼Œå¯ä»¥æ˜¯ä»»ä½•é•œåƒæ¥å½“åšåŸºç¡€é•œåƒï¼Œè·Ÿæœ¬æœºåŸæœ‰ç³»ç»Ÿæ— å…³ï¼Œåªä¸æ‰€è¦éƒ¨ç½²çš„åº”ç”¨æœ‰å…³ã€‚</em></p>
<p>é¦–å…ˆæœç´¢éœ€è¦è·å–çš„ <strong><a href="https://hub.docker.com/explore/" target="_blank" rel="external">é•œåƒ</a></strong>ï¼Œè¿™æ˜¯å®˜æ–¹<code>Docker Hub</code>æä¾›çš„é•œåƒèµ„æºã€‚ </p>
<p>æ¯”å¦‚ï¼Œæˆ‘é€‰æ‹©è·å– <strong><a href="https://hub.docker.com/_/centos/" target="_blank" rel="external">centosæœ€æ–°ç‰ˆæœ¬</a></strong> </p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">$</span> docker pull centos <span class="comment">//è·å–centosæœ€è¿‘ç‰ˆæœ¬çš„é•œåƒ</span></div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/lizhi/docker/dockerimages.png" alt="img"><br>ä½¿ç”¨å‘½ä»¤ <code>docker images</code> å°±èƒ½æŸ¥åˆ°åˆšæ‰è·å–çš„ <code>centos</code> çš„é•œåƒï¼Œå¦‚ä¸Šå›¾ã€‚</p>
<h3 id="é…ç½®æ–°çš„é•œåƒ"><a href="#é…ç½®æ–°çš„é•œåƒ" class="headerlink" title="é…ç½®æ–°çš„é•œåƒ"></a>é…ç½®æ–°çš„é•œåƒ</h3><p><em>æ³¨ï¼šä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œå‡å®šæˆ‘ä»¬çš„æœåŠ¡åªéœ€è¦å®‰è£…ä¸€ä¸ª<code>zip</code>çš„<code>centos</code>ç³»ç»Ÿã€‚</em></p>
<p>å°†ä¸Šé¢è·å–çš„ <code>centos</code> é•œåƒï¼Œå¯åŠ¨ç”Ÿæˆcontainerï¼Œå¹¶åœ¨containerä¸­å®‰è£…zipã€‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z <span class="built_in">image</span>]<span class="meta"># docker run -t -i centos /bin/bash</span></div></pre></td></tr></table></figure>
<p><code>docker run</code> å¯åŠ¨å®¹å™¨ï¼Œ<code>-t</code>:ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› <code>-i</code>:ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›<code>centos</code> ä¸ºé•œåƒåï¼Œ é•œåƒåé€šå¸¸ä»¥ <strong>é•œåƒå:ç‰ˆæœ¬</strong> æ¥ä½¿ç”¨ï¼Œå› ä¸ºcentosæ²¡æœ‰ç‰ˆæœ¬æ‰€ä»¥çœç•¥, åé¢ <code>/bin/bash</code> æ˜¯å¯åŠ¨containeråè¿è¡Œçš„ç¨‹åºã€‚<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@e44ea4258885 /]# <span class="keyword">zip</span>  <span class="comment">//å…ˆè¿è¡Œzipï¼Œå‘ç°æ˜¯æ²¡æœ‰å®‰è£…çš„</span></div><div class="line">bash: <span class="keyword">zip</span>: command not found</div><div class="line">[root@90934d1f4225 /]# yum install <span class="keyword">zip</span>  <span class="comment">//å®‰è£…zip</span></div><div class="line">[root@90934d1f4225 /]# <span class="keyword">zip</span> <span class="comment">//æŸ¥çœ‹zipï¼Œå®‰è£…æˆåŠŸ</span></div><div class="line"><span class="keyword">Copyright</span> (c) 1990-2008 Info-<span class="keyword">ZIP</span> - <span class="keyword">Type</span> '<span class="keyword">zip</span> <span class="string">"-L"</span>' <span class="keyword">for</span> software license.</div><div class="line"><span class="keyword">Zip</span> 3.0 (July 5th 2008). Usage:</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨containerå‘½ä»¤è¡Œå®‰è£…<code>zip</code>æˆåŠŸã€‚<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@90934d1f4225</span> /]<span class="meta"># exit</span></div></pre></td></tr></table></figure></p>
<p>é€€å‡ºå®¹å™¨å‘½ä»¤è¡Œï¼Œå› ä¸ºä¸æ˜¯åå°è¿è¡Œï¼Œæ‰€ä»¥é€€å‡ºåï¼Œcontainerä¹Ÿéšå³å…³é—­äº†ã€‚<code>-d</code> å¯ä»¥è®©containeråœ¨åå°è¿è¡Œï¼Œå¹¶å¯ä»¥éšæ—¶é€šè¿‡<code>docker attach</code> å‘½ä»¤è¿›å…¥å®¹å™¨ï¼Œå…·ä½“ä¾‹å­å¯ä»¥çœ‹<a href="https://docs.docker.com/engine/reference/commandline/attach/" target="_blank" rel="external">è¿™é‡Œ</a>,å› ä¸ºä¸æ˜¯æœ¬æ–‡é‡ç‚¹å°±ä¸å±•å¼€è¯´æ˜äº†ã€‚</p>
<p><code>docker ps</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰å¯åŠ¨çš„ containerï¼Œ <code>-a</code> å¯åŠ¨å’Œæ²¡å¯åŠ¨çš„éƒ½ä¼šå±•ç¤ºã€‚</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z image]# docker ps -a</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</div><div class="line"><span class="number">8</span>f08b2b67380        centos              <span class="string">"/bin/bash"</span>         <span class="number">21</span> minutes ago      Exited (<span class="number">0</span>) <span class="number">20</span> minutes ago                       lonely_euler</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªidä¸º 8f08b2b67380çš„containerï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åˆšæ‰å®‰è£…äº†zipï¼Œå¹¶é€€å‡ºçš„containerã€‚<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z <span class="built_in">image</span>]<span class="meta"># docker commit -m <span class="meta-string">"Added zip install"</span> 8f08b2b67380 test:1</span></div><div class="line">sha256:<span class="number">8</span>f1d192a4ea2a80801e33cd5fadb5f37180bb718f729f77a404a347b977d753c</div></pre></td></tr></table></figure></p>
<p><code>docker commit</code> å°†containeræäº¤ç”Ÿæˆimageï¼Œ <code>-m</code>ï¼šä¸ºæè¿°, åé¢ç´§æ¥ç€çš„æ˜¯containerçš„idï¼Œ <code>test:1</code> æ˜¯æäº¤çš„é•œåƒåç§°å’Œç‰ˆæœ¬ã€‚</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z image]# docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE</div><div class="line"><span class="keyword">test                 </span>1                   8f1d192a4ea2        About a minute ago   266.7 MB</div><div class="line">centos              latest              0f0be3675ebb        7 days ago           196.6 MB</div></pre></td></tr></table></figure>
<p>å†æŸ¥çœ‹çš„æ—¶å€™å·²ç»å¤šäº†ä¸€ä¸ªimageäº†ï¼Œè¿™ä¸ªimageå°±æ˜¯æˆ‘ä»¬å®‰è£…äº†zipçš„imageï¼Œåˆ°æ­¤æˆ‘ä»¬å·²ç»ç”Ÿæˆä¸€ä¸ªæ–°çš„imageã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªæ–°çš„é•œåƒå¯åŠ¨å®¹å™¨ï¼Œè¿˜æ˜¯å‰é¢ä»‹ç»è¿‡çš„å‘½ä»¤<code>docker run</code> å¹¶æµ‹è¯•ä¸‹zipï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z image]# sudo docker <span class="keyword">run</span> -t -i o2team-<span class="keyword">test</span>:2 /bin/bash</div><div class="line">[root@2f1f28be351c /]# <span class="keyword">zip</span></div><div class="line"><span class="keyword">Copyright</span> (c) 1990-2008 Info-<span class="keyword">ZIP</span> - <span class="keyword">Type</span> '<span class="keyword">zip</span> <span class="string">"-L"</span>' <span class="keyword">for</span> software license.</div><div class="line"><span class="keyword">Zip</span> 3.0 (July 5th 2008). Usage:</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>å¥½äº†è¿™ä¸ªé•œåƒå·²ç»åˆ¶ä½œå®Œæˆï¼Œå½“ç„¶å®é™…æƒ…å†µä¸‹ï¼Œå®‰è£…çš„è‚¯å®šä¸ä»…ä»…åªæœ‰zipè¿™ä¹ˆç®€å•ã€‚</p>
<p>ä½†æ˜¯åœ¨ä¸€ä¸ªå›¢é˜Ÿé‡Œï¼Œä»…ä»…ç»™æˆ‘ä»¬imageï¼Œæˆ‘ä»¬å¯èƒ½ä¸çŸ¥é“è¿™ä¸ªé•œåƒåˆ°åº•åšäº†ä»€ä¹ˆï¼Œæ‰€ä»¥è¿˜æœ‰ä¸€ç§æ–¹æ³•ä½¿ç”¨ é…ç½®æ–‡ä»¶<code>Dockerfile</code>ï¼Œbuildå‡ºæ¥ä¸€ä¸ªé•œåƒï¼Œè¿™æ ·æ›´æ˜“äºå›¢é˜Ÿåä½œ,ä¸‹é¢æˆ‘å°†ä»‹ç»ä¸€ä¸‹è¿™ç§æ–¹å¼ã€‚</p>
<h3 id="é€šè¿‡Dockerfile-é…ç½®æ–°çš„image"><a href="#é€šè¿‡Dockerfile-é…ç½®æ–°çš„image" class="headerlink" title="é€šè¿‡Dockerfile é…ç½®æ–°çš„image"></a>é€šè¿‡Dockerfile é…ç½®æ–°çš„image</h3><p>å¼€å§‹ä¹‹å‰é¡ºä¾¿ä»‹ç»åˆ é™¤imageå’Œcontainerçš„å‘½ä»¤ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯<code>docker rmi</code> åˆ é™¤image å’Œ <code>docker rm</code> åˆ é™¤containerï¼Œåé¢éƒ½æ˜¯è·Ÿå¯¹åº”çš„idæˆ–è€…åç§°ï¼Œä¸ºäº†åé¢çš„æ“ä½œæˆ‘ä»¬è¿™é‡Œé€šè¿‡å‘½ä»¤ <code>docker rmi 8f1d192a4ea2</code> åˆ é™¤æ‰åˆšæ‰å»ºçš„imageã€‚</p>
<p><em>æ³¨ï¼šå¦‚æœå‘ç°åˆ ä¸æ‰imageï¼Œå¯èƒ½è¢«æŸäº›å®¹å™¨å¼•ç”¨äº†ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢ä»‹ç»çš„<code>docker ps -a</code>æŸ¥çœ‹containerï¼Œå¹¶ç”¨ <code>docker rm</code>åˆ é™¤æ‰è¿™ä¸ªcontainer</em>ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬åˆ›å»º<code>Dockerfile</code><br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>mkdir o2team</div><div class="line"><span class="variable">$ </span>cd o2team</div><div class="line"><span class="variable">$ </span>touch Dockerfile</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯ <code>Dockerfile</code> ä¸­çš„å†…å®¹<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Dockerfile for o2team</span></div><div class="line"><span class="comment"># http://aotu.io/</span></div><div class="line"><span class="keyword">FROM</span> centos</div><div class="line"><span class="keyword">MAINTAINER</span> lizhi &lt;fanlizhi@jd.com&gt;</div><div class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install zip</span></div></pre></td></tr></table></figure></p>
<p><code>#</code>ä¸ºæ³¨é‡Šï¼Œ<code>FROM centos</code> ä¸ºåŸºç¡€é•œåƒæ¥æºï¼Œ<code>MAINTAINER</code>ä¸ºä½œè€…ä¿¡æ¯, <code>RUN</code> åˆ™ä¸º è¿è¡ŒæŸäº› å‘½ä»¤ï¼Œç¼–è¾‘å®Œæˆåä¿å­˜ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ„å»ºæˆ‘ä»¬æ–°çš„imageï¼ŒDockerfileè¯¦ç»†ä½¿ç”¨æ–‡æ¡£å¯ä»¥å‚çœ‹<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@AY130809220512304015Z</span> o2team-test]<span class="meta"># docker build -t test:1 .</span></div></pre></td></tr></table></figure>
<p><code>docker build</code>å°±æ˜¯é€šè¿‡Dockfileæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Imageï¼Œå…¶ä¸­ <code>-t</code>:ä¸ºæ–°imageçš„åå­—è¿™é‡Œå‘½åä¸ºtest:1ï¼Œ <code>&quot;.&quot;</code> åˆ™ä¼šåœ¨å½“å‰çš„ç›®å½•ä¸‹æ‰¾ <code>Dockerfile</code> æ–‡ä»¶,å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥æŒ‡å®šè·¯å¾„ã€‚</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z o2team-test]# docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</div><div class="line"><span class="keyword">test                </span>1                   8975f3fb142e        8 seconds ago       266.7 MB</div><div class="line">centos              latest              0f0be3675ebb        9 days ago          196.6 MB</div></pre></td></tr></table></figure>
<p>å°±è¿™æ ·ï¼Œé€šè¿‡<code>docker images</code>ä¹Ÿèƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒäº†ï¼Œè¿™ç§ç”¨Dockerfileçš„æ–¹å¼æ›´åŠ é€‚åˆå›¢é˜Ÿä½¿ç”¨ï¼Œç¯å¢ƒé…ç½®æ›´æ¸…æ™°ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦ç®¡ç†æˆ‘ä»¬çš„é•œåƒå°±å¥½äº†ï¼Œæ¯”å¦‚åŒæ­¥é•œåƒç»™å…¶ä»–äººï¼Œæˆ–è€…å…¶ä»–æœºå™¨ã€‚</p>
<p>å…¶å®dockerå°±ç»™æˆ‘ä»¬æä¾›äº†è¿™æ ·ä¸€æ•´å¥—çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„é•œåƒæäº¤åˆ° <strong><a href="https://hub.docker.com/" target="_blank" rel="external">Docker Hub</a></strong>ï¼Œç±»ä¼¼ <code>github</code>ä¸€æ ·çš„è¿œç¨‹ä»“åº“ï¼Œå½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™åªéœ€è¦ pullä¸‹æ¥å¯åŠ¨å°±å¥½äº†ã€‚</p>
<h3 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h3><p>æˆ‘ä»¬å°±æŠŠè¿™ä¸ªtesté•œåƒæäº¤åˆ°<code>Docker Hub</code></p>
<p>é¦–å…ˆæˆ‘ä»¬å¾—å…ˆæ³¨å†Œï¼š<a href="https://hub.docker.com/" target="_blank" rel="external">https://hub.docker.com/</a></p>
<p>æ³¨å†ŒæˆåŠŸåå°±å¯ä»¥<code>docker login</code>ç™»å½•äº†<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@AY130809220512304015Z</span> o2team-test]<span class="meta"># docker login</span></div><div class="line">&gt; Username: a569171010</div><div class="line">&gt; Password: xxx</div><div class="line">&gt; Email: fanlizhi<span class="symbol">@jd</span>.com</div><div class="line">Login Succeeded</div></pre></td></tr></table></figure></p>
<p>å¡«å®Œç™»å½•åå°±å¯ä»¥pushäº†ï¼Œæ³¨æ„è¿™é‡Œpushä¹‹å‰å¾—ç¡®ä¿åç§°æ˜¯ <code>youruser/xxx</code><br>æ¯”å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯ a569171010 æ‰€ä»¥æˆ‘éœ€è¦å°†åˆšæ‰çš„image é‡å‘½åæˆ a569171010/test:1,è¿™é‡Œå¯ä»¥ç”¨<code>docker tag</code>å‘½ä»¤é‡å‘½åã€‚</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@AY130809220512304015Z o2team-<span class="keyword">test</span>]# docker tag <span class="keyword">test</span>:<span class="number">1</span> a569171010/<span class="keyword">test</span>:<span class="number">1</span></div><div class="line">[root@AY130809220512304015Z o2team-<span class="keyword">test</span>]# docker <span class="keyword">push</span> a569171010/<span class="keyword">test</span>:<span class="number">1</span></div></pre></td></tr></table></figure>
<p>ç„¶åå°±å‘å¸ƒå‡ºå»äº†ï¼Œåœ¨ <strong><a href="https://hub.docker.com/" target="_blank" rel="external">Docker Hub</a></strong> ä¸Šå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢å¤šäº†è¿™ä¸€æ¡è®°å½•ï¼Œå½“æˆ‘ä»¬è¦è·å–çš„æ—¶å€™å°±ç›´æ¥ <code>docker pull a569171010/test</code>å°±å¯ä»¥äº†ï¼Œå› ä¸ºæ˜¯å…¬ç”¨åº“æ‰€ä»¥ä»»ä½•äººéƒ½å¯ä»¥è·å–å¹¶ä½¿ç”¨ã€‚<br><img src="//img.aotu.io/lizhi/docker/a569171010-test.png" alt="img"></p>
<p>æˆ‘ä»¬å·²ç»åŸºæœ¬ç†Ÿæ‚‰ï¼Œäº†è§£äº†æ•´ä¸ªDockerä½¿ç”¨çš„æµç¨‹ï¼Œå›è¿‡å¤´æ¥çœ‹çœ‹å¼€å§‹æˆ‘ä»¬æŠ›å‡ºçš„é‚£å‡ ä¸ªæ›¾ç»å¾ˆæ£˜æ‰‹çš„é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯éƒ½èƒ½è¿åˆƒè€Œè§£å‘¢ï¼Ÿå› ä¸ºimageçš„å¯ç§»æ¤å’Œéš”ç¦»æ€§ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥è½»æ¾è¿ç§»æ‰©å±•ï¼Œè¿˜èƒ½è½»æ¾äº†è§£ç°åœ¨æœºå™¨ä¸Šå„ä¸ªæœåŠ¡è¿è¡Œæƒ…å†µã€‚</p>
<p>ä¸‹å›¾ä¸ºDockeræ•´ä¸ªä½¿ç”¨æµç¨‹ï¼š<br><img src="//img.aotu.io/lizhi/docker/cmmd.png" alt="img"></p>
<h3 id="æœ¬æ–‡å‚è€ƒèµ„æ–™"><a href="#æœ¬æ–‡å‚è€ƒèµ„æ–™" class="headerlink" title="æœ¬æ–‡å‚è€ƒèµ„æ–™"></a>æœ¬æ–‡å‚è€ƒèµ„æ–™</h3><p><a href="https://www.docker.com/" target="_blank" rel="external">Docker å®˜æ–¹æ–‡æ¡£</a><br><a href="http://www.widuu.com/docker/index.html" target="_blank" rel="external">Docker ä¸­æ–‡æŒ‡å—</a><br><a href="http://dockone.io/article/101" target="_blank" rel="external">dockone.io å›½å†…æ¯”è¾ƒæ´»è·ƒçš„Dockerè®ºå›</a><br><a href="http://tech.meituan.com/docker_introduction.html" target="_blank" rel="external">Docker å…¥é—¨ä»‹ç»</a><br><a href="https://github.com/docker/docker-registry" target="_blank" rel="external">Docker github</a><br><a href="https://help.aliyun.com/knowledge_detail/5974865.html" target="_blank" rel="external">é˜¿é‡Œé•œåƒä½¿ç”¨æ–‡æ¡£</a><br><a href="https://zh.wikipedia.org/zh/Docker_(%E8%BB%9F%E9%AB%94" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
<h3 id="è¿˜æƒ³äº†è§£çš„"><a href="#è¿˜æƒ³äº†è§£çš„" class="headerlink" title="è¿˜æƒ³äº†è§£çš„"></a>è¿˜æƒ³äº†è§£çš„</h3><p>è¿™ç¯‡æ–‡ç« åªæ˜¯å¸¦é¢†å¤§å®¶äº†è§£Dockerçš„æ•´ä¸ªä½¿ç”¨æµç¨‹å’Œä½“éªŒï¼Œå…³äºå…¶ä»–çš„ä¸€äº›ç»†èŠ‚é—®é¢˜æ¯”å¦‚ï¼šåå°è¿è¡Œcontainerï¼Œå„containerä¹‹é—´çš„é€šè®¯ï¼Œç«¯å£æ˜ å°„ï¼Œæ–‡ä»¶å…±äº«ç­‰éƒ½æ²¡æœ‰æ¶‰åŠåˆ°,æœ€è¿‘<code>docker1.1.0</code>å‘å¸ƒåˆæœ‰å¾ˆå¤šæ–°çš„ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚æœæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒè¿™äº›ï¼š</p>
<p><a href="http://tech.uc.cn/?p=2726" target="_blank" rel="external">åˆ©ç”¨Dockeræ„å»ºå¼€å‘ç¯å¢ƒ</a><br><a href="https://www.gitbook.com/book/yeasy/docker_practice/details" target="_blank" rel="external">Docker-ä»å…¥é—¨åˆ°å®è·µ</a><br><a href="https://github.com/veggiemonk/awesome-docker" target="_blank" rel="external">Docker-å­¦ä¹ èµ„æ–™</a><br><a href="https://blog.docker.com/2016/02/docker-1-10/" target="_blank" rel="external">Docker 1.1.0æ–°ç‰¹æ€§</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡æ—¨åœ¨è®©å¤§å®¶äº†è§£ä»€ä¹ˆæ˜¯Dockerï¼Œå¹¶å¸¦é¢†å¤§å®¶ä½“éªŒDockerä½¿ç”¨çš„æ•´ä¸ªæµç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="docker" scheme="https://aotu.io/tags/docker/"/>
    
      <category term="ç¯å¢ƒ" scheme="https://aotu.io/tags/%E7%8E%AF%E5%A2%83/"/>
    
      <category term="éƒ¨ç½²" scheme="https://aotu.io/tags/%E9%83%A8%E7%BD%B2/"/>
    
      <category term="docker hub" scheme="https://aotu.io/tags/docker-hub/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨npm scriptsæ›¿ä»£gulp</title>
    <link href="https://aotu.io/notes/2016/02/26/use-npm-script-instead-of-gulp/"/>
    <id>https://aotu.io/notes/2016/02/26/use-npm-script-instead-of-gulp/</id>
    <published>2016-02-26T08:06:24.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨npm-scriptsæ›¿ä»£gulp"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨npm-scriptsæ›¿ä»£gulp" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨npm scriptsæ›¿ä»£gulp"></a>ä¸ºä»€ä¹ˆè¦ç”¨<code>npm scripts</code>æ›¿ä»£<code>gulp</code></h2><p>ç°åœ¨<code>å‰ç«¯è‡ªåŠ¨åŒ–</code>çš„é…å¥—å·¥å…·ä¼°è®¡éƒ½ç¦»ä¸å¼€<code>gulp</code>æˆ–è€…æ˜¯<code>grunt</code>ï¼Œæœ‰ä¸€äº›æˆ–è®¸ä¼šç”¨ä¸Š<code>webpack</code>è¾…åŠ©ç”¨ä¸Šæœ€æ–°çš„<code>ES6</code>è¯­æ³•ç­‰ï¼›ä½†æ˜¯ä¸çŸ¥é“å¤§å®¶åœ¨ä½¿ç”¨<code>gulp</code>ä¼—å¤šæ’ä»¶çš„æ—¶å€™æœ‰æ²¡æœ‰ç¢°åˆ°è¿‡ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼šæœ‰ä¸€äº›æ’ä»¶ä½ ä»…ä»…éœ€è¦ç”¨åˆ°å…¶ä¸­ä¸€ç‚¹ç‚¹çš„APIã€æ’ä»¶æ›´æ–°é€Ÿåº¦éå¸¸æ…¢ã€æœ‰ä¸€äº›æ’ä»¶ç¢°åˆ°bugçš„æ—¶å€™è°ƒè¯•èµ·æ¥éå¸¸éº»çƒ¦ç­‰ã€‚æ‰€ä»¥æ€»ç»“ä¸€ä¸‹<code>gulp</code>æˆ–è€…<code>grunt</code>å…¶å®éƒ½ä¼šæœ‰ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>ä¾èµ–äºæ’ä»¶ä½œè€…</li>
<li>è°ƒè¯•å¾ˆä¸æ–¹ä¾¿</li>
<li>æ’ä»¶æ–‡æ¡£è¯´æ˜ä¸è¿è´¯</li>
</ol>
<p>è€Œå¦‚æœç›´æ¥ä½¿ç”¨<code>npm scripts</code>å®Œå…¨å¯ä»¥é¿å…è¿™äº›é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬<code>package.json</code>é‡Œé¢çš„<code>scripts</code>å±æ€§ç›´æ¥å®šä¹‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¯”å¦‚<code>npm start</code>å’Œ<code>npm test</code>å…¶å®å°±æ˜¯<code>npm run start</code>å’Œ<code>npm run test</code>çš„ç¼©å†™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>scripts</code>é‡Œé¢å®šä¹‰å„ç§éœ€è¦çš„ä»»åŠ¡ï¼Œä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­(æ¸…é™¤distç›®å½•)ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># 1.ç”¨gulpæ’ä»¶æ¥å®ç°</div><div class="line">var gulp = require('gulp');</div><div class="line">var del  = require('del');</div><div class="line">gulp.task('clean', function() &#123;</div><div class="line">    del(['./dist/**/*']).then(paths =&gt; &#123;</div><div class="line">        console.log('Deleted files and folders:\n', paths.join('\n'));</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"># 2.ç”¨npm scriptsæ¥å®ç°</div><div class="line"># package.jsoné…ç½®</div><div class="line">    ...</div><div class="line">    "scripts": &#123;</div><div class="line">        clean: "rimraf ./dist"</div><div class="line">    &#125;,</div><div class="line">    "devDependencies": &#123;</div><div class="line">        "rimraf": "^2.5.2"</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ç¤ºä¾‹ä»£ç å¯ä»¥çœ‹å‡ºæ˜æ˜¾ç›´æ¥ç”¨<code>npm scripts</code>å®ç°çš„åŒä¸€ä¸ªåŠŸèƒ½ç›¸å¯¹<code>gulp</code>è¦ç®€å•å¾—å¤šï¼Œå½“ç„¶è¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå¦‚æœç¢°åˆ°å¤æ‚çš„ä¸€äº›ä»»åŠ¡è‚¯å®šå°±æœ‰åå¯¹çš„å£°éŸ³äº†ã€‚é‚£æˆ‘ä»¬å°†ç»†ç»†å°†ä¸Šé¢ä¸‰ç‚¹æ¥é˜è¿°ã€‚</p>
<h3 id="ä¾èµ–äºæ’ä»¶ä½œè€…"><a href="#ä¾èµ–äºæ’ä»¶ä½œè€…" class="headerlink" title="ä¾èµ–äºæ’ä»¶ä½œè€…"></a>ä¾èµ–äºæ’ä»¶ä½œè€…</h3><p>å½“ä½ éœ€è¦ä½¿ç”¨åˆ°æœ€æ–°çš„æˆ–è€…ä¸é‚£ä¹ˆæµè¡Œçš„æŠ€æœ¯æ—¶ï¼Œæ ¹æœ¬å°±æ²¡æœ‰æ’ä»¶ç»™ä½ ä½¿ç”¨ï¼›æˆ–è€…ä¸€äº›æ’ä»¶å·²ç»è¿‡æ—¶äº†ã€‚æœ€æ–°<code>Babel 6</code>å·²ç»å‘å¸ƒï¼Œå¾ˆå¤šAPIæ˜æ˜¾ä¿®æ”¹äº†ï¼Œæ‰€ä»¥å¾ˆå¤š<code>gulp</code>æ’ä»¶æ ¹æœ¬ä¸é€‚ç”¨äºæœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ä½ å°±å¿…é¡»ç­‰å¾…ä½œè€…æ¥æ›´æ–°æ’ä»¶ï¼Œæˆ–è€…ä½ è‡ªå·±å»<code>fix</code>è¿™äº›é—®é¢˜ï¼Œè¿™ä¼šå¯¼è‡´ä½ ä¸èƒ½åŠæ—¶ç”¨ä¸Šæœ€æ–°ç‰ˆæœ¬çš„å·¥å…·ã€‚ç›¸åï¼Œå½“ä½ ç›´æ¥ä½¿ç”¨<code>npm scripts</code>çš„æ—¶å€™ï¼Œä½ åªéœ€è¦ç›´æ¥æ‰¾åˆ°å¯ä»¥å®ç°çš„å·¥å…·å³å¯ã€‚è¿™æ„å‘³ç€å½“æ–°ç‰ˆæœ¬çš„<code>Mocha</code>ã€<code>Babel</code>ã€<code>Webpack</code>ã€<code>Browserify</code>å‘å¸ƒçš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥é©¬ä¸Šç”¨ä¸Šè¿™äº›ç‰ˆæœ¬ã€‚</p>
<p>å°±ç›®å‰æ’ä»¶æ•°é‡æ¥è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆå¯ä»¥æ‰“è´¥<code>npm</code>åŒ…ï¼š</p>
<p><img src="//img.aotu.io/cnt1992/npm-compare-width-gulp.png" alt="img"></p>
<h3 id="è°ƒè¯•å¾ˆä¸æ–¹ä¾¿"><a href="#è°ƒè¯•å¾ˆä¸æ–¹ä¾¿" class="headerlink" title="è°ƒè¯•å¾ˆä¸æ–¹ä¾¿"></a>è°ƒè¯•å¾ˆä¸æ–¹ä¾¿</h3><p>ç”±äº<code>gulp</code>å¢åŠ äº†ä¸€å±‚æŠ½è±¡ï¼Œæ‰€ä»¥ä¼šæœ‰æ½œåœ¨çš„<code>bug</code>ï¼š</p>
<ol>
<li>æ˜¯å¦åŸºç¡€å·¥å…·å´©æºƒäº†ï¼Ÿ</li>
<li>æ˜¯å¦<code>Grunt</code>/<code>Gulp</code>æ’ä»¶å´©æºƒäº†ï¼Ÿ</li>
<li>æ˜¯å¦é…ç½®æ–‡ä»¶å‡ºé”™äº†ï¼Ÿ</li>
<li>æ˜¯å¦ç”¨äº†ä¸ç¨³å®šçš„ç‰ˆæœ¬ï¼Ÿ</li>
</ol>
<p>è€Œç›´æ¥ä½¿ç”¨<code>npm scripts</code>ç›´æ¥é¿å…äº†ç¬¬2ç‚¹è·Ÿç¬¬3ç‚¹ï¼Œè€Œç”±äºä¸ä½¿ç”¨é‚£ä¹ˆå¤šæ’ä»¶ï¼Œé‚£ä¹ˆåŒ…ç›¸å¯¹è¾ƒå°‘ï¼Œç¬¬4ç‚¹ä¹Ÿå¾ˆå°‘ä¼šç¢°åˆ°ã€‚</p>
<h3 id="æ’ä»¶æ–‡æ¡£è¯´æ˜ä¸è¿è´¯"><a href="#æ’ä»¶æ–‡æ¡£è¯´æ˜ä¸è¿è´¯" class="headerlink" title="æ’ä»¶æ–‡æ¡£è¯´æ˜ä¸è¿è´¯"></a>æ’ä»¶æ–‡æ¡£è¯´æ˜ä¸è¿è´¯</h3><p>ç›¸æ¯”æœ‰ç”¨è¿‡å¾ˆå¤šæ’ä»¶çš„äººéƒ½çŸ¥é“ï¼Œä¸€äº›æ ¸å¿ƒçš„å·¥å…·æ–‡æ¡£å†™å¾—æ€»æ¯”åŒ…è£…èµ·æ¥çš„<code>Gulp</code>æ’ä»¶è¦æ¸…æ™°å¾—å¤šã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœæˆ‘éœ€è¦ç”¨åˆ°<code>gulp-eslint</code>æ’ä»¶ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šä¸æ–­åœ¨<code>gulp-eslint</code>çš„æ–‡æ¡£è·Ÿ<code>ESLint</code>ç½‘ç«™åˆ‡æ¢ï¼Œå¿…é¡»å¯¹æ¯”çœ‹çœ‹ä¸¤è€…å­˜åœ¨äº›ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯å¿½ç•¥ä½¿ç”¨npm-scriptsè€Œæ›´é’çäºGulp"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯å¿½ç•¥ä½¿ç”¨npm-scriptsè€Œæ›´é’çäºGulp" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯å¿½ç•¥ä½¿ç”¨npm scriptsè€Œæ›´é’çäºGulp"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯å¿½ç•¥ä½¿ç”¨<code>npm scripts</code>è€Œæ›´é’çäº<code>Gulp</code></h2><p><code>Gulp</code>å’Œ<code>Grunt</code>ä¹‹æ‰€ä»¥è¿™ä¹ˆæµè¡Œï¼Œä¸»è¦æœ‰ä¸‹é¢4ä¸ªç‚¹ï¼š</p>
<ol>
<li>å¼€å‘è€…è®¤ä¸º<code>npm scripts</code>éœ€è¦èƒ½å†™å‘½ä»¤è¡Œçš„æŠ€èƒ½</li>
<li>å¼€å‘è€…è®¤ä¸º<code>npm scripts</code>èƒ½å¤„ç†çš„èƒ½åŠ›ä¸è¶³å¤Ÿ</li>
<li>å¼€å‘è€…è§‰å¾—<code>Gulp</code>çš„æµå¯¹äºå¿«é€Ÿæ„å»ºæ˜¯å¾ˆæœ‰å¿…è¦çš„</li>
<li>å¼€å‘è€…è®¤ä¸º<code>npm scripts</code>ä¸èƒ½è·¨å¹³å°è¿è¡Œ</li>
</ol>
<h3 id="å¼€å‘è€…è®¤ä¸ºnpm-scriptséœ€è¦èƒ½å†™å‘½ä»¤è¡Œçš„æŠ€èƒ½"><a href="#å¼€å‘è€…è®¤ä¸ºnpm-scriptséœ€è¦èƒ½å†™å‘½ä»¤è¡Œçš„æŠ€èƒ½" class="headerlink" title="å¼€å‘è€…è®¤ä¸ºnpm scriptséœ€è¦èƒ½å†™å‘½ä»¤è¡Œçš„æŠ€èƒ½"></a>å¼€å‘è€…è®¤ä¸º<code>npm scripts</code>éœ€è¦èƒ½å†™å‘½ä»¤è¡Œçš„æŠ€èƒ½</h3><p>å…¶å®ä½ å®Œå…¨ä¸éœ€è¦ç²¾é€šäº<code>Unix</code>æˆ–è€…<code>Windows</code>çš„å‘½ä»¤è¡Œè„šæœ¬ï¼Œæ¯”å¦‚ä½ ä¸çŸ¥é“åœ¨<code>Unix</code>ä¸‹é¢åˆ é™¤ä¸€ä¸ªç›®å½•çš„å‘½ä»¤æ˜¯ï¼š<code>rm -rf</code>ï¼Œè¿™å…¶å®æ²¡å•¥é—®é¢˜ï¼Œä½ å®Œå…¨å¯ä»¥ä½¿ç”¨<a href="https://www.npmjs.com/package/rimraf" target="_blank" rel="external">rimraf</a>ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯è·¨å¹³å°çš„ã€‚åœ¨è¿™é‡Œæ¨èä¸€ä¸ªå·¥å…·åŒ…èµ„æºç½‘ç«™ï¼š<a href="https://libraries.io/" target="_blank" rel="external">libraries.io</a></p>
<h3 id="å¼€å‘è€…è®¤ä¸ºnpm-scriptsèƒ½å¤„ç†çš„èƒ½åŠ›ä¸è¶³å¤Ÿ"><a href="#å¼€å‘è€…è®¤ä¸ºnpm-scriptsèƒ½å¤„ç†çš„èƒ½åŠ›ä¸è¶³å¤Ÿ" class="headerlink" title="å¼€å‘è€…è®¤ä¸ºnpm scriptsèƒ½å¤„ç†çš„èƒ½åŠ›ä¸è¶³å¤Ÿ"></a>å¼€å‘è€…è®¤ä¸º<code>npm scripts</code>èƒ½å¤„ç†çš„èƒ½åŠ›ä¸è¶³å¤Ÿ</h3><p><code>npm scripts</code>å…¶å®æ¯”ä½ æƒ³è±¡ä¸­çš„è¦å¼ºå¤§ï¼Œä¸»è¦ä¾èµ–äº<a href="https://docs.npmjs.com/misc/scripts#description" target="_blank" rel="external">é¢„å¤„ç†å’Œåç½®å¤„ç†é’©å­</a>ï¼Œæ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"npm-scripts-demo"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">"npm scripts demo"</span>,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"prebuild"</span>: <span class="string">"echo I run before the build script"</span>,</div><div class="line">    <span class="string">"build"</span>: <span class="string">"cross-env NODE_ENV=production webpack"</span>,</div><div class="line">    <span class="string">"postbuild"</span>: <span class="string">"echo I run after the build script"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­£å¦‚ä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œ<code>prebuild</code>å®šä¹‰çš„è„šæœ¬ä¼šæ¯”<code>build</code>ä»»åŠ¡å…ˆæ‰§è¡Œï¼Œè€Œ<code>postbuild</code>å®šä¹‰çš„è„šæœ¬ä¼šæ¯”<code>build</code>ä»»åŠ¡åæ‰§è¡Œï¼Œå› ä¸ºç›¸å¯¹äº<code>build</code>æ¥è¯´ï¼Œå¢åŠ äº†ä¸€ä¸ªå‰ç¼€<code>pre</code>å’Œ<code>post</code>ï¼Œæ‰€ä»¥å½“æˆ‘æ‰§è¡Œ<code>npm run build</code>çš„æ—¶å€™ä¼šè‡ªåŠ¨åœ°é¡ºåºæ‰§è¡Œ<code>prebuild -&gt; build -&gt; postbuild</code>ã€‚</p>
<p>åŒæ—¶ä½ å¯ä»¥å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡ä¸æ–­æ‹†åˆ†æˆå°çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"npm-scripts-demo"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">"npm scripts demo"</span>,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"clean"</span>: <span class="string">"rimraf ./dist &amp;&amp; mkdir dist"</span>,</div><div class="line">    <span class="string">"prebuild"</span>: <span class="string">"npm run clean"</span>,</div><div class="line">    <span class="string">"build"</span>: <span class="string">"cross-env NODE_ENV=production webpack"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢ä¾‹å­ä¸­å°†<code>clean</code>ä»»åŠ¡æŠ½ç¦»å‡ºæ¥äº†ï¼Œå½“ä½ æ‰§è¡Œ<code>npm run build</code>çš„æ—¶å€™ï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œ<code>npm run prebuild</code>ä»»åŠ¡ï¼Œé‚£å°±ç›¸å½“äºæ‰§è¡Œäº†<code>npm run clean</code>ä»»åŠ¡äº†ï¼Œæ³¨æ„ä¸Šé¢çš„<code>&amp;&amp;</code>è¡¨ç¤ºå…ˆåé¡ºåºæ‰§è¡Œï¼ŒåŒºåˆ«äº<code>&amp;</code>è¡¨ç¤ºåŒæ—¶æ‰§è¡Œã€‚</p>
<h2 id="npm-scriptsçš„ä¸€äº›ç¼ºç‚¹"><a href="#npm-scriptsçš„ä¸€äº›ç¼ºç‚¹" class="headerlink" title="npm scriptsçš„ä¸€äº›ç¼ºç‚¹"></a><code>npm scripts</code>çš„ä¸€äº›ç¼ºç‚¹</h2><p>ä¸å¾—ä¸æ‰¿è®¤ï¼Œç”¨<code>npm scripts</code>æ¥å†™è‡ªåŠ¨åŒ–æ„å»ºä»»åŠ¡è¿˜æ˜¯å­˜åœ¨ä¸€äº›ä¸è¶³ï¼šä¸èƒ½åœ¨JSONæ–‡ä»¶é‡Œé¢å†™æ³¨é‡Šã€‚æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥å¼¥è¡¥è¿™æ–¹é¢çš„ä¸è¶³ï¼š</p>
<ol>
<li>å†™åŠŸèƒ½ç›¸å¯¹å°è€Œç‹¬ç«‹å¹¶ä¸”å‘½åå¥½çš„è„šæœ¬åå­—</li>
<li>è„šæœ¬è·Ÿæ–‡æ¡£åˆ†ç¦»ï¼ˆå°†æ–‡æ¡£å†™è¿›READ.mdï¼‰</li>
<li>ç›´æ¥åˆ†ç¦»è„šæœ¬å†™è¿›Makefileç­‰ç‹¬ç«‹çš„æ–‡ä»¶</li>
</ol>
<p>æ¨èä½¿ç”¨ç¬¬ä¸€ç§ï¼Œè„šæœ¬åå­—æœ¬æ¥å°±åº”è¯¥èƒ½å¤Ÿç›´æ¥æè¿°åŠŸèƒ½ã€‚</p>
<h2 id="ä¸€äº›å‚è€ƒ"><a href="#ä¸€äº›å‚è€ƒ" class="headerlink" title="ä¸€äº›å‚è€ƒ"></a>ä¸€äº›å‚è€ƒ</h2><ul>
<li><a href="http://substack.net/task_automation_with_npm_run" target="_blank" rel="external">Task automation with npm run</a> â€“ James Holliday</li>
<li><a href="https://www.youtube.com/watch?v=0RYETb9YVrk" target="_blank" rel="external">Advanced front-end automation with npm scripts</a> â€“ Kate Hudson</li>
<li><a href="http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/" target="_blank" rel="external">How to use npm as a build tool</a> â€“ Kieth Girkel</li>
<li><a href="http://app.pluralsight.com/courses/npm-build-tool-introduction" target="_blank" rel="external">Introduction to npm as a Build Tool</a> â€“ Marcus Hammarberg</li>
<li><a href="http://gon.to/2015/02/26/gulp-is-awesome-but-do-we-really-need-it/" target="_blank" rel="external">Gulp is awesome, but do we really need it?</a> â€“ Gonto</li>
<li><a href="http://code.tutsplus.com/courses/npm-scripts-for-build-tooling" target="_blank" rel="external">NPM Scripts for Build Tooling</a> â€“ Andrew Burgess</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦ç”¨npm-scriptsæ›¿ä»£gulp&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦ç”¨npm-scriptsæ›¿ä»£gulp&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦ç”¨npm scriptsæ›¿ä»£gulp&quot;&gt;&lt;/a&gt;ä¸ºä»€
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="npm" scheme="https://aotu.io/tags/npm/"/>
    
      <category term="gulp" scheme="https://aotu.io/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>Node ç”Ÿäº§ç¯å¢ƒè°ƒè¯•</title>
    <link href="https://aotu.io/notes/2016/02/24/node-debug-in-production/"/>
    <id>https://aotu.io/notes/2016/02/24/node-debug-in-production/</id>
    <published>2016-02-24T04:25:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä»¥é—®ç­”çš„å½¢å¼ï¼Œä»‹ç»ç”Ÿäº§ç¯å¢ƒä¸­è¯¥å¦‚ä½•å»è°ƒè¯• Node åº”ç”¨ã€‚<br>æ–‡ç« è¦†ç›–åˆ°äº†<strong>æ€§èƒ½é—®é¢˜</strong>ã€<strong>å´©æºƒé—®é¢˜</strong>ã€<strong>å†…å­˜æ³„éœ²</strong>çš„æ£€æŸ¥å’Œè§£å†³æ‰‹æ®µã€‚</p>
<h2 id="éšç€ç”¨æˆ·è¯·æ±‚æ•°è¶Šæ¥è¶Šå¤šï¼ŒNode-è¯·æ±‚è¶Šæ¥è¶Šæ…¢ã€‚æ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#éšç€ç”¨æˆ·è¯·æ±‚æ•°è¶Šæ¥è¶Šå¤šï¼ŒNode-è¯·æ±‚è¶Šæ¥è¶Šæ…¢ã€‚æ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="éšç€ç”¨æˆ·è¯·æ±‚æ•°è¶Šæ¥è¶Šå¤šï¼ŒNode è¯·æ±‚è¶Šæ¥è¶Šæ…¢ã€‚æ€ä¹ˆå¤„ç†ï¼Ÿ"></a>éšç€ç”¨æˆ·è¯·æ±‚æ•°è¶Šæ¥è¶Šå¤šï¼ŒNode è¯·æ±‚è¶Šæ¥è¶Šæ…¢ã€‚æ€ä¹ˆå¤„ç†ï¼Ÿ</h2><p>æ¯ä¸ªç”¨æˆ·çš„è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡è¿™å‡ ä¸ªé˜¶æ®µï¼š</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ç½‘ç»œè¯·æ±‚ -&gt; Node ä¸­é—´å±‚ -&gt; ç›®æ ‡æ¥å£ -&gt; è¿”å›</div></pre></td></tr></table></figure>
<p>å‰ä¸‰ä¸ªè¿‡ç¨‹éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„æ—¶é—´ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥åˆ†ææ¯ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼Œè¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</p>
<p>å‡è®¾ä½ æ˜¯ç”¨ Express ä½œä¸º API æœåŠ¡å™¨ï¼Œä½ å¯ä»¥åˆ©ç”¨ Express å®˜æ–¹çš„ <a href="https://github.com/expressjs/response-time" target="_blank" rel="external">response-time</a> å’Œ <a href="https://github.com/sivy/node-statsd" target="_blank" rel="external">StatsD</a>ï¼Œ<br>å°†æ¯ä¸ªä¸­é—´å±‚çš„è¯·æ±‚æ•°æ®éƒ½æ”¶é›†å¹¶ç»Ÿè®¡èµ·æ¥ã€‚</p>
<p>ä½†åœ¨ Express ä¸–ç•Œä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´ä¸“æ³¨äºåš API æœåŠ¡å™¨çš„æ¡†æ¶ï¼Œå« <a href="https://github.com/restify/node-restify" target="_blank" rel="external">restify</a>ã€‚<br>restify æ˜¯ä¸€ä¸ªçº¯ Restful çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥ç»“åˆ DTrace å»è®°å½•ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ä¸­ï¼Œæ¯ä¸ªç¯èŠ‚æ¶ˆè€—çš„æ—¶é—´ã€‚</p>
<p>å›¾ä¸­é«˜äº®çš„éƒ¨åˆ†æ˜¯ restify å¯¹äºè¯·æ±‚è€—æ—¶çš„è®°å½•ï¼š</p>
<p><img src="https://cloud.githubusercontent.com/assets/6262943/11868141/c7fce5e2-a4f0-11e5-8299-5f13b06fa60f.png" alt="resify_bunyan"></p>
<p>æ­¤å¤–ï¼Œrestify è¿˜æœ‰ç€æ›´å¤šå¼ºå¤§åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¯·æ±‚é¢‘ç‡æ§åˆ¶ã€å†…ç½® Ajax é”™è¯¯ç±»å‹ã€åŸºäº <a href="https://github.com/trentm/node-bunyan" target="_blank" rel="external">bunyan</a> çš„æ—¥å¿—ã€‚</p>
<h2 id="å¦‚ä½•çŸ¥é“çº¿ä¸Šé¡¹ç›®å“ªä¸ªå‡½æ•°æ¶ˆè€—æ›´å¤šçš„-CPU-æ—¶é—´ï¼Ÿ"><a href="#å¦‚ä½•çŸ¥é“çº¿ä¸Šé¡¹ç›®å“ªä¸ªå‡½æ•°æ¶ˆè€—æ›´å¤šçš„-CPU-æ—¶é—´ï¼Ÿ" class="headerlink" title="å¦‚ä½•çŸ¥é“çº¿ä¸Šé¡¹ç›®å“ªä¸ªå‡½æ•°æ¶ˆè€—æ›´å¤šçš„ CPU æ—¶é—´ï¼Ÿ"></a>å¦‚ä½•çŸ¥é“çº¿ä¸Šé¡¹ç›®å“ªä¸ªå‡½æ•°æ¶ˆè€—æ›´å¤šçš„ CPU æ—¶é—´ï¼Ÿ</h2><p>å‚è€ƒä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼Œé€šè¿‡å¯è§†åŒ–çš„è§’åº¦ï¼Œæªå‡ºæ¶ˆè€— CPU çš„å‡¶æ‰‹ã€‚</p>
<ol>
<li>ç¡®ä¿ä½ çº¿ä¸Šçš„ Node ç‰ˆæœ¬æ˜¯ 5.0 ä»¥ä¸Š</li>
<li><p>å¯åŠ¨ Node é¡¹ç›®æ—¶ï¼Œå¢åŠ  <code>--perf-basic-prof-only-functions</code> å‚æ•°ï¼Œå¦‚ï¼š</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node --perf-basic-prof-only-functions app.js &amp;   <span class="comment"># Tips: `&amp;`è¡¨ç¤ºåå°è¿è¡Œè¯¥ä»£ç </span></div></pre></td></tr></table></figure>
</li>
<li><p>ç”¨ <a href="https://perf.wiki.kernel.org/index.php/Tutorial" target="_blank" rel="external">perf</a> ç”Ÿæˆ Node è¿›ç¨‹çš„æ ˆä¿¡æ¯æ–‡ä»¶(stack trace)</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">sudo yum install perf  <span class="comment"># perf éç³»ç»Ÿè‡ªå¸¦ï¼Œéœ€å¦å¤–å®‰è£…</span></div><div class="line"></div><div class="line"><span class="comment"># è·å– Node çš„è¿›ç¨‹ IDï¼Œç”¨ 30 ç§’æ—¶é—´è®°å½•æ ˆä¿¡æ¯å¹¶ç”Ÿæˆ `perf-xxxxx.map` æ–‡ä»¶ï¼ˆè¢«ä¿å­˜åœ¨ /tmp/ï¼‰</span></div><div class="line">sudo perf record -F 99 -p `pgrep -n node` -g -- sleep 30</div><div class="line"></div><div class="line">ls /tmp/*.map                         <span class="comment"># æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></div><div class="line">sudo chown root /tmp/perf-xxxxx.map   <span class="comment"># è¯¥æ–‡ä»¶è®¾ç½®æƒé™</span></div><div class="line">sudo perf script &gt; nodestacks         <span class="comment"># å°†è¯¥æ–‡ä»¶è½¬æ¢æˆå¯è§£æçš„ `nodestacks` æ–‡ä»¶</span></div></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹è½½ FlameGraph å¹¶ç”Ÿæˆå¯è§†åŒ–çš„æ ˆä¿¡æ¯ç«ç„°å›¾</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> --depth 1 http://github.com/brendangregg/FlameGraph  <span class="comment"># ä¸‹è½½ FlameGraph</span></div><div class="line"></div><div class="line"><span class="comment"># ç”Ÿæˆç«ç„°å›¾</span></div><div class="line"><span class="built_in">cd</span> FlameGraph</div><div class="line">./stackcollapse-perf.pl &lt; ../nodestacks | ./flamegraph.pl --colors js &gt; ../node-flamegraph.svg</div></pre></td></tr></table></figure>
</li>
</ol>
<p>æœ€åä¼šç”Ÿæˆç±»ä¼¼è¿™æ ·çš„å›¾ç‰‡ï¼š</p>
<p><img src="https://cloud.githubusercontent.com/assets/6262943/11839496/56be9ce4-a429-11e5-85b7-64e1cc730e52.png" alt="image"></p>
<p><strong>è§£é‡Šè¿™ç§å›¾ç‰‡çš„å«ä¹‰ï¼š</strong></p>
<ol>
<li>æ¯ä¸ªæ–¹å—ä¸ºè¢«è°ƒç”¨çš„å‡½æ•°</li>
<li>X è½´è¡¨ç¤º CPU çš„æ¶ˆè€—æ—¶é—´</li>
<li>Y è½´è¡¨ç¤ºæ ˆçš„æ·±åº¦</li>
<li>é¢œè‰²ä¸ºéšæœºå€¼</li>
</ol>
<p>å¦‚æœæ–¹å—æ¨ªå‘è¶Šé•¿ï¼Œè¯´æ˜è¿™ä¸ªå‡½æ•°æ¶ˆè€—çš„ CPU æ—¶é—´è¶Šå¤šã€‚<br>è¿™æ ·ï¼Œä½ å°±å¯ä»¥å®šä½åˆ°è¿™ä¸ªå‡½æ•°ï¼Œæ·±å…¥ä»£ç å»å®šä½é—®é¢˜äº†ã€‚</p>
<h2 id="å¦‚ä½•æ”¶é›†çº¿ä¸Šçš„å´©æºƒä¿¡æ¯ï¼Ÿ"><a href="#å¦‚ä½•æ”¶é›†çº¿ä¸Šçš„å´©æºƒä¿¡æ¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ”¶é›†çº¿ä¸Šçš„å´©æºƒä¿¡æ¯ï¼Ÿ"></a>å¦‚ä½•æ”¶é›†çº¿ä¸Šçš„å´©æºƒä¿¡æ¯ï¼Ÿ</h2><p>å¯ä»¥è®© Node åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè®°å½•è‡ªèº«çš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶å´©æºƒçš„æ—¶å€™è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚<br>è€Œè¿™äº›è°ƒè¯•ä¿¡æ¯è¢«ç§°ä¸º <a href="https://en.wikipedia.org/wiki/Core_dump" target="_blank" rel="external">Core Dump</a>ï¼Œä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Core æ–‡ä»¶ã€‚<br>Core æ–‡ä»¶è®°å½•äº†è¿›ç¨‹è¿è¡Œæ—¶çš„ä¸€åˆ‡çŠ¶æ€ï¼ŒåŒ…æ‹¬è°ƒç”¨æ ˆã€å†…å­˜å˜é‡ã€è¢«è°ƒç”¨çš„å‡½æ•°æºç ç­‰ã€‚<br>æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æœ€å¤§åŒ–çš„è¿˜åŸå‡ºå½“æ—¶åº”ç”¨è¿è¡Œçš„è¿‡ç¨‹ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åˆ©ç”¨ <a href="https://github.com/joyent/mdb_v8" target="_blank" rel="external">mdb_v8</a> å·¥å…·ï¼Œè¿™ä¸ªç›®å‰æœ€å¥½çš„ Node å‘½ä»¤è¡Œåˆ†æå·¥å…·ï¼Œç»“åˆä¸€ä¸ªç®€å•æ¡ˆä¾‹æ¥æ¼”ç¤ºã€‚</p>
<ol>
<li><p>é…ç½® Solaris ç¯å¢ƒ</p>
<p> ç”±äº <a href="https://github.com/joyent/mdb_v8" target="_blank" rel="external">mdb_v8</a> åªèƒ½è¿è¡Œåœ¨ Solaris ç¯å¢ƒï¼Œå› æ­¤ä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<ul>
<li>å®‰è£…åŸºäº Illumos çš„ç³»ç»Ÿï¼Œå¦‚ OmniOS è™šæ‹Ÿæœº</li>
<li><p>ä½¿ç”¨ Joyent å…¬å¸æ”¶è´¹çš„ Manta æœåŠ¡ï¼Œè¯·å‚é˜…<a href="https://www.joyent.com/blog/mdb-and-linux" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p>ç¬”è€…ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œå³é€šè¿‡è™šæ‹Ÿæœºè¿è¡Œ mdb_v8ï¼Œè¯¦è§ <a href="issues/5">Vagrant å®‰è£… OmniOS æŒ‡å—</a>ã€‚</p>
</li>
</ul>
</li>
<li><p>å¯åŠ¨ Node é¡¹ç›®æ—¶ï¼Œå¢åŠ  <code>--abort-on-uncaught-exception</code> å‚æ•°ï¼Œè®©åº”ç”¨åœ¨å´©æºƒæ—¶è¾“å‡º Core æ–‡ä»¶</p>
<p> æœ¬æ–‡ç”¨ä»¥ä¸‹ä¼šå´©æºƒçš„ä»£ç æµ‹è¯•ï¼Œç”Ÿæˆ Core æ–‡ä»¶ã€‚</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">myproperty</span>: <span class="string">"Hello World"</span>,</div><div class="line">    <span class="attr">count</span>: <span class="number">0</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    obj.count++;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (obj.count === <span class="number">1000</span>)</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"sad trombone"</span>);  <span class="comment">// è¯¥è¡Œä¼šè®©åº”ç”¨å´©æºƒ</span></div><div class="line">    </div><div class="line">    setImmediate(increment);</div><div class="line">&#125;</div><div class="line"></div><div class="line">setImmediate(increment);</div></pre></td></tr></table></figure>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># è¿è¡Œä¸Šè¿°ä»£ç </span></div><div class="line">node --abort-on-uncaught-exception throw.js</div></pre></td></tr></table></figure>
</li>
<li><p>å°† Core æ–‡ä»¶å’Œ Node äºŒè¿›åˆ¶ç¨‹åºæ‰“åŒ…ï¼Œä¼ åˆ° Vagrant è™šæ‹Ÿæœºå†…</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ‰“åŒ… Core Dump å’Œ Node äºŒè¿›åˆ¶ç¨‹åº</span></div><div class="line">mkdir debug</div><div class="line">cp core.* debug/</div><div class="line">cp $(<span class="built_in">which</span> node) debug/</div><div class="line">zip -r debug.zip debug </div><div class="line"></div><div class="line"><span class="comment"># ä¼ å‹ç¼©åŒ…åˆ° Vagrant è™šæ‹Ÿæœºå†…</span></div><div class="line">mv debug.zip xxxx  <span class="comment"># xxxx è¡¨ç¤º Vagrantfile æ‰€åœ¨çš„ç›®å½•ï¼Œå³ä½ å¯åŠ¨è™šæ‹Ÿæœºçš„ç›®å½•</span></div><div class="line"></div><div class="line"><span class="comment"># åœ¨è™šæ‹Ÿæœºé‡Œè§£å‹ç¼©åŒ…</span></div><div class="line">unzip -o /vagrant/debug.zip <span class="_">-d</span> ~</div></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ <a href="https://github.com/joyent/mdb_v8" target="_blank" rel="external">mdb_v8</a> è§£æ Core æ–‡ä»¶</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸‹è½½æœ€æ–°çš„ mdb_v8 æ¨¡å—</span></div><div class="line">wget https://us-east.manta.joyent.com/Joyent_Dev/public/mdb_v8/v1.1.2/mdb_v8_amd64.so</div><div class="line"></div><div class="line"><span class="comment"># ä½¿ç”¨ mdb å·¥å…·åŠ è½½ Core Dumpï¼Œæ ¼å¼ä¸ºï¼šmdb [Node äºŒè¿›åˆ¶ç¨‹åº] [Core æ–‡ä»¶]</span></div><div class="line">mdb ./node ./core</div><div class="line"></div><div class="line"><span class="comment"># è¿›å…¥ REPL å, è¿è¡Œä»¥ä¸‹ä»£ç åŠ è½½ mdb_v8 æ¨¡å—</span></div><div class="line">&gt; ::load ./mdb_v8_amd64.so</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ†æå´©æºƒåŸå› </p>
<p> 5.1. ä½¿ç”¨ mdb_v8 çš„ <a href="https://github.com/joyent/mdb_v8/blob/master/docs/usage.md#jsstack" target="_blank" rel="external">jsstack</a> æŒ‡ä»¤ï¼ŒæŸ¥çœ‹æœ€åçš„è°ƒç”¨æ ˆæƒ…å†µ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&gt; ::jsstack -v</div><div class="line">native: v8::base::OS::Abort+0xd</div><div class="line">native: v8::internal::Isolate::DoThrow+0x381</div><div class="line">native: v8::internal::Isolate::Throw+0x11</div><div class="line">native: v8::internal::Runtime_Throw+0x3d</div><div class="line">        (1 internal frame elided)</div><div class="line">js:     increment</div><div class="line">        file: /<span class="built_in">export</span>/www/node/mongo-express/throw.js</div><div class="line">        posn: line 6</div><div class="line">        this: 2ac5150<span class="built_in">fc</span>3f9 (JSObject: Immediate)</div><div class="line">        (    1 <span class="keyword">function</span> (exports, require, module, __filename, __dirname) &#123; var obj = &#123;</div><div class="line">            2   myproperty: <span class="string">"Hello World"</span>,</div><div class="line">            3   count: 0,</div><div class="line">            4 &#125;;</div><div class="line">            5</div><div class="line">            6 <span class="keyword">function</span> <span class="function"><span class="title">increment</span></span>() &#123;</div><div class="line">            7   obj.count++;</div><div class="line">            8</div><div class="line">            9   <span class="keyword">if</span> (obj.count === 1000)</div><div class="line">            10     throw new Error(<span class="string">"sad trombone"</span>);</div><div class="line">            11</div><div class="line">            12   <span class="built_in">set</span>Immediate(increment);</div><div class="line">            13 &#125;</div><div class="line">            14</div><div class="line">            15 <span class="built_in">set</span>Immediate(increment);</div><div class="line">            16</div><div class="line">            17 &#125;);</div><div class="line"></div><div class="line">js:     processImmediate</div><div class="line">        file: timers.js</div><div class="line">        posn: line 342</div><div class="line">        this: 2d184056ef69 (JSObject: process)</div><div class="line">        ...</div></pre></td></tr></table></figure>
<p> 5.2. ä»ä¸Šé¢ä¿¡æ¯å¾—çŸ¥ï¼Œæœ€åä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°æ˜¯ <code>increment</code>ï¼Œå› æ­¤å¯ä»¥æŸ¥ä¸‹è¯¥å‡½æ•°çš„åœ°å€</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æŸ¥è¯¢ increment å‡½æ•°åœ°å€å€¼</span></div><div class="line">&gt; ::jsfunctions -n increment</div><div class="line">        FUNC   <span class="comment">#FUNCS NAME         FROM</span></div><div class="line">2ac51509c7a9        1 increment    /<span class="built_in">export</span>/www/node/mongo-express/throw.js line 6</div></pre></td></tr></table></figure>
<p> 5.3. æŸ¥åˆ°åœ°å€å€¼åï¼Œå°±å¯ä»¥æŸ¥å‡ºå‡½æ•°å½“æ—¶çš„å±€éƒ¨å˜é‡</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æŸ¥è¯¢ increment å‡½æ•°å½“æ—¶çš„å±€éƒ¨å˜é‡</span></div><div class="line">&gt; 2ac51509c7a9::jsclosure</div><div class="line"><span class="string">"obj"</span>: 2ac51509c941: &#123;</div><div class="line">    <span class="string">"myproperty"</span>: 2ae60c1a3f39: <span class="string">"Hello World"</span>,</div><div class="line">    <span class="string">"count"</span>: 3e800000000: 1000,</div><div class="line">&#125;</div><div class="line"><span class="string">"increment"</span>: 2ac51509c7a9: <span class="keyword">function</span> increment</div></pre></td></tr></table></figure>
<p> ç»“åˆä»£ç å¯çŸ¥ï¼Œç”±äº <code>count</code> æ•°å€¼å·²ç»åˆ°è¾¾ 1000ï¼Œå¯¼è‡´åº”ç”¨å´©æºƒã€‚</p>
<p> 5.4. å½“ç„¶ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œè¿˜èƒ½æŸ¥åˆ° <code>count</code> å±æ€§æ‰€åœ¨å¯¹è±¡çš„èµ·å§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; ::findjsobjects -p count | ::findjsobjects <span class="_">-l</span> | ::jsprint</div><div class="line">&#123;</div><div class="line">    <span class="string">"myproperty"</span>: <span class="string">"Hello World"</span>,</div><div class="line">    <span class="string">"count"</span>: 0,</div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line">    <span class="string">"myproperty"</span>: <span class="string">"Hello World"</span>,</div><div class="line">    <span class="string">"count"</span>: 1000,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> å¯¹äº mdb_v8 æ›´å¤šçš„ Node æŒ‡ä»¤ï¼Œè¯·å‚é˜…<a href="https://github.com/joyent/mdb_v8/blob/master/docs/usage.md#node-specific-mdb-command-reference" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
</li>
</ol>
<h2 id="å¦‚ä½•è¿½è¸ªå†…å­˜æ³„éœ²é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è¿½è¸ªå†…å­˜æ³„éœ²é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è¿½è¸ªå†…å­˜æ³„éœ²é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è¿½è¸ªå†…å­˜æ³„éœ²é—®é¢˜ï¼Ÿ</h2><p>ä¸Šä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ç”¨ Node çš„ <code>--abort-on-uncaught-exception</code> å‚æ•°ï¼Œè®©åº”ç”¨åœ¨å´©æºƒåè¾“å‡º Core æ–‡ä»¶ã€‚<br>ä½†å¦‚æœåº”ç”¨ä¸€ç›´åœ¨è¿è¡Œï¼ˆå³æ— å´©æºƒï¼‰ï¼Œå¯ä»¥ç”¨ Linux è‡ªå¸¦çš„ <a href="http://man7.org/linux/man-pages/man1/gcore.1.html" target="_blank" rel="external">gcore</a> å‘½ä»¤ï¼Œå¯¼å‡º Core æ–‡ä»¶å¹¶åˆ†æå†…å­˜æ³„éœ²çš„åŸå› ã€‚</p>
<ol>
<li><p>æœ¬æ–‡ç”¨ä»¥ä¸‹ä»£ç æµ‹è¯•ï¼Œè¯¥ä»£ç ä¼šå¯¼è‡´å†…å­˜æ³„éœ²</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bigData = <span class="literal">null</span>;</div><div class="line"><span class="keyword">var</span> replaceData = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> originalData = bigData</div><div class="line">    bigData = &#123;</div><div class="line">        <span class="attr">longStr</span>: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>).join(<span class="string">'*'</span>),</div><div class="line">        <span class="attr">closure</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// è¿™é‡Œå¼•ç”¨åˆ°äº† originalDataï¼Œå¯¼è‡´æ—§çš„ bigData æ²¡æœ‰è¢«é‡Šæ”¾</span></div><div class="line">            <span class="keyword">if</span> (originalData)</div><div class="line">                <span class="built_in">console</span>.log(originalData.longStr.length)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    bigData.closure()</div><div class="line">&#125;</div><div class="line"></div><div class="line">setInterval(replaceData, <span class="number">1000</span>)</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'process id: '</span>, process.pid)</div></pre></td></tr></table></figure>
<p> ç”¨ <code>node xxx.js</code> å‘½ä»¤è¿è¡Œä»£ç å³å¯ã€‚ </p>
</li>
<li><p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œç”¨ <a href="http://man7.org/linux/man-pages/man1/gcore.1.html" target="_blank" rel="external">gcore</a> å¯¹ä¸Šè¿°ä»£ç æ‰€åœ¨è¿›ç¨‹è¿›è¡Œ Core Dump</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># PID ä¸ºè¿›ç¨‹ IDï¼Œä¸Šé¢ä»£ç ä¼šæ‰“å°å‡ºæ¥</span></div><div class="line"><span class="comment"># æ–‡ä»¶ä¼šè¢«ä¿å­˜ä¸º leak_1.PID</span></div><div class="line">gcore -o leak_1 PID  </div><div class="line"></div><div class="line"><span class="comment"># è¿›ç¨‹è¿è¡Œä¸€æ®µæ—¶é—´åï¼ˆå¦‚15ç§’ï¼‰ï¼Œå† Core Dump ä¸€æ¬¡</span></div><div class="line"><span class="comment"># æ–‡ä»¶ä¼šè¢«ä¿å­˜ä¸º leak_2.PID</span></div><div class="line">gcore -o leak_2 PID</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨ mdb_v8 æä¾›çš„å·¥å…· <a href="https://github.com/joyent/mdb_v8/blob/master/tools/dumpjsobjects" target="_blank" rel="external">dumpjsobjects</a>ï¼Œæå– Core æ–‡ä»¶ä¸­çš„ JS å¯¹è±¡ï¼Œå¹¶è¾“å‡ºæ–‡ä»¶</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ¯è¡Œå‘½ä»¤ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º obj_id_x / obj_content_x</span></div><div class="line">./dumpjsobjects ./leak_1.PID ./mdb_v8_amd64.so obj_id_1 obj_content_1</div><div class="line">./dumpjsobjects ./leak_2.PID ./mdb_v8_amd64.so obj_id_2 obj_content_2</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨ mdb_v8 æä¾›çš„å·¥å…· <a href="https://github.com/joyent/mdb_v8/blob/master/tools%2Fmdbv8diff%2Fmdbv8diff" target="_blank" rel="external">mdbv8diff</a>ï¼Œè¿›è¡Œ JS å¯¹è±¡å¯¹æ¯”</p>
<p> æ¯”è¾ƒä¸¤ä¸ªæ—¶æœŸçš„ JS å¯¹è±¡çš„å¼‚åŒï¼Œå³å¯è·å¾—æœªè¢«é‡Šæ”¾çš„å¯¹è±¡åœ°å€ã€‚</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸‹è½½å®‰è£… mdbv8diff</span></div><div class="line">git <span class="built_in">clone</span> https://github.com/joyent/mdb_v8.git</div><div class="line"><span class="built_in">cd</span> mdb_v8/tools/mdbv8diff</div><div class="line">npm install</div><div class="line"></div><div class="line"><span class="comment"># å¯¹æ¯” Core æ–‡ä»¶çš„ JS å¯¹è±¡</span></div><div class="line">./mdbv8diff /path/to/obj_content_1 /path/to/obj_content_2</div></pre></td></tr></table></figure>
<p> æ‰“å°å‡ºæ¥çš„ç»“æœä¸ºï¼š</p>
 <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">135</span><span class="string">f38df83d9:</span> only <span class="keyword">in</span> <span class="regexp">/Users/</span>edc<span class="regexp">/Downloads/</span>omnios/du_3</div></pre></td></tr></table></figure>
</li>
<li><p>ç”¨ mdb_v8 æ‰“å° <code>135f38df83d9</code> å†…å­˜åœ°å€å¯¹åº”çš„å¯¹è±¡</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ‰“å°è¯¥åœ°å€å¯¹è±¡çš„å†…å®¹</span></div><div class="line">&gt; 135f38df83d9::jsprint</div><div class="line">&#123;</div><div class="line">    <span class="string">"longStr"</span>: <span class="string">"*******...."</span>,</div><div class="line">    <span class="string">"closure"</span>: <span class="keyword">function</span> &lt;anonymous&gt; (as bigData.closure),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># æ‰¾å‡ºè¯¥å¯¹è±¡æ‰€æœ‰çš„å®ä¾‹</span></div><div class="line">&gt; 135f38df83d9::findjsobjects</div><div class="line">39fac26f83d9</div><div class="line">39ec3a4f83d9</div><div class="line">3720c57f83d9</div><div class="line">...</div></pre></td></tr></table></figure>
<p> ä»ç»“æœå¯ä»¥å‘ç°ï¼Œè¯¥å¯¹è±¡çš„å®ä¾‹ä¸€ç›´åœ¨å†…å­˜é‡Œæœªè¢«é‡Šæ”¾ã€‚</p>
</li>
</ol>
<h2 id="åè¯­"><a href="#åè¯­" class="headerlink" title="åè¯­"></a>åè¯­</h2><p>æœ¬æ–‡å‚è€ƒäº† Netflix å·¥ç¨‹å¸ˆ <a href="https://twitter.com/YunongX" target="_blank" rel="external">Yunong Xiao</a> çš„<a href="http://techblog.netflix.com/2015/12/debugging-nodejs-in-production.html" target="_blank" rel="external">æ¼”è®²åˆ†äº«</a>ï¼Œåœ¨æ­¤æ„Ÿè°¢ã€‚<br>å¸Œæœ›è¯¥æ–‡ç« å¯ä»¥ç»™è¯»è€…æ›´å¤šè§£å†³ Node ç”Ÿäº§ç¯å¢ƒè°ƒè¯•çš„æ€è·¯ã€‚ä½†å¯¹äºç”Ÿäº§ç¯å¢ƒä¸­é¢ä¸´çš„å„ç§å¤æ‚é—®é¢˜ï¼Œä¹Ÿè®¸éœ€è¦æ›´å¤šçš„æ‰‹æ®µæ‰èƒ½è§£å†³ã€‚ </p>
<hr>
<p>References</p>
<ol>
<li><a href="http://techblog.netflix.com/2015/12/debugging-nodejs-in-production.html" target="_blank" rel="external">http://techblog.netflix.com/2015/12/debugging-nodejs-in-production.html</a></li>
<li><a href="http://yunong.io/2015/11/23/generating-node-js-flame-graphs/" target="_blank" rel="external">http://yunong.io/2015/11/23/generating-node-js-flame-graphs/</a></li>
<li><a href="http://www.slideshare.net/davidapacheco/surge2012" target="_blank" rel="external">http://www.slideshare.net/davidapacheco/surge2012</a></li>
<li><a href="https://www.joyent.com/blog/mdb-and-linux" target="_blank" rel="external">https://www.joyent.com/blog/mdb-and-linux</a></li>
<li><a href="http://info.meteor.com/blog/an-interesting-kind-of-javascript-memory-leak" target="_blank" rel="external">http://info.meteor.com/blog/an-interesting-kind-of-javascript-memory-leak</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»¥é—®ç­”çš„å½¢å¼ï¼Œä»‹ç»ç”Ÿäº§ç¯å¢ƒä¸­è¯¥å¦‚ä½•å»è°ƒè¯• Node åº”ç”¨ã€‚&lt;br&gt;æ–‡ç« è¦†ç›–åˆ°äº†&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ã€&lt;strong&gt;å´©æºƒé—®é¢˜&lt;/strong&gt;ã€&lt;strong&gt;å†…å­˜æ³„éœ²&lt;/strong&gt;çš„æ£€æŸ¥å’Œè§£å†³æ‰‹æ®µã€‚&lt;/p&gt;
&lt;h2 id=&quot;éšç€ç”¨æˆ·è¯·æ±‚æ•°è¶Šæ¥
    
    </summary>
    
      <category term="NodeJS" scheme="https://aotu.io/cates/NodeJS/"/>
    
    
      <category term="è°ƒè¯•" scheme="https://aotu.io/tags/%E8%B0%83%E8%AF%95/"/>
    
      <category term="node" scheme="https://aotu.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºngrokæœåŠ¡ï¼è½»æ¾å¤–ç½‘è°ƒè¯•æœ¬æœºç«™ç‚¹</title>
    <link href="https://aotu.io/notes/2016/02/19/ngrok/"/>
    <id>https://aotu.io/notes/2016/02/19/ngrok/</id>
    <published>2016-02-19T09:55:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>åŠå¹´å¤šæ²¡ç”¨ngrokï¼Œç„¶åæ˜¨å¤©å‘ç°å®ƒè¢«å¢™äº†ï¼Œè‰¸ï½ã€‚</p>
<a id="more"></a>
<h2 id="ngrokæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ"><a href="#ngrokæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ" class="headerlink" title="ngrokæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ"></a>ngrokæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</h2><p>åšå‰ç«¯å¼€å‘çš„ç«¥é‹æˆ–è®¸ä¸ä¼šå¤ªé™Œç”Ÿã€‚<br>å¦‚æœä½ å®Œå…¨ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå¯ä»¥åœ¨å®ƒçš„githubé¡¹ç›®ä¸Šäº†è§£ä¸‹ï¼š<a href="https://github.com/inconshreveable/ngrok" target="_blank" rel="external">https://github.com/inconshreveable/ngrok</a><br>è¿™é‡Œåªæä¸‹å®ƒçš„æ ¸å¿ƒåŠŸèƒ½ï¼šèƒ½å¤Ÿå°†ä½ æœ¬æœºçš„HTTPæœåŠ¡ï¼ˆç«™ç‚¹ï¼‰æˆ–TCPæœåŠ¡ï¼Œé€šè¿‡éƒ¨ç½²æœ‰ngrokæœåŠ¡çš„å¤–ç½‘ä¼ºæœå™¨æš´éœ²ç»™å¤–ç½‘è®¿é—®ï¼</p>
<p>å¦‚ä¸Šå°é¢å›¾æ‰€ç¤ºï¼Œä¸¾ä¸€ä¸ªæ —å­ã€‚</p>
<ol>
<li>æ©˜è‰²å±å¹•çš„ç¬”è®°æœ¬æ˜¯ä½ çš„å·¥ä½œæœºå™¨ï¼Œå®‰è£…äº†ngrokå®¢æˆ·ç«¯</li>
<li>ngrok.comæ‰€åœ¨çš„æœåŠ¡å™¨å®‰è£…äº†ngrokçš„æœåŠ¡ç«¯ï¼ˆngrokdï¼‰</li>
<li>åˆ©ç”¨ngrok 8080å‘½ä»¤å¯ä»¥å°†ä½ æœ¬æœºçš„8080ç«¯å£æš´éœ²ç»™åå‘ä»£ç†è‡³ngrok.comçš„æŸä¸ªäºŒçº§åŸŸåå¦‚ï¼šxxx.ngrok.com</li>
<li>åˆ«äººé€šè¿‡xxx.ngrok.comå°±å¯ä»¥è®¿é—®ä½ æœ¬æœº8080ç«¯å£ä¸Šçš„ç«™ç‚¹å†…å®¹äº†ã€‚</li>
</ol>
<p>ç”±æ­¤å¯è§ï¼Œé™¤äº†Weinreã€browsersync è¿™äº›æƒ¯ç”¨çš„æ‰‹æ®µå¤–ï¼Œå€ŸåŠ©ngrokï¼Œä¹Ÿä¸€æ ·å¯ä»¥è§£å†³å‰ç«¯å¼€å‘è¿‡ç¨‹ç»å¸¸é‡åˆ°çš„â€œæœ¬åœ°å¼€å‘ï¼Œå¤–ç½‘è°ƒè¯•â€è€å¤§éš¾é¢˜ã€‚</p>
<p>å›§çš„æ˜¯ï¼šngrok.comè¢«å¢™äº†ï¼Œæˆ‘ä»¬å·²æ— æ³•ç”¨å®ƒå®˜æ–¹çš„æœåŠ¡ï½<br>å›½å†…è™½ç„¶æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„ngrokæœåŠ¡ï¼Œä½†æ˜¯ä¹Ÿæ— æ³•ä¿è¯å…¶ç¨³å®šæ€§ã€‚<br>è¿˜å¥½ngrokæ˜¯å¼€æºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒçš„æºç åœ¨è‡ªå·±çš„å¤–ç½‘æœåŠ¡å™¨ä¸Šæ­å»ºè‡ªå·±çš„ngrokæœåŠ¡ã€‚</p>
<p>å‰ææ¡ä»¶æ˜¯ï¼šä¸€å°å¤–ç½‘å¯è®¿é—®çš„ä¸»æœºï¼Œä¸”æœ‰åŸŸåè§£æè‡³è¯¥ä¸»æœºä¸Šã€‚</p>
<h2 id="æ­å»ºæœåŠ¡ç«¯ngrokd"><a href="#æ­å»ºæœåŠ¡ç«¯ngrokd" class="headerlink" title="æ­å»ºæœåŠ¡ç«¯ngrokd"></a>æ­å»ºæœåŠ¡ç«¯ngrokd</h2><h3 id="1-å®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒ"><a href="#1-å®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒ" class="headerlink" title="1.å®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒ"></a>1.å®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒ</h3><p>ngrokæ˜¯åˆ©ç”¨goè¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥å…ˆè¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒã€‚<br>ä»¥CentOSçš„æœåŠ¡å™¨ç¤ºä¾‹ï¼Œå®‰è£…Goè¯­è¨€å¾ˆç®€å•çš„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install golang</div></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæ¯•åï¼Œåˆ©ç”¨go versionæ¥éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚<br>goå®‰è£…å¥½åï¼Œæˆ‘ä»¬å†è®¾ç½®ä¸‹goçš„ç¯å¢ƒå˜é‡ï¼š</p>
<p>åœ¨<code>~/.zshrc</code>æˆ–<code>~/.bash_profile</code>æ–‡ä»¶å†…ï¼ŒåŠ å…¥ä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½®å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$HOME</span>/go</div><div class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/.local/bin:<span class="variable">$HOME</span>/bin:<span class="variable">$GOPATH</span>/bin</div></pre></td></tr></table></figure>
<p>ä¿å­˜åï¼Œé‡æ–°ç»™shellåŠ è½½ä¸‹é…ç½®æ–‡ä»¶ï¼š<code>source ~/.zshrc</code></p>
<p>æœ€åå¯é€šè¿‡go envæŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸã€‚</p>
<h3 id="2-å®‰è£…git"><a href="#2-å®‰è£…git" class="headerlink" title="2.å®‰è£…git"></a>2.å®‰è£…git</h3><p>å®‰è£…è¿‡ç¨‹ç•¥ã€‚åé¢æˆ‘ä»¬éœ€è¦åˆ©ç”¨gitæ‹‰å–æºç ã€‚</p>
<h3 id="3-forkå¹¶æ‹‰å–ngrokçš„æºç "><a href="#3-forkå¹¶æ‹‰å–ngrokçš„æºç " class="headerlink" title="3.forkå¹¶æ‹‰å–ngrokçš„æºç "></a>3.forkå¹¶æ‹‰å–ngrokçš„æºç </h3><p>ä¸‹é¢ç¼–è¯‘è¿‡ç¨‹éœ€è¦æ”¹å®˜æ–¹çš„éƒ¨åˆ†æºç ï¼Œæ‰€ä»¥æœ€å¥½forkä¸€ä»½æºç è‡³è‡ªå·±çš„githubè´¦æˆ·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p ~/go/src/github.com/mamboer</div><div class="line">$ <span class="built_in">cd</span> ~/go/src/github.com/mamboer</div><div class="line">$ git <span class="built_in">clone</span> https://github.com/mamboer/ngrok.git</div></pre></td></tr></table></figure>
<p>æºç æ‹‰å–ä¸‹æ¥åï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹ï¼š<br>æ‰“å¼€<code>src/ngrok/log/logger.go</code>æ–‡ä»¶<br>å°†<code>code.google.com/p/log4go</code> ä¿®æ”¹ä¸ºï¼š<code>github.com/alecthomas/log4go</code></p>
<p>googlecodeå·²ç»å¯¿ç»ˆäº†ï¼Œæˆ‘ä»¬å°†ä¾èµ–çš„log4goæ›¿æ¢æˆgithubçš„ç‰ˆæœ¬ã€‚</p>
<p>åœ¨ç¼–è¯‘ngrokçš„æºç ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ”¹ä¸‹å®˜æ–¹æºç ç”¨åˆ°çš„ç­¾åè¯ä¹¦ã€‚</p>
<h3 id="4-ç”Ÿæˆè‡ªç­¾åè¯ä¹¦"><a href="#4-ç”Ÿæˆè‡ªç­¾åè¯ä¹¦" class="headerlink" title="4.ç”Ÿæˆè‡ªç­¾åè¯ä¹¦"></a>4.ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</h3><p>ä½¿ç”¨ngrok.comå®˜æ–¹æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å®˜æ–¹çš„SSLè¯ä¹¦ã€‚è‡ªå»ºngrokdæœåŠ¡ï¼Œå¦‚æœä¸æƒ³ä¹°SSLè¯ä¹¦ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆè‡ªå·±çš„è‡ªç­¾åè¯ä¹¦ï¼Œå¹¶ç¼–è¯‘ä¸€ä¸ªæºå¸¦è¯¥è¯ä¹¦çš„ngrokå®¢æˆ·ç«¯ã€‚</p>
<p>è¯ä¹¦ç”Ÿæˆè¿‡ç¨‹éœ€è¦ä¸€ä¸ªNGROK_BASE_DOMAINã€‚ ä»¥ngrokå®˜æ–¹éšæœºç”Ÿæˆçš„åœ°å€693c358d.ngrok.comä¸ºä¾‹ï¼Œå…¶NGROK_BASE_DOMAINå°±æ˜¯â€ngrok.comâ€ï¼Œå¦‚æœä½ è¦ æä¾›æœåŠ¡çš„åœ°å€ä¸ºâ€example.ngrok.xxx.comâ€ï¼Œé‚£NGROK_BASE_DOMAINå°±åº”è¯¥ æ˜¯â€ngrok.xxx.comâ€ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œä»¥NGROK_BASE_DOMAIN=â€œngrok.fex.imâ€ä¸ºä¾‹ï¼Œç”Ÿæˆè¯ä¹¦çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> ngrok</div><div class="line">$ openssl genrsa -out rootCA.key 2048</div><div class="line">$ openssl req -x509 -new -nodes -key rootCA.key -subj <span class="string">"/CN=ngrok.fex.im"</span> -days 5000 -out rootCA.pem</div><div class="line">$ openssl genrsa -out device.key 2048</div><div class="line">$ openssl req -new -key device.key -subj <span class="string">"/CN=ngrok.fex.im"</span> -out device.csr</div><div class="line">$ openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤ï¼Œåœ¨ngrokç›®å½•ä¸‹å°±ä¼šæ–°ç”Ÿæˆ6ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv <span class="number"> 985 </span>Feb<span class="number"> 17 </span>19:04 device.crt</div><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv <span class="number"> 895 </span>Feb<span class="number"> 17 </span>19:04 device.csr</div><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv<span class="number"> 1679 </span>Feb<span class="number"> 17 </span>19:03 device.key</div><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv<span class="number"> 1675 </span>Feb<span class="number"> 17 </span>19:01 rootCA.key</div><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv<span class="number"> 1103 </span>Feb<span class="number"> 17 </span>19:03 rootCA.pem</div><div class="line">-rw-rw-r--<span class="number"> 1 </span>lv lv  <span class="number"> 17 </span>Feb<span class="number"> 17 </span>19:04 rootCA.srl</div></pre></td></tr></table></figure>
<p>ngroké€šè¿‡bindataå°†ngrokæºç ç›®å½•ä¸‹çš„assetsç›®å½•ï¼ˆèµ„æºæ–‡ä»¶ï¼‰æ‰“åŒ…åˆ°å¯æ‰§è¡Œæ–‡ä»¶(ngrokdå’Œngrok)ä¸­ å»ï¼Œassets/client/tlså’Œassets/server/tlsä¸‹åˆ†åˆ«å­˜æ”¾ç€ç”¨äºngrokå’Œngrokdçš„é»˜è®¤è¯ä¹¦æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬æ›¿æ¢æˆæˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„ï¼š(å› æ­¤è¿™ä¸€æ­¥åŠ¡å¿…æ”¾åœ¨ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ä¹‹å‰)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cp rootCA.pem assets/client/tls/ngrokroot.crt</div><div class="line">cp device.crt assets/server/tls/snakeoil.crt</div><div class="line">cp device.key assets/server/tls/snakeoil.key</div></pre></td></tr></table></figure>
<h3 id="5-ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºngrokå’ŒæœåŠ¡ç«¯ç¨‹åºngrokd"><a href="#5-ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºngrokå’ŒæœåŠ¡ç«¯ç¨‹åºngrokd" class="headerlink" title="5.ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºngrokå’ŒæœåŠ¡ç«¯ç¨‹åºngrokd"></a>5.ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºngrokå’ŒæœåŠ¡ç«¯ç¨‹åºngrokd</h3><p>åœ¨ngrokç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç¼–è¯‘ngrokdï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ make release-server</div></pre></td></tr></table></figure>
<p>ç±»ä¼¼çš„ï¼Œåˆ©ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ngrok:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ make release-client</div></pre></td></tr></table></figure>
<p>æˆåŠŸç¼–è¯‘åï¼Œä¼šåœ¨binç›®å½•ä¸‹æ‰¾åˆ°<code>ngrokd</code>å’Œ<code>ngrok</code>è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬å°†ngrokdæ–‡ä»¶æ‹·è´è‡³<code>~/go/bin</code>ç›®å½•ä¸‹ï¼Œä»¥æ–¹ä¾¿åœ¨å…¶ä»–ç›®å½•å†…ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ngrokdæ¥è®¿é—®è¯¥æ‰§è¡Œç¨‹åºã€‚</p>
<h3 id="6-è¿è¡ŒngrokdæœåŠ¡"><a href="#6-è¿è¡ŒngrokdæœåŠ¡" class="headerlink" title="6.è¿è¡ŒngrokdæœåŠ¡"></a>6.è¿è¡ŒngrokdæœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ngrokd -domain=<span class="string">"ngrok.fex.im"</span> -httpAddr=<span class="string">":8088"</span> -httpsAddr=<span class="string">":8089"</span></div><div class="line">[15:08:52 CST 2016/02/18] [INFO] (ngrok/log.(*PrefixLogger).Info:83) [registry] [tun] No affinity cache specified</div><div class="line">[15:08:52 CST 2016/02/18] [INFO] (ngrok/log.(*PrefixLogger).Info:83) [metrics] Reporting every 30 seconds</div><div class="line">[15:08:52 CST 2016/02/18] [INFO] (ngrok/log.Info:112) Listening <span class="keyword">for</span> public http connections on [::]:8088</div><div class="line">[15:08:52 CST 2016/02/18] [INFO] (ngrok/log.Info:112) Listening <span class="keyword">for</span> public https connections on [::]:8089</div><div class="line">[15:08:52 CST 2016/02/18] [INFO] (ngrok/log.Info:112) Listening <span class="keyword">for</span> control and proxy connections on [::]:4443</div></pre></td></tr></table></figure>
<h3 id="7-ä¸ºngrok-fex-imæ·»åŠ dnsè§£æ"><a href="#7-ä¸ºngrok-fex-imæ·»åŠ dnsè§£æ" class="headerlink" title="7.ä¸ºngrok.fex.imæ·»åŠ dnsè§£æ"></a>7.ä¸ºngrok.fex.imæ·»åŠ dnsè§£æ</h3><p>æ·»åŠ ä¸¤æ¡Aè®°å½•ï¼š<code>ngrok.fex.im</code>å’Œ<code>*.ngrok.fex.im</code>ï¼ŒæŒ‡å‘fex.imæ‰€åœ¨çš„æœåŠ¡å™¨ipã€‚</p>
<p>è‡³æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ngrokdæœåŠ¡ç«¯æ­å»ºé…ç½®å®Œæˆï¼ŒåŒæ—¶æˆ‘ä»¬åœ¨CentOSç³»ç»Ÿçš„æœåŠ¡å™¨ä¸Šç¼–è¯‘äº†ä¸€ä»½å®¢æˆ·ç«¯çš„æ‰§è¡Œç¨‹åºï¼ä¸€ä¸ªngrokæ–‡ä»¶ã€‚<br>å¦‚æœä½ çš„å¼€å‘æœºå™¨ç³»ç»Ÿä¹Ÿæ˜¯CentOSï¼Œæ˜¯å¯ä»¥ç›´æ¥å°†ngrokè¿™ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°å¼€å‘æœºå™¨ä¸­æ¥ä½¿ç”¨çš„ã€‚<br>ä½†å¦‚æœä½ çš„æœºå™¨æ˜¯Mac æˆ–è€…windowsï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸­ç¼–è¯‘ä¸€ä»½ç›¸åŒç­¾åæ–‡ä»¶çš„å®¢æˆ·ç«¯ç¨‹åºï¼</p>
<p>æ³¨æ„ï¼šè¯·è®°å¾—æäº¤å·²æ›´æ”¹çš„æºç è‡³githubï¼Œä¸€ä¼šè¿˜è¦ç”¨åˆ°ã€‚</p>
<h2 id="åœ¨MACä¸­ç¼–è¯‘ngrokå®¢æˆ·ç«¯"><a href="#åœ¨MACä¸­ç¼–è¯‘ngrokå®¢æˆ·ç«¯" class="headerlink" title="åœ¨MACä¸­ç¼–è¯‘ngrokå®¢æˆ·ç«¯"></a>åœ¨MACä¸­ç¼–è¯‘ngrokå®¢æˆ·ç«¯</h2><p>æœåŠ¡å™¨æ˜¯CentOSï¼Œè‡ªå·±çš„å·¥ä½œç”µè„‘æ˜¯Macï¼Œæ‰€ä»¥å¾—åœ¨è‡ªå·±çš„ç”µè„‘ä¸­ç¼–è¯‘ä¸€ä»½ç›¸åŒç­¾åæ–‡ä»¶çš„å®¢æˆ·ç«¯ç¨‹åºï¼</p>
<h3 id="1-å®‰è£…go"><a href="#1-å®‰è£…go" class="headerlink" title="1.å®‰è£…go"></a>1.å®‰è£…go</h3><p>ä¸æœåŠ¡å™¨çš„æ­¥éª¤ç±»ä¼¼ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®‰è£…goè¯­è¨€ç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">brew update</div><div class="line">brew install go</div></pre></td></tr></table></figure>
<h3 id="2-è®¾ç½®goçš„ç¯å¢ƒå˜é‡ï¼ˆç•¥ï¼‰"><a href="#2-è®¾ç½®goçš„ç¯å¢ƒå˜é‡ï¼ˆç•¥ï¼‰" class="headerlink" title="2.è®¾ç½®goçš„ç¯å¢ƒå˜é‡ï¼ˆç•¥ï¼‰"></a>2.è®¾ç½®goçš„ç¯å¢ƒå˜é‡ï¼ˆç•¥ï¼‰</h3><h3 id="3-æ‹‰å–æºç å¹¶ç¼–è¯‘å®¢æˆ·ç«¯ï¼ˆç•¥ï¼‰"><a href="#3-æ‹‰å–æºç å¹¶ç¼–è¯‘å®¢æˆ·ç«¯ï¼ˆç•¥ï¼‰" class="headerlink" title="3.æ‹‰å–æºç å¹¶ç¼–è¯‘å®¢æˆ·ç«¯ï¼ˆç•¥ï¼‰"></a>3.æ‹‰å–æºç å¹¶ç¼–è¯‘å®¢æˆ·ç«¯ï¼ˆç•¥ï¼‰</h3><p>æœ€åå°†ç¼–è¯‘å¥½çš„ngrokæ–‡ä»¶ï¼Œæ‹·è´è‡³$GOPATH/binç›®å½•å†…ï¼Œä»¥ä¾¿åœ¨å‘½ä»¤è¡Œå†…ä»»æ„ç›®å½•å†…å‡å¯ä»¥ç›´æ¥é€šè¿‡ngrokè¿è¡Œç¨‹åºã€‚</p>
<h2 id="æœ€åçš„éªŒè¯"><a href="#æœ€åçš„éªŒè¯" class="headerlink" title="æœ€åçš„éªŒè¯"></a>æœ€åçš„éªŒè¯</h2><p>ngrokdæœåŠ¡é…ç½®å¥½äº†ï¼Œå®¢æˆ·ç«¯ç¨‹åºä¹Ÿæœ‰äº†ï¼Œä¸‹é¢æµ‹è¯•ä¸‹ngrokæ˜¯å¦èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ã€‚</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªngroké…ç½®æ–‡ä»¶ï¼šngrok.cfg</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">server_addr: â€œngrok.fex.im:4443<span class="string">"</span></div><div class="line">trust_host_root_certs: false</div></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œå®¢æˆ·ç«¯ï¼Œæš´éœ²8080ç«¯å£çš„ç«™ç‚¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ngrok -subdomain demo -config=/Users/lv/bin/ngrok.cfg 8080</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨8080ç«¯å£ä¸‹å»ºä¸€ä¸ªæµ‹è¯•ç«™ç‚¹</p>
<p>æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬æ‹‰å–git@github.com:o2team/brand.gitåšæµ‹è¯•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">npm i -g node-static</div><div class="line">git <span class="built_in">clone</span> git@github.com:o2team/brand.git</div><div class="line"><span class="built_in">cd</span> brand</div><div class="line">static</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥demo.ngrok.fex.im:8088</p>
<p>bingo!</p>
<p><img src="//img.aotu.io/mamboer/ngrok-demo.jpg" alt="aotu.io"></p>
</li>
<li><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šlocalhost:4040</p>
<p>å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„è¯·æ±‚æƒ…å†µï¼<br><img src="//img.aotu.io/mamboer/ngrok-demo1.jpg" alt="aotu.io"></p>
</li>
</ol>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>å®¢æˆ·ç«¯ngrok.cfgä¸­server_addråçš„å€¼å¿…é¡»ä¸¥æ ¼ä¸-domainä»¥åŠè¯ä¹¦ä¸­çš„<code>NGROK_BASE_DOMAIN</code>ç›¸åŒï¼Œå¦åˆ™Serverç«¯å°±ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯æ—¥å¿—ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[03/13/15 09:55:46]</span> <span class="selector-attr">[INFO]</span> <span class="selector-attr">[tun:15dd7522]</span> <span class="selector-tag">New</span> <span class="selector-tag">connection</span> <span class="selector-tag">from</span> 54<span class="selector-class">.149</span><span class="selector-class">.100</span><span class="selector-class">.42</span><span class="selector-pseudo">:38252</span></div><div class="line"><span class="selector-attr">[03/13/15 09:55:46]</span> <span class="selector-attr">[DEBG]</span> <span class="selector-attr">[tun:15dd7522]</span> <span class="selector-tag">Waiting</span> <span class="selector-tag">to</span> <span class="selector-tag">read</span> <span class="selector-tag">message</span></div><div class="line"><span class="selector-attr">[03/13/15 09:55:46]</span> <span class="selector-attr">[WARN]</span> <span class="selector-attr">[tun:15dd7522]</span> <span class="selector-tag">Failed</span> <span class="selector-tag">to</span> <span class="selector-tag">read</span> <span class="selector-tag">message</span>: <span class="selector-tag">remote</span> <span class="selector-tag">error</span>: <span class="selector-tag">bad</span> <span class="selector-tag">certificate</span></div><div class="line"><span class="selector-attr">[03/13/15 09:55:46]</span> <span class="selector-attr">[DEBG]</span> <span class="selector-attr">[tun:15dd7522]</span> <span class="selector-tag">Closing</span></div></pre></td></tr></table></figure>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li>è‡ªå»ºngrokæœåŠ¡</li>
</ul>
<ol>
<li><a href="http://tonybai.com/2015/03/14/selfhost-ngrok-service/" target="_blank" rel="external">http://tonybai.com/2015/03/14/selfhost-ngrok-service/</a></li>
<li><a href="https://github.com/inconshreveable/ngrok/blob/master/docs/SELFHOSTING.md" target="_blank" rel="external">https://github.com/inconshreveable/ngrok/blob/master/docs/SELFHOSTING.md</a></li>
</ol>
<ul>
<li>goçš„å®‰è£…</li>
</ul>
<ol>
<li><a href="https://blog.starkandwayne.com/2014/12/04/how-to-install-go-on-digital-ocean/" target="_blank" rel="external">https://blog.starkandwayne.com/2014/12/04/how-to-install-go-on-digital-ocean/</a></li>
</ol>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ngrokæœåŠ¡çš„è‡ªè¡Œæ­å»ºã€‚åŒæ—¶ä¸ºå¤§å®¶å…è´¹æä¾›æˆ‘æ­å»ºå¥½çš„ngrokæœåŠ¡ï¼šngrok.fex.imã€‚<br>fex.imæ‰€åœ¨çš„æœºå™¨æ˜¯digitaloceançš„ä¸€ä¸ªä¸»æœºï¼Œè™½ç„¶å›½å†…é€Ÿåº¦æ…¢ä½†æ˜¯è¿˜ç®—ç¨³å®šã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨ngrok-fex-im"><a href="#å¦‚ä½•ä½¿ç”¨ngrok-fex-im" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ngrok.fex.im?"></a>å¦‚ä½•ä½¿ç”¨ngrok.fex.im?</h2><h3 id="å®‰è£…client"><a href="#å®‰è£…client" class="headerlink" title="å®‰è£…client"></a>å®‰è£…client</h3><p>Linux ä¸‹è½½:<a href="http://fex.im/files/ngrok" target="_blank" rel="external">http://fex.im/files/ngrok</a><br>Mac OSX ä¸‹è½½ï¼š<a href="https://github.com/mamboer/ngrok/releases/download/1.7.2/ngrok" target="_blank" rel="external">https://github.com/mamboer/ngrok/releases/download/1.7.2/ngrok</a></p>
<p>æ”¾åœ¨ <code>/usr/local/bin</code> ç›®å½•ä¸‹</p>
<h3 id="è®¾ç½®æ‰€æœ‰è€…"><a href="#è®¾ç½®æ‰€æœ‰è€…" class="headerlink" title="è®¾ç½®æ‰€æœ‰è€…"></a>è®¾ç½®æ‰€æœ‰è€…</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chown <span class="variable">$(</span>whoami)<span class="symbol">:staff</span> ngrok</div></pre></td></tr></table></figure>
<h3 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod <span class="number">777</span> ngrok</div></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå®¢æˆ·ç«¯"><a href="#è¿è¡Œå®¢æˆ·ç«¯" class="headerlink" title="è¿è¡Œå®¢æˆ·ç«¯"></a>è¿è¡Œå®¢æˆ·ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ngrok -subdomain demo -config=/Users/lv/bin/ngrok.cfg 8080</div></pre></td></tr></table></figure>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">server_addr: â€œngrok.fex.im:4443<span class="string">"</span></div><div class="line">trust_host_root_certs: false</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŠå¹´å¤šæ²¡ç”¨ngrokï¼Œç„¶åæ˜¨å¤©å‘ç°å®ƒè¢«å¢™äº†ï¼Œè‰¸ï½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ngrok" scheme="https://aotu.io/tags/ngrok/"/>
    
      <category term="åå‘ä»£ç†" scheme="https://aotu.io/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
    
      <category term="è°ƒè¯•" scheme="https://aotu.io/tags/%E8%B0%83%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€çŸ¥é“çš„3xxçŠ¶æ€ç </title>
    <link href="https://aotu.io/notes/2016/01/28/3xx-of-http-status/"/>
    <id>https://aotu.io/notes/2016/01/28/3xx-of-http-status/</id>
    <published>2016-01-28T12:20:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“300-399è¿™ä¸€ç³»åˆ—çš„çŠ¶æ€ç ä»£è¡¨çš„æ˜¯é‡å®šå‘çŠ¶æ€ç ã€‚é‡å®šå‘çŠ¶æ€ç è¦ä¹ˆå‘ŠçŸ¥å®¢æˆ·ç«¯ä½¿ç”¨æ›¿ä»£ä½ç½®æ¥è®¿é—®å¥¹ä»¬æ‰€æ„Ÿå…´è¶£çš„èµ„æºï¼Œè¦ä¹ˆå°±æä¾›ä¸€ä¸ªæ›¿ä»£çš„å“åº”è€Œä¸æ˜¯èµ„æºçš„å†…å®¹ã€‚å¦‚æœèµ„æºå·²è¢«ç§»åŠ¨ï¼Œå¯å‘é€ä¸€ä¸ªé‡å®šå‘çŠ¶æ€ç å’Œä¸€ä¸ªå¯é€‰çš„Locationé¦–éƒ¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯å·²è¢«ç§»èµ°ï¼Œä»¥åŠç°åœ¨å¯ä»¥åœ¨å“ªé‡Œæ‰¾åˆ°å®ƒã€‚è¿™æ ·å­ï¼Œæµè§ˆå™¨å°±å¯ä»¥åœ¨ä¸æ‰“æ‰°ç”¨æˆ·çš„æƒ…å†µä¸‹ï¼Œé€æ˜åœ°è½¬åˆ°æ–°çš„ä½ç½®ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»çŠ¶æ€ç å‡ºå‘ï¼Œæ¢³ç†ä¸€ä¸‹3xxçŠ¶æ€ç ï¼ˆ300-307ï¼‰ï¼Œä»¥åŠç¼“å­˜ä¸€ç³»åˆ—ç›¸å…³çš„ä¸œè¥¿ã€‚ï¼ˆæ³¨ï¼šHTTP/1.1ç‰ˆæœ¬çš„å†…å®¹ï¼‰</p>
<h4 id="300-Multiple-Choices"><a href="#300-Multiple-Choices" class="headerlink" title="300 Multiple Choices"></a>300 Multiple Choices</h4><p>å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªå®é™…æŒ‡å‘å¤šä¸ªèµ„æºçš„URLæ—¶ä¼šè¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªç«™ç‚¹æä¾›äº†ä¸­æ–‡å’Œè‹±æ–‡ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åº”å½“å‘ä¸­æ–‡ç”¨æˆ·å‘é€ä¸­æ–‡ç‰ˆï¼Œå‘è‹±æ–‡ç”¨æˆ·å‘é€è‹±æ–‡ç‰ˆã€‚HTTPæä¾›äº†å†…å®¹åå•†æ–¹æ³•ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½œè¿™æ ·çš„å†³å®šã€‚å†…å®¹åå•†åŒ…å«å®¢æˆ·ç«¯é©±åŠ¨çš„åå•†ã€æœåŠ¡å™¨é©±åŠ¨çš„åå•†ä»¥åŠé€æ˜åå•†ã€‚</p>
<p>å®¢æˆ·ç«¯é©±åŠ¨ç”±å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨å‘é€å¯é€‰é¡¹çš„åˆ—è¡¨ï¼Œå®¢æˆ·ç«¯è¿›è¡Œé€‰æ‹©ï¼›æœåŠ¡å™¨é©±åŠ¨æ˜¯ç”±æœåŠ¡å™¨æ¥æ£€æŸ¥å®¢æˆ·ç«¯çš„è¯·æ±‚é¦–éƒ¨é›†å¹¶å†³å®šæä¾›æä¾›å“ªä¸ªç‰ˆæœ¬çš„é¡µé¢ï¼ˆqå€¼æœºåˆ¶ï¼ŒVaryé¦–éƒ¨ï¼‰ï¼›é€æ˜åå•†æ˜¯ç”±æŸä¸ªä¸­é—´è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ç¼“å­˜ä»£ç†ï¼‰ä»£è¡¨å®¢æˆ·ç«¯è¿›è¡Œè¯·æ±‚åå•†ã€‚</p>
<p>è€Œ300 Multiple Choiceså±äºå®¢æˆ·ç«¯é©±åŠ¨çš„åå•†ã€‚æœåŠ¡å™¨å‘é€å›HTTP/1.1å“åº”æ—¶ï¼Œä½¿ç”¨300 Multiple Choiceså“åº”ä»£ç ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨æ”¶åˆ°è¿™ç§å“åº”æ—¶ï¼Œå¯èƒ½ä¼šå¼¹å‡ºå¯¹è¯çª—å£ï¼Œè®©ç”¨æˆ·é€‰æ‹©ã€‚</p>
<h4 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h4><p>åœ¨è¯·æ±‚çš„URLå·²è¢«ç§»é™¤æ—¶ä½¿ç”¨ã€‚å“åº”çš„Locationé¦–éƒ¨ä¸­åº”è¯¥åŒ…å«èµ„æºç°åœ¨æ‰€å¤„çš„URLã€‚</p>
<p>301é‡å®šå‘æ˜¯ç½‘é¡µæ›´æ”¹ç½‘å€åå¯¹æœç´¢å¼•æ“å‹å¥½çš„æœ€å¥½æ–¹æ³•ï¼Œåªè¦ä¸æ˜¯æš‚æ—¶æ¬ç§»çš„æƒ…å†µï¼Œéƒ½å»ºè®®ä½¿ç”¨301æ¥åšè½¬å€ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å°†ç½‘é¡µaçš„åœ°å€æ›´æ”¹ä¸ºbï¼Œé‡‡ç”¨301é‡å®šå‘ï¼Œæœç´¢å¼•æ“å¯ä»¥è‚¯å®šç½‘é¡µaæ°¸ä¹…æ€§æ”¹å˜ç½‘å€ï¼Œæœç´¢å¼•æ“å°±ä¼šæŠŠç½‘é¡µbå½“åšå”¯ä¸€æœ‰æ•ˆç›®æ ‡ï¼ŒåŒæ—¶ï¼Œç½‘é¡µaç§¯ç´¯çš„é¡µé¢æƒé‡å°†è¢«ä¼ åˆ°ç½‘é¡µbã€‚(æ³¨ï¼šä¼ é€’æƒé‡ä¸åŒçš„æœç´¢å¼•æ“ä¸ä¸€æ ·ï¼ŒGoogleä¼šä¼ é€’å¤§éƒ¨åˆ†æƒé‡ï¼Œä½†ä¸æ˜¯ç™¾åˆ†ä¹‹ç™¾æƒé‡ï¼‰</p>
<h4 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h4><p>ä¸301çŠ¶æ€ç ç±»ä¼¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨Locationé¦–éƒ¨ç»™å‡ºçš„URLæ¥ä¸´æ—¶å®šä½èµ„æºï¼Œå°†æ¥çš„è¯·æ±‚ä»åº”ä½¿ç”¨è€çš„URLã€‚</p>
<p>ä¸€èˆ¬302é‡å®šå‘æ˜¯åœ¨ä¸€ä¸ªç½‘ç«™æˆ–ç½‘é¡µåœ¨çŸ­æ—¶é—´å†…ä¸´æ—¶ç§»åˆ°å…¶å®ƒä½ç½®çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè¿™æ—¶å€™å°±æ˜¯åšä¸´æ—¶æ€§çš„è·³è½¬äº†ã€‚</p>
<p>ä½†æ˜¯302è·Ÿç½‘å€â€œåŠ«æŒâ€æœ‰ç€è«å¤§çš„å…³ç³»ã€‚å¤§éƒ¨åˆ†æœç´¢å¼•æ“åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå½“æ”¶åˆ°302é‡å®šå‘æ—¶ï¼Œä¸€èˆ¬åªè¦å»æŠ“å–ç›®æ ‡ç½‘å€å³å¯ã€‚ä½†æ˜¯æœ‰æ—¶å€™æœç´¢å¼•æ“ï¼ˆä»¥Googleä¸ºä¾‹ï¼‰å¹¶ä¸èƒ½æ€»æ˜¯æŠ“å–ç›®æ ‡ç½‘å€ï¼Œæ¯”å¦‚è¯´aç½‘å€å¾ˆçŸ­ï¼Œä½†æ˜¯å®ƒåšäº†302é‡å®šå‘åˆ°bç½‘å€ï¼Œè€Œbç½‘å€æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„ä¹±ä¸ƒå…«ç³Ÿçš„URLç½‘å€ï¼Œè¿™æ—¶å€™Googleå¾ˆæœ‰å¯èƒ½ä»æ˜¾ç¤ºç½‘å€aï¼Œè¿™æ—¶å€™å°±é€ æˆäº†ç½‘å€åŠ«æŒçš„å¯èƒ½æ€§ã€‚å¦‚æœä¸€ä¸ªå±…å¿ƒåµæµ‹çš„äººå°†ä¸€ä¸ªç½‘å€aé€šè¿‡302é‡å®šå‘åˆ°ä½ çš„ç½‘å€bï¼Œè€ŒGoogleæœç´¢ç»“æœä»ç„¶æ˜¯Aï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ç½‘å€åŠ«æŒã€‚åŒæ—¶ï¼Œè¿˜å®¹æ˜“å¯¼è‡´ç½‘ç«™è¢«é™æƒï¼Œæ‰€ä»¥å°½é‡ä¸ç”¨ã€‚</p>
<h4 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h4><p>ç”¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªURLæ¥è·å–èµ„æºï¼Œæ–°çš„URLä½äºå“åº”æŠ¥æ–‡çš„Locationé¦–éƒ¨ã€‚</p>
<p>303ä¸»è¦ç›®çš„æ˜¯å…è®¸POSTè¯·æ±‚çš„å“åº”å°†å®¢æˆ·ç«¯å®šä½åˆ°æŸä¸ªèµ„æºä¸Šã€‚æ¯”å¦‚è¯´ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ å®Œæˆåè®©å®¢æˆ·ç«¯è‡ªåŠ¨é‡å®šå‘åˆ°ä¸€ä¸ªä¸Šä¼ æˆåŠŸçš„ç»“æœé¡µé¢ã€‚</p>
<h4 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h4><p>å¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä¸”è¯¥è¯·æ±‚å·²è¢«å…è®¸ï¼Œè€Œæ–‡æ¡£çš„å†…å®¹ï¼ˆè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æˆ–è€…æ ¹æ®è¯·æ±‚çš„æ¡ä»¶ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨è¿”å›304çŠ¶æ€ç ã€‚304å“åº”ä¸åŒ…å«æ¶ˆæ¯ä½“ï¼Œå› æ­¤ä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</p>
<p>åœ¨ä¸€æ¡HTTP GETè¯·æ±‚ä¸­ï¼Œå¤§è‡´æ˜¯å¦‚ä¸‹çš„ä¸€ä¸ªè¿‡ç¨‹</p>
<p><img src="//img.aotu.io/wengeek/cache.png" alt="http"></p>
<p>åœ¨æŸ¥çœ‹æœ¬åœ°å‰¯æœ¬æ˜¯å¦è¿‡æœŸæ—¶ï¼Œé€šè¿‡æ£€æŸ¥Cache-Controlæˆ–è€…Expiresé¦–éƒ¨å³å¯è·çŸ¥ã€‚HTTPé€šè¿‡Cache-Controlé¦–éƒ¨å’ŒExpiresé¦–éƒ¨å‘æ¯ä¸ªæ–‡æ¡£é™„åŠ äº†ä¸€ä¸ªâ€œè¿‡æœŸæ—¥æœŸâ€ï¼Œåœ¨ç¼“å­˜æ–‡æ¡£è¿‡æœŸä¹‹å‰ï¼Œç¼“å­˜å¯ä»¥ä»¥ä»»ä½•é¢‘ç‡ä½¿ç”¨è¿™äº›å‰¯æœ¬ï¼Œè€Œæ— éœ€ä¸æœåŠ¡å™¨è”ç³»ã€‚</p>
<p>Expiresé¦–éƒ¨æ˜¯HTTP/1.0å®šä¹‰çš„å­—æ®µï¼ŒæŒ‡å®šçš„æ˜¯ä¸€ä¸ªç»å¯¹çš„è¿‡æœŸæ—¥æœŸã€‚è€ŒCache-Controlæ˜¯HTTP/1.1å®šä¹‰çš„å­—æ®µï¼Œmax-ageå€¼å®šä¹‰äº†æ–‡æ¡£çš„æœ€å¤§ä½¿ç”¨å€¼ï¼Œæ˜¯ç›¸å¯¹æ—¶é—´ã€‚å› ä¸ºç»å¯¹æ—¶é—´éœ€è¦ä¾èµ–äºè®¡ç®—æœºæ—¶é’Ÿçš„æ­£ç¡®è®¾ç½®ï¼Œå®¹æ˜“å­˜åœ¨è¯¯å·®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨æ¯”è¾ƒæ–°çš„Cache-Controlé¦–éƒ¨ã€‚å½“åŒæ—¶å­˜åœ¨Expireså’ŒCache-Control:max-ageå­—æ®µæ—¶ï¼ŒCache-Control:max-ageå­—æ®µä¼šè¦†ç›–Expireså­—æ®µã€‚åŒæ—¶å­˜åœ¨è¿™ä¸¤ä¸ªå­—æ®µè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥å…¼å®¹HTTP/1.0ã€‚</p>
<p>æœ¬åœ°ç¼“å­˜è¿‡æœŸäº†å¹¶ä¸æ„å‘³ç€å®ƒå’ŒåŸå§‹æœåŠ¡å™¨ä¸Šç›®å‰å¤„äºæ´»è·ƒçŠ¶æ€çš„æ–‡æ¡£æœ‰å®é™…çš„åŒºåˆ«ï¼Œè¿™æ—¶å€™ç¼“å­˜éœ€è¦è¯¢é—®åŸå§‹æœåŠ¡å™¨æ–‡æ¡£æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œè·ŸåŸå§‹æœåŠ¡å™¨åšä¸€æ¬¡ <strong>æ–°é²œåº¦æ ¡éªŒ</strong>ã€‚</p>
<p>HTTPæ¡ä»¶æ–¹æ³•å¯ä»¥é«˜æ•ˆåœ°å®ç°å†éªŒè¯ã€‚é€šè¿‡If-Modified-Sinceæˆ–è€…If-None-Matché¦–éƒ¨æ¥æ ¡éªŒã€‚</p>
<p><strong>If-Modified-Since:Dateå†éªŒè¯</strong>ï¼šIf-Modified-Sinceé¦–éƒ¨å¯ä»¥å’ŒLast-ModifiedæœåŠ¡å™¨å“åº”é¦–éƒ¨é…åˆå·¥ä½œã€‚åŸå§‹æœåŠ¡å™¨ä¼šå°†æœ€åçš„ä¿®æ”¹æ—¥æœŸé™„åŠ åˆ°æ‰€æä¾›çš„æ–‡æ¡£ä¸Šå»ã€‚</p>
<p><strong>If-None-Match: å®ä½“æ ‡ç­¾å†éªŒè¯</strong>ï¼šæœ‰äº›æ–‡æ¡£å¯èƒ½è¢«è¢«å‘¨æœŸæ€§çš„é‡å†™ã€æœ‰äº›æ–‡æ¡£å¯èƒ½è¢«ä¿®æ”¹äº†ä½†æ‰€åšä¿®æ”¹ä¸é‡è¦ç­‰ç­‰è¿™ç±»æƒ…å†µä¸‹ï¼Œä½¿ç”¨æœ€åä¿®æ”¹æ—¥æœŸè¿›è¡Œå†éªŒè¯æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™æ—¶å€™HTTPå…è®¸ç”¨æˆ·å¯¹è¢«ç§°ä¸ºå®ä½“æ ‡ç­¾ETagçš„â€œç‰ˆæœ¬æ ‡è¯†ç¬¦â€è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p>å®ä½“æ ‡ç­¾å’Œæœ€è¿‘ä¿®æ”¹æ—¥æœŸéƒ½æ˜¯ç¼“å­˜éªŒè¯å™¨ï¼Œå¦‚æœæœåŠ¡å™¨å›é€äº†ä¸€ä¸ªå®ä½“æ ‡ç­¾ï¼ŒHTTP/1.1å®¢æˆ·ç«¯å°±å¿…é¡»ä½¿ç”¨å®ä½“æ ‡ç­¾éªŒè¯å™¨ã€‚å¦‚æœåªè¿”å›äº†ä¸€ä¸ªLast-Modifiedå€¼ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ä½¿ç”¨If-Modified-SinceéªŒè¯ã€‚å¦‚æœå®ä½“æ ‡ç­¾å’Œæœ€åä¿®æ”¹æ—¥æœŸéƒ½æä¾›äº†ï¼Œå®¢æˆ·ç«¯å°±åº”è¯¥ä½¿ç”¨è¿™ä¸¤ç§å†éªŒè¯æ–¹æ¡ˆï¼Œè¿™æ ·HTTP/1.0å’ŒHTTP/1.1ç¼“å­˜å°±éƒ½å¯ä»¥æ­£ç¡®å“åº”äº†ã€‚å¦‚æœHTTP/1.1æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ—¢å¸¦æœ‰If-Modified-Sinceï¼Œåˆå¸¦æœ‰ETagæ¡ä»¶é¦–éƒ¨ï¼Œé‚£ä¹ˆéœ€è¦è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³æ—¶ï¼Œæ‰èƒ½è¿”å›304 Not Modifiedå“åº”ã€‚</p>
<h4 id="305-Use-Proxy"><a href="#305-Use-Proxy" class="headerlink" title="305 Use Proxy"></a>305 Use Proxy</h4><p>ç”¨æ¥è¯´æ˜å¿…é¡»é€šè¿‡ä¸€ä¸ªä»£ç†æ¥è®¿é—®èµ„æºï¼Œä»£ç†çš„ä½ç½®ç”±Locationé¦–éƒ¨ç»™å‡ºã€‚</p>
<p>å®¢æˆ·ç«¯æ˜¯ç›¸å¯¹æŸä¸ªç‰¹å®šèµ„æºæ¥è§£æè¿™æ¡å“åº”çš„ï¼Œä¸èƒ½å‡å®šæ‰€æœ‰è¯·æ±‚ï¼Œç”šè‡³æ‰€æœ‰å¯¹ç‰¹æœ‰æ‰€è¯·æ±‚èµ„æºçš„æœåŠ¡å™¨çš„è¯·æ±‚éƒ½é€šè¿‡è¿™ä¸ªä»£ç†è¿›è¡Œã€‚å¦‚æœå®¢æˆ·ç«¯é”™è¯¯åœ°è®©ä»£ç†ä»‹å…¥äº†æŸæ¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šå¼•å‘ç ´åæ€§è¡Œä¸ºï¼Œè€Œä¸”ä¼šé€ æˆå®‰å…¨æ¼æ´ã€‚æ‰€ä»¥ï¼Œ305è¿™ä¸ªçŠ¶æ€ç ä¹Ÿè¾ƒå°‘ä½¿ç”¨ã€‚</p>
<h4 id="306-unused"><a href="#306-unused" class="headerlink" title="306 unused"></a>306 unused</h4><p>åœ¨HTTP1.1åºŸå¼ƒæ‰äº†ï¼Œä¸å†ä½¿ç”¨ï¼Œå¹¶ä¸”æ­¤çŠ¶æ€ç è¢«ä¿ç•™ã€‚åœ¨HTTP1.1ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œ306 Switch Proxyç”¨äºè¡¨ç¤ºéšåçš„è¯·æ±‚åº”è¯¥ä½¿ç”¨æŒ‡å®šçš„ä»£ç†ã€‚</p>
<h4 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h4><p>è¯·æ±‚çš„èµ„æºä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ï¼Œå®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨Locationé¦–éƒ¨ç»™å‡ºçš„URLæ¥ä¸´æ—¶å®šä½èµ„æºã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚</p>
<p>é™¤éæ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™307å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URLçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚å› ä¸ºéƒ¨åˆ†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«307å“åº”ï¼Œæ·»åŠ URLè¶…é“¾æ¥ä»¥ä¾¿ä¸èƒ½å¤„ç†307çŠ¶æ€ç çš„ç”¨æˆ·æœ‰èƒ½åŠ›åœ¨æ–°URLä¸­å‘èµ·é‡å®šå‘è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠé‡å®šå‘çš„é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œè®©ç”¨æˆ·å»ç‚¹é‡å®šå‘URLé“¾æ¥ã€‚</p>
<p><img src="//img.aotu.io/wengeek/307.png" alt="307"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Chromeå¯¹äºhstsåˆ—è¡¨çš„åŸŸåï¼Œé‡‡ç”¨äº†307è¿›è¡Œé‡å®šå‘ã€‚</p>
<p>ä»¥ä¸Šå†…å®¹è®²è¿°äº†301-307çš„çŠ¶æ€ç ï¼Œå¯¹äºè¿™äº›çŠ¶æ€ç ä»¥åŠä¸€äº›ç¼“å­˜çš„é¦–éƒ¨å¯èƒ½è¿˜æœ‰ä¸€äº›ç–‘æƒ‘ï¼Œä»¥ä¸‹ç®€å•åœ°åˆ—å‡ºäº†å‡ ç‚¹ã€‚</p>
<h4 id="1ã€ä»ä¸Šé¢çš„çŠ¶æ€ç ä¸­ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°302ã€303å’Œ307çŠ¶æ€ç ä¹‹é—´å­˜åœ¨ä¸€äº›äº¤å‰ï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨å“ªäº›ç»†å¾®å·®åˆ«ï¼Ÿ"><a href="#1ã€ä»ä¸Šé¢çš„çŠ¶æ€ç ä¸­ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°302ã€303å’Œ307çŠ¶æ€ç ä¹‹é—´å­˜åœ¨ä¸€äº›äº¤å‰ï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨å“ªäº›ç»†å¾®å·®åˆ«ï¼Ÿ" class="headerlink" title="1ã€ä»ä¸Šé¢çš„çŠ¶æ€ç ä¸­ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°302ã€303å’Œ307çŠ¶æ€ç ä¹‹é—´å­˜åœ¨ä¸€äº›äº¤å‰ï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨å“ªäº›ç»†å¾®å·®åˆ«ï¼Ÿ"></a>1ã€ä»ä¸Šé¢çš„çŠ¶æ€ç ä¸­ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°302ã€303å’Œ307çŠ¶æ€ç ä¹‹é—´å­˜åœ¨ä¸€äº›äº¤å‰ï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨å“ªäº›ç»†å¾®å·®åˆ«ï¼Ÿ</h4><p>303å’Œ307æ˜¯HTTP/1.1æ–°å¢åŠ çš„çŠ¶æ€ç ï¼Œå®ƒä»¬æ˜¯å¯¹HTTP1.0ä¸­çš„302çŠ¶æ€ç çš„ç»†åŒ–ã€‚å½“HTTP/1.0å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œå¹¶åœ¨å“åº”ä¸­æ”¶åˆ°302é‡å®šå‘çŠ¶æ€ç æ—¶ï¼Œå®ƒä¼šæ¥å—Locationé¦–éƒ¨çš„é‡å®šå‘URLï¼Œå¹¶å‘é‚£ä¸ªURLå‘èµ·ä¸€ä¸ªGETè¯·æ±‚ã€‚é€è¿‡ä»¥ä¸Šçš„çŠ¶æ€ç ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°HTTP/1.1è§„èŒƒä½¿ç”¨303çŠ¶æ€ç æ¥å®ç°åŒæ ·çš„è¡Œä¸ºã€‚ä¸ºäº†é¿å¼€è¿™ä¸ªé—®é¢˜ï¼Œå¯¹äºHTTP/1.1å®¢æˆ·ç«¯ï¼Œç”¨307çŠ¶æ€ç æ¥ä»£æ›¿302çŠ¶æ€ç è¿›è¡Œä¸´æ—¶é‡å®šå‘ã€‚</p>
<p>åœ¨HTTP/1.1ä¸­ï¼Œ302ç†è®ºä¸Šæ˜¯å¯ä»¥è¢«303å’Œ307ä»£æ›¿æ‰çš„ï¼Œä½†ä¸ºäº†å…¼å®¹HTTP/1.0ï¼Œä¾ç„¶è¿˜åœ¨å¹¿æ³›ä½¿ç”¨ã€‚</p>
<h4 id="2ã€ç»å¸¸å¯ä»¥çœ‹åˆ°-Cache-Control-no-cache-è¿™æ ·çš„é¦–éƒ¨ï¼Œé‚£ä¹ˆä»£è¡¨çš„æ˜¯ä¸ç¼“å­˜ä¹ˆï¼Ÿ"><a href="#2ã€ç»å¸¸å¯ä»¥çœ‹åˆ°-Cache-Control-no-cache-è¿™æ ·çš„é¦–éƒ¨ï¼Œé‚£ä¹ˆä»£è¡¨çš„æ˜¯ä¸ç¼“å­˜ä¹ˆï¼Ÿ" class="headerlink" title="2ã€ç»å¸¸å¯ä»¥çœ‹åˆ° Cache-Control: no-cache è¿™æ ·çš„é¦–éƒ¨ï¼Œé‚£ä¹ˆä»£è¡¨çš„æ˜¯ä¸ç¼“å­˜ä¹ˆï¼Ÿ"></a>2ã€ç»å¸¸å¯ä»¥çœ‹åˆ° <strong><em>Cache-Control: no-cache</em></strong> è¿™æ ·çš„é¦–éƒ¨ï¼Œé‚£ä¹ˆä»£è¡¨çš„æ˜¯ä¸ç¼“å­˜ä¹ˆï¼Ÿ</h4><p>Cache-Control: no-cache å“åº”å®é™…ä¸Šæ˜¯å¯ä»¥å­˜å‚¨åˆ°æœ¬åœ°ç¼“å­˜åŒºä¸­çš„ï¼Œåªæ˜¯åœ¨ä¸æœåŠ¡å™¨è¿›è¡Œæ–°é²œåº¦å†éªŒè¯ä¹‹å‰ï¼Œç¼“å­˜ä¸èƒ½å°†å…¶æä¾›ç»™å®¢æˆ·ç«¯ä½¿ç”¨ã€‚</p>
<p>å¦‚æœéœ€è¦æœ¬åœ°å½»åº•ä¸ç¼“å­˜ï¼Œéœ€è¦ä½¿ç”¨Cache-Control: no-storeï¼Œè¡¨ç¤ºç¼“å­˜åº”è¯¥å°½å¿«ä»å­˜å‚¨å™¨ä¸­åˆ é™¤æ–‡æ¡£çš„æ‰€æœ‰ç—•è¿¹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“300-399è¿™ä¸€ç³»åˆ—çš„çŠ¶æ€ç ä»£è¡¨çš„æ˜¯é‡å®šå‘çŠ¶æ€ç ã€‚é‡å®šå‘çŠ¶æ€ç è¦ä¹ˆå‘ŠçŸ¥å®¢æˆ·ç«¯ä½¿ç”¨æ›¿ä»£ä½ç½®æ¥è®¿é—®å¥¹ä»¬æ‰€æ„Ÿå…´è¶£çš„èµ„æºï¼Œè¦ä¹ˆå°±æä¾›ä¸€ä¸ªæ›¿ä»£çš„å“åº”è€Œä¸æ˜¯èµ„æºçš„å†…å®¹ã€‚å¦‚æœèµ„æºå·²è¢«ç§»åŠ¨ï¼Œå¯å‘é€ä¸€ä¸ªé‡å®šå‘çŠ¶æ€ç å’Œä¸€ä¸ªå¯é€‰çš„Locationé¦–éƒ¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯å·²è¢«ç§»èµ°ï¼Œä»¥
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="http" scheme="https://aotu.io/tags/http/"/>
    
      <category term="é‡å®šå‘" scheme="https://aotu.io/tags/%E9%87%8D%E5%AE%9A%E5%90%91/"/>
    
      <category term="ç¼“å­˜" scheme="https://aotu.io/tags/%E7%BC%93%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åˆ¶ä½œcocoaPodsä¾èµ–åº“</title>
    <link href="https://aotu.io/notes/2016/01/27/how-to-make-cocoapods/"/>
    <id>https://aotu.io/notes/2016/01/27/how-to-make-cocoapods/</id>
    <published>2016-01-27T11:40:49.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¼šä½¿ç”¨åˆ«äººçš„ <strong>Pods</strong> ä¾èµ–åº“ä»¥åï¼Œ ä½ ä¸€å®šå¯¹åˆ›å»ºè‡ªå·±çš„ä¾èµ–åº“å¾ˆæœ‰å…´è¶£å§ï¼Œç°åœ¨æˆ‘ä»¬å°±æ¥å°è¯•ä¸€ä¸‹ï¼Œä»¥ä¸€ä¸ªç®€å• <strong>O2View</strong> ä¸ºä¾‹è‡ªå·±åˆ›å»ºä¸€ä¸ª <strong>Pods</strong> ä¾èµ–åº“ï¼Œè¿™é‡Œæˆ‘ä¼šä½¿ç”¨ <strong>Swift 2.0</strong> æ¥å†™è¿™ä¸ªä¾‹å­ã€‚</p>
<a id="more"></a>
<h3 id="1-åˆ›å»ºè‡ªå·±çš„-github-ä»“åº“"><a href="#1-åˆ›å»ºè‡ªå·±çš„-github-ä»“åº“" class="headerlink" title="1.åˆ›å»ºè‡ªå·±çš„ github ä»“åº“"></a>1.åˆ›å»ºè‡ªå·±çš„ <strong>github</strong> ä»“åº“</h3><p><a href="https://github.com/CocoaPods" target="_blank" rel="external"><strong>CocoaPods</strong></a> æ˜¯æ‰˜ç®¡åœ¨ <strong>github</strong> ä¸Šçš„ï¼Œæ‰€æœ‰çš„ <strong>Pods</strong> ä¹Ÿéƒ½æ˜¯æ‰˜ç®¡åœ¨ <strong>github</strong> ä¸Šï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªå±äºè‡ªå·±çš„ github ä»“åº“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-1githubRepo.png" alt="github"></p>
<p>ä¸Šå›¾ä¸­æ ‡è¯†å‡ºäº†6å¤„åœ°æ–¹</p>
<ol>
<li><strong>Repository name:</strong> ä»“åº“åç§°ï¼Œè¿™é‡Œå†™ä¸Šæˆ‘ä»¬çš„ä¾èµ–åº“åå­— <strong>O2View</strong> ï¼Œå¿…å¡«ã€‚</li>
<li><strong>Descriptionï¼š</strong> ä»“åº“çš„æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚</li>
<li><strong>Public or Private:</strong> ä»“åº“çš„å…¬å¼€æ€§ï¼Œå¼€æºçš„è¯é€‰ <strong>Public</strong> ã€‚ å¦‚æœæ˜¯å…¬å¸å†…éƒ¨ä½¿ç”¨çš„è¯è¿™é‡Œæ¨èå¤§å®¶ä½¿ç”¨ç§æœ‰çš„ä»“åº“,ä½†æ˜¯ <strong>github</strong> çš„ç§æœ‰ä»“åº“æ˜¯è¦æ”¶è´¹çš„ <strong>$7/month</strong> ï¼ˆå£•è¯·æ— è§† - -ï¼ï¼‰ã€‚å¤§éƒ¨åˆ†å…¬å¸éƒ½æ˜¯æœ‰è‡ªå·±çš„gitæœåŠ¡å™¨ï¼Œä¸è¿‡ä¸€èˆ¬åªèƒ½åœ¨å…¬å¸å†…ç½‘ä½¿ç”¨ï¼Œæˆ–è€…å¯ä»¥é€‰æ‹©<a href="https://gitlab.com" target="_blank" rel="external">Gitlab</a>,<a href="https://coding.net" target="_blank" rel="external">Coding</a>, <a href="https://bitbucket.org/" target="_blank" rel="external">Bitbucket</a>ä»»æ„ä¸€ç§ã€‚</li>
<li><strong>Initializeï¼š</strong> æ˜¯å¦é»˜è®¤åˆ›å»ºä¸€ä¸ª <strong>README</strong> æ–‡æ¡£ï¼Œä¸€ä¸ªå®Œæ•´çš„åº“éƒ½ä¼šæœ‰è¿™ä¸ªè¯´æ˜æ–‡æ¡£ï¼Œè¿™é‡Œæœ€å¥½å‹¾é€‰ä¸€ä¸‹ã€‚ä¸è¿‡å¦‚æœå¿˜è®°çš„è¯ä¹Ÿä¸è¦ç´§ï¼Œåé¢æ‰‹åŠ¨åˆ›å»ºä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</li>
<li><strong>.gitignoreï¼š</strong> å¿½ç•¥é¡¹æ–‡ä»¶ï¼Œè®°å½•ä¸€äº›æƒ³å¿½ç•¥çš„æ–‡ä»¶ç±»å‹ï¼Œå‡¡æ˜¯è¯¥æ–‡ä»¶åŒ…å«çš„æ–‡ä»¶ç±»å‹ï¼Œ git éƒ½ä¸ä¼šå°†å…¶çº³å…¥åˆ°ç‰ˆæœ¬ç®¡ç†ä¸­ã€‚çœ‹éœ€è¦é€‰æ‹©å°±è¡Œã€‚</li>
<li><strong>licenseï¼š</strong> æ­£è§„çš„ä»“åº“éƒ½æœ‰ä¸€ä¸ª <strong>license</strong> æ–‡ä»¶ï¼Œ <strong>Pods</strong> ä¾èµ–åº“å¯¹è¿™ä¸ªæ–‡ä»¶è¦æ±‚æ¯”è¾ƒä¸¥æ ¼ï¼Œéœ€è¦æœ‰è¿™ä¸ªæ–‡ä»¶ã€‚è¿™é‡Œæœ€å¥½è®© <strong>github</strong> è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªï¼Œä¸è¿‡åç»­æ‰‹åŠ¨åˆ›å»ºä¹Ÿè¡Œã€‚æˆ‘ä»¬è¿™æ¬¡å…ˆä½¿ç”¨ <strong>MIT</strong> ç±»å‹çš„ <strong>license</strong>ã€‚</li>
</ol>
<p>ä¸Šé¢å„é¡¹æ ¹æ®å¤§å®¶éœ€è¦å¡«å†™å®Œæ¯•åï¼Œç‚¹å‡» <strong>Create repository</strong> æŒ‰é’®å³å¯ï¼Œåˆ›å»ºæˆåŠŸåå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-2githubO2View.png" alt="github"></p>
<h3 id="2-clone-ä»“åº“åˆ°æœ¬åœ°"><a href="#2-clone-ä»“åº“åˆ°æœ¬åœ°" class="headerlink" title="2.clone ä»“åº“åˆ°æœ¬åœ°"></a>2.clone ä»“åº“åˆ°æœ¬åœ°</h3><p>ä¸ºäº†æ–¹ä¾¿å‘ä»“åº“ä¸­åˆ å‡å†…å®¹ï¼Œéœ€è¦å°†ä»“åº“ <strong>clone</strong> åˆ°æœ¬åœ°ï¼Œè¿™é‡Œæœ‰å¤šç§æ“ä½œæ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©ä½ å–œæ¬¢çš„ä¸€ç§ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿è¿™è¾¹é€‰æ‹©ä½¿ç”¨å‘½ä»¤è¡Œã€‚é¦–å…ˆéœ€è¦åˆ‡æ¢åˆ°ä½ æƒ³åœ¨æœ¬åœ°å­˜å‚¨çš„ç›®å½•ï¼Œç„¶åå† <strong>clone</strong> ï¼Œå‡è®¾ä½ æ”¾åœ¨ç”¨æˆ·çš„æ ¹ç›®å½•ä¸Šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~</div><div class="line">git <span class="built_in">clone</span> https://github.com/marklin2012/O2View.git</div></pre></td></tr></table></figure>
<p>å®Œæˆåï¼Œæˆ‘ä»¬è¿›å…¥åˆ° <code>~/O2View</code> ç›®å½•ä¸­åº”è¯¥å¯ä»¥çœ‹åˆ°ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">|____LICENSE</span></div><div class="line"><span class="string">|____README.md</span></div></pre></td></tr></table></figure>
<p>å…¶å®è¿˜æœ‰ä¸€ä¸ªéšè—çš„ <strong>.git</strong> æ–‡ä»¶ï¼Œåç»­æˆ‘ä»¬çš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨è¿™ä¸ªç›®å½•åº•ä¸‹è¿›è¡Œã€‚</p>
<h3 id="3-å‘æœ¬åœ°ä»“åº“ä¸­æ·»åŠ åˆ›å»º-Pods-ä¾èµ–åº“æ‰€éœ€çš„æ–‡ä»¶"><a href="#3-å‘æœ¬åœ°ä»“åº“ä¸­æ·»åŠ åˆ›å»º-Pods-ä¾èµ–åº“æ‰€éœ€çš„æ–‡ä»¶" class="headerlink" title="3.å‘æœ¬åœ°ä»“åº“ä¸­æ·»åŠ åˆ›å»º Pods ä¾èµ–åº“æ‰€éœ€çš„æ–‡ä»¶"></a>3.å‘æœ¬åœ°ä»“åº“ä¸­æ·»åŠ åˆ›å»º Pods ä¾èµ–åº“æ‰€éœ€çš„æ–‡ä»¶</h3><h4 id="1ï¼‰ä¸»ç±»æ–‡ä»¶"><a href="#1ï¼‰ä¸»ç±»æ–‡ä»¶" class="headerlink" title="1ï¼‰ä¸»ç±»æ–‡ä»¶"></a>1ï¼‰ä¸»ç±»æ–‡ä»¶</h4><p>åˆ›å»º <strong>Pods</strong> ä¾èµ–åº“å°±æ˜¯ä¸ºäº†æ–¹ä¾¿åˆ«äººä½¿ç”¨æˆ‘ä»¬çš„æˆæœï¼Œæ¯”å¦‚æˆ‘æƒ³å…±äº«ç»™å¤§å®¶çš„O2Viewç±»ï¼Œé‚£è¿™ä¸ªç±»è‡ªç„¶å¿…ä¸å¯å°‘ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç±»æ”¾å…¥ä¸€ä¸ª <strong>O2View</strong> çš„ç›®å½•ä¸­ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-3O2ViewClassDoc.jpeg" alt="ä¸»ç±»"></p>
<p>é¡ºä¾¿çœ‹çœ‹ <strong>O2View.swift</strong> ä¸»è¦å†…å®¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">O2View</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</div><div class="line">        backgroundColor = <span class="type">UIColor</span>.redColor()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">required</span> <span class="keyword">public</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</div><div class="line">        <span class="built_in">fatalError</span>(<span class="string">"init(coder:) has not been implemented"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2ï¼‰-podspec-æ–‡ä»¶"><a href="#2ï¼‰-podspec-æ–‡ä»¶" class="headerlink" title="2ï¼‰.podspec æ–‡ä»¶"></a>2ï¼‰.podspec æ–‡ä»¶</h4><p>æ¯ä¸ª <strong>Pods</strong> ä¾èµ–åº“å¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåç§°å’Œä¾èµ–åº“åä¿æŒä¸€è‡´ï¼Œåç¼€åä¸º <strong>.podspec</strong> çš„æè¿°æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬ä¾èµ–åº“çš„æè¿°æ–‡ä»¶åç§°åº”è¯¥ä¸º <code>O2View.podspec</code>ã€‚</p>
<p>åˆ›å»ºè¿™ä¸ªæ–‡ä»¶æœ‰ä¸¤ç§é€”å¾„ï¼š</p>
<ol>
<li>å¤åˆ¶å·²æœ‰çš„ <strong>podspec</strong> æ–‡ä»¶ç„¶åä¿®æ”¹å¯¹åº”çš„å‚æ•°ã€‚</li>
<li>æ‰§è¡Œå‘½ä»¤è¡Œåˆ›å»ºã€‚</li>
</ol>
<p>æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod spec create O2View</div></pre></td></tr></table></figure>
<p>åˆ›å»ºå‡º <strong>O2View.podspec</strong> æ–‡ä»¶åï¼Œæˆ‘ä»¬æ‰“å¼€å¯ä»¥å‘ç°ï¼Œè¯¥æ–‡ä»¶æ˜¯ <strong>ruby</strong> æ–‡ä»¶ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å†…å®¹ï¼Œä½†æ˜¯å¤§å¤šæ•°éƒ½æ˜¯æˆ‘ä»¬ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ ¹æ®é¡¹ç›®çš„æƒ…å†µä¿ç•™å…³é”®çš„ä¸€äº›å†…å®¹å°±è¡Œï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></div><div class="line">  s.name         = <span class="string">"O2View"</span>				<span class="comment">#åç§°</span></div><div class="line">  s.version      = <span class="string">"0.0.1"</span>				<span class="comment">#ç‰ˆæœ¬å·</span></div><div class="line">  s.summary      = <span class="string">"Just testing"</span>		<span class="comment">#ç®€çŸ­ä»‹ç»</span></div><div class="line">  s.description  = <span class="string">&lt;&lt;-DESC</span></div><div class="line">  					ç§æœ‰Podsæµ‹è¯•</div><div class="line">  					* Markdown æ ¼å¼</div><div class="line">                   DESC</div><div class="line"></div><div class="line">  s.homepage     = <span class="string">"http://aoto.io/"</span></div><div class="line">  <span class="comment"># s.screenshots  = "www.example.com/screenshots_1.gif"</span></div><div class="line">  s.license      = <span class="string">"MIT"</span>				<span class="comment">#å¼€æºåè®®</span></div><div class="line">  s.author             = &#123; <span class="string">"linyi31"</span> =&gt; <span class="string">"linyi@jd.com"</span> &#125;</div><div class="line"></div><div class="line">  s.source       = &#123; <span class="symbol">:git</span> =&gt; <span class="string">"https://github.com/marklin2012/O2View.git"</span> &#125;</div><div class="line">  <span class="comment">## è¿™é‡Œä¸æ”¯æŒsshçš„åœ°å€ï¼Œåªæ”¯æŒHTTPå’ŒHTTPSï¼Œæœ€å¥½ä½¿ç”¨HTTPS</span></div><div class="line">  <span class="comment">## æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ç¨³å®šçš„tagç‰ˆæœ¬æ¥è®¿é—®ï¼Œå¦‚æœæ˜¯åœ¨å¼€å‘æµ‹è¯•çš„æ—¶å€™ï¼Œä¸éœ€è¦å‘å¸ƒreleaseç‰ˆæœ¬ï¼Œç›´æ¥æŒ‡å‘gitåœ°å€ä½¿ç”¨</span></div><div class="line">  <span class="comment">## å¾…æµ‹è¯•é€šè¿‡å®Œæˆåæˆ‘ä»¬å†å‘å¸ƒæŒ‡å®šreleaseç‰ˆæœ¬ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹å¼</span></div><div class="line">  <span class="comment">#s.source       = &#123; :git =&gt; "http://EXAMPLE/O2View.git", :tag =&gt; version &#125;</span></div><div class="line">  </div><div class="line">  s.platform     = <span class="symbol">:ios</span>, <span class="string">"9.0"</span>			<span class="comment">#æ”¯æŒçš„å¹³å°åŠç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬å‘¢ç”¨swiftï¼Œç›´æ¥ä¸Š9.0</span></div><div class="line">  s.requires_arc = <span class="literal">true</span>					<span class="comment">#æ˜¯å¦ä½¿ç”¨ARC</span></div><div class="line"></div><div class="line">  s.source_files  = <span class="string">"O2View/*.swift"</span>	<span class="comment">#OCå¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™æ ·"Classes/**/*.&#123;h,m&#125;"</span></div><div class="line"></div><div class="line">  s.frameworks = <span class="string">'UIKit'</span>, <span class="string">'QuartzCore'</span>, <span class="string">'Foundation'</span>	<span class="comment">#æ‰€éœ€çš„framework,å¤šä¸ªç”¨é€—å·éš”å¼€</span></div><div class="line">  s.module_name = <span class="string">'O2View'</span>				<span class="comment">#æ¨¡å—åç§°</span></div><div class="line"></div><div class="line">  <span class="comment"># s.dependency "JSONKit", "~&gt; 1.4"	#ä¾èµ–å…³ç³»ï¼Œè¯¥é¡¹ç›®æ‰€ä¾èµ–çš„å…¶ä»–åº“ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä»¥å†™å¤šä¸ª s.dependency</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h4 id="3ï¼‰Demo-å·¥ç¨‹"><a href="#3ï¼‰Demo-å·¥ç¨‹" class="headerlink" title="3ï¼‰Demo å·¥ç¨‹"></a>3ï¼‰Demo å·¥ç¨‹</h4><p>ä¸ºäº†å¿«é€Ÿæ•™ä¼šåˆ«äººä½¿ç”¨æˆ‘ä»¬çš„ <strong>Pods</strong> ä¾èµ–åº“ï¼Œé€šå¸¸éœ€è¦æä¾›ä¸€ä¸ª demo å·¥ç¨‹ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º <strong>O2ViewDemo</strong> çš„å·¥ç¨‹æ¥æ¼”ç¤º <strong>O2View</strong> çš„ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-4O2ViewDemo.jpeg" alt="demo"></p>
<h4 id="4ï¼‰README-md"><a href="#4ï¼‰README-md" class="headerlink" title="4ï¼‰README.md"></a>4ï¼‰README.md</h4><p>ä½¿ç”¨ <strong>github</strong> çš„äººåº”è¯¥éƒ½ç†Ÿæ‚‰è¿™ä¸ªæ–‡ä»¶ï¼Œå®ƒä½¿ä¸€ä¸ªæˆåŠŸçš„ <strong>github</strong> ä»“åº“å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨ <strong>markdown</strong> å¯¹ä»“åº“è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p>
<h4 id="5ï¼‰LICENSE-æ–‡ä»¶"><a href="#5ï¼‰LICENSE-æ–‡ä»¶" class="headerlink" title="5ï¼‰LICENSE æ–‡ä»¶"></a>5ï¼‰LICENSE æ–‡ä»¶</h4><p><strong>CocoaPods</strong> å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„ <strong>Pods</strong> ä¾èµ–åº“éƒ½å¿…é¡»æœ‰ <strong>license</strong> æ–‡ä»¶ï¼Œå¦åˆ™éªŒè¯ä¸ä¼šé€šè¿‡ã€‚ <strong>license</strong> æ–‡ä»¶æœ‰å¾ˆå¤šä¸­ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ <a href="https://tldrlegal.com/" target="_blank" rel="external">tldrlegal</a>ã€‚å‰é¢æˆ‘ä»¬å·²ç»é€‰æ‹©åˆ›å»ºäº†ä¸€ä¸ª <strong>MIT</strong> ç±»å‹çš„ <strong>license</strong>ã€‚</p>
<p>ä»¥ä¸Šçš„5ä¸ªæ–‡ä»¶æ˜¯åˆ›å»º <strong>Pods</strong> ä¾èµ–åº“æ‰€éœ€çš„åŸºç¡€æ–‡ä»¶ï¼Œå½“ç„¶ <strong>Demo</strong> å·¥ç¨‹æ²¡æœ‰æ·»åŠ ä¹Ÿæ²¡å…³ç³»ã€‚æ·»åŠ å®Œè¿™äº›å†…å®¹åï¼Œæˆ‘ä»¬æœ¬åœ°ä»“åº“ç›®å½•å°±å˜æˆè¿™ä¸ªæ ·å­ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-5O2ViewDoc.jpeg" alt="license"></p>
<h3 id="4-æäº¤ä¿®æ”¹åˆ°-github"><a href="#4-æäº¤ä¿®æ”¹åˆ°-github" class="headerlink" title="4.æäº¤ä¿®æ”¹åˆ° github"></a>4.æäº¤ä¿®æ”¹åˆ° <strong>github</strong></h3><p>ç»è¿‡å‰é¢æ­¥éª¤ï¼Œæˆ‘ä»¬å·²å°†åœ¨æœ¬åœ°çš„ <strong>git</strong> ä»“åº“æ·»åŠ äº†ä¸å°‘æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬åªè¦å°†ä»–ä»¬æäº¤åˆ° <strong>github</strong> ä¸Šå°±å¯ä»¥ã€‚åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦å¯¹åˆšæ‰æ·»åŠ çš„ <strong>pod</strong> è¿›è¡Œä¸€ä¸‹éªŒè¯ï¼š</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod <span class="class"><span class="keyword">lib</span> <span class="title">lint</span></span></div></pre></td></tr></table></figure>
<p>è¿è¡Œä¹‹åå¯èƒ½ä¼šå¾—åˆ°ä¸‹é¢çš„è­¦å‘Šï¼š</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> -&gt; O2View (<span class="number">0.0</span><span class="number">.1</span>)</div><div class="line">    - WARN  | source: Git sources should specify a tag.</div><div class="line"></div><div class="line">[!] O2View did not pass validation, due <span class="keyword">to</span> <span class="number">1</span> warning (but you can <span class="keyword">use</span> `--allow-warnings` <span class="keyword">to</span> ignore it) <span class="keyword">and</span> All results apply only <span class="keyword">to</span> <span class="keyword">public</span> specs, but you can <span class="keyword">use</span> `--<span class="keyword">private</span>` <span class="keyword">to</span> ignore them <span class="keyword">if</span> linting the specification <span class="keyword">for</span> a <span class="keyword">private</span> pod..</div><div class="line">You can <span class="keyword">use</span> the `--no-clean` option <span class="keyword">to</span> inspect any issue.</div></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬ç°åœ¨è¿˜æ²¡æœ‰æ­£å¼ç”Ÿæˆ <strong>release</strong> ç‰ˆæœ¬ï¼Œ <strong>github</strong> ä¸Šå¹¶æ²¡æœ‰ä»»ä½• <strong>tag</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆšæ‰å¡«å†™ <strong>.podspec</strong> æ–‡ä»¶å¡«å†™ <strong>git</strong> åœ°å€çš„æ—¶å€™æ²¡æœ‰å¡«å†™æŒ‡å®š <strong>tag</strong> ï¼ˆä¸Šé¢æ–‡ä»¶çš„æ³¨é‡Šä¸­æœ‰æåˆ°ï¼‰ï¼Œè§£å†³æ–¹æ³•æˆ‘ä»¬å¯ä»¥å…ˆæ‰§è¡Œå¿½ç•¥è­¦å‘Šçš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib lint --allow-warnings</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆåŠŸä¼šå‡ºç°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> -<span class="ruby">&gt; O2View (<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span></div><div class="line">    -<span class="ruby"> WARN  <span class="params">| source: Git sources should specify a tag.</span></span></div><div class="line"></div><div class="line">O2View passed validation.</div></pre></td></tr></table></figure>
<blockquote>
<p>å½“è°ƒè¯•å®Œæˆäº†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <strong>github</strong> ä¸ŠæŠŠæˆ‘ä»¬çš„ä»£ç ç”Ÿæˆç›¸åº”ç¨³å®šçš„ <strong>release</strong> ç‰ˆæœ¬ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬å†å›æ¥æ·»åŠ æŒ‡å®š <strong>tag</strong> å‘å¸ƒå°± Ok äº†ã€‚</p>
</blockquote>
<p>éªŒè¯æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬åªè¦æŠŠä»£ç æäº¤åˆ° <strong>github</strong> ä»“åº“ï¼Œå°±å¯ä»¥äº†ï¼Œå‚è€ƒå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git add -A &amp;&amp; git commit -m <span class="string">"add pod files"</span></div><div class="line"></div><div class="line">git push origin master</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦æ˜¯ <strong>git</strong> çš„èŒƒç•´ï¼Œä¸åšè¿‡å¤šå™è¿°ã€‚å¦‚æœå‰é¢æ“ä½œéƒ½æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œ<strong>github</strong> ä¸Šåº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹å†…å®¹ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/cocoaPods/1-6githubO2ViewPush.png" alt="push"></p>
<h3 id="5-æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"><a href="#5-æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="5.æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"></a>5.æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</h3><p>ç»è¿‡å‰é¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬çš„ <strong>CocoaPods</strong> ä¾èµ–åº“å°±å·²ç»å‡†å¤‡å¥½äº†ï¼Œä½†æ˜¯ç°åœ¨ä½ è¿˜ä¸èƒ½åœ¨ä½ çš„å·¥ç¨‹ä¸­ä½¿ç”¨å®ƒã€‚å¦‚æœä½ æƒ³æˆä¸ºä¸€ä¸ªçœŸæ­£å¯ç”¨çš„ä¾èµ–åº“ï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥æ“ä½œï¼šå°†åˆšæ‰ç”Ÿäº§çš„ <strong>podspec</strong> æ–‡ä»¶æäº¤åˆ° <a href="https://github.com/CocoaPods/Specs" target="_blank" rel="external">å®˜æ–¹çš„ <strong>CocoaPods Specs</strong> </a>ä¸­ã€‚</p>
<p>æ²¡é”™ï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„èƒ½ç”¨ <code>pod search</code> æœåˆ°çš„ä¾èµ–åº“éƒ½ä¼šæŠŠå®ƒä¸Šä¼ åˆ°è¿™ä¸ªä»“åº“ä¸­ï¼Œ ä¹Ÿå°±æ˜¯è¯´åªæœ‰å°†æˆ‘ä»¬çš„ <strong>podspec</strong> æ–‡ä»¶ä¸Šä¼ åˆ°è¿™é‡Œï¼Œæ‰èƒ½æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ä¾èµ–åº“ï¼Œåˆ«äººæ‰èƒ½ç”¨ï¼</p>
<p>æŒ‰ç…§ <strong>github</strong> çš„è§„åˆ™ï¼Œè¦æƒ³å‘åˆ«äººçš„åº“ä¸­æ·»åŠ æ–‡ä»¶ï¼Œå°±è¦å…ˆ <strong>fork</strong> åˆ«äººçš„ä»“åº“ï¼Œåšç›¸åº”çš„ä¿®æ”¹ï¼Œå† <strong>pullrequest</strong> ç»™ä»“åº“çš„åŸä½œè€…ï¼Œç­‰åˆ°ä½œè€…å®¡æ ¸é€šè¿‡ï¼Œè¿›è¡Œ <strong>meger</strong> ä¹‹åå°±å¯ä»¥äº†ï¼</p>
<p>æµç¨‹å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://guides.cocoapods.org/" target="_blank" rel="external">CocoaPods Guides</a>ï¼Œæˆ‘ä»¬å°±å…ˆä¸å±•å¼€è¯¦ç»†çš„å™è¿°äº†ï¼ˆåé¢ä¼šæ·»åŠ å…³äºè¿™éƒ¨åˆ†çš„æ–‡ç« ï¼‰ã€‚</p>
<p>é™¤äº†å®˜æ–¹çš„ <strong>specs</strong> ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠ <strong>podspec</strong> æ–‡ä»¶æäº¤åˆ°ç§æœ‰çš„ä»“åº“ä¸­ï¼Œè¯¦è§æˆ‘ä»¬åšå®¢çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.jianshu.com/p/ddc2490bff9f" target="_blank" rel="external">åˆ›å»ºç§æœ‰çš„ <strong>CocoaPods repo spec</strong></a> ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¼šä½¿ç”¨åˆ«äººçš„ &lt;strong&gt;Pods&lt;/strong&gt; ä¾èµ–åº“ä»¥åï¼Œ ä½ ä¸€å®šå¯¹åˆ›å»ºè‡ªå·±çš„ä¾èµ–åº“å¾ˆæœ‰å…´è¶£å§ï¼Œç°åœ¨æˆ‘ä»¬å°±æ¥å°è¯•ä¸€ä¸‹ï¼Œä»¥ä¸€ä¸ªç®€å• &lt;strong&gt;O2View&lt;/strong&gt; ä¸ºä¾‹è‡ªå·±åˆ›å»ºä¸€ä¸ª &lt;strong&gt;Pods&lt;/strong&gt; ä¾èµ–åº“ï¼Œè¿™é‡Œæˆ‘ä¼šä½¿ç”¨ &lt;strong&gt;Swift 2.0&lt;/strong&gt; æ¥å†™è¿™ä¸ªä¾‹å­ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://aotu.io/cates/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://aotu.io/tags/iOS/"/>
    
      <category term="CocoaPods" scheme="https://aotu.io/tags/CocoaPods/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åˆ›å»ºç§æœ‰ CocoaPods ä»“åº“</title>
    <link href="https://aotu.io/notes/2016/01/26/Private-CocoaPods-Specs-Repo/"/>
    <id>https://aotu.io/notes/2016/01/26/Private-CocoaPods-Specs-Repo/</id>
    <published>2016-01-26T03:35:15.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å…¬å…±-CocoaPods"><a href="#å…¬å…±-CocoaPods" class="headerlink" title="å…¬å…± CocoaPods"></a>å…¬å…± CocoaPods</h3><p>æ‰“å¼€éšè—ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤: </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ‰“å¼€éšè—çš„å‘½ä»¤:</span></div><div class="line">defaults write com<span class="selector-class">.apple</span><span class="selector-class">.finder</span> AppleShowAllFiles -bool true</div><div class="line"><span class="comment">//å…³é—­éšè—çš„å‘½ä»¤:</span></div><div class="line">defaults write com<span class="selector-class">.apple</span><span class="selector-class">.finder</span> AppleShowAllFiles -bool false</div></pre></td></tr></table></figure>
<p>æ¥ç€éœ€è¦é‡å¯ä¸€ä¸‹ <strong>Finder</strong>ï¼Œ å¯ä»¥æŒ‰ä½ <strong>option</strong> + å³é”® <strong>Finder</strong> å›¾æ ‡é€‰æ‹©é‡å¯ã€‚ç„¶åæ‰“å¼€éšè—ç›®å½• <strong>.cocoapods</strong> (è¿™ä¸ªç›®å½•åœ¨ä½ çš„ä¸ªäººç›®å½•åº•ä¸‹, <code>~/.cocoapods</code> æˆ– <code>/Users/[username]/.cocoapods</code>)</p>
<a id="more"></a>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-1cocoapodsMasterRepo.png" alt="repo"></p>
<p>å¯ä»¥çœ‹åˆ°ä¸Šå›¾ï¼Œ <strong>.cocoapods</strong> ç›®å½•ä¸‹çš„ <strong>repos</strong> å…¶å®æ˜¯ <strong>repository</strong> ï¼ˆä»“åº“ï¼‰çš„ç¼©å†™ã€‚ <strong>repos</strong> ä¸­å­˜æ”¾çš„æ—¶ä»“åº“çš„é›†åˆã€‚è¿™é‡Œçš„ <strong>master</strong> å°±æ˜¯ <strong>CocoaPods</strong> å®˜æ–¹å»ºç«‹çš„ä»“åº“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„å…¬å…±åº“ã€‚</p>
<p><strong>specs</strong> ç›®å½•ä¸‹å­˜æ”¾çš„å°±æ˜¯æ‰€æœ‰æäº¤åˆ° <strong>CocoaPods</strong> çš„å¼€æºåº“çš„ <strong>podspec</strong> æ–‡ä»¶çš„é›†åˆã€‚<br>å…¶ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-2repoSpecs.png" alt="repo"></p>
<p>å…¶ç»„æˆæ–¹å¼ï¼š</p>
<p>specName â€“ version â€“ specName.podspec</p>
<p>( <strong>master</strong> é‡Œç°åœ¨æ˜¯ <strong>specName.podspec.json</strong>ï¼Œè¿™ä¸ª <strong>.json</strong> æ–‡ä»¶å°±æ˜¯ <strong>podspec</strong> æ–‡ä»¶åŠ äº†ä¸ªåç¼€ã€‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>pod ipc spec</code> è¿™ä¸ªå‘½ä»¤æ¥å°† <strong>spec</strong> æ–‡ä»¶è½¬æ¢æˆ <strong>.json</strong>)</p>
<p>é‚£è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯å¦‚ä½•æ¥å¾—å‘¢ï¼Ÿå…¶å®ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯åœ¨ä½ å®‰è£…äº† <strong>CocoaPods</strong> åï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ <code>pod install</code> æ—¶ï¼Œ <strong>CocoaPods</strong> é€šè¿‡å‘½ä»¤ <code>pod setup</code> æ¥å»ºç«‹çš„ï¼ˆè¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰ã€‚</p>
<blockquote>
<p>ä¸Šè¿°æ˜¯å®˜æ–¹çš„ <strong>repo</strong> ï¼Œç§æœ‰åº“çš„è¯å¯ä»¥çœ‹ä¸‹æˆ‘ä»¬å‰é¢çš„ç¿»è¯‘æˆ–è€…æŸ¥çœ‹<a href="https://guides.cocoapods.org/making/private-cocoapods.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æ¡£æœ‰ä¸€äº›è¿‡ç¨‹å†™çš„ä¸æ˜¯ç‰¹åˆ«è¯¦ç»†ï¼Œè‡ªå·±å®ç°çš„æ—¶å€™é‡åˆ°äº†ä¸€äº›å‘ï¼Œç‰¹æ­¤æ¢³ç†ä¸€ä¸‹è¿‡ç¨‹ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£å†…å®¹å®ç°ä¸€ä¸ªç§æœ‰çš„ <strong>spec repo</strong> ã€‚æ ¹æ®å®˜æ–¹çš„åŸç†ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªå’Œ <strong>master</strong> ç›¸ç±»ä¼¼ç»“æ„çš„ç›®å½•å°±å¯ä»¥å®ç°ç§æœ‰çš„ <strong>spec repo</strong>ï¼Œå½“ç„¶ä½ å¯ä»¥ <strong>fork</strong> ä¸€ä¸ªå®˜æ–¹çš„ <strong>repo</strong>ï¼Œä½†æ˜¯å®ƒåŒ…å«äº†å¤ªå¤šæ²¡æœ‰å¿…è¦åœ°åº“åœ¨é‡Œé¢ï¼Œè¿™åœ¨ç¼–è¯‘ä»“åº“çš„æ—¶å€™éœ€è¦æµªè´¹å¤§é‡çš„æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦è‡ªå·±é‡æ–°åˆ›å»ºä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<h3 id="1-åˆ›å»ºä¸€ä¸ªç§æœ‰çš„-Spec-Repo"><a href="#1-åˆ›å»ºä¸€ä¸ªç§æœ‰çš„-Spec-Repo" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ªç§æœ‰çš„ Spec Repo"></a>1.åˆ›å»ºä¸€ä¸ªç§æœ‰çš„ <strong>Spec Repo</strong></h3><p>åœ¨ä½ çš„ git æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª <strong>repo</strong>ã€‚è¿™é‡Œä½ å¯ä»¥åœ¨ <strong>github</strong> æˆ–è€…ä½ è‡ªå·±çš„ git æœåŠ¡å™¨ä¸Šå®ç°ã€‚å…¬å¸å†…éƒ¨ä½¿ç”¨çš„è¯è¿™é‡Œæ¨èå¤§å®¶ä½¿ç”¨ç§æœ‰çš„ä»“åº“,ä½†æ˜¯ <strong>github</strong> çš„ç§æœ‰ä»“åº“æ˜¯è¦æ”¶è´¹çš„ <strong>$7/month</strong> ï¼ˆå£•è¯·æ— è§† - -ï¼ï¼‰ã€‚å¤§éƒ¨åˆ†å…¬å¸éƒ½æ˜¯æœ‰è‡ªå·±çš„gitæœåŠ¡å™¨ï¼Œä¸è¿‡ä¸€èˆ¬åªèƒ½åœ¨å…¬å¸å†…ç½‘ä½¿ç”¨ï¼Œæˆ–è€…å¯ä»¥é€‰æ‹©<a href="https://gitlab.com" target="_blank" rel="external">Gitlab</a>,<a href="https://coding.net" target="_blank" rel="external">Coding</a>, <a href="https://bitbucket.org/" target="_blank" rel="external">Bitbucket</a>ä»»æ„ä¸€ç§ã€‚æˆ‘ä»¬ä»¥åœ¨ <strong>github</strong> ä¸Šåˆ›å»ºä¸ºä¾‹ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-3createGithub.png" alt="repo"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ <strong>github</strong> ä¸Šåˆ›å»ºä¸€ä¸ªç©ºçš„ä»“åº“ï¼Œå‘½åä¸º <strong>O2Specs</strong> ï¼Œè¿™ä¸ªä»“åº“æ˜¯ç”¨æ¥å­˜æ”¾æˆ‘ä»¬è‡ªå·±æ‰€æœ‰çš„ç§æœ‰åº“çš„ <strong>spec</strong> æ–‡ä»¶ï¼Œå°±å¦‚åŒå®˜æ–¹çš„ <a href="https://github.com/CocoaPods/Specs" target="_blank" rel="external"><strong>https://github.com/CocoaPods/Specs</strong></a> æ˜¯ç”¨æ¥å­˜æ”¾æ‰€æœ‰å®˜æ–¹çš„ <strong>specs</strong> æ–‡ä»¶ä¸€æ ·ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod repo add REPO_NAME SOURCE_URL</div></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„ REPO_NAME æ˜¯æˆ‘ä»¬è¦æ·»åŠ çš„ç§æœ‰ <strong>repo</strong> çš„åç§°ï¼ˆè¿™é‡Œæˆ‘ä»¬å¾…ä¼šå¡«çš„æ˜¯: <strong>O2Specs</strong>ï¼‰ï¼Œåé¢æ˜¯ä»“åº“çš„ git åœ°å€ã€‚è¿™é‡Œåšçš„å…¶å®æ˜¯åˆ›å»ºçš„å·¥ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨ <code>~/.cocoapods/repo</code> ç›®å½•ä¸‹æ·»åŠ äº†ä¸€ä¸ªä»¥ä½ çš„ç§æœ‰ <strong>repo</strong> ä¸ºåçš„æ–‡ä»¶å¤¹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ·»åŠ  <strong>spec</strong> æ–‡ä»¶ã€‚</p>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod repo add O2Specs https://github.com/marklin2012/O2Specs.git</div></pre></td></tr></table></figure></p>
<p> è¿™é‡Œç”¨çš„æ˜¯ <strong>https</strong> åœ°å€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ <strong>git</strong> åœ°å€ï¼Œä¸è¿‡è¿™æ ·æœ‰å¯èƒ½å¤±è´¥ã€‚å¦‚æœå¤±è´¥ï¼Œå¾ˆå¤§å› ç´ æ˜¯ä½  <strong>github</strong> çš„ <strong>ssh</strong> åœ¨æœ¬åœ°æ²¡æœ‰é…ç½®å¥½ï¼Œé…ç½®æ–¹æ³•å¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://help.github.com/articles/generating-ssh-keys/" target="_blank" rel="external"><strong>Generating SSH keys</strong></a>ï¼ŒæˆåŠŸåå¯ä»¥çœ‹å¾—åˆ° <strong>.cocoapods</strong> ç›®å½•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-4o2specsRepos.png" alt="repo"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å¾—åˆ°æˆ‘ä»¬è‡ªå·±çš„ç§æœ‰ä»“åº“ <strong>O2Specs</strong> ï¼Œè¿™æ˜¯ä¸€ä¸ªç©ºçš„ä»“åº“ã€‚</p>
<h3 id="2-æ·»åŠ ç§æœ‰çš„-Repo-å®‰è£…åˆ°ä½ çš„-CocoaPods-ä¸­"><a href="#2-æ·»åŠ ç§æœ‰çš„-Repo-å®‰è£…åˆ°ä½ çš„-CocoaPods-ä¸­" class="headerlink" title="2.æ·»åŠ ç§æœ‰çš„ Repo å®‰è£…åˆ°ä½ çš„ CocoaPods ä¸­"></a>2.æ·»åŠ ç§æœ‰çš„ <strong>Repo</strong> å®‰è£…åˆ°ä½ çš„ <strong>CocoaPods</strong> ä¸­</h3><p>è¿™ä¸ªæ­¥éª¤éœ€è¦æˆ‘ä»¬äº‹å…ˆå®Œæˆ <strong>CocoaPods</strong> ä¾èµ–åº“çš„æ­å»ºï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å¦å¤–ä¸€ç¯‡æ•™ç¨‹ï¼š<a href="http://www.jianshu.com/p/7a82e977281c" target="_blank" rel="external">åˆ¶ä½œ <strong>CocoaPods</strong> ä¾èµ–åº“</a>ã€‚å¦‚æœè¿™é‡Œä½ æƒ³å…ˆçœ‹çœ‹æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä» <strong>github</strong> ä¸Š clone <a href="https://github.com/marklin2012/O2View" target="_blank" rel="external">ç¤ºä¾‹å·¥ç¨‹</a>ç»§ç»­ä¸‹é¢çš„æ“ä½œã€‚</p>
<p>è®©æˆ‘ä»¬è¿›å…¥åˆ°ä¸Šé¢ clone çš„ç¤ºä¾‹å·¥ç¨‹ç›®å½•ä¸­ï¼ˆæˆ–è€…ä½ è‡ªå·±æ­å»ºçš„ä¾èµ–åº“ç›®å½•ä¸­ï¼‰ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-5O2ViewDoc.jpeg" alt="repo"></p>
<p>æ‰“å¼€å·¥ç¨‹çš„ <strong>podspec</strong> æ–‡ä»¶ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></div><div class="line">  s.name         = <span class="string">"O2View"</span>				<span class="comment">#åç§°</span></div><div class="line">  s.version      = <span class="string">"0.0.1"</span>				<span class="comment">#ç‰ˆæœ¬å·</span></div><div class="line">  s.summary      = <span class="string">"Just testing"</span>		<span class="comment">#ç®€çŸ­ä»‹ç»</span></div><div class="line">  s.description  = <span class="string">&lt;&lt;-DESC</span></div><div class="line">  					ç§æœ‰Podsæµ‹è¯•</div><div class="line">  					* Markdown æ ¼å¼</div><div class="line">                   DESC</div><div class="line"></div><div class="line">  s.homepage     = <span class="string">"http://aotu.io/"</span></div><div class="line">  <span class="comment"># s.screenshots  = "www.example.com/screenshots_1.gif"</span></div><div class="line">  s.license      = <span class="string">"MIT"</span>				<span class="comment">#å¼€æºåè®®</span></div><div class="line">  s.author             = &#123; <span class="string">"linyi31"</span> =&gt; <span class="string">"linyi@jd.com"</span> &#125;</div><div class="line"></div><div class="line">  s.source       = &#123; <span class="symbol">:git</span> =&gt; <span class="string">"https://github.com/marklin2012/O2View.git"</span> &#125;</div><div class="line">  <span class="comment">## è¿™é‡Œä¸æ”¯æŒsshçš„åœ°å€ï¼Œåªæ”¯æŒHTTPå’ŒHTTPSï¼Œæœ€å¥½ä½¿ç”¨HTTPS</span></div><div class="line">  <span class="comment">## æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ç¨³å®šçš„tagç‰ˆæœ¬æ¥è®¿é—®ï¼Œå¦‚æœæ˜¯åœ¨å¼€å‘æµ‹è¯•çš„æ—¶å€™ï¼Œä¸éœ€è¦å‘å¸ƒreleaseç‰ˆæœ¬ï¼Œç›´æ¥æŒ‡å‘gitåœ°å€ä½¿ç”¨</span></div><div class="line">  <span class="comment">## å¾…æµ‹è¯•é€šè¿‡å®Œæˆåæˆ‘ä»¬å†å‘å¸ƒæŒ‡å®šreleaseç‰ˆæœ¬ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹å¼</span></div><div class="line">  <span class="comment">#s.source       = &#123; :git =&gt; "http://EXAMPLE/O2View.git", :tag =&gt; s.version &#125;</span></div><div class="line">  </div><div class="line">  s.platform     = <span class="symbol">:ios</span>, <span class="string">"9.0"</span>			<span class="comment">#æ”¯æŒçš„å¹³å°åŠç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬å‘¢ç”¨swiftï¼Œç›´æ¥ä¸Š9.0</span></div><div class="line">  s.requires_arc = <span class="literal">true</span>					<span class="comment">#æ˜¯å¦ä½¿ç”¨ARC</span></div><div class="line"></div><div class="line">  s.source_files  = <span class="string">"O2View/*.swift"</span>	<span class="comment">#OCå¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™æ ·"Classes/**/*.&#123;h,m&#125;"</span></div><div class="line"></div><div class="line">  s.frameworks = <span class="string">'UIKit'</span>, <span class="string">'QuartzCore'</span>, <span class="string">'Foundation'</span>	<span class="comment">#æ‰€éœ€çš„framework,å¤šä¸ªç”¨é€—å·éš”å¼€</span></div><div class="line">  s.module_name = <span class="string">'O2View'</span>				<span class="comment">#æ¨¡å—åç§°</span></div><div class="line"></div><div class="line">  <span class="comment"># s.dependency "JSONKit", "~&gt; 1.4"	#ä¾èµ–å…³ç³»ï¼Œè¯¥é¡¹ç›®æ‰€ä¾èµ–çš„å…¶ä»–åº“ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä»¥å†™å¤šä¸ª s.dependency</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>ruby</strong> æ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬äº‹å…ˆå·²ç»å®ç°å¥½çš„ä¾èµ–åº“çš„ <strong>podspec</strong> æ–‡ä»¶ï¼Œå¦‚æœå‰é¢æ­¥éª¤éƒ½æ­£å¸¸çš„è¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ª <strong>podspec</strong> æ˜¯åˆæ³•çš„è¯ï¼Œå°±å¯ä»¥ç›´æ¥å°†è¿™äº›å†…å®¹ <strong>push</strong> åˆ°æˆ‘ä»¬æœ¬åœ°çš„ <strong>repo</strong> ä¸­ã€‚ä¸ºäº†é¿å…é”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥å†éªŒè¯ä¸€ä¸‹ï¼Œå‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib lint</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¹‹åå¯èƒ½ä¼šå¾—åˆ°ä¸‹é¢çš„è­¦å‘Šï¼š</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> -&gt; O2View (<span class="number">0.0</span><span class="number">.1</span>)</div><div class="line">    - WARN  | source: Git sources should specify a tag.</div><div class="line"></div><div class="line">[!] O2View did not pass validation, due <span class="keyword">to</span> <span class="number">1</span> warning (but you can <span class="keyword">use</span> `--allow-warnings` <span class="keyword">to</span> ignore it) <span class="keyword">and</span> All results apply only <span class="keyword">to</span> <span class="keyword">public</span> specs, but you can <span class="keyword">use</span> `--<span class="keyword">private</span>` <span class="keyword">to</span> ignore them <span class="keyword">if</span> linting the specification <span class="keyword">for</span> a <span class="keyword">private</span> pod..</div><div class="line">You can <span class="keyword">use</span> the `--no-clean` option <span class="keyword">to</span> inspect any issue.</div></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬çš„ç¤ºä¾‹å·¥ç¨‹è¿˜æ²¡æœ‰ç”Ÿæˆæ­£å¼çš„ <strong>release</strong> ç‰ˆæœ¬ï¼Œ <strong>github</strong> ä¸Šå¹¶æ²¡æœ‰ä»»ä½• <strong>tag</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆšæ‰å¡«å†™ <strong>.podspec</strong> æ–‡ä»¶å¡«å†™ <strong>git</strong> åœ°å€çš„æ—¶å€™æ²¡æœ‰å¡«å†™æŒ‡å®š <strong>tag</strong> ï¼ˆä¸Šé¢æ–‡ä»¶çš„æ³¨é‡Šä¸­æœ‰æåˆ°ï¼‰ï¼Œè§£å†³æ–¹æ³•æˆ‘ä»¬å¯ä»¥å…ˆæ‰§è¡Œå¿½ç•¥è­¦å‘Šçš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib lint --allow-warnings</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆåŠŸä¼šå‡ºç°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> -<span class="ruby">&gt; O2View (<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span></div><div class="line">    -<span class="ruby"> WARN  <span class="params">| source: Git sources should specify a tag.</span></span></div><div class="line"></div><div class="line">O2View passed validation.</div></pre></td></tr></table></figure>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„ <strong>O2View.podspec</strong> å°±ç¬¦åˆè§„èŒƒäº†ã€‚</p>
<h3 id="3-æ·»åŠ ä½ çš„-Podspec-åˆ°ä½ çš„-repo"><a href="#3-æ·»åŠ ä½ çš„-Podspec-åˆ°ä½ çš„-repo" class="headerlink" title="3.æ·»åŠ ä½ çš„ Podspec åˆ°ä½ çš„ repo"></a>3.æ·»åŠ ä½ çš„ <strong>Podspec</strong> åˆ°ä½ çš„ <strong>repo</strong></h3><p>åœ¨å‰é¢éªŒè¯é€šè¿‡çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥ç€æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod repo push O2Specs O2View.podspec</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œï¼Œå¦‚æœå¤±è´¥ä¼šæœ‰ç›¸å¯¹åº”çš„è­¦å‘Šå’Œé”™è¯¯æç¤ºï¼Œåªè¦æŒ‰ç…§è­¦å‘Šå’Œé”™è¯¯çš„è¯¦ç»†ä¿¡æ¯è¿›è¡Œä¿®æ”¹å’Œå®Œå–„å³å¯ã€‚æˆåŠŸçš„æƒ…å†µåº”è¯¥å¯ä»¥åœ¨ç»ˆç«¯çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Validating <span class="keyword">spec</span></div><div class="line"> -&gt; O2View (<span class="number">0.0</span>.<span class="number">1</span>)</div><div class="line">    - WARN  | source: Git sources should specify a <span class="keyword">tag</span>.</div><div class="line"></div><div class="line">Updating the `O2Specs' repo</div><div class="line"></div><div class="line">Already up-to-<span class="keyword">date</span>.</div><div class="line"></div><div class="line">Adding the <span class="keyword">spec</span> to the `O2Specs' repo</div><div class="line"></div><div class="line"> - [Add] O2View (<span class="number">0.0</span>.<span class="number">1</span>)</div><div class="line"></div><div class="line">Pushing the `O2Specs' repo</div><div class="line"></div><div class="line">To https://github.com/marklin2012/O2Specs.git</div><div class="line">   <span class="number">9</span>f32092..<span class="number">8</span>d0ced5  <span class="keyword">master</span> <span class="title">-&gt; master</span></div></pre></td></tr></table></figure>
<p>å†è¿›å…¥åˆ° <strong>.cocoapods</strong> çš„ç›®å½•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-6O2SpecsRepoO2View.png" alt="repo"></p>
<p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å‘ç° <strong>O2Specs</strong> çš„ <strong>github</strong> ä»“åº“ä¹Ÿå·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-7O2SpecPushed.png" alt="repo"></p>
<p>æŒ‰ç…§å¹³æ—¶ä½¿ç”¨ <strong>CocoaPods</strong> çš„ä¹ æƒ¯ï¼Œæˆ‘ä»¬æ·»åŠ ä¾èµ–åº“ä¹‹å‰ä¼šå…ˆæœç´¢ä¸€ä¸‹åº“ï¼Œè®©æˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod search O2View</div></pre></td></tr></table></figure>
<p>å“ˆå“ˆï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å»ºç«‹æˆåŠŸäº†ï¼</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-&gt; O2View (<span class="number">0.0</span><span class="number">.1</span>)</div><div class="line">   Just testing</div><div class="line">   pod <span class="string">'O2View'</span>, <span class="string">'~&gt; 0.0.1'</span></div><div class="line">   - <span class="string">Homepage:</span> <span class="string">http:</span><span class="comment">//aotu.io/</span></div><div class="line">   - <span class="string">Source:</span>   <span class="string">https:</span><span class="comment">//github.com/marklin2012/O2View.git</span></div><div class="line">   - <span class="string">Versions:</span> <span class="number">0.0</span><span class="number">.1</span> [O2Specs repo]</div></pre></td></tr></table></figure>
<h3 id="4-æµ‹è¯•ç§æœ‰-pod"><a href="#4-æµ‹è¯•ç§æœ‰-pod" class="headerlink" title="4.æµ‹è¯•ç§æœ‰ pod"></a>4.æµ‹è¯•ç§æœ‰ pod</h3><p>çœ‹åˆ°å‰é¢çš„æœç´¢ç»“æœï¼Œå°ä¼™ä¼´ä»¬æ˜¯ä¸æ˜¯å¼€å§‹æœ‰ç‚¹æ¿€åŠ¨äº†ï¼Ÿè®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ™®é€šçš„å·¥ç¨‹ï¼Œå‘½åä¸º <strong>TestPodDemo</strong>ï¼Œç„¶ååœ¨ç»ˆç«¯ <strong>cd</strong> åˆ°å…¶ç›®å½•è·¯å¾„ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ª <strong>Podfile</strong> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod init</div></pre></td></tr></table></figure>
<p>å»ºç«‹åä¿®æ”¹ <strong>Podfile</strong> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">use_frameworks!</div><div class="line"></div><div class="line">target <span class="symbol">'TestPodDemo</span>' <span class="keyword">do</span></div><div class="line"></div><div class="line">pod â€˜O2Viewâ€™</div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹æç¤ºï¼š</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Updating local specs repositories</div><div class="line">Analyzing dependencies</div><div class="line">[!] Unable <span class="keyword">to</span> find a specification <span class="keyword">for</span> `O2View`</div><div class="line"></div><div class="line">[!] Your Podfile <span class="keyword">has</span> had smart quotes sanitised. <span class="keyword">To</span> avoid issues <span class="keyword">in</span> the <span class="keyword">future</span>, you should <span class="keyword">not</span> use TextEdit <span class="keyword">for</span> editing it. <span class="keyword">If</span> you are <span class="keyword">not</span> <span class="keyword">using</span> TextEdit, you should turn off smart quotes <span class="keyword">in</span> your editor <span class="keyword">of</span> choice.</div></pre></td></tr></table></figure>
<p>æ‰¾ä¸åˆ° <strong>O2View</strong> ï¼Ÿ é¢- -ï¼ã€‚ã€‚ã€‚åˆšæ‰ <strong>search</strong> æ˜æ˜å¯ä»¥æ‰¾åˆ°è¿™ä¸ªä¾èµ–åº“çš„ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰¾ä¸åˆ°äº†å‘¢ï¼Ÿ</p>
<p>åˆ«ç€æ€¥!å…¶å®åŸå› æ˜¯ä½ åœ¨ <strong>Podfile</strong> ä¸­æ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œå½“ä½ æ‰§è¡Œ <code>pod install</code> çš„æ—¶å€™ï¼Œ<strong>CocoaPods</strong> é»˜è®¤åªä¼šåœ¨ <strong>master</strong> ä¸‹æœç´¢ï¼Œè€Œæˆ‘ä»¬çš„ <strong>spec</strong> æ˜¯å­˜åœ¨æˆ‘ä»¬ç§æœ‰çš„ <strong>O2Specs</strong> ç›®å½•ä¸‹çš„ã€‚æ‰€ä»¥è§£å†³æ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯å¼•å…¥æœç´¢åœ°å€å³å¯ï¼Œåœ¨ <strong>Podfile</strong> çš„é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source <span class="string">'https://github.com/CocoaPods/Specs.git'</span>		<span class="comment">#å®˜æ–¹ä»“åº“åœ°å€</span></div><div class="line">source â€˜https:<span class="regexp">//gi</span>thub.com<span class="regexp">/marklin2012/</span>O2Specs.gitâ€™		<span class="comment">#ç§æœ‰ä»“åº“åœ°å€</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¿…é¡»æ·»åŠ ä¸¤ä¸ªåœ°å€ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¦‚æœä¸æ·»åŠ  <strong>source</strong> ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä½¿ç”¨å®˜æ–¹ä»“åº“åœ°å€ï¼Œä½†æ˜¯å½“ä½ æ·»åŠ äº† <strong>source</strong> ä¹‹åï¼Œç³»ç»Ÿå°±ä¸ä¼šè‡ªåŠ¨æœç´¢å®˜æ–¹åœ°å€ï¼Œæ‰€ä»¥è¿™ä¸¤å¥éƒ½å¿…é¡»æ·»åŠ ï¼Œå¦åˆ™å…¶ä»–åŸºäºå®˜æ–¹çš„ä¾èµ–åº“éƒ½ä¸èƒ½ä½¿ç”¨äº†ã€‚</p>
<p>å†æ¬¡æ‰§è¡Œ <code>pod install</code> ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¾ˆé¡ºåˆ©çš„å®‰è£…æˆåŠŸäº†ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Updating local specs <span class="keyword">repositories</span></div><div class="line">Analyzing <span class="keyword">dependencies</span></div><div class="line">Downloading <span class="keyword">dependencies</span></div><div class="line">Using O2View (<span class="number">0.0</span>.<span class="number">1</span>)</div><div class="line">Generating Pods <span class="keyword">project</span></div><div class="line">Integrating client <span class="keyword">project</span></div><div class="line">Sending stats</div><div class="line">Pod installation complete! There is <span class="number">1</span> dependency <span class="keyword">from</span> the Podfile and <span class="number">1</span> total pod installed.</div></pre></td></tr></table></figure>
<p>æ­å–œï¼è¿™æ ·ä¸€æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç§æœ‰åº“äº†ï¼ </p>
<h3 id="å‘å¸ƒç¨³å®šçš„ä¾èµ–åº“ç‰ˆæœ¬"><a href="#å‘å¸ƒç¨³å®šçš„ä¾èµ–åº“ç‰ˆæœ¬" class="headerlink" title="å‘å¸ƒç¨³å®šçš„ä¾èµ–åº“ç‰ˆæœ¬"></a>å‘å¸ƒç¨³å®šçš„ä¾èµ–åº“ç‰ˆæœ¬</h3><p>å‰é¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œæˆ‘ä»¬çš„è¿™ä¸ªå®ä¾‹ä¾èµ–åº“ <strong>O2View</strong> æ²¡æœ‰ç”Ÿæˆç¨³å®šçš„ <strong>release</strong> ç‰ˆæœ¬ã€‚å½“æˆ‘ä»¬è°ƒè¯•å®Œå†…å®¹ä¹‹åï¼Œä¸€èˆ¬éƒ½æ˜¯è¦å‘å¸ƒç¨³å®šç‰ˆæœ¬çš„ï¼Œæ›´æ–°ä¹‹åå†ç»§ç»­å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæˆ–è€…åœ¨ <strong>github</strong> é¡µé¢æ‰‹åŠ¨ç”Ÿæˆï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œï¼Œé¦–å…ˆåœ¨ç»ˆç«¯ä¸­ <strong>cd</strong> åˆ°ä¹‹å‰çš„ä¾èµ–åº“ <strong>O2View</strong> çš„ç›®å½•ä¸­ï¼Œç„¶åè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">tag</span> <span class="title">'0</span>.<span class="number">0.1</span>'</div><div class="line">git push --tags</div><div class="line">git push origin <span class="literal">master</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªç¨³å®šçš„ <strong>release</strong> ç‰ˆæœ¬ <strong>0.0.1</strong>ï¼š</p>
<p><img src="//img.aotu.io/MarkLin/privateCocoaPods/1-8githubTags.png" alt="repo"></p>
<blockquote>
<p>è¿™é‡Œæˆ‘ç”¨çš„ç‰ˆæœ¬å·æ˜¯ <strong>0.0.1</strong> åŸºäºç ”å‘ç‰ˆæœ¬ï¼Œå…³äºç‰ˆæœ¬å·çš„ä¸€äº›è§„èŒƒå¯ä»¥å‚è€ƒï¼š<a href="http://semver.org/lang/zh-CN/" target="_blank" rel="external">è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0</a></p>
</blockquote>
<p>å¯¹äºæˆ‘ä»¬çš„ <strong>podspec</strong> æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°† <code>s.source</code> åšä¸€ä¸‹å°å°çš„æ”¹åŠ¨:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.source       = &#123; :<span class="function"><span class="params">git</span> =&gt;</span> <span class="string">"https://github.com/marklin2012/O2View.git"</span>, :<span class="function"><span class="params">tag</span> =&gt;</span> version &#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªä¾èµ–åº“çš„æ—¶å€™å°±èƒ½å¯¹åº”ä¸Šç‰ˆæœ¬å·ï¼Œå¹¶ä¸”çŸ¥é“åœ¨ <strong>github</strong> ä¸­ä½¿ç”¨ç¨³å®šçš„ <strong>release</strong> ç‰ˆæœ¬ä»£ç ã€‚å¤ªæ£’äº†ï¼</p>
<p>æœ€ååªéœ€è¦å†é‡å¤ <code>push</code> ä¸€ä¸‹æˆ‘ä»¬çš„ <strong>Podfile</strong> å°±å¯ä»¥ï¼</p>
<h3 id="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"><a href="#æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"></a>æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</h3><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å®Œå…¨æŒæ¡å¦‚ä½•åˆ›å»ºä¸€ä¸ªæœ¬åœ°ç§æœ‰çš„ <strong>CocoaPods</strong> äº†ï¼æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠæˆ‘ä»¬é¡¹ç›®ä¸­å¾—ä»£ç æ‹†å‡ºæ¥å°è£…æˆä¸€äº› <strong>pods</strong>ï¼Œ å¥½å¥½ä½¿ç”¨è¿™ä¸ªé»‘é­”æ³•ï¼</p>
<p>ç¥å¤§å®¶ç©å¾—æ„‰å¿«ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å…¬å…±-CocoaPods&quot;&gt;&lt;a href=&quot;#å…¬å…±-CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;å…¬å…± CocoaPods&quot;&gt;&lt;/a&gt;å…¬å…± CocoaPods&lt;/h3&gt;&lt;p&gt;æ‰“å¼€éšè—ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤: &lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å¼€éšè—çš„å‘½ä»¤:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;defaults write com&lt;span class=&quot;selector-class&quot;&gt;.apple&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.finder&lt;/span&gt; AppleShowAllFiles -bool true&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å…³é—­éšè—çš„å‘½ä»¤:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;defaults write com&lt;span class=&quot;selector-class&quot;&gt;.apple&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.finder&lt;/span&gt; AppleShowAllFiles -bool false&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ¥ç€éœ€è¦é‡å¯ä¸€ä¸‹ &lt;strong&gt;Finder&lt;/strong&gt;ï¼Œ å¯ä»¥æŒ‰ä½ &lt;strong&gt;option&lt;/strong&gt; + å³é”® &lt;strong&gt;Finder&lt;/strong&gt; å›¾æ ‡é€‰æ‹©é‡å¯ã€‚ç„¶åæ‰“å¼€éšè—ç›®å½• &lt;strong&gt;.cocoapods&lt;/strong&gt; (è¿™ä¸ªç›®å½•åœ¨ä½ çš„ä¸ªäººç›®å½•åº•ä¸‹, &lt;code&gt;~/.cocoapods&lt;/code&gt; æˆ– &lt;code&gt;/Users/[username]/.cocoapods&lt;/code&gt;)&lt;/p&gt;
    
    </summary>
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://aotu.io/cates/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://aotu.io/tags/iOS/"/>
    
      <category term="CocoaPods" scheme="https://aotu.io/tags/CocoaPods/"/>
    
      <category term="Swift" scheme="https://aotu.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>UFT éœ€æ±‚ææŠ¥å¹³å°å›é¡¾</title>
    <link href="https://aotu.io/notes/2016/01/16/UFT/"/>
    <id>https://aotu.io/notes/2016/01/16/UFT/</id>
    <published>2016-01-16T08:44:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€åˆå®ƒçš„åå­—ä¸º BugHoundï¼Œä¸»è¦åŠŸèƒ½æ˜¯ bug æäº¤ï¼ŒEC åŒå­¦å·²ç»é€ å‡ºäº†å®ƒæœ€åˆçš„æ ·å­ï¼Œå®ƒæœ€åˆçš„ç›®æ ‡ç”¨æˆ·æ˜¯ç§»åŠ¨ç”¨æˆ·ï¼Œèƒ½åœ¨æ bug çš„åŒæ—¶æ”¶é›†è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯ã€‚ä¸»è¦ç”¨åˆ°çš„æŠ€æœ¯ç‚¹ï¼š</p>
<ul>
<li>php</li>
<li>mongodb</li>
</ul>
<p>æˆ‘å¼€å§‹ç†Ÿæ‚‰åŸä»£ç å¹¶å°è¯•åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œè¿­ä»£å¼€å‘ï¼Œä½†æ˜¯ç”±äºåŠŸèƒ½ä¸Šæœ‰è¾ƒå¤§çš„å˜æ›´ï¼Œè€Œæˆ‘æ²¡æœ‰ç”¨è¿‡ Mongodb å’Œ phpï¼Œè¿™æ—¶æˆ‘æ›´å€¾å‘äºä½¿ç”¨æˆ‘ç†Ÿæ‚‰çš„ MySql å’Œ Nodejsï¼Œåœ¨å¾—åˆ° EC åŒå­¦çš„å…è®¸åï¼Œæˆ‘å†³å®šä»é›¶å¼€å§‹æ­å»ºç³»ç»Ÿã€‚æœ¬æ–‡é€‰æ‹©å…¶ä¸­å‡ ç‚¹è¿›è¡Œé˜è¿°ã€‚</p>
<h2 id="æ•°æ®è®¾è®¡"><a href="#æ•°æ®è®¾è®¡" class="headerlink" title="æ•°æ®è®¾è®¡"></a>æ•°æ®è®¾è®¡</h2><p>ç¬¬ä¸€æ­¥æ˜¯å»ºè¡¨ï¼Œä¸‹å›¾æ˜¯æœ€åˆçš„è¡¨è®¾è®¡ï¼ŒåŸºæœ¬ä¸ŠæŒ‰ç…§åŸ mongodb ä¸­çš„æ•°æ®å…³ç³»è¿›è¡Œå®šä¹‰ï¼Œè®¾è®¡å¥½æ•°æ®è¡¨ï¼Œå†æŠŠå®ƒä»¬å†™è¿›<strong>æ•°æ®å­—å…¸</strong>ï¼Œæœ€åæ‰å¼€å§‹å»ºè¡¨ã€‚</p>
<p><em>ï¼ˆæ•°æ®å­—å…¸å¯¹å¼€å‘å’Œåä½œçš„ä½œç”¨éå¸¸å¤§ï¼Œå®ƒèƒ½è®©ä½ å’Œåˆ«äººçŸ¥é“è¡¨ä¸­æœ‰å“ªäº›å­—æ®µï¼ŒæŸå­—æ®µä»£è¡¨ä»€ä¹ˆç­‰ä¿¡æ¯ï¼Œåœ¨æ¥ä¸‹æ¥çš„ç¼–ç å·¥ä½œä¸­è¿˜ä¼šç»å¸¸å»æŸ¥çœ‹å®ƒã€‚ï¼‰</em></p>
<p><img src="//img.aotu.io/Manjiz/2016/uft/tabledesign.jpg" alt="æ•°æ®è®¾è®¡"></p>
<p>éšç€å¼€å‘çš„æ·±å…¥ï¼Œæ•°æ®ä¸æ–­æ‹“å±•ï¼Œæœ‰äº›å­—æ®µè¢«æ·˜æ±°æˆ–è¢«æ‹†åˆ†åˆ°æ–°è¡¨ï¼Œæœ‰äº›å­—æ®µæ–°åŠ è¿›æ¥ï¼Œæ¯”å¦‚ä»£è¡¨â€œæ–‡ä»¶â€çš„æ•°æ®ï¼ŒåŸæ¥ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å†™åœ¨ demand è¡¨çš„ files å­—æ®µï¼Œä½œä¸ºç»å¸¸è¢«è¯»å†™çš„æ•°æ®ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜æ˜¾ç„¶ä¸æ­£ç¡®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ¯ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªæ•°æ®å…ƒï¼Œäºæ˜¯æŠŠ files å­—æ®µæ‹†åˆ†æˆæ–°è¡¨ demandfilesï¼Œå¹¶å¢åŠ äº†ä¸Šä¼ äººã€ä¸Šä¼ æ—¶é—´å’Œä¸‹è½½æ¬¡æ•°è¿™äº›ä¿¡æ¯ã€‚</p>
<p>ä¸ºäº†è®©æ•°æ®åº“è®¾è®¡æ›´åŠ åˆç†ï¼Œä½¿ç”¨äº†å¤–é”®çº¦æŸï¼Œç¡®ä¿åœ¨åˆ é™¤ä¿®æ”¹æ•°æ®çš„åŒæ—¶èƒ½çº§è”åˆ é™¤ä¿®æ”¹ï¼Œå¤–é”®ç»Ÿä¸€å‘½åä¸º <code>fk_table_field</code> çš„å½¢å¼ã€‚ä¿®æ”¹åçš„ ER å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="//img.aotu.io/Manjiz/2016/uft/modeldesign.png" alt="æ•°æ®åº“è®¾è®¡"></p>
<h2 id="æŠ€æœ¯å®è·µ"><a href="#æŠ€æœ¯å®è·µ" class="headerlink" title="æŠ€æœ¯å®è·µ"></a>æŠ€æœ¯å®è·µ</h2><ol>
<li><p><strong>ç¬¬ä¸€é˜¶æ®µ</strong></p>
<p> èµ·åˆï¼Œé¡¹ç›®åç«¯ä½¿ç”¨äº† <code>ejs</code> æ¨¡æ¿å¼•æ“ï¼Œæ‹†åˆ†å¤´å°¾åœ¨åç«¯æ¸²æŸ“æ¨¡æ¿åå‘å›ç»™å‰ç«¯ï¼Œå‰ç«¯ç”¨ jQuery è¿›è¡Œé€»è¾‘çš„å¤„ç†ã€‚</p>
</li>
<li><p><strong>ç¬¬äºŒé˜¶æ®µ</strong></p>
<p> å‰ç«¯å¼€å§‹ä½¿ç”¨ Angular æ›¿ä»£ jQueryï¼Œä½†æ˜¯ ejs è·Ÿ Angular å¥½åƒæœ‰ç‚¹æ ¼æ ¼ä¸å…¥ï¼Œå‰è€…æ„åœ¨åç«¯æ¸²æŸ“æ•°æ®ï¼Œåè€…é€šå¸¸åœ¨å‰ç«¯é€šè¿‡ $http è·å–æ•°æ®æ¥å¡«å……ï¼Œè¿™æ—¶çš„ ejs çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†ç»„è£…æ‹†åˆ†å‡ºæ¥çš„å¤´å°¾ï¼Œä¸å¥½å»æ‰å®ƒã€‚ä½†æ˜¯ï¼Œæ¥ç€å‘ç°äº† <code>ng-include</code>ï¼Œè¿™è®©ç»„è£…å¤´å°¾çš„å·¥ä½œäº¤ç»™äº†å‰ç«¯ï¼Œä»è€Œæ‘’å¼ƒæ‰äº† ejsã€‚</p>
</li>
<li><p><strong>ç¬¬ä¸‰é˜¶æ®µ</strong></p>
<p> æ¥ç€ï¼Œåˆ‡æ¢é¡µé¢çš„æ—¶å€™å¤´éƒ¨é—ªçƒçš„é—®é¢˜å¼•èµ·äº†æ³¨æ„ï¼ŒåŸæ¥æ˜¯ Angular ä½¿ç”¨æ–¹å¼ä¸å¯¹ï¼Œæˆ‘çš„æ¯ä¸ªé¡µé¢éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ Angular appï¼Œæ¯æ¬¡åˆ‡æ¢é¡µé¢æ—¶éƒ½å¼•å…¥ä¸€æ¬¡å¤´å°¾å¯¼è‡´é—ªçƒï¼Œäºæ˜¯å¼•å…¥ ui-router æŠŠç³»ç»Ÿä¿®æ”¹æˆä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œæ›´æ–° <code>ui-view</code> å³å¯åˆ‡æ¢é¡µé¢ã€‚</p>
<p> è¿™åˆå¼•å‡ºäº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œæ‰€æœ‰é¡µé¢çš„å…¥å£éƒ½æ˜¯ index.htmlï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å†ç®€å•åœ°åœ¨åç«¯é€šè¿‡è·¯ç”±æ¥æ§åˆ¶é¡µé¢çš„è®¿é—®æƒé™äº†ï¼Œè¿™æ ·å¦ä¸€ä¸ªæ¦‚å¿µå°±ç™»åœºäº†â€”â€”æœ¬åœ°èº«ä»½éªŒè¯ã€‚ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯åœ¨è¿›å…¥åº”ç”¨ä¸»å…¥å£ index.html çš„æ—¶å€™ï¼Œä»æœåŠ¡å™¨è¯·æ±‚èº«ä»½ä¿¡æ¯ï¼Œèº«ä»½ä¿¡æ¯å°†ä¿å­˜åœ¨ <code>service</code> ä¸­ï¼ˆç±»ä¼¼ session storageï¼‰ï¼Œç„¶ååœ¨çŠ¶æ€ï¼ˆé¡µé¢ï¼‰åˆ‡æ¢äº‹ä»¶ <code>stateChangeStart</code> æˆ– <code>stateChangeSuccess</code> ä¸­ï¼Œå¯¹é¡µé¢è¯·æ±‚è¿›è¡Œæ‹¦æˆªæˆ–é‡å®šå‘ç­‰æ“ä½œã€‚</p>
<p> ç„¶è€Œï¼Œç½‘ç»œè¯·æ±‚éƒ½æœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œåœ¨èº«ä»½ä¿¡æ¯è¿”å›æ¥ä¹‹å‰ï¼ŒæŸäº›é¡µé¢çš„å†…å®¹ä¸åº”è¯¥è¢«å‘ˆç°å‡ºæ¥ï¼Œæ‰€ä»¥è¦åœ¨è·å–åˆ°èº«ä»½ä¿¡æ¯åé€šçŸ¥åˆ°é¡µé¢ï¼Œäºæ˜¯å°±åŠ è¿›äº†äº‹ä»¶å¹¿æ’­å’Œæ¥æ”¶å™¨ <code>$broadcast</code> å’Œ <code>$on</code>ï¼šè·å–åˆ°èº«ä»½ä¿¡æ¯åé€šè¿‡ <code>$broadcast</code> å¹¿æ’­ä¸€ä¸ªäº‹ä»¶ï¼Œåœ¨å­é¡µé¢ä¸­é€šè¿‡ <code>$on</code> æ¥æ”¶åˆ°è¯¥äº‹ä»¶åæ‰§è¡Œç›¸å…³é€»è¾‘ã€‚</p>
</li>
</ol>
<h2 id="æ’æœŸè¡¨è®¾è®¡"><a href="#æ’æœŸè¡¨è®¾è®¡" class="headerlink" title="æ’æœŸè¡¨è®¾è®¡"></a>æ’æœŸè¡¨è®¾è®¡</h2><ol>
<li><p><strong>v1 ç‰ˆ</strong></p>
<p> <strong>èƒŒæ™¯ï¼š</strong>éœ€æ±‚æ’æœŸæ—¶é—´ä¸èƒ½å†²çªï¼Œæ’æœŸç”±æ’æœŸèµ·å§‹å’Œç»“æŸæ—¶é—´å†³å®šã€‚</p>
<p> ä»æœåŠ¡å™¨è·å–çš„æºæ•°æ®å½¢å¼å¦‚ä¸‹ï¼Œå·²æŒ‰ startDate æ’å¥½åºï¼Œæ¯ä¸ªç”¨æˆ·æ•°æ®ä¸­åŒ…å«æ’æœŸæ•°æ®ï¼ˆdataï¼‰ï¼š</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">	&#123;</div><div class="line">		<span class="attr">erp</span>:xx, </div><div class="line">		<span class="attr">name</span>:xx, </div><div class="line">		... , </div><div class="line">		data[</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			...</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	...</div><div class="line">]</div></pre></td></tr></table></figure>
<p> åœ¨å‰ç«¯è®¡ç®—å¥½å‘¨èµ·å§‹æ—¶é—´ <code>ws</code> å’Œå‘¨ç»“æŸæ—¶é—´ <code>we</code>ï¼Œå¯¹æ¯æ¡æ’æœŸæ•°æ®è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ’æœŸæ—¶é—´è·Ÿæœ¬å‘¨çš„æ—¶é—´æœ‰äº¤é›†ï¼Œåˆ™è®¡ç®—è¯¥æ’æœŸéƒ½å‡ºç°åœ¨äº†å“ªå‡ å¤©ï¼Œæ¯”å¦‚ä¸‹å›¾çš„æƒ…å½¢ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªæ’æœŸï¼š</p>
<p> <img src="//img.aotu.io/Manjiz/2016/uft/schedulev1eq.jpg" alt="å‘¨æœŸ"></p>
<p> æ•°æ®å°†ä¼šæŒ‰ä¸‹é¢çš„å½¢å¼ï¼ˆblocksï¼‰é™„åŠ åˆ°ç”¨æˆ·æ•°æ®ä¸­ï¼Œå…¶ä¸­ [0,1,2] å’Œ [4,5] çš„æ•°å­—å°±åˆ†åˆ«è¡¨ç¤ºäº†ä¸¤ä¸ªæ’æœŸåœ¨å‘¨æ’æœŸè¡¨ä¸­å æ®çš„ä½ç½®ã€‚</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">	&#123;</div><div class="line">		<span class="attr">erp</span>:xx, </div><div class="line">		<span class="attr">name</span>:xx, </div><div class="line">		... , </div><div class="line">		data[</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			&#123;<span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">endDate</span>:xx, ...&#125;,</div><div class="line">			...</div><div class="line">		],</div><div class="line">		<span class="attr">blocks</span>:[</div><div class="line">			&#123;</div><div class="line">				<span class="attr">demandID</span>:xx, </div><div class="line">				<span class="attr">demandName</span>:xx,</div><div class="line">				<span class="attr">dictator</span>:xx,</div><div class="line">				<span class="attr">block</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				<span class="attr">demandID</span>:xx, </div><div class="line">				<span class="attr">demandName</span>:xx,</div><div class="line">				<span class="attr">dictator</span>:xx,</div><div class="line">				<span class="attr">block</span>: [<span class="number">4</span>, <span class="number">5</span>]</div><div class="line">			&#125;,</div><div class="line">			...</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	...</div><div class="line">]</div></pre></td></tr></table></figure>
<p> æ¥ç€ï¼Œå¤„ç†æ’æœŸè¡¨ä¸­çš„ç©ºé—²çš„å¤©ï¼Œç»™ç”¨æˆ·æ•°æ®é™„åŠ ä»¥ä¸‹æ•°æ®ï¼š</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">schedule: [</div><div class="line">	&#123;<span class="attr">demandID</span>:xxx, ...&#125;,	<span class="comment">// blocks[0]</span></div><div class="line">	&#123;<span class="attr">date</span>:xxx&#125;,	<span class="comment">//å‘¨ä¸‰ï¼Œæ—¶é—´ç”¨äºç‚¹è¿›ç”³è¯·é¡µè‡ªåŠ¨å¡«å¥½æ—¶é—´</span></div><div class="line">	&#123;<span class="attr">demandID</span>:xxx, ...&#125;,	<span class="comment">// blocks[1]</span></div><div class="line">	&#123;<span class="attr">date</span>:xxx&#125;	<span class="comment">//å‘¨å…­ï¼Œæ—¶é—´ç”¨äºç‚¹è¿›ç”³è¯·é¡µè‡ªåŠ¨å¡«å¥½æ—¶é—´</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p> ç„¶ååœ¨é¡µé¢ä¸Šç”± <code>schedule</code> å¾ªç¯è¾“å‡º tdï¼Œblocks[0] å’Œ blocks[1] çš„é•¿åº¦å°±æ˜¯ td æ¨ªè·¨çš„ td ä¸ªæ•°ã€‚</p>
</li>
<li><p><strong>v2 ç‰ˆ</strong></p>
<p> <strong>èƒŒæ™¯ï¼š</strong>v1 ç‰ˆçš„æ’æœŸè¡¨è®¾è®¡ä¸­ï¼Œç”±äºæ’æœŸçš„æœ€å°å•ä½æ˜¯â€œå¤©â€ï¼Œè€Œå­˜åœ¨æ•°æ®åº“ä¸­çš„ startDate å’Œ endDate çš„æœ€å°å•ä½å´æ˜¯æ¯«ç§’ï¼Œåœ¨è®¡ç®—ä¸Šæ— ç–‘å¢åŠ äº†å¤§é‡çº·ç¹çš„è®¡ç®—ï¼Œå—ç§»åŠ¨ç»„ task ç³»ç»Ÿçš„å¯å‘ï¼ŒæŠŠæ’æœŸæ•°æ®æ”¹ä¸º startDate å’Œ daysï¼ˆæ‰€éœ€å¤©æ•°ï¼‰ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸€åŠçš„è®¡ç®—ï¼Œä¹Ÿæ›´å¥½ç†è§£ã€‚å¦å¤–è¾ƒå¤§çš„æ”¹åŠ¨ï¼Œæ’æœŸæ—¶é—´å°†å…è®¸æœ‰é‡å ï¼ˆå³åŒä¸€å¤©å¯ä»¥æ’å¤šä¸ªéœ€æ±‚ï¼‰ã€‚</p>
<p> ä»æœåŠ¡å™¨è·å–çš„æºæ•°æ®çš„å½¢å¼ä¸å˜ï¼Œè¿™æ¬¡æˆ‘åœ¨è®¡ç®—ä¹‹å‰æŠŠæ—¶é—´éƒ½è½¬åŒ–æˆäº†å¤©ï¼ˆ1970-01-01è‡³ä»Šçš„å¤©æ•°ï¼‰ä»¥æ–¹ä¾¿è®¡ç®—ï¼Œä¸ºäº†è§£å†³æ’æœŸå †å çš„é—®é¢˜ï¼Œæ·»åŠ äº†ä¸¤ä¸ªå…³é”®çš„å˜é‡ï¼š</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> weekpile = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>];	<span class="comment">//è®°å½•æ’æœŸåœ¨è¯¥å¤©å·²ç»å †åˆ°ç¬¬å‡ å±‚äº†</span></div><div class="line"><span class="keyword">var</span> wee = [[], [], [], [], [], [], []];	<span class="comment">//æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°ç»„ä»£è¡¨æ˜ŸæœŸé‡Œçš„ä¸€å¤©ï¼Œå­˜å‚¨ç”±è¯¥å¤©å¼€å§‹çš„éœ€æ±‚ï¼Œä¸‹é¢æœ‰è¯¦è§£</span></div></pre></td></tr></table></figure>
<p> weekpile åŸç†å¦‚ä¸‹å›¾ï¼Œæ¯ä¸ªæ’æœŸæ’åœ¨ç¬¬å‡ å±‚ç”±å®ƒåœ¨æ’æœŸè¡¨ä¸­çš„ç¬¬ä¸€å¤©æ‰€åœ¨å±‚çº§å†³å®šã€‚</p>
<p> <img src="//img.aotu.io/Manjiz/2016/uft/weekpile.gif" alt="weekpile"></p>
<p> å±‚æ•°è®°å½•é™„åŠ åˆ°ç”¨æˆ·æ•°æ®ä¸­ï¼Œå¦‚ä¸‹ï¼š</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">blocks: [</div><div class="line">	&#123;</div><div class="line">		<span class="attr">id</span>:xx, <span class="attr">demandID</span>:xx, <span class="attr">startDate</span>:xx, <span class="attr">days</span>:xx, ... ,</div><div class="line">		<span class="attr">weekdays</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</div><div class="line">		<span class="attr">pilefloor</span>: n	<span class="comment">// æ‰€åœ¨å±‚çº§</span></div><div class="line">	&#125;,</div><div class="line">	...</div><div class="line">]</div></pre></td></tr></table></figure>
<p> å¦å¤–ï¼Œä¸Šæ–‡æåˆ°çš„ <code>wee</code> å˜é‡å­˜å‚¨çš„æ˜¯æŒ‡å‘ <code>blocks</code> ç´¢å¼•çš„æ•°å­—ï¼ŒæŠŠå®ƒä¹Ÿé™„åŠ åˆ°ç”¨æˆ·æ•°æ®ä¸­ã€‚å¦‚å›¾ï¼Œå¤–å±‚ div çš„ <code>margin-top</code> ç”± <code>wee</code> æ‰€æŒ‡å‘çš„ç¬¬ä¸€ä¸ªæ’æœŸçš„ <code>pilefloor</code> å†³å®šï¼Œæ¯”å¦‚ä¸‹å›¾å‡è®¾è¿™æ˜¯æ˜ŸæœŸå…­ï¼Œé‚£ä¹ˆå¤–å±‚ div çš„ <code>margin-top</code> ç”± <code>blocks[wee[6][0]].pilefloor</code> å†³å®šã€‚</p>
<p> <img src="//img.aotu.io/Manjiz/2016/uft/wee.png" alt="wee"></p>
<p> å› ä¸ºå·²çŸ¥æ’æœŸçš„å¤©æ•° nï¼Œç»™æ¯ä¸ªæ’æœŸçš„å®½åº¦è®¾ç½®ç›¸åº”çš„ n*100% å³å¯ã€‚</p>
<p> ç„¶ååœ¨é¡µé¢ä¸Šç”± <code>wee</code> å¾ªç¯è¾“å‡º tdï¼Œblocks[n] ä¸­çš„ weekdays çš„ length å†³å®šäº†æ’æœŸçš„é•¿åº¦ã€‚</p>
<p> v2 ç‰ˆæ’æœŸè¡¨å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p> <img src="//img.aotu.io/Manjiz/2016/uft/schedule.png" alt="æ’æœŸ"></p>
</li>
</ol>
<h2 id="åä½œ"><a href="#åä½œ" class="headerlink" title="åä½œ"></a>åä½œ</h2><p>æœ€åˆ UFT ä¸»è¦ç”±æˆ‘è¿›è¡Œå¼€å‘ï¼Œåæ¥å¦ä¸€ä¸ªåŒäº‹åŠ å…¥å¼€å‘ï¼Œå˜æˆæˆ‘è´Ÿè´£ UFT çš„åŠŸèƒ½å¼€å‘ï¼Œå¥¹è´Ÿè´£ UFT çš„ UI ä¼˜åŒ–ï¼Œé¡¹ç›®æºç æ”¾åˆ° <a href="https://github.com/o2team/UFT" target="_blank" rel="external">github</a> ä¸Šäº†ï¼Œæˆ‘ä»¬è¦åœ¨ github å…±åŒè¿›è¡Œå¼€å‘ï¼Œæˆ‘ä»¬ä¸¤äººç¢ç£¨äº†å¥½ä¹…ï¼Œé¢å¯¹å†²çªé—®é¢˜æ—¶å¼€å§‹è¿˜é‡‡å–è¿‡åˆ é™¤åé‡æ–°æ‹‰å–æš´åŠ›åšæ³•ï¼Œå‡ ç»å°è¯•ï¼Œæˆ‘ä»¬æœ€ç»ˆæ¢ç´¢å‡ºä¸¤ç§è¾ƒå¥½çš„åä½œæ–¹å¼ï¼š</p>
<ol>
<li>æˆ‘ä»¬å„è‡ªæ‹‰å–åˆ†æ”¯ä¿®æ”¹ï¼Œpush ä¸Šå»åå‘èµ·åˆå¹¶è¯·æ±‚ï¼Œæˆ‘è´Ÿè´£åˆå¹¶åˆ†æ”¯ï¼›</li>
<li><p>åœ¨æœ¬åœ°ä¿®æ”¹åï¼Œå…ˆä»æœåŠ¡å™¨ä¸Šæ‹‰å–æ›´æ–°åˆå¹¶ï¼š</p>
<p> <code>git fetch origin master</code></p>
<p> ç„¶åè¿›è¡Œåˆå¹¶</p>
<p> <code>git merge FETCH_HEAD</code></p>
<p> ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåˆå¹¶ä¼šé¡ºåˆ©è¿›è¡Œï¼Œä½†éš¾å…ä¼šæœ‰å†²çªï¼Œä¸€æ—¦æœ‰å†²çªï¼Œå°±è°ƒç”¨ mergetool è¿›è¡Œåˆå¹¶ï¼Œæˆ–è€…ç›´æ¥åœ¨åŸæ–‡ä»¶ä¸Šæ‰‹åŠ¨åˆå¹¶ã€‚æœ€åï¼Œå°±æ˜¯æ­£å¸¸çš„æäº¤è¿‡ç¨‹äº†ã€‚</p>
<p> å…³äº mergetoolï¼Œè‡ªä»åŒäº‹åˆ†äº«è¿‡ä¸€æ¬¡ï¼Œå›å»åè‡ªå·±è£…äº† p4mergeï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
 <figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[diff]</div><div class="line">	tool = p4merge</div><div class="line">[difftool <span class="string">"p4merge"</span>]</div><div class="line">	<span class="keyword">cmd</span><span class="bash"> = <span class="string">"p4merge <span class="variable">$LOCAL</span> <span class="variable">$REMOTE</span>"</span></span></div><div class="line">[merge]</div><div class="line">	tool = p4merge</div><div class="line">[mergetool <span class="string">"p4merge"</span>]</div><div class="line">	<span class="keyword">cmd</span><span class="bash"> = <span class="string">"p4merge <span class="variable">$BASE</span> <span class="variable">$LOCAL</span> <span class="variable">$REMOTE</span> <span class="variable">$MERGED</span>"</span></span></div><div class="line">	trustExitCode = true</div><div class="line">	keepBackup = false</div></pre></td></tr></table></figure>
<p> ä½†æ˜¯ï¼Œæ²¡æœ‰å†²çªæ˜¯è°ƒç”¨ä¸äº† mergetool çš„ã€‚</p>
</li>
</ol>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ol>
<li><p><strong>ä¸´æ—¶æ–‡ä»¶çš„å¤„ç†</strong></p>
<p> ä¸´æ—¶æ–‡ä»¶æŒ‡çš„æ˜¯å¼‚æ­¥ä¸Šä¼ åˆ° temp æ–‡ä»¶å¤¹çš„æ–‡ä»¶ï¼Œç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åå¦‚æœä¸æ‰“ç®—è¿›ä¸€æ­¥æäº¤äº†ï¼Œè¿™äº›ä¸´æ—¶æ–‡ä»¶å°±æˆäº†â€œå¼ƒå„¿â€ï¼Œå¦‚æœä¸å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œtemp æ–‡ä»¶å¤¹ä¼šè¶Šæ¥è¶Šå¤§ã€‚äºæ˜¯åŠ è¿›äº†å®šæœŸä»»åŠ¡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å¯¹ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è¿›è¡Œæ¸…ç†ï¼Œä¸ºäº†é˜²æ­¢æŠŠç”¨æˆ·åˆšä¸Šä¼ çš„æ–‡ä»¶æ¸…ç†æ‰äº†ï¼Œè¢«æ¸…ç†çš„æ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´è¦åœ¨3å¤©ä¹‹å‰ã€‚</p>
</li>
</ol>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>UFT ä»æ— åˆ°æœ‰ï¼Œå¾ˆå¤šä¸œè¥¿è¾¹å­¦è¾¹ç”¨ï¼šç¬¬ä¸€æ¬¡å°è¯•ç”¨ Expressï¼Œé…è®¾ç½®ã€é…è·¯ç”±ç­‰è¿‡ç¨‹é‡åˆ°ä¸å°‘å‘ï¼›ç¬¬ä¸€æ¬¡ç”¨ Angularï¼Œç”¨å¾—å¹¶ä¸è§„èŒƒï¼Œå¤šäºæ¶›å“¥ä»ä¸­ç›¸åŠ©ï¼Œè§£å†³æˆ‘ä¸å°‘å›°æƒ‘ï¼›Angular å„ç§å„æ ·æ’ä»¶çš„å­¦ä¹ ä½¿ç”¨è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸æ–­è¯•é”™ï¼Œä¸æ–­ç­›é€‰æ»¡æ„æ’ä»¶çš„è¿‡ç¨‹ã€‚</p>
<p>é™¤äº†çŸ¥è¯†ä¸Šå¸æ”¶ï¼Œæœ€å¤§çš„æ”¶è·æ˜¯æ„è¯†åˆ°é¡¹ç›®è§„åˆ’çš„é‡è¦æ€§ã€‚å¼€å§‹æ¥æ‰‹åå°±é©¬ä¸Šå¼€å§‹å†™ä»£ç ï¼Œéœ€è¦ä»€ä¹ˆåŠŸèƒ½å°±å†™ä»€ä¹ˆï¼Œä»¥è‡³äºæœ€åéœ€è¦ç»å¸¸è¾ƒå¤§åœ°æ”¹åŠ¨ä»£ç ï¼Œæ¯”å¦‚ï¼Œåˆ—è¡¨ä¹‹å‰ç”¨ Bootstrap-table å†™ï¼Œç„¶åæ”¹æˆ Angularï¼Œåˆæ¯”å¦‚å°†é¡µé¢åˆå¹¶æˆå•é¡µé¢ Angular åº”ç”¨æ—¶ï¼Œéœ€è¦æŠŠå¤§é‡çš„æ’ä»¶éƒ½æ¢æˆ Angular æ’ä»¶ï¼Œè¿˜æœ‰é¡¹ç›®çš„ç»“æ„ä¹Ÿå‡ ç»å˜æ¢ã€‚æŠ˜è…¾è¿™å‡ ç•ªè¶³è§é¡¹ç›®å‰æœŸçš„è§„åˆ’è¿˜æ˜¯éå¸¸é‡è¦ä¸”å¿…è¦çš„ã€‚</p>
<h2 id="æœªæ¥è§„åˆ’"><a href="#æœªæ¥è§„åˆ’" class="headerlink" title="æœªæ¥è§„åˆ’"></a>æœªæ¥è§„åˆ’</h2><p>UFT åŸæ¥çš„ç›®æ ‡æ˜¯ä¾›éƒ¨é—¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨æˆ·è®¿é—®ç³»ç»Ÿéœ€è¦å…ˆç»è¿‡å†…éƒ¨å‘˜å·¥å¸å·çš„èº«ä»½è®¤è¯è¿‡ç¨‹ï¼Œç„¶è€Œï¼Œéšç€å†…éƒ¨æ¨å‡ºäº†æ–°çš„éœ€æ±‚ç®¡ç†å¹³å°å¹¶æ¨å¹¿åˆ°éƒ¨é—¨ï¼ŒUFT è¢«é—²ç½®ï¼Œä¸ºäº†è®© UFT é‡æ–°ç„•å‘æ´»åŠ›ï¼Œåœ¨æ¥ä¸‹æ¥ï¼ŒæŠŠæºç å¼€æºï¼Œå¹¶å°†æŠŠ UFT æ”¹é€ æˆé€šç”¨çš„éœ€æ±‚ç®¡ç†å¹³å°ã€‚ç›®å‰å¹³å°ä»æœ‰ä¸å°‘å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>MySql ä½¿ç”¨ä¸Š View å’Œ Function ä¼šç®€åŒ–å¾ˆå¤šå·¥ä½œ</li>
<li>Models ä¸æ˜¯çœŸæ­£çš„ MVC ä¸­çš„ Mï¼Œå¯ä»¥è€ƒè™‘è®©è¿™éƒ¨åˆ†æ›´è¿œç¦»ä¸šåŠ¡é€»è¾‘æ›´æ¥è¿‘æ•°æ®</li>
<li>éœ€æ±‚çŠ¶æ€çš„å¤šæ ·åŒ–ï¼Œéœ€æ±‚çŠ¶æ€å˜æ›´çš„ç³»ç»Ÿé€šçŸ¥ï¼ˆéé‚®ä»¶ï¼‰</li>
<li>â€¦â€¦</li>
</ul>
<p>æºç åœ°å€ï¼š<a href="https://github.com/o2team/UFT" target="_blank" rel="external">https://github.com/o2team/UFT</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€åˆå®ƒçš„åå­—ä¸º BugHoundï¼Œä¸»è¦åŠŸèƒ½æ˜¯ bug æäº¤ï¼ŒEC åŒå­¦å·²ç»é€ å‡ºäº†å®ƒæœ€åˆçš„æ ·å­ï¼Œå®ƒæœ€åˆçš„ç›®æ ‡ç”¨æˆ·æ˜¯ç§»åŠ¨ç”¨æˆ·ï¼Œèƒ½åœ¨æ bug çš„åŒæ—¶æ”¶é›†è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯ã€‚ä¸»è¦ç”¨åˆ°çš„æŠ€æœ¯ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;php&lt;/li&gt;
&lt;li&gt;mongodb&lt;/li&gt;
&lt;/ul&gt;

    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="uft" scheme="https://aotu.io/tags/uft/"/>
    
      <category term="angular" scheme="https://aotu.io/tags/angular/"/>
    
      <category term="kendo" scheme="https://aotu.io/tags/kendo/"/>
    
      <category term="node-mysql" scheme="https://aotu.io/tags/node-mysql/"/>
    
      <category term="express" scheme="https://aotu.io/tags/express/"/>
    
  </entry>
  
  <entry>
    <title>jsæ¸¸æˆå¼€å‘åˆçº§å…¥é—¨</title>
    <link href="https://aotu.io/notes/2016/01/14/introduction-to-JS-game-development/"/>
    <id>https://aotu.io/notes/2016/01/14/introduction-to-JS-game-development/</id>
    <published>2016-01-14T01:20:39.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‡äº‹å¼€å¤´éš¾ï¼Œjsä¸€ç›´æ²¡æœ‰è¿›æ­¥ï¼Ÿè·Ÿç€è¿™ç¯‡æ–‡ç« æ¥ç¼–å†™äº”å­æ£‹æ¸¸æˆå§ï¼<br><a id="more"></a></p>
<h2 id="1-æ¸¸æˆå¼€å‘æ–¹æ³•"><a href="#1-æ¸¸æˆå¼€å‘æ–¹æ³•" class="headerlink" title="1 æ¸¸æˆå¼€å‘æ–¹æ³•"></a>1 æ¸¸æˆå¼€å‘æ–¹æ³•</h2><h3 id="1-1-å°è§„æ¨¡æ¸¸æˆ"><a href="#1-1-å°è§„æ¨¡æ¸¸æˆ" class="headerlink" title="1.1 å°è§„æ¨¡æ¸¸æˆ"></a>1.1 å°è§„æ¨¡æ¸¸æˆ</h3><p>å°è§„æ¨¡æ¸¸æˆä¸€èˆ¬ç”±ä¸€äººæˆ–ä¸¤äººå®Œæˆï¼Œä¸éœ€è¦è¯¦ç»†çš„äº§å“è¯´æ˜ç­‰èµ„æ–™ï¼Œç›´æ¥è¿›å…¥ä»£ç çš„ç¼–å†™ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è§£é‡Šå¹¶è¿è¡Œã€‚æœ‰æ—¶å€™å‡ºç°é”™è¯¯ï¼Œé‡æ–°ç¼–è¾‘å†å›åˆ°æµè§ˆå™¨è§£é‡Šè¿è¡Œï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„ç¼–è¾‘-è§£é‡Š-è¿è¡Œçš„é‡å¤å·¥ä½œæ¨¡å¼ã€‚</p>
<h3 id="1-2-å¤§è§„æ¨¡æ¸¸æˆ"><a href="#1-2-å¤§è§„æ¨¡æ¸¸æˆ" class="headerlink" title="1.2 å¤§è§„æ¨¡æ¸¸æˆ"></a>1.2 å¤§è§„æ¨¡æ¸¸æˆ</h3><p>å¤§è§„æ¨¡æ¸¸æˆä¸€èˆ¬ç”±ä¸¤äººä»¥ä¸Šå®Œæˆï¼Œä¸€å…±åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè®¾è®¡é˜¶æ®µã€è¯´æ˜é˜¶æ®µã€å®ç°é˜¶æ®µã€‚é¦–å…ˆæ˜¯è®¾è®¡é˜¶æ®µï¼šè®¾è®¡ä»€ä¹ˆæ¸¸æˆï¼Œæ¸¸æˆçš„ä¸»ä½“ç”¨æˆ·æ˜¯è°ï¼Œæ¸¸æˆçš„ç›®çš„ç­‰ã€‚ç„¶åæ˜¯è¯´æ˜é˜¶æ®µï¼šæ¸…æ¥šæ¸¸æˆéœ€è¦çš„ç±»å’Œç±»ä¸­éœ€è¦çš„æ–¹æ³•ï¼Œåˆ†åˆ«åšä¸€ä¸ªè§„åˆ’ï¼Œä¿è¯ç¼–å†™ä»£ç æ—¶æ€è·¯æ¸…æ™°ï¼Œä»¥åŠä»£ç çš„æ•´æ´æ€§ã€‚æœ€åæ˜¯å®ç°é˜¶æ®µï¼Œå…¶å®å°±æ˜¯è¿›å…¥ç¼–è¾‘-è§£é‡Š-è¿è¡Œçš„å·¥ä½œæ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§è§„æ¨¡æ¸¸æˆæ¯”å°è§„æ¨¡æ¸¸æˆå¤šäº†ä¸¤å¤§é˜¶æ®µå³è®¾è®¡é˜¶æ®µå’Œè¯´æ˜é˜¶æ®µè€Œå·²ã€‚</p>
<h2 id="2-äº†è§£æ¸¸æˆè§„åˆ™"><a href="#2-äº†è§£æ¸¸æˆè§„åˆ™" class="headerlink" title="2 äº†è§£æ¸¸æˆè§„åˆ™"></a>2 äº†è§£æ¸¸æˆè§„åˆ™</h2><ul>
<li>å¯¹å±€åŒæ–¹å„æ‰§ä¸€è‰²æ£‹å­ã€‚</li>
<li>ç©ºæ£‹ç›˜å¼€å±€</li>
<li>é»‘å…ˆã€ç™½åï¼Œäº¤æ›¿ä¸‹å­ï¼Œæ¯æ¬¡åªèƒ½ä¸‹ä¸€å­ã€‚</li>
<li>æ£‹å­ä¸‹åœ¨æ£‹ç›˜çš„ç©ºç™½ç‚¹ä¸Šï¼Œæ£‹å­ä¸‹å®šåï¼Œä¸å¾—å‘å…¶å®ƒç‚¹ç§»åŠ¨ï¼Œä¸å¾—ä»æ£‹ç›˜ä¸Šæ‹¿æ‰æˆ–æ‹¿èµ·å¦è½åˆ«å¤„ã€‚</li>
<li>é»‘æ–¹çš„ç¬¬ä¸€æšæ£‹å­å¯ä¸‹åœ¨æ£‹ç›˜ä»»æ„äº¤å‰ç‚¹ä¸Šã€‚</li>
</ul>
<h2 id="3-äº”å­æ£‹æ¸¸æˆçš„ä¸»è¦æ–¹æ³•"><a href="#3-äº”å­æ£‹æ¸¸æˆçš„ä¸»è¦æ–¹æ³•" class="headerlink" title="3 äº”å­æ£‹æ¸¸æˆçš„ä¸»è¦æ–¹æ³•"></a>3 äº”å­æ£‹æ¸¸æˆçš„ä¸»è¦æ–¹æ³•</h2><h3 id="3-1-ç”»æ£‹ç›˜"><a href="#3-1-ç”»æ£‹ç›˜" class="headerlink" title="3.1 ç”»æ£‹ç›˜"></a>3.1 ç”»æ£‹ç›˜</h3><h4 id="3-1-1-ç”»æ£‹ç›˜æ€è·¯"><a href="#3-1-1-ç”»æ£‹ç›˜æ€è·¯" class="headerlink" title="3.1.1 ç”»æ£‹ç›˜æ€è·¯"></a>3.1.1 ç”»æ£‹ç›˜æ€è·¯</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç¡®å®šæ£‹ç›˜å¤§å° 15*15 å³n = 15</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawGobang</span>(<span class="params">n</span>) </span>&#123;</div><div class="line"><span class="comment">// åŠ¨æ€ç”Ÿæˆdomå…ƒç´ </span></div><div class="line"><span class="comment">// é€šè¿‡æ·»åŠ ç±»æ§åˆ¶æ£‹ç›˜æ ·å¼ï¼Œå°¤å…¶æ³¨æ„è¾¹ç¼˜çš„æ£‹å­çš„æ ·å¼æ§åˆ¶</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-1-2-ç”»æ£‹ç›˜ä»£ç "><a href="#3-1-2-ç”»æ£‹ç›˜ä»£ç " class="headerlink" title="3.1.2 ç”»æ£‹ç›˜ä»£ç "></a>3.1.2 ç”»æ£‹ç›˜ä»£ç </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç”»æ£‹ç›˜æ ¼å­</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawGobang</span>(<span class="params">n</span>) </span>&#123;   </div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</div><div class="line">		</div><div class="line">			<span class="keyword">var</span> block = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</div><div class="line"></div><div class="line">			block.className = <span class="string">"gobang_block"</span>;</div><div class="line">			<span class="comment">// èµ‹äºˆæ¯ä¸ªæ ¼å­ä¸€ä¸ªid,æ–¹ä¾¿ä»¥åè¯†åˆ«å¹¶ä¸‹æ£‹ï¼Œæˆ–å¯æ·»åŠ html5è‡ªå®šä¹‰å±æ€§data-*</span></div><div class="line">			block.id = <span class="string">"block_"</span>+ i + <span class="string">"_"</span> + j;</div><div class="line">			gobang.appendChild(block);</div><div class="line">		</div><div class="line">			<span class="comment">// è¾¹ç¼˜çš„æ ¼å­å±äºç‰¹æ®Šæƒ…å†µï¼Œéœ€è¦å•ç‹¬ç»˜åˆ¶</span></div><div class="line">			<span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</div><div class="line">				block.className += <span class="string">" top"</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(i==n<span class="number">-1</span>)&#123;</div><div class="line">				block.className += <span class="string">" bottom"</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(j==<span class="number">0</span>)&#123;</div><div class="line">					block.className += <span class="string">" left"</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(j==n<span class="number">-1</span>)&#123;</div><div class="line">				block.className += <span class="string">" right"</span>;</div><div class="line">			&#125;	</div><div class="line">		&#125;</div><div class="line">			</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-1-2-ç”»æ£‹ç›˜å›¾ç¤º"><a href="#3-1-2-ç”»æ£‹ç›˜å›¾ç¤º" class="headerlink" title="3.1.2 ç”»æ£‹ç›˜å›¾ç¤º"></a>3.1.2 ç”»æ£‹ç›˜å›¾ç¤º</h4><p>æ³¨æ„è¾¹ç¼˜çš„æ£‹å­çš„æ ·å¼æ§åˆ¶ï¼Œå¦å¤–é¼ æ ‡ç»è¿‡æ—¶æ·»åŠ çº¢è‰²è™šçº¿æé†’ã€‚</p>
<p><img src="//img.aotu.io/wangcainuan/2016-01-14-introduction-to-JS-game-development/board.png" alt="ç”»æ£‹ç›˜"></p>
<h3 id="3-2-ç”»æ£‹å­"><a href="#3-2-ç”»æ£‹å­" class="headerlink" title="3.2 ç”»æ£‹å­"></a>3.2 ç”»æ£‹å­</h3><p>å¤„ç†å‡½æ•°éœ€è¦ä»€ä¹ˆæ“ä½œï¼Œåªæ˜¯æŠŠæ£‹å­ç”»åˆ°ç›¸å¯¹åº”çš„æ£‹ç›˜å³å¯å—ï¼Ÿ</p>
<h4 id="3-2-1-äº‹ä»¶å§”æ‰˜"><a href="#3-2-1-äº‹ä»¶å§”æ‰˜" class="headerlink" title="3.2.1 äº‹ä»¶å§”æ‰˜"></a>3.2.1 äº‹ä»¶å§”æ‰˜</h4><p>ç”»æ£‹å­ä¹‹å‰éœ€è¦äº†è§£ä¸€ä¸‹äº‹ä»¶å§”æ‰˜ï¼šåˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œåªåˆ¶å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±å¯ä»¥ç®¡ç†æŸä¸€ç±»å‹çš„æ‰€æœ‰äº‹ä»¶ã€‚<br>å®ƒçš„å¥½å¤„åœ¨äºå ç”¨å†…å­˜å°‘ï¼Œå‡è®¾æœ‰ä¸€ä¸ªçˆ¶å…ƒç´ ulï¼Œæœ‰100ä¸ªliå­å…ƒç´ ï¼Œå¦‚æœç»™100ä¸ªliå­å…ƒç´ éƒ½ç»‘å®šäº‹ä»¶ï¼Œç›¸å½“è€—å†…å­˜ï¼Œäº‹ä»¶å§”æ‰˜çš„åŸç†å°±æ˜¯åªéœ€è¦ç»™çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶å³å¯ã€‚<br>ä¸è¿‡å®ƒçš„ä½¿ç”¨æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå®ƒè¦æ±‚äº‹ä»¶ä¼šå†’æ³¡ï¼Œä¼šå†’æ³¡çš„äº‹å¦‚clickã€mousedownã€mouseupã€keydownã€keyupå’Œkeypressäº‹ä»¶ã€‚</p>
<p>å†’æ³¡çš„è¿‡ç¨‹å¤§æ¦‚å¦‚ä¸‹ï¼šdiv  -&gt; body -&gt; html(ie5.5-è·³è¿‡ï¼‰ -&gt; document -&gt; window(ie9,fx,chrome,safari)ã€‚</p>
<p>å› æ­¤æˆ‘ä¸éœ€è¦ç»™æ£‹ç›˜çš„æ¯ä¸ªæ ¼å­ç»‘å®šäº‹ä»¶ï¼Œåªéœ€è¦ç»‘å®šæ£‹ç›˜ï¼ˆæ ¼å­çš„çˆ¶å…ƒç´ ï¼‰å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gobang = <span class="built_in">document</span>.getElementById(<span class="string">"gobang_main"</span>);  <span class="comment">// è·å–æ£‹ç›˜</span></div><div class="line">EventUtil.addHandler(gobang,<span class="string">"click"</span>,drawPiece);  <span class="comment">// ç‚¹å‡»æ£‹ç›˜ï¼Œè¿›è¡Œä¸‹æ£‹</span></div></pre></td></tr></table></figure></p>
<h4 id="3-2-2-äº‹ä»¶å§”æ‰˜çš„é—®é¢˜"><a href="#3-2-2-äº‹ä»¶å§”æ‰˜çš„é—®é¢˜" class="headerlink" title="3.2.2 äº‹ä»¶å§”æ‰˜çš„é—®é¢˜"></a>3.2.2 äº‹ä»¶å§”æ‰˜çš„é—®é¢˜</h4><p>ç”±äºåœ¨çˆ¶å…ƒç´ ä¸­ç»‘å®šäº‹ä»¶ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œäº‹ä»¶ç›®æ ‡æ˜¯è¢«å•å‡»çš„å•ä¸ªäº”å­æ£‹æ ¼å­ã€‚å› æ­¤ï¼Œéœ€è¦æ£€æµ‹ idå±æ€§æˆ–å…¶ä»–å±æ€§ æ¥å†³å®šé‡‡å–é€‚å½“çš„æ“ä½œã€‚</p>
<p>å¦‚æœä¸æ£€æµ‹æ˜¯å¦æ˜¯æˆ‘ä»¬æƒ³è¦çš„äº‹ä»¶ç›®æ ‡ï¼Œå¯èƒ½å¯¼è‡´é”™è¯¯ã€‚<br>ä»£ç å¦‚ä¸‹,å¦‚æœtargetIDä¸æ˜¯æˆ‘ä»¬çš„äº‹ä»¶ç›®æ ‡ï¼Œå¯èƒ½i,jçš„æ•°æ®åˆ™ä¸æ­£ç¡®ï¼Œä»è€Œå¯¼è‡´è®¿é—®å¯¹åº”çš„äº”å­æ£‹æ ¼å­gobangArr[i][j]å‡ºé”™ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ ¼å­çš„idæ ¼å¼ä¸º"block_"+ i + "_" + j;</span></div><div class="line"><span class="comment">// targetIdä¸ºå½“å‰ç›®æ ‡çš„id,å‰é¢åŠ è¿ç®—ç¬¦+æ˜¯ä¸ºäº†è½¬æ¢ç±»å‹</span></div><div class="line"><span class="comment">// iå’Œjä»£è¡¨ç¬¬iè¡Œç¬¬jåˆ—</span></div><div class="line">i = +targetId.split(<span class="string">"_"</span>)[<span class="number">1</span>];</div><div class="line">j = +targetId.split(<span class="string">"_"</span>)[<span class="number">2</span>];</div></pre></td></tr></table></figure></p>
<h4 id="3-2-3-å·²ä¸‹è¿‡çš„æ£‹ç›˜ä½ç½®"><a href="#3-2-3-å·²ä¸‹è¿‡çš„æ£‹ç›˜ä½ç½®" class="headerlink" title="3.2.3 å·²ä¸‹è¿‡çš„æ£‹ç›˜ä½ç½®"></a>3.2.3 å·²ä¸‹è¿‡çš„æ£‹ç›˜ä½ç½®</h4><ul>
<li>ç”»å½“å‰æ£‹å­ï¼Œé€šè¿‡æ·»åŠ ç±» active å’Œ ä»£è¡¨é¢œè‰²çš„whiteæˆ–black</li>
<li>target.className.indexOf(â€œactiveâ€)&lt;0ï¼Œæ„æ€æ˜¯å½“å‰ä½ç½®çš„ç±»è‹¥å«æœ‰activeç±»ï¼Œåˆ™ä¸æ‰§è¡Œç”»æ£‹å­ã€‚</li>
<li>è¯¯åŒºï¼šé€šè¿‡ æ£‹ç›˜æ•°æ®gobangArr[i][j]æ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­æ˜¯å¦ä¸‹è¿‡æ£‹å­ã€‚ä¸å¯é€šè¿‡æ£‹ç›˜æ•°æ®gobangArr[i][j] æ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­ï¼Œå› ä¸ºæ•°ç»„å¯èƒ½å­˜åœ¨å†—ä½™æ•°æ®ã€‚é™¤éåˆå§‹åŒ–æ—¶é‡ç½®äº†æ•°ç»„ä¸ºç©ºã€‚</li>
</ul>
<h4 id="3-2-4-å…¶ä»–"><a href="#3-2-4-å…¶ä»–" class="headerlink" title="3.2.4 å…¶ä»–"></a>3.2.4 å…¶ä»–</h4><ul>
<li>ä¸€æ—¦ä¸‹ä¸€ä¸ªæ£‹å­å°±éœ€è¦åˆ¤æ–­æ˜¯å¦èµ¢äº†ï¼šchessWin(i,j,color);</li>
<li>éœ€è¦åˆ‡æ¢æ£‹å­é¢œè‰²ï¼šcolor = color==â€blackâ€? â€œwhiteâ€:â€blackâ€;</li>
<li>å…¶ä¸­ä¸€æ–¹èµ¢äº†çš„è¯ï¼Œä¸å¯å†ä¸‹æ£‹ï¼Œå¿…é¡»é‡æ–°æ¥ä¸€å±€ï¼Œå³ç§»é™¤ç”»æ£‹å­çš„æ–¹æ³•ã€‚</li>
</ul>
<h3 id="3-3-åˆ¤æ–­è¾“èµ¢"><a href="#3-3-åˆ¤æ–­è¾“èµ¢" class="headerlink" title="3.3 åˆ¤æ–­è¾“èµ¢"></a>3.3 åˆ¤æ–­è¾“èµ¢</h3><h4 id="3-3-1-åˆ¤æ–­è¾“èµ¢ç®—æ³•"><a href="#3-3-1-åˆ¤æ–­è¾“èµ¢ç®—æ³•" class="headerlink" title="3.3.1 åˆ¤æ–­è¾“èµ¢ç®—æ³•"></a>3.3.1 åˆ¤æ–­è¾“èµ¢ç®—æ³•</h4><p>é¦–å…ˆè®¾ç½®count = 1ã€‚countçš„å€¼ä»£è¡¨åœ¨åŒä¸€ä¸ªæ–¹å‘è¿ç»­åœ¨ä¸€èµ·çš„æ£‹å­æ€»æ•°ï¼Œè¾¾åˆ°5ä¸ªåˆ™è¯¥æ–¹èµ¢ã€‚<br>å¦‚æ°´å¹³æ–¹å‘æŒ‰ç…§å¦‚ä¸‹é¡ºåºæ‰§è¡Œåˆ¤æ–­ï¼Œå…¶ä»–æ–¹å‘é›·åŒï¼š</p>
<ol>
<li>æŒ‰é¡ºåºéå†å½“å‰ä½ç½®(i,j)æ£‹å­çš„å‰å››ä¸ªä½ç½®æ˜¯å¦å«ç›¸åŒé¢œè‰²çš„æ£‹å­ï¼Œè‹¥ç›¸åŒåˆ™count++ï¼ŒåŒæ—¶æ£€æµ‹æ˜¯å¦count == 5 ã€‚</li>
<li>ä¸€æ—¦ä¸ç›¸åŒé€€å‡ºå¾ªç¯ï¼Œ</li>
<li>ç»§ç»­æŒ‰é¡ºåºéå†(i,j)æ£‹å­çš„åå››ä¸ªä½ç½®æ˜¯å¦å«ç›¸åŒé¢œè‰²çš„æ£‹å­ï¼Œè‹¥ç›¸åŒï¼Œcount++ä»¥åŠæ£€æµ‹æ˜¯å¦count == 5 ã€‚<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¢è‰²è™šçº¿ä¸ºå³å°†è¦ä¸‹çš„æ£‹å­ï¼Œè®¡ç®—countä¸º1ï¼Œå‘å·¦åˆ¤æ–­ä½¿å¾—countæœ€åä¸º3ï¼Œé‡åˆ°çº¢è‰²äº¤å‰çš„åœ°æ–¹æ²¡æœ‰é»‘è‰²æ£‹å­ï¼Œåˆ™é€€å‡ºå¾ªç¯ï¼›ä»çº¢è‰²è™šçº¿çš„å³è¾¹ç»§ç»­åˆ¤æ–­ï¼Œæœ€åcountä¸º5ï¼Œå› æ­¤åˆ¤æ–­é»‘æ£‹èµ¢ï¼š</li>
</ol>
<p><img src="//img.aotu.io/wangcainuan/2016-01-14-introduction-to-JS-game-development/check.jpg" alt="åˆ¤æ–­è¾“èµ¢ç®—æ³•"></p>
<p>ä»£ç å¦‚ä¸‹ï¼Œä¸€å…±æ£€æµ‹å››ä¸ªæ–¹å‘ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">chessWin</span>(<span class="params">i,j,color</span>) </span>&#123;  </div><div class="line"><span class="comment">// å‚ç›´æ–¹å‘ </span></div><div class="line"><span class="comment">// é‡ç½®count = 1</span></div><div class="line"><span class="comment">// æ°´å¹³æ–¹å‘</span></div><div class="line"><span class="comment">// é‡ç½®count = 1</span></div><div class="line"><span class="comment">// 45Â°æ–¹å‘</span></div><div class="line"><span class="comment">// é‡ç½®count = 1</span></div><div class="line"><span class="comment">// 135Â°æ–¹å‘ </span></div><div class="line"><span class="comment">// é‡ç½®count = 1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="3-4-é‡ç½®æ¸¸æˆ"><a href="#3-4-é‡ç½®æ¸¸æˆ" class="headerlink" title="3.4 é‡ç½®æ¸¸æˆ"></a>3.4 é‡ç½®æ¸¸æˆ</h3><p>ä¸»è¦æ˜¯æ¸…é™¤æ£‹å­ä»¥åŠæ£‹å­æ•°ç»„ï¼Œå¦å¤–è®¾ç½®é»˜è®¤æ•°æ®ï¼šé»˜è®¤é»‘æ£‹å…ˆä¸‹ï¼Œé‡ç½®æç¤ºè¯­ï¼Œé‡æ–°ç»™æ£‹ç›˜ç»‘å®šæ–¹æ³•ã€‚ä¸€æ–¹èµ¢äº†çš„è¯ï¼Œé»˜è®¤ç§»é™¤ç”»æ£‹å­æ–¹æ³•çš„ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°ç»™æ£‹ç›˜ç»‘å®šæ–¹æ³•ã€‚å¦‚æœç†è§£äº†æ–‡ç« ä¸Šé¢è®²è¿°çš„æ–¹æ³•çš„è¯ï¼Œé‡ç½®æ¸¸æˆæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå› æ­¤ä¸å†èµ˜è¿°ã€‚</p>
<h2 id="4-äº”å­æ£‹æµ‹è¯•"><a href="#4-äº”å­æ£‹æµ‹è¯•" class="headerlink" title="4 äº”å­æ£‹æµ‹è¯•"></a>4 äº”å­æ£‹æµ‹è¯•</h2><ul>
<li>æ£€æµ‹ç‰¹æ®Šå€¼ã€‚å¦‚æ£€æµ‹æ£‹ç›˜è¾¹ç¼˜æ˜¯å¦å¯ä»¥æ­£å¸¸ç”»æ£‹å­ã€‚</li>
<li>æµ‹è¯•èŒƒå›´ã€‚åˆ¤æ–­äº”å­æ£‹çš„å››ä¸ªæ–¹å‘å³å‚ç›´æ–¹å‘ã€æ°´å¹³æ–¹å‘ã€45åº¦æ–¹å‘ã€135åº¦æ–¹å‘ï¼Œæ˜¯å¦å¯ä»¥åˆ¤æ–­è¾“èµ¢æ­£ç¡®ã€‚</li>
</ul>
<h2 id="5-JSäº‹ä»¶"><a href="#5-JSäº‹ä»¶" class="headerlink" title="5 JSäº‹ä»¶"></a>5 JSäº‹ä»¶</h2><p>æœ€åæ ¹æ®äº”å­æ£‹çš„ä¸»è¦æ–¹æ³•ï¼Œæ€»ç»“ä¸€ä¸‹jsäº‹ä»¶ã€‚</p>
<h3 id="5-1-äº‹ä»¶å¤„ç†ç¨‹åºï¼šå“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°"><a href="#5-1-äº‹ä»¶å¤„ç†ç¨‹åºï¼šå“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°" class="headerlink" title="5.1 äº‹ä»¶å¤„ç†ç¨‹åºï¼šå“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°"></a>5.1 äº‹ä»¶å¤„ç†ç¨‹åºï¼šå“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°</h3><h4 id="5-1-1-htmläº‹ä»¶å¤„ç†ç¨‹åº"><a href="#5-1-1-htmläº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="5.1.1  htmläº‹ä»¶å¤„ç†ç¨‹åº"></a>5.1.1  htmläº‹ä»¶å¤„ç†ç¨‹åº</h4><p>å³ç›´æ¥åœ¨HTMLä»£ç ä¸­æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚ä¸æ¨èä½¿ç”¨ï¼ŒåŸå› å¦‚ä¸‹ï¼š<br>htmläº‹ä»¶å¤„ç†ç¨‹åºç¼ºç‚¹ï¼šæ—¶å·®é—®é¢˜ã€ä»£ç ç´§å¯†è€¦åˆã€æ‰©å±•äº‹ä»¶å¤„ç†ç¨‹åºçš„ä½œç”¨åŸŸé“¾åœ¨ä¸åŒæµè§ˆå™¨ä¸­å¯¼è‡´ä¸åŒç»“æœã€‚</p>
<h4 id="5-1-2-DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#5-1-2-DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="5.1.2  DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>5.1.2  DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº</h4><p>ç±»ä¼¼onclickç­‰äº‹ä»¶å¤„ç†ç¨‹åºå±æ€§ï¼Œé€šå¸¸å…¨éƒ¨å°å†™ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>);</div><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; &#125;;    <span class="comment">// ç»‘å®š</span></div><div class="line">btn.onclick = <span class="literal">null</span>;  <span class="comment">// è§£ç»‘</span></div></pre></td></tr></table></figure></p>
<h4 id="5-1-3-DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#5-1-3-DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="5.1.3  DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>5.1.3  DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº</h4><p>DOM2ï¼šå¯æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼ŒæŒ‰é¡ºåºè§¦å‘ã€‚<br>ä½¿ç”¨æ–¹æ³•ï¼š<br> ç»‘å®šå‡½æ•°addEventListener() ä¸ è§£ç»‘å‡½æ•°removeEventListener()ï¼šå‚æ•°ä¸ºäº‹ä»¶åï¼ˆå¦‚click)ã€ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•°ã€å¸ƒå°”å€¼ã€‚å¸ƒå°”å€¼ä¸ºtrueæ—¶ä»£è¡¨æ•è·ï¼Œfalseä»£è¡¨å†’æ³¡é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¸€èˆ¬ä¸ºfalseã€‚<br> æ³¨æ„ï¼šè‹¥ç¬¬äºŒä¸ªå‚æ•°ä¸ºåŒ¿åå‡½æ•°ï¼Œå³ä½¿ç”¨removeEventListener()ä¼ å…¥ç›¸åŒçš„åŒ¿åå‡½æ•°ä¹Ÿæ— æ³•è§£ç»‘ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">btn.addEventListener(<span class="string">"click"</span>,myGod,<span class="literal">false</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myGod</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	alert(<span class="string">"oh,my god!"</span>);</div><div class="line">&#125;</div><div class="line">btn.removeEventListener(<span class="string">"click"</span>,myGod,<span class="literal">false</span>);</div></pre></td></tr></table></figure>
<h4 id="5-1-4-IEäº‹ä»¶å¤„ç†ç¨‹åº"><a href="#5-1-4-IEäº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="5.1.4  IEäº‹ä»¶å¤„ç†ç¨‹åº"></a>5.1.4  IEäº‹ä»¶å¤„ç†ç¨‹åº</h4><p>å¯æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼ŒæŒ‰ç›¸åçš„é¡ºåºè§¦å‘ã€‚åªæœ‰IEå’Œoperaæ”¯æŒã€‚<br>åœ¨DOM0çº§ä¸­ï¼Œthisä¸ºæ‰€å±å…ƒç´ çš„ä½œç”¨åŸŸå†…è¿è¡Œï¼›ä½†æ˜¯åœ¨ä½¿ç”¨attachEvent()æ–¹æ³•æ—¶ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œå³this===windowï¼ï¼ï¼<br>ä½¿ç”¨æ–¹æ³•ï¼š<br>ç»‘å®šå‡½æ•°attachEvent()  å’Œ è§£ç»‘å‡½æ•°detachEvent() : å‚æ•°ä¸º äº‹ä»¶å¤„ç†ç¨‹åºåç§°(å¦‚ onclick )ä¸å‡½æ•°ã€‚å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">btn.attachEvent(<span class="string">"onclick"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; );</div></pre></td></tr></table></figure></p>
<h4 id="5-1-5-è·¨æµè§ˆå™¨"><a href="#5-1-5-è·¨æµè§ˆå™¨" class="headerlink" title="5.1.5  è·¨æµè§ˆå™¨"></a>5.1.5  è·¨æµè§ˆå™¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EventUtil = &#123;</div><div class="line">    <span class="attr">addHandler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span> (element.addEventListener)&#123;  <span class="comment">// DOM2çº§</span></div><div class="line">            element.addEventListener(type, handler, <span class="literal">false</span>);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent)&#123;  <span class="comment">// IE</span></div><div class="line">            element.attachEvent(<span class="string">"on"</span> + type, handler);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;   <span class="comment">// DOM0çº§</span></div><div class="line">            element[<span class="string">"on"</span> + type] = handler;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="5-2-äº‹ä»¶å¯¹è±¡event"><a href="#5-2-äº‹ä»¶å¯¹è±¡event" class="headerlink" title="5.2 äº‹ä»¶å¯¹è±¡event"></a>5.2 äº‹ä»¶å¯¹è±¡event</h3><ul>
<li>DOM0çº§æˆ–DOM2çº§éƒ½ä¼šä¼ å…¥eventå¯¹è±¡ã€‚</li>
<li>ieè®¿é—®eventæœ‰å‡ ç§æ–¹å¼ï¼Œå–å†³äºæŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºçš„æ–¹æ³•ã€‚<br>   DOM0ï¼šwindow.event<br>   attachEvent()ï¼šwindow.eventæˆ–event</li>
<li>è·¨æµè§ˆå™¨æ–¹æ¡ˆå¦‚ä¸‹ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EventUtil = &#123;</div><div class="line">    <span class="attr">getEvent</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> event ? event : <span class="built_in">window</span>.event;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-3-äº‹ä»¶ç›®æ ‡"><a href="#5-3-äº‹ä»¶ç›®æ ‡" class="headerlink" title="5.3 äº‹ä»¶ç›®æ ‡"></a>5.3 äº‹ä»¶ç›®æ ‡</h3><ul>
<li><p>å¯¹è±¡thiså§‹ç»ˆç­‰äºcurrentTarget,è€Œtargetåˆ™åªåŒ…å«äº‹ä»¶çš„å®é™…ç›®æ ‡ã€‚<br>ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">    alert(event.currentTarget === <span class="built_in">document</span>.body);   <span class="comment">//true</span></div><div class="line">    alert(<span class="keyword">this</span> === <span class="built_in">document</span>.body);                  <span class="comment">//true</span></div><div class="line">    alert(event.target === <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>)); <span class="comment">//true</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>è·¨æµè§ˆå™¨è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> EventUtil = &#123;</div><div class="line">    <span class="attr">getTarget</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> event.target || event.srcElement;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-äº”å­æ£‹æºç ä»¥åŠå‚è€ƒ"><a href="#6-äº”å­æ£‹æºç ä»¥åŠå‚è€ƒ" class="headerlink" title="6 äº”å­æ£‹æºç ä»¥åŠå‚è€ƒ"></a>6 äº”å­æ£‹æºç ä»¥åŠå‚è€ƒ</h2><p>åœ¨çº¿åœ°å€ï¼š <a href="http://labs.qiang.it/qqpai/test/wcn/gobang/gobang.html" target="_blank" rel="external">http://labs.qiang.it/qqpai/test/wcn/gobang/gobang.html</a><br>githubåœ°å€ï¼š<a href="https://github.com/Newcandy/gobang" target="_blank" rel="external">https://github.com/Newcandy/gobang</a><br>å‚è€ƒä¹¦ç±ï¼šã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸‡äº‹å¼€å¤´éš¾ï¼Œjsä¸€ç›´æ²¡æœ‰è¿›æ­¥ï¼Ÿè·Ÿç€è¿™ç¯‡æ–‡ç« æ¥ç¼–å†™äº”å­æ£‹æ¸¸æˆå§ï¼&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="js" scheme="https://aotu.io/tags/js/"/>
    
      <category term="æ¸¸æˆ" scheme="https://aotu.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
      <category term="äº”å­æ£‹" scheme="https://aotu.io/tags/%E4%BA%94%E5%AD%90%E6%A3%8B/"/>
    
  </entry>
  
  <entry>
    <title>Promise å®æˆ˜</title>
    <link href="https://aotu.io/notes/2016/01/08/promise/"/>
    <id>https://aotu.io/notes/2016/01/08/promise/</id>
    <published>2016-01-08T09:05:05.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Promise-æ˜¯ä»€ä¹ˆ"><a href="#Promise-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Promise æ˜¯ä»€ä¹ˆ"></a>Promise æ˜¯ä»€ä¹ˆ</h2><p>Promise æ˜¯æŠ½è±¡å¼‚æ­¥å¤„ç†å¯¹è±¡ä»¥åŠå¯¹å…¶è¿›è¡Œå„ç§æ“ä½œçš„ç»„ä»¶ã€‚ é€šä¿—ç‚¹è®²ï¼ŒPromiseèƒ½è§£å†³ç”±äºå›è°ƒåµŒå¥—å¸¦æ¥çš„æµç¨‹æ§åˆ¶ä¸å¯è¯»æ€§é—®é¢˜ã€‚<br>promise å·²ç»æ˜¯æˆä¸ºæˆ‘ä»¬è§£å†³å›è°ƒç‚¼ç‹±çš„å¸¸ç”¨æ–¹æ¡ˆï¼Œè€Œä¸”å·²ç»å¾—åˆ°å®˜æ–¹æ ‡å‡†æ”¯æŒï¼Œå¦‚æœä½ åˆšåˆšå¼€å§‹ä½¿ç”¨Promiseï¼Œæœ¬æ–‡å°†å¸®åŠ©ä½ äº†è§£å‡ ä¸ªå¸¸è§çš„Promiseçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h2 id="Promise-çš„å†å²"><a href="#Promise-çš„å†å²" class="headerlink" title="Promise çš„å†å²"></a>Promise çš„å†å²</h2><p><a href="https://en.wikipedia.org/wiki/Futures_and_promises" target="_blank" rel="external">æ—©åœ¨1976å¹´å°±æœ‰äººæå‡ºPromise çš„æ¦‚å¿µ</a>ã€‚ä¹‹åçš„è®¡ç®—æœºè¯­è¨€å‘å±•ä¸­ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†ä¸ Promise ç›¸å…³çš„ç‰¹æ€§ã€‚è€Œå¯¹äºJavascriptè¯­è¨€æ¥è¯´ï¼Œæœ€æ—©è®©å¤§å®¶å¹¿æ³›æ¥è§¦çš„ Promise ç›¸å…³çš„åº“æ˜¯ç”± <code>jQuery.Deferred()</code> å¯¹è±¡å®ç°çš„ã€‚éšç€ Promise/A+ æ ‡å‡†è§„å®šäº†ä¸€ç³»åˆ— APIï¼Œå®ç°è¯¥æ ‡å‡†çš„åº“å¦‚é›¨åæ˜¥ç¬‹ç‰ˆæ¶Œç°äº†å‡ºæ¥ï¼Œåœ¨æœ€æ–°çš„ECMAScript 2015ä¸­å·²ç»æä¾›äº†Promiseçš„å†…ç½®å¯¹è±¡ï¼Œæˆä¸ºäº†åŸºç¡€åº“ã€‚  </p>
<h2 id="ä¸€äº›Promiseçš„ä½¿ç”¨åœºæ™¯"><a href="#ä¸€äº›Promiseçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä¸€äº›Promiseçš„ä½¿ç”¨åœºæ™¯"></a>ä¸€äº›Promiseçš„ä½¿ç”¨åœºæ™¯</h2><h3 id="1-åŸç”ŸAPIå‡½æ•°çš„PromiseåŒ–"><a href="#1-åŸç”ŸAPIå‡½æ•°çš„PromiseåŒ–" class="headerlink" title="1.åŸç”ŸAPIå‡½æ•°çš„PromiseåŒ–"></a>1.åŸç”ŸAPIå‡½æ•°çš„PromiseåŒ–</h3><p>å¤§éƒ¨åˆ†åŸç”Ÿçš„APIå‡½æ•°å¹¶ä¸æ”¯æŒPromiseï¼Œè¿˜æ˜¯åŸºäºå›è°ƒæ¥ä½¿ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠä¸€äº›æ–¹æ³•æ”¹ä¸ºè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºå‡½æ•°çš„ Promise åŒ–ã€‚<br>ä¸‹é¢ä¸€ä¸ªä¾‹å­å°†å¯¹å®šæ—¶å™¨<code>setTimeout</code> Promise åŒ–ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params">fn,time</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                fn();</div><div class="line">                resolve();</div><div class="line">            &#125;,time);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.resolve()</div><div class="line">    .then(</div><div class="line">        timer(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'1'</span>)</div><div class="line">        &#125;, <span class="number">1000</span>)</div><div class="line">    )</div><div class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'2'</span>);</div><div class="line">    &#125;);</div><div class="line"><span class="comment">/* </span></div><div class="line">è¾“å‡ºç»“æœ</div><div class="line">1</div><div class="line">2</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>PromiseåŒ–æœ¬è´¨ä¸Šéƒ½å±äºä¸€ç§CurryåŒ–ã€‚CurryåŒ–æ˜¯æŒ‡ï¼Œå°†éœ€è¦ä¼ é€’å¤šå‚æ•°çš„å‡½æ•°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¦‚ä¸Šä»£ç å…ˆé€šè¿‡æ‰§è¡Œ timerå¾—åˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªPromiseï¼Œè¿™æ ·å°±å®Œæˆäº†PromiseåŒ–ã€‚å°†ä¸€äº›åŸºç¡€çš„å‡½æ•°è¿›è¡ŒPromiseåŒ–ï¼Œå¯ä»¥<br>å¤§å¤§å‡å°‘ä¸å¿…è¦çš„ä»£ç ã€‚<br>ä¸‹é¢çš„ä»£ç ï¼Œå°†ä¼šä½“ç°è¿™ç§ä¼˜åŠ¿:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> promise_timer = timer(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'1'</span>)</div><div class="line">&#125;, <span class="number">1000</span>) </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">promise_timer2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">          setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              <span class="built_in">console</span>.log(<span class="string">'1'</span>);</div><div class="line">              resolve();</div><div class="line">          &#125;,<span class="number">1000</span>);</div><div class="line">      &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>å˜é‡<code>promise_timer</code>èµ‹äºˆçš„å‡½æ•°ï¼Œä¸å‡½æ•°<code>promise_timer2</code>æ˜¯ç­‰ä»·çš„ã€‚ å¯ä»¥çœ‹å‡º <code>setTimeout</code> Promise åŒ–ä¹‹åï¼Œä»£ç ç¨‹åºå¯è¯»æ€§æ›´å¼ºï¼Œä»£ç é‡ä¹Ÿå˜å°‘äº†ã€‚</p>
<h3 id="2-Promise-allè§£å†³å¹¶è¡Œä»»åŠ¡"><a href="#2-Promise-allè§£å†³å¹¶è¡Œä»»åŠ¡" class="headerlink" title="2.Promise.allè§£å†³å¹¶è¡Œä»»åŠ¡"></a>2.Promise.allè§£å†³å¹¶è¡Œä»»åŠ¡</h3><p>å½“æŸä¸ªå‡½æ•°éœ€è¦åœ¨ N ä¸ªå›è°ƒéƒ½å®Œæˆæ—¶æ‰æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>Promise.all</code>æ¥æ”¹å–„ä½ çš„ä»£ç ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå›¾ç‰‡å¹¶è¡ŒåŠ è½½çš„ä¾‹å­,å½“æ‰€æœ‰å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œå†å°†æ‰€æœ‰å›¾ç‰‡ä¸€èµ·å±•ç¤ºã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImg</span>(<span class="params">src</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve,reject</span>)=&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</div><div class="line">        img.src = src;</div><div class="line">        img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">           resolve(img);</div><div class="line">        &#125;</div><div class="line">        img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">           reject(err);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showImgs</span>(<span class="params">imgs</span>)</span>&#123; </div><div class="line">  imgs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">img</span>)</span>&#123;</div><div class="line">       <span class="built_in">document</span>.body.appendChild(img);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.all([</div><div class="line">  loadImg(<span class="string">'1.png'</span>), <span class="comment">//åŠ è½½å›¾ç‰‡</span></div><div class="line">  loadImg(<span class="string">'2.png'</span>),</div><div class="line">  loadImg(<span class="string">'3.png'</span>),</div><div class="line">  ...</div><div class="line">]).then(showImgs); <span class="comment">//æ˜¾ç¤ºå›¾ç‰‡</span></div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/adamchuan/promise-1.svg" alt="promise"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>Promise.all</code>ä¸­ä¼ å…¥çš„ Promise æ•°ç»„ï¼Œå„è‡ª resolve ä¹‹åå¾—åˆ°çš„å€¼ï¼Œå°†åˆå¹¶æˆä¸€ä¸ªæ•°ç»„ä¼ å…¥åˆ° then ä¸­çš„æ–¹æ³•ï¼Œä¸”æ•°ç»„ä¸­ resolve å€¼çš„é¡ºåºï¼Œä¸ Promise æ•°ç»„çš„é¡ºåºä¸€è‡´ã€‚</p>
<h3 id="3-Promise-then-çš„é“¾å¼è°ƒç”¨"><a href="#3-Promise-then-çš„é“¾å¼è°ƒç”¨" class="headerlink" title="3.Promise.then çš„é“¾å¼è°ƒç”¨"></a>3.Promise.then çš„é“¾å¼è°ƒç”¨</h3><p>åœ¨è®¸å¤šPromiseç¤ºä¾‹ä¸­éƒ½å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„é“¾å¼è°ƒç”¨çš„ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserInfo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'getUserInfo start'</span>);</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            <span class="keyword">var</span> userInfo = &#123;</div><div class="line">                <span class="attr">name</span> : <span class="string">'adamchuan'</span></div><div class="line">            &#125;;</div><div class="line">            resolve(userinfo);</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'getUserInfo end'</span>);</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGroupInfo</span>(<span class="params">userinfo</span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'getGroupInfo start'</span>);</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            <span class="keyword">var</span> groupInfo = &#123;</div><div class="line">                <span class="attr">name</span> : <span class="string">'jdc'</span></div><div class="line">            &#125;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'getGroupInfo end'</span>);</div><div class="line">            resolve(groupInfo,userinfo);</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTaskInfo</span>(<span class="params">groupInfo,userinfo</span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'getTaskInfo start'</span>);</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="keyword">var</span> taskInfo = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">'rebuild'</span></div><div class="line">        &#125;;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'getTaskInfo end'</span>);</div><div class="line">        resolve();</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="built_in">Promise</span>.resolve();</div><div class="line">      p.then(getUserInfo)</div><div class="line">       .then(getGroupInfo)</div><div class="line">       .then(getTaskInfo);</div><div class="line"></div><div class="line"><span class="comment">/* è¾“å‡ºç»“æœ </span></div><div class="line"> getUserInfo start</div><div class="line"> getUserInfo end</div><div class="line"> getGroupInfo start</div><div class="line"> getGroupInfo end</div><div class="line"> getTaskInfo start</div><div class="line"> getTaskInfo end</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„ç†è§£åˆ°ç¨‹åºæ‰§è¡Œçš„é¡ºåºæ˜¯  </p>
<p><img src="//img.aotu.io/adamchuan/promise-2.svg" alt="promise"></p>
<ol>
<li>å¾—åˆ°userInfo</li>
<li>å¾—åˆ°groupInfo</li>
<li>å¾—åˆ°taskInfo</li>
</ol>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¸€ç‚¹å°çš„æ”¹é€ ï¼Œå°† then ä¸­çš„æ–¹æ³•ä¸å†è¿”å› Promise ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„ä»£ç å°†ä¼šå˜æˆè¿™æ ·:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p = <span class="built_in">Promise</span>.resolve();</div><div class="line">      p.then(getUserInfo)</div><div class="line">       .then(getGroupInfo)</div><div class="line">       .then(getTaskInfo)</div><div class="line">       ...</div><div class="line"></div><div class="line">function getUserInfo()&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'1'</span>);</div><div class="line">   <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'2'</span>);</div><div class="line">        resolve();</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGroupInfo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'3'</span>);</div><div class="line">   <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>);</div><div class="line">        resolve();</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTaskInfo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">'5'</span>);</div><div class="line">   <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'6'</span>);</div><div class="line">        resolve();</div><div class="line">       &#125;,<span class="number">1000</span>);</div><div class="line">   &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* è¾“å‡ºç»“æœ </span></div><div class="line"> getUserInfo start</div><div class="line"> getGroupInfo start</div><div class="line"> getTaskInfo start</div><div class="line"> getUserInfo end</div><div class="line"> getGroupInfo end</div><div class="line"> getTaskInfo end</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å› ä¸ºæ¯æ¬¡è°ƒç”¨ then éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise ï¼Œå¦‚æœ then ä¸­çš„ç”³æ˜çš„æ–¹æ³•æ²¡æœ‰è¿”å›ä¸€ä¸ª Promise ï¼Œé‚£ä¹ˆä¼šé»˜è®¤è¿”å›ä¸€ä¸ªæ–°çš„<br>å¤„äº fulfilled çš„ Promise ï¼Œä¹‹åæ·»åŠ çš„ then ä¸­çš„æ–¹æ³•éƒ½ä¼šç«‹å³æ‰§è¡Œ,æ‰€ä»¥æ‰§è¡Œçš„é¡ºåºå°±å˜æˆè¿™æ ·äº†ï¼š<br><img src="//img.aotu.io/adamchuan/promise-3.png" alt="promise"></p>
<p><em>å½“è¦åœ¨ä½¿ç”¨é“¾å¼ Promise æ—¶ï¼Œè¯·åŠ¡å¿…åœ¨thenä¼ å…¥çš„æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªæ–°çš„ Promiseã€‚</em></p>
<p>å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œresolve ä¼ é€’ç»™ä¸‹ä¸ª then æ–¹æ³•çš„å€¼åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸Šé¢ getTaskInfo æ–¹æ³•ä¸­æ˜¯æ— æ³•è·å–åˆ° userInfo çš„å€¼ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¤šä¸ªå€¼éœ€è¦æ”¾åœ¨ä¸€ä¸ªæ•°æ®é›†åˆï¼ˆ Array , Object , Map , Set ï¼‰ä¸­ä¼ å…¥ä¸‹ä¸ªæ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTaskInfo</span>(<span class="params">groupInfo,userInfo</span>)</span>&#123; <span class="comment">/* userInfoä¸ºundefined */</span></div><div class="line">   <span class="built_in">console</span>.log(groupInfo); <span class="comment">// &#123; name : 'jdc'&#125;</span></div><div class="line">   <span class="built_in">console</span>.log(userInfo);  <span class="comment">// undefined</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="4-ä¸­æ–­æˆ–å–æ¶ˆ-Promise-é“¾"><a href="#4-ä¸­æ–­æˆ–å–æ¶ˆ-Promise-é“¾" class="headerlink" title="4.ä¸­æ–­æˆ–å–æ¶ˆ Promise é“¾"></a>4.ä¸­æ–­æˆ–å–æ¶ˆ Promise é“¾</h3><p>Promise æ ‡å‡†çš„API ä¸­å¹¶æ²¡æœ‰æä¾›ç›¸åº”çš„æ–¹æ³•æ¥ ä¸­æ–­æˆ–è€…å–æ¶ˆ Promise é“¾çš„æ‰§è¡Œï¼Œä¸€äº›åº“ä¸­æä¾›äº†ç±»ä¼¼<code>Promise.break</code>æˆ–è€… <code>Promise.fail</code>çš„æ–¹æ³•æ¥ä¸­æ–­æˆ–å–æ¶ˆ Promise é“¾ã€‚åˆ©ç”¨<code>Promise.catch</code>çš„ç‰¹æ€§æ¥ä¸­æ–­ promiseé“¾ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** ç”¨äºä¸­æ–­çš„ä¿¡å· */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BreakSignal</span> </span>&#123; &#125;</div><div class="line"></div><div class="line"><span class="built_in">Promise</span></div><div class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="comment">// å¼€å§‹.</span></div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span> (wantToBreakHere) &#123;</div><div class="line">            <span class="comment">// æŠ›å‡ºä¸­æ–­ä¿¡å·.</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BreakSignal();</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="comment">// éœ€è¦è·³è¿‡çš„éƒ¨åˆ†.</span></div><div class="line">    &#125;)</div><div class="line">    <span class="comment">// æ¥ä½ä¸­æ–­ä¿¡å·.</span></div><div class="line">    .catch(BreakSignal, () =&gt; &#123; &#125;);</div></pre></td></tr></table></figure>
<p>åªè¦åœ¨ Promise æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¼šç›´æ¥è·³è½¬åˆ° catch ä¸­ã€‚ä½†æ˜¯è¿™æ ·çš„åšæ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œæ— æ³•åŒºåˆ†ç¨‹åºæœ¬èº«çš„å¼‚å¸¸ï¼Œè¿˜æ˜¯æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚æ‰€ä»¥éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªæ ‡è¯†æ ‡é‡ï¼Œæ¥åŒºåˆ†æ˜¯ä¸ºäº†ä¸­æ–­æ‰§è¡Œè¿˜æ˜¯æœ¬èº«çš„ç¨‹åºå¼‚å¸¸ã€‚</p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>åˆç†çš„åˆ©ç”¨ Promise ,å¯ä»¥è®©ä»£ç è„‰ç»œæ›´åŠ çš„æ¸…æ™°æ˜“æ‡‚ï¼Œæµç¨‹æ§åˆ¶ï¼Œå¼‚å¸¸æ•è·ä¹Ÿæ›´åŠ å‡†ç¡®ã€‚å½“ç„¶ä¸ºäº†ä½¿ç”¨ Promise ä¹Ÿè¦ç¼–å†™å¾ˆå¤šé¢å¤–ä»£ç ï¼Œ<br>æƒ³è¦çœŸæ­£çš„è§£å†³å›è°ƒé—®é¢˜è¿˜å¾—æœŸå¾…ES7çš„ <code>async</code> <code>await</code> å…³é”®å­—çš„åˆ°æ¥ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼ŒPromise éƒ½å°†æ˜¯è§£å†³ç¨‹åºæµç¨‹æ§åˆ¶çš„æœ€ä¼˜é€‰æ‹©ä¹‹ä¸€ã€‚</p>
<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ol>
<li><a href="http://www.zuojj.com/archives/1292.html" target="_blank" rel="external">Promise A+</a></li>
<li><a href="http://liubin.org/promises-book/" target="_blank" rel="external">Promiseè¿·ä½ ä¹¦</a></li>
<li><a href="http://alinode.aliyun.com/blog/5" target="_blank" rel="external">Promiseçš„å‰ä¸–ä»Šç”Ÿ</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html" target="_blank" rel="external">jQueryçš„deferredå¯¹è±¡è¯¦è§£</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Promise-æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#Promise-æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;Promise æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;Promise æ˜¯ä»€ä¹ˆ&lt;/h2&gt;&lt;p&gt;Promise æ˜¯æŠ½è±¡å¼‚æ­¥å¤„ç†å¯¹è±¡ä»¥åŠå¯¹å…¶è¿›è¡Œå„ç§æ“ä½œçš„ç»„ä»¶ã€‚ é€šä¿—
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="ES6" scheme="https://aotu.io/tags/ES6/"/>
    
      <category term="Promise" scheme="https://aotu.io/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Chromeå¼€å‘å·¥å…·ä¼˜åŒ–Webåº”ç”¨</title>
    <link href="https://aotu.io/notes/2016/01/07/debug-webapp-with-chrome-devtools/"/>
    <id>https://aotu.io/notes/2016/01/07/debug-webapp-with-chrome-devtools/</id>
    <published>2016-01-07T09:05:05.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬å†™äº†ä¸€ç»„ç‚«(fu)é…·(za)çš„H5åŠ¨æ•ˆåï¼Œå‘ç°åœ¨ç§»åŠ¨ç«¯ä¸Šä¼šå¡é¡¿ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ<br>ç›®å‰å¸‚åœºä¸Šå¤§å¤šæ•°è®¾å¤‡çš„å±å¹•åˆ·æ–°é¢‘ç‡æ˜¯60Hzï¼Œæƒ³è¦ç”¨æˆ·æ»‘åŠ¨é¡µé¢æˆ–è€…æ’­æ”¾åŠ¨ç”»æ²¡æœ‰å¡é¡¿ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“é€Ÿç‡å°±è¦å’Œå±å¹•åˆ·æ–°çš„é¢‘ç‡åŒæ­¥ï¼Œè¾¾åˆ°60fpsã€‚</p>
<p>Chromeå¼€å‘å·¥å…·çš„Timelineé¢æ¿ç›‘æ§äº†webåº”ç”¨è¿è¡Œæ—¶æ‰€æœ‰æ´»åŠ¨æƒ…å†µï¼Œä¸è¿‡å®ƒçš„åŠŸèƒ½å¾ˆå¤šï¼Œå¯¹äºè‹±æ–‡ä¸å¥½çš„ç«¥é‹ï¼Œæœ‰ç‚¹æ— ä»ä¸‹æ‰‹ï¼Œä¸‹é¢ç›´æ¥ä¸Šæ‰‹æ¥ä½¿ç”¨ã€‚</p>
<h2 id="é¦–å…ˆï¼Œå®¡æŸ¥ä¸€ä¸ªé¡µé¢ï¼Œåˆ‡æ¢åˆ°Timelineé¢æ¿ã€‚"><a href="#é¦–å…ˆï¼Œå®¡æŸ¥ä¸€ä¸ªé¡µé¢ï¼Œåˆ‡æ¢åˆ°Timelineé¢æ¿ã€‚" class="headerlink" title="é¦–å…ˆï¼Œå®¡æŸ¥ä¸€ä¸ªé¡µé¢ï¼Œåˆ‡æ¢åˆ°Timelineé¢æ¿ã€‚"></a>é¦–å…ˆï¼Œå®¡æŸ¥ä¸€ä¸ªé¡µé¢ï¼Œåˆ‡æ¢åˆ°Timelineé¢æ¿ã€‚</h2><p><img src="//img.aotu.io/Simbachen/panel.png" alt="Timelineé¢æ¿"></p>
<p>å›¾ä¸­çº¢æ¡†æ ‡å‡ºçš„éƒ¨åˆ†æ˜¯åŠŸèƒ½æ ï¼šä»45åˆ°47ç‰ˆæœ¬ï¼ŒTimelineå·¥å…·è¿ç»­éƒ½æœ‰æ›´æ–°ï¼Œå½“å‰æˆªå›¾çš„ç‰ˆæœ¬å·æ˜¯47.0ï¼›</p>
<blockquote>
<ul>
<li>å¼€å§‹/åœæ­¢è®°å½•ï¼Œæ‰“å¼€Timelineé¢æ¿æ—¶åˆ·æ–°é¡µé¢ä¼šè‡ªåŠ¨å¼€å§‹è®°å½•</li>
<li>æ¸…é™¤å·²æœ‰è®°å½•</li>
<li>è¿‡æ»¤å†…å®¹</li>
<li>å¼ºåˆ¶åƒåœ¾å›æ”¶</li>
<li>è§†å›¾æ¨¡å¼ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸­ç‚¹å‡»åˆ‡æ¢ä¸¤ç§è§†å›¾æ¨¡å¼</li>
<li>æ•è·å†…å®¹é€‰é¡¹ï¼Œé€‰ä¸­æœ€åä¸€é¡¹æˆªå±çš„è¯ä¼šä¿ç•™æ¯å¸§çš„æˆªå›¾ï¼Œè®°å½•æ•°æ®çš„bufferç©ºé—´ä¼šå’Œå¿«è¢«å æ»¡</li>
</ul>
</blockquote>
<h2 id="æ¥ä¸‹æ¥è®°å½•ä¸€æ®µæ—¶é—´çº¿çŠ¶æ€ã€‚"><a href="#æ¥ä¸‹æ¥è®°å½•ä¸€æ®µæ—¶é—´çº¿çŠ¶æ€ã€‚" class="headerlink" title="æ¥ä¸‹æ¥è®°å½•ä¸€æ®µæ—¶é—´çº¿çŠ¶æ€ã€‚"></a>æ¥ä¸‹æ¥è®°å½•ä¸€æ®µæ—¶é—´çº¿çŠ¶æ€ã€‚</h2><p><img src="//img.aotu.io/Simbachen/frames.png" alt="Timelineé¢æ¿"><br>å›¾ä¸­æ²¡è¢«æ ‡å‡ºçš„éƒ¨åˆ†æ˜¯æ•´ä¸ªç›‘æ§è¿‡ç¨‹ä¸­çš„æ•°æ®æ¦‚è§ˆï¼›çº¢æ¡†æ ‡å‡ºçš„éƒ¨åˆ†æœ‰ä¸¤æ ï¼Œä¸Šé¢æ˜¯é€‰ä¸­çš„æ—¶é—´æ®µå†…æ¯ä¸€å¸§çš„æƒ…å†µï¼Œä¸‹é¢æ˜¯å†…å­˜å ç”¨çš„å˜åŒ–ã€‚</p>
<p>æµè§ˆå™¨æ¸²æŸ“çš„é€Ÿç‡è¾¾åˆ°60å¸§/ç§’ï¼Œé‚£ä¹ˆæ¯ä¸€å¸§åªæœ‰1000ms / 60 = 16.67msçš„æ—¶é—´æ¥å“åº”ï¼Œå…¶ä¸­æµè§ˆå™¨åœ¨æ¯ä¸€å¸§è¿˜è¦åšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿è¯æ¯ä¸€å¸§çš„CPU timeåœ¨12mså·¦å³ã€‚</p>
<p>æœ‰çº¢è‰²ä¸‰è§’å½¢è§’æ ‡æ ‡å‡ºçš„è¡¨ç¤ºå½“å‰å¸§æ¶ˆè€—è¿‡å¤šæ—¶é—´<br><img src="//img.aotu.io/Simbachen/frames01.png" alt="Timeline"></p>
<p>ç‚¹å‡»é€‰ä¸­ä¸€å¸§å¯ä»¥çœ‹åˆ°å½“å‰å¸§çš„è¯¦ç»†æƒ…å†µï¼Œå›¾ä¸­æ˜¾ç¤ºï¼Œå½“å‰å¸§çš„æ¸²æŸ“æ¶ˆè€—äº†30.8msï¼Œå¯èƒ½ä¼šé€ æˆå¡é¡¿ã€‚<br>é¥¼å›¾ä¸­å¯èƒ½ä¼šæœ‰äº”ä¸ªé¢œè‰²ï¼š</p>
<blockquote>
<ul>
<li>è“è‰²ï¼š åŠ è½½</li>
<li>é»„è‰²ï¼š è„šæœ¬æ‰§è¡Œ</li>
<li>ç´«è‰²ï¼š æ¸²æŸ“</li>
<li>ç»¿è‰²ï¼š ç»˜åˆ¶</li>
<li>ç°è‰²ï¼š DevToolsä¸æ„ŸçŸ¥çš„æ´»åŠ¨</li>
</ul>
</blockquote>
<p>å›¾ä¸­å¸§å› ä¸ºæ²¡æœ‰åŠ è½½æ´»åŠ¨ï¼Œæ²¡æœ‰è“è‰²åŒºåŸŸã€‚å¯ä»¥çœ‹å‡ºè„šæœ¬æ‰§è¡Œå’Œå¸§ç»˜åˆ¶å æ®äº†å¤§éƒ¨åˆ†é¢ç§¯ï¼Œä¸è¿‡é—®é¢˜å¹¶ä¸åœ¨è¿™é‡Œï¼Œå› ä¸ºå®ƒä»¬æ€»å…±æ‰èŠ±è´¹7.82sã€‚<br>åœ¨Chromeçš„45.0ç‰ˆæœ¬ä¸­ï¼Œé¥¼å›¾é‡Œè¿˜æœ‰ä¸€ç§é¢œè‰²ï¼šç™½è‰²ï¼Œè¡¨ç¤ºåˆ·æ–°å‘¨æœŸé‡Œç©ºé—²çš„æ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œä¸€ç›´åœ¨ç­‰å¾…ç”¨æˆ·çš„å“åº”ï¼Œç›´åˆ°ä¸€ä¸ªäº¤äº’äº‹ä»¶è§¦å‘äº†é¡µé¢è§†å›¾çš„å˜åŒ–ã€‚æœ€æ–°çš„æ›´æ–°é‡Œåœ¨é¥¼å›¾ä¸­å»æ‰äº†ç™½è‰²ï¼ŒåŒºåˆ†ä¸ºCPU timeå’Œå¸§çš„Durationï¼Œæ›´åŠ åˆç†ã€‚è¿™é‡Œå¼•èµ·è§†å›¾æ¸²æŸ“å’Œç»˜åˆ¶å¯èƒ½æœ‰ï¼š</p>
<ol>
<li>ç”¨æˆ·çš„äº¤äº’è¡Œä¸º</li>
<li>å®šæ—¶å™¨è§¦å‘</li>
</ol>
<p>ä½¿ç”¨requestAnimationFrameè¿™ä¸ªå‡½æ•°ï¼Œå°†è„šæœ¬æ‰§è¡Œå’Œæ¸²æŸ“æµç¨‹è”ç³»èµ·æ¥ï¼Œä»¥é¿å…åœ¨æŸä¸€å¸§çš„ä¸­é—´çªç„¶æ‰§è¡Œè„šæœ¬å¯¼è‡´é‡æ–°æ¸²æŸ“å’Œç»˜åˆ¶è€Œæ•´ä¸ªè¿‡ç¨‹ä¸èƒ½åœ¨16mså†…å®Œæˆã€‚</p>
<h2 id="åˆ†æä¸€ä¸ªé—®é¢˜å¸§"><a href="#åˆ†æä¸€ä¸ªé—®é¢˜å¸§" class="headerlink" title="åˆ†æä¸€ä¸ªé—®é¢˜å¸§"></a>åˆ†æä¸€ä¸ªé—®é¢˜å¸§</h2><p><img src="//img.aotu.io/Simbachen/frames02.png" alt="Timeline"></p>
<p>è¿™ä¸€å¸§æ¯”è¾ƒæç«¯ï¼Œä»å›¾ä¸Šçœ‹å°±æ˜¯ç´«è‰²éƒ¨åˆ†èŠ±è´¹æ‰äº†å¤§é‡æ—¶é—´ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»è¿™é‡Œå…¥æ‰‹æ¥ä¼˜åŒ–ä»£ç ï¼Œåœ¨æ­¤ä¹‹å‰å…ˆå¾—äº†è§£ä¸€ä¸‹æµè§ˆå™¨ç»˜åˆ¶å¸§çš„æ•´ä¸ªè¿‡ç¨‹ã€‚å®é™…å¯¼è‡´ç»˜åˆ¶å¸§å¡é¡¿å¯èƒ½æ˜¯å…¶ä¸­ä»»ä½•ä¸€ä¸ªç¯èŠ‚ã€‚</p>
<p><img src="//img.aotu.io/Simbachen/frame-full.jpg" alt="Timeline"></p>
<blockquote>
<ul>
<li>Javascriptï¼š é™¤äº†ä½¿ç”¨Javascritæ¥å®ç°è§†è§‰å˜åŒ–ï¼Œè¿˜æœ‰CSS Animationsã€ Transitionsã€‚</li>
<li>Styleï¼š æ ¹æ®CSSé€‰æ‹©å™¨ï¼Œå¯¹æ¯ä¸ªDOMå…ƒç´ åŒ¹é…å¯¹åº”çš„CSSæ ·å¼ã€‚</li>
<li>Layout: åœ¨ä¸Šä¸€æ­¥ç¡®å®šäº†æ¯ä¸ªDOMå…ƒç´ çš„æ ·å¼è§„åˆ™åï¼Œè¿™ä¸€æ­¥å°±æ˜¯å…·ä½“è®¡ç®—æ¯ä¸ªDOMå…ƒç´ æœ€ç»ˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å¤§å°å’Œä½ç½®ã€‚webé¡µé¢ä¸­å…ƒç´ çš„å¸ƒå±€æ˜¯ç›¸å¯¹çš„ï¼Œå› æ­¤ä¸€ä¸ªå…ƒç´ çš„å¸ƒå±€å‘ç”Ÿå˜åŒ–ï¼Œä¼šè”åŠ¨åœ°å¼•å‘å…¶ä»–å…ƒç´ çš„å¸ƒå±€å‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚çˆ¶å…ƒç´ çš„å®½åº¦å˜åŒ–å¼•å‘å­å…ƒç´ å®½åº¦å˜åŒ–ï¼Œåˆè”åŠ¨çš„å¼•å‘å­™å­å…ƒç´ çš„å®½åº¦å˜åŒ–ã€‚</li>
<li>Paintingï¼š ç»˜åˆ¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¡«å……åƒç´ çš„è¿‡ç¨‹ã€‚åŒ…æ‹¬ç»˜åˆ¶æ–‡å­—ã€é¢œè‰²ã€å›¾åƒã€è¾¹æ¡†å’Œé˜´å½±ç­‰ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªDOMå…ƒç´ æ‰€æœ‰çš„å¯è§†æ•ˆæœã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªç»˜åˆ¶è¿‡ç¨‹æ˜¯åœ¨å¤šä¸ªå±‚ä¸Šå®Œæˆçš„ã€‚</li>
<li>Compositeï¼š ä¸Šä¸€æ­¥çš„ç»˜åˆ¶æ˜¯åœ¨å¤šä¸ªå±‚ä¸Šè¿›è¡Œçš„ï¼Œåœ¨è¿™ä¸€æ­¥ï¼Œæµè§ˆå™¨ä¼šå°†æ‰€æœ‰å±‚æŒ‰ç…§åˆç†çš„é¡ºåºåˆå¹¶æˆä¸€ä¸ªå›¾å±‚ï¼Œç„¶åæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li>
</ul>
</blockquote>
<p>è¯´æ˜ï¼Œä¸Šè¿°è¿‡ç¨‹çš„è§£é‡Šæ€»ç»“æˆ–ç›´æ¥å¼•ç”¨è‡ªè°·æ­Œå¼€å‘è€…æ–‡æ¡£ã€‚</p>
<p>åœ¨ä»¥ä¸Š5ä¸ªè¿‡ç¨‹é‡Œï¼š</p>
<ol>
<li>ä¿®æ”¹DOMå…ƒç´ çš„â€œlayoutâ€(å®½ã€é«˜ã€ä½ç½®)å±æ€§ï¼Œæµè§ˆå™¨ä¼šæ£€æŸ¥å“ªäº›å…ƒç´ éœ€è¦é‡æ–°å¸ƒå±€ï¼Œç„¶åå¯¹é¡µé¢æ¿€å‘ä¸€ä¸ªreflowè¿‡ç¨‹å®Œæˆé‡æ–°å¸ƒå±€ã€‚è¢«reflowçš„å…ƒç´ ï¼Œæ¥ä¸‹æ¥ä¹Ÿä¼šæ¿€å‘ç»˜åˆ¶è¿‡ç¨‹ï¼Œæœ€åæ¿€å‘æ¸²æŸ“å±‚åˆå¹¶è¿‡ç¨‹ï¼Œç”Ÿæˆæœ€åçš„ç”»é¢ã€‚</li>
<li>DOMå…ƒç´ æœ‰ä¸€äº›â€œpaint onlyâ€å±æ€§ï¼Œä¾‹å¦‚èƒŒæ™¯å›¾ç‰‡ã€æ–‡å­—é¢œè‰²ã€é˜´å½±ï¼Œè¿™äº›å±æ€§ä¸ä¼šå½±å“é¡µé¢çš„å¸ƒå±€ï¼Œå› æ­¤æµè§ˆå™¨ä¼šåœ¨å®Œæˆæ ·å¼è®¡ç®—ä¹‹åï¼Œè·³è¿‡å¸ƒå±€è¿‡ç¨‹ï¼Œåªåšç»˜åˆ¶å’Œæ¸²æŸ“å±‚åˆå¹¶è¿‡ç¨‹ã€‚</li>
<li>è¿˜æœ‰ä¸€äº›CSSå±æ€§æ—¢ä¸éœ€è¦é‡æ–°å¸ƒå±€ä¹Ÿä¸éœ€è¦é‡æ–°ç»˜åˆ¶ï¼Œä¾‹å¦‚ï¼Œtransformã€opacityï¼ˆç›®å‰ï¼Œåªæœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼‰ï¼Œæµè§ˆå™¨ä¼šåœ¨å®Œæˆæ ·å¼è®¡ç®—ä¹‹åï¼Œç›´æ¥åšæ¸²æŸ“å±‚åˆå¹¶ã€‚</li>
<li>ç”¨translateZ(0)å±æ€§æŠŠåŠ¨ç”»å…ƒç´ æå‡åˆ°å•ç‹¬çš„æ¸²æŸ“å±‚ä¸­ï¼ˆæˆ‘ä»¬å¸¸è¯´çš„å¯ç”¨3DåŠ é€Ÿï¼‰ã€‚</li>
</ol>
<p>å¯¹äºæ»šå±å’ŒåŠ¨ç”»ï¼Œæœ€ç†æƒ³çš„å°±æ˜¯åªä½¿ç”¨transformå’Œopacityæ¥å®ç°è§†è§‰å˜åŒ–æ•ˆæœï¼Œå¹¶ä¸”éµå¾ªç¬¬å››ç‚¹ã€‚</p>
<h2 id="ç‚¹å‡»åˆ‡æ¢è§†å›¾æ¨¡å¼ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚"><a href="#ç‚¹å‡»åˆ‡æ¢è§†å›¾æ¨¡å¼ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚" class="headerlink" title="ç‚¹å‡»åˆ‡æ¢è§†å›¾æ¨¡å¼ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚"></a>ç‚¹å‡»åˆ‡æ¢è§†å›¾æ¨¡å¼ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚</h2><p><img src="//img.aotu.io/Simbachen/frames03.png" alt="Timeline"></p>
<p>è¿™æ˜¯ä¸€ä¸ªçŸ¥åçº¿ä¸Šç½‘ç«™çš„é¦–é¡µï¼Œè¿™é‡Œå‘ç”Ÿäº†æ»šå±è§¦å‘åŠ è½½å†…å®¹ï¼Œå¯¼è‡´DOMç»“æ„å˜åŒ–ï¼Œå¼•å‘äº†å¤§é‡å†…å®¹çš„é‡ç»˜å’Œæ¸²æŸ“ï¼Œå¹¶ä¸”é¡µé¢æ—§çš„å†…å®¹æ²¡æœ‰å›æ”¶ï¼ŒèŠ‚ç‚¹è¾ƒå¤šï¼Œæ˜æ˜¾çš„æ„Ÿè§‰åˆ°æ»šå±çš„æ—¶å€™æœ‰å¡é¡¿æ„Ÿã€‚å¯¹äºè¿™ä¸ªåº”ç”¨æŒ‰ç…§ä¸Šè¿°çš„æ€è·¯æ¥ä¼˜åŒ–ï¼Œåœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿè®¸ä¼šé‡åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="//img.aotu.io/Simbachen/frames04.png" alt="Timeline"></p>
<p>è¿™æ˜¯å¦ä¸€ä¸ªdemoé¡µé¢ï¼Œæœ‰æ•°åƒä¸ªèŠ‚ç‚¹ç»„æˆï¼Œç”¨ä»¥æ¨¡æ‹Ÿæ— é™æ‡’åŠ è½½æ•°æ®çš„æƒ…å†µï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸Šåº”ç”¨äº†å¾ªç¯çš„css3åŠ¨ç”»ã€‚å…¶å®ƒçš„éƒ½ä¸ä¼šæ”¹å˜ã€‚ä¸ºäº†å°†æœ‰åŠ¨ç”»çš„èŠ‚ç‚¹ç‹¬ç«‹åˆ°ä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“å±‚ä¸­ï¼Œæˆ‘å¯¹å®ƒåº”ç”¨äº†translateZ(0)ã€‚æœ¬ä»¥ä¸ºå¤§åŠŸå‘Šæˆï¼Œç»“æœåœ¨æ»šå±çš„æ—¶å€™å‘ç°éå¸¸å¡é¡¿ã€‚äºæ˜¯å°±æœ‰äº†ä¸Šå›¾ï¼Œå¹³å‡æ¯å¸§çš„æ¸²æŸ“éƒ½æ¶ˆè€—æ‰äº†200mså·¦å³ï¼Œä»Timelineç›‘æ§æ•°æ®ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­Composite Layersè¿™ä¸ªè¿‡ç¨‹è€—è´¹äº†å¤§é‡æ—¶é—´ã€‚é‚£ä¹ˆç›´æ¥æŸ¥çœ‹layerçŠ¶æ€ï¼š</p>
<p><img src="//img.aotu.io/Simbachen/frames05.png" alt="Timeline"></p>
<p>å†çœ‹å®˜æ–¹æ–‡æ¡£çš„æç¤ºï¼šç”±äºæ¯ä¸ªæ¸²æŸ“å±‚çš„çº¹ç†éƒ½éœ€è¦ä¸Šä¼ åˆ°GPUå¤„ç†ï¼Œè¿‡å¤šçš„æ¸²æŸ“å±‚æ¥å¸¦çš„å¼€é”€è€Œå¯¹é¡µé¢æ¸²æŸ“æ€§èƒ½äº§ç”Ÿçš„å½±å“ï¼Œç”šè‡³è¿œè¿œè¶…è¿‡äº†å®ƒåœ¨æ€§èƒ½æ”¹å–„ä¸Šå¸¦æ¥çš„å¥½å¤„ã€‚</p>
<p>å®é™…ä¸Šé¡µé¢é‡Œå¹¶æ²¡æœ‰ä¸»åŠ¨é€šè¿‡translateZå±æ€§æ¥ç‹¬ç«‹æ›´å¤šçš„å±‚ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™æ˜¯è§¦å‘äº†æµè§ˆå™¨çš„ä¸€ä¸ªâ€œbugâ€ï¼Œæœ€æ–°ç‰ˆæœ¬çš„chromeä»ç„¶ä¼šè§¦å‘è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡æœ€æ–°ç‰ˆæœ¬çš„iosé‡ŒSafariå·²ç»ä¸ä¼šè§¦å‘è¿™ä¸ªé—®é¢˜äº†ã€‚è‡³äºä»€ä¹ˆæƒ…å†µä¼šè§¦å‘æµè§ˆå™¨å»åˆ›å»ºä¸€ä¸ªç‹¬ç«‹å±‚æ¥æ¸²æŸ“å…ƒç´ ï¼Œä¾‹å¦‚æ‹¥æœ‰3DCSSå±æ€§çš„å…ƒç´ ã€ä½¿ç”¨åŠ é€Ÿè§†é¢‘è§£ç çš„å…ƒç´ ç­‰ï¼Œå¯¹è¿™ä¸ªé—®é¢˜è¿™é‡Œå°±ä¸å†è¯¦è¿°ã€‚</p>
<p>å¦‚æœæ‰‹åŠ¨çš„å°†å¤§é‡çš„å±‚ç‹¬ç«‹å‡ºæ¥æ¸²æŸ“ï¼Œå¯¼è‡´GPUç½¢å·¥ï¼Œæˆ–æ˜¯ä»»ç”±ä»–ä»¬å¯¼è‡´CPUç½¢å·¥ï¼Œéƒ½ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œä¸è¿‡æœ‰äº†Timelineå·¥å…·ï¼Œæˆ‘ä»¬å°±èƒ½æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œä¸€ä¸€å»åˆ†æè§£å†³äº†ã€‚</p>
<h2 id="å‚è€ƒæ–‡æ¡£ï¼š"><a href="#å‚è€ƒæ–‡æ¡£ï¼š" class="headerlink" title="å‚è€ƒæ–‡æ¡£ï¼š"></a>å‚è€ƒæ–‡æ¡£ï¼š</h2><p><a href="https://developers.google.com/web/fundamentals/performance" target="_blank" rel="external">https://developers.google.com/web/fundamentals/performance</a><br><a href="https://developer.chrome.com/devtools/docs/timeline" target="_blank" rel="external">https://developer.chrome.com/devtools/docs/timeline</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å½“æˆ‘ä»¬å†™äº†ä¸€ç»„ç‚«(fu)é…·(za)çš„H5åŠ¨æ•ˆåï¼Œå‘ç°åœ¨ç§»åŠ¨ç«¯ä¸Šä¼šå¡é¡¿ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ&lt;br&gt;ç›®å‰å¸‚åœºä¸Šå¤§å¤šæ•°è®¾å¤‡çš„å±å¹•åˆ·æ–°é¢‘ç‡æ˜¯60Hzï¼Œæƒ³è¦ç”¨æˆ·æ»‘åŠ¨é¡µé¢æˆ–è€…æ’­æ”¾åŠ¨ç”»æ²¡æœ‰å¡é¡¿ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“é€Ÿç‡å°±è¦å’Œå±å¹•åˆ·æ–°çš„é¢‘ç‡åŒæ­¥ï¼Œè¾¾åˆ°60fpsã€‚&lt;/p&gt;
&lt;p&gt;Chromeå¼€å‘å·¥å…·çš„Tim
    
    </summary>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://aotu.io/cates/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="chrome" scheme="https://aotu.io/tags/chrome/"/>
    
      <category term="DevTool" scheme="https://aotu.io/tags/DevTool/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Githubçš„webhooksè¿›è¡Œç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½²</title>
    <link href="https://aotu.io/notes/2016/01/07/auto-deploy-website-by-webhooks-of-github/"/>
    <id>https://aotu.io/notes/2016/01/07/auto-deploy-website-by-webhooks-of-github/</id>
    <published>2016-01-07T09:05:05.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¾ˆå¤šç å†œéƒ½ç©è¿‡äº†<code>Git</code>ï¼Œå¦‚æœå¯¹<code>Git</code>åªæ˜¯ä¸€çŸ¥åŠè§£ï¼Œå¯ä»¥ç§»æ­¥<code>LV</code>å†™çš„ <a href="http://aotu.io/notes/2015/11/17/Git-Commands/">GITå¸¸ç”¨æ“ä½œæ€»ç»“</a>ï¼Œä¸‹é¢ä»‹ç»åˆ°çš„ä¸€äº›å…³äº <code>Git</code> çš„æ¦‚å¿µå°±ä¸å†èµ˜è¿°ã€‚</p>
<p>ä¸ºå•¥æƒ³å†™è¿™ç¯‡æ–‡ç« ï¼Ÿä¸»è¦æ˜¯å› ä¸ºéƒ¨é—¨æœåŠ¡å™¨å› ä¸ºå®‰å…¨æ€§åŸå› ä¸å…è®¸<code>SCP</code>ä¸Šä¼ æ–‡ä»¶è¿›è¡Œåº”ç”¨éƒ¨ç½²ï¼Œç„¶åæœ‰ä¸€äº›åº”ç”¨æ˜¯æ”¾åœ¨Githubä¸Šçš„ï¼Œç„¶åéƒ¨ç½²åº”ç”¨çš„æ­¥éª¤å°±å˜æˆï¼š</p>
<p>1.git clone githubé¡¹ç›® æœ¬åœ°ç›®å½•<br>2.é…ç½®ä¸€ä¸‹åº”ç”¨çš„pm2.jsonå¹¶reload<br>3.Nginxé…ç½®ä¸€ä¸‹åå‘ä»£ç†å¹¶restart</p>
<p>å½“ç„¶å¦‚æœåªæ˜¯ä¸€æ¬¡æ€§éƒ¨ç½²ä¸Šå»å°±ä¸å†ä¿®æ”¹çš„è¯å¹¶æ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯è¦æ˜¯é¡¹ç›®æŒç»­æ€§ä¿®æ”¹è¿­ä»£çš„è¯ï¼Œå°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å°±åœ¨ä¸æ–­çš„é‡å¤ç€ä¸Šé¢çš„æ­¥éª¤ã€‚ä½œä¸ºä¸€ä¸ªç å†œï¼Œæ€ä¹ˆå…è®¸ä¸æ–­çš„é‡å¤åŒæ ·çš„å·¥ä½œï¼Œäºæ˜¯<code>Github webhooks</code>é—ªäº®ç™»åœºã€‚</p>
<a id="more"></a>
<h2 id="å…³äºGithub-webhooks"><a href="#å…³äºGithub-webhooks" class="headerlink" title="å…³äºGithub webhooks"></a>å…³äºGithub webhooks</h2><p>è®©æˆ‘ä»¬çœ‹çœ‹ <a href="https://developer.github.com/webhooks/" target="_blank" rel="external">å®˜æ–¹</a> å…³äºGithub webhooksçš„è§£é‡Šï¼š</p>
<blockquote>
<p>Webhooks allow you to build or set up integrations which subscribe to certain events on GitHub.com.</p>
</blockquote>
<p>æç‚¼å‡ºæ¥å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»æ˜¯Githubä¸Šé¢çš„é¡¹ç›®</li>
<li>è®¢é˜…äº†ç¡®å®šçš„äº‹ä»¶ï¼ˆåŒ…æ‹¬push/pullç­‰å‘½ä»¤ï¼‰</li>
<li>è‡ªåŠ¨è§¦å‘</li>
</ul>
<p>åˆšå¥½ç¬¦åˆäº†è¿™å‡ ä¸ªæ¡ä»¶ï¼Œé‚£æ¥ä¸‹æ¥å°±çœ‹çœ‹å¦‚ä½•è¿›è¡Œ<code>ç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½²</code>ï¼Œä¸»è¦ä¼šä»ä¸‹é¢å‡ ç‚¹æ¥è®²è§£ï¼š</p>
<p>1.è‡ªåŠ¨åŒ–<code>shell</code>è„šæœ¬<br>2.æœåŠ¡ç«¯å®ç°<br>3.é…ç½®<code>github webhooks</code></p>
<h2 id="è‡ªåŠ¨åŒ–è„šæœ¬"><a href="#è‡ªåŠ¨åŒ–è„šæœ¬" class="headerlink" title="è‡ªåŠ¨åŒ–è„šæœ¬"></a>è‡ªåŠ¨åŒ–è„šæœ¬</h2><p>æˆ‘ä¹‹å‰ç¿»è¯‘è¿‡ä¸€ç¯‡æ–‡ç«  <a href="http://aotu.io/notes/2015/12/23/building-command-line-tools-with-node-js/">ä½¿ç”¨Node.JSåˆ›å»ºå‘½ä»¤è¡Œè„šæœ¬å·¥å…·</a>ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨çš„è‡ªåŠ¨åŒ–è„šæœ¬ç›´æ¥ç”¨ <code>shell</code> æ¥å®ç°ï¼Œå‡è®¾åç§°ä¸º<code>auto_build.sh</code>ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#! /bin/bash</span></div><div class="line"></div><div class="line">SITE_PATH=<span class="string">'/export/Data/aotu.jd.com/index/cnt1992.github.io'</span></div><div class="line">USER=<span class="string">'admin'</span></div><div class="line">USERGROUP=<span class="string">'admin'</span></div><div class="line"></div><div class="line"><span class="built_in">cd</span> <span class="variable">$SITE_PATH</span></div><div class="line">git reset --hard origin/master</div><div class="line">git clean <span class="_">-f</span></div><div class="line">git pull</div><div class="line">git checkout master</div><div class="line">chown -R <span class="variable">$USER</span>:<span class="variable">$USERGROUP</span> <span class="variable">$SITE_PATH</span></div></pre></td></tr></table></figure>
<p><strong>Note:</strong> åœ¨æ‰§è¡Œä¸Šé¢<code>shell</code>è„šæœ¬ä¹‹å‰æˆ‘ä»¬å¿…é¡»ç¬¬ä¸€æ¬¡æ‰‹åŠ¨<code>git clone</code>é¡¹ç›®è¿›å»ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone githubè¿œç¨‹é¡¹ç›® /export/Data/aotu<span class="selector-class">.jd</span><span class="selector-class">.com</span>/index/cnt1992<span class="selector-class">.github</span><span class="selector-class">.io</span></div></pre></td></tr></table></figure>
<blockquote>
<p>shellè„šæœ¬å…¶å®å°±è·Ÿç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ä¸€æ ·ï¼Œç±»ä¼¼äºwindowsä¸‹é¢çš„BATæ‰¹å¤„ç†å‘½ä»¤ï¼Œæ›´å¤šè¯¦ç»†å¯ä»¥æŸ¥é˜…èµ„æ–™ã€‚</p>
</blockquote>
<h2 id="æœåŠ¡ç«¯å®ç°"><a href="#æœåŠ¡ç«¯å®ç°" class="headerlink" title="æœåŠ¡ç«¯å®ç°"></a>æœåŠ¡ç«¯å®ç°</h2><p><code>Github webhooks</code>éœ€è¦è·Ÿæˆ‘ä»¬çš„æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œç¡®ä¿æ˜¯å¯ä»¥æ¨é€åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¼šå‘é€ä¸€ä¸ªå¸¦æœ‰<code>X-Hub-Signature</code>çš„<code>POST</code>è¯·æ±‚ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ç›´æ¥ç”¨ç¬¬ä¸‰æ–¹çš„åº“<a href="https://github.com/rvagg/github-webhook-handler" target="_blank" rel="external">github-webhook-handler</a>æ¥æ¥æ”¶å‚æ•°å¹¶ä¸”åšç›‘å¬äº‹ä»¶çš„å¤„ç†ç­‰å·¥ä½œã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨<code>shell</code>è„šæœ¬çš„åŒçº§ç›®å½•ä¸‹é¢æ‰§è¡Œä¸‹é¢å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ª<code>package.json</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init <span class="_">-f</span></div></pre></td></tr></table></figure>
<p>ç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ä¸Šé¢æåˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -S github-webhook-handler</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥åˆ›å»ºæˆ‘ä»¬çš„æœåŠ¡ä¸»å…¥å£æ–‡ä»¶<code>index.js</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch index.js</div></pre></td></tr></table></figure>
<p>ç´§æ¥ç€å‚è€ƒ<code>github-webhook-handler</code>çš„<code>demo</code>ç¼–è¾‘æˆ‘ä»¬çš„<code>index.js</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">var</span> spawn = <span class="built_in">require</span>(<span class="string">'child_process'</span>).spawn;</div><div class="line"><span class="keyword">var</span> createHandler = <span class="built_in">require</span>(<span class="string">'github-webhook-handler'</span>);</div><div class="line"></div><div class="line"><span class="comment">// ä¸‹é¢å¡«å†™çš„myscrectè·Ÿgithub webhooksé…ç½®ä¸€æ ·ï¼Œä¸‹ä¸€æ­¥ä¼šè¯´ï¼›pathæ˜¯æˆ‘ä»¬è®¿é—®çš„è·¯å¾„</span></div><div class="line"><span class="keyword">var</span> handler = createHandler(&#123; <span class="attr">path</span>: <span class="string">'/auto_build'</span>, <span class="attr">secret</span>: <span class="string">''</span> &#125;);</div><div class="line"></div><div class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  handler(req, res, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">    res.statusCode = <span class="number">404</span>;</div><div class="line">    res.end(<span class="string">'no such location'</span>);</div><div class="line">  &#125;)</div><div class="line">&#125;).listen(<span class="number">6666</span>);</div><div class="line"></div><div class="line">handler.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.error(<span class="string">'Error:'</span>, err.message)</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// ç›‘å¬åˆ°pushäº‹ä»¶çš„æ—¶å€™æ‰§è¡Œæˆ‘ä»¬çš„è‡ªåŠ¨åŒ–è„šæœ¬</span></div><div class="line">handler.on(<span class="string">'push'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Received a push event for %s to %s'</span>,</div><div class="line">    event.payload.repository.name,</div><div class="line">    event.payload.ref);</div><div class="line"></div><div class="line">  runCommand(<span class="string">'sh'</span>, [<span class="string">'./auto_build.sh'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"> txt </span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(txt);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rumCommand</span>(<span class="params"> cmd, args, callback </span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> child = spawn( cmd, args );</div><div class="line">    <span class="keyword">var</span> response = <span class="string">''</span>;</div><div class="line">    child.stdout.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> buffer </span>)</span>&#123; resp += buffer.toString(); &#125;);</div><div class="line">    child.stdout.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; callback( resp ) &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ç”±äºæˆ‘ä»¬ä¸éœ€è¦ç›‘å¬issuesï¼Œæ‰€ä»¥ä¸‹é¢ä»£ç æ³¨é‡Šæ‰</span></div><div class="line"><span class="comment">//  handler.on('issues', function (event) &#123;</span></div><div class="line"><span class="comment">//    console.log('Received an issue event for %s action=%s: #%d %s',</span></div><div class="line"><span class="comment">//      event.payload.repository.name,</span></div><div class="line"><span class="comment">//      event.payload.action,</span></div><div class="line"><span class="comment">//      event.payload.issue.number,</span></div><div class="line"><span class="comment">//      event.payload.issue.title)</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ç„¶ååˆ©ç”¨nodeç®¡ç†å·¥å…·è·‘èµ·æ¥æœåŠ¡ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>pm2</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pm2 start index.js</div></pre></td></tr></table></figure>
<p>åˆ°è¿™ä¸€æ­¥æœåŠ¡å·²ç»è·‘èµ·æ¥äº†ï¼Œä½†æ˜¯å¯¹å¤–ç½‘å¹¶ä¸èƒ½ç›´æ¥è®¿é—®åˆ°ï¼Œæ‰€ä»¥è¿˜éœ€è¦é…ç½®ä¸€ä¸‹<code>Nginx</code>åšä¸€ä¸‹åå‘ä»£ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Â·Â·Â·</div><div class="line">server &#123;</div><div class="line">    listen <span class="number">80</span>;</div><div class="line">    server_name aotu.jd.com;</div><div class="line"></div><div class="line">    Â·Â·Â·</div><div class="line">    location /auto_build &#123;</div><div class="line">        proxy_pass http:<span class="comment">//127.0.0.1:6666;</span></div><div class="line">    &#125;</div><div class="line">    Â·Â·Â·</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>OKï¼Œåˆ°è¿™é‡Œæ•´ä¸ªæœåŠ¡å·²ç»æ­å»ºå®Œæˆï¼Œä¸‹ä¸€æ­¥å°±åªéœ€è¦é…ç½®<code>Github webhooks</code>ã€‚</p>
<h2 id="é…ç½®github-webhooks"><a href="#é…ç½®github-webhooks" class="headerlink" title="é…ç½®github webhooks"></a>é…ç½®<code>github webhooks</code></h2><p>æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„<code>Github</code>ä¸Šé¢æœ€å³è¾¹æœ‰ä¸€ä¸ª<code>Settings</code>çš„Tabï¼Œæ‰¾åˆ°<code>Webhooks &amp; services</code>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="//img.aotu.io/cnt1992/webhooks.png" alt="Github Webhooks"></p>
<p>ç„¶åç‚¹å‡»æ–°å»ºï¼Œè¾“å…¥<code>Payload URL</code>è·Ÿ<code>Secret</code>ï¼Œç¡®å®šå³å¯ã€‚</p>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>ç»‘å®šæˆåŠŸä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¯•è¯•æäº¤ä¸€ä¸‹ä»£ç ï¼Œç„¶åæ¥åˆ°<code>Github</code>çœ‹çœ‹æ˜¯å¦è‡ªåŠ¨è§¦å‘äº†æ¥å£ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="//img.aotu.io/cnt1992/webhooks-show.png" alt="Github Webhooksæ¥å£è§¦å‘"></p>
<p>ç„¶åéšä¾¿é€‰æ‹©ä¸€ä¸ªç‚¹å‡»ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°<code>200</code>çš„å“åº”ï¼š</p>
<p><img src="//img.aotu.io/cnt1992/webhook-success.png" alt="Github Webhooksæ¥å£è§¦å‘"></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ä¸Šé¢å°±æ˜¯åˆ©ç”¨<code>Github webhooks</code>è¿›è¡Œç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½²çš„å…¨éƒ¨å†…å®¹äº†ï¼Œä¸éš¾å‘ç°å…¶å®è¿™é¡¹æŠ€æœ¯è¿˜æ˜¯æœ‰å±€é™æ€§çš„ï¼Œé‚£å°±æ˜¯ä¾èµ–äº<code>github</code>ï¼Œä¸€èˆ¬æˆ‘ä»¬é€‰æ‹©çš„éƒ½æ˜¯å…è´¹githubè´¦å·ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½å¯¹å¤–ï¼Œä¸€äº›æ•æ„Ÿé¡¹ç›®æ˜¯ä¸é€‚åˆæ”¾ç½®ä¸Šå»çš„ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å°±è€ƒè™‘è¿™ä¸ªç»„é‡ŒåŒäº‹æ¨èçš„ <a href="http://backup.github.io/backup/v4/" target="_blank" rel="external">backup</a>ï¼Œè‡ªå·±è¿˜æ²¡è¯•ç”¨ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£äº†è§£ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¾ˆå¤šç å†œéƒ½ç©è¿‡äº†&lt;code&gt;Git&lt;/code&gt;ï¼Œå¦‚æœå¯¹&lt;code&gt;Git&lt;/code&gt;åªæ˜¯ä¸€çŸ¥åŠè§£ï¼Œå¯ä»¥ç§»æ­¥&lt;code&gt;LV&lt;/code&gt;å†™çš„ &lt;a href=&quot;http://aotu.io/notes/2015/11/17/Git-Commands/&quot;&gt;GITå¸¸ç”¨æ“ä½œæ€»ç»“&lt;/a&gt;ï¼Œä¸‹é¢ä»‹ç»åˆ°çš„ä¸€äº›å…³äº &lt;code&gt;Git&lt;/code&gt; çš„æ¦‚å¿µå°±ä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºå•¥æƒ³å†™è¿™ç¯‡æ–‡ç« ï¼Ÿä¸»è¦æ˜¯å› ä¸ºéƒ¨é—¨æœåŠ¡å™¨å› ä¸ºå®‰å…¨æ€§åŸå› ä¸å…è®¸&lt;code&gt;SCP&lt;/code&gt;ä¸Šä¼ æ–‡ä»¶è¿›è¡Œåº”ç”¨éƒ¨ç½²ï¼Œç„¶åæœ‰ä¸€äº›åº”ç”¨æ˜¯æ”¾åœ¨Githubä¸Šçš„ï¼Œç„¶åéƒ¨ç½²åº”ç”¨çš„æ­¥éª¤å°±å˜æˆï¼š&lt;/p&gt;
&lt;p&gt;1.git clone githubé¡¹ç›® æœ¬åœ°ç›®å½•&lt;br&gt;2.é…ç½®ä¸€ä¸‹åº”ç”¨çš„pm2.jsonå¹¶reload&lt;br&gt;3.Nginxé…ç½®ä¸€ä¸‹åå‘ä»£ç†å¹¶restart&lt;/p&gt;
&lt;p&gt;å½“ç„¶å¦‚æœåªæ˜¯ä¸€æ¬¡æ€§éƒ¨ç½²ä¸Šå»å°±ä¸å†ä¿®æ”¹çš„è¯å¹¶æ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯è¦æ˜¯é¡¹ç›®æŒç»­æ€§ä¿®æ”¹è¿­ä»£çš„è¯ï¼Œå°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å°±åœ¨ä¸æ–­çš„é‡å¤ç€ä¸Šé¢çš„æ­¥éª¤ã€‚ä½œä¸ºä¸€ä¸ªç å†œï¼Œæ€ä¹ˆå…è®¸ä¸æ–­çš„é‡å¤åŒæ ·çš„å·¥ä½œï¼Œäºæ˜¯&lt;code&gt;Github webhooks&lt;/code&gt;é—ªäº®ç™»åœºã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Github" scheme="https://aotu.io/tags/Github/"/>
    
      <category term="webhooks" scheme="https://aotu.io/tags/webhooks/"/>
    
  </entry>
  
  <entry>
    <title>CSS3åŠ¨ç”»å®è·µ</title>
    <link href="https://aotu.io/notes/2016/01/04/css3-animation/"/>
    <id>https://aotu.io/notes/2016/01/04/css3-animation/</id>
    <published>2016-01-04T07:58:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»"><a href="#éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»" class="headerlink" title="éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»"></a>éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»</h2><p>éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»ä¸€èˆ¬æœ‰<strong>è¡¥é—´åŠ¨ç”»ï¼ˆåˆå«â€œå…³é”®å¸§åŠ¨ç”»â€ï¼‰</strong>å’Œ<strong>é€å¸§åŠ¨ç”»</strong>ä¸¤ç§ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»ï¼š</p>
<ol>
<li><p>è¡¥é—´åŠ¨ç”»/å…³é”®å¸§åŠ¨ç”»ï¼š<br> å¸¸ç”¨äºå®ç°ä½ç§»ã€é¢œè‰²ï¼ˆé€æ˜åº¦ï¼‰ã€å¤§å°ã€æ—‹è½¬ã€å€¾æ–œç­‰å˜åŒ–ã€‚ä¸€èˆ¬æœ‰<code>Transitions</code>å’Œ<code>Keyframes animation</code>ä¸¤ç§æ–¹æ³•å®ç°è¡¥é—´åŠ¨ç”»ã€‚<br> <strong>Transitionsï¼š</strong>ç”¨äºå®ç°ç®€å•çš„åŠ¨ç”»ï¼Œåªæœ‰èµ·å§‹ä¸¤å¸§è¿‡æ¸¡ã€‚å¤šç”¨äºé¡µé¢çš„äº¤äº’æ“ä½œï¼Œä½¿äº¤äº’æ•ˆæœæ›´ç”ŸåŠ¨æ´»æ³¼ã€‚</p>
<blockquote>
<p>CSSçš„<code>transition</code>å…è®¸CSSçš„å±æ€§å€¼åœ¨ä¸€å®šçš„æ—¶é—´åŒºé—´å†…å¹³æ»‘åœ°è¿‡æ¸¡ã€‚<br>è¿™ç§æ•ˆæœå¯ä»¥åœ¨é¼ æ ‡å•å‡»ã€è·å¾—ç„¦ç‚¹ã€è¢«ç‚¹å‡»æˆ–å¯¹å…ƒç´ ä»»ä½•æ”¹å˜ä¸­è§¦å‘ï¼Œå¹¶åœ†æ»‘åœ°ä»¥åŠ¨ç”»æ•ˆæœæ”¹å˜CSSçš„å±æ€§å€¼ã€‚</p>
</blockquote>
<p> <strong>Keyframes animationï¼š</strong>ç”¨äºå®ç°è¾ƒä¸ºå¤æ‚çš„åŠ¨ç”»ï¼Œä¸€èˆ¬å…³é”®å¸§è¾ƒå¤šã€‚</p>
<blockquote>
<p>è®¾ç½®åŠ¨ç”»çš„å…³é”®å¸§è§„åˆ™ã€‚<br><code>animation</code>çš„<code>timing-function</code>è®¾ç½®ä¸º<code>ease</code>ã€<code>linear</code>æˆ–<code>cubic-bezier</code>ï¼Œå®ƒä¼šåœ¨æ¯ä¸ªå…³é”®å¸§ä¹‹é—´æ’å…¥è¡¥é—´åŠ¨ç”»ï¼Œäº§ç”Ÿå…·æœ‰è¿è´¯æ€§çš„åŠ¨ç”»ã€‚   </p>
</blockquote>
</li>
<li><p>é€å¸§åŠ¨ç”»ï¼š</p>
<blockquote>
<p>animationçš„<code>timing-function</code>é»˜è®¤å€¼ä¸º<code>ease</code>ï¼Œå®ƒä¼šåœ¨æ¯ä¸ªå…³é”®å¸§ä¹‹é—´æ’å…¥è¡¥é—´åŠ¨ç”»ï¼Œæ‰€ä»¥åŠ¨ç”»æ•ˆæœæ˜¯è¿è´¯æ€§çš„ã€‚<br>é™¤äº†<code>ease</code>ã€<code>linear</code>ã€<code>cubic-bezier</code>ä¹‹ç±»çš„è¿‡æ¸¡å‡½æ•°éƒ½ä¼šä¸ºå…¶æ’å…¥è¡¥é—´ã€‚<br>æœ‰äº›æ•ˆæœä¸éœ€è¦è¡¥é—´ï¼Œåªéœ€è¦å…³é”®å¸§ä¹‹é—´çš„è·³è·ƒï¼Œè¿™æ—¶åº”è¯¥ä½¿ç”¨<code>steps</code>è¿‡æ¸¡æ–¹å¼ã€‚</p>
</blockquote>
<p> æ›´å¤šè¯¦ç»†ç”¨æ³•è¯·æŸ¥çœ‹ï¼š<a href="http://www.cnblogs.com/aaronjs/p/4642015.html" target="_blank" rel="external">ã€Šæ·±å…¥ç†è§£CSS3 Animation å¸§åŠ¨ç”»ã€‹</a>ã€‚<br> é€å¸§åŠ¨ç”»å¯ç”¨äº<strong>loadingåŠ¨ç”»</strong>ï¼Œä½†æ›´å¤šçš„ç”¨äº<strong>Spriteç²¾çµåŠ¨ç”»ï¼ˆäººç‰©è¿åŠ¨ï¼‰</strong>ã€‚ç²¾çµåŠ¨ç”»æŠŠæ‰€æœ‰å¸§éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œé€šè¿‡CSS3çš„<code>animation</code>æ§åˆ¶<code>background-position</code>ã€‚</p>
<p> ä¸‹é¢çœ‹ä¸€ä¸ªç²¾çµåŠ¨ç”»çš„ä¾‹å­ï¼š<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/1-1.gif" alt="é€å¸§åŠ¨ç”»ç¤ºä¾‹"><br> ï¼ˆæ¡ˆä¾‹ï¼šæ‹æ‹æ— èŠè€…è”ç›Ÿå®£ä¼ é¡µï¼‰</p>
<p> stepsçš„å‚æ•°æœ‰å‡ ä¸ªå‘ï¼Œéœ€è¦ç‰¹åˆ«ç•™æ„ï¼š<br> ç¬¬ä¸€ä¸ªå‚æ•°<code>number</code>ä¸ºæŒ‡å®šçš„é—´éš”æ•°ï¼ŒæŒ‡çš„æ˜¯æŠŠ<strong>ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„åŠ¨ç”»åˆ†ä¸ºnæ­¥é˜¶æ®µæ€§å±•ç¤º</strong>ï¼Œè€Œä¸æ˜¯<code>keyframes</code>å†™çš„å˜åŒ–æ¬¡æ•°ã€‚<br> æˆ‘ä»¬å°†ä¸Šè¿°æ¡ˆä¾‹ä¸­handéƒ¨åˆ†ä½œä¸ºä¾‹å­ï¼šç”±é›ªç¢§å›¾å¯çŸ¥ï¼Œæ‰‹éƒ¨çš„æ‘†åŠ¨ä¸€ç§æœ‰ä¸¤ç§çŠ¶æ€ï¼Œæ•…<code>keyframes</code>éœ€è¦å†™ä¸¤å¸§ï¼š</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> wave&#123;</div><div class="line">	0%&#123;<span class="attribute">background-position</span>:<span class="number">0</span> <span class="number">0</span>;&#125;</div><div class="line">  	50%&#123;<span class="attribute">background-position</span>:<span class="number">100%</span> <span class="number">0</span>;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> è®¾ç½®ä¸åŒçš„numberå€¼ï¼š</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*å°†`number`è®¾ç½®ä¸º2*/</span></div><div class="line"><span class="selector-class">.active</span><span class="selector-class">.share3</span> <span class="selector-class">.hand</span>&#123;</div><div class="line">	<span class="attribute">-webkit-animation</span>: wave <span class="built_in">steps</span>(2,end) <span class="number">2s</span> forwards infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*å°†`number`è®¾ç½®ä¸º1*/</span></div><div class="line"><span class="selector-class">.active</span><span class="selector-class">.share3</span> <span class="selector-class">.hand</span>&#123;</div><div class="line">	<span class="attribute">-webkit-animation</span>: wave <span class="built_in">steps</span>(1,end) <span class="number">2s</span> forwards infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> <img src="//img.aotu.io/Yettyzyt/css3-animation/1-4.gif" alt="stepsä¸­çš„å‘"><br> ï¼ˆå·¦å›¾ï¼š<code>number</code>ä¸º2ï¼›å³å›¾ï¼š<code>number</code>ä¸º1ï¼‰</p>
<p> ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ï¼Œæ¥å—<code>start</code>å’Œ<code>end</code>ä¸¤ä¸ªå€¼ï¼šæŒ‡å®šåœ¨æ¯ä¸ªé—´éš”çš„<strong>èµ·ç‚¹</strong>æˆ–æ˜¯<strong>ç»ˆç‚¹</strong>å‘ç”Ÿé˜¶è·ƒå˜åŒ–ã€‚é€šè¿‡<a href="http://www.w3.org/" target="_blank" rel="external">W3C</a>ä¸­çš„ä¸€å¼ stepçš„å·¥ä½œæœºåˆ¶å›¾å¯ä»¥ç†è§£ï¼š<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/1-2.png" alt="stepsä¸­çš„å‘">ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="http://www.w3.org/TR/css3-transitions/" target="_blank" rel="external">W3C</a>ï¼‰</p>
<p> TIPSï¼š</p>
<blockquote>
<p><code>step-start</code>ç­‰åŒäº<code>steps(1,start)</code>ï¼šåŠ¨ç”»æ‰§è¡Œæ—¶ä¸ºå¼€å§‹å·¦ä¾§ç«¯ç‚¹çš„éƒ¨åˆ†ä¸ºå¼€å§‹ï¼›<br><code>step-end</code>ç­‰åŒäº<code>steps(1,end)</code>ï¼šåŠ¨ç”»æ‰§è¡Œæ—¶ä»¥ç»“å°¾ç«¯ç‚¹ä¸ºå¼€å§‹ï¼Œé»˜è®¤å€¼ä¸ºendã€‚</p>
</blockquote>
<p> æœ€åå®‰åˆ©ä¸€ä¸ªè®¡ç®—å¸§æ•°çš„å·¥å…·ï¼š<a href="http://tid.tenpay.com/labs/css3_keyframes_calculator.html" target="_blank" rel="external">CSS3åŠ¨ç”»å¸§æ•°è®¡ç®—å™¨</a></p>
</li>
</ol>
<h2 id="CSSåŠ¨ç”»çš„ä¼˜ç¼ºç‚¹"><a href="#CSSåŠ¨ç”»çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="CSSåŠ¨ç”»çš„ä¼˜ç¼ºç‚¹"></a>CSSåŠ¨ç”»çš„ä¼˜ç¼ºç‚¹</h2><ol>
<li>ä¼˜ç‚¹ï¼š<blockquote>
<p>ç®€å•ã€é«˜æ•ˆ<br>å£°æ˜å¼çš„<br>ä¸ä¾èµ–äºä¸»çº¿ç¨‹ï¼Œé‡‡ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ˆGPUï¼‰<br>ç®€å•çš„æ§åˆ¶keyframe animationæ’­æ”¾å’Œæš‚åœ</p>
</blockquote>
</li>
<li>ç¼ºç‚¹ï¼š<blockquote>
<p>ä¸èƒ½åŠ¨æ€ä¿®æ”¹æˆ–å®šä¹‰åŠ¨ç”»å†…å®¹<br>ä¸åŒçš„åŠ¨ç”»æ— æ³•å®ç°åŒæ­¥<br>å¤šä¸ªåŠ¨ç”»å½¼æ­¤æ— æ³•å †å </p>
</blockquote>
</li>
</ol>
<h2 id="ç®€å•åšåŠ¨ç”»ï¼š"><a href="#ç®€å•åšåŠ¨ç”»ï¼š" class="headerlink" title="ç®€å•åšåŠ¨ç”»ï¼š"></a>ç®€å•åšåŠ¨ç”»ï¼š</h2><p>æ€»ç»“ä¸€ä¸‹åœ¨ä¹‹å‰åšåŠ¨ç”»éœ€æ±‚æ—¶çš„ç»éªŒï¼Œå½’çº³ä¸ºä»¥ä¸‹7ä¸ªæ­¥éª¤ã€‚ä»¥æ­¤éœ€æ±‚ä¸ºä¾‹ï¼š<br><img src="//img.aotu.io/Yettyzyt/css3-animation/3-1.jpg" alt="ç®€å•åšåŠ¨ç”»"> ï¼ˆæ¡ˆä¾‹ï¼šiphone6sæ¨å¹¿æ¸¸æˆï¼‰</p>
<ol>
<li><p><strong>è§‚å¯Ÿ</strong>â€”â€”å“ªäº›å…ƒç´ å¯ä»¥åŠ¨ï¼Ÿå…ƒç´ å¯ä»¥æ€ä¹ˆåŠ¨ï¼Ÿ</p>
<p> æ ¹æ®è§†è§‰ç¨¿ï¼Œåˆ†ææ ‡é¢˜ã€æŒ‰é’®ã€äººç‰©ã€èƒŒæ™¯éƒ½å¯ä»¥é€‚å½“åŠ åŠ¨ç”»å…ƒç´ ã€‚</p>
</li>
<li><p><strong>æ²Ÿé€š</strong>â€”â€”äº†è§£è®¾è®¡å¸ˆçš„æƒ³æ³•ï¼Œå¹¶æå‡ºè‡ªå·±çš„æƒ³æ³•ã€‚</p>
<p> è¿™æ˜¯è®¾è®¡å¸ˆç»™å‡ºçš„å¤§è‡´åŠ¨ç”»è¿‡ç¨‹ï¼Œå…·ä½“çš„è¿‡æ¸¡åŠåŠ¨æ•ˆæ²¡æœ‰æ˜ç¡®ç»™å‡ºï¼Œå› æ­¤å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ³æ³•ä¸è®¾è®¡å¸ˆè¿›è¡Œæ²Ÿé€šã€‚<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/3-2.JPG" alt="æ²Ÿé€š"></p>
</li>
<li><p><strong>åˆ†æ</strong>â€”â€”åˆ†æåŠ¨ç”»å…ƒç´ çš„å±‚æ¬¡ï¼ˆå‡ºç°é¡ºåºï¼‰ï¼›ç”»å‡ºåŠ¨ç”»æ—¶é—´è½´ï¼›æ ¹æ®æ—¶é—´è½´å†™å‡ºCSSåŠ¨ç”»æ—¶é—´è½´ã€‚<br> åˆ†æè¯¥é¡µé¢åŠ¨ç”»çš„å‡ºç°å¯ä»¥åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ï¼š<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/3-3.jpg" alt="åˆ†æ"><br> æ ¹æ®å‰é¢çš„åˆ†æç”»å‡ºåŠ¨ç”»æ—¶é—´è½´ï¼š<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/3-4.jpg" alt="åˆ†æ"><br> æ ¹æ®æ—¶é—´è½´å†™å‡ºCSSåŠ¨ç”»æ—¶é—´è½´ï¼š<br> <strong>æ–¹æ³•ä¸€ï¼š</strong>å°†æ‰€æœ‰åŠ¨ç”»å…ƒç´ æ”¾åœ¨ä¸€ä¸ªæ—¶é—´è½´ä¸Šï¼ˆé€‚åˆäºå…ƒç´ è¾ƒå°‘çš„æƒ…å†µï¼‰ã€‚</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">a0&#123;-webkit-animation: a0 2s forwards;&#125;</div><div class="line">    @-webkit-keyframes a0&#123;</div><div class="line">            0%&#123;â€¦â€¦&#125;</div><div class="line">            30%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a1&#123;-webkit-animation: a1 2s forwards;&#125;</div><div class="line">    @-webkit-keyframes a1&#123;</div><div class="line">            0%,30%&#123;â€¦â€¦&#125;</div><div class="line">            50%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a2&#123;-webkit-animation: a2 2s forwards;&#125;</div><div class="line">    @-webkit-keyframes a2&#123;</div><div class="line">            0%,50%&#123;â€¦â€¦&#125;</div><div class="line">            75%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a3&#123;-webkit-animation: a3 2s forwards;&#125;</div><div class="line">    @-webkit-keyframes a3&#123;</div><div class="line">            0%,75%&#123;â€¦â€¦&#125;</div><div class="line">            100%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p> <strong>æ–¹æ³•äºŒï¼š</strong>åŒä¸€é˜¶æ®µçš„åŠ¨ç”»å…ƒç´ æ”¾åœ¨ä¸€ä¸ªæ—¶é—´è½´ä¸Šã€‚</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">a0&#123;-webkit-animation: a0 0.6s forwards;&#125;</div><div class="line">    @-webkit-keyframes a0&#123;</div><div class="line">            0%&#123;â€¦â€¦&#125;</div><div class="line">            100%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a1&#123;-webkit-animation: a1 0.4s 0.6s forwards;&#125;</div><div class="line">    @-webkit-keyframes a1&#123;</div><div class="line">            0%&#123;â€¦â€¦&#125;</div><div class="line">            100%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a2&#123;-webkit-animation: a2 0.5s 1s forwards;&#125;</div><div class="line">    @-webkit-keyframes a2&#123;</div><div class="line">            0%&#123;â€¦â€¦&#125;</div><div class="line">            100%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div><div class="line">a3&#123;-webkit-animation: a3 0.5s 1.5s forwards;&#125;</div><div class="line">    @-webkit-keyframes a3&#123;</div><div class="line">            0%&#123;â€¦â€¦&#125;</div><div class="line">            100%&#123;â€¦â€¦&#125;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆ‡å›¾</strong>â€”â€”PS CC 2015ä¿®æ”¹ç»„/å›¾å±‚åä¸ºâ€œ<em>*</em>.pngâ€ï¼Œç”Ÿæˆå›¾åƒèµ„æºã€‚<br> ä½¿ç”¨PS CSS 2015åˆ‡å›¾å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/3-5.png" alt="åˆ‡å›¾"></p>
</li>
<li><p><strong>å®šä½</strong>â€”â€”é€‚å½“ä½¿ç”¨ç»å¯¹å®šä½ï¼›é€‚å½“ä½¿ç”¨remã€‚<br> å®‰åˆ©ä¸€æ¬¾sublimeæ’ä»¶ï¼š<a href="https://github.com/youing/PxRemTranslate" target="_blank" rel="external">PXè½¬REMæ’ä»¶</a>ã€‚</p>
</li>
<li><p><strong>å®ç°</strong></p>
<p> ä»æ— åˆ°æœ‰ï¼š</p>
<ul>
<li>é€æ˜åº¦â€”opacity</li>
<li>ä½ç§»â€”translate</li>
<li><p>å®½åº¦â€”widthï¼ˆå°‘ç”¨ï¼‰</p>
<p>åŠ¨èµ·æ¥ï¼š</p>
</li>
<li>2/3Dè½¬æ¢â€”transform</li>
<li>å…¶ä»–å±æ€§</li>
</ul>
</li>
<li><p><strong> æ¶¦è‰²</strong></p>
 <p style="color:#bbb">åæ–‡ä»‹ç»</p>

</li>
</ol>
<p>TIPSï¼šä¸è¦åœ¨before,afteré‡ŒåŠ åŠ¨ç”»ï¼</p>
<h2 id="ä¸æ­¢äºâ€œåŠ¨â€ï¼š"><a href="#ä¸æ­¢äºâ€œåŠ¨â€ï¼š" class="headerlink" title="ä¸æ­¢äºâ€œåŠ¨â€ï¼š"></a>ä¸æ­¢äºâ€œåŠ¨â€ï¼š</h2><ol>
<li><p><strong>æƒ¯æ€§</strong></p>
<p> ç‰©ä½“æ²¡æœ‰åœåœ¨æœ¬åº”è¯¥åœæ­¢çš„ä½ç½®ä¸Šè€Œæ˜¯é æƒ¯æ€§<strong>ç»§ç»­æ‘†åŠ¨ä¸€æ®µæ—¶é—´ç„¶ååæ–¹å‘æ‘†å›æ¥</strong>ã€‚<br> æƒ¯æ€§åœ¨æ—¥å¸¸çš„åŠ¨ç”»éœ€æ±‚ä¸­åº”ç”¨ç›¸å½“æ™®éï¼Œå…ƒç´ çš„é«˜é€Ÿè¿›å…¥éƒ½æ¶‰åŠæƒ¯æ€§ã€‚</p>
<ul>
<li>ç¤ºä¾‹ï¼šæ ‡é¢˜å¿«é€Ÿä»å·¦ä¾§åˆ’å…¥å±å¹•ä¸­ï¼Œæ ‡é¢˜æœ¬åº”åœåœ¨å±å¹•å·¦å³å±…ä¸­ä½ç½®ï¼Œç”±äºæƒ¯æ€§çš„ä½œç”¨ï¼Œæ ‡é¢˜åˆ°è¾¾å±…ä¸­ä½ç½®ååˆå‘å³æ»‘è¡Œä¸€å°æ®µï¼Œå†åæ–¹å‘æ»‘å›ã€‚<br><img src="//img.aotu.io/Yettyzyt/css3-animation/4-2.gif" alt="æƒ¯æ€§"> ï¼ˆæ¡ˆä¾‹ï¼š618 APPè¿”åœºé¡µH5ï¼‰</li>
</ul>
</li>
<li><p><strong>é€è§†</strong></p>
<p> ç‰©ä½“ä¸è§‚å¯Ÿè€…çš„è·ç¦»è¿œè¿‘åœ¨é™æ€æ—¶é€šè¿‡<strong>ç‰©ä½“çš„å¤§å°</strong>æ¥ä½“ç°ã€‚<br> å½“ç‰©ä½“è¿åŠ¨æ—¶ï¼Œé€šè¿‡<strong>è¿œè¿‘ç‰©ä½“ä¸åŒçš„è¿åŠ¨é€Ÿåº¦</strong>æ¥ä½“ç°ï¼Œä»è€Œå½¢æˆå±‚æ¬¡æ„Ÿã€‚<strong>è¿‘å¤„çš„ç‰©ä½“è¿åŠ¨å¿«ï¼Œè¿œå¤„çš„ç‰©ä½“è¿åŠ¨æ…¢</strong>ã€‚<br> <img src="//img.aotu.io/Yettyzyt/css3-animation/4-7.jpg" alt="é€è§†"><br> ï¼ˆé€è§†åŸç†å›¾ï¼‰</p>
<ul>
<li><p>ç¤ºä¾‹ï¼šäº‘æœµä¸è§‚å¯Ÿè€…çš„è·ç¦»æœ‰è¿œè¿‘ä¹‹åˆ†ï¼ˆä¸å¯èƒ½æ‰€æœ‰çš„äº‘éƒ½åœ¨ä¸€ä¸ªå¹³é¢ä¸Šï¼‰ï¼Œè®¾ç½®äº‘æœµçš„é£˜åŠ¨åŠ¨ç”»æ—¶ï¼Œå¯æ ¹æ®äº‘æœµçš„å¤§å°ï¼ˆè¿œè¿‘ï¼‰è®¾ç½®ä¸åŒçš„è¿åŠ¨é€Ÿåº¦ï¼Œè¿‘å¤„çš„äº‘æœµé£˜åŠ¨çš„é€Ÿåº¦æ¯”è¿œå¤„çš„å¿«ï¼Œä»è€Œå½¢æˆé€è§†ã€‚</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c1</span>,</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c2</span>,</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c4</span>,</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c6</span></div><div class="line">&#123;</div><div class="line">    -webkit-<span class="attribute">animation</span>: cloudFloat linear <span class="number">6s</span> infinite;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c3</span>,</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c5</span>,</div><div class="line"><span class="selector-class">.cover_clouds</span> <span class="selector-class">.c7</span></div><div class="line">&#123;</div><div class="line">    -webkit-<span class="attribute">animation</span>: cloudFloat linear <span class="number">10s</span> infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/Yettyzyt/css3-animation/4-9.gif" alt="é€è§†"> ï¼ˆæ¡ˆä¾‹ï¼šiphone6sæ¨å¹¿æ¸¸æˆï¼‰</p>
</li>
</ul>
</li>
<li><p><strong>èŠ‚å¥</strong></p>
<p> å–„ç”¨<strong>æ›²çº¿</strong>å’Œ<strong>ç¼“åŠ¨</strong>å¯ä½¿æ•ˆæœæ›´ç”ŸåŠ¨ã€‚<br> <strong>å¤šä¸ªå…ƒç´ ä¿æŒç›¸åŒèŠ‚å¥</strong>ï¼Œä¿è¯ç”»é¢çš„åŠ¨ç”»ä¸è¿‡åˆ†å‡Œä¹±ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹ï¼šåŒ€é€Ÿçš„å‘¼å¸ä¸ç¼“åŠ¨çš„å‘¼å¸ã€‚</p>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.breath</span>&#123;</div><div class="line">    <span class="attribute">-webkit-animation</span>:</div><div class="line">    breath <span class="number">6s</span> linear infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.breath</span>&#123;</div><div class="line">    <span class="attribute">-webkit-animation</span>:</div><div class="line">    breath <span class="number">6s</span> <span class="built_in">cubic-bezier</span>(.2,.73,.71,.44) infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  <img src="//img.aotu.io/Yettyzyt/css3-animation/4-11.gif" alt="èŠ‚å¥"><br>  (å·¦å›¾ï¼šåŒ€é€Ÿå‘¼å¸æ•ˆæœå›¾ï¼›å³å›¾ï¼šç¼“åŠ¨å‘¼å¸æ•ˆæœå›¾)<br>è·ŸéšåŠ¨ç”»è¿›è¡Œå‘¼å¸ï¼Œå¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°ç¼“åŠ¨çš„å‘¼å¸æ›´è´´è¿‘æˆ‘ä»¬å®é™…çš„å‘¼å¸æƒ…å†µã€‚å‘¼å¸å‡½æ•°å¦‚ä¸‹ï¼š<br>  <img src="//img.aotu.io/Yettyzyt/css3-animation/4-12.png" alt="èŠ‚å¥"><br>  ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="http://isux.tencent.com/animation-factor.html" target="_blank" rel="external">è®©ç•Œé¢åŠ¨ç”»æ›´è‡ªç„¶â€”â€”ISUX</a>ï¼‰</p>
</li>
</ul>
</li>
<li><p><strong>è·Ÿéš</strong></p>
<p> è·ŸéšåŠ¨ä½œæ˜¯å°†ç‰©ä½“çš„å„éƒ¨ä½æ‹†è§£ï¼Œé€šå¸¸æ˜¯<strong>æ²¡æœ‰éª¨æ¶</strong>çš„éƒ¨ä½è¾ƒå®¹æ˜“äº§ç”Ÿè·Ÿéšçš„åŠ¨ä½œã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªå¥”è·‘çš„äººçªç„¶åœä¸‹ï¼Œä»–çš„è¡£æœå¤´å‘ç­‰å¯èƒ½ä»ä¼šè¿åŠ¨ã€‚å…¶ä¸­ï¼Œäººæ˜¯â€œä¸»ä½“â€ï¼Œè¡£æœå¤´å‘ç­‰æ˜¯â€œé™„å±ç‰©â€ã€‚<br> é™„å±ç‰©çš„åŠ¨ä½œå–å†³äºï¼š<strong>ä¸»ä½“çš„åŠ¨ä½œ</strong>ï¼Œ<strong>é™„å±ç‰©æœ¬èº«çš„é‡é‡å’Œè´¨åœ°</strong>ï¼Œä»¥åŠ<strong>ç©ºæ°”çš„é˜»åŠ›</strong>ã€‚<br> <strong>ä¸»ä½“ä¸é™„å±ç‰©ä¹‹é—´åŠ¨ä½œçš„é‡å å’Œè¿½éš</strong>ï¼Œå°±æ˜¯é‰´å®šåŠ¨ä½œæµç•…æ€§ä¸è‡ªç„¶åº¦å¥½åçš„æ ‡å‡†ã€‚</p>
<ul>
<li>ç¤ºä¾‹ï¼šé¦–é¡µä¸»ä½“äººç‰©åŠ¨ä½œè§¦å‘åï¼Œè¿›è¡Œå°èŒƒå›´çš„å››å‘è¿åŠ¨ä»¥æ¨¡æ‹Ÿäººç‰©èº«ä½“é¢¤åŠ¨çš„æ•ˆæœã€‚äººç‰©å¤´é¥°ï¼ˆèŠ±åŠéª¨å¤´ï¼‰ä¸è¿åŠ¨ä¸»ä½“ï¼ˆäººï¼‰å¹¶éä¸€ä½“ï¼Œå±äºé™„å±ç‰©ã€‚é™„å±ç‰©çš„è¿åŠ¨å—ä¸»ä½“çš„è¿åŠ¨å½±å“å‡ºç°åŒå‘ã€å»¶æ—¶çš„è¿åŠ¨ã€‚<br><img src="//img.aotu.io/Yettyzyt/css3-animation/4-18.gif" alt="è·Ÿéš"> ï¼ˆæ¡ˆä¾‹ï¼šæ‹æ‹ä¸ƒå¤•æ´»åŠ¨é¡µâ€”ä¸ƒå»ä¸ªå¤•ï¼‰</li>
</ul>
</li>
</ol>
<h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><ol>
<li>ä¸ç”¨left/right/width/height/margin-topç­‰</li>
<li>å°‘ç”¨color/backgroundç­‰</li>
<li>ä½¿ç”¨translate/opacity</li>
<li>é€‚å½“å¼€å¯GPUåŠ é€Ÿ</li>
<li>é€‚å½“ä½¿ç”¨will-change</li>
</ol>
<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ol>
<li><a href="http://www.itechzero.com/css3-transition-property-transition-effect-explain.html" target="_blank" rel="external">CSS3 transition å±æ€§è¿‡æ¸¡æ•ˆæœ è¯¦è§£,Techzero ,2014-04-1</a></li>
<li><a href="http://www.cnblogs.com/aaronjs/p/4642015.html" target="_blank" rel="external">æ·±å…¥ç†è§£CSS3 Animation å¸§åŠ¨ç”»,Aaron,2015-07-13</a></li>
<li><a href="http://www.tuicool.com/articles/neqMVr" target="_blank" rel="external">CSS3 timing-function: steps() è¯¦è§£,é‚£ä¸ªå‚»ç“œç“œ,2014-12-30</a></li>
<li><a href="http://www.zuojj.com/archives/1292.html" target="_blank" rel="external">ä¸»æµåŠ¨ç”»å®ç°æ–¹å¼æ€»ç»“,Benjamin,2015-01-25</a></li>
<li><a href="https://cssanimation.rocks/principles/" target="_blank" rel="external">Animation Principles for the Web</a></li>
<li><a href="https://en.wikipedia.org/wiki/12_basic_principles_of_animation" target="_blank" rel="external">12 basic principles of animation</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»&quot;&gt;&lt;/a&gt;éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»&lt;/h2&gt;&lt;p&gt;éœ€æ±‚ä¸­å¸¸è§çš„css3åŠ¨ç”»ä¸€èˆ¬æœ‰&lt;strong&gt;è¡¥é—´åŠ¨ç”»ï¼ˆåˆå«
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS3" scheme="https://aotu.io/tags/CSS3/"/>
    
      <category term="animation" scheme="https://aotu.io/tags/animation/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ThreeJSåœ¨æµè§ˆå™¨ä¸­å±•ç¤ºå…¨æ™¯å›¾</title>
    <link href="https://aotu.io/notes/2016/01/02/3D-panorama/"/>
    <id>https://aotu.io/notes/2016/01/02/3D-panorama/</id>
    <published>2016-01-02T12:06:45.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æµè§ˆå™¨ä¸­å®ç°å…¨æ™¯æµè§ˆ, å¬èµ·æ¥æ˜¯å¾ˆç„çš„äº‹æƒ…. ä½†å¦‚æœä½ æ¸…æ¥šå®ƒçš„åŸç†, è¿™äº‹å°±ç®€å•å¤šäº†.<br><a id="more"></a></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¹‹å‰çš„ä¸€æ®µæ—¶é—´, æœ‹å‹åœˆä¸­å‡ºç°äº†ä¸€æ‰¹ä½¿ç”¨å…¨æ™¯å›¾æµè§ˆæŠ€æœ¯çš„H5é¡µé¢. æ¯”å¦‚æ¢ç­å´äº¦å‡¡ç³»åˆ—, æˆ–è€…æ˜¯æ¢è®¿äº¬ä¸œæ€»éƒ¨å¤§æ¥¼æ‰¾ä¼˜æƒ åˆ¸é¡µé¢. åœ¨å½“æ—¶, è¿™å‡ ä¸ªé¡µé¢å–å¾—äº†ä¸é”™çš„å®£ä¼ æ•ˆæœ. é‚£ä¹ˆ, è¿™ç§æ–°å¥‡çš„å…¨æ™¯æ•ˆæœåˆ°åº•æ˜¯æ€æ ·å®ç°çš„å‘¢?</p>
<h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p>ç°åœ¨çš„æ™ºèƒ½æ‰‹æœºä¸€èˆ¬éƒ½è‡ªå¸¦å…¨æ™¯å›¾æ‹æ‘„åŠŸèƒ½. å°±ç®—æ²¡æœ‰, é€šè¿‡å®‰è£…ä¸€äº›ç¬¬ä¸‰æ–¹è½¯ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰è¿™ä¸ªåŠŸèƒ½, ä½†é€šè¿‡è¿™äº›è½¯ä»¶æ‹å‡ºæ¥çš„åªæ˜¯ä¸€ä¸ªéå¸¸å®½çš„ç…§ç‰‡, è¿˜æ— æ³•è¾¾åˆ°360éšæ„è½¬åŠ¨è§‚çœ‹çš„æ•ˆæœ. è¦åˆ¶ä½œåƒä¸Šé¢é‚£æ ·çš„360å…¨æ™¯è§‚çœ‹é¡µé¢, æˆ‘ä»¬éœ€è¦ä»æœ€åŸºç¡€çš„å¼€å§‹. é¦–å…ˆ, ä»€ä¹ˆæ˜¯å…¨æ™¯å›¾?</p>
<blockquote>
<p>360åº¦å…¨æ™¯å›¾ä¹Ÿç§°ä¸ºä¸‰ç»´å…¨æ™¯å›¾ã€å…¨æ™¯ç¯è§†å›¾ã€‚360åº¦å…¨æ™¯æŠ€æœ¯æ˜¯ä¸€ç§è¿ç”¨æ•°ç ç›¸æœºå¯¹ç°æœ‰åœºæ™¯è¿›è¡Œå¤šè§’åº¦ç¯è§†æ‹æ‘„ä¹‹åï¼Œå†åˆ©ç”¨è®¡ç®—æœºè¿›è¡ŒåæœŸç¼åˆï¼Œå¹¶åŠ è½½æ’­æ”¾ç¨‹åºæ¥å®Œæˆçš„ä¸€ç§ä¸‰ç»´è™šæ‹Ÿå±•ç¤ºæŠ€æœ¯ã€‚ â€“ <a href="http://baike.baidu.com/link?url=qsNK14ZSsECIkmQN6asaJDDNmCjS2cYwqldh_I4GRzuqb5CH7lrZ9ic34mQuJE7WtaiWaz7OXxwXQDZQ0kqNHK" target="_blank" rel="external">360åº¦å…¨æ™¯å›¾_ç™¾åº¦ç™¾ç§‘</a></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹åˆ°çš„å…¨æ™¯å›¾, <strong>ä½¿ç”¨è®¡ç®—æœºè¿›è¡ŒåæœŸç¼åˆ</strong>, å¹¶åŠ è½½æ’­æ”¾ç¨‹åºæ¥å®Œæˆä¸‰ç»´æ˜¾ç¤º. å…·ä½“åˆ°ä½¿ç”¨ThreeJSå®ç°å…¨æ™¯å›¾è¿™ä¸ªåœºæ™¯, æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆå‘¢?</p>
<p>å…¶å®, ç²—ç•¥ä¸€æƒ³ä¹Ÿå¯ä»¥æƒ³åˆ°, å¦‚æœæˆ‘ä»¬å°†æ‹æ‘„åˆ°çš„å…¨æ™¯å›¾è´´åœ¨ä¸€ä¸ªåœ†æŸ±çš„ä¾§é¢ä¸Š, æˆ‘ä»¬ç«™åœ¨åœ†æŸ±ä¸­å¿ƒæœå››å‘¨çœ‹çš„è¯, åº”è¯¥å°±æœ‰å…¨æ™¯è§‚å¯Ÿçš„æ•ˆæœ. ä¸è¿‡è¿™æ ·åšä¹Ÿæœ‰åå¤„, ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å¤´é¡¶è·Ÿè„šåº•éƒ½æ˜¯æ— æ³•çœ‹åˆ°çš„åŒºåŸŸ. æˆ‘ä»¬éœ€è¦ä½¿ç”¨å…¶ä»–çš„æ–¹å¼æ¥å®ç°. åœ¨è¿™ä¹‹å‰, æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ThreeJSä¸­çš„ç›¸æœº.</p>
<h2 id="ThreeJSä¸–ç•Œä¸­çš„ç›¸æœº"><a href="#ThreeJSä¸–ç•Œä¸­çš„ç›¸æœº" class="headerlink" title="ThreeJSä¸–ç•Œä¸­çš„ç›¸æœº"></a>ThreeJSä¸–ç•Œä¸­çš„ç›¸æœº</h2><p>åœ¨ThreeJSä¸­, ç›¸æœºè¿˜åˆ†ä¸ºCubeCamera(ç«‹æ–¹ä½“ç›¸æœº), PerspectiveCamera(é€è§†ç›¸æœº)ä»¥åŠOrthographicCamera(æ­£äº¤ç›¸æœº). å…¶ä¸­, CubeCameraæ˜¯åˆ›å»ºåŠ¨æ€è´´å›¾ç”¨çš„, OrthographicCameraåˆ›å»ºçš„ç…§ç›¸æœºä¸å…·æœ‰é€è§†æ•ˆæœ. åœ¨è¿™é‡Œ, æˆ‘ä»¬ç”¨åˆ°çš„æ˜¯PerspectiveCamera.</p>
<p>å®šä¹‰ä¸€ä¸ªé€è§†ç›¸æœºåªéœ€è¦ä¸€å¥è¯:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(</div><div class="line">    fov,</div><div class="line">    aspect,</div><div class="line">    near,</div><div class="line">    far</div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/Littly/2016-01-01/camera.png" alt="cameraç¤ºæ„å›¾"><br>åœ¨è¿™ä¸€æ®µä»£ç ä¸­, fovä»£è¡¨ç›¸æœºçš„è§†è§’, å³è§†é‡ä¸Šå¹³é¢ä¸ä¸‹å¹³é¢çš„è§’åº¦, aspectæ˜¯ç›¸æœºçš„å®½é«˜æ¯”, nearæ˜¯è§†é‡è¿‘å¹³é¢çš„è·ç¦», faræ˜¯è¿œå¹³é¢çš„è·ç¦».<br>ç„¶è€Œ, åœ¨3Dçš„ä¸–ç•Œä¸­, ä»…å‡­ä¸Šé¢è¿™å‡ ä¸ªå‚æ•°, æˆ‘ä»¬åªèƒ½ç¡®å®šä¸€ä¸ªç…§ç›¸æœºçš„è‡ªèº«åŸºæœ¬å±æ€§, å´æ— æ³•ç¡®å®šè¿™å°ç…§ç›¸æœºç©¶ç«Ÿä½äºä»€ä¹ˆä½ç½®, æ˜¯ä»€ä¹ˆæ ·çš„è§’åº¦. ThreeJSä¸­, camera.positionå±æ€§æ˜¯ä¸€ä¸ªä¸‰ç»´å‘é‡, æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå±æ€§å®šä¹‰ç›¸æœºç›¸å¯¹äºåŸç‚¹çš„ä½ç½®. camera.lookAt(Vector3)å‡½æ•°å¯ä»¥å®šä¹‰ç…§ç›¸æœºçš„è§‚å¯Ÿæ–¹å‘, å‚æ•°åŒæ ·æ˜¯ä¸€ä¸ªä¸‰ç»´å‘é‡. å¯¹äºç…§ç›¸æœºè€Œè¨€, è¿˜æœ‰ä¸€ä¸ªå‚æ•°æ˜¾å¾—éå¸¸é‡è¦, è¿™å°±æ˜¯ç›¸æœºçš„ä¸Šæ–¹å‘. åŒæ ·çš„ç©ºé—´ä½ç½®, æœå‘åŒä¸€ä¸ªæ–¹å‘, ç…§ç›¸æœºè¿˜å¯ä»¥æ˜¯æ¨ªç€, ä¹Ÿå¯ä»¥ç«–ç€, æœ€åçœ‹åˆ°çš„æ•ˆæœä¹Ÿä¸ä¼šä¸€æ ·. æ‰€ä»¥cameraè¿˜æœ‰ä¸€ä¸ªupå±æ€§, å®šä¹‰ç…§ç›¸æœºçš„ä¸Šæ–¹å‘. å¦‚ä¸Šå›¾è“è‰²ç©ºå¿ƒç®­å¤´æ‰€ç¤º.</p>
<h2 id="åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º1"><a href="#åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º1" class="headerlink" title="åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º1"></a>åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º1</h2><p>è¦è®©äººäº§ç”Ÿå…¨æ™¯çš„è§†è§‰æ•ˆæœ, å¾ˆå…³é”®çš„ä¸€ç‚¹æ˜¯, è¦è®©äººçœ‹è§ä»–å½“å‰å§¿æ€æ‰€åº”å½“çœ‹è§çš„æ™¯è§‚. å¦‚æœå°†äººçœ¼æ¯”ä½œä¸€å°ç…§ç›¸æœº, æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬å¦‚æœå°†å…¨æ™¯å›¾è´´åœ¨ä¸€ä¸ªçƒå½¢çš„å†…è¡¨é¢, é‚£ä¹ˆäººçœ¼è¿™å°ç…§ç›¸æœºæ‰€çœ‹åˆ°çš„æ™¯è±¡å°±æ˜¯ä¸Šä¸‹å·¦å³360æ— æ­»è§’çš„å…¨æ™¯.</p>
<p>æƒ³æƒ³æ€»æ˜¯ç¾å¦‚ç”»çš„. æˆ‘ä»¬ä¸å¦¨å®è·µä¸€ä¸‹. é¦–å…ˆ, å»googleæœç´¢å…³é”®å­—â€™å…¨æ™¯å›¾ 360â€™, éšæ„ä¸‹è½½ä¸€ä¸ªå…¨æ™¯å›¾. æ¥ä¸‹æ¥, æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªå…¨æ™¯å›¾è´´åˆ°çƒå½¢çš„è¡¨é¢. è¿™ä¸€æ­¥, æˆ‘ä»¬å†ä¸€æ¬¡ç”¨åˆ°äº†Blender.</p>
<p>é¦–å…ˆ, æ–°å»ºä¸€ä¸ªå·¥ç¨‹, ç„¶åå¾€åœºæ™¯ä¸­æ·»åŠ ä¸€ä¸ªç»çº¬çƒ.<br><img src="//img.aotu.io/Littly/2016-01-01/ball.png" alt="ç»çº¬çƒ"></p>
<p>æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ä¹‹å‰ä¸‹è½½åˆ°çš„å…¨æ™¯å›¾ä½œä¸ºè¿™ä¸ªçƒä½“çš„è´´å›¾. æ‰€ä»¥, æˆ‘ä»¬éœ€è¦é¦–å…ˆå¯¹è¿™ä¸ªçƒä½“åšuvå±•å¼€. å¯¹è¿™ä¸ªçƒä½¿ç”¨çƒé¢æŠ•å°„, æ–¹å‘é€‰æ‹©å¯¹é½åˆ°ç‰©ä½“, é€‰ä¸Šç¼©æ”¾è‡³è¾¹ç•Œæ¡†, æ¥ç€æˆ‘ä»¬çœ‹åˆ°UVå±•å¼€å›¾æ˜¯è¿™æ ·çš„:<br><img src="//img.aotu.io/Littly/2016-01-01/uv_1.png" alt="UVå±•å¼€å›¾"></p>
<p>è¿™ä¸ªUVå±•å¼€å›¾éå¸¸ä¸è§„åˆ™, å°±ç®—æœ‰äº†å…¨æ™¯å›¾, æˆ‘ä»¬ä¹Ÿæ²¡æ³•å¾€ä¸Šè´´. è¿™æ˜¯å› ä¸ºä¸Šä¸‹ä¸¤ä¸ªé¡¶ç‚¹å¤„æ±‡é›†äº†æ‰€æœ‰çš„ç»çº¿, ä½¿å¾—Blenderä¹Ÿæ— æ³•å‡†ç¡®å¾—çŸ¥æˆ‘ä»¬æƒ³è¦æ€æ ·çš„è´´å›¾. è¿™ç§æ—¶å€™, æˆ‘ä»¬éœ€è¦å°†çƒä½“çš„å—åŒ—ä¸¤ä¸ªæç‚¹åˆ é™¤. è¿™æ ·çš„è¯, çƒä½“çš„ä¸Šä¸‹ä¸¤ä¸ªé¡¶ç‚¹å°±æˆä¸ºäº†ä¸¤ä¸ªç©ºå¿ƒçš„åœ†åœˆ. ç„¶è€Œ, æ¨¡å‹ç©ºäº†ä¸¤ä¸ªæ´ä¸å¤ªå¥½. æ¥ä¸‹æ¥, ä½¿ç”¨Extudeå·¥å…·æ¨æŒ¤å‡ºæ–°çš„çº¬åœˆ, é…Œæƒ…ç¼©å°ä¸€äº›.<br><img src="//img.aotu.io/Littly/2016-01-01/delete_top.png" alt="åˆ é™¤äº†æç‚¹"></p>
<p>é‡æ–°è¿›è¡ŒUVå±•å¼€, ä¼šçœ‹åˆ°è¿™æ¬¡çš„UVå±•å¼€éå¸¸å¹³æ•´.<br><img src="//img.aotu.io/Littly/2016-01-01/uv_2.png" alt="UVå±•å¼€å›¾"></p>
<p>å°†æ–°çš„çº¬åœˆè®¾å®šscaleä¸º0, å†åˆ é™¤é‡å çš„èŠ‚ç‚¹, å—åŒ—æå°±å¯ä»¥é‡æ–°æ±‡èšåˆ°ä¸€ä¸ªç‚¹äº†. æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠå…¨æ™¯å›¾è´´ä¸Š, ä¸€ä¸ªå…¨æ™¯çƒå°±è¿™æ ·è¯ç”Ÿäº†.<br><img src="//img.aotu.io/Littly/2016-01-01/panoball.png" alt="å…¨æ™¯çƒ"></p>
<p>æˆ‘ä»¬å°†è¿™ä¸ªå…¨æ™¯çƒé€šè¿‡io_threeæ’ä»¶å¯¼å‡ºä¸ºjson. æ–°å»ºä¸€ä¸ªé¡µé¢, å¼•å…¥three.js. æ ¸å¿ƒä»£ç å¤§æ¦‚æ˜¯è¿™æ ·å­:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">objloader = <span class="keyword">new</span> THREE.ObjectLoader();</div><div class="line">objloader.load(</div><div class="line">	<span class="string">'js/360.json'</span>,</div><div class="line">	<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">		scene = obj;</div><div class="line">		<span class="comment">//scene.add(new THREE.AmbientLight(0xffffff));</span></div><div class="line">		<span class="comment">//material = scene.children[0].material;</span></div><div class="line">		<span class="comment">//material.side = THREE.BackSide;</span></div><div class="line">		<span class="comment">//material.emissive = 0x000000;</span></div><div class="line">		animate();</div><div class="line">	&#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦æ³¨æ„, å¦‚æœå°†æ³¨é‡Šéƒ¨åˆ†çš„ä»£ç åˆ å», æˆ‘ä»¬å°†ä¼šå‘ç°è§†é‡ä¸­ä¸€ç‰‡é»‘. è¿™æ˜¯å› ä¸ºBlenderå¯¼å‡ºçš„æ¨¡å‹é»˜è®¤ä½¿ç”¨çš„æ˜¯éµå®ˆPhongå…‰ç…§æ¨¡å‹çš„æè´¨, è¿™ç§æè´¨åœ¨æ²¡æœ‰é…ç½®è‡ªå‘å…‰, åˆæ²¡æœ‰å¤–ç•Œå…‰ç…§çš„æƒ…å†µä¸‹å°±æ˜¯ä¸€å¨é»‘è‰². æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æ‰‹åŠ¨é…ç½®ä¸€ä¸‹. blenderå¯¼å‡ºçš„jsonæ˜¯sceneæœ¬èº«. sceneæ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„, åœ¨å®ƒçš„childrenå±æ€§ä¸­æœ‰æ‰€æœ‰çš„å¯¹è±¡ä¿¡æ¯. åœ¨è¿™é‡Œ, æˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸‹è´´å›¾çš„æ–¹å‘ä»¥åŠè‡ªå‘å…‰, æ¥ä¸‹æ¥å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†.<br><img src="//img.aotu.io/Littly/2016-01-01/rendered1.png" alt="æ•ˆæœ1"></p>
<h2 id="åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º2"><a href="#åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º2" class="headerlink" title="åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º2"></a>åŠ¨æ‰‹åšå…¨æ™¯å±•ç¤º2</h2><p>ä¸Šé¢è¿™æ ·çš„å®ç°å…¶å®ä¹Ÿæœ‰ä¸€ä¸ªå¼Šç«¯. çƒçŠ¶æ¨¡å‹çš„é¡¶ç‚¹ä¸é¢çš„æ•°é‡ååˆ†é€†å¤©. è¿™äº›å…ƒç´ çš„æ•°é‡è¶Šå¤š, è€—è´¹çš„æµè§ˆå™¨èµ„æºå°±ä¼šè¶Šå¤š. é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´åŠ èŠ‚èƒ½ç¯ä¿çš„æ–¹æ³•å‘¢?<br><img src="//img.aotu.io/Littly/2016-01-01/problem.png" alt="é—®é¢˜"></p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„. æ—¢ç„¶æˆ‘ä»¬çš„äººçœ¼å¯ä»¥è¢«ç±»æ¯”ä¸ºç…§ç›¸æœº, é‚£ä¹ˆå¦‚æœæ‘†å¤šå‡ å°ç…§ç›¸æœº, å°†æ‹åˆ°çš„ç…§ç‰‡æ— é‡å åœ°æ‹¼åœ¨ä¸€èµ·, ä¸€æ ·å¯ä»¥è·å¾—å…¨æ™¯è§†è§‰.</p>
<p>è¿™é‡Œ, æˆ‘ä»¬ä½¿ç”¨6å°90åº¦è§†è§’, çºµå®½æ¯”1çš„ç…§ç›¸æœº, ä»çƒä½“ä¸­å¿ƒåˆ†åˆ«æœå‘ç«‹æ–¹ä½“å…­ä¸ªé¢çš„æ–¹å‘.<br><img src="//img.aotu.io/Littly/2016-01-01/6camera.png" alt="6ä¸ªç›¸æœº"></p>
<p>å°†6ä¸ªæ¸²æŸ“å›¾åˆ†åˆ«ä¿å­˜ä¸‹æ¥.<br><img src="//img.aotu.io/Littly/2016-01-01/pictures.png" alt="6ä¸ªæ¸²æŸ“å›¾"></p>
<p>æ¥ä¸‹æ¥æ–°å»ºé¡µé¢, å°†è¿™å…­å¼ å›¾ç‰‡åˆ†åˆ«è´´åˆ°ç«‹æ–¹ä½“çš„å…­ä¸ªé¢å°±å¤§åŠŸå‘Šæˆäº†. æ ¸å¿ƒä»£ç :<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">loader = <span class="keyword">new</span> THREE.TextureLoader();</div><div class="line"><span class="comment">/*</span></div><div class="line">    è™½ç„¶ä½¿ç”¨THREE.ImageUtils.loadTextureä¹Ÿæ²¡é—®é¢˜</div><div class="line">    ä¸è¿‡ä¼°è®¡æ˜¯ä¸ºäº†é€‚åº”Javascriptçš„å¼‚æ­¥å¼ç¼–ç¨‹</div><div class="line">    ThreeJSä¹Ÿé€æ­¥å°†ä¸€äº›ä¼šé˜»å¡çš„apiè½¬æ¢ä¸ºå¼‚æ­¥å›è°ƒçš„æ¨¡å¼</div><div class="line">    åŸæœ‰çš„è€apiä¼šè¢«æ ‡è®°ä¸ºdeprecated</div><div class="line">*/</div><div class="line"></div><div class="line">gardenMaterials = [</div><div class="line">    <span class="string">'garden/px.png'</span>,</div><div class="line">    <span class="string">'garden/nx.png'</span>,</div><div class="line">    <span class="string">'garden/py.png'</span>,</div><div class="line">    <span class="string">'garden/ny.png'</span>,</div><div class="line">    <span class="string">'garden/pz.png'</span>,</div><div class="line">    <span class="string">'garden/nz.png'</span></div><div class="line">];</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.all(gardenMaterials.map(<span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">    <span class="comment">//åŠ è½½å›¾ç‰‡, æ–°å»ºæè´¨, ä¼ ç»™ä¸‹ä¸€ä¸ªæ­¥éª¤.</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        loader.load(val, <span class="function"><span class="keyword">function</span> (<span class="params">texture</span>) </span>&#123;</div><div class="line">            resolve(<span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">                <span class="attr">map</span>: texture,</div><div class="line">                <span class="attr">side</span>: THREE.BackSide</div><div class="line">            &#125;));</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;)).then(<span class="function"><span class="keyword">function</span> (<span class="params">materials</span>) </span>&#123;</div><div class="line">    <span class="comment">//å°†æè´¨è´´åˆ°æ­£æ–¹ä½“çš„6ä¸ªé¢.</span></div><div class="line">    geometry = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>);</div><div class="line">    cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        geometry,</div><div class="line">        <span class="keyword">new</span> THREE.MeshFaceMaterial(materials)</div><div class="line">    );</div><div class="line">    scene.add(cube);</div><div class="line">    animate();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æ¸²æŸ“å‡ºæ¥çš„æ•ˆæœ, å…¶å®æ˜¯å®Œå…¨ä¸€æ ·çš„.<br><img src="//img.aotu.io/Littly/2016-01-01/rendered2.png" alt="æ•ˆæœ2"></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•åšå‡ºæ¥çš„å…¨æ™¯å±•ç¤ºå…¶å®è¿˜ä¼šæœ‰ä¸€äº›å°é—®é¢˜, æ¯”å¦‚å±•ç¤ºç©ºé—´çš„åº•éƒ¨ä¸é¡¶éƒ¨ä¼šæœ‰èšç„¦åœ¨ä¸€ç‚¹çš„ç°è±¡:<br><img src="//img.aotu.io/Littly/2016-01-01/point.png" alt="é¡¶éƒ¨ä¸åº•éƒ¨"><br>è¿™ç§æƒ…å†µå•é ä¸€ä¸ªå…¨æ™¯å›¾æ˜¯æ— æ³•è§£å†³çš„, åªèƒ½é€šè¿‡å¯¹åº•éƒ¨ä¸é¡¶éƒ¨å¤šæ‹ä¸€ä¸ªç…§ç‰‡æ¥è¡¥æ•‘. ç›®å‰, å…¨æ™¯å±•ç¤ºçš„æŠ€æœ¯å·²ç»æœ‰è®¸å¤šåº”ç”¨, æ¯”å¦‚è°·æ­Œåœ°å›¾ç™¾åº¦åœ°å›¾çš„è¡—æ™¯å±•ç¤º, æˆ–è€…æ˜¯ä¸Šé¢æåˆ°çš„å‡ ä¸ªH5é¡µé¢ä¸­ä¹Ÿæœ‰ç”¨åˆ°. ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆ, æ‡‚å¾—å…¶ä¸­çš„åŸç†å¹¶ä»˜è¯¸å®è·µ, è¿™æ˜¯éå¸¸é‡è¦çš„.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æµè§ˆå™¨ä¸­å®ç°å…¨æ™¯æµè§ˆ, å¬èµ·æ¥æ˜¯å¾ˆç„çš„äº‹æƒ…. ä½†å¦‚æœä½ æ¸…æ¥šå®ƒçš„åŸç†, è¿™äº‹å°±ç®€å•å¤šäº†.&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="three.js" scheme="https://aotu.io/tags/three-js/"/>
    
      <category term="panorama" scheme="https://aotu.io/tags/panorama/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯†Adobe After Effectsæ•ˆæœåˆ¶ä½œ</title>
    <link href="https://aotu.io/notes/2015/12/29/ae/"/>
    <id>https://aotu.io/notes/2015/12/29/ae/</id>
    <published>2015-12-29T14:05:18.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>Adobe After Effectsç®€ç§°â€œAEâ€æ˜¯Adobeå…¬å¸æ¨å‡ºçš„ä¸€æ¬¾å›¾å½¢è§†é¢‘å¤„ç†è½¯ä»¶ï¼Œç”¨äºé«˜ç«¯è§†é¢‘ç‰¹æ•ˆç³»ç»Ÿçš„ä¸“ä¸šç‰¹æ•ˆåˆæˆã€‚éšç€h5é¡µé¢åŠ¨æ•ˆçš„è¶Šæ¥è¶Šå¤æ‚ä»¥åŠh5æ•ˆæœè§†é¢‘åŒ–è¶‹åŠ¿ï¼ŒAEè¿™æ¬¾è½¯ä»¶ä¹Ÿæ¸æ¸æˆä¸ºäº†æˆ‘ä»¬åˆ¶ä½œç»šä¸½åŠ¨æ•ˆçš„å¿…å¤‡ç¥å™¨ã€‚</p>
<a id="more"></a>
<h3 id="é‚£æˆ‘ä»¬é€šè¿‡å°è¯•åˆ¶åšç®€å•æ‰‹æœºå¤©æ°”åŠ¨æ•ˆï¼Œæ¥äº†è§£AEçš„ç‰¹æ•ˆå§"><a href="#é‚£æˆ‘ä»¬é€šè¿‡å°è¯•åˆ¶åšç®€å•æ‰‹æœºå¤©æ°”åŠ¨æ•ˆï¼Œæ¥äº†è§£AEçš„ç‰¹æ•ˆå§" class="headerlink" title="é‚£æˆ‘ä»¬é€šè¿‡å°è¯•åˆ¶åšç®€å•æ‰‹æœºå¤©æ°”åŠ¨æ•ˆï¼Œæ¥äº†è§£AEçš„ç‰¹æ•ˆå§"></a>é‚£æˆ‘ä»¬é€šè¿‡å°è¯•åˆ¶åšç®€å•æ‰‹æœºå¤©æ°”åŠ¨æ•ˆï¼Œæ¥äº†è§£AEçš„ç‰¹æ•ˆå§</h3><p><img src="//img.aotu.io/pfan/ae/weather.gif" alt="å¤©æ°”">    </p>
<h3 id="åˆ¶ä½œç¨‹åºæµç¨‹"><a href="#åˆ¶ä½œç¨‹åºæµç¨‹" class="headerlink" title="åˆ¶ä½œç¨‹åºæµç¨‹"></a>åˆ¶ä½œç¨‹åºæµç¨‹</h3><blockquote>
<p>1.å·¥å…·ï¼š<code>After Effects</code> ã€<code>Photoshop</code><br>2.è®¾è®¡æµç¨‹ï¼š<code>After Effects</code> åœ¨ä¸€ä¸ªåˆæˆä¸­åˆ›å»ºè½¬åœºæ•ˆæœï¼Œå¦å¤–ä¸€ä¸ªåˆæˆä¸­åˆ›å»ºå±•ç¤ºæ•ˆæœï¼Œå¯¼å‡ºåˆ°PSã€‚<br>3.è¿›è¡Œå¸§å¤„ç†ï¼Œä¼˜åŒ–å¯¼å‡º<code>GIF</code></p>
</blockquote>
<h3 id="æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ä¸€æ­¥ä¸€æ­¥å¼€å§‹å§"><a href="#æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ä¸€æ­¥ä¸€æ­¥å¼€å§‹å§" class="headerlink" title="æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ä¸€æ­¥ä¸€æ­¥å¼€å§‹å§"></a>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ä¸€æ­¥ä¸€æ­¥å¼€å§‹å§</h3><h3 id="ç´ æ"><a href="#ç´ æ" class="headerlink" title="ç´ æ"></a>ç´ æ</h3><h4 id="1-ä¼¦æ•¦èƒŒæ™¯å›¾"><a href="#1-ä¼¦æ•¦èƒŒæ™¯å›¾" class="headerlink" title="1.ä¼¦æ•¦èƒŒæ™¯å›¾"></a>1.ä¼¦æ•¦èƒŒæ™¯å›¾</h4><p><img src="//img.aotu.io/pfan/ae/background.jpg" alt="ä¼¦æ•¦èƒŒæ™¯å›¾"></p>
<h4 id="2-æ‰‹æœºé€è§†æ•ˆæœæ¨¡æ¿"><a href="#2-æ‰‹æœºé€è§†æ•ˆæœæ¨¡æ¿" class="headerlink" title="2.æ‰‹æœºé€è§†æ•ˆæœæ¨¡æ¿"></a>2.æ‰‹æœºé€è§†æ•ˆæœæ¨¡æ¿</h4><p><img src="//img.aotu.io/pfan/ae/iphone.png" alt="æ‰‹æœºæ¨¡æ¿"></p>
<h3 id="åŸºæœ¬æ„å»º"><a href="#åŸºæœ¬æ„å»º" class="headerlink" title="åŸºæœ¬æ„å»º"></a>åŸºæœ¬æ„å»º</h3><h4 id="åˆ›å»ºèƒŒæ™¯è½¬åœºæ•ˆæœåˆæˆ"><a href="#åˆ›å»ºèƒŒæ™¯è½¬åœºæ•ˆæœåˆæˆ" class="headerlink" title="åˆ›å»ºèƒŒæ™¯è½¬åœºæ•ˆæœåˆæˆ"></a>åˆ›å»ºèƒŒæ™¯è½¬åœºæ•ˆæœåˆæˆ</h4><h4 id="æ­¥éª¤1"><a href="#æ­¥éª¤1" class="headerlink" title="æ­¥éª¤1"></a>æ­¥éª¤1</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ‰“å¼€AEï¼Œåˆæˆ&gt;æ–°å»ºåˆæˆ(Cmd+N)ï¼Œå°ºå¯¸ä¸º<code>518*715</code>ï¼Œå¸§æ•°<code>29</code>ï¼ŒæŒç»­<code>6s</code><br><img src="//img.aotu.io/pfan/ae/1.jpg" alt="step1"></p>
<h4 id="æ­¥éª¤2"><a href="#æ­¥éª¤2" class="headerlink" title="æ­¥éª¤2"></a>æ­¥éª¤2</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯¼å…¥ä¼¦æ•¦èƒŒæ™¯å›¾åƒï¼Œå°†å›¾åƒä¸¢å…¥åˆæˆ1ï¼Œè°ƒæ•´èƒŒæ™¯å›¾åƒå°ºå¯¸ï¼Œä½¿å…¶é€‚åˆç”»å¸ƒ<br><img src="//img.aotu.io/pfan/ae/2.jpg" alt="step2"></p>
<h4 id="æ­¥éª¤3"><a href="#æ­¥éª¤3" class="headerlink" title="æ­¥éª¤3"></a>æ­¥éª¤3</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ›å»º3ä¸ªè“è‰²æ¡†(ç”¨å½¢çŠ¶å›¾å±‚)ï¼Œè¿™äº›è“è‰²æ¡†å°†ä»å±å¹•ä¸Šæ–¹ä¸‹è½åˆ°å±å¹•åº•éƒ¨ï¼Œå®½åº¦<code>172</code>ã€<code>174</code>ã€<code>172px</code>(åœ¨AEä¸­ï¼Œå°ºå¯¸ç‰¹åˆ«ä¸å¥½ç¡®å®šï¼Œæˆ‘ä»¬å¯ä»¥COM+Ræ‰“å¼€æ ‡å°ºå»åŒ¹é…)ï¼Œè‰²å€¼<code>#063857</code>ã€<code>#145071</code>ã€<code>#416C8D</code>ã€‚ä¸‰ä¸ªæ–¹æ¡†ä¸Šæ–¹çš„æ–¹æ¡†å®½åº¦640px,è¾“å…¥ç›¸åº”æ–‡æœ¬ã€‚<br><img src="//img.aotu.io/pfan/ae/3.jpg" alt="step3"></p>
<h4 id="æ­¥éª¤4"><a href="#æ­¥éª¤4" class="headerlink" title="æ­¥éª¤4"></a>æ­¥éª¤4</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”¨é’¢ç¬”å‹¾å‹’å‡ºç®€å•äº‘æœµå’Œ6ç‰‡é›ªèŠ±ç©ºå¿ƒåœ†(æˆ–è€…å»æ‰¾ç´ æ,è¿™é‡Œçš„äº‘æœµï¼Œå°±æ˜¯æ‰¾çš„pngå›¾ç‰‡)<br><img src="//img.aotu.io/pfan/ae/4.jpg" alt="step4"></p>
<h4 id="åˆ›å»ºæ‰‹æœºå±•ç¤ºæ•ˆæœåˆæˆ"><a href="#åˆ›å»ºæ‰‹æœºå±•ç¤ºæ•ˆæœåˆæˆ" class="headerlink" title="åˆ›å»ºæ‰‹æœºå±•ç¤ºæ•ˆæœåˆæˆ"></a>åˆ›å»ºæ‰‹æœºå±•ç¤ºæ•ˆæœåˆæˆ</h4><h4 id="æ­¥éª¤1-1"><a href="#æ­¥éª¤1-1" class="headerlink" title="æ­¥éª¤1"></a>æ­¥éª¤1</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ›å»ºåˆæˆ2ï¼Œå°ºå¯¸<code>1280 x 720</code>å¸§æ•°<code>29</code>ï¼Œæ—¶é—´<code>6s</code></p>
<h4 id="æ­¥éª¤2-1"><a href="#æ­¥éª¤2-1" class="headerlink" title="æ­¥éª¤2"></a>æ­¥éª¤2</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯¼å…¥iPhoneèƒŒæ™¯,è°ƒæ•´å°ºå¯¸ï¼Œå¢åŠ èƒŒæ™¯å±‚æ‰©å±•ã€‚<br><img src="//img.aotu.io/pfan/ae/5.jpg" alt="step2">    </p>
<h4 id="æ­¥éª¤3-1"><a href="#æ­¥éª¤3-1" class="headerlink" title="æ­¥éª¤3"></a>æ­¥éª¤3</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æŠŠåˆæˆ1æ‹–åˆ°åˆæˆ2é‡Œé¢,é€‰ä¸­åˆæˆ1ï¼Œåœ¨æ•ˆæœé¢æ¿ï¼Œé€‰æ‹©æ•ˆæœ&gt;æ‰­æ›²&gt;è¾¹è§’å®šä½ï¼Œè®©åˆæˆ1çš„4ä¸ªè§’å¯¹ä¸Šæ¨¡æ¿ä¸­å±å¹•çš„4ä¸ªè§’ï¼Œå˜æˆå¦‚ä¸‹å½¢å¼ã€‚<br><img src="//img.aotu.io/pfan/ae/6.jpg" alt="step3"></p>
<p>ä»¥ä¸ŠåŸºæœ¬çš„åˆæˆæ„å»ºéƒ½å·²ç»åšå®Œäº†ï¼Œé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å®ç°åŠ¨æ•ˆ</p>
<h3 id="åŠ¨æ•ˆåˆ¶ä½œ"><a href="#åŠ¨æ•ˆåˆ¶ä½œ" class="headerlink" title="åŠ¨æ•ˆåˆ¶ä½œ"></a>åŠ¨æ•ˆåˆ¶ä½œ</h3><h4 id="åŠ¨æ•ˆåˆ¶ä½œé¢„æƒ³"><a href="#åŠ¨æ•ˆåˆ¶ä½œé¢„æƒ³" class="headerlink" title="åŠ¨æ•ˆåˆ¶ä½œé¢„æƒ³"></a>åŠ¨æ•ˆåˆ¶ä½œé¢„æƒ³</h4><ul>
<li>&nbsp;&nbsp;3ä¸ªè“è‰²æ–¹æ¡†å˜é•¿ï¼Œä¸åŒæ—¶çš„è½ä¸‹ï¼Œç„¶åå›å¼¹ç¼©å°ã€‚</li>
<li>&nbsp;&nbsp;é€æ˜æ¡†ä»åº•éƒ¨å¾€ä¸Šç§»åŠ¨ï¼Œè‡ªå§‹è‡³ç»ˆå®½åº¦ä¸å˜ã€‚</li>
<li>&nbsp;&nbsp;4ä¸ªæ¡†æŠµè¾¾ç›®çš„åœ°åï¼Œæ–‡å­—å¼€å§‹å‡ºç°ï¼Œè“è‰²æ¡†æ–‡å­—æ˜¯æ¯”ä¾‹æ‰©å¤§+ä»ä¸é€æ˜å˜é€æ˜ï¼Œé€æ˜æ¡†ä¸­å¾—æ–‡å­—æ˜¯ä»ä¸é€æ˜å˜é€æ˜ã€‚</li>
<li>&nbsp;&nbsp;äº‘æœµå›¾æ ‡ï¼ŒåŒæ—¶ä¼´éšé›ªèŠ±ã€‚</li>
<li>&nbsp;&nbsp;Snowyæ–‡å­—å‡ºç°ã€‚</li>
</ul>
<h3 id="åŠ¨æ•ˆå®ç°"><a href="#åŠ¨æ•ˆå®ç°" class="headerlink" title="åŠ¨æ•ˆå®ç°"></a>åŠ¨æ•ˆå®ç°</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨å®ç°åŠ¨æ•ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´è¯´ï¼ŒAEé‡Œé¢å¦‚ä½•å®ç°åŠ¨æ•ˆï¼Œä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯æ•ˆæœèœå•ä¸‹çš„æ•ˆæœåŠ¨æ•ˆï¼Œå¦ä¸€ç§å°±æ˜¯AEå¯¹å›¾å±‚çš„å˜æ¢å¤„ç†åŒ…å«ï¼šé”šç‚¹ã€ä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬ã€ä¸é€æ˜åº¦ï¼Œé€šè¿‡æ”¹å˜æ¿€æ´»è¿™å‡ ä¸ªæŒ‰é’®ï¼Œæ”¹å˜å›¾å±‚çš„å‚æ•°å½¢æˆå…³é”®å¸§ï¼Œä»è€Œå½¢æˆåŠ¨ç”»ã€‚<br><img src="//img.aotu.io/pfan/ae/7.jpg" alt="åŠ¨æ•ˆå®ç°">    </p>
<h4 id="ä¸‰ä¸ªè“è‰²æ¡†ç‰¹æ•ˆ"><a href="#ä¸‰ä¸ªè“è‰²æ¡†ç‰¹æ•ˆ" class="headerlink" title="ä¸‰ä¸ªè“è‰²æ¡†ç‰¹æ•ˆ"></a>ä¸‰ä¸ªè“è‰²æ¡†ç‰¹æ•ˆ</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ‰“å¼€èƒŒæ™¯åˆæˆï¼Œé€‰ä¸­ä¸‰ä¸ªè‰²å—<br><img src="//img.aotu.io/pfan/ae/8.jpg" alt="ç‰¹æ•ˆ"><br>å¤‡æ³¨<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.è¿™é‡Œåº”ç”¨äº†ä½ç½®å’Œç¼©æ”¾ï¼Œæ¥å®ç°åŠ¨æ•ˆã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.ä½ç½®ä¸Šï¼Œä¸‰ä¸ªè“è‰²çš„æ¡†ï¼Œé€šè¿‡ç¼©æ”¾<code>scale 0-100%</code>ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œä¸åŒå»¶è¿Ÿã€‚    </p>
<h4 id="é€æ˜æ¡†"><a href="#é€æ˜æ¡†" class="headerlink" title="é€æ˜æ¡†"></a>é€æ˜æ¡†</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€æ˜æ¡†çš„è¿åŠ¨ï¼Œä»ä¸‹åˆ°ä¸Šç¼“æ…¢çš„ä½ç§»ã€‚</p>
<h4 id="åº•éƒ¨æ–‡å­—"><a href="#åº•éƒ¨æ–‡å­—" class="headerlink" title="åº•éƒ¨æ–‡å­—"></a>åº•éƒ¨æ–‡å­—</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.ä¸‰ä¸ªè“è‰²æ¡†ï¼Œå½“è“è‰²æ¡†è§¦åŠåˆ°åº•éƒ¨æ—¶ï¼Œæ–‡å­—å¿«é€Ÿå¼¹å‡ºï¼Œä¸é€æ˜åº¦ä»<code>0</code>-&gt;<code>100%</code>,æ¯”ä¾‹ä»<code>0</code>-&gt;<code>100%</code><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.é€æ˜æ¡†ä¸­çš„æ–‡å­—éšé€æ˜æ¡†ä¸€èµ·è¿åŠ¨(ä½ç½®è®¾ç½®å¯ä»¥å‚è€ƒé€æ˜æ¡†)ï¼Œä½†æ˜¯ï¼Œå·¦ä¾§çš„æ–‡å­—å…ˆåˆ°ï¼Œå³ä¾§çš„-4åº¦ååˆ°ï¼Œæ³¨æ„æ—¶é—´è½´ä¸­å¾—è®¾ç½®ã€‚</p>
<h4 id="äº‘æœµ"><a href="#äº‘æœµ" class="headerlink" title="äº‘æœµ"></a>äº‘æœµ</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€æ˜æ¡†çš„æ–‡æœ¬å¼€å§‹å‡ºç°æ—¶ï¼Œäº‘æœµå‡ºç°ï¼Œå…ˆæ˜¯é€æ˜åº¦ä»0-100%ï¼›è€Œæ¯”ä¾‹å¼€å§‹æ—¶æ˜¯60%ï¼Œå½“é€æ˜åº¦åˆ°äº†<code>100%</code>æ—¶ï¼Œä»<code>60%</code>-&gt;<code>100%</code></p>
<h4 id="é›ªèŠ±å°åœ†ç‚¹"><a href="#é›ªèŠ±å°åœ†ç‚¹" class="headerlink" title="é›ªèŠ±å°åœ†ç‚¹"></a>é›ªèŠ±å°åœ†ç‚¹</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å½“äº‘æœµåŠ¨æ•ˆå®Œæˆåï¼Œé›ªèŠ±å°åœ†ç‚¹å¼€å§‹é€ä¸ªå‡ºç°ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.æ³¨æ„å°åœ†ç‚¹ä¼šé”™è½çš„å‘å³ç§»åŠ¨ï¼Œç„¶åå¼¹å›ï¼Œæ³¨æ„è¿åŠ¨é¡ºåºçš„è°ƒèŠ‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.æ³¨æ„å°åœ†ç‚¹é€ä¸ªå‡ºç°ï¼Œå› æ­¤é€æ˜åº¦çš„å˜åŒ–è¦åœ¨æ—¶é—´è½´ä¸Šä¾æ¬¡è®¾ç½®ã€‚<br><img src="//img.aotu.io/pfan/ae/9.jpg" alt="é›ªèŠ±å°åœ†ç‚¹">    </p>
<h4 id="Snowyæ–‡å­—æ•ˆæœ"><a href="#Snowyæ–‡å­—æ•ˆæœ" class="headerlink" title="Snowyæ–‡å­—æ•ˆæœ"></a>Snowyæ–‡å­—æ•ˆæœ</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™é‡Œè¿ç”¨äº†è’™ç‰ˆè¿åŠ¨ï¼Œæ¥æ‰“é€ Snowyæ–‡æœ¬é€æ¸å‡ºç°çš„æ•ˆæœï¼Œæ³¨æ„Snowyä¸é€æ˜åº¦ä¹Ÿè¦å˜åŒ–(è’™ç‰ˆï¼Œé€šè¿‡å›¾å±‚ç‚¹å‡»å³é”®æ·»åŠ è’™å±‚ï¼Œç„¶ååœ¨è’™å±‚ä¸­é€‰æ‹©alphaè’™å±‚)<br><img src="//img.aotu.io/pfan/ae/10.jpg" alt="æ–‡å­—æ•ˆæœ">    </p>
<h4 id="åˆ‡æ¢åˆ°åˆæˆæ‰‹æœºå¯¼å‡ºæ•ˆæœ"><a href="#åˆ‡æ¢åˆ°åˆæˆæ‰‹æœºå¯¼å‡ºæ•ˆæœ" class="headerlink" title="åˆ‡æ¢åˆ°åˆæˆæ‰‹æœºå¯¼å‡ºæ•ˆæœ"></a>åˆ‡æ¢åˆ°åˆæˆæ‰‹æœºå¯¼å‡ºæ•ˆæœ</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AEæ–‡ä»¶å¯ä»¥å¯¼å‡ºå¤šç§å½¢å¼æ–‡ä»¶ï¼Œä¸»èœå•åˆæˆæ¸²æŸ“ï¼ˆä¸»è¦åˆæˆå¯¼å‡ºåºåˆ—å¸§ç›¸å…³ï¼‰å’Œå¯¼å‡ºèœå•ï¼ˆæ–‡ä»¶ï¼&gt;åˆ›å»ºï¼&gt;åˆ›å»ºä»£ç†ï¼‰å°±å¯ä»¥è®¾ç½®éœ€è¦çš„æ ¼å¼ï¼Œå¸¸è§çš„æ ¼å¼æœ‰ï¼š</p>
<blockquote>
<p>3GP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MP4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MP3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MOV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GIF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SWF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PNGåºåˆ—å¸§å›¾ç‰‡</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™é‡Œå‘¢ï¼Œæˆ‘åšå®ŒåŠ¨æ•ˆåï¼Œæ˜¯å¯¼å‡º<code>.mov</code>æ–‡ä»¶ï¼Œç„¶åæŠŠ<code>.mov</code>æ–‡ä»¶å¯¼å…¥åˆ°<code>ps</code>ï¼Œ<code>COM+OPTION+SHIFT+S</code>å¯¼å‡º<code>gif</code>æ–‡ä»¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼ˆè®°å¾—è¦é€‰æ‹©å¾ªç¯æ’­æ”¾é¢ï¼Œä¸ç„¶åªä¼šæ’­æ”¾ä¸€æ¬¡ï¼‰ã€‚<br><img src="//img.aotu.io/pfan/ae/11.jpg" alt="æ•ˆæœ">    </p>
<p>åˆ°æ­¤ï¼Œè¿™ä¸ªå°ä¾‹å­æˆ‘ä»¬å°±å®ç°äº†ï¼Œæ•ˆæœå°±æ˜¯åˆå§‹çš„<code>GIF</code>æ•ˆæœå›¾ï¼Œæºæ–‡ä»¶<code>ä¸‹è½½</code> <a href="http://doc.pfan123.com/public/weather.zip" target="_blank" rel="external">weather</a></p>
<p>æœ€åï¼Œå¯¹æ¯”ä¸€ä¸‹H5ä¸­<code>AE</code>è§†é¢‘åŠ¨ç”»ã€<code>GIF</code>åŠ¨ç”»ã€<code>Canvas</code>åŠ¨ç”»ä¹‹é—´çš„å·®å¼‚</p>
<h2 id="ä¸‰è€…å¯¹æ¯”"><a href="#ä¸‰è€…å¯¹æ¯”" class="headerlink" title="ä¸‰è€…å¯¹æ¯”"></a>ä¸‰è€…å¯¹æ¯”</h2><p>è¿™é‡Œå°†æœ¬ä¾‹ï¼Œåˆ†åˆ«ç”¨äº†3ç§å½¢å¼åš<code>H5</code>åŠ¨ç”»ï¼Œ<a href="http://jdc.jd.com/fd/promote/201512/ae/video.html" target="_blank" rel="external"><code>AE</code>åŠ¨ç”»æ•ˆæœ</a>ï¼ˆAEæ•ˆæœå¯èƒ½è¦æ³¨æ„ä¸€ä¸‹ï¼Œç”±äºæ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„è§†é¢‘å‹ç¼©å·¥å…·ï¼Œåˆå§‹åŠ¨ç”»æœ‰ç‚¹å¡ï¼Œå¾ªç¯æ’­æ”¾æ˜¯å¾ˆæµç•…çš„ï¼‰ã€<a href="http://jdc.jd.com/fd/promote/201512/ae/canvas.html" target="_blank" rel="external"><code>Canvas</code>åŠ¨ç”»æ•ˆæœ</a>ã€<a href="http://jdc.jd.com/fd/promote/201512/ae/index.html" target="_blank" rel="external"><code>GIF</code>åŠ¨ç”»æ•ˆæœ</a>ï¼Œçœ‹çœ‹ä¸‰è€…ä¹‹é—´çš„å·®å¼‚ï¼ŒäºŒç»´ç å¦‚ä¸‹ï¼š<br><img src="//img.aotu.io/pfan/ae/12.jpg" alt="AE"></p>
<h5 id="å¤‡æ³¨ï¼šè¯·åœ¨wifiçš„ç¯å¢ƒä¸‹ä½“éªŒï¼Œç”±äºåŠ¨ç”»å¸§æ•°æ¯”è¾ƒå¤š173å¸§ï¼Œä½“éªŒå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…"><a href="#å¤‡æ³¨ï¼šè¯·åœ¨wifiçš„ç¯å¢ƒä¸‹ä½“éªŒï¼Œç”±äºåŠ¨ç”»å¸§æ•°æ¯”è¾ƒå¤š173å¸§ï¼Œä½“éªŒå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…" class="headerlink" title="å¤‡æ³¨ï¼šè¯·åœ¨wifiçš„ç¯å¢ƒä¸‹ä½“éªŒï¼Œç”±äºåŠ¨ç”»å¸§æ•°æ¯”è¾ƒå¤š173å¸§ï¼Œä½“éªŒå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…"></a>å¤‡æ³¨ï¼šè¯·åœ¨wifiçš„ç¯å¢ƒä¸‹ä½“éªŒï¼Œç”±äºåŠ¨ç”»å¸§æ•°æ¯”è¾ƒå¤š173å¸§ï¼Œä½“éªŒå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…</h5><ul>
<li><p><code>AEåŠ¨ç”»æ•ˆæœ</code>ï¼ŒåŠ¨æ•ˆæ•´ä½“è¿˜åŸåº¦æ¯”è¾ƒå¥½ï¼Œæ”¯æŒæµåª’ä½“åŠ è½½ï¼Œä½†æ˜¯<code>Android</code>ä¸<code>IOS</code>å±•ç°å½¢å¼ä¸ä¸€æ ·ï¼›<code>IOS</code>æ”¯æŒæ ¼å¼æ¯”<code>Android</code>å¤šï¼Œå¦‚<code>.movæ ¼å¼</code>ï¼›<code>IOS</code>å¯ä»¥éšè—æ’­æ”¾å™¨æ§åˆ¶æ¡ï¼Œ<code>Android</code>æ— æ³•è§£å†³ï¼›åˆå§‹æ•ˆæœä¸æ–‡ä»¶å¤§å°å½±å“æ¯”è¾ƒå¤§ã€‚</p>
</li>
<li><p><code>CanvasåŠ¨ç”»æ•ˆæœ</code>ï¼ŒåŠ¨ç”»è¿˜åŸåº¦æ— æ³•è¾¾åˆ°<code>GIF</code>ã€<code>AE</code>çš„æ•ˆæœï¼Œå¤åˆåŠ¨ç”»å¸§æ¯”è¾ƒå¤šï¼Œå›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œå¯¹åšé›ªç¢§å›¾å½±å“è¾ƒå¤§ï¼Œåšå‡ºçš„åŠ¨ç”»ä¼šå‡ºç°é—ªçƒä½ç«¯<code>Android</code>å‡ºç°æ˜æ˜¾å¡é¡¿ã€‚</p>
</li>
<li><p><code>GIFåŠ¨ç”»æ•ˆæœ</code>ï¼Œå¸§æ¯”è¾ƒå¤šï¼Œåœ¨éƒ¨åˆ†ä½ç«¯<code>Android</code>è¡¨ç°å¡é¡¿ï¼Œ<code>GIF</code>æ ¼å¼å›¾ç‰‡ï¼Œæ— æ³•å¾ˆå¥½å‹ç¼©ã€‚</p>
</li>
</ul>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AEåˆ¶åšåŠ¨ç”»ç‰¹æ•ˆçš„ç¥å™¨ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šå¥½ç©çš„ç‰¹æ•ˆç­‰å¾…æˆ‘ä»¬å»å­¦ä¹ æ€è€ƒï¼Œä»¥åŠç»“åˆåˆ°å¹³æ—¶çš„å·¥ä½œä¸­ã€‚åœ¨ç§»åŠ¨ç«¯h5å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°æ¯”è¾ƒå¤æ‚çš„äº¤äº’ç‰¹æ•ˆå¸§æ¯”è¾ƒå¤šï¼Œå¯èƒ½å¾ˆå¤šæ—¶å€™å¤§å®¶ä¼šé€‰æ‹©<code>GIF</code>ï¼Œå¸§åŠ¨ç”»ï¼Œ<code>Canvas</code>åŠ¨ç”»æ¥å®ç°æ•ˆæœï¼Œå¯æ˜¯å¾€å¾€åšå‡ºæ¥çš„åŠ¨ç”»å±•ç¤ºæ•ˆæœï¼Œæ— æ³•è¾¾åˆ°é¢„æƒ³çš„æ•ˆæœï¼Œæˆ–å¤šæˆ–å°‘çš„å¯¼è‡´è®¾å¤‡å¡é¡¿ï¼ŒåŠ è½½è¿‡æ…¢ç­‰ç°è±¡ã€‚åœ¨æˆ‘ä»¬äº†è§£äº†è¿™äº›ä¹‹åï¼Œå¯ä»¥é€šè¿‡<code>AE</code>æ¢ä¸€ç§å°è¯•ï¼Œåšæ›´æœ‰è¶£çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<h4 id="å­¦ä¹ èµ„æ–™ï¼š"><a href="#å­¦ä¹ èµ„æ–™ï¼š" class="headerlink" title="å­¦ä¹ èµ„æ–™ï¼š"></a>å­¦ä¹ èµ„æ–™ï¼š</h4><p><a href="http://www.videocopilot.net/" target="_blank" rel="external">videocopilot</a><br><a href="http://www.newcger.com/" target="_blank" rel="external">newcger</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Adobe After Effectsç®€ç§°â€œAEâ€æ˜¯Adobeå…¬å¸æ¨å‡ºçš„ä¸€æ¬¾å›¾å½¢è§†é¢‘å¤„ç†è½¯ä»¶ï¼Œç”¨äºé«˜ç«¯è§†é¢‘ç‰¹æ•ˆç³»ç»Ÿçš„ä¸“ä¸šç‰¹æ•ˆåˆæˆã€‚éšç€h5é¡µé¢åŠ¨æ•ˆçš„è¶Šæ¥è¶Šå¤æ‚ä»¥åŠh5æ•ˆæœè§†é¢‘åŒ–è¶‹åŠ¿ï¼ŒAEè¿™æ¬¾è½¯ä»¶ä¹Ÿæ¸æ¸æˆä¸ºäº†æˆ‘ä»¬åˆ¶ä½œç»šä¸½åŠ¨æ•ˆçš„å¿…å¤‡ç¥å™¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Adobe After Effects" scheme="https://aotu.io/tags/Adobe-After-Effects/"/>
    
      <category term="AE" scheme="https://aotu.io/tags/AE/"/>
    
      <category term="AE movie" scheme="https://aotu.io/tags/AE-movie/"/>
    
  </entry>
  
  <entry>
    <title>Safari 9.0çš„æ–°ç‰¹æ€§</title>
    <link href="https://aotu.io/notes/2015/12/23/new-safari-9/"/>
    <id>https://aotu.io/notes/2015/12/23/new-safari-9/</id>
    <published>2015-12-23T13:42:19.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>è‹¹æœçš„ OS åœ¨ä¸æ–­å‘å±•ï¼ŒSafari äº¦è¶Šå˜å¼ºå¤§æ€§æ„Ÿï¼Œåœ¨æœ€æ–°çš„ 9.0 ç‰ˆæœ¬å½“ä¸­ï¼ŒSafari å¢åŠ äº†ä¸å°‘æ–°çš„ç‰¹æ€§ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹å’Œ Web å‰ç«¯å¯†åˆ‡ç›¸å…³çš„ã€‚</p>
<a id="more"></a>
<h2 id="Viewport-Changes"><a href="#Viewport-Changes" class="headerlink" title="Viewport Changes"></a>Viewport Changes</h2><p>å…³äºæ–° Safari å¯¹ Viewport çš„å½±å“æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢ä¸€æ®µå¼•è‡ªè‹¹æœå¼€å‘è€…å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼š</p>
<blockquote>
<p>Viewport meta tags using â€œwidth = content-widthâ€ cause the page to scale down to fit content that overflows the viewport bounds. You can override this behavior by adding â€œshrink-to-fit = noâ€ to your meta tag as shown below. The added value will prevent the page from scaling to fit the viewport.</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ° Safari å°†ä¼šå¯¹æœ‰å†…å®¹æº¢å‡º Viewport åŒºåŸŸçš„é¡µé¢è¿›è¡Œç¼©æ”¾é€‚é…ï¼Œä½¿æº¢å‡ºçš„å†…å®¹å®Œæ•´å±•ç¤ºè€Œä¸å‡ºç°æ»šåŠ¨æ¡ï¼Œè€Œåœ¨ Viewport è®¾ç½®ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°å±æ€§ <code>shrink-to-fit = no</code>ï¼Œè¯¥å±æ€§å¯ä»¥ç¦æ­¢è¿™ç§ç¼©æ”¾è¡Œä¸ºçš„å‘ç”Ÿã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹è¯¥ä½“è´´è¡Œä¸ºå¯¹é¡µé¢çš„å½±å“ã€‚</p>
<p>åœ¨ Safari 9.0 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå½“ viewport meta æ ‡ç­¾çš„ content å±æ€§æœ‰è®¾ç½®çš„æ—¶å€™ï¼Œ<strong>å¦‚æœé¡µé¢å†…å®¹æº¢å‡º viewport çš„å®šä¹‰åŒºåŸŸ</strong>ï¼Œé‚£ä¹ˆé¡µé¢å°†ä¼šå‡ºç°æ»šåŠ¨æ¡ï¼Œå¦‚ä¸‹é¢çš„é¡µé¢ï¼Œè¯¥é¡µé¢çš„ viewport è®¾ç½®ä¸ºï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta <span class="attr">name="viewport"</span> <span class="attr">content="width=device-width,</span> <span class="attr">initial-scale=1.0,</span> <span class="attr">maximum-scale=1.0,</span> <span class="attr">user-scalable=no"</span> &gt;</div></pre></td></tr></table></figure>
<p><a href="http://missoy.me/mihan/h5/shop/index_nofit.html" target="_blank" rel="external">NotFixed</a></p>
<p>æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/fit.jpg" alt="image"></p>
<p>ç„¶è€Œåœ¨ Safari 9.0 çš„ç‰ˆæœ¬ï¼Œå³ä½¿ viewport è®¾ç½®äº† <code>initial-scale=1.0</code> å’Œ <code>user-scalable=no</code>ï¼ŒSafari ä¸ä»…é‡ç½®äº†è®¾å®šå¥½çš„æœ€å°ç¼©æ”¾å€¼é™åˆ¶ï¼Œè€Œä¸”è¿˜é‡æ–°æ¢å¤äº†ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾çš„æ“ä½œæƒé™ï¼Œ<a href="http://missoy.me/mihan/h5/shop/index_nofit.html" target="_blank" rel="external">ä¸Šè¿°é¡µé¢</a>åœ¨ Safari 9.0 ä¸­çš„æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/notfit.jpg" alt="image"></p>
<p>ä»ä¸Šé¢çš„æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼ŒSafariçš„ç¼©æ”¾è¡Œä¸ºå¯¹é¡µé¢è§†è§‰ç ´åæ€§è¿˜æ˜¯æ¯”è¾ƒå‰å®³çš„ï¼Œå¦‚æœæº¢å‡ºçš„å†…å®¹å¾ˆå¤šçš„è¯ï¼Œé¡µé¢å°±ä¼šè¢«ç¼©å¾—æ›´å°äº†ã€‚</p>
<p>åœ¨ viewport è®¾ç½®æ·»åŠ  <code>shrink-to-fit = no</code> è¿™ä¸ªå±æ€§åï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta <span class="attr">name="viewport"</span> <span class="attr">content="width=device-width,</span> <span class="attr">initial-scale=1.0,</span> <span class="attr">maximum-scale=1.0,</span> <span class="attr">user-scalable=no,shrink-to-fit</span> = no<span class="string">" &gt;</span></div></pre></td></tr></table></figure>
<p>Safari å°±ä¸ä¼šå†å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾å¤„ç†ï¼Œæ¢å¤ä¹‹å‰ç‰ˆæœ¬çš„å¤„ç†æ–¹å¼ï¼Œ</p>
<p><a href="http://missoy.me/mihan/h5/shop/index_fit.html" target="_blank" rel="external">Fixed</a></p>
<p>æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/fit.jpg" alt="image"></p>
<p>åœ¨æ—¥å¸¸çš„éœ€æ±‚ä¸­ï¼Œå°½ç®¡å†…å®¹æº¢å‡ºé¡µé¢çš„æƒ…å†µä¸ä¼šå¤ªå¸¸è§ï¼Œä½†ä¸ºäº†å¢å¼ºé¡µé¢çš„å®¹é”™èƒ½åŠ›ï¼Œä¿è¯é¡µé¢è§†è§‰çš„æ­£å¸¸æ˜¾ç¤ºï¼Œåœ¨ viewport è®¾ç½®ä¸­åº”è¯¥åŠ ä¸Š <code>shrink-to-fit = no</code> æ–°å±æ€§ã€‚</p>
<h2 id="Safariå†…å®¹æ‹¦æˆªæ‰©å±•"><a href="#Safariå†…å®¹æ‹¦æˆªæ‰©å±•" class="headerlink" title="Safariå†…å®¹æ‹¦æˆªæ‰©å±•"></a>Safariå†…å®¹æ‹¦æˆªæ‰©å±•</h2><p>Safari 9.0 æ–°å¢äº†å†…å®¹æ‹¦æˆªæ‰©å±•ï¼Œè¯¥æ‰©å±•ç¨‹åºèƒ½å¤Ÿä¾¿æ·é«˜æ•ˆåœ°æ‹¦æˆª cookiesã€å›¾ç‰‡ã€èµ„æºæ–‡ä»¶ã€å¼¹çª—ç­‰å†…å®¹ï¼Œä¸ä»…å¯ä»¥åœ¨ OS X ä¸Šä½¿ç”¨ï¼Œåœ¨ iOS ä¸Šä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>
<h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><p>å†…å®¹æ‹¦æˆªæ‰©å±•ç¨‹åºè´Ÿè´£æä¾›ä¸€ä¸ª JSON æ–‡ä»¶ç»™ Safariï¼Œè¿™ä¸ª JSON æ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œé¢å¯ä»¥é…ç½®ç›¸å…³è§„åˆ™ï¼ˆä¸»è¦ç”± triggers å’Œ actions ç»„æˆ ï¼‰æ‹¦æˆªæŒ‡å®šçš„å†…å®¹ï¼ŒSafari ä¼šå°†è¯¥ JSON æ–‡ä»¶è½¬æ¢æˆå­—èŠ‚ä»£ç ï¼Œè½¬æ¢åçš„å­—èŠ‚ä»£ç è¢«åº”ç”¨åˆ°æ‰€æœ‰åŠ è½½èµ„æºï¼Œæœ‰æ•ˆåœ°é¿å…äº†ç”¨æˆ·æµè§ˆå™¨çš„ä¿¡æ¯æ³„éœ²åˆ°æ‰©å±•ç¨‹åºã€‚</p>
<p>å†…å®¹æ‹¦æˆªæ‰©å±•ç¨‹åºçš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡ JSON æ–‡ä»¶çš„é…ç½®å’Œä¼ é€ï¼ŒSafari æ¥æ”¶åˆ°ä¹‹åå°±å¯ä»¥æ ¹æ® JSON çš„é…ç½®å¯¹ç›¸åº”çš„åŠ è½½èµ„æºè¿›è¡Œé€‚é…å®Œæˆæ‹¦æˆªã€‚</p>
<p>Xcodeå†…è®¾æœ‰å†…å®¹æ‹¦æˆªåº”ç”¨æ¨¡ç‰ˆï¼ˆContent Blocker App Extension templateï¼‰ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª <code>blockerList.json</code> JSON æ–‡ä»¶ï¼Œé»˜è®¤è®¾ç½®æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    &#123;</div><div class="line">        <span class="attr">"action"</span>: &#123;</div><div class="line">            <span class="attr">"type"</span>: <span class="string">"block"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">"trigger"</span>: &#123;</div><div class="line">            <span class="attr">"url-filter"</span>: <span class="string">"webkit.org/images/icon-gold.png"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>è¡¨ç¤ºå¯¹ç«™ç‚¹ webkit.org çš„ä¸€å¼ åä¸º icon-gold.png çš„å›¾ç‰‡è¿›è¡Œæ‹¦æˆªã€‚</p>
<p>é™¤äº†å¯ä»¥ä»åŠ è½½èµ„æºä¸Šæ‹¦æˆªå¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ CSS é€‰æ‹©å™¨å¯¹å…ƒç´ è¿›è¡Œéšè—ï¼Œå¦‚ä¸‹é¢çš„é…ç½®ä¼šå°†ç«™ç‚¹æ‰€æœ‰ class åä¸º â€œadsâ€ çš„ div è¿›è¡Œ <code>display: none !important;</code> æ ·å¼å¤„ç†ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    &#123;</div><div class="line">        <span class="attr">"action"</span>: &#123;</div><div class="line">            <span class="attr">"selector"</span>: <span class="string">"div.ads"</span>,</div><div class="line">            <span class="attr">"type"</span>: <span class="string">"css-display-none"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">"trigger"</span>: &#123;</div><div class="line">            <span class="attr">"url-filter"</span>: <span class="string">".*"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p><strong> æ³¨æ„ï¼šç”±äº 32 ä½æ¶æ„çš„è®¾å¤‡æ€§èƒ½é™åˆ¶ï¼ŒiOSä¸Šçš„å†…å®¹æ‹¦æˆªæ‰©å±•åªé€‚ç”¨åœ¨ 64 ä½æ¶æ„çš„è®¾å¤‡ä¸Šï¼Œè‹¹æœä» A7 å¤„ç†å™¨å¼€å§‹é‡‡ç”¨ 64ä½æ¶æ„ï¼Œå› æ­¤ iPhone 5s + çš„æœºå™¨æ‰å¯èƒ½ä½¿ç”¨æ­¤æ‰©å±•åº”ç”¨ </strong></p>
<p>å…³äºå‚æ•° action å’Œ trigger çš„æ›´å¤šä»‹ç»å¯ä»¥å‚é˜…ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_8.jpg" alt="image"> </p>
<p><a href="https://webkit.org/blog/3476/content-blockers-first-look/" target="_blank" rel="external">Introduction to WebKit Content Blockers</a></p>
<p><a href="https://www.hackingwithswift.com/safari-content-blocking-ios9" target="_blank" rel="external">Safari Content Blocking in iOS 9: a tutorial by example</a></p>
<h4 id="ä¸€ä¸ªç®€å•çš„å†…å®¹æ‹¦æˆªæ‰©å±•åº”ç”¨"><a href="#ä¸€ä¸ªç®€å•çš„å†…å®¹æ‹¦æˆªæ‰©å±•åº”ç”¨" class="headerlink" title="ä¸€ä¸ªç®€å•çš„å†…å®¹æ‹¦æˆªæ‰©å±•åº”ç”¨"></a>ä¸€ä¸ªç®€å•çš„å†…å®¹æ‹¦æˆªæ‰©å±•åº”ç”¨</h4><p>å®ç°ä¸€ä¸ªæ‹¦æˆªæ‰©å±•åº”ç”¨å¾ˆç®€å•ï¼Œç°åœ¨æˆ‘ä»¬ä»¥ <a href="http://missoy.me/mihan/h5/shop/index.html" target="_blank" rel="external">æ‹æ‹å°åº—é¦–é¡µ</a> ä¸ºä¾‹ï¼Œæ‹¦æˆªé¡¶éƒ¨å¹¿å‘ŠåŒºåŸŸï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_1.jpg" alt="image"></p>
<p>Update Xcode åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰“å¼€ Xcodeï¼Œæ–°å»ºç«‹ä¸€ä¸ª iOS Single View Application é¡¹ç›®ï¼ˆblocker-demoï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_2.jpg" alt="image"></p>
<p>ç„¶åæ–°å»ºç«‹ä¸€ä¸ª Targetï¼Œåœ¨ Application Extension æ¨¡ç‰ˆä¸­é€‰ä¸­ Content Blocker Extensionï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_3.jpg" alt="image"></p>
<p>å®Œæˆä¹‹åï¼Œå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­çœ‹åˆ°åˆšæ‰æ–°å¢çš„ Target æ–‡ä»¶å¤¹ï¼ˆblockerï¼‰ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸º <code>blockerList.json</code>çš„ JSON æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å°±å¯ä»¥é…ç½®éœ€è¦æ‹¦æˆªå†…å®¹çš„è§„åˆ™äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_4.jpg" alt="image"></p>
<p>ï¼ˆé¡¶éƒ¨å¹¿å‘ŠåŒºåŸŸçš„ class åä¸º <code>mod_ad</code>ï¼Œ ä¾‹å­ä¸­çš„é…ç½®å°†ä¼šå°†é¡¶éƒ¨å¹¿å‘ŠåŒºåŸŸéšè—ã€‚ï¼‰</p>
<p>ç„¶åä»¥æ•´ä¸ªé¡¹ç›®ä¸ºç¼–è¯‘å¯¹è±¡ï¼Œé€‰æ‹©éœ€è¦æµ‹è¯•çš„æ¨¡å—å™¨ï¼ˆè¿™é‡Œé€‰æ‹©äº† iPhone6ï¼‰è¿è¡Œç¨‹åº ï¼Œ<strong> åˆ‡è®°ä¸è¦é€‰ä¸­ content blocker çš„ Target ä¸ºç¼–è¯‘å¯¹è±¡è¿è¡Œï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šä¸èƒ½ç”Ÿæ•ˆ </strong>ã€‚</p>
<p>è¿è¡Œåæˆ‘ä»¬çœ‹åˆ°ç™½èŒ«èŒ«çš„ä¸€ç‰‡ï¼Œæ¨¡æ‹Ÿå™¨é»˜è®¤æ‰“å¼€äº†åˆšæ‰æ–°å»ºç«‹çš„åº”ç”¨ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å›åˆ°ä¸»ç•Œé¢ï¼ˆcommand + shift + hï¼‰è¿›å…¥ç³»ç»Ÿè®¾ç½®ç•Œé¢ï¼Œ åˆ° Safari &gt;Content Blockers é‡Œé¢å¯åŠ¨å†…å®¹æ‹¦æˆªæ‰©å±•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_5.jpg" alt="image"></p>
<p>å¯åŠ¨ Safariï¼Œæ‰“å¼€<a href="http://missoy.me/mihan/h5/shop/index.html" target="_blank" rel="external">æ‹æ‹å°åº—é¦–é¡µ</a>ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯åŠ¨å†…å®¹æ‹¦æˆªæ‰©å±•ä¹‹åï¼Œé¡¶éƒ¨çš„å¹¿å‘ŠåŒºåŸŸè¢«éšè—äº†</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_6.jpg" alt="image"></p>
<p>ç”¨ Safari çš„ Web æ£€æŸ¥å™¨çœ‹äº†ä¸€ä¸‹é¡µé¢ï¼Œå‘ç°ç”¨æˆ·æ ·å¼è¡¨é‡Œé’ˆå¯¹é¡¶éƒ¨å¹¿å‘ŠåŒºåŸŸå¤šäº†ä¸€ä¸ª <code>display: none !important;</code>æ ·å¼</p>
<p><img src="//img.aotu.io/mihanX/safari-9/blocker_7.jpg" alt="image"></p>
<p>æœ€åéœ€è¦å°†ç¨‹åºæ‰“åŒ…ï¼Œæ‰èƒ½åœ¨çœŸæœºè¿è¡Œï¼Œè²Œä¼¼éœ€è¦ 688RMB çš„å¼€å‘è€…å¸å·ï¼ŒåœŸè±ªä»¬å¯ä»¥å°½æƒ…è¯•ä¸€è¯•ã€‚</p>
<h3 id="OS-X"><a href="#OS-X" class="headerlink" title="OS X"></a>OS X</h3><p>åœ¨ OS X Safari çš„æ‰©å±•åˆ›å»ºå™¨ï¼ˆExtension Builderï¼‰åŠ å…¥æ‹¦æˆª JSON æ–‡ä»¶ï¼ˆå¦‚ä¸‹å›¾ï¼‰æˆ–è€…åœ¨ Safari æ‰©å±•å¯¹è±¡ä¸­ä½¿ç”¨æ–°å¢çš„ setContentBlocker API å°±å¯ä»¥å®ç°å†…å®¹æ‹¦æˆªåŠŸèƒ½äº†</p>
<p><img src="https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewInSafari/Art/ExtensionBuilder_AdBlocker_2x.png" alt="image"></p>
<p><strong> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨äºæ‹¦æˆªå†…å®¹çš„ onbeforeload äº‹ä»¶å’Œ canLoad ä¿¡æ¯å·²è¢«å¼ƒç”¨ </strong></p>
<p>æ›´å¤šæœ‰å…³ Safari å†…å®¹æ‹¦æˆªæ‰©å±•ä»‹ç»ï¼š</p>
<p><a href="https://www.hackingwithswift.com/safari-content-blocking-ios9" target="_blank" rel="external">Safari Content Blocking in iOS 9: a tutorial by example</a></p>
<p><a href="http://www.cnblogs.com/CocoonJin/p/4701050.html" target="_blank" rel="external">iOS 9ä¹‹Safariå¹¿å‘Šæ‹¦æˆªå™¨ï¼ˆContent Blockerï¼‰</a></p>
<h2 id="System-Font-Support"><a href="#System-Font-Support" class="headerlink" title="System Font Support"></a>System Font Support</h2><h3 id="apple-system"><a href="#apple-system" class="headerlink" title="-apple-system"></a>-apple-system</h3><p>è‹¹æœæ“ä½œç³»ç»Ÿä¼šä»ä¸¤ç§ä¸åŒå¤–è§‚å’Œå¤§å°çš„å­—ä½“è¿›è¡Œè‡ªåŠ¨è½¬æ¢å»è°ƒèŠ‚ç³»ç»Ÿæ–°å­—ä½“ â€œSan Franciscoâ€ï¼Œå¯ä»¥é€šè¿‡ CSS è§„åˆ™</p>
<pre><code>font-family: -apple-system, sans-serif;
</code></pre><p>è®©ç³»ç»Ÿæ™ºèƒ½é€‰æ‹©é€‚é…æ“ä½œç³»ç»Ÿçš„å­—ä½“ã€‚</p>
<p>å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢ä¸¤å¼ åœ¨ç³»ç»Ÿ OS X 10.11.1 ä¸‹çš„å¯¹æ¯”å›¾ï¼š</p>
<p>æ²¡æœ‰æ·»åŠ  <code>-apple-system</code> å±æ€§å€¼ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/sys-font-no.png" alt="image"></p>
<p>æ·»åŠ äº† <code>-apple-system</code> å±æ€§å€¼ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/sys-font-yes.png" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°æ·»åŠ äº† <code>-apple-system</code>ï¼Œå­—ä½“å˜å¾—æ›´åœ†æ¶¦é”åˆ©</p>
<p><strong>å»ºè®®ï¼šåœ¨ <code>font-family</code> å±æ€§åŠ ä¸Š <code>-apple-system</code> å±æ€§å€¼ã€‚</strong></p>
<p>å›¾ç‰‡çœ‹ä¸å‡ºå·®åˆ«çš„åŒå­¦è¯·ç”¨ OS X Safari 9.0 æ‰“å¼€ä»¥ä¸‹é“¾æ¥ï¼š</p>
<p><a href="http://missoy.me/mihan/demo/sys-font.html" target="_blank" rel="external">System Font Support</a></p>
<p><img src="//img.aotu.io/mihanX/safari-9/sys-font-qrcode.png" alt="image"></p>
<p>æ›´å¤šå…³äº System Font Support ä»‹ç» ï¼š<a href="https://webkit.org/blog/3709/using-the-system-font-in-web-content/" target="_blank" rel="external">Using the System Font in Web Content</a></p>
<p>é™„ï¼š<a href="http://www.jiemian.com/article/392197.html" target="_blank" rel="external">ã€Šåœ¨åæ§½iOS 9çš„æ–°å­—ä½“ä¹‹å‰ï¼Œä½ åº”è¯¥äº†è§£è¿™äº›ã€‹</a></p>
<h3 id="iOS-text-style-keywords"><a href="#iOS-text-style-keywords" class="headerlink" title="iOS text-style keywords"></a>iOS text-style keywords</h3><p>Safari 9.0é™¤äº†æ”¯æŒ <code>-apple-system</code> æ–°å­—ä½“ç‰¹æ€§ä¹‹å¤–ï¼Œåœ¨ iOS å¹³å°æä¾›äº†æ›´ä¸°å¯Œæ›´å…·æ´»åŠ›çš„æ–‡æœ¬æ ·å¼ï¼Œè¯¥æ–‡æœ¬æ ·å¼ä¸ä»…ä»…æ˜¯ç‰¹å®šçš„å­—ä½“ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ <code>font</code> æ ·å¼ï¼Œå¦‚å­—é‡å’Œå­—å·ï¼Œå› æ­¤åªèƒ½ä»¥ <code>font</code> æ¥å®šä¹‰ï¼š</p>
<ul>
<li>font: -apple-system-body;</li>
<li>font: -apple-system-headline;</li>
<li>font: -apple-system-subheadline;</li>
<li>font: -apple-system-caption1;</li>
<li>font: -apple-system-caption2;</li>
<li>font: -apple-system-footnote;</li>
<li>font: -apple-system-short-body;</li>
<li>font: -apple-system-short-headline;</li>
<li>font: -apple-system-short-subheadline;</li>
<li>font: -apple-system-short-caption1;</li>
<li>font: -apple-system-short-footnote;</li>
<li>font: -apple-system-tall-body;</li>
</ul>
<p>åŠ ä¸Šè¿™äº›å±æ€§åœ¨ iOS ä¸Šä¼šæœ‰ä¸åŒçš„è¡¨ç°ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/sys-font.png" alt="image"></p>
<p>æœ‰å…´è¶£çš„åŒäº‹å» <a href="http://missoy.me/mihan/demo/sys-font.html" target="_blank" rel="external">Demo</a> é¡µçœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/sys-font-qrcode.png" alt="image"></p>
<h2 id="CSS-Scroll-Snapping"><a href="#CSS-Scroll-Snapping" class="headerlink" title="CSS Scroll Snapping"></a>CSS Scroll Snapping</h2><p>2015å¹´3æœˆ26æ—¥ï¼ŒW3Cçš„CSSå·¥ä½œç»„å‘å¸ƒäº†CSSæ»šåŠ¨ç•Œé™ç‚¹æ¨¡å—ï¼ˆCSS Scroll Snap Points Level 1ï¼‰çš„é¦–ä»½å·¥ä½œè‰æ¡ˆï¼ˆFirst Public Working Draftï¼‰ã€‚åœ¨æµè§ˆå¯ä»¥è¿ç»­ä¸Šä¸‹æ»šåŠ¨æˆ–å·¦å³æ»šåŠ¨çš„è¿ç»­é¡µé¢æˆ–ä¸€ç»„å›¾ç‰‡æ—¶ï¼Œé€šè¿‡è§¦æ‘¸å±çš„è§¦æ‘¸æ»‘åŠ¨æˆ–é¼ æ ‡æ»šè½´çš„æ»šåŠ¨æ“ä½œå¯ä»¥è·å¾—è¾ƒå¥½ç”¨æˆ·ä½“éªŒã€‚</p>
<p>Safari 9.0 çš„æ–°ç‰¹æ€§æ”¯æŒå¼ºå¤§çš„ CSS Scroll Snapï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨CSSè½»æ¾å®ç°ç½‘ç«™å¸¸è§çš„è½®æ’­å›¾æ»šåŠ¨ç‰¹æ•ˆ</p>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ <a href="http://missoy.me/mihan/demo/scroll-snap.html" target="_blank" rel="external">Demo</a> æ„Ÿå—ä¸€ä¸‹ ï¼Œè¯·ç”¨ Safari 9.0 æ‰“å¼€</p>
<p><img src="//img.aotu.io/mihanX/safari-9/scroll-snap_9.jpg" alt="image"></p>
<p>ä½¿ç”¨ Scroll Snap éœ€è¦çš„ç»“æ„åŒ…å«è£…è½½æ»šåŠ¨å…ƒç´ çš„å®¹å™¨å’Œéœ€è¦æ»šåŠ¨çš„å…ƒç´ ï¼š</p>
<pre><code>&lt;div class=&quot;scroll_container&quot;&gt;
    &lt;div class=&quot;scroll_elements&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;scroll_elements&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;scroll_elements&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;scroll_elements&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>Scroll Snap ä¸€å…±æœ‰5ä¸ªCSSå±æ€§å¯ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ </p>
<ul>
<li><p>scroll-snap-typeï¼šå®šä¹‰æ»šåŠ¨ç•Œé™çš„ç±»å‹ï¼Œæœ‰ä¸‰ä¸ªå±æ€§å€¼å¯é€‰ï¼Œ <code>none</code> | <code>mandatory</code> | <code>proximity</code>ï¼Œåˆå§‹å€¼ä¸º <code>none</code>ï¼Œ<strong>ç›®å‰ WebKit åªæ”¯æŒ <code>mandatory</code></strong>ã€‚</p>
</li>
<li><p>scroll-snap-points-xï¼šå®šä¹‰æ»šåŠ¨å®¹å™¨ X è½´æ–¹å‘çš„ scroll sanp ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå±æ€§å€¼å¯é€‰ï¼Œ<code>none</code>| <code>repeat(&lt;length&gt;)</code>ï¼Œåˆå§‹å€¼ä¸º <code>none</code></p>
</li>
<li><p>scroll-snap-points-yï¼šå®šä¹‰æ»šåŠ¨å®¹å™¨ Y è½´æ–¹å‘çš„ scroll sanp ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå±æ€§å€¼å¯é€‰ï¼Œ<code>none</code> | <code>repeat(&lt;length&gt;)</code>ï¼Œåˆå§‹å€¼ä¸º <code>none</code></p>
</li>
<li><p>scroll-snap-destinationï¼šå®šä¹‰æ»šåŠ¨å…ƒç´ åœ¨æ»šåŠ¨å®¹å™¨çš„å¯¹é½åæ ‡ç‚¹ï¼Œå±æ€§å€¼ä¸º <code>&lt;position&gt;</code>ï¼Œåˆå§‹å€¼ä¸ºï¼š<code>0px 0px</code></p>
</li>
<li><p>scroll-snap-coordinateï¼šå®šä¹‰æ»šåŠ¨å…ƒç´ ä¸æ»šåŠ¨å®¹å™¨å¯¹é½ç‚¹é‡åˆçš„åæ ‡ç‚¹ï¼Œå±æ€§å€¼ä¸º <code>none</code> | <code>&lt;position&gt;</code>ï¼Œåˆå§‹å€¼ä¸º <code>none</code></p>
</li>
</ul>
<p>å±æ€§ <em>scroll-snap-type</em> ã€<em>scroll-snap-points-x</em>ã€<em>scroll-snap-points-y</em> å’Œ <em>scroll-snap-destination</em> åº”ç”¨åœ¨å®¹å™¨å…ƒç´ </p>
<p>å±æ€§ <em>scroll-snap-coordinate</em> åº”ç”¨åœ¨æ»šåŠ¨å…ƒç´ </p>
<p>æ»šåŠ¨å®¹å™¨ scroll snap åæ ‡ç‚¹ å’Œ æ»šåŠ¨å…ƒç´  scroll snap åæ ‡ç‚¹åˆ†åˆ«å¦‚ä¸‹å›¾çº¢è‰²åå­—å’Œé»„è‰²åå­—æ‰€ç¤ºï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/scroll-snap_10.png" alt="image"></p>
<p>æ­¤æ—¶çš„è®¾ç½®æ˜¯ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.scroll_container</span>&#123;</div><div class="line">	<span class="attribute">-webkit-scroll-snap-type</span>: mandatory;</div><div class="line">	<span class="attribute">-webkit-scroll-snap-destination</span>: <span class="number">50%</span> <span class="number">50%</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.scroll_elements</span>&#123;</div><div class="line">	<span class="attribute">-webkit-scroll-snap-coordinate</span>: <span class="number">50%</span> <span class="number">50%</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å±æ€§è¯¦ç»†ä½¿ç”¨æƒ…å†µè¯·å‚é˜… <a href="http://www.w3.org/TR/css-snappoints-1/" target="_blank" rel="external">CSS Scroll Snap Points Module Level 1</a></p>
<h3 id="éœ€è¦æ³¨æ„çš„"><a href="#éœ€è¦æ³¨æ„çš„" class="headerlink" title="éœ€è¦æ³¨æ„çš„"></a>éœ€è¦æ³¨æ„çš„</h3><ul>
<li><p>è¯¥è‰æ¡ˆè¿˜åœ¨ä¸æ–­ä¿®è¿›æ”¹è¿›ï¼ŒWebKit ç›®å‰åªæ”¯æŒå¸¦ -webkit- å‰è¾çš„å†™æ³•</p>
</li>
<li><p>è¦å¯ç”¨ scroll snap æ•ˆæœï¼Œæ»šåŠ¨å®¹å™¨å¿…é¡»å…·æœ‰é <code>none</code> å€¼çš„å±æ€§ <code>scroll-snap-type</code> </p>
</li>
<li><p>æ»šåŠ¨å®¹å™¨ <code>scroll-snap-points-x</code> å’Œ <code>scroll-snap-points-y</code> çš„å±æ€§è®¾ç½®ä¼šå¿½ç•¥æ»šåŠ¨å…ƒç´  <code>scroll-snap-coordinate</code> å±æ€§è®¾ç½®</p>
</li>
<li><p>æ»šåŠ¨å®¹å™¨ <code>scroll-snap-destination</code> å±æ€§ä¸æ»šåŠ¨å…ƒç´  <code>scroll-snap-coordinate</code> æ€»æ˜¯æˆå¯¹å‡ºç°çš„</p>
</li>
<li><p>æ»šåŠ¨å†…å®¹å‘ç”Ÿæ”¹å˜ï¼ˆå¦‚æ»šåŠ¨å®¹å™¨å¤§å°ã€æ»šåŠ¨å…ƒç´ å¤§å°ã€èŠ‚ç‚¹çš„æ”¹å˜ç­‰ï¼‰ä½¿å¾—æ»šåŠ¨å…ƒç´ çš„ scroll snap ç‚¹ä¸åœ¨æ»šåŠ¨å®¹å™¨çš„ scroll snap ç‚¹çš„æ—¶å€™ï¼Œæ»šåŠ¨åç§»å€¼ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
</li>
<li><p>ä¸åŒå°ºå¯¸çš„æ»šåŠ¨å…ƒç´ æ··åˆåœ¨ä¸€èµ·å‘ç”Ÿæ»šåŠ¨çš„æ—¶å€™ï¼Œåœ¨ X æˆ– Y è½´æ–¹å‘ä¸Šç¦»æ»šåŠ¨å®¹å™¨ scroll snap ç‚¹æœ€è¿‘çš„æ»šåŠ¨å…ƒç´  scroll snap ç‚¹æ–¹å‘è½´å°†ä¼šä¸æ»šåŠ¨å®¹å™¨ scroll snap ç‚¹çš„æ–¹å‘è½´é‡åˆï¼ˆå­˜åœ¨æ»šåŠ¨åŒºåŸŸçš„æ—¶å€™ï¼‰ã€‚</p>
</li>
</ul>
<p>æ›´å¤šå…³äº scroll-snap å±æ€§ Demo å¯æŸ¥çœ‹ <a href="https://www.webkit.org/blog/4017/scroll-snapping-with-css-snap-points/" target="_blank" rel="external">Scroll Snapping with CSS Snap Points</a></p>
<h2 id="Initial-Letter-Support"><a href="#Initial-Letter-Support" class="headerlink" title="Initial Letter Support"></a>Initial Letter Support</h2><p>Safari 9.0 æ”¯æŒ CSS <code>initial-letter</code>(è¦å¸¦ -webkit- å‰è¾) å±æ€§äº†ï¼Œä»¥å‰æˆ‘ä»¬é€šè¿‡ä¼ªå…ƒç´  <code>::first-letter</code>å®ç°é¦–å­—ä¸‹æ²‰çš„æ•ˆæœï¼Œä½†æ˜¯å±€é™æ€§æ¯”è¾ƒå¤šï¼š</p>
<ul>
<li><p>é¦–å­—æ¯çš„é«˜åº¦éœ€è¦é€šè¿‡è°ƒæ•´å­—å·å¤§å°å®ç°ï¼Œæ¯”è¾ƒéš¾ç²¾ç¡®åˆ°éœ€è¦è®¾ç½®çš„é«˜åº¦</p>
</li>
<li><p>æ®µè½å­—å·æ”¹å˜çš„æ—¶å€™ï¼Œé¦–å­—æ¯å­—å·å¹¶ä¸èƒ½è‡ªé€‚åº”æ”¹å˜ï¼Œå› æ­¤å¹¶ä¸èƒ½è‡ªé€‚åº”å®ç°å¯¹é½</p>
</li>
</ul>
<p><img src="//img.aotu.io/mihanX/safari-9/initial-letter_2.jpg" alt="image"></p>
<p>CSS <code>initial-letter</code> å±æ€§èƒ½å¾ˆå¥½çš„è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒçš„å±æ€§å€¼ï¼š </p>
<ul>
<li><p>normal â€“ åˆå§‹å€¼</p>
</li>
<li><p>[&lt;number&gt; &lt;integer&gt;] â€“ å®šä¹‰é¦–å­—æ¯çš„å¤§å°å’Œä¸‹æ²‰ä½ç½®</p>
<ul>
<li><p>&lt;number&gt; é¦–å­—æ¯çš„å¤§å°ï¼Œå¤§å°å€¼ä¸ºæ­£æ•°å€¼ï¼Œå­—é«˜å æ®çš„è¡Œæ•°ä¸ºå•ä½ï¼Œå¦‚ â€œ2â€ è¡¨ç¤ºé¦–å­—æ¯é«˜å¤§å°å æ®æ®µè½ä¸¤è¡Œ</p>
</li>
<li><p>&lt;integer&gt; é¦–å­—æ¯ä¸‹æ²‰çš„ä½ç½®ï¼Œå¤§å°å€¼ä¸ºä¸ä¸º0çš„æ•´æ•°ï¼Œè‹¥ç¼ºçœï¼Œåˆ™ä»¥ç¬¬ä¸€ä¸ªå‚æ•° &lt;number&gt;æ•°å€¼ä¸ºå‡†</p>
</li>
</ul>
</li>
</ul>
<p><code>initial-letter</code>å±æ€§åº”ç”¨åœ¨ä¼ªå…ƒç´  <code>::first-letter</code> æˆ–å®¹å™¨ç¬¬ä¸€ä¸ªè¡Œå†…å­å…ƒç´ </p>
<p><a href="http://dev.w3.org/csswg/css-inline/#initial-letter-styling" target="_blank" rel="external">w3æ–‡æ¡£ä»‹ç»</a>çš„ EXAMPLE æˆªå›¾å¼•ç”¨å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><img src="//img.aotu.io/mihanX/safari-9/initial-letter.jpg" alt="image"></p>
</blockquote>
<p>å®éªŒ <a href="http://missoy.me/mihan/demo/initial-letter.html" target="_blank" rel="external">Demo</a> å¦‚ä¸‹ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/initial-letter_3.png" alt="image"></p>
<h2 id="Backdrop-Filters"><a href="#Backdrop-Filters" class="headerlink" title="Backdrop Filters"></a>Backdrop Filters</h2><p>CSSèƒŒæ™¯æ»¤é•œå±æ€§ <code>backdrop-filter</code> å¯ä»¥è®©å…ƒç´ çš„èƒŒæ™¯æˆ–å…ƒç´ å±‚çº§ä»¥ä¸‹çš„å…ƒç´ åŠ ä¸Šæ»¤é•œæ•ˆæœï¼Œä»¥ä¸‹çš„å±æ€§å€¼åœ¨ Safari 9.0 å¾—åˆ°äº†å…¨é¢æ”¯æŒï¼š </p>
<ul>
<li><p><code>blur(&lt;length&gt;)</code>ï¼šæ¨¡ç³Šï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>0px</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>brightness([ &lt;number&gt; | &lt;percentage&gt; ])</code>ï¼šäº®åº¦ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>contrast([ &lt;number&gt; | &lt;percentage&gt; ])</code>ï¼šå¯¹æ¯”åº¦ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>drop-shadow( &lt;length&gt;{2,3} &lt;color&gt;?)</code>ï¼šæŠ•å½±ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸ºæ‰€æœ‰é•¿åº¦å€¼ä¸º <code>0</code>ï¼Œé•¿åº¦å€¼è‡³å°‘2ä¸ªï¼Œæœ€å¤š3ä¸ªï¼Œ<strong>æ³¨æ„ï¼šä¸æ”¯æŒæŠ•å½±æ‰©å±•å€¼å’Œæ··åˆæŠ•å½±</strong></p>
</li>
<li><p><code>grayscale([ &lt;number&gt; | &lt;percentage&gt; ] )</code>ï¼šç°åº¦ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>0</code>ï¼Œæœ€å¤§å€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>hue-rotate( &lt;angle&gt;)</code>ï¼šç›¸ä½ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>0deg</code></p>
</li>
<li><p><code>invert( [ &lt;number&gt; | &lt;percentage&gt; ])</code>ï¼šåç›¸ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>0</code>ï¼Œæœ€å¤§å€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>opacity([ &lt;number&gt; | &lt;percentage&gt; ] )</code>ï¼šé€æ˜åº¦ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>1</code>ï¼Œæœ€å¤§å€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>saturate([ &lt;number&gt; | &lt;percentage&gt; ])</code>ï¼šé¥±å’Œåº¦ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>1</code>ï¼Œä¸æ¥å—è´Ÿå€¼</p>
</li>
<li><p><code>sepia([ &lt;number&gt; | &lt;percentage&gt; ])</code>ï¼šä¹Œè´¼å¢¨ï¼ŒåŸå§‹æ•ˆæœå€¼ä¸º <code>0</code>ï¼Œæœ€å¤§å€¼ä¸º <code>1</code> æˆ– <code>100%</code>ï¼Œä¸æ¥å—è´Ÿå€¼ </p>
</li>
</ul>
<p>æ»¤é•œå±æ€§ <code>filter</code> åŒæ ·å…·æœ‰ä»¥ä¸Šçš„å±æ€§å€¼ï¼Œä¸èƒŒæ™¯æ»¤é•œ<code>backdrop-filter</code> ä¸åŒçš„æ˜¯ï¼Œ<code>filter</code> ä½œç”¨äºå…ƒç´ æœ¬èº«ï¼ˆæ–‡æœ¬ã€èƒŒæ™¯ç­‰ï¼‰ä»¥å…¶å­å…ƒç´ ï¼Œè€Œ <code>backdrop-filter</code> åªä½œç”¨äºå…ƒç´ æœ¬èº«çš„èƒŒæ™¯ï¼ˆæ–‡æœ¬åŠå…¶å­å…ƒç´ ä¸å—å½±å“ï¼‰ä»¥åŠå…¶å±‚çº§ä¸‹é¢çš„å…¶å®ƒå…ƒç´ ï¼Œå…·ä½“çš„æµ‹è¯•å‚è€ƒä¸‹é¢çš„ <a href="http://missoy.me/mihan/demo/filter.html" target="_blank" rel="external">Demo</a></p>
<p><img src="//img.aotu.io/mihanX/safari-9/filter2.jpg" alt="image"> </p>
<p><img src="//img.aotu.io/mihanX/safari-9/filter.jpg" alt="image"></p>
<p>æ›´å¤šå…³äº <code>backdrop-filter</code></p>
<p>WebKit.orgï¼š<a href="https://webkit.org/blog/3632/introducing-backdrop-filters/" target="_blank" rel="external">Introducing Backdrop Filters</a></p>
<p>w3cæ–‡æ¡£ï¼š<a href="https://drafts.fxtf.org/filters/#typedef-filter-function-list" target="_blank" rel="external">typedef-filter-function-list</a></p>
<h2 id="CSS3-Feature-Queries"><a href="#CSS3-Feature-Queries" class="headerlink" title="CSS3 Feature Queries"></a>CSS3 Feature Queries</h2><p>Safari 9.0 æ”¯æŒäº† CSS3 åŠŸèƒ½æŸ¥è¯¢ <code>@supports</code>ï¼Œå¯ä»¥å¯¹ CSS å±æ€§(åŒ…æ‹¬ä½†ä¸é™äºå¸¦å‰è¾çš„å±æ€§ï¼Œå¦‚ -webkit-,-moz- ç­‰)è¿›è¡Œæ£€æµ‹</p>
<h3 id="å•ä¸ªæ¡ä»¶æŸ¥è¯¢"><a href="#å•ä¸ªæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="å•ä¸ªæ¡ä»¶æŸ¥è¯¢"></a>å•ä¸ªæ¡ä»¶æŸ¥è¯¢</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* æ£€æµ‹æ˜¯å¦æ”¯æŒ display:flexboxï¼Œå¦‚æœæ”¯æŒä¾§æ‰§è¡Œä¸­æ‹¬å·çš„å†…å®¹ */</span></div><div class="line"><span class="meta">@supports</span> ( <span class="string">display:</span> flexbox ) &#123;</div><div class="line">  .selector&#123;</div><div class="line">  	...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¤šä¸ªå•ä»¶æŸ¥è¯¢"><a href="#å¤šä¸ªå•ä»¶æŸ¥è¯¢" class="headerlink" title="å¤šä¸ªå•ä»¶æŸ¥è¯¢"></a>å¤šä¸ªå•ä»¶æŸ¥è¯¢</h3><p>å¯ä»¥ä½¿ç”¨é€»è¾‘å…³é”®å­— <code>not</code>ã€<code>and</code>ã€<code>or</code> è¿›è¡Œå¤šä¸ªå•ä»¶æŸ¥è¯¢</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@supports ( <span class="keyword">box-shadow: </span><span class="number">2</span>px <span class="number">2</span>px <span class="number">2</span>px <span class="keyword">black </span>) <span class="keyword">or</span></div><div class="line">          ( -moz-<span class="keyword">box-shadow: </span><span class="number">2</span>px <span class="number">2</span>px <span class="number">2</span>px <span class="keyword">black </span>) <span class="keyword">or</span></div><div class="line">          ( -webkit-<span class="keyword">box-shadow: </span><span class="number">2</span>px <span class="number">2</span>px <span class="number">2</span>px <span class="keyword">black </span>) <span class="keyword">or</span></div><div class="line">          ( -o-<span class="keyword">box-shadow: </span><span class="number">2</span>px <span class="number">2</span>px <span class="number">2</span>px <span class="keyword">black </span>) &#123;</div><div class="line">  .selector&#123;</div><div class="line">  	...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="éœ€è¦æ³¨æ„çš„åœ°æ–¹"><a href="#éœ€è¦æ³¨æ„çš„åœ°æ–¹" class="headerlink" title="éœ€è¦æ³¨æ„çš„åœ°æ–¹"></a>éœ€è¦æ³¨æ„çš„åœ°æ–¹</h3><ul>
<li><p><code>@supports</code> åé¢æ€»æ˜¯è·Ÿç€ä¸€ä¸ªç©ºæ ¼ç¬¦å’Œä¸€ä¸ªæ‹¬å·ï¼Œ<code>é€»è¾‘å…³é”®å­—</code>å‰åæ€»æœ‰ä¸€ä¸ªç©ºæ ¼ç¬¦ã€‚å› æ­¤ï¼Œå†™æŸ¥è¯¢æ¡ä»¶çš„æ—¶å€™</p>
  <figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* é”™è¯¯çš„å†™æ³• */</span></div><div class="line"><span class="meta">@supports</span> <span class="string">display:</span> flexbox &#123;</div><div class="line"> 	<span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@supports</span>(<span class="string">display:</span> flexbox)&#123;</div><div class="line"> 	<span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@supports</span> (<span class="string">display:</span> flexbox)and(-webkit-scroll-snap-<span class="string">type:</span>mandatory) &#123;</div><div class="line"> 	<span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* æ­£ç¡®çš„å†™æ³• */</span></div><div class="line"><span class="meta">@supports</span> (<span class="string">display:</span> flexbox) &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"><span class="meta">@supports</span> (<span class="string">display:</span> flexbox) and (-webkit-scroll-snap-<span class="string">type:</span>mandatory) &#123;</div><div class="line"> 	<span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å¤šä¸ªå•ä»¶æŸ¥è¯¢ï¼Œå½“æœ‰å¤šä¸ªé€»è¾‘å…³é”®å­—æ··åˆä½¿ç”¨çš„æ—¶å€™ï¼ŒæŸ¥è¯¢è¯­å¥æœ€å¤–å±‚æœ€å¤šåªæœ‰ä¸€ä¸ªé€»è¾‘å…³é”®å­—ï¼š</p>
  <figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* é”™è¯¯çš„å†™æ³• */</span></div><div class="line">@supports (A) <span class="keyword">or</span> (B) <span class="keyword">and</span> (C) &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* æ­£ç¡®çš„å†™æ³• */</span></div><div class="line">@supports (A) <span class="keyword">or</span> ((B) <span class="keyword">and</span> (C)) &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">&#125;</div><div class="line">@supports ((A) <span class="keyword">or</span> (B)) <span class="keyword">and</span> (C) &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>@supports</code> æ›´è¯¦ç»†è¯´æ˜å¯å‚è€ƒï¼š<a href="http://www.w3.org/TR/css3-conditional/#at-supports" target="_blank" rel="external">at-supports</a>ã€‚</p>
<p><a href="http://missoy.me/mihan/demo/@supports.html" target="_blank" rel="external">Demoæµ‹è¯•</a></p>
<h2 id="CSS4-Selectors"><a href="#CSS4-Selectors" class="headerlink" title="CSS4 Selectors"></a>CSS4 Selectors</h2><p>ä»¥ä¸‹ CSS4 é€‰æ‹©å™¨åœ¨ Safari 9.0 å®Œå…¨æ”¯æŒäº†ï¼š</p>
<ul>
<li>å±æ€§é€‰æ‹©å™¨å¿½ç•¥å¤§å°å†™æ ‡è¯†ï¼ˆCase-insensitive attribute selectorsï¼‰</li>
<li><code>:any-link</code></li>
<li><code>:lang</code></li>
<li><code>:matches</code></li>
<li><code>:not</code></li>
<li><code>:nth-child</code></li>
<li><code>:placeholder-shown</code></li>
</ul>
<h3 id="Case-insensitive"><a href="#Case-insensitive" class="headerlink" title="Case-insensitive"></a>Case-insensitive</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€‰æ‹©ç¬¦ä¸­å±æ€§åå’Œå€¼çš„å¤§å°å†™æ•æ„Ÿæ€§å–å†³äºæ–‡æ¡£è¯­è¨€çš„æ•æ„Ÿæ€§ï¼Œä¸ºäº†ä½¿å…¶åŒ¹é…å¿½ç•¥å¤§å°å†™æ•æ„Ÿæ€§ä»¥åŠå…¶æ–‡æ¡£è¯­è¨€çš„æ•æ„Ÿæ€§ï¼Œå¯ä»¥åœ¨å±æ€§é€‰æ‹©å™¨çš„å…³é—­ç¬¦<code>]</code>å‰åŠ ä¸Šæ ‡è¯†ç¬¦ <code>i</code>ï¼Œè¿™æ ·ä¸ç®¡åœ¨ä»€ä¹ˆæ–‡æ¡£ï¼Œéƒ½èƒ½å¿½ç•¥å¤§å°å†™æ•æ„Ÿæ€§ï¼Œå¦‚ä»¥ä¸‹ä¾‹å­ï¼š</p>
<p>ç»“æ„ï¼š</p>
<pre><code>&lt;div class=&quot;box&quot; title=&quot;BOX&quot;&gt;Box&lt;/div&gt;
</code></pre><p>æ ·å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* .boxåˆå§‹èƒŒæ™¯è‰²ä¸ºç™½è‰² */</span></div><div class="line"><span class="selector-class">.box</span>&#123;</div><div class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">word-break</span>: break-all;</div><div class="line">	<span class="attribute">word-wrap</span>: break-word;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* å±æ€§å€¼å¤§å°å†™æ•æ„Ÿï¼Œå®Œå…¨åŒ¹é…ï¼Œ.boxèƒŒæ™¯å˜é»‘è‰² */</span></div><div class="line"><span class="selector-class">.box</span><span class="selector-attr">[title="BOX"]</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#000</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* ç”¨äº† CSS4 çš„ Case-insensitive å±æ€§é€‰æ‹©å™¨ï¼Œè‹¥æµè§ˆå™¨æ”¯æŒï¼Œå¤§å°å†™ä¸å†æ•æ„Ÿï¼Œèƒ½å®ŒæˆåŒ¹é…ï¼Œ.boxèƒŒæ™¯ç”Ÿæ•ˆå˜ä¸ºç°è‰² */</span></div><div class="line"><span class="selector-class">.box</span><span class="selector-attr">[title="box" i]</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#ccc</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…³äº Case-insensitive æ›´è¯¦ç»†ä»‹ç»ï¼š<a href="http://www.w3.org/TR/selectors4/#attribute-case" target="_blank" rel="external">w3ä»‹ç»æ–‡æ¡£ - Case-insensitive</a> </p>
<p>æµ‹è¯• <a href="http://missoy.me/mihan/demo/css4_selector.html" target="_blank" rel="external">Demo</a></p>
<p><img src="//img.aotu.io/mihanX/safari-9/css4_selector.jpg" alt="image"></p>
<h3 id="ä¼ªç±»-any-link"><a href="#ä¼ªç±»-any-link" class="headerlink" title="ä¼ªç±» :any-link"></a>ä¼ªç±» :any-link</h3><p>w3æ–‡æ¡£ä»‹ç»å¤§æ¦‚çš„æè¿°æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>å¦‚æœå…ƒç´ æœ‰å®šä¹‰ä¼ªç±» <code>:link</code>æˆ– <code>:visited</code> ï¼Œ<code>:any-link</code>å°†ä¼šå¯¹å…¶è¿›è¡ŒåŒ¹é…ã€‚</p>
</blockquote>
<p>äºæ˜¯å†™äº† Demo éªŒè¯äº†ä¸€ä¸‹</p>
<p>HTML:</p>
<pre><code>&lt;a href=&quot;http://aotu.io/&quot; title=&quot;&quot; class=&quot;lk&quot;&gt;å‡¹å‡¸Teamé“¾æ¥&lt;/a&gt;
</code></pre><p>CSS:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.lk</span>&#123;</div><div class="line">	<span class="attribute">display</span>: block;</div><div class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">30px</span>;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* é»‘è‰²èƒŒæ™¯ */</span></div><div class="line"><span class="selector-class">.lk</span><span class="selector-pseudo">:link</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#000</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* é»„è‰²èƒŒæ™¯ */</span></div><div class="line"><span class="selector-class">.lk</span><span class="selector-pseudo">:visited</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#ff0</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* çº¢è‰²èƒŒæ™¯ */</span></div><div class="line"><span class="selector-class">.lk</span><span class="selector-pseudo">:any-link</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#ff3737</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* ç™½è‰²èƒŒæ™¯ */</span></div><div class="line"><span class="selector-class">.lk</span><span class="selector-pseudo">:hover</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#fff</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* ç°è‰²èƒŒæ™¯ */</span></div><div class="line"><span class="selector-class">.lk</span><span class="selector-pseudo">:active</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#ccc</span>;</div><div class="line">	<span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»“æœå‘ç°ï¼š</p>
<ul>
<li><p><code>:any-link</code> Safari 9.0 ç”Ÿæ•ˆäº†ï¼ŒChromeã€Firefox å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚</p>
</li>
<li><p>ä¼ªç±» <code>:any-link</code> çš„ç¡®ä¼šå¯¹å·²å®šä¹‰æœ‰çš„ä¼ªç±»<code>:link</code> å’Œ <code>:visited</code>åŒ¹é…ï¼Œå¹¶é‡æ–°è¦†ç›–å…ƒç´ ç›¸åŒçš„CSSå±æ€§ï¼Œ è€Œ <code>:hover</code> å’Œ <code>:active</code> å¹¶æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œ<code>:hover</code> å’Œ <code>:active</code> ä¾ç„¶ç”Ÿæ•ˆ</p>
</li>
<li><p>CSSä»£ç è§£æçš„æ—¶å€™æ¸²æŸ“ <code>:any-link</code> å‰å°±æ¸²æŸ“äº† <code>:link</code> å’Œ <code>:visited</code>ï¼Œå› æ­¤åŒ¹é…æˆåŠŸäº†ï¼Œè€Œ <code>:hover</code> å’Œ <code>:active</code> å‡ºç°åœ¨ <code>:any-link</code> åé¢ï¼Œå¹¶ä¸èƒ½åŒ¹é…æˆåŠŸ</p>
</li>
</ul>
<p>è‹¥åŠ ä¸Š <code>-webkit-</code> å‰è¾ï¼ŒChrome äº¦èƒ½ç”Ÿæ•ˆã€‚</p>
<p>å¦‚æœå°† <code>:any-link</code> å‡ºç°ä½ç½®æ”¹å˜ï¼Œ<code>:any-link</code> å§‹ç»ˆåŒ¹é…å‡ºç°åœ¨ä»–ä¹‹å‰çš„ Link ç›¸å…³ä¼ªç±»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è¯•ä¸€ä¸‹ã€‚</p>
<p>å°å°æ€»ç»“äº†ä¸€ä¸‹ï¼š</p>
<ul>
<li><p><code>:any-link</code> Safari 9.0 ä¸éœ€è¦åŠ å‰è¾ï¼ŒChromeã€Firefox æµè§ˆå™¨éœ€è¦åŠ  <code>-webkit-</code>ã€<code>-moz-</code> å‰è¾ã€‚</p>
</li>
<li><p><code>:any-link</code> åŒ¹é…æœ‰æ•ˆæ€§å’Œä¹¦å†™é¡ºåºæœ‰å…³ï¼Œ<code>:any-link</code> åªå¯¹å‡ºç°åœ¨å…¶ä¹‹å‰çš„ Link ä¼ªç±»åŒ¹é…ç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<h4 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h4><p><strong>å†™ a æ ‡ç­¾æ ·å¼çš„æ—¶å€™ï¼Œåœ¨ <code>:hover</code> å’Œ <code>:active</code> å‰åº”è¯¥åŠ ä¸Š <code>:any-link</code> ä¼ªç±»æ ·å¼ï¼Œè¦†ç›–ç³»ç»Ÿé»˜è®¤çš„ <code>:link</code> å’Œ <code>:visited</code>ä¼ªç±»æ ·å¼ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">a&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">a</span>:-webkit-any-link&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">a</span>:-moz-any-link&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">a</span>:any-link&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">a</span>:hover&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">a</span>:active&#123;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…³äº <code>:any-link</code> æ›´è¯¦ç»†ä»‹ç»ï¼š <a href="http://www.w3.org/TR/selectors4/#the-any-link-pseudo" target="_blank" rel="external">w3ä»‹ç»æ–‡æ¡£ - :any-link</a> </p>
<p>å®éªŒ <a href="http://missoy.me/mihan/demo/css4_selector.html" target="_blank" rel="external">Demo</a></p>
<p><img src="//img.aotu.io/mihanX/safari-9/css4_selector.jpg" alt="image"></p>
<h3 id="ä¼ªç±»-matches"><a href="#ä¼ªç±»-matches" class="headerlink" title="ä¼ªç±» :matches()"></a>ä¼ªç±» :matches()</h3><p><code>:matches()</code> æ˜¯ä¸€ç§ç±»ä¼¼å‡½æ•°çš„ä¼ªç±»ï¼Œå¯ä»¥å°†ä¸åŒçš„é€‰æ‹©å™¨ä»¥æ•°ç»„å½¢å¼æ··åˆå½¢æˆä¸€ä¸ªé€‰æ‹©å™¨ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¹‹çœ‹ä½œæ˜¯CSSçš„ä¸€ç§è¯­æ³•ç³–ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code>:matches(section, article, aside, nav) h1 {
  color: #BADA55;
}

/* ç›¸å½“äºä¸‹é¢çš„ä»£ç  */
section h1,
article h1, 
aside h1,
nav h1 {
  color: #BADA55;
}
</code></pre><p>æ›´æ–¹ä¾¿ä¹¦å†™ä¸€äº›å¤æ‚çš„é€‰æ‹©å™¨ï¼Œå¦‚ï¼š</p>
<pre><code>:matches(section, article, aside, nav) :matches(h1, h2, h3, h4, h5, h6) {
    color: #BADA55;
}

/* ç›¸å½“äºä¸‹é¢çš„ä»£ç  */
section h1, section h2, section h3, section h4, section h5, section h6, 
article h1, article h2, article h3, article h4, article h5, article h6, 
aside h1, aside h2, aside h3, aside h4, aside h5, aside h6, 
nav h1, nav h2, nav h3, nav h4, nav h5, nav h6 {
    color: #BADA55;
}
</code></pre><p>å‡å°‘é‡å¤çš„ä¹¦å†™ï¼š</p>
<pre><code>.links:matches(:hover, :focus, :active) {
    color: #BADA55;
}

/* ç›¸å½“äºä¸‹é¢çš„ä»£ç  */
.links:hover, .links:focus, .links:active {
    color: #BADA55;
}    
</code></pre><p><strong>æ³¨æ„ï¼š<code>:matches()</code>ä¸èƒ½åµŒå¥—è€Œä¸”ä¸èƒ½ä¸ <code>:not()</code> ä¸€èµ·ä½¿ç”¨</strong>ï¼Œä»¥ä¸‹çš„å†™æ³•éƒ½æ˜¯ä¸å…è®¸çš„ï¼š</p>
<pre><code>/* Doesn&apos;t work */
:matches(:not(...))

/* Doesn&apos;t work */
:not(:matches(...))

/* Doesn&apos;t work */
:matches(:matches(...))
</code></pre><p>æ›´å¤šå…³äº <code>:matches()</code> å¯å‚è€ƒ </p>
<p>CSS-tricks ï¼š<a href="https://css-tricks.com/almanac/selectors/m/matches/" target="_blank" rel="external">:matches()</a></p>
<p>W3æ–‡æ¡£ï¼š<a href="http://www.w3.org/TR/selectors4/#matches" target="_blank" rel="external">matches</a></p>
<h3 id="ä¼ªç±»-placeholder-shown"><a href="#ä¼ªç±»-placeholder-shown" class="headerlink" title="ä¼ªç±» :placeholder-shown"></a>ä¼ªç±» :placeholder-shown</h3><p>å¦‚æœå…ƒç´  E è®¾ç½®äº†å±æ€§ <code>placeholder</code>ï¼Œå±æ€§å€¼ä¸ä¸ºç©ºå¹¶å‡ºç°åœ¨é¡µé¢çš„æ—¶å€™ï¼Œé‚£ä¹ˆ<code>E:placeholder-shown</code> å°±èƒ½åŒ¹é…åˆ°è¯¥å…ƒç´ ï¼Œå½“ <code>placeholder</code> æ–‡æœ¬åœ¨é¡µé¢æ¶ˆå¤±çš„æ—¶å€™ï¼ŒåŒ¹é…åˆ°çš„ç›¸åº”æ ·å¼ä¹Ÿä¼šæ¶ˆå¤±ï¼Œå¦‚ä»¥ä¸‹ <a href="http://missoy.me/mihan/demo/css4_selector.html" target="_blank" rel="external">Demo</a> æ‰€ç¤º:</p>
<p><img src="//img.aotu.io/mihanX/safari-9/css4_selector.jpg" alt="image"></p>
<h3 id="ä¼ªç±»-nth-childï¼Œ-notï¼Œ-lang"><a href="#ä¼ªç±»-nth-childï¼Œ-notï¼Œ-lang" class="headerlink" title="ä¼ªç±» :nth-childï¼Œ:notï¼Œ:lang"></a>ä¼ªç±» :nth-childï¼Œ:notï¼Œ:lang</h3><p>è¯¦ç»†ç”¨æ³•æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åˆ° w3æ–‡æ¡£ æŸ¥é˜…ï¼š</p>
<p><a href="http://www.w3.org/TR/selectors4/#the-lang-pseudo" target="_blank" rel="external">:lang - #the-lang-pseudo</a></p>
<p><a href="http://www.w3.org/TR/selectors4/#negation" target="_blank" rel="external">:not - #negation</a> </p>
<p><a href="http://www.w3.org/TR/selectors4/#the-nth-child-pseudo" target="_blank" rel="external">:nth-child - #the-nth-child-pseudo</a></p>
<h2 id="Unprefixed-CSS-Properties"><a href="#Unprefixed-CSS-Properties" class="headerlink" title="Unprefixed CSS Properties"></a>Unprefixed CSS Properties</h2><p>ä»¥ä¸‹CSSå±æ€§åœ¨ Safari 9.0 å·²å®Œå…¨æ”¯æŒï¼Œä¸ç”¨å†å¸¦ <code>-webkit-</code> å‰è¾ï¼š</p>
<ul>
<li>transition</li>
<li>transition-delay</li>
<li>transition-duration</li>
<li>transition-property</li>
<li>transition-timing-function</li>
<li>animation</li>
<li>cursor: zoom-in</li>
<li>cursor: zoom-out</li>
<li>perspective</li>
<li>perspective-origin</li>
<li>transform</li>
<li>transform-origin</li>
<li>transform-style</li>
<li>@keyframes</li>
<li>animation-name</li>
<li>animation-duration</li>
<li>animation-timing-function</li>
<li>animation-iteration-count</li>
<li>animation-direction</li>
<li>animation-play-state</li>
<li>animation-delay</li>
<li>animation-fill-mode</li>
<li>order</li>
<li>align-content</li>
<li>align-items</li>
<li>align-self</li>
<li>justify-content</li>
<li>flex</li>
<li>flex-basis</li>
<li>flex-direction</li>
<li>flex-flow</li>
<li>flex-grow</li>
<li>flex-shrink</li>
<li>flex-wrap</li>
<li>break-after</li>
<li>break-before</li>
<li>break-inside</li>
<li>columns</li>
<li>column-count</li>
<li>column-fill</li>
<li>column-gap</li>
<li>column-rule</li>
<li>column-rule-color</li>
<li>column-rule-style</li>
<li>column-rule-width</li>
<li>column-span</li>
<li>column-width</li>
<li>alt</li>
</ul>
<h2 id="Responsive-Design-Mode"><a href="#Responsive-Design-Mode" class="headerlink" title="Responsive Design Mode"></a>Responsive Design Mode</h2><p>Safari 9.0 æ¨å‡ºäº†å“åº”å¼è®¾è®¡æ¨¡å¼ï¼Œcommand + option + R æˆ–åœ¨â€œå¼€å‘ â€“ è¿›å…¥å“åº”å¼è®¾è®¡æ¨¡å¼â€å¯ä»¥è¿›å…¥ï¼Œç•Œé¢å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/rdm.png" alt="image"></p>
<p>è¿™é‡Œæœ‰ï¼š</p>
<ul>
<li>ç°ä¸»æµ iPhone/iPad æœºå‹å°ºå¯¸</li>
<li>iOS8.1ç³»ç»Ÿæ¨¡æ‹Ÿï¼ˆiphoneã€ipadã€ipod touchï¼‰</li>
<li>è‹¹æœç³»ä¸»æµåˆ†è¾¨ç‡</li>
<li>Safari 9.0.1 Mac</li>
<li>Chrome â€“ Mac/Windows</li>
<li>FireFox â€“ Mac/Windows</li>
<li>IE7 - IE10 â€“Windowsï¼ˆ å¥½æ ·çš„ï¼ï¼‰</li>
<li>é¡µé¢ç²¾åº¦</li>
</ul>
<p>ç‚¹å‡»é€‰ä¸­çš„æœºå‹å›¾æ ‡è¿˜å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å±•ç¤ºï¼Œå¦‚ iPhone çš„æ¨ªå±ï¼ŒiPad çš„åˆ†å±ç­‰</p>
<p>å“åº”å¼è®¾è®¡æ¨¡å¼ Chrome æµè§ˆå™¨æ—©æ—©å°±æœ‰ï¼Œä½†å•ä»è‹¹æœäº§å“çš„è°ƒè¯•å»çœ‹ï¼Œä¸ªäººæ›´å–œæ¬¢ Safari çš„å“åº”å¼è®¾è®¡æ¨¡å¼ï¼Œæ— è®ºä»å¤–è§‚ã€ä½“éªŒä»¥åŠä¸“æ³¨åº¦ï¼Œéƒ½è¦ä¼˜äº Chromeï¼ŒSafariä¸€ç›´åœ¨è¿›æ­¥ï¼Œä»ä¸æ€€ç–‘ Apple Developer çš„çº§æ•°ã€‚</p>
<p><img src="//img.aotu.io/mihanX/safari-9/chrome.png" alt="image"></p>
<h2 id="Web-Inspector-Redesign"><a href="#Web-Inspector-Redesign" class="headerlink" title="Web Inspector Redesign"></a>Web Inspector Redesign</h2><p>ä¹‹å‰æ‰€äº†è§£åˆ°çš„ Web Inspector ç‰ˆæœ¬ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/web_inspector_1.png" alt="image"></p>
<p>ï¼ˆä»è‹¹æœå¼€å‘è€…æ–‡æ¡£ä»‹ç»äº†è§£åˆ°çš„ï¼Œæ²¡ä½¿ç”¨è¿‡ï¼Œç›®æµ‹æ˜¯ Safari 4.0 or ä¹‹å‰çš„ï¼‰</p>
<p><img src="//img.aotu.io/mihanX/safari-9/web_inspector_2.png" alt="image"></p>
<p>ï¼ˆç›´æ¥ google å›¾ç‰‡äº†è§£åˆ°çš„ï¼Œæ²¡ä½¿ç”¨è¿‡ï¼Œç›®æµ‹æ˜¯ Safari 6.0 é‡æ–°è®¾è®¡é‚£æ¬¾ï¼‰</p>
<p>Safari 9.0 çš„ Web æ£€æŸ¥å™¨ç»è¿‡äº†é‡æ–°è®¾è®¡ï¼Œæ›´ç›´è§‚æ˜“ç”¨ï¼Œç”¨æˆ·ä½“éªŒæ›´æ£’ã€‚</p>
<p>å¼€å‘ä»»åŠ¡ Tab åˆ‡æ¢æ›´ç®€æ˜“å¿«æ·ï¼Œæ–°çš„æ¸²æŸ“æ—¶é—´çº¿æ¡†æ¶æ›´å®¹æ˜“æ›´ç»†è‡´æ£€æµ‹åˆ°é¡µé¢æ¸²æŸ“çš„æƒ…å†µ</p>
<p><img src="//img.aotu.io/mihanX/safari-9/web_inspector_3.png" alt="image"></p>
<p>å…ƒç´ æŸ¥çœ‹ï¼Œæ ·å¼ä¿®æ”¹è°ƒè¯•æ–¹ä¾¿ï¼Œç›´æ¥ç‚¹å…‰æ ‡ç›´æ¥å¤„äºç¼–è¾‘çŠ¶æ€äº†ï¼Œä¸æ˜ç™½ Chrome çš„ä¸ºä»€ä¹ˆç‚¹äº†é»˜è®¤å…¨é€‰ï¼Œç¼–è¾‘æ€è¿˜æœ‰ä¸€ä¸ªè¾“å…¥æ¡†çš„å½¢æ€ï¼ŒApple çš„æç®€è®¾è®¡ç†å¿µæ— å¤„ä¸åœ¨ï¼Œå¤„å¤„ä½“ç°ç€è‹¹æœ Design çš„åŸºå› </p>
<p><img src="//img.aotu.io/mihanX/safari-9/web_inspector_4.png" alt="image"></p>
<p>æ–­ç‚¹è°ƒè¯•å™¨ä¹Ÿå“—å•¦å•¦åœ°å¥½çœ‹æ˜“ç”¨ï¼š</p>
<p><img src="//img.aotu.io/mihanX/safari-9/web_inspector_5.png" alt="image"></p>
<p>æ›´å¤šçš„å†…å®¹æœ‰å…´è¶£çš„åŒå­¦å»ä½“éªŒä¸€ä¸‹å§ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€çƒ§å›¾äº†ã€‚</p>
<div style="color:#fff;">å¦‚æœè¯´ Chrome Web Inspector æ˜¯ä¸€åè§’æ–—å£«ï¼Œé‚£ä¹ˆ Safari Web Inspector å°±æ˜¯ä¸€åä¼šå†™è¯—çš„è§’æ–—å£«</div>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è‹¹æœçš„ OS åœ¨ä¸æ–­å‘å±•ï¼ŒSafari äº¦è¶Šå˜å¼ºå¤§æ€§æ„Ÿï¼Œåœ¨æœ€æ–°çš„ 9.0 ç‰ˆæœ¬å½“ä¸­ï¼ŒSafari å¢åŠ äº†ä¸å°‘æ–°çš„ç‰¹æ€§ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹å’Œ Web å‰ç«¯å¯†åˆ‡ç›¸å…³çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ä½“éªŒæŠ¥å‘Š" scheme="https://aotu.io/cates/%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    
    
      <category term="Safari 9.0" scheme="https://aotu.io/tags/Safari-9-0/"/>
    
      <category term="iOS" scheme="https://aotu.io/tags/iOS/"/>
    
      <category term="OS X" scheme="https://aotu.io/tags/OS-X/"/>
    
  </entry>
  
  <entry>
    <title>ã€è¯‘ã€‘ä½¿ç”¨Node.jsåˆ›å»ºå‘½ä»¤è¡Œè„šæœ¬å·¥å…·</title>
    <link href="https://aotu.io/notes/2015/12/23/building-command-line-tools-with-node-js/"/>
    <id>https://aotu.io/notes/2015/12/23/building-command-line-tools-with-node-js/</id>
    <published>2015-12-23T05:19:07.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡è¯‘è‡ª <a href="https://developer.atlassian.com/blog/2015/11/scripting-with-node/" target="_blank" rel="external">Building command line tools with Node.js</a>ï¼Œä»‹ç»äº†å¦‚ä½•é€šè¿‡Node.jsæ¥åˆ›å»ºå‘½ä»¤è¡Œè„šæœ¬å·¥å…·ï¼Œä»‹ç»äº†å¾ˆå¤šå®ç”¨çš„<code>npm</code>åŒ…ç­‰ã€‚ç¿»è¯‘æ°´å¹³æœ‰é™ï¼Œæ•¬è¯·æŒ‡æ­£~</p>
</blockquote>
<a id="more"></a>
<p>åœ¨æˆ‘çš„èŒä¸šç”Ÿæ¶¯ä¸­å·²ç»å†™è¿‡äº†ä¸Šç™¾ä¸ª <code>Bash</code> è„šæœ¬ï¼Œä½†æˆ‘çš„ <code>Bash</code> ä¾ç„¶å†™å¾—å¾ˆç³Ÿç³•ï¼Œæ¯ä¸€æ¬¡æˆ‘éƒ½ä¸å¾—ä¸å»æŸ¥ä¸€äº›ç®€å•é€»è¾‘ç»“æ„çš„è¯­æ³•ã€‚å¦‚æœæˆ‘æƒ³é€šè¿‡ <code>curl</code> æˆ–è€… <code>sed</code> æ¥åšä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä¹Ÿå¿…é¡»å»æŸ¥æ‰¾ <code>man</code> æ–‡æ¡£ã€‚</p>
<p>ç„¶åï¼Œæœ‰ä¸€å¤©ï¼Œæˆ‘çœ‹åˆ°å…­ä¸ªå­—æ¯çš„è¯­è¨€[è¯‘è€…æ³¨ï¼šè¿™é‡ŒæŒ‡NodeJS] â€” ä¸€é—¨åœ¨è¿‡å»åå¹´é‡Œæˆ‘å‡ ä¹ <em>æ¯ä¸€å¤©</em> éƒ½åœ¨ä½¿ç”¨çš„è¯­è¨€ï¼Œè¿™æ‰è®©æˆ‘å¹¡ç„¶é†’æ‚Ÿã€‚ç»“æœæ˜¯ä½ å¯ä»¥ä½¿ç”¨ <code>JavaScript</code> æ¥å†™è„šæœ¬ï¼</p>
<p>åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä¼šåœ¨ä½¿ç”¨ <code>Node.js</code> å’Œ <code>npm</code> åˆ›å»ºä¸€ä¸ªè„šæœ¬æˆ–è€…å‘½ä»¤è¡Œå·¥å…·æ–¹é¢ç»™ä½ ä¸€äº›æˆ‘çš„æƒ³æ³•ã€‚ç‰¹åˆ«åœ°æˆ‘ä»¬å°†ä¼šåŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>npm</code> å°è£…ä¸€ä¸ªæ–°çš„ <code>shell</code> å‘½ä»¤</li>
<li>è§£æå‘½ä»¤è¡Œå‚æ•°</li>
<li>ä»è¾“å…¥æµä¸­è¯»å–æ–‡æœ¬å’Œå¯†ç </li>
<li>å‘é€ snippet</li>
<li>è¾“å‡ºé”™è¯¯ä¸ä»£ç </li>
<li>ç»ˆç«¯è¾“å‡ºå½©è‰²åŒ–</li>
<li>æ¸²æŸ“ <code>ACSII</code> è¿›åº¦æ¡</li>
</ul>
<p>æˆ‘çƒ­è¡·äºå·²ç»å¯ä»¥å·¥ä½œçš„ä¾‹å­ï¼Œæ‰€ä»¥ä¸ºäº†è§£é‡Šè¿™äº›æ¦‚å¿µæˆ‘ä»¬å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>shell</code> å‘½ä»¤ï¼Œå®ƒçš„åå­—ä¸º <code>snippet</code> ï¼Œå¯ä»¥åœ¨æˆ‘ä»¬æœ¬åœ°ç£ç›˜çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ª <a href="https://confluence.atlassian.com/bitbucket/snippets-719095082.html" target="_blank" rel="external">Bitbucket Snippet</a>ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡æˆæœï¼š</p>
<p><img src="//img.aotu.io/cnt1992/snippet-usage.gif" alt="snippetç”¨æ³•"></p>
<h2 id="å°è£…-shell-å‘½ä»¤"><a href="#å°è£…-shell-å‘½ä»¤" class="headerlink" title="å°è£… shell å‘½ä»¤"></a>å°è£… shell å‘½ä»¤</h2><p><code>npm</code> ä¸å•å•ç”¨æ¥ç®¡ç†ä½ çš„åº”ç”¨å’Œç½‘é¡µçš„ä¾èµ–ï¼Œä½ è¿˜èƒ½ç”¨å®ƒæ¥å°è£…å’Œåˆ†å‘æ–°çš„ <code>shell</code> å‘½ä»¤ã€‚</p>
<p>ç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡ <code>npm init</code> [è¯‘è€…æ³¨ï¼šå¯ä»¥é€šè¿‡ <code>npm init -f</code>ç›´æ¥å¿«é€Ÿç”Ÿæˆä¸€ä¸ª<code>package.json</code>]æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>npm</code> é¡¹ç›®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line">name: bitbucket-snippet</div><div class="line">version: 0.0.1</div><div class="line">description: A <span class="built_in">command</span>-line tool <span class="keyword">for</span> creating Bitbucket snippets.</div><div class="line">entry point: index.js</div><div class="line">license: Apache-2.0</div></pre></td></tr></table></figure>
<p>è¿™ä¼šåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>package.json</code> æ–‡ä»¶ï¼Œé‚£æ—¶æˆ‘ä»¬å°†éœ€è¦åˆ›å»ºä¸€ä¸ª <code>JS</code> æ–‡ä»¶åŒ…å«æˆ‘ä»¬çš„è„šæœ¬ã€‚è®©æˆ‘ä»¬æ ¹æ®Node.jsçš„ä¼ ç»Ÿå‘½åä¸º <code>index.js</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env node</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Hello, world!'</span>);</div></pre></td></tr></table></figure>
<p>æ³¨æ„æˆ‘ä»¬å¿…é¡»åŠ ä¸€äº› <code>ä¸œè¥¿</code> æ¥å‘Šè¯‰æˆ‘ä»¬çš„ <code>shell</code> å¦‚ä½•å¤„ç†æˆ‘ä»¬çš„è„šæœ¬ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬ <code>package.json</code> é‡Œé¢çš„æœ€é¡¶çº§å¢åŠ  <code>bin</code> éƒ¨åˆ†ã€‚è®¾ç½®çš„å±æ€§ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ <code>snippet</code>ï¼‰å°†ä¼šå˜æˆç”¨æˆ·åœ¨ä»–ä»¬çš„ç»ˆç«¯å¤„ç†è„šæœ¬ä½¿ç”¨çš„å‘½ä»¤ï¼Œå±æ€§å€¼å°±æ˜¯ç›¸å¯¹äº <code>package.json</code> çš„è„šæœ¬ä½ç½®ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">  "author": "Tim Pettersen",</div><div class="line">  "license": "Apache-2.0",</div><div class="line">  "bin": &#123;</div><div class="line">    "snippet": "./index.js"</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªå¯ä»¥å·¥ä½œçš„ <code>shell</code> å‘½ä»¤äº†ï¼è®©æˆ‘ä»¬å®‰è£…å®ƒå¹¶ä¸”æµ‹è¯•ç»“æœã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm install -g</div><div class="line">$ snippet</div><div class="line">Hello, world!</div></pre></td></tr></table></figure>
<p>çœŸæ•´æ´ï¼ <code>npm install -g</code> å®é™…ä¸Šæ˜¯å°†æˆ‘ä»¬è„šæœ¬é“¾æ¥åˆ° <code>path</code> å˜é‡çš„ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">which</span> snippet</div><div class="line">/usr/<span class="built_in">local</span>/bin/snippet</div><div class="line">$ readlink /usr/<span class="built_in">local</span>/bin/snippet</div><div class="line">../lib/node_modules/bitbucket-snippet/index.js</div></pre></td></tr></table></figure>
<p>åœ¨å¼€å‘ç¯å¢ƒä¸­æˆ‘ä»¬å®é™…ä¸Šä½¿ç”¨ <code>npm link</code> ä¾¿åˆ©åœ°å°†æˆ‘ä»¬çš„ <code>index.js</code> è½¯é“¾æ¥åˆ° <code>path</code> å˜é‡çš„ä½ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm link</div><div class="line">/usr/<span class="built_in">local</span>/bin/snippet -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/bitbucket-snippet/index.js</div><div class="line">/usr/<span class="built_in">local</span>/lib/node_modules/bitbucket-snippet -&gt; /Users/kannonboy/src/bitbucket-snippet</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬å¼€å‘å®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>npm publish</code> å°†æˆ‘ä»¬çš„è„šæœ¬å‘å¸ƒåˆ°å…¬å…± <code>npm</code> ä»“åº“ï¼Œç„¶åä»»ä½•äººéƒ½å¯ä»¥ä¸‹è½½å®‰è£…åˆ°ä»–ä»¬çš„æœºå™¨ä¸Šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g bitbucket-snippet</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯è®©æˆ‘ä»¬å…ˆè®©æˆ‘ä»¬çš„è„šæœ¬èƒ½å¤Ÿå·¥ä½œå…ˆï¼</p>
<h2 id="è§£æå‘½ä»¤è¡Œå‚æ•°"><a href="#è§£æå‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="è§£æå‘½ä»¤è¡Œå‚æ•°"></a>è§£æå‘½ä»¤è¡Œå‚æ•°</h2><p>æˆ‘ä»¬çš„è„šæœ¬ç°åœ¨éœ€è¦ä¸€äº›ç”¨æˆ·çš„è¾“å…¥ï¼šä»–ä»¬çš„Bitbucketåå­—ï¼Œä»–ä»¬çš„å¯†ç ï¼Œè¿˜æœ‰ä½œä¸º <code>snippet</code>ä¸Šä¼ çš„æ–‡ä»¶ä½ç½®ã€‚å…¸å‹çš„æ–¹æ³•å°±æ˜¯é€šè¿‡å‘½ä»¤çš„å‚æ•°ä¼ è¾“è¿™äº›å€¼ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>process.argv</code> æ‹¿åˆ°åºåˆ—åŒ–çš„å‚æ•°ï¼Œä½†æœ‰å¾ˆå¤š <code>npm</code> åŒ…åœ¨è§£æå‚æ•°è¿˜æœ‰é€‰é¡¹æ–¹é¢æä¾›äº†å¾ˆå¥½çš„æŠ½è±¡ç»™ä½ ã€‚æˆ‘æœ€å–œæ¬¢çš„å°±æ˜¯ <a href="https://www.npmjs.com/package/commander" target="_blank" rel="external">commander</a>ï¼Œæ¥è‡ª <code>Ruby gem</code>åŒä¸€ä¸ªåå­—çš„çµæ„Ÿã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„å‘½ä»¤å®‰è£…å®ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save commander</div></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤å°†ä¼šæŠŠæœ€æ–°ç‰ˆçš„ <code>commander</code> åŠ å…¥ <code>package.json</code>ã€‚æˆ‘ä»¬è¿™æ—¶å¯ä»¥é€šè¿‡ç®€å•å£°æ˜å¼çš„æ–¹å¼å®šä¹‰æˆ‘ä»¬çš„é€‰é¡¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env node</span></div><div class="line">- <span class="built_in">console</span>.log(<span class="string">'Hello, world!'</span>);</div><div class="line">+ <span class="keyword">var</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>);</div><div class="line">+</div><div class="line">+ program</div><div class="line">+  .arguments(<span class="string">'&lt;file&gt;'</span>)</div><div class="line">+  .option(<span class="string">'-u, --username &lt;username&gt;'</span>, <span class="string">'The user to authenticate as'</span>)</div><div class="line">+  .option(<span class="string">'-p, --password &lt;password&gt;'</span>, <span class="string">'The user\'s password'</span>)</div><div class="line">+  .action(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</div><div class="line">+    <span class="built_in">console</span>.log(<span class="string">'user: %s pass: %s file: %s'</span>,</div><div class="line">+        program.username, program.password, file);</div><div class="line">+  &#125;)</div><div class="line">+  .parse(process.argv);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç å¯è¯»æ€§å¾ˆå¼ºã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªä¿å®ˆçš„è¯´æ³•ã€‚ç›¸å¯¹äºé‚£äº›æˆ‘ä»¬éœ€è¦é€šè¿‡ <code>switch</code> æ¥æ§åˆ¶çš„åƒ <code>Bash</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªè‰ºæœ¯å“ã€‚è‡³å°‘ï¼Œæˆ‘å†™çš„ <code>Bash</code> æ˜¯è¿™æ ·å­çš„ã€‚</p>
<p>è®©æˆ‘ä»¬å¿«é€Ÿæµ‹è¯•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ snippet -u kannonboy -p correcthorsebatterystaple file</div><div class="line">user: kannonboy pass: correcthorsebatterystaple file: file</div></pre></td></tr></table></figure>
<p>å¾ˆæ£’ï¼<code>commander</code> è¿˜æä¾›ä¸€äº›ç®€å•çš„å¸®åŠ©è¾“å‡ºç»™æˆ‘ä»¬ï¼ŒåŸºäºæˆ‘ä»¬ä¸Šé¢æä¾›çš„é…ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ snippet --help</div><div class="line"></div><div class="line">  Usage: snippet [options] &lt;file&gt;</div><div class="line"></div><div class="line">  Options:</div><div class="line"></div><div class="line">    -h, --help                 output usage information</div><div class="line">    -u, --username &lt;username&gt;  The user to authenticate as</div><div class="line">    -p, --password &lt;password&gt;  The user<span class="string">'s password</span></div></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†å‚æ•°äº†ã€‚ä½†æ˜¯ï¼Œè®©ç”¨æˆ·åœ¨ç©ºç™½çš„åœ°æ–¹è¾“å…¥ä»–ä»¬çš„å¯†ç ä½œä¸ºé€‰é¡¹æœ‰ä¸€ç‚¹éš¾ç”¨ã€‚è®©æˆ‘ä»¬è§£å†³å®ƒã€‚</p>
<h2 id="ä»è¾“å…¥æµä¸­è¯»å–æ–‡æœ¬å’Œå¯†ç "><a href="#ä»è¾“å…¥æµä¸­è¯»å–æ–‡æœ¬å’Œå¯†ç " class="headerlink" title="ä»è¾“å…¥æµä¸­è¯»å–æ–‡æœ¬å’Œå¯†ç "></a>ä»è¾“å…¥æµä¸­è¯»å–æ–‡æœ¬å’Œå¯†ç </h2><p>å¦ä¸€ç§é€šç”¨çš„å–å›ç”¨æˆ·çš„å†…å®¹çš„è„šæœ¬æ–¹å¼æ˜¯ä»æ ‡å‡†è¾“å…¥æµä¸­è¯»ã€‚è¿™å¯ä»¥é€šè¿‡ <code>process.stdin</code> å®ç°ï¼Œä½†æ˜¯å†è¯´ä¸€æ¬¡ï¼Œå·²ç»æœ‰å¾ˆå¤š <code>npm</code> åŒ…æä¾›äº†éå¸¸å¥½çš„ API ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚å¾ˆå¤šéƒ½æ˜¯åŸºäº <code>callback</code> æˆ–è€… <code>promises</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨ <a href="https://www.npmjs.com/package/co-prompt" target="_blank" rel="external">co-prompt</a> ï¼ˆåŸºäº <a href="https://www.npmjs.com/package/co" target="_blank" rel="external">co</a>ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ ES6 çš„ <code>yield</code> å…³é”®è¯ã€‚è¿™è®©æˆ‘ä»¬å†™å¼‚æ­¥çš„ä»£ç è€Œä¸éœ€è¦ <code>callbacks</code> ï¼Œçœ‹èµ·æ¥æ›´åŠ è„šæœ¬åŒ–ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save co co-prompt</div></pre></td></tr></table></figure>
<p>ä¸ºäº†ç»„åˆä½¿ç”¨ <code>yield</code> å’Œ <code>co-prompt</code> ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€äº› <code>co</code> çš„é­”æ³•æ¥åŒ…è£¹æˆ‘ä»¬çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+ <span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line">+ <span class="keyword">var</span> prompt = <span class="built_in">require</span>(<span class="string">'co-prompt'</span>);</div><div class="line">  <span class="keyword">var</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>);</div><div class="line">...</div><div class="line">  .option(<span class="string">'-u, --username &lt;username&gt;'</span>, <span class="string">'The user to authenticate as'</span>)</div><div class="line">  .option(<span class="string">'-p, --password &lt;password&gt;'</span>, <span class="string">'The user\'s password'</span>)</div><div class="line">  .action(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</div><div class="line">+    co(<span class="function"><span class="keyword">function</span> *(<span class="params"></span>) </span>&#123;</div><div class="line">+      <span class="keyword">var</span> username = <span class="keyword">yield</span> prompt(<span class="string">'username: '</span>);</div><div class="line">+      <span class="keyword">var</span> password = <span class="keyword">yield</span> prompt.password(<span class="string">'password: '</span>);</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'user: %s pass: %s file: %s'</span>,</div><div class="line">-          program.username, program.password, file);</div><div class="line">+          username, password, file);</div><div class="line">+    &#125;);</div><div class="line">  &#125;)</div><div class="line">...</div></pre></td></tr></table></figure>
<p>ç°åœ¨å¿«é€Ÿæµ‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ snippet my_awesome_file</div><div class="line">username: kannonboy</div><div class="line">password: *************************</div><div class="line">user: kannonboy pass: correcthorsebatterystaple file: my_awesome_file</div></pre></td></tr></table></figure>
<p>å¾ˆæ£’ï¼å”¯ä¸€çš„çªé—¨å°±æ˜¯ES6çš„ <code>yield</code>ï¼Œæ‰€ä»¥è¿™åªèƒ½åœ¨ç”¨æˆ·è¿è¡Œåœ¨ node 4.0.0+ä¸Šé¢ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ å…¥ <code>--harmony</code> æ ‡å¿—è®© 0.11.2 ç‰ˆæœ¬çš„ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- #!<span class="regexp">/usr/</span>bin/env node</div><div class="line">+ #!<span class="regexp">/usr/</span>bin/env node --harmony</div><div class="line">  <span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line">  <span class="keyword">var</span> prompt = <span class="built_in">require</span>(<span class="string">'co-prompt'</span>);</div><div class="line">...</div></pre></td></tr></table></figure>
<h2 id="å‘é€-snippet"><a href="#å‘é€-snippet" class="headerlink" title="å‘é€ snippet"></a>å‘é€ snippet</h2><p>Bitbucketæ‹¥æœ‰ä¸€å¥—éå¸¸æ¼‚äº®çš„ <a href="https://confluence.atlassian.com/display/BITBUCKET/Snippets+endpoint" target="_blank" rel="external">API</a>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘å°†å…³æ³¨ä¼ è¾“å•ä¸€çš„æ–‡ä»¶ï¼Œä½†æˆ‘ä»¬å¯ä»¥å‘é€æ•´ä¸ªç›®å½•ï¼Œæ”¹å˜æˆ‘ä»¬çš„å…¥å£é…ç½®ï¼ŒåŠ ä¸€äº›ä»£ç ç­‰ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦çš„è¯ã€‚æˆ‘æœ€å–œæ¬¢çš„node HTTP å®¢æˆ·ç«¯æ˜¯ <a href="https://www.npmjs.com/package/superagent" target="_blank" rel="external">superagent</a> ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æŠŠå®ƒåŠ å…¥é¡¹ç›®ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save superagent</div></pre></td></tr></table></figure>
<p>ç°åœ¨å°±è®©æˆ‘ä»¬å°†ä»ç”¨æˆ·æ”¶é›†åˆ°çš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨ã€‚ <code>superagent</code> å…¶ä¸­ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯åœ¨å®ƒåœ¨å¤„ç†æ–‡ä»¶ä¸Šæ‹¥æœ‰éå¸¸å¥½çš„APIã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">+ <span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'superagent'</span>);</div><div class="line">  <span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line">  <span class="keyword">var</span> prompt = <span class="built_in">require</span>(<span class="string">'co-prompt'</span>);</div><div class="line">...</div><div class="line">  .action(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</div><div class="line">    co(<span class="function"><span class="keyword">function</span> *(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> username = <span class="keyword">yield</span> prompt(<span class="string">'username: '</span>);</div><div class="line">      <span class="keyword">var</span> password = <span class="keyword">yield</span> prompt.password(<span class="string">'password: '</span>);</div><div class="line">-     <span class="built_in">console</span>.log(<span class="string">'user: %s pass: %s file: %s'</span>,</div><div class="line">-         file, username, password);</div><div class="line">+     request</div><div class="line">+       .post(<span class="string">'https://api.bitbucket.org/2.0/snippets/'</span>)</div><div class="line">+       .auth(username, password)</div><div class="line">+       .attach(<span class="string">'file'</span>, file)</div><div class="line">+       .set(<span class="string">'Accept'</span>, <span class="string">'application/json'</span>)</div><div class="line">+       .end(<span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</div><div class="line">+         <span class="keyword">var</span> link = res.body.links.html.href;</div><div class="line">+         <span class="built_in">console</span>.log(<span class="string">'Snippet created: %s'</span>, link);</div><div class="line">+       &#125;);</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">...</div></pre></td></tr></table></figure>
<p>ç°åœ¨è®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ snippet my_awesome_file</div><div class="line">username: kannonboy</div><div class="line">password: *************************</div><div class="line">Snippet created: https://bitbucket.org/snippets/kannonboy/yq7r8</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çš„ snippet å·²ç»å‘é€äº†ï¼\o/</p>
<h2 id="è¾“å‡ºé”™è¯¯ä¸ä»£ç "><a href="#è¾“å‡ºé”™è¯¯ä¸ä»£ç " class="headerlink" title="è¾“å‡ºé”™è¯¯ä¸ä»£ç "></a>è¾“å‡ºé”™è¯¯ä¸ä»£ç </h2><p>åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬å·²ç»å¤„ç†äº†ä¸€åˆ‡æ­£ç¡®çš„æƒ…å†µï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸Šä¼ å¤±è´¥æˆ–è€…ç”¨æˆ·è¾“å…¥é”™è¯¯çš„ä¿¡æ¯å‘¢ï¼Ÿ<code>UNIX-y</code>çš„æ–¹æ³•æ¥å¤„ç†é”™è¯¯å°±æ˜¯å°†æ ‡å‡†çš„é”™è¯¯ä¿¡æ¯è¾“å‡ºå¹¶ä¸”ä»¥é0çš„çŠ¶æ€ç ç»“æŸç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¿™æ ·å­åšã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">  request</div><div class="line">    .post(<span class="string">'https://api.bitbucket.org/2.0/snippets/'</span>)</div><div class="line">    .auth(username, password)</div><div class="line">    .attach(<span class="string">'file'</span>, filename, file)</div><div class="line">    .set(<span class="string">'Accept'</span>, <span class="string">'application/json'</span>)</div><div class="line">    .end(<span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</div><div class="line">+     <span class="keyword">if</span> (!err &amp;&amp; res.ok) &#123;</div><div class="line">        <span class="keyword">var</span> link = res.body.links.html.href;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Snippet created: %s'</span>, link);</div><div class="line">+       process.exit(<span class="number">0</span>);</div><div class="line">+     &#125;</div><div class="line">+</div><div class="line">+     <span class="keyword">var</span> errorMessage;</div><div class="line">+     <span class="keyword">if</span> (res &amp;&amp; res.status === <span class="number">401</span>) &#123;</div><div class="line">+       errorMessage = <span class="string">"Authentication failed! Bad username/password?"</span>;</div><div class="line">+     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (err) &#123;</div><div class="line">+       errorMessage = err;</div><div class="line">+     &#125; <span class="keyword">else</span> &#123;</div><div class="line">+       errorMessage = res.text;</div><div class="line">+     &#125;</div><div class="line">+     <span class="built_in">console</span>.error(errorMessage);</div><div class="line">+     process.exit(<span class="number">1</span>);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>è¿™æ ·å­å°±å¯ä»¥å¤„ç†é”™è¯¯äº†ã€‚</p>
<h2 id="ç»ˆç«¯è¾“å‡ºå½©è‰²åŒ–"><a href="#ç»ˆç«¯è¾“å‡ºå½©è‰²åŒ–" class="headerlink" title="ç»ˆç«¯è¾“å‡ºå½©è‰²åŒ–"></a>ç»ˆç«¯è¾“å‡ºå½©è‰²åŒ–</h2><p>å¦‚æœä½ çš„ç”¨æˆ·æ˜¯åœ¨ä½¿ç”¨ä½“é¢çš„ <code>shell</code> ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸€äº›åŒ…æä¾›ç»™ä½ ä½¿ç”¨è®©ä½ æ–¹ä¾¿å½©è‰²åŒ–çš„è¾“å‡ºã€‚æˆ‘å–œæ¬¢ <a href="https://www.npmjs.com/package/chalk" target="_blank" rel="external">chalk</a> ï¼Œå› ä¸ºå®ƒæ‹¥æœ‰å¹²å‡€å¯é“¾å¼çš„APIä»¥åŠè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·çš„ <code>shell</code> æ”¯æŒçš„é¢œè‰²ã€‚è¿™æ˜¯æœ‰ç›Šçš„æç¤ºå¦‚æœä½ æƒ³å°†ä½ çš„è„šæœ¬åˆ†äº«ç»™ windows ç”¨æˆ·çš„è¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save chalk</div></pre></td></tr></table></figure>
<p><code>chalk</code> çš„å‘½ä»¤èƒ½å¤Ÿå½©è‰²è¾“å‡ºåŒæ—¶è¿˜èƒ½æ–¹ä¾¿è·Ÿå¸¸è§„å­—ç¬¦ä¸²ä¸²è”èµ·æ¥ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">+ <span class="keyword">var</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>);</div><div class="line">  <span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'superagent'</span>);</div><div class="line">  <span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line">...</div><div class="line">   .set(<span class="string">'Accept'</span>, <span class="string">'application/json'</span>)</div><div class="line">   .end(<span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</div><div class="line">     <span class="keyword">if</span> (!err &amp;&amp; res.ok) &#123;</div><div class="line">       <span class="keyword">var</span> link = res.body.links.html.href;</div><div class="line">-      <span class="built_in">console</span>.log(<span class="string">'Snippet created: %s'</span>, link);</div><div class="line">+      <span class="built_in">console</span>.log(chalk.bold.cyan(<span class="string">'Snippet created: '</span>) + link);</div><div class="line">       process.exit(<span class="number">0</span>);</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="keyword">var</span> errorMessage;</div><div class="line">     <span class="keyword">if</span> (res &amp;&amp; res.status === <span class="number">401</span>) &#123;</div><div class="line">       errorMessage = <span class="string">"Authentication failed! Bad username/password?"</span>;</div><div class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (err) &#123;</div><div class="line">       errorMessage = err;</div><div class="line">     &#125; <span class="keyword">else</span> &#123;</div><div class="line">       errorMessage = res.text;</div><div class="line">     &#125;</div><div class="line">-    <span class="built_in">console</span>.error(errorMessage);</div><div class="line">+    <span class="built_in">console</span>.error(chalk.red(errorMessage));</div><div class="line">     process.exit(<span class="number">1</span>);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬æ—‹è½¬ä¸€ä¸‹ï¼ˆè¿™é‡Œæˆ‘ä½¿ç”¨äº†æˆªå›¾ï¼Œä»¥ä¾¿ä½ èƒ½çœ‹åˆ°æå¥½çš„é¢œè‰²ï¼‰ã€‚</p>
<p><img src="//img.aotu.io/cnt1992/terminal-colors.png" alt="å½©è‰²åŒ–è¾“å‡º"></p>
<h2 id="æ¸²æŸ“-ACSII-è¿›åº¦æ¡"><a href="#æ¸²æŸ“-ACSII-è¿›åº¦æ¡" class="headerlink" title="æ¸²æŸ“ ACSII è¿›åº¦æ¡"></a>æ¸²æŸ“ <code>ACSII</code> è¿›åº¦æ¡</h2><p><code>snippets</code>çš„APIå®é™…ä¸Šæ”¯æŒä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼ˆæœ€å¤š10MBï¼‰ï¼Œä½†æ˜¯å½“æ–‡ä»¶æ¯”è¾ƒå¤§æˆ–è€…ç½‘é€Ÿç‰¹åˆ«æ…¢çš„æ—¶å€™å°±éœ€è¦åœ¨å‘½ä»¤è¡Œç•Œé¢æ˜¾ç¤ºä¸Šä¼ æ–‡ä»¶è¿›åº¦äº†ã€‚å‘½ä»¤è¡Œè§£å†³æ–¹æ¡ˆå°±æ˜¯ä¼˜é›…çš„ <code>ASCII</code> è¿›åº¦æ¡ã€‚</p>
<p><a href="https://www.npmjs.com/package/progress" target="_blank" rel="external">progress</a> æ˜¯ç°åœ¨æœ€å¸¸ç”¨çš„ <code>npm</code> åŒ…ç”¨æ¥æ¸²æŸ“è¿›åº¦æ¡ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save progress</div></pre></td></tr></table></figure>
<p><code>progress</code>çš„APIéå¸¸ç®€å•è€Œä¸”å¯æ‰©å±•ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯ <code>superagent</code> å½“å‰nodeç‰ˆæœ¬æ²¡æœ‰äº‹ä»¶èƒ½å¤Ÿè®¢é˜…æˆ‘ä»¬ä¸Šä¼ çš„è¿›åº¦ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª <a href="https://nodejs.org/api/stream.html#stream_class_stream_readable" target="_blank" rel="external">å¯è¯»çš„æµ</a> å¹¶ä¸”å¢åŠ ä¸€ä¸ªäº‹ä»¶æ¥è§¦å‘è¯·æ±‚ã€‚ç„¶åæˆ‘ä»¬åˆå§‹åŒ–è¿›åº¦æ¡ä¸º0ï¼Œå½“äº‹ä»¶è§¦å‘çš„æ—¶å€™ä¸æ–­å¢åŠ ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">+ <span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line">+ <span class="keyword">var</span> ProgressBar = <span class="built_in">require</span>(<span class="string">'progress'</span>);</div><div class="line">  <span class="keyword">var</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>);</div><div class="line">  <span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'superagent'</span>);</div><div class="line">...</div><div class="line">  var username = <span class="keyword">yield</span> prompt(<span class="string">'username: '</span>);</div><div class="line">  <span class="keyword">var</span> password = <span class="keyword">yield</span> prompt.password(<span class="string">'password: '</span>);</div><div class="line"></div><div class="line">+ <span class="keyword">var</span> fileSize = fs.statSync(file).size;</div><div class="line">+ <span class="keyword">var</span> fileStream = fs.createReadStream(file);</div><div class="line">+ <span class="keyword">var</span> barOpts = &#123;</div><div class="line">+   width: <span class="number">20</span>,</div><div class="line">+   total: fileSize,</div><div class="line">+   clear: <span class="literal">true</span></div><div class="line">+ &#125;;</div><div class="line">+ <span class="keyword">var</span> bar = <span class="keyword">new</span> ProgressBar(<span class="string">' uploading [:bar] :percent :etas'</span>, barOpts);</div><div class="line">+</div><div class="line">+ fileStream.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line">+   bar.tick(chunk.length);</div><div class="line">+ &#125;);</div><div class="line"></div><div class="line">  request</div><div class="line">    .post(<span class="string">'https://api.bitbucket.org/2.0/snippets/'</span>)</div><div class="line">    .auth(username, password)</div><div class="line">-   .attach(<span class="string">'file'</span>, file)</div><div class="line">+   .attach(<span class="string">'file'</span>, fileStream)</div><div class="line">    .set(<span class="string">'Accept'</span>, <span class="string">'application/json'</span>)</div><div class="line">...</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¿«çš„ç½‘é€Ÿä¸‹ä¸Šä¼ å¤§çº¦6MBçš„æ–‡ä»¶çš„æˆªå›¾ï¼š</p>
<p><img src="//img.aotu.io/cnt1992/progress-bar.gif" alt="è¿›åº¦æ¡"></p>
<p>å¾ˆæ£’ï¼ç”¨æˆ·ç°åœ¨å°±èƒ½å¤Ÿçœ‹åˆ°ä»–ä»¬ä¸Šä¼ çš„è¿›åº¦å¹¶ä¸”çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¸Šä¼ å®Œæˆã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬åªä¸è¿‡æ¥è§¦äº†ç”¨Nodeå¼€å‘å‘½ä»¤è¡Œè„šæœ¬çš„å†°å±±ä¸€è§’ã€‚åœ¨æ¯ä¸€æœŸçš„ <a href="http://blog.codinghorror.com/the-principle-of-least-power/" target="_blank" rel="external">Atwoodâ€™s Law</a> éƒ½æœ‰å¾ˆå¤š <code>npm</code> åŒ…ä¼˜é›…åœ°å¤„ç†æ ‡å‡†è¾“å…¥ã€ç®¡ç†å¹¶è¡Œä»»åŠ¡ã€ç›‘å¬æ–‡ä»¶ã€ç®¡é“æµã€å‹ç¼©ã€sshã€gitã€è¿˜æœ‰ä»»ä½•ä½ èƒ½ç”¨ <code>Bash</code> åšåˆ°çš„ã€‚æ›´å¤šåœ°ï¼Œè¿˜æœ‰éå¸¸å¥½çš„APIæ¥å¤„ç†å­è¿›ç¨‹å¦‚æœä½ éœ€è¦å…¶ä»–shellè„šæœ¬å¤„ç†ï¼ˆå½“JavaScriptå¤„ç†ä¸äº†çš„æ—¶å€™ï¼‰ã€‚</p>
<p>æˆ‘ä»¬ä¸Šé¢ä¾‹å­çš„æºç æ˜¯åœ¨ <a href="https://bitbucket.org/tpettersen/bitbucket-snippet" target="_blank" rel="external">available on Bitbucket</a> çš„licenseä¸‹ï¼Œå¹¶ä¸”å·²ç»å‘å¸ƒåˆ° <a href="https://npmjs.org/package/bitbucket-snippet" target="_blank" rel="external">npmä»“åº“</a>ã€‚æˆ‘è¿™é‡Œä¹Ÿæä¸€äº›ä¸Šé¢æ²¡æœ‰è®²åˆ°çš„æ¦‚å¿µï¼Œæ¯”å¦‚ <code>OAuth</code> ï¼Œè¿™æ ·å­ä½ å°±ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥ç”¨æˆ·åè·Ÿå¯†ç ã€‚å¦‚æœä½ æƒ³è‡ªå·±ç®€å•ä½“éªŒä¸€ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install -g bitbucket-snippet</div><div class="line">$ snippet --help</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ è§‰å¾—æœ¬æ•™ç¨‹æœ‰å¸®åŠ©ï¼Œå‘ç°äº†bugæˆ–è€…æœ‰å…¶ä»–æ›´é…·çš„Node.jsè„šæœ¬å»ºè®®ï¼Œå¯ä»¥åœ¨Twiiterç§ä¿¡æˆ‘ã€‚ï¼ˆæˆ‘æ˜¯ <a href="https://twitter.com/kannonboy" target="_blank" rel="external">@kannonboy</a>ï¼‰</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&quot;https://developer.atlassian.com/blog/2015/11/scripting-with-node/&quot;&gt;Building command line tools with Node.js&lt;/a&gt;ï¼Œä»‹ç»äº†å¦‚ä½•é€šè¿‡Node.jsæ¥åˆ›å»ºå‘½ä»¤è¡Œè„šæœ¬å·¥å…·ï¼Œä»‹ç»äº†å¾ˆå¤šå®ç”¨çš„&lt;code&gt;npm&lt;/code&gt;åŒ…ç­‰ã€‚ç¿»è¯‘æ°´å¹³æœ‰é™ï¼Œæ•¬è¯·æŒ‡æ­£~&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="NodeJS" scheme="https://aotu.io/cates/NodeJS/"/>
    
    
      <category term="NodeJS" scheme="https://aotu.io/tags/NodeJS/"/>
    
      <category term="CMD" scheme="https://aotu.io/tags/CMD/"/>
    
  </entry>
  
  <entry>
    <title>What Does the Foo Mean</title>
    <link href="https://aotu.io/notes/2015/12/18/etymology-of-foobar/"/>
    <id>https://aotu.io/notes/2015/12/18/etymology-of-foobar/</id>
    <published>2015-12-18T13:22:23.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ WebKit çœ‹äº† CSS ä¼ªç±»çš„æ–‡ç« ï¼Œå…¶ä¸­å¯¹ <code>:matches()</code> çš„ä»‹ç»å‡ºç°äº† <code>foo</code> å’Œ <code>bar</code>ï¼š</p>
<pre><code>:matches(.foo, .bar) {
    background-color: green;
}
</code></pre><p>éšå³æƒ³èµ·ï¼Œä»¥å‰åœ¨ä¸å°‘ç¼–ç¨‹ä¹¦é‡Œç»å¸¸çœ‹åˆ° <code>foo</code>ã€<code>bar</code> è¿™å¯¹ coupleï¼Œä¸€ç›´ä¸çŸ¥é“ä»–ä»¬çš„å…·ä½“å«ä¹‰ï¼Œäºæ˜¯é»˜é»˜å» google æœäº†ä¸€ä¸‹ï¼Œå‘ç°ç»“æœéƒ½å‡ æœ‰æ„æ€ã€‚</p>
<p>é¦–å…ˆåœ¨ <em>Quora</em> é‡Œå‘ç°ä¸€ä½åä¸º <em>Thom Parkin</em> çš„ç½‘å‹å›ç­”ï¼š</p>
<blockquote>
<p>â€œfooâ€ has been (until very recently) always used as part of a pair (with â€œbarâ€) when representing arbitrary names in computer science.  This is primarily in the instance of examples.</p>
<p>Much like the â€œHello Worldâ€ is a standard for examples in computer programming the use of â€œfooâ€ and â€œbarâ€ had grown in popularity.</p>
<p>The origin comes from a common phrase much older than computers and computer programming.</p>
<p>The choice of â€œfooâ€ coupled with â€œbarâ€ is derived from the coloquial acronym FUBAR (pronounced FOO-bar).</p>
<p>Legendarily from the military world, it represents the phrase:<br>â€œFucked Up Beyond All Recognitionâ€ (in â€˜mixed companyâ€™ the first word could be â€œFouledâ€).</p>
</blockquote>
<p>å¤§æ¦‚çš„æ„æ€æ˜¯è¯´ï¼š</p>
<p>åœ¨è®¡ç®—è®¡é¢†åŸŸé‡Œï¼Œâ€œfooâ€ å’Œ â€œbarâ€ é€šå¸¸ä¼šæˆå¯¹å‡ºç°ï¼Œåœ¨ä¸¾ä¾‹çš„æ—¶å€™ç”¨ä½œæ²¡æœ‰æ˜ç¡®æ„ä¹‰çš„å‘½åï¼Œå°±å¥½åƒ â€œHellow Worldâ€ ä¾‹å­åœ¨è®¡ç®—æœºç¼–ç¨‹é‡Œé¢ä½œä¸ºæ ‡å‡†çš„ä¾‹å­ä¸€æ ·ï¼Œâ€œfooâ€ å’Œ â€œbarâ€ çš„ä½¿ç”¨å·²ç»å˜å¾—å¾ˆæµè¡Œã€‚</p>
<p>è€Œè¯¥è¯åœ¨å¸¸ç”¨çš„ä¹ è¯­é‡Œé¢å‡ºç°çš„æ—¶é—´è¿œæ¯”åœ¨è®¡ç®—æœºæˆ–è®¡ç®—æœºç¼–ç¨‹é‡Œé¢å‡ºç°çš„æ—©ï¼Œâ€œfooâ€ å’Œ â€œbarâ€ æˆå¯¹å‡ºç°åˆ™èµ·æºäºå£è¯­ â€œFUBARâ€ ä¸€è¯ï¼ˆå‘éŸ³å’Œ Foo-bar ä¸€æ ·ï¼‰ã€‚</p>
<p>æ¥è‡ªå†›äº‹ä¸–ç•Œçš„ä¼ è¯´ä¸­ï¼Œâ€œFooBarâ€ çš„å«ä¹‰åˆ™æ˜¯ â€œFucked Up Beyond All Recognitionï¼Œå…¨å¥æ„æ€æ˜¯ â€œç³Ÿç³•ç³Ÿåˆ°é¢ç›®å…¨é/çœŸæ˜¯æ··ä¹±ä¸å ªâ€ ï¼Ÿ</p>
<p>çœ‹å®Œ <em>Thom Parkin</em> çš„è§£é‡Šï¼Œéšéšçº¦çº¦è§‰å¾—æ­¤è¯æ¥å¤´ä¸å°ï¼Œä½†æ˜¯å•Š <em>Thom</em> çš„ä»‹ç»åˆä¸å¤Ÿè¯¦ç»†ï¼Œç„¶åç»§ç»­ search ä¸€ä¸‹ï¼Œå‘ç°ä¸‡èƒ½ Wiki Sir å¯¹æ­¤æœ‰æ›´è¯¦ç»†çš„æè¿°ã€‚</p>
<p>Wiki Sir ç›´æ¥å°±æ¥ä¸€å¥ â€œNot to be confused with FUBARâ€ï¼Œå¿ƒé‡Œåªæƒ³è¯´ï¼š666666</p>
<p>Wiki å¯¹ â€œFoobarâ€ ä¸€è¯çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>The terms foobar (/ËˆfuËbÉ‘r/), fubar, or foo, bar, baz and qux (alternatively, quux) and sometimes norf[1][2][3][4] and many others[5][6] are sometimes used as placeholder names (also referred to as metasyntactic variables) in computer programming or computer-related documentation.[7] They have been used to name entities such as variables, functions, and commands whose exact identity is unimportant and serve only to demonstrate a concept. The words themselves have no meaning in this usage. Foobar is sometimes used alone; foo, bar, and baz are sometimes used, when multiple entities are needed.</p>
</blockquote>
<p>å¤§æ¦‚æ„æ€æ˜¯ï¼š</p>
<ul>
<li><p>Foobar è¿˜æœ‰ä¸€ç¾¤å…„å¼Ÿå§å¦¹ï¼Œä¾‹å¦‚ â€œfubarâ€ ã€â€œbazâ€ã€â€œquxâ€ã€â€œquuxâ€ã€â€œnorfâ€ï¼Œä»–ä»¬å¾ˆå¤šæ—¶å€™éƒ½ä¼šä½œä¸ºå ä½åï¼ˆæˆ–è€…ä½œä¸ºä¼ªå˜é‡ï¼‰è¢«åº”ç”¨åœ¨è®¡ç®—æœºç¼–ç¨‹æˆ–ä¸è®¡ç®—æœºç›¸å…³çš„æ–‡æ¡£ä¸­ã€‚</p>
</li>
<li><p>ä»–ä»¬è¢«ç”¨ä½œå˜é‡å‘½åã€å‡½æ•°å‘½åã€å’Œå‘½ä»¤å‘½åï¼Œè¿™äº›å‘½ååŸºæœ¬éƒ½æ˜¯ä¸é‡è¦çš„ï¼Œä»…ä»…ä½œä¸ºæŸä¸ªæ¦‚å¿µé˜è¿°çš„ç¤ºä¾‹ï¼Œä»–ä»¬æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå…·ä½“å«ä¹‰</p>
</li>
<li><p>Foobaræœ‰æ—¶å€™å•ç‹¬ä½¿ç”¨ï¼Œè€Œå½“å¤šä¸ªè¿™ç§ç”¨æ³•å‡ºç°çš„æ—¶å€™ï¼Œ â€œfooâ€ï¼Œâ€œbarâ€ï¼Œâ€œbazâ€ ä¼šç»„åˆä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>å—¯~~ åŸæ¥æ˜¯è¿™æ ·~~</p>
<p>é‚£ä¹ˆå‡ºå¤„å‘¢ï¼ŸWiki Sir ä»‹ç»å¾—æ¯”è¾ƒè¯¦ç»†ï¼Œæœ‰å…´è¶£çš„åŒå­¦è‡ªå·± <a href="https://en.wikipedia.org/wiki/Foobar#History_and_etymology" target="_blank" rel="external">Click Here</a> å»çœ‹çœ‹åŸæ–‡ï¼Œåœ¨ä¸‹ä¹Ÿè¯•ä¸‹æ„è¯‘åˆ°æœ¬æ–‡</p>
<p><em>Foo</em> ä¸€è¯èµ·æºäº 20 ä¸–çºª 30 å¹´ä»£çš„ä¸€ä¸ªå¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„è¯ï¼ˆnonsense wordï¼‰å’Œ 20 ä¸–ç•Œ 40 å¹´ä»£å†›äº‹æœ¯è¯­é‡Œé¢çš„ â€œFUBARâ€ ä»¥åŠå¤§çº¦åœ¨ 20 ä¸–çºª 60 å¹´ä»£éº»çœç†å·¥å­¦é™¢é“è·¯æ¨¡å‹æŠ€æœ¯ä¿±ä¹éƒ¨ï¼ˆTMRCï¼‰åœ¨ä¸€ä¸ªç¨‹åºä¸Šä¸‹æ–‡ç”¨åˆ°çš„è¯æ±‡ã€‚ç„¶è€Œï¼Œè¿™äº›è¯æ±‡ä¹‹é—´æ˜ç¡®çš„è”ç³»ä»ç„¶ä¸æ¸…æ™°ï¼Œä»è€Œä½¿å¾—ä¸€äº›æœ‰è¶£çš„ç†è®ºå­¦è¯´è¿›ä¸€æ­¥å»å®šä¹‰ä»–ä»¬ã€‚</p>
<p><em>Foo</em> åœ¨æ–‡çŒ® ã€ŠInternet Engineering Task Force (IETF) <a href="https://tools.ietf.org/html/rfc3092" target="_blank" rel="external">RFC 3092</a>ã€‹é‡Œæœ‰å®šä¹‰ï¼ˆæ–‡çŒ®æ ‡é¢˜ä¸º Etymology of â€œFooâ€ï¼‰ï¼Œæ–‡çŒ®ç»™å‡ºäº† <em>foo</em> æœ€æ—©çš„ä½¿ç”¨è®°å½•ï¼Œå°±æ˜¯å‡ºç°åœ¨ 20 ä¸–çºª 30 å¹´ä»£ç”±ç¾å›½ <em>Bill Holman</em> åˆ›ä½œçš„è¿è½½æ¼«ç”» <em>Smokey Stover</em>ï¼Œ<em>foo</em> è¢«ç”¨ä½œæ²¡æœ‰å…·ä½“å«ä¹‰çš„è¯ï¼Œå¦‚ä¸‹å›¾çš„ â€œfoomobileâ€ï¼š</p>
<p><img src="//img.aotu.io/mihanX/foo-img-1.jpg" alt="image"></p>
<p><em>(Smokey Stover driving a â€œfoomobileâ€)</em></p>
<p>ä½œè€… <em>Holman</em> è¯´ä½¿ç”¨è¿™ä¸ªè¯æ˜¯å› ä¸ºä»–åœ¨æ—§é‡‘å±±å”äººè¡—çœ‹åˆ°ä¸€å°Šä¸­å›½ç‰é›•åƒåº•éƒ¨çš„â€œç¦â€å­—ï¼Œ<em>foo</em> å¤§æ¦‚æ˜¯ <em>ç¦ï¼ˆfuï¼‰</em> çš„éŸ³è¯‘ã€‚è€Œå½“æ—¶åƒ â€œç¦ç¥¿å£½â€ã€â€œç¦æ»¡å¤„â€ç­‰è±¡å¾ä¸Šå¸çš„è™šæ„å½¢è±¡åœ¨ä¸­å›½éå¸¸æµè¡Œã€‚</p>
<p><em>Smokey Stover</em> ä» 1935 è¿è½½åˆ° 1973ï¼ŒæœŸé—´ä¸€ç›´é‡ç‚¹ä¿ç•™ç€ â€œfooâ€ çš„ç‰¹å¾ï¼Œå°±å¥½åƒä¸Šé¢ â€œfoomobileâ€ çš„æ’å›¾ã€‚è¿™ä¸ªè¯åœ¨ 20 ä¸–çºª 30 å¹´ä»£éå¸¸æµè¡Œï¼Œé™¤äº†åœ¨ <em>Smokey Stover</em> å‡ºç°ï¼Œè¿˜åœ¨å…¶å®ƒå¡é€šå’Œè¿è½½æ¼«ç”»é‡Œå‡ºç°ï¼Œå¦‚ç”± <em>Bob Clampett</em> åˆ›åŠçš„ <em>Looney Tunesï¼ˆå…”å·´å“¥ï¼‰</em>å¡é€šç³»åˆ—é‡Œçš„ <em>The Daffy Doc</em> å’Œ <em>Porky in Wackyland</em> ä»¥åŠæ¼«ç”» <em>Pogo</em></p>
<p>æ¥ç€ï¼Œ<em>Foo</em> èµ°è¿›äº†å†›äº‹ä¿šè¯­ â€œFUBARâ€ï¼ˆFucked Up Beyond All Recognitionï¼‰ä¸€è¯ä¸­ï¼Œåˆå¹¶åˆ°è¯é‡Œçš„ â€œFUâ€ã€‚åœ¨ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜é‡Œç›Ÿå†›é£è¡Œå‘˜ç”¨è¯æ±‡ â€œfoo fighterâ€ æè¿°å„ç§å„æ ·çš„ UFO æˆ–è€…ä¸€äº›ç¥ç§˜çš„ç©ºä¸­ç°è±¡</p>
<p><em>Foo</em> ç¬¬ä¸€æ¬¡åœ¨æ­£å¼çš„ç¨‹åºç±»å°åˆ·å“ä½œä¸ºè¾ƒä¸ºäººçŸ¥çš„è¯æ±‡å‡ºç°äº 1965 å¹´ TMRC çš„ä¸€ç‰ˆå°åˆ·å“ï¼Œå…³äºç´§æ€¥å¼€å…³ï¼ˆscram switchesï¼‰æ–¹é¢çš„å†…å®¹ï¼š</p>
<p>åœ¨å¤æ‚çš„æ¨¡å‹ç³»ç»Ÿä¸­ï¼Œä¸€äº›ç´§æ€¥å¼€å…³è¢«å®‰è£…åœ¨è®¸å¤šåœºæ‰€é™„è¿‘å¯ä»¥åˆ©ç”¨çš„ç©ºé—´é‡Œï¼Œè¿™äº›åœºæ‰€æœ‰å¯èƒ½ä¼šå‘ç”Ÿçªå‘çš„ä¸å¹¸äº‹æ•…ï¼Œå¦‚å…¨é€Ÿå‰è¿›çš„ç«è½¦é‡åˆ°éšœç¢ç‰©ã€‚è¿™ç§æ¨¡å‹ç³»ç»Ÿçš„å¦ä¸€ä¸ªç‰¹æ€§å°±æ˜¯è°ƒè¯•æ¨¡æ‹Ÿç›˜ä¸Šçš„æ•°ç æ—¶é’Ÿã€‚å½“æœ‰äººæŒ‰ä¸‹ç´§æ€¥å¼€å…³ï¼Œæ•°ç æ—¶é’Ÿå°±åœæ­¢å·¥ä½œï¼Œæ˜¾ç¤ºå±ä¸Šäº¦éšä¹‹æ¢æˆ â€œFOOâ€ è¿™ä¸ªè¯ã€‚åœ¨ TMRC é‡Œé¢ï¼Œç´§æ€¥å¼€å…³ä¹Ÿå› æ­¤ç§°ä½œ â€œFooå¼€å…³â€ï¼ˆFoo switchesï¼‰ã€‚æ­£å› ä¸ºè¿™æ ·ï¼Œâ€œfooâ€ ä¸€è¯å½•å…¥äº† TMRC è¯­è¨€å­—å…¸ã€‚</p>
<p>æœ‰ä¸€æœ¬ä¹¦æè¿°äº† MITï¼ˆéº»çœç†å·¥å­¦é™¢ï¼‰ åˆ—è½¦å®¤é é—¨ä¾§çš„ä¸¤ä¸ªåˆ†åˆ«æ ‡ä¸Š â€œfooâ€ å’Œ â€œbarâ€ æ ‡ç­¾çš„æŒ‰é’®ã€‚åœ¨é‚£æ—¶æœŸï¼Œè¿™ä¸¤ä¸ªè¯é€šå¸¸åº”ç”¨åˆ°å„ç§æŒ‰é’®ä¸Šï¼›å½“ MIT çš„é»‘å®¢ä»¬æœ‰æ–°å¥‡æƒ³æ³•çš„æ—¶å€™ä¹Ÿä¼šåå¤ä½¿ç”¨ä»–ä»¬ã€‚å› æ­¤ï¼Œ<em>foo</em> å’Œ <em>bar</em> è¢«å¹¿æ³›ç”¨ä½œå˜åŒ–ä¸å®šçš„å‘½åã€‚åœ¨ TMRC è¯­è¨€å­—å…¸ç²¾ç®€ç‰ˆä¸­æœ‰è¿™æ ·çš„æè¿°ï¼š</p>
<blockquote>
<p>Multiflush: stop-all-trains-button. Next best thing to the red door button. Also called FOO. Displays â€œFOOâ€ on the clock when used.</p>
</blockquote>
<p>Multiflushï¼ˆä¸çŸ¥é“å«å•¥ï¼‰ï¼šåœä¸‹æ‰€æœ‰åˆ—è½¦æŒ‰é’®ï¼Œé—¨è¾¹çš„çº¢è‰²æŒ‰é’®ï¼Œä¹Ÿå«åš â€œFOOâ€ï¼Œå½“ä½¿ç”¨åï¼Œæ—¶é’Ÿä¸Šä¼šæ˜¾ç¤º â€œFOOâ€ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨ç»ˆäºçŸ¥é“ <em>foo</em>ã€<em>bar</em> æ˜¯ä»€ä¹ˆäº†ï¼Œç®€å•æ€»ç»“ä¸‹å°±æ˜¯ï¼š</p>
<ol>
<li><p>20 ä¸–çºª 30 å¹´ä»£ï¼Œä¸€ä½ç¾å›½æ¼«ç”»è¾¾äººåœ¨ä¸€å°Šä¸­å›½ç‰é›•åƒä¸Šçœ‹åˆ°ä¸€ä¸ªä¸­å›½å­— â€“ â€œç¦â€ ï¼Œç„¶åå°±å°†å…¶éŸ³è¯‘æˆ â€œfooâ€ï¼Œå¹¶åº”ç”¨åˆ°ä»–è‡ªå·±çš„æ¼«ç”»ä¸Š</p>
</li>
<li><p>æ¼«ç”»å¤§å”å°† â€œfooâ€ å‘æ‰¬å…‰å¤§ä¸ä¹…ï¼Œå”¯æä¸ä¹±çš„å†›äº‹ä¸–ç•Œå°† â€œfooâ€ æ”¾åˆ°äº†ä¿šè¯­ â€œFUBARâ€ é‡Œé¢ï¼Œæ¼”å˜æˆäº† â€œFoobarâ€</p>
</li>
<li><p>ä¹‹å MIT äººæ‰åœ¨ä»‹ç»ä¸€é¡¹ â€œcomplex model systemâ€ çš„ç´§æ€¥å¼€å…³ä¸­å¼•å…¥äº† â€œfooâ€ ä¸€è¯ï¼Œå¹¶å‘è¡¨å‡ºå»ï¼Œäºæ˜¯ä¹ MIT çš„é»‘å®¢ä»¬ä¸€æœ‰æ–°å¥‡æƒ³æ³•å°±ç”¨ â€œfooâ€ ä¸€è¯ï¼Œå¹¶ç”¨ä¸Šäº†ç˜¾ï¼Œä¹…è€Œä¹…ä¹‹å¤§å®¶å°±å¯¹ â€œfooâ€ å’Œ â€œbarâ€ è®¤è¯†è¾¾æˆäº†å…±è¯†</p>
</li>
</ol>
<p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š<em>Foo</em>ã€<em>Bar</em> ä»€ä¹ˆé¬¼éƒ½ä¸æ˜¯å´èƒ½ä»£è¡¨ä¸€åˆ‡ï¼ŒFUBAR!</p>
<p>The End</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åœ¨ WebKit çœ‹äº† CSS ä¼ªç±»çš„æ–‡ç« ï¼Œå…¶ä¸­å¯¹ &lt;code&gt;:matches()&lt;/code&gt; çš„ä»‹ç»å‡ºç°äº† &lt;code&gt;foo&lt;/code&gt; å’Œ &lt;code&gt;bar&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:matches(.foo, .bar) {
   
    
    </summary>
    
      <category term="ç”Ÿæ´»ç©ä¹" scheme="https://aotu.io/cates/%E7%94%9F%E6%B4%BB%E7%8E%A9%E4%B9%90/"/>
    
    
      <category term="Foo" scheme="https://aotu.io/tags/Foo/"/>
    
  </entry>
  
  <entry>
    <title>ã€è¯‘ã€‘ä»‹ç»Sass Mapsï¼šç”¨æ³•è·Ÿä¾‹å­</title>
    <link href="https://aotu.io/notes/2015/12/09/an-introduction-to-sass-maps/"/>
    <id>https://aotu.io/notes/2015/12/09/an-introduction-to-sass-maps/</id>
    <published>2015-12-09T01:54:16.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡ç¿»è¯‘è‡ª<a href="http://webdesign.tutsplus.com/tutorials/an-introduction-to-sass-maps-usage-and-examples--cms-22184" target="_blank" rel="external">An Introduction to Sass Maps:Usage and Examples</a></p>
</blockquote>
<a id="more"></a>
<p>å¯¹äºå‰ç«¯å¯ä¼¸ç¼©é¡µé¢çš„ç¼–å†™æ¥è¯´Sass Mapså¯ä»¥è¯´æ˜¯ä¸€ä¸ªç¦éŸ³ï¼Œä»é€»è¾‘æ¨¡å—ä¸­æŠ½å–å‡ºé…ç½®æ˜¯ä¸€ç§éå¸¸å¥½çš„æ–¹æ³•ã€‚ç°åœ¨å°±è®©æˆ‘è·Ÿä½ è§£é‡Šä¸ºä»€ä¹ˆæˆ‘è®¤ä¸ºåœ¨Sass 3.3ä¸­Sass Mapsæ˜¯æœ€å¥½çš„ç‰¹æ€§ã€‚</p>
<h2 id="Sass-3-3"><a href="#Sass-3-3" class="headerlink" title="Sass 3.3"></a>Sass 3.3</h2><p>Sass 3.3[<em>æ³¨1</em>]å³å°†æ›´æ–°ç»™æ‰€æœ‰äººä½¿ç”¨ï¼Œä½†æ˜¯å¯¹äºå¾ˆå¤šå¼€å‘è€…æ¥è¯´è¿˜æœ‰å¾ˆå¤šå®ç”¨æ€§çš„ç‰¹æ€§ä»–ä»¬ä¾ç„¶ä¸ç†Ÿæ‚‰ã€‚æ–°ç‰ˆæœ¬çš„Sass 3.3å¸¦ç»™æˆ‘ä»¬æ–°çš„æ•°æ®ç±»å‹ç§°ä¸º<code>map</code>ã€‚<code>Maps</code>æ˜¯<code>key/value</code>é”®å€¼å¯¹çš„é›†åˆï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬é€šè¿‡ç®€å•çš„ä»£ç åˆ›å»ºä¸€å—é…ç½®åŒºåŸŸã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨-Sass-Maps"><a href="#å¦‚ä½•ä½¿ç”¨-Sass-Maps" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Sass Maps"></a>å¦‚ä½•ä½¿ç”¨ Sass Maps</h2><p>é¦–å…ˆæˆ‘ä»¬ä¼šè¦†ç›–Sass Mapsçš„åŸºæœ¬ç”¨æ³•ï¼Œåé¢ä¼šçœ‹å‡ ä¸ªå®ä¾‹ã€‚</p>
<h3 id="åˆ›å»ºä¸€ä¸ªMap"><a href="#åˆ›å»ºä¸€ä¸ªMap" class="headerlink" title="åˆ›å»ºä¸€ä¸ªMap"></a>åˆ›å»ºä¸€ä¸ªMap</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆ›å»ºSass Mapsçš„è¯­å¥ï¼Œåˆ›å»ºä¸€ä¸ªå˜é‡ï¼ˆè¿™é‡Œç”¨äº†<code>$map</code>ï¼‰ç„¶åè¾“å…¥ä¸€äº›<code>keys</code>è·Ÿ<code>values</code>ï¼Œé€šè¿‡<code>,</code>æ¥åˆ†å‰²ï¼Œè¿™äº›é”®å€¼å¯¹é€šè¿‡æ‹¬å·åŒ…å›´èµ·æ¥ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$map: (</div><div class="line">  key: value,</div><div class="line">  nextkey: nextvalue</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•è·å–Mapçš„å€¼"><a href="#å¦‚ä½•è·å–Mapçš„å€¼" class="headerlink" title="å¦‚ä½•è·å–Mapçš„å€¼"></a>å¦‚ä½•è·å–Mapçš„å€¼</h3><p>å½“ä½ å®šä¹‰äº†å¾ˆå¤šå¯¹<code>key/value</code>é”®å€¼å¯¹ä¹‹åï¼Œæœ‰æ—¶å€™ä½ éœ€è¦å–å‡ºä¸€äº›å€¼ã€‚ä½ å¯ä»¥é€šè¿‡<code>map-get()</code>æ–¹æ³•æ¥æ‰¾å‡ºæŸä¸ª<code>key</code>çš„<code>value</code>ã€‚è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š<code>map</code>çš„åç§°è¿˜æœ‰<code>key</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.element:before &#123;</div><div class="line">  <span class="attr">content</span>: map-get($map, key);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ç¼–è¯‘è¾“å‡ºåçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.element</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">  <span class="attribute">content</span>: value</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•æ£€æŸ¥æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨"><a href="#å¦‚ä½•æ£€æŸ¥æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨" class="headerlink" title="å¦‚ä½•æ£€æŸ¥æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨"></a>å¦‚ä½•æ£€æŸ¥æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨</h3><p>åœ¨ç”¨<code>Sass</code>è¿›è¡Œç¼–ç çš„æ—¶å€™å¼ºçƒˆå»ºè®®ä½¿ç”¨<a href="https://webdesign.tutsplus.com/tutorials/an-introduction-to-error-handling-in-sass--cms-19996" target="_blank" rel="external">å¯é çš„é”™è¯¯å¤„ç†</a>ã€‚åœ¨è¿™é‡Œ<code>Sass</code>ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ–¹æ³•<code>map-has-key()</code>ã€‚è¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿæ£€æµ‹å‡ºæŸä¸ª<code>key</code>æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨èƒ½å¤Ÿè¾“å‡ºå…¶ä»–ä¿¡æ¯ç»™å¼€å‘è€…ã€‚</p>
<p>å¯ä»¥ç§»æ­¥ <code>Hugo Giraudel</code> å†™çš„è¿™ç¯‡å¦‚ä½•å¤„ç†é”™è¯¯çš„æ–‡ç«  <a href="http://webdesign.tutsplus.com/tutorials/an-introduction-to-error-handling-in-sass--cms-19996" target="_blank" rel="external">An Introduction to Error Handing in Sass</a>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$map: (</div><div class="line">  key: value,</div><div class="line">  <span class="attr">nextkey</span>: nextvalue</div><div class="line">);</div><div class="line"></div><div class="line">.element &#123;</div><div class="line">  @<span class="keyword">if</span> map-has-key($map, key)&#123;</div><div class="line">    <span class="attr">content</span>: <span class="string">'Map has this key.'</span>;</div><div class="line">  &#125; @<span class="keyword">else</span> &#123;</div><div class="line">    <span class="attr">content</span>: <span class="string">'Map has not this key.'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¹‹åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.element</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">'Map has this key.'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•åˆå¹¶Maps"><a href="#å¦‚ä½•åˆå¹¶Maps" class="headerlink" title="å¦‚ä½•åˆå¹¶Maps"></a>å¦‚ä½•åˆå¹¶Maps</h3><p>è¿™ä¸ªä¸€ä¸ªç¦åˆ©ï¼š<code>Sass</code>å…è®¸æˆ‘ä»¬åˆå¹¶ä¸¤ä¸ªç”šè‡³æ›´å¤šä¸ª<code>maps</code>æˆä¸€ä¸ªï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­æˆ‘ä»¬å°†çŸ¥é“å¦‚ä½•ä½¿ç”¨<code>map-merge()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$colors: (</div><div class="line">  light: #ccc,</div><div class="line">  dark: #000</div><div class="line">);</div><div class="line"></div><div class="line">$brand-colors: (</div><div class="line">  main: red,</div><div class="line">  alternative: blue</div><div class="line">);</div><div class="line"></div><div class="line">// åˆå¹¶maps</div><div class="line">$merged: map-merge($colors, $brand-colors);</div><div class="line"></div><div class="line">.element &#123;</div><div class="line">  content: map-get($merged, alternative);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¹‹åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.element</span> &#123;</div><div class="line">  <span class="attribute">content</span>: blue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ©ç”¨Sass-Mapsè¿›è¡Œå®æˆ˜"><a href="#åˆ©ç”¨Sass-Mapsè¿›è¡Œå®æˆ˜" class="headerlink" title="åˆ©ç”¨Sass Mapsè¿›è¡Œå®æˆ˜"></a>åˆ©ç”¨Sass Mapsè¿›è¡Œå®æˆ˜</h2><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®ç”¨<code>Sass Maps</code>ï¼Œç°åœ¨æˆ‘ä»¬å°†é€šè¿‡ä¸€äº›å®æˆ˜è®­ç»ƒçœ‹çœ‹åœ¨å“ªäº›åœ°æ–¹é€‚åˆä½¿ç”¨è¯¥ç‰¹æ€§ã€‚</p>
<p>1.å¦‚ä½•å¾ªç¯Mapç”Ÿæˆç±»</p>
<p>ä½ å¯ä»¥éå†<code>map</code>é€šè¿‡é‡Œé¢çš„<code>values</code>å»å®šä¹‰ä½ éœ€è¦çš„å˜é‡ç„¶ååŠ åˆ°<code>map</code>é‡Œé¢çš„<code>name</code>å»ï¼Œè¿™æ ·å­ä½ å¯ä»¥åˆ›å»ºå‡ºå¾ˆå¤šç§<code>values</code>ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘å°†è¾“å‡º<code>classes</code>æ¥å±•ç¤º<code>icons</code>ã€‚æˆ‘å°†<code>icon</code>çš„<code>name</code>ä½œä¸º<code>key</code>ï¼Œè®©<code>value</code>å»æ›¿ä»£å®é™…çš„<code>content</code>(é€šè¿‡ä¼ªå…ƒç´ åŠ è¿›å»)ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨é¡¹ç›®å®æˆ˜ä¸­æˆ‘ä»¬é€šè¿‡ä¼šå…ˆå£°æ˜ä¸€äº›åŸºç¡€çš„æ ·å¼ï¼Œè¿™ä¸åœ¨æœ¬æ•™ç¨‹çš„èŒƒå›´å†…ã€‚</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/* å®šä¹‰ä¸€ä¸ªsass mapåç§°ä¸º$icons */</div><div class="line">$icons: (</div><div class="line">  checkmark: a,</div><div class="line">  plus: b,</div><div class="line">  minus: c</div><div class="line">);</div><div class="line"></div><div class="line">/* éå†mapçš„æ‰€æœ‰keyï¼Œåˆ›å»ºå„è‡ªçš„ç±» */</div><div class="line">@each $name, $value in $icons &#123;</div><div class="line">  .icon--#&#123;$name&#125; &#123;</div><div class="line">    content: $value;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¹‹åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* éå†mapçš„æ‰€æœ‰keyï¼Œåˆ›å»ºå„è‡ªçš„ç±» */</span></div><div class="line"><span class="selector-class">.icon--checkmark</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">"a"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.icon--plus</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">"b"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.icon--minus</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">"c"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„æ–¹æ³•æ¥è¾“å‡ºiconsçš„æ‰€æœ‰ç±»ï¼Œè¿˜æœ‰å¤§é‡æƒ…å†µä¹Ÿä¼šä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p>
<p>2.å¦‚ä½•æ‹¿å‡ºMapsçš„å¤šä¸ªå€¼</p>
<p>è®©æˆ‘ä»¬ç»§ç»­ï¼Œç»™ä¸€ä¸ª<code>key</code>èµ‹äºˆå¤šä¸ª<code>value</code>ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¤šä¸ª<code>value</code>ä¹‹é—´é€šè¿‡<code>,</code>æ¥åˆ†å‰²ã€‚ä¸‹é¢çš„ä¾‹å­èƒ½å¤Ÿéå¸¸å¥½çš„è¾“å‡ºä¸åŒæ¨¡å—çš„æ ·å¼ã€‚</p>
<p>è¿™é‡Œæˆ‘å°†å®šä¹‰ä¸€ç³»åˆ—<code>buttons</code>ï¼Œæ¯ä¸€ä¸ª<code>key</code>çš„ç¬¬ä¸€ä¸ª<code>value</code>æ˜¯<code>background-color</code>ï¼Œç¬¬äºŒä¸ª<code>value</code>æ˜¯<code>font-color</code>ã€‚</p>
<p>ç„¶åæˆ‘å°†é€šéå†<code>keys</code>èµ‹å€¼ç»™<code>$colors</code>å¯¹è±¡ã€‚é€šè¿‡<code>nth($colors,1)</code>ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å€¼å¾—ä½ç½®ï¼‰æ‹¿åˆ°ç¬¬ä¸€ä¸ª<code>key</code>ã€‚å¦‚æœä½ éœ€è¦æ‹¿ç¬¬äºŒä¸ª<code>value</code>ï¼Œé‚£å°†ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸º<code>2</code>ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// _m-buttons.scss</div><div class="line">$buttons: (</div><div class="line">  error: (#d82d2d, #666),</div><div class="line">  success: (#52bf4a, #fff),</div><div class="line">  warning: (#c23435, #fff)</div><div class="line">);</div><div class="line"></div><div class="line">.m-button &#123;</div><div class="line">  display: inling-block;</div><div class="line">  padding: .5em;</div><div class="line">  background: #ccc;</div><div class="line">  color: #666;</div><div class="line"></div><div class="line">  @each $name, $colors in $buttons &#123;</div><div class="line">    $bgcolor: nth($colors, 1);</div><div class="line">    $fontcolor: nth($colors, 2);</div><div class="line"></div><div class="line">    &amp;--#&#123;$name&#125; &#123;</div><div class="line">      background-color: $bgcolor;</div><div class="line">      color: $fontcolor;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¹‹åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.m-button</span> &#123;</div><div class="line">  <span class="attribute">display</span>: inline-block;</div><div class="line">  <span class="attribute">padding</span>: .<span class="number">5em</span>;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.m-button--error</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#d82d2d</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.m-button--success</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#52bf4a</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.m-button--warning</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#c23435</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.å¤„ç†å±‚(z-index)</p>
<p>åœ¨æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæˆ‘è¿˜æ²¡æœ‰è§è¿‡ä¸è·Ÿ<a href="https://webdesign.tutsplus.com/articles/what-you-may-not-know-about-the-z-index-property--webdesign-16892" target="_blank" rel="external">z-index</a>æ‰“äº¤é“çš„å‰ç«¯å¼€å‘ã€‚å½“ä½ åœ¨é¡¹ç›®ä¸­å¤šä¸ªåœ°æ–¹éœ€è¦ä½¿ç”¨åˆ°<code>z-index</code>çš„æ—¶å€™é—®é¢˜é€šå¸¸éšä¹‹è€Œæ¥ï¼Œ<code>Sass maps</code>èƒ½å¤Ÿå¸®æˆ‘ä»¬è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªmapåç§°ä¸º<code>$layer</code>ï¼Œæ‰€æœ‰çš„<code>key</code>éƒ½åº”è¯¥åˆç†å‘½åä»¥ä¾¿æˆ‘ä»¬èƒ½å¤ŸçŸ¥é“å“ªä¸ªvalueæ˜¯å¯¹åº”å“ªä¸ªelementçš„-æ¯”å¦‚ï¼š<code>offcanvas</code>,<code>lightbox</code>,<code>dropdown</code>ç­‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// _config.scss</span></div><div class="line">$layer: (</div><div class="line">  offcanvas: <span class="number">1</span>,</div><div class="line">  <span class="attr">lightbox</span>: <span class="number">500</span>,</div><div class="line">  <span class="attr">dropdown</span>: <span class="number">10</span>,</div><div class="line">  <span class="attr">tooltip</span>: <span class="number">15</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// _m-lightboxes.scss</span></div><div class="line">@<span class="function"><span class="keyword">function</span> <span class="title">layer</span>(<span class="params">$name</span>) </span>&#123;</div><div class="line">  @<span class="keyword">if</span> map-has-key($layer, $name) &#123;</div><div class="line">    @<span class="keyword">return</span> map-get($layer, $name);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @warn <span class="string">"The key #&#123;$name&#125; is not in the map '$layer'"</span>;</div><div class="line">  @<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">.m-lightbox &#123;</div><div class="line">  z-index: layer(lightbox);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æˆ‘å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ç”¨æ¥è·å–ç‰¹å®š<code>key</code>çš„<code>value</code>ï¼Œä½†ä¸ºä»€ä¹ˆæˆ‘è¦è¿™æ ·åšï¼Ÿç†ç”±å¾ˆç®€å•ï¼šè¿™æ ·å­æ¯”æ¯æ¬¡éƒ½å†™<code>map-get()</code>æ–¹æ³•è¦æ–¹ä¾¿å¿«æ·ã€‚å¦å¤–ä¸€ä¸ªæ–¹é¢å°±æ˜¯ä½ å¯ä»¥åˆ›å»º<code>é”™è¯¯å¤„ç†</code>ç»™å¼€å‘è€…ä¸€äº›é”™è¯¯ä¿¡æ¯å½“æ²¡æœ‰è¾“å‡ºæœŸæœ›çš„ä¿¡æ¯çš„æ—¶å€™ã€‚</p>
<p>ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.m-lightbox</span> &#123;</div><div class="line">  <span class="attribute">z-index</span>: <span class="number">500</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.åœ¨é¡¹ç›®ä¸­ä¸ºå­—ä½“åˆ›å»ºåŸºæœ¬æ ·å¼</p>
<p>æ¯ä¸€ä¸ªé¡¹ç›®éƒ½æ‹¥æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥ç»™å…¨å±€ä½¿ç”¨ã€‚ä¾‹å¦‚åœ¨æˆ‘çš„é¡¹ç›®ä¸­æˆ‘ä¼šå®šä¹‰ä¸€äº›å­—ä½“å±æ€§ï¼šå­—ä½“é¢œè‰²ï¼Œå¯é€‰çš„å­—ä½“é¢œè‰²ï¼Œå­—ä½“é›†æˆ–è€…å­—ä½“å¤§å°ã€‚æˆ‘é€šå¸¸éƒ½ä¼šä¸ºæ¯ä¸ªå±æ€§åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯<code>map</code>èƒ½å¤Ÿåšå¾—æ›´å¥½ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå…ˆä»<em>æ—§</em>çš„è§£å†³æ–¹æ³•å¼€å§‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$base-font-color: #666;</div><div class="line">$base-font-family: Arial, Heletica, Sans-Serif;</div><div class="line">$base-font-size: 16px;</div><div class="line">$base-line-height: 1.4;</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥çœ‹é€šè¿‡<code>Sass Map</code>å†™çš„<code>æ–°</code>çš„è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// _config.scss</div><div class="line">$font: (</div><div class="line">  color: #666;</div><div class="line">  family: (Arial, Helvetica),</div><div class="line">  size: 16px,</div><div class="line">  line-height: 1.4</div><div class="line">);</div><div class="line"></div><div class="line">// _presets.scss</div><div class="line">body &#123;</div><div class="line">  color: map-get($font, color);</div><div class="line">  font-family: map-get($font, family);</div><div class="line">  font-size: map-get($font, size);</div><div class="line">  line-height: map-get($font, line-height);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5.Breakpoints &lt; 3</p>
<p>æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªä½¿ç”¨æ¡ˆä¾‹ã€‚åœ¨ä½ çš„æ•´ä¸ªé¡¹ç›®ä¸­æ‹¥æœ‰ä¸€å—ä¸“é—¨ç”¨æ¥å¤„ç†æ–­ç‚¹æ˜¯éå¸¸å¥½çš„ã€‚æ‰€ä»¥ï¼Œåƒè¿™ä¸€èŠ‚ä¸­å…³äºå¤„ç†<code>z-index</code>ï¼Œä½ å°±å·²ç»ç”¨åˆ°äº†æ–­ç‚¹ã€‚å½“ä½ æ”¹å˜å€¼å¾—æ—¶å€™ï¼Œæ•´ä¸ªé¡¹ç›®çš„è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ï¼Œè¿™å¤šä¹ˆä»¤äººæƒŠè®¶ã€‚</p>
<p>é‚£å°±å…ˆè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª<code>map</code>åç§°ä¸º<code>$breakpoints</code>å¼€å§‹å§ã€‚</p>
<p>æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯åœ¨ä¸€ä¸ªå…ƒç´ ä¸­ä½¿ç”¨æ–­ç‚¹é€šè¿‡æ˜“æ‡‚çš„åå­—æ›¿ä»£é‚£äº›<code>pixel</code>å€¼ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª<code>mixin</code>æ–¹æ³•æ¥å®ç°å ä½<code>name</code>ï¼Œæˆ‘æŠŠmixinå‘½åä¸º<code>respond-to</code>ä»¥åŠä¼ å…¥<code>$brakpoint</code>å‚æ•°ã€‚é€šè¿‡<code>$value</code>æˆ‘å°±èƒ½å¾—åˆ°æœŸæœ›çš„æ–­ç‚¹ç„¶ååé¢åœ¨<code>åª’ä½“æŸ¥è¯¢</code>ä¸­ä½¿ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Map with much breakpoints</span></div><div class="line">$breakpoints: (</div><div class="line">  small: <span class="number">320</span>px,</div><div class="line">  <span class="attr">medium</span>: <span class="number">600</span>px,</div><div class="line">  <span class="attr">large</span>: <span class="number">768</span>px</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// Respond-To Mixin</span></div><div class="line">@mixin respond-to($breakpoint) &#123;</div><div class="line">  @<span class="keyword">if</span> map-has-key($breakpoints, $breakpoint) &#123;</div><div class="line">    <span class="attr">$value</span>: map-get($breakpoints, $breakpoint);</div><div class="line"></div><div class="line">    @media screen and (min-width: $value) &#123;</div><div class="line">      @content;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @warning <span class="string">"Unknown `#&#123;$breakpoint&#125;` in $breakpoints"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// Sass</div><div class="line">.m-tabs &#123;</div><div class="line">  background-color: #f2f2f2;</div><div class="line"></div><div class="line">  @include reponse-to(medium) &#123;</div><div class="line">    background-color: #666;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Output</div><div class="line">.m-tabs &#123;</div><div class="line">  background-color: #f2f2f2;</div><div class="line">&#125;</div><div class="line">@media screen and (min-width: 600px) &#123;</div><div class="line">  background-color: #666;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§ä½¿ç”¨æ¡ˆä¾‹æ˜¯æˆ‘æœ€å–œæ¬¢ä¹‹ä¸€ï¼</p>
<p>6.é¢œè‰²çš„é«˜çº§ä½¿ç”¨</p>
<p>ç°åœ¨äº‹æƒ…å˜å¾—æœ‰ä¸€ç‚¹ç‚¹å›°éš¾äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é€šè¿‡ä¸åŒè‰²è°ƒå®šä¹‰çš„é¢œè‰²è®¡åˆ’ã€‚</p>
<p>æˆ‘ä»¬çš„<code>Sass map</code>åœ¨è¿™ä¸ªä¾‹å­ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>$colorscheme</code>åŒæ—¶é‡Œé¢å®šä¹‰äº†å¾ˆå¤šå¯¹è±¡æ‹¥æœ‰<code>keys</code>è·Ÿ<code>values</code>ã€‚é¡¹ç›®ä¸­æ‹¥æœ‰ä¸åŒçš„ç°è‰²è°ƒï¼Œä½†æˆ‘ä»¬ä¸æƒ³ä¸ºæ¯ä¸€ä¸ªéƒ½å£°æ˜ä¸€ä¸ªå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªå¯¹è±¡<code>gray</code>ï¼Œç„¶åé€šè¿‡é”®å€¼å¯¹åˆ†å‰²ã€‚</p>
<p>ä¸‹é¢å¼€å§‹è¿™ä¸ªMap:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// Scheme of colors</div><div class="line">$colorscheme: (</div><div class="line">  gray: (</div><div class="line">    base: #ccc,</div><div class="line">    light: #f2f2f2,</div><div class="line">    dark: #666</div><div class="line">  ),</div><div class="line">  brown: (</div><div class="line">    base: #ab906b,</div><div class="line">    light: #ecdac3,</div><div class="line">    dark: #5e421c</div><div class="line">  )</div><div class="line">);</div></pre></td></tr></table></figure>
<p>ç°åœ¨è®©æˆ‘ä»¬åŠ å…¥<code>setcolor</code>æ–¹æ³•æ¥è·å–é¢œè‰²çš„ä¸åŒé€‰æ‹©ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Sass mapçš„å¯¹è±¡(<code>$scheme</code>)-åœ¨è¿™ä¸ªä¾‹å­ä¸­å¯èƒ½æ˜¯<code>gray</code>æˆ–è€…<code>brown</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä½ æƒ³è¦çš„é¢œè‰²(<code>$tone</code>)ï¼Œé»˜è®¤å€¼æ˜¯<code>base</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@<span class="function"><span class="keyword">function</span> <span class="title">setcolor</span>(<span class="params">$scheme, $tone: base</span>) </span>&#123;</div><div class="line">  @<span class="keyword">return</span> map-get(map-get($colorscheme, $scheme), $tone);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œè¿™é‡Œç»™å‡ºäº†ä¸€ä¸ªä¾‹å­èƒ½å¤Ÿè®©ä½ ä»è¿™ä¸ªmapä¸­è·å–ä¸åŒé¢œè‰²ï¼Œæ¯”ä½ æƒ³è±¡ä¸­çš„è¿˜è¦ç®€å•ï¼ˆä¹Ÿè®¸ï¼‰ï¼</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Sass</div><div class="line">.element &#123;</div><div class="line">  color: setcolor(brown);</div><div class="line">&#125;</div><div class="line">.element--light &#123;</div><div class="line">  color: setcolor(brown, light);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Output</div><div class="line">.element &#123;</div><div class="line">  color: #ab906b;</div><div class="line">&#125;</div><div class="line">.element--light &#123;</div><div class="line">  color: #ecdac3;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ ä¼šå®Œæˆä¸Šé¢çš„æŒ‘æˆ˜çš„ï¼Œç°åœ¨ä½ èƒ½å¤Ÿåˆ›å»ºä¸€ç»„è‰²è°ƒè€Œä¸éœ€è¦é€šè¿‡ä¸ºæ¯ä¸€ç§é¢œè‰²åˆ›å»ºä¸€ä¸ªå˜é‡ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æˆ‘æ˜¯å—åˆ°äº†<a href="http://erskinedesign.com/blog/friendlier-colour-names-sass-maps/" target="_blank" rel="external">Tom Davies</a>çš„å¯å‘ï¼ŒåŒæ—¶æˆ‘ä¹Ÿå»ºè®®ä½ çœ‹çœ‹ä»–è¿™ç¯‡æ–‡ç« ã€‚</p>
<h2 id="é€šè¿‡Classeså®šåˆ¶ä¸»é¢˜"><a href="#é€šè¿‡Classeså®šåˆ¶ä¸»é¢˜" class="headerlink" title="é€šè¿‡Classeså®šåˆ¶ä¸»é¢˜"></a>é€šè¿‡Classeså®šåˆ¶ä¸»é¢˜</h2><p>è¿™æ˜¯ä¸ºé«˜çº§Sassç”¨æˆ·å‡†å¤‡çš„ã€‚åœ¨é¡¹ç›®ä¸­ä¼šç»å¸¸éœ€è¦é€šè¿‡ä¸€äº›åŸºç¡€ä»£ç åˆ›å»ºå¤šå¥—ä¸»é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œç»™å‡ºä¸€ä¸ªå»ºè®®ï¼šåœ¨æ–‡æ¡£çš„æœ€å¼€å§‹å°±å®šä¹‰ä¸€ä¸ª <em>ä¸»é¢˜ç±»</em> æ¥æ»¡è¶³ç‰¹å®šçš„å·¥ä½œã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯¹è±¡ä»¥ä¾¿èƒ½å¤Ÿå¤„ç†ä¸åŒåå­—çš„ä¸»é¢˜ï¼ŒåŒæ—¶ç»™å‡ºä¸åŒçš„æ ·å¼æ¨¡å—ã€‚</p>
<h3 id="å®šä¹‰themes"><a href="#å®šä¹‰themes" class="headerlink" title="å®šä¹‰themes"></a>å®šä¹‰themes</h3><p>æœ€å¼€å§‹ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­é€šè¿‡Sass mapå…¨å±€å®šä¹‰themesï¼Œ<code>value</code>å°±æ˜¯ä¸»é¢˜åå­—ï¼ŒåŒæ—¶è¿™ä¸ªç±»å¿…é¡»é™„åœ¨<code>body</code>å…ƒç´ ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘åˆ›å»ºäº†ä¸€ä¸ªmap<code>$themes</code>ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªä¸»é¢˜ï¼š<code>theme-light</code>å’Œ<code>theme-dark</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// _config.scss</span></div><div class="line">$themes: (</div><div class="line">  theme1: theme-light;</div><div class="line">  theme2: theme-dark;</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="è·å–å€¼ï¼ˆæ·å¾„ï¼‰"><a href="#è·å–å€¼ï¼ˆæ·å¾„ï¼‰" class="headerlink" title="è·å–å€¼ï¼ˆæ·å¾„ï¼‰"></a>è·å–å€¼ï¼ˆæ·å¾„ï¼‰</h3><p>ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥å¿«é€Ÿè·å–æ¨¡å—çš„å€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•åŒ…æ‹¬ä¸‰ä¸ªå˜é‡å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>$map</code>: å®šä¹‰mapçš„åå­—ç¡®å®švaluesæ˜¯ä»å“ªé‡Œæ¥çš„</li>
<li><code>$object</code>: åœ¨è¿™é‡Œä¾‹å­ä¸­å°±æ˜¯themeçš„key</li>
<li><code>$style</code>: éœ€è¦çš„æ ·å¼å±æ€§å€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// _functions.scss</span></div><div class="line">@<span class="function"><span class="keyword">function</span> <span class="title">setStyle</span>(<span class="params">$map, $object, $style</span>) </span>&#123;</div><div class="line">  @<span class="keyword">if</span> map-has-key($map, $object) &#123;</div><div class="line">    @<span class="keyword">return</span> map-get(map-get($map, $object), $style);</div><div class="line">  &#125;</div><div class="line">  @warn <span class="string">"The key `#&#123;$object&#125;` is not available in the map."</span>;</div><div class="line">  @<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆæ¨¡å—"><a href="#ç”Ÿæˆæ¨¡å—" class="headerlink" title="ç”Ÿæˆæ¨¡å—"></a>ç”Ÿæˆæ¨¡å—</h3><p>ç°åœ¨æˆ‘ä»¬åˆ›å»ºæ–°çš„<code>Sass Map</code>åç§°ä¸º<code>$config</code>ï¼Œæ¯ä¸€ä¸ªä¸»é¢˜éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡åŒæ—¶åå­—å¿…é¡»æ˜¯<code>$themes</code>ä¸­çš„<code>key</code>ï¼šä¸ç„¶å°†ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// _m-buttons.scss</div><div class="line">// 1.Config</div><div class="line">$config: (</div><div class="line">  theme1: (</div><div class="line">    background: #f2f2f2,</div><div class="line">    color: #000</div><div class="line">  ),</div><div class="line">  theme2: (</div><div class="line">    background: #666,</div><div class="line">    color: #fff</div><div class="line">  )</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="éå†ä¸»é¢˜"><a href="#éå†ä¸»é¢˜" class="headerlink" title="éå†ä¸»é¢˜"></a>éå†ä¸»é¢˜</h3><p>æœ€åä¸€éƒ¨åˆ†ä¼šä½¿ç”¨ä¸€ç‚¹ç‚¹æŠ€å·§ã€‚å¼€å§‹çš„åœ°æ–¹æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—<code>.m-button</code>ç„¶åæˆ‘ä»¬æœŸæœ›åœ¨æ¯ä¸ªä¸»é¢˜ä¸‹é¢å¤–è§‚æ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code>@each</code>æ–¹æ³•éå†Map<code>$themes</code>æ‹¿åˆ°<code>$key</code>è·Ÿ<code>$value</code>ã€‚éå†ä¹‹åå°±èƒ½å¤Ÿä¸ºä¸åŒä¸»é¢˜åˆ›å»ºmapã€‚</p>
<p>åœ¨è¿™ä¸€èŠ‚çš„å¼€å§‹æˆ‘æåˆ°äº†<code>keys</code>åœ¨æ¯ä¸ªmapé‡Œé¢å¿…é¡»æ˜¯ä¸€æ ·çš„(<code>$themes</code>è·Ÿ<code>$config</code>)ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»æ£€æŸ¥map<code>$config</code>çš„keyæ˜¯å¦éƒ½æ¥è‡ªmap<code>$themes</code>ï¼Œè¿™é‡Œä½¿ç”¨åˆ°äº†<code>map-has-key()</code>æ–¹æ³•ã€‚å¦‚æœåŒ…å«äº†keyé‚£å°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ç»™å¼€å‘è€…ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// _m-buttons.scss</div><div class="line">// 2.Base</div><div class="line">.m-button &#123;</div><div class="line">  @each $key, $value in $themes &#123;</div><div class="line">    @if map-has-key($config, $key) &#123;</div><div class="line">      .#&#123;$value&#125; &amp; &#123;</div><div class="line">        background: setStyle($config, $key, background);</div><div class="line">        color: setStyle($config, $key, color);</div><div class="line">      &#125;</div><div class="line">    &#125; @else &#123;</div><div class="line">      @warn "The key `#&#123;$key&#125; isn't defined in the map $config`"</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¾“å‡ºçš„ç»“æœã€‚è¿™æ˜¯éå¸¸å¥½çš„ï¼Œä¿è¯äº†é…ç½®åŒºåŸŸè·Ÿæ¨¡å—è§£è€¦ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.theme-light</span> <span class="selector-class">.m-button</span> &#123;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#f2f2f2</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.theme-dark</span> <span class="selector-class">.m-button</span> &#123;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#666</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åä½ å¯ä»¥è‡ªå·±è¯•è¯•ä¸Šé¢çš„ä»£ç çœ‹èƒ½ä¸èƒ½è¿è¡Œå‡ºç»“æœã€‚ä¹Ÿè®¸å¯¹äºä½ æ¥è¯´è¿™ä¸ªæ–¹æ¡ˆå¹¶ä¸æ˜¯æœ€å¥½çš„ï¼Œä½ ä¼šå¯»æ±‚å¦å¤–çš„æ–¹æ¡ˆï¼Œä½†æ˜¯æˆ‘ä¾ç„¶å¸Œæœ›è¿™èƒ½å¤Ÿå¸®åŠ©ä½ ç»´æŒä»£ç ã€‚</p>
<h2 id="æœ€åæ€è€ƒ"><a href="#æœ€åæ€è€ƒ" class="headerlink" title="æœ€åæ€è€ƒ"></a>æœ€åæ€è€ƒ</h2><p>åœ¨æˆ‘çœ‹æ¥ <code>Sass Maps</code>æ˜¯Sass 3.3æœ€å€¼å¾—ä»‹ç»çš„ç‰¹æ€§ã€‚ç†ç”±æ˜¯æˆ‘è®¤ä¸ºå®ƒç»™å‡ºäº†éå¸¸å¥½çš„æ–¹å¼æ¥åˆ›å»ºå¥å£®çš„ç»“æ„ï¼Œè¿™åªéœ€è¦å°‘é‡çš„é…ç½®ã€‚Sass mapsä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ä¸å½±å“æ•´ä¸ªé¡¹ç›®çš„åŸºç¡€é€»è¾‘ä»£ç åŸºç¡€ä¸Šæ”¹å˜å€¼ã€‚å¼€å§‹ä½¿ç”¨å®ƒå§ï¼Œä½ çš„ä¼™ä¼´å°†ä¼šæ„Ÿæ¿€ä½ ï¼</p>
<p>å¦‚æœä½ å·²ç»å¼€å§‹ä½¿ç”¨<code>Sass maps</code>äº†ï¼Œè®©æˆ‘çŸ¥é“ä½ å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼</p>
<ul>
<li>æ³¨1: æˆªè‡³è¯‘æ–‡çš„Sassæœ€æ–°ç‰ˆæœ¬æ˜¯3.4.19</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª&lt;a href=&quot;http://webdesign.tutsplus.com/tutorials/an-introduction-to-sass-maps-usage-and-examples--cms-22184&quot;&gt;An Introduction to Sass Maps:Usage and Examples&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="sass" scheme="https://aotu.io/tags/sass/"/>
    
      <category term="sass maps" scheme="https://aotu.io/tags/sass-maps/"/>
    
  </entry>
  
  <entry>
    <title>Adobe edge animateåˆ¶ä½œHTML5åŠ¨ç”»</title>
    <link href="https://aotu.io/notes/2015/12/04/edgeAnimate/"/>
    <id>https://aotu.io/notes/2015/12/04/edgeAnimate/</id>
    <published>2015-12-04T14:05:18.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>Edge Animateæ˜¯Adobeå‡ºå“çš„åˆ¶ä½œHTML5åŠ¨ç”»çš„å¯è§†åŒ–å·¥å…·ï¼Œç®€å•çš„å¯ä»¥ç†è§£ä¸ºHTML5ç‰ˆæœ¬çš„Flash Proã€‚Adobe Edge Animateçš„ç›®çš„æ˜¯å¸®åŠ©ä¸“ä¸šè®¾è®¡å¸ˆåˆ¶ä½œç½‘é¡µåŠ¨ç”»ä¹ƒè‡³ç®€å•æ¸¸æˆã€‚ç›®å‰è¯¥å·¥å…·çš„é‡ç‚¹æ”¾åœ¨åŠ¨ç”»å¼•æ“ä¸Šï¼Œå°†å¢åŠ æ›´å¤šHTML5åŠŸèƒ½ï¼Œæ¯”å¦‚Canvasã€HTML5éŸ³é¢‘/è§†é¢‘æ ‡ç­¾ç­‰ã€‚æ”¯æŒAndroidã€iOSã€webOSã€é»‘è“PlayBookã€Firefoxã€Chromeã€Safariå’ŒIE9ç­‰å„ä¸ªå¹³å°ã€‚</p>
<p>Edge Animateä¸»è¦ä½¿ç”¨HTML5,CSS3å’ŒJavaScriptã€‚HTML5æ˜¯å…¶ç”¨äºåˆ›å»ºçš„doctypeï¼Œ2Dçš„transformï¼Œtranslateï¼Œrotateï¼Œscaleï¼Œskewç­‰ç‰¹æ•ˆéƒ½æ˜¯æ¸²æŸ“ä¸ºCSS3ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå¯ä»¥æ“ä½œçº¯ç²¹çš„CSS3ï¼Œå¦‚æœæ˜¯ä¸»æµå¤§ä¼—æµè§ˆå™¨ï¼ŒEdge Animateåˆ™ä¼šé€šè¿‡JavaScriptåº“çš„é…åˆæ¥ä¿è¯HTMLå’ŒCSSçš„æ˜¾ç¤ºå…¼å®¹æ€§ã€‚<br><a id="more"></a></p>
<h2 id="Adobe-edge-animate-CCåŠŸèƒ½"><a href="#Adobe-edge-animate-CCåŠŸèƒ½" class="headerlink" title="Adobe edge animate CCåŠŸèƒ½"></a>Adobe edge animate CCåŠŸèƒ½</h2><p>1.ç²¾ç¡®çš„åŠ¨ç”»ã€‚<br>2.ç›´è§‰åŒ–çš„ä½¿ç”¨è€…ç•Œé¢ã€‚<br>3.ç»˜å›¾å’Œæ–‡å­—å·¥å…·ã€‚<br>4.ç§»åŠ¨è·¯å¾„ã€‚<br>5.å¯é‡å¤ä½¿ç”¨çš„ç¬¦å·ã€‚<br>6.å…¼å®¹æ€§æ¯”è¾ƒä¸é”™ï¼Œandroidæœºä¹Ÿè¡¨ç°è‰¯å¥½ã€‚<br>å•ä¸€ä½¿ç”¨åšhtml5 css3åŠ¨ç”»ï¼Œå¸¦æ¥äº†å·¨å¤§çš„ç¦éŸ³ã€‚</p>
<h2 id="Adobe-edge-animate-CCç¼ºç‚¹"><a href="#Adobe-edge-animate-CCç¼ºç‚¹" class="headerlink" title="Adobe edge animate CCç¼ºç‚¹"></a>Adobe edge animate CCç¼ºç‚¹</h2><p>1.ä¸å¤ªé€‚åˆï¼Œåšå¤æ‚çš„åŠ¨ç”»ä¸æ¸¸æˆï¼Œé€‚ç”¨åœºæ™¯ç‹­çª„ã€‚<br>2.æ“ä½œæ¯”è¾ƒé€‚åˆè®¾è®¡å¸ˆï¼Œä¸é€‚åˆç¨‹åºå‘˜ï¼Œæ“ä½œæ•ˆç‡ä¸é«˜ï¼Œè°ƒèŠ‚ä¸æ˜¯ç‰¹åˆ«å¯æ§ã€‚<br>3.é‡‡ç”¨html5 css3ç›¸å…³çš„åŠ¨ç”»ï¼Œé¢‘ç¹äº§ç”Ÿé‡æ’å¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚<br>4.åŠ¨ç”»å…ƒç´ å±‚çº§ç»å¯¹å®šä½ï¼ŒåæœŸç»´æŠ¤å¢åŠ å…ƒç´ ï¼Œå±‚çº§è¦†ç›–å½±å“è¾ƒå¤§ã€‚<br>5.æ¯”è¾ƒé€‚åˆpcç«¯åŠ¨ç”»åˆ¶ä½œï¼Œç§»åŠ¨ç«¯éœ€è¦è¿›è¡ŒäºŒæ¬¡è½¬æ¢ï¼Œscaleè¿›è¡Œç¼©æ”¾å·²è¾¾åˆ°å¤šå±é€‚é…çš„é—®é¢˜ã€‚</p>
<h2 id="Adobe-edge-animateä¸‹è½½åœ°å€"><a href="#Adobe-edge-animateä¸‹è½½åœ°å€" class="headerlink" title="Adobe edge animateä¸‹è½½åœ°å€"></a>Adobe edge animateä¸‹è½½åœ°å€</h2><p><a href="http://example.net/" target="_blank" rel="external">mac ç¯å¢ƒä¸‹ä¸‹è½½</a>  &nbsp;&nbsp;   <a href="http://example.net/" target="_blank" rel="external">window ç¯å¢ƒä¸‹ä¸‹è½½</a> </p>
<p>åœ¨å¼€å§‹ç©Edge Animateå‰ï¼Œä½ å¯èƒ½æœ‰ä¸ªé¡¾è™‘ï¼Œå°±æ˜¯Edge Animateå¦‚æœè¦åšäº¤äº’åŠ¨ç”»ï¼Œç”Ÿæˆçš„å†…å®¹æ˜¯å¦ä¼šæ‰“ç ´å·²æœ‰çš„HTMLæ–‡ä»¶ä»£ç ç»“æ„ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šã€‚é€šè¿‡Edge Animateç”Ÿæˆçš„HTMLä»£ç å°‘ä¹‹åˆå°‘ï¼Œå‡ ä¹éƒ½å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç è¡¨è¾¾æ–¹å¼æ¥æ¦‚è¿°ï¼š<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=â€Stageâ€ <span class="built_in">class</span>=â€EDGE-xxxxxxxxxxâ€&gt;&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure></p>
<p>Edge Animateä½¿ç”¨JSONæ¥å­˜å‚¨å…ƒç´ çš„å®šä¹‰å’Œå±æ€§ã€‚ç›¸å…³çš„åŠ¨ç”»å†…å®¹åˆ™ä¼šå…¨éƒ¨ä»¥ä»£ç å—çš„å½¢å¼åµŒå…¥ä¸Šé¢çš„divä¸­ï¼Œä¿®æ”¹å’Œåˆ é™¤éƒ½ä¸ä¼šå½±å“åŸæœ‰çš„HTMLé¡¹ç›®ä»£ç ï¼Œå¯¹HTMLä¸­å…ƒç´ çš„æ“ä½œéƒ½é€šè¿‡JSONå¯¹è±¡å’Œå¼•å…¥çš„JavaScriptæ¥å®Œæˆã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹ï¼ŒedgeåŠ¨ç”»å¯¹htmlå…ƒç´ çš„åŠ¨ç”»æ“ä½œï¼Œä¼šå¯¼è‡´æµè§ˆå™¨é¢‘ç¹é‡æ’ï¼Œé™ä½æ•ˆç‡ã€‚</p>
<p>åˆ›å»ºedge animation å·¥ç¨‹<br>å¯åŠ¨Edge Animateï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ctrlï¼‹N/command+Nã€‚<br><img src="//img.aotu.io/pfan/edge/1.jpg" alt="edge"><br>è®¾å®šStageï¼ˆèˆå°ï¼‰å®½åº¦ä¸º640px, é«˜åº¦ä¸º1136pxã€‚Ctrl+Sä¿å­˜ä¸ºdemo.htmlã€‚æ‰“å¼€æˆ‘ä»¬ä¿å­˜çš„é¡¹ç›®ç›®å½•ï¼Œä¸€ä¸ªæ ‡å‡†çš„Edge Animateé¡¹ç›®æ˜¯ç”±ä¸€ç³»åˆ—html,css,jså’Œç›¸å…³èµ„æºæ–‡ä»¶ç»„æˆçš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="//img.aotu.io/pfan/edge/2.jpg" alt="edge"><br>1)Edge Animateçš„å·¥ç¨‹æ–‡ä»¶: .an æ ¼å¼æ–‡ä»¶æ›´åƒä¸€ä¸ªç©ºå£³æ–‡ä»¶æˆ–è€…ç´¢å¼•æ–‡ä»¶ï¼Œæ ‡æ˜äº†é¡¹ç›®çš„å¿…è¦ä¿¡æ¯ã€‚ä½ å¯ä»¥ä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€.anæ–‡ä»¶äº†è§£å…¶ä¸­å…·ä½“å†…å®¹ã€‚<br>2)edge_includesç›®å½•ï¼šè¯¥ç›®å½•ä¸‹æ˜¯Edgeåˆ¶ä½œçš„html5æ‰€ä¾èµ–çš„JSç±»åº“ï¼šedge.6.0.0.min.js 115kb,è¿˜æ˜¯è›®å¤§çš„ã€‚(ä¹‹å‰çš„ç‰ˆæœ¬æœ‰ä¾èµ–jqueryï¼Œå†5.0ä¹‹åå°±å»æ‰äº†ï¼Œäº§ç”Ÿäº†è‡ªæœ‰åº“ï¼Œå†™æ³•å‚å±•jquery)ã€‚<br>3)å…¶ä»–.jsæ–‡ä»¶ï¼šè¯¸å¦‚demo1_edgeActions.jsï¼Œdemo1_edge.jsç­‰jsæ–‡ä»¶æ˜¯ä¸“é—¨é’ˆå¯¹å½“å‰åŠ¨ç”»æ‰€ç”Ÿæˆjsæ–‡ä»¶ã€‚<br>4).htmlæ–‡ä»¶ï¼šä¸»htmlæ–‡ä»¶ã€‚</p>
<p>Edge Animateçš„å·¥å…·ç•Œé¢é»˜è®¤æƒ…å†µä¸‹åŒ…å«äº†7ä¸ªWindowé¢æ¿ï¼Œå‡å¯ä»¥é€šè¿‡èœå•çš„Windowé€‰é¡¹å¼€å¯å’Œå…³é—­ï¼Œåˆ†åˆ«æ˜¯Toolså·¥å…·ï¼ŒPropertieså±æ€§ï¼ŒStageåœºæ™¯ï¼ŒElementså…ƒç´ ï¼ŒLibraryåº“ï¼ŒTimelineæ—¶é—´è½´ï¼Œä»£ç ç®¡ç†å’Œlessonsè¯¾ç¨‹ã€‚æ¥ä¸‹æ¥ï¼Œç®€å•çš„è®©å¤§å®¶äº†è§£ä¸€ä¸‹ï¼Œedge animationçš„å±æ€§é¢åŒ…ï¼Œå…ƒç´ é¢æ¿ï¼Œæ—¶é—´è½´runtimeï¼Œä»£ç ç®¡ç†å™¨ï¼Œè¿™äº›æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°çš„ã€‚</p>
<p>edge animation å±æ€§é¢æ¿<br>Adobe Edge Animateçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½è·å¾—èˆå°ä¸­å…ƒç´ çš„æ ‡ç­¾ï¼ˆå³IDï¼‰å’Œè¿™ä¸ªå…ƒç´ æ ·å¼å±æ€§ï¼ˆCSSï¼‰çš„å˜åŒ–ï¼Œå¹¶å°†è¿™äº›å˜åŒ–åœ¨æ—¶é—´çº¿ä¸Šä»¥å…³é”®å¸§çš„å½¢å¼â€œæ ‡è®°â€ã€‚è¿™æ ·å¿…ç„¶å¯¼è‡´å…³é”®å¸§ä¹‹é—´å±æ€§å€¼çš„å˜åŒ–ï¼Œè¿™ä¸ªä¸­é—´é˜¶æ®µä¼šè¢«è½¬åŒ–ä¸ºä¸€ä¸ªè¿‡æ¸¡é˜¶æ®µï¼Œæˆ–è€…è¯´ä¸€æ®µåŠ¨ç”»ï¼ˆå¦‚å›¾ç‰‡é€æ˜åº¦Opacityçš„å˜åŒ–ï¼Œæ·¡å…¥æ·¡å‡ºã€ä¸€ä¸ªå…ƒä»¶çš„ç§»åŠ¨Locationå’Œç¼©æ”¾Scaleç­‰ç­‰ï¼‰ã€‚<br><img src="//img.aotu.io/pfan/edge/3.jpg" alt="edge"></p>
<p>edge animation å…ƒç´ é¢æ¿<br>Adobe Edge Animateå…ƒç´ é¢æ¿æ˜¾ç¤ºçš„æ˜¯èŠ‚ç‚¹å¼çš„æ ‘å½¢ç»“æ„ï¼Œè¡¨ç¤ºå…ƒç´ ä¸çˆ¶å…ƒä»¶Stageçš„è”ç³»ã€‚è¿™ç‚¹ä¸psï¼Œflashéƒ½æ¯”è¾ƒç±»ä¼¼ã€‚<br>æ”¾ç½®ï¼ˆæˆ–å †å ï¼‰åœ¨ä¸Šæ–¹çš„å…ƒç´ å…·æœ‰æ›´é«˜çš„Z-indexå€¼ï¼Œä¼šæ˜¾ç¤ºåœ¨å…¶ä»–å…ƒç´ ï¼ˆå †å åœ¨ä¸‹æ–¹çš„å…ƒç´ ï¼‰ä¸Šæ–¹ã€‚<br><img src="//img.aotu.io/pfan/edge/4.jpg" alt="edge"></p>
<p>edge animation æ—¶é—´è½´runtime<br>Adobe Edge Animateçš„æ—¶é—´çº¿èåˆäº†å…ƒç´ çš„èŠ‚ç‚¹å¼æ ‘çŠ¶ç»“æ„å’Œä¸å…ƒç´ å±æ€§å…³è”çš„å…³é”®å¸§ï¼Œè¿™äº›ä¿¡æ¯æ˜¾ç¤ºåœ¨æ—¶é—´çº¿å·¦ä¾§ï¼Œè€Œå³ä¾§åˆ™æ˜¾ç¤ºæ—¶é—´ä¿¡æ¯è¡¨ã€‚å…ƒç´ å±æ€§å€¼ï¼ˆå…³é”®å¸§ï¼‰è¢«æ ‡è®°åœ¨æ—¶é—´çº¿ç¡®åˆ‡çš„æ—¶é—´ç‚¹ï¼Œå½“å±æ€§å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿‡æ¸¡é˜¶æ®µä¼šäº§ç”ŸåŠ¨ç”»ã€‚<br>1.åŠ¨ç”»æ ‡ç­¾ï¼ˆLabelï¼‰å’Œè§¦å‘å™¨ï¼ˆTriggerï¼‰ï¼šè‡ªå®šä¹‰çš„æ—¶é—´çº¿åŠ¨ç”»æ ‡ç­¾å’Œè§¦å‘å™¨ä¹Ÿå¯ä»¥æ§åˆ¶èˆå°ä¸­å…ƒç´ åŠ¨ç”»çš„çŠ¶æ€å’Œå¤„ç†æ–¹æ³•ï¼›ä½¿ç”¨Ctrl/Command + Lå¯ä»¥åœ¨æ’­æ”¾å¤´æ‰€åœ¨æ—¶é—´ç‚¹ç”Ÿæˆä¸€ä¸ªåŠ¨ç”»æ ‡ç­¾ï¼Œä½¿ç”¨Ctrl/Command + Tå¯ä»¥åœ¨æ’­æ”¾å¤´æ‰€åœ¨æ—¶é—´ç‚¹æ”¾ç½®ä¸€ä¸ªè§¦å‘å™¨ã€‚<br>2.ä»…æ˜¾ç¤ºå…·æœ‰åŠ¨ç”»çš„å…ƒç´ ï¼ˆFilter Animated Elementsï¼‰<br>3.å¯ç”¨æ—¶é—´çº¿å¸é™„åŠŸèƒ½ï¼ˆEnable Timeline Snappingï¼‰ï¼šæ‹–åŠ¨æ’­æ”¾å¤´ï¼Œæ’­æ”¾å¤´å°†ä¼šè‡ªåŠ¨å¸é™„åˆ°æ—¶é—´ç‚¹ã€åŠ¨ç”»æˆ–å…³é”®å¸§ç­‰<br>4.å¯ç”¨æ—¶é—´çº¿ç½‘æ ¼ï¼ˆEnable Timeline Gridï¼‰ï¼šæ—¶é—´ä¿¡æ¯è¡¨ä¸Šå°†ä¼šæ˜¾ç¤ºæ—¶é—´ç½‘æ ¼ï¼Œæ–¹ä¾¿è®¾è®¡è€…åœ¨ç¡®åˆ‡æ—¶é—´ç‚¹è®¾å®šå…³é”®å¸§ç­‰ï¼Œç½‘æ ¼çš„å¤§å°å¯ç”¨æˆ·è‡ªå®šä¹‰ã€‚<br>5.è‡ªåŠ¨è®°å½•å…³é”®å¸§æ¨¡å¼ï¼ˆAuto Keyframe Modeï¼ˆKï¼‰ï¼‰ï¼šå¼€å¯æ¨¡å¼ä¸‹ï¼Œè®¾è®¡è€…å¯¹å…ƒç´ æ‰€åšçš„å±æ€§å€¼ä¿®æ”¹éƒ½ä¼šä»¥å…³é”®å¸§çš„å½¢å¼è®°å½•åœ¨æ—¶é—´çº¿ä¸Šã€‚<br>6.è‡ªåŠ¨ç”ŸæˆåŠ¨ç”»æ¨¡å¼ï¼ˆAuto Transition Modeï¼ˆXï¼‰ï¼‰ï¼šå¼€å¯æ¨¡å¼ä¸‹ï¼Œåœ¨ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´ä¼šè‡ªåŠ¨ç”ŸæˆåŠ¨ç”»ï¼Œé»˜è®¤å¼€å¯ã€‚<br>7.æ’­æ”¾æ ‡è®°ï¼ˆToggle Pinï¼ˆPï¼‰ï¼‰ï¼šå¯ä»¥è®¾ç½®æ’­æ”¾çš„èµ·å§‹å’Œç»ˆæ­¢ä½ç½®ã€‚<br><img src="//img.aotu.io/pfan/edge/5.jpg" alt="edge"></p>
<p>edge animation ä»£ç ç®¡ç†<br>ä»£ç ç®¡ç†å™¨ä½¿ç”¨ä¸€ä¸ªå•ç‹¬å®Œæ•´çš„çª—å£ç•Œé¢æ¥å±•ç¤ºæ‰€æœ‰äº‹ä»¶æ§åˆ¶ä»£ç å’Œæ—¶é—´çº¿è§¦å‘å™¨ã€‚ï¼ˆå¿«æ·é”®Ctrl/Command + Eæˆ–è€…é€šè¿‡èœå•Window-Codeæ‰“å¼€ï¼‰æ‰€è¢«ç¼–è¾‘çš„æ§åˆ¶ä»£ç æˆ–è§¦å‘å™¨ä¼šè¢«é«˜äº®æ˜¾ç¤ºã€‚<br>1.ç‚¹å‡»â€œ+â€å›¾æ ‡æ·»åŠ å…¨å±€ã€å±€éƒ¨ã€æ—¶é—´çº¿æ§åˆ¶ä»£ç æˆ–è€…è§¦å‘å™¨ï¼›<br>2.ç‚¹å‡»â€œFull Codeâ€æŒ‰é’®å¯ä»¥æ˜¾ç¤ºå¹¶ç¼–è¾‘å•ä¸ªæ–‡ä»¶çš„å…¨éƒ¨ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªåŠŸèƒ½å‡½æ•°å†…éƒ¨ä»£ç ï¼›<br>3.å¯ä»¥é€šè¿‡ä¸‹æ–¹çš„ä»£ç é”™è¯¯æç¤ºçª—è¿›è¡Œé”™è¯¯å¿«é€Ÿæ’é™¤æ£€æµ‹ã€‚<br><img src="//img.aotu.io/pfan/edge/6.jpg" alt="edge"></p>
<h2 id="å®ä¾‹æ“ä½œ"><a href="#å®ä¾‹æ“ä½œ" class="headerlink" title="å®ä¾‹æ“ä½œ"></a>å®ä¾‹æ“ä½œ</h2><p>å½“æˆ‘ä»¬äº†è§£ä»¥ä¸Šè¿™äº›çŸ¥è¯†ç‚¹ï¼Œä¹‹åï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸‹ç®€å•çš„å®ä¾‹ï¼Œå®ç°é¡¶éƒ¨å›¾ç‰‡æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ç•Œé¢ï¼Œäººç‰©è·‘åŠ¨ï¼ŒèƒŒæ™¯å‘å‰ç§»åŠ¨ã€‚<br><img src="//img.aotu.io/pfan/edge/7.jpg" alt="edge"></p>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†-ä½¿ç”¨SpriteSheetåœ¨Edge-Animateä¸­åˆ¶ä½œäººç‰©è·‘åŠ¨çš„åŠ¨ç”»"><a href="#ç¬¬ä¸€éƒ¨åˆ†-ä½¿ç”¨SpriteSheetåœ¨Edge-Animateä¸­åˆ¶ä½œäººç‰©è·‘åŠ¨çš„åŠ¨ç”»" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† ä½¿ç”¨SpriteSheetåœ¨Edge Animateä¸­åˆ¶ä½œäººç‰©è·‘åŠ¨çš„åŠ¨ç”»"></a>ç¬¬ä¸€éƒ¨åˆ† ä½¿ç”¨SpriteSheetåœ¨Edge Animateä¸­åˆ¶ä½œäººç‰©è·‘åŠ¨çš„åŠ¨ç”»</h2><p>1.å¯åŠ¨Edge Animateï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®blackfridayï¼Œè®¾ç½®stageå¤§å°ä¸º640*1136ï¼›</p>
<p>2.å¯¼å…¥blackfriday SpriteSheetã€€<br>ç‚¹å‡»èœå•â€œFile-&gt;Importâ€,æˆ–è€…å¿«æ·é”®Ctrl+I / Command+Iï¼Œæ¥å¯¼å…¥blackfriday_sprite.pngåˆ°èˆå°ã€‚åœ¨èˆå°ä¸Šé€‰ä¸­å¯¼å…¥çš„å›¾ç‰‡ï¼Œåœ¨å·¦è¾¹æ Position and Sizeæ ç›®ä¸‹ï¼Œè®¾å®šå…¶Xåæ ‡å€¼=160px,yåæ ‡å€¼ä¸º330pxï¼Œä¿è¯ç¬¬ä¸€ä¸ªsmurfçš„ä½ç½®åœ¨èˆå°æœ€å·¦ä¾§å¹¶å‚ç›´å±…ä¸­ã€‚</p>
<p>3.ä½¿ç”¨Clipåˆ‡å‰²Spritesheetï¼Œæ˜¾ç¤ºå•ä¸€Spriteå…ƒç´ <br>æˆ‘ä»¬å¯¼å…¥çš„è“ç²¾çµSpritesheetæ˜¯320*480å¤§å°çš„é€æ˜èƒŒæ™¯pngå›¾ç‰‡ï¼Œä¸€å…±æç»˜äº†32ä¸ªè“ç²¾çµè¡Œèµ°çš„å§¿æ€ã€‚é€šè¿‡åºåˆ—æ’­æ”¾è¿™32ä¸ªè¡Œèµ°å§¿æ€ï¼Œå°±å¯ä»¥åˆ¶ä½œä¸€ä¸ªå®Œæ•´è“ç²¾çµè¡Œèµ°åŠ¨ç”»ã€‚<br>é¦–å…ˆï¼Œè¦åœ¨èˆå°ä¸Šåªæ˜¾ç¤ºä¸€ä¸ªSpriteå…ƒç´ ï¼Œæ¯”å¦‚æœ€å·¦ä¸Šè§’çš„ç¬¬ä¸€ä¸ªè“ç²¾çµã€‚åœ¨Edge Animateå·¦ä¾§å±æ€§é¢æ¿ä¸­ï¼Œå€’æ•°ç¬¬äºŒä¸ªæ ç›®æ˜¯clipå­é¢æ¿ã€‚é¡¾åæ€ä¹‰ï¼ŒclipåŠŸèƒ½åŒºå¯ä»¥å¸®åŠ©æˆ‘ä»¬â€œåˆ‡å‰²â€èˆå°ä¸Šçš„å…ƒç´ ï¼Œæ¯”å¦‚å›¾ç‰‡ã€‚è¯¥åŠŸèƒ½åŒºå®é™…ä¸Šåˆ©ç”¨äº†CSSçš„clipå±æ€§ã€‚<br>ç‚¹å‡»clipå­é¢æ¿çš„å¼€å…³æŒ‰é’®ï¼Œå¯ä»¥æ¿€æ´»clipåŠŸèƒ½ã€‚ä½¿ç”¨é¼ æ ‡ï¼Œå¯ä»¥åœ¨clipå±æ€§è®¾å®šé¢æ¿ä¸Šçš„ä¸Šã€ä¸‹ã€å·¦ã€å³å±æ€§å€¼ä¸Šæ»‘åŠ¨ï¼Œä½ å¯ä»¥åœ¨èˆå°ä¸Šå®æ—¶çœ‹åˆ°â€œåˆ‡å‰²â€çš„å›¾ç‰‡æƒ…å†µã€‚å¦‚ä¸‹å›¾ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œè¯·è®¾å®šclipçš„topï¼Œrightï¼Œbottomï¼Œleftå±æ€§å€¼åˆ†åˆ«ä¸º0, 320,480,0ã€‚<br><img src="//img.aotu.io/pfan/edge/8.jpg" alt="edge"></p>
<ol>
<li>åˆ›å»º32ä¸ªKeyframeï¼Œå®ç°è¡Œèµ°åŠ¨ä½œ<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»º32ä¸ªå¸§æ¥å®Œæˆè“ç²¾çµè¡Œèµ°çš„åŠ¨ä½œã€‚<br>1) è°ƒæ•´å¸§é—´éš”<br>åœ¨èˆå°ä¸‹æ–¹çš„æ—¶é—´è½´ä¸Šï¼ŒEdge Animateç”¨ç«–çº¿ç½‘æ ¼æ ‡è®°äº†æ¯å¸§é—´è·ã€‚åœ¨Smurfè¡Œèµ°åŠ¨ç”»ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨1æ¯«ç§’çš„æ—¶é—´å·¦å³å®Œæˆä¸€ä¸ªè¡Œèµ°åŠ¨ä½œï¼Œå³32å¸§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ—¶é—´è½´ä¸‹æ–¹çš„Gird Sizeå›¾æ ‡è°ƒæ•´æ—¶é—´è½´ä¸º30å¸§/ç§’ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="//img.aotu.io/pfan/edge/9.png" alt="edge"><br>2) æ¿€æ´»â€œAuto-Keyframe Mode (è‡ªåŠ¨åˆ›å»ºå¸§)â€<br>Edge Animateæœ‰ä¸‰ä¸ªéå¸¸é‡è¦çš„æŒ‰é’®åˆ†åˆ«å¼€å¯Auto-Keyframe Modeï¼ˆè‡ªåŠ¨åˆ›å»ºå…³é”®å¸§ï¼‰ã€Auto-Transition Modeå’ŒToggle Pinï¼ˆå¤§å¤´é’ˆï¼‰ã€‚å›¾æ ‡å¦‚ä¸‹å›¾ï¼š<br><img src="//img.aotu.io/pfan/edge/10.png" alt="edge"><br>Edge Animate Buttons<br>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å¯ç”¨Auto-Keyframe Modeï¼Œè€Œå…³é—­Auto-Transition Modeå’ŒPinã€‚åœ¨å¯ç”¨Auto-Keyframe Modeçš„æƒ…å†µä¸‹ï¼Œæ¯å½“æˆ‘ä»¬åœ¨æ–°çš„ä¸€å¸§ä¿®æ”¹èˆå°ä¸­å…ƒç´ çš„å±æ€§ï¼ŒEdge Animateä¼šè‡ªåŠ¨åœ¨æ­¤åˆ›å»ºå…³é”®å¸§ã€‚ç”±äºæˆ‘ä»¬å…³é—­äº†Auto-Transition Modeï¼Œå› æ­¤Edge Animateå°†ä¸ä¼šè‡ªåŠ¨åœ¨å…³é”®å¸§ä¹‹é—´åˆ›å»ºè¿‡æ¸¡æ•ˆæœã€‚<br>3) åˆ›å»ºç¬¬ä¸€ä¸ªå…³é”®å¸§<br>åœ¨æ—¶é—´è½´ä¸Šï¼ŒæŠŠæ’­æ”¾å¤´ç§»åˆ°0:00ç§’ä½ç½®ï¼Œé€‰ä¸­èˆå°ä¸­çš„è“ç²¾çµï¼Œåœ¨å·¦è¾¹å±æ€§é¢æ¿ä¸­çš„Imageå­é¢æ¿ä¸‹ï¼Œç¡®è®¤Background Imageçš„xå’Œyå±æ€§å€¼ä¸º0ï¼Œç„¶åç‚¹å‡»xå’Œyå±æ€§è¾¹ä¸Šçš„å°è±å½¢ç¬¦å·ï¼ˆå½“é¼ æ ‡ç§»åˆ°è¯¥è±å½¢ç¬¦å·æ—¶ï¼Œå…¶å˜ä¸ºé»„è‰²ï¼Œå¹¶æ˜¾ç¤ºtipsï¼šâ€œAdd Keyframe for Background Positionâ€ï¼‰ï¼Œæ­¤æ—¶Edge Animateå°†åœ¨æ—¶é—´è½´çš„0:00ç§’å‡ºåˆ›å»ºç¬¬ä¸€ä¸ªå…³é”®å¸§ã€‚å¦‚ä¸‹å›¾<br><img src="//img.aotu.io/pfan/edge/11.jpg" alt="edge"><br>ä¾æ­¤æ–¹æ³•ï¼Œåœ¨gardçº¿ä¸Šæ¥ç€åš31ä¸ªå¸§ã€‚</li>
</ol>
<p>5ã€‚åˆ›å»ºå®Œæˆåï¼Œé¢„è§ˆï¼š<br>ä½¿ç”¨å¿«æ·é”®Ctrl+Enter/Command+Enterï¼Œå¯ä»¥å¯åŠ¨é»˜è®¤æµè§ˆå™¨çœ‹èµ·è¿è¡Œçš„æ•ˆæœ.<br>ç°åœ¨ï¼Œäººç‰©å·²ç»å®ç°äº†è¡Œèµ°åŠ¨ä½œï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®Œæˆè¡Œè¿›ï¼Œè¿˜ä¸å¾ªç¯æ’­æ”¾ï¼Œè¿è¡Œå®Œ32ä¸ªå¸§å°±åœæ­¢äº†ã€‚</p>
<p>6.è½¬æ¢ä¸ºå…ƒä»¶åœ¨æœ€åä¸€å¸§ï¼Œè®¾ç½®triggerè§¦å‘å™¨ï¼Œè¾¾åˆ°å¸§å¾ªç¯åŠ¨ç”»<br>åœ¨èˆå°ä¸Šé€‰ä¸­è¯¥å›¾ç‰‡åï¼Œå¿«æ·é”®Cmd+Y/Ctrl+Yå°†å…¶è½¬æ¢æˆä¸€ä¸ªå…ƒä»¶(Symbol)ï¼Œå«usï¼Œç„¶ååˆ é™¤stageèˆå°ä¸Šé¢çš„å…ƒç´ ï¼Œä»libraryé¢æ¿é‡Œé¢æ‹–åŠ¨stageèˆå°ä¸Šé¢ ã€‚åŒå‡»å…ƒä»¶ï¼Œè¿›å…¥å…ƒä»¶èˆå°åŒºåŸŸï¼Œå¦‚å›¾ï¼Œinsert triggerï¼š<br><img src="//img.aotu.io/pfan/edge/12.jpg" alt="edge"><br><img src="//img.aotu.io/pfan/edge/13.png" alt="edge"></p>
<h2 id="ç¬¬äºŒéƒ¨åˆ†-å®ç°èƒŒæ™¯çš„æ»šåŠ¨"><a href="#ç¬¬äºŒéƒ¨åˆ†-å®ç°èƒŒæ™¯çš„æ»šåŠ¨" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† å®ç°èƒŒæ™¯çš„æ»šåŠ¨"></a>ç¬¬äºŒéƒ¨åˆ† å®ç°èƒŒæ™¯çš„æ»šåŠ¨</h2><p>1.å€’å…¥èƒŒæ™¯å›¾ç‰‡ï¼Œç”Ÿæˆå…ƒä»¶<br>å¿«æ·é”®Cmd+I/Ctrl+Iå¯¼å…¥èƒŒæ™¯å›¾ç‰‡american.pngï¼Œåœ¨èˆå°ä¸Šé€‰ä¸­è¯¥å›¾ç‰‡åï¼Œå¿«æ·é”®Cmd+Y/Ctrl+Yå°†å…¶è½¬æ¢æˆä¸€ä¸ªå…ƒä»¶(Symbol)ï¼Œå‘½åä¸ºamericanbg2ã€‚<br>2.æ¿€æ´»Auto-Keyframe Modeï¼ŒAuto-transition Modeï¼Œå¹³ç§»èƒŒæ™¯å›¾ç‰‡å½¢æˆå•å¾ªç¯çš„è¿‡æ¸¡åŠ¨ç”»ã€‚<br>ä½†æ˜¯å½“èƒŒæ™¯å‘å·¦ç§»å‡ºèˆå°çš„æ—¶å€™ï¼Œä¼šçœ‹åˆ°èˆå°ç©ºå‡ºäº†éƒ¨åˆ†<br>3.å®ç°èƒŒæ™¯å›¾å¾ªç¯æ»šåŠ¨çš„æ•ˆæœ<br>å†æ¬¡å‘èˆå°å¯¼å…¥å…ƒä»¶ï¼Œå‘½åä¸ºamericanbg4.æ‹·è´americanbg2çš„è¿åŠ¨åŠ¨ç”»ï¼Œåˆ°americanbg2å·¦ç§»èˆå°å‡ºç°ç©ºç™½çš„ä¸´ç•Œç‚¹å¸§æ—¶é—´ï¼Œç»™americanbg4ç²˜è´´åŠ¨ç”»æ•ˆæœã€‚å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦americanbg4æ•´ä½“æ•ˆæœï¼Œæ‰€ä»¥éœ€è¦åˆ é™¤americanbg4è¿åŠ¨å¸§è¶…å‡ºamericanbg2è¿åŠ¨å¸§çš„ç»“æŸç‚¹ã€‚<br><img src="//img.aotu.io/pfan/edge/14.jpg" alt="edge"><br>4.æœ€åä¸€å¸§ï¼Œè®¾ç½®triggerè§¦å‘å™¨ï¼Œå½¢æˆå¾ªç¯åŠ¨æ•ˆ</p>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†-å¢åŠ éŸ³ä¹ï¼Œé—ªçƒæ˜Ÿç©º"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-å¢åŠ éŸ³ä¹ï¼Œé—ªçƒæ˜Ÿç©º" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† å¢åŠ éŸ³ä¹ï¼Œé—ªçƒæ˜Ÿç©º"></a>ç¬¬ä¸‰éƒ¨åˆ† å¢åŠ éŸ³ä¹ï¼Œé—ªçƒæ˜Ÿç©º</h2><p>è¿™ä¸€éƒ¨åˆ†ï¼ŒåŸºæœ¬å‚ç…§ç¬¬ä¸€äºŒéƒ¨åˆ†çš„æˆ‘ä»¬å°±å¯ä»¥å®Œæˆæ•´ä¸ªåŠ¨ç”»ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„è®¾ç½®playbackï¼Œåšåˆå§‹å»¶è¿Ÿã€‚</p>
<h2 id="ç¬¬å››éƒ¨åˆ†-å¤„ç†ç§»åŠ¨ç«¯çš„é€‚é…ï¼Œå¢åŠ loading"><a href="#ç¬¬å››éƒ¨åˆ†-å¤„ç†ç§»åŠ¨ç«¯çš„é€‚é…ï¼Œå¢åŠ loading" class="headerlink" title="ç¬¬å››éƒ¨åˆ† å¤„ç†ç§»åŠ¨ç«¯çš„é€‚é…ï¼Œå¢åŠ loading"></a>ç¬¬å››éƒ¨åˆ† å¤„ç†ç§»åŠ¨ç«¯çš„é€‚é…ï¼Œå¢åŠ loading</h2><p>ç”±äºè¿™é‡Œå‡ºæ¥çš„åŠ¨ç”»æ˜¯640x1136pxå‡ºæ¥çš„æ•ˆæœï¼Œå®ç°å¤šç»ˆç«¯é¢„è§ˆæ—¶ï¼Œéœ€è¦åšé€‚é…å¤„ç†ï¼Œè¿™é‡Œæˆ‘æ˜¯é‡‡ç”¨scaleè¿›è¡Œç¼©æ”¾ï¼Œå·²åˆ°è¾¾ç»Ÿä¸€çš„æ•ˆæœã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> c=<span class="built_in">document</span>.documentElement,d=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> b=c.getBoundingClientRect().width;s=(<span class="number">640</span>&lt;=b?<span class="number">640</span>:b)/<span class="number">640</span>,<span class="built_in">document</span>.write(<span class="string">'&lt;style id="scaleCon"&gt;.o2-scale&#123;-webkit-transform: scale('</span>+s+<span class="string">"); transform: scale("</span>+s+<span class="string">");-webkit-transform-origin:0% 0%;transform-origin:0% 0%;&#125;&lt;/style&gt;"</span>);<span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> e=c.getBoundingClientRect().width;s=(<span class="number">640</span>&lt;=e?<span class="number">640</span>:e)/<span class="number">640</span>;<span class="built_in">document</span>.getElementById(<span class="string">"scaleCon"</span>).innerHTML=<span class="string">".o2-scale&#123;-webkit-transform: scale("</span>+s+<span class="string">"); transform: scale("</span>+s+<span class="string">");-webkit-transform-origin:0% 0%;transform-origin:0% 0%;&#125;"</span>&#125;)&#125;;d()&#125;)();</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬åªéœ€è¦æŠŠclassç±»o2-scaleï¼Œæ·»åŠ ç»™èˆå°å°±å¯ä»¥ï¼Œå®Œæˆé€‚é…ã€‚</p>
<p><a href="http://pingfan1990.sinaapp.com/jdcase/blackfriday/" target="_blank" rel="external">demoæ¼”ç¤ºæ•ˆæœ</a><br>æ‰‹æœºæ‰«æï¼š<br><img src="//img.aotu.io/pfan/edge/15.jpg" alt="edge"><br>iosï¼Œandroidäº²æµ‹ï¼Œæ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæµç•…çš„ã€‚</p>
<h4 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h4><p><a href="http://www.adobe.com/devnet-docs/edgeanimate/api/current/index.html#audio" target="_blank" rel="external">Adobe Edge Animate CC 2014 JavaScript API 5.0</a><br><a href="https://helpx.adobe.com/edge-animate/how-to/edge-animate-symbols.html" target="_blank" rel="external">Adobe Edge Animate è§†é¢‘æ•™ç¨‹</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Edge Animateæ˜¯Adobeå‡ºå“çš„åˆ¶ä½œHTML5åŠ¨ç”»çš„å¯è§†åŒ–å·¥å…·ï¼Œç®€å•çš„å¯ä»¥ç†è§£ä¸ºHTML5ç‰ˆæœ¬çš„Flash Proã€‚Adobe Edge Animateçš„ç›®çš„æ˜¯å¸®åŠ©ä¸“ä¸šè®¾è®¡å¸ˆåˆ¶ä½œç½‘é¡µåŠ¨ç”»ä¹ƒè‡³ç®€å•æ¸¸æˆã€‚ç›®å‰è¯¥å·¥å…·çš„é‡ç‚¹æ”¾åœ¨åŠ¨ç”»å¼•æ“ä¸Šï¼Œå°†å¢åŠ æ›´å¤šHTML5åŠŸèƒ½ï¼Œæ¯”å¦‚Canvasã€HTML5éŸ³é¢‘/è§†é¢‘æ ‡ç­¾ç­‰ã€‚æ”¯æŒAndroidã€iOSã€webOSã€é»‘è“PlayBookã€Firefoxã€Chromeã€Safariå’ŒIE9ç­‰å„ä¸ªå¹³å°ã€‚&lt;/p&gt;
&lt;p&gt;Edge Animateä¸»è¦ä½¿ç”¨HTML5,CSS3å’ŒJavaScriptã€‚HTML5æ˜¯å…¶ç”¨äºåˆ›å»ºçš„doctypeï¼Œ2Dçš„transformï¼Œtranslateï¼Œrotateï¼Œscaleï¼Œskewç­‰ç‰¹æ•ˆéƒ½æ˜¯æ¸²æŸ“ä¸ºCSS3ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå¯ä»¥æ“ä½œçº¯ç²¹çš„CSS3ï¼Œå¦‚æœæ˜¯ä¸»æµå¤§ä¼—æµè§ˆå™¨ï¼ŒEdge Animateåˆ™ä¼šé€šè¿‡JavaScriptåº“çš„é…åˆæ¥ä¿è¯HTMLå’ŒCSSçš„æ˜¾ç¤ºå…¼å®¹æ€§ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="edge animate" scheme="https://aotu.io/tags/edge-animate/"/>
    
      <category term="html5" scheme="https://aotu.io/tags/html5/"/>
    
      <category term="animate" scheme="https://aotu.io/tags/animate/"/>
    
  </entry>
  
  <entry>
    <title>ç²¾è‡´åŒ–é¡µé¢é‡æ„</title>
    <link href="https://aotu.io/notes/2015/11/24/project-summary/"/>
    <id>https://aotu.io/notes/2015/11/24/project-summary/</id>
    <published>2015-11-24T12:23:44.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>
<h2 id="ä¸€-å¸ƒå±€æ–¹å¼"><a href="#ä¸€-å¸ƒå±€æ–¹å¼" class="headerlink" title="ä¸€ å¸ƒå±€æ–¹å¼"></a>ä¸€ å¸ƒå±€æ–¹å¼</h2><p>ä½œä¸ºä¸€ä¸ªæ³¨é‡ç”¨æˆ·ä½“éªŒçš„ H5 é¡µé¢ï¼Œåˆé€‚çš„é¡µé¢å¸ƒå±€æ–¹å¼å¾ˆé‡è¦ã€‚<br>ç§»åŠ¨ç«¯é¡µé¢å¸¸è§„å¸ƒå±€åŸºæœ¬åˆ†ä¸¤ç§ï¼š</p>
<h3 id="1-æµå¼å¸ƒå±€ï¼ˆå“åº”å¼å®½åº¦è‡ªé€‚åº”å¸ƒå±€ï¼‰"><a href="#1-æµå¼å¸ƒå±€ï¼ˆå“åº”å¼å®½åº¦è‡ªé€‚åº”å¸ƒå±€ï¼‰" class="headerlink" title="1. æµå¼å¸ƒå±€ï¼ˆå“åº”å¼å®½åº¦è‡ªé€‚åº”å¸ƒå±€ï¼‰"></a>1. æµå¼å¸ƒå±€ï¼ˆå“åº”å¼å®½åº¦è‡ªé€‚åº”å¸ƒå±€ï¼‰</h3><p>è¿™æ˜¯æ™®éä½¿ç”¨çš„æ–¹æ³•ï¼Œæµå¼å¸ƒå±€ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾å³å¯è‡ªé€‚åº”æ‰€æœ‰å°ºå¯¸çš„å±å¹•ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šå“åº”å¼ã€ç®€å•ã€å…¼å®¹å¥½ã€‚<br>ç¼ºç‚¹ï¼šéè®¾è®¡ç¨¿å°ºå¯¸å±å¹•å±•ç°æ•ˆæœå¯èƒ½ä¸æ˜¯å¾ˆç†æƒ³ã€‚</p>
<h3 id="2-ç‰ˆå¼å¸ƒå±€ï¼ˆé¡µé¢ç­‰æ¯”ç¼©æ”¾å¸ƒå±€ï¼‰"><a href="#2-ç‰ˆå¼å¸ƒå±€ï¼ˆé¡µé¢ç­‰æ¯”ç¼©æ”¾å¸ƒå±€ï¼‰" class="headerlink" title="2. ç‰ˆå¼å¸ƒå±€ï¼ˆé¡µé¢ç­‰æ¯”ç¼©æ”¾å¸ƒå±€ï¼‰"></a>2. ç‰ˆå¼å¸ƒå±€ï¼ˆé¡µé¢ç­‰æ¯”ç¼©æ”¾å¸ƒå±€ï¼‰</h3><p><strong>å¯è¡Œæ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>é¡µé¢ä½¿ç”¨ REM ä½œä¸ºé¡µé¢æ•°å€¼å•ä½è¿ç®—ã€‚</li>
<li>é€šè¿‡ zoom/scale æ•´ä½“ç¼©æ”¾é¡µé¢ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼šé¡µé¢ç­‰æ¯”ç¼©æ”¾ï¼Œæ¯”ä¾‹ä¸è®¾è®¡ç¨¿ä¸€è‡´ã€‚<br>ç¼ºç‚¹ï¼šå¤§å±æ‰‹æœºç­‰æ¯”æ”¾å¤§åçš„ä½“éªŒå¯èƒ½ä¸ä½³ã€‚</p>
<h3 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h3><p>ä¸¤ç§å¸ƒå±€æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œé¡¹ç›®æœ€ç»ˆé€‰ç”¨æµå¼å¸ƒå±€ï¼ŒåŸå› ï¼š</p>
<ol>
<li>éƒ¨åˆ†é¡µé¢è¿˜æ˜¯ä¸ç°æœ‰é¡¹ç›®æ¨¡å—å…±ç”¨ï¼Œç‰ˆå¼å¸ƒå±€æ”¹åŠ¨æˆæœ¬åé«˜ï¼Œä¸å¥½ç»´æŠ¤ã€‚</li>
<li>è€ƒè™‘åˆ°é¡µé¢åœ¨å¤§å±æ‰‹æœºç­‰æ¯”æ”¾å¤§åçš„ä½“éªŒå¯èƒ½ä¸ä½³ã€‚</li>
<li>æµå¼å¸ƒå±€å¯ä»¥é’ˆå¯¹å¤§å±æ‰‹æœºåšä¸€äº›æ›´çµæ´»çš„æ’ç‰ˆï¼ˆé…åˆåª’ä½“æŸ¥è¯¢ï¼‰ï¼Œè¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</li>
</ol>
<h2 id="äºŒ-è®¾è®¡è§„èŒƒ"><a href="#äºŒ-è®¾è®¡è§„èŒƒ" class="headerlink" title="äºŒ è®¾è®¡è§„èŒƒ"></a>äºŒ è®¾è®¡è§„èŒƒ</h2><p>è®¾è®¡è§„èŒƒä¹Ÿæ˜¯é‡è¦å…ƒç´ ä¹‹ä¸€ï¼Œæ¡ä»¶å…è®¸æƒ…å†µä¸‹ï¼Œä»å¼€å‘å‰æœŸå°±éœ€è¦è·Ÿè®¾è®¡å¸ˆè¾¾æˆå…±è¯†åˆ¶å®šäº†ä¸€å¥—è®¾è®¡è§„èŒƒã€‚</p>
<p><strong>è®¾è®¡è§„èŒƒéœ€è¦åŒ…æ‹¬ï¼š</strong><br>é¡µé¢èƒŒæ™¯è‰²ã€æ–‡å­—é¢œè‰²ã€è¾¹æ¡†é¢œè‰²ã€å„ç§æŒ‰é’®æ ·å¼ã€å›¾æ ‡ç­‰ç­‰å…¨å±€é€šç”¨æ ·å¼ã€‚</p>
<p><img src="//img.aotu.io/liqinuo/1.png" alt="è®¾è®¡è§„èŒƒ"></p>
<p>å½“ç„¶é™¤äº†å‰æœŸåˆ°è®¾è®¡è§„èŒƒï¼Œå¼€å‘è¿‡ç¨‹ä¸­è¿™è¾¹ä¹Ÿéœ€è¦åˆ†ç¦»å‡ºä¸€äº›å¯å¤ç”¨çš„ç»„ä»¶ã€å…¬å…±æ ·å¼ï¼ŒåŒ…æ‹¬ï¼š<br>å…¬å…±åº•éƒ¨ã€å•†å“ç»„æ¨¡å—ã€è½®æ’­ç»„ä»¶ç­‰ç­‰ã€‚</p>
<h2 id="ä¸‰-æŠ€å·§"><a href="#ä¸‰-æŠ€å·§" class="headerlink" title="ä¸‰ æŠ€å·§"></a>ä¸‰ æŠ€å·§</h2><h3 id="1-è¿˜åŸè®¾è®¡ç¨¿çš„-0-5px"><a href="#1-è¿˜åŸè®¾è®¡ç¨¿çš„-0-5px" class="headerlink" title="1. è¿˜åŸè®¾è®¡ç¨¿çš„ 0.5px"></a>1. è¿˜åŸè®¾è®¡ç¨¿çš„ 0.5px</h3><blockquote>
<p>åœ¨ 2014 å¹´çš„ WWDCï¼Œâ€œè®¾è®¡å“åº”çš„ Web ä½“éªŒâ€ ä¸€è®²ä¸­ï¼ŒTed Oâ€™Connor è®²åˆ°å…³äºâ€œretina hairlinesâ€ï¼ˆretina æç»†çš„çº¿ï¼‰ï¼šåœ¨ retina å±ä¸Šä»…ä»…æ˜¾ç¤º 1 ç‰©ç†åƒç´ çš„è¾¹æ¡†ã€‚</p>
</blockquote>
<p>ç®€å•ç‚¹è¯´å°±æ˜¯ï¼šåœ¨ Retina å±çš„è®¾å¤‡ä¸Šï¼Œ1px å…¶å®ç›¸å½“äº  2 ä¸ªç‰©ç†åƒç´ ï¼Œæ‰€ä»¥ 1 ä¸ªç‰©ç†åƒç´  = 0.5pxã€‚</p>
<p><img src="//img.aotu.io/liqinuo/2.png" alt="ç²¾è‡´åŒ–é‡æ„"></p>
<p>å®ç° 0.5px æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œè¿™é‡Œæ¯”è¾ƒä¸€ä¸‹å„ç§å¤„ç†çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<h4 id="1-iOS8-ä»¥ä¸Šæ”¯æŒ-0-5px"><a href="#1-iOS8-ä»¥ä¸Šæ”¯æŒ-0-5px" class="headerlink" title="1. iOS8 ä»¥ä¸Šæ”¯æŒ 0.5px"></a>1. iOS8 ä»¥ä¸Šæ”¯æŒ 0.5px</h4><p>å®ç°åŸç†ï¼šå¸¸è§„å±æ€§ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.border</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> solid red;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼šåŸç”Ÿã€ç®€å•ã€å¸¸è§„å†™æ³•ã€‚<br>ç¼ºç‚¹ï¼šç›®å‰åªæœ‰ iOS8 ä»¥ä¸Šç³»ç»Ÿæ‰èƒ½æ”¯æŒï¼ŒiOS7åŠä»¥ä¸‹ã€å®‰å“ç³»ç»Ÿéƒ½æ˜¾ç¤ºä¸º 0pxï¼Œå¯ä»¥é€šè¿‡è„šæœ¬åˆ¤æ–­ç³»ç»Ÿç„¶ååŒºåˆ†å¤„ç†ã€‚</p>
<h4 id="2-CSS-æ¸å˜æ¨¡æ‹Ÿ"><a href="#2-CSS-æ¸å˜æ¨¡æ‹Ÿ" class="headerlink" title="2. CSS æ¸å˜æ¨¡æ‹Ÿ"></a>2. CSS æ¸å˜æ¨¡æ‹Ÿ</h4><p>å®ç°åŸç†ï¼šè®¾ç½® 1px é€šè¿‡ css å®ç°çš„èƒŒæ™¯å›¾ç‰‡ï¼Œ50%æœ‰é¢œè‰²ï¼Œ50%é€æ˜ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.border</span> &#123;</div><div class="line">    <span class="attribute">background-image</span>:<span class="built_in">linear-gradient</span>(180deg, red, red 50%, transparent 50%), <span class="built_in">linear-gradient</span>(270deg, red, red 50%, transparent 50%), <span class="built_in">linear-gradient</span>(0deg, red, red 50%, transparent 50%), <span class="built_in">linear-gradient</span>(90deg, red, red 50%, transparent 50%);</div><div class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">1px</span>, <span class="number">1px</span> <span class="number">100%</span>, <span class="number">100%</span> <span class="number">1px</span>, <span class="number">1px</span> <span class="number">100%</span>;</div><div class="line">    <span class="attribute">background-repeat</span>: no-repeat;</div><div class="line">    <span class="attribute">background-position</span>: top, right top, bottom, left top;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§è¾ƒå¥½ï¼Œå•è¾¹æ¡†ã€å¤šè¾¹æ¡†å¯å®ç°ï¼Œå¤§å°ã€é¢œè‰²å¯é…ç½®ã€‚<br>ç¼ºç‚¹ï¼šä»£ç é‡å¤šã€æ— æ³•å®ç°åœ†è§’ã€åŒæ—¶å ç”¨äº†èƒŒæ™¯æ ·å¼</p>
<h4 id="3-é˜´å½±"><a href="#3-é˜´å½±" class="headerlink" title="3. é˜´å½±"></a>3. é˜´å½±</h4><p>å®ç°åŸç†ï¼šåˆ©ç”¨ css å¯¹é˜´å½±å¤„ç†çš„æ–¹å¼æ¨¡æ‹Ÿã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.border</span> &#123;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.5);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§è¾ƒå¥½ï¼Œå•è¾¹æ¡†ã€å¤šè¾¹æ¡†ã€åœ†è§’å¯å®ç°ï¼Œå¤§å°ã€é¢œè‰²ã€å¯é…ç½®ã€‚<br>ç¼ºç‚¹ï¼šæ¨¡æ‹Ÿæ•ˆæœå¼ºå·®äººæ„ï¼Œé¢œè‰²ä¸å¥½é…ç½®ã€‚</p>
<h4 id="4-viewport-rem"><a href="#4-viewport-rem" class="headerlink" title="4. viewport + rem"></a>4. viewport + rem</h4><p>å®ç°åŸç†ï¼šé€šè¿‡è®¾ç½®é¡µé¢ viewport ä¸å¯¹åº” rem åŸºå‡†å€¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- devicePixelRatio = 2ï¼š--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- devicePixelRatio = 3ï¼š--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=0.3333333333333333, maximum-scale=0.3333333333333333, minimum-scale=0.3333333333333333, user-scalable=no"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ¯”è¾ƒå¥½ï¼Œå†™æ³•è·Ÿå¸¸è§„å†™æ³•æ— å¼‚ã€‚<br>ç¼ºç‚¹ï¼šè€é¡¹ç›®æ”¹ç”¨ rem å•ä½æˆæœ¬è¾ƒé«˜ã€‚</p>
<h4 id="5-border-image"><a href="#5-border-image" class="headerlink" title="5. border-image"></a>5. border-image</h4><p>å®ç°åŸç†ï¼šé€šè¿‡å›¾ç‰‡é…åˆè¾¹æ¡†èƒŒæ™¯æ¨¡æ‹Ÿã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.border-image</span>&#123;</div><div class="line">    <span class="attribute">border-image</span>: <span class="built_in">url</span>() <span class="number">2</span> <span class="number">0</span> stretch;</div><div class="line">    <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šæ— ã€‚<br>ç¼ºç‚¹ï¼šå›¾ç‰‡è¾¹ç¼˜æ¨¡ç³Šï¼Œå¤§å°ã€é¢œè‰²æ›´æ”¹ä¸çµæ´»ã€‚</p>
<h4 id="6-CSS3-ç¼©æ”¾"><a href="#6-CSS3-ç¼©æ”¾" class="headerlink" title="6. CSS3 ç¼©æ”¾"></a>6. CSS3 ç¼©æ”¾</h4><p>å®ç°åŸç†ï¼šåˆ©ç”¨ :before/:after é‡åš borderï¼Œé…åˆ scale ä½¿å¾—ä¼ªå…ƒç´ ç¼©å°ä¸€åŠ<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$bor_style</span> : <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">%<span class="attribute">border-top</span>-1pt &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="variable">$bor_style</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">@<span class="keyword">media</span> only screen and (-webkit-min-device-pixel-ratio:<span class="number">2</span>) &#123;</div><div class="line">    %<span class="attribute">border-top</span>-1pt &#123;</div><div class="line">        -webkit-<span class="attribute">transform</span>: scaleY(<span class="number">0.5</span>);</div><div class="line">        -webkit-<span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">0%</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ã€å•è¾¹æ¡†ã€å¤šè¾¹æ¡†ã€åœ†è§’å¯å®ç°ï¼Œå¤§å°ã€é¢œè‰²å¯é…ç½®ã€‚<br>ç¼ºç‚¹ï¼šä»£ç é‡å¤šï¼Œå¯é€šè¿‡ sass é¢„å¤„ç†å™¨å¤„ç†ã€‚</p>
<h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>ç»è¿‡æ¯”è¾ƒä¸å®æ“æµ‹è¯•ï¼Œæœ€å¥½çš„å¤„ç†æ–¹å¼æ˜¯ CSS3 ç¼©æ”¾ï¼Œç›®å‰é¡¹ç›®å·²ç»åœ¨å¹¿æ³›ä½¿ç”¨ã€‚</p>
<h3 id="2-Flexbox-å¸ƒå±€"><a href="#2-Flexbox-å¸ƒå±€" class="headerlink" title="2. Flexbox å¸ƒå±€"></a>2. Flexbox å¸ƒå±€</h3><blockquote>
<p>Flexbox Layoutï¼ˆå¼¹æ€§ç›’æ¨¡å‹ï¼‰æ¨¡å—ï¼ˆç›®å‰W3Cå·¥ä½œè‰æ¡ˆæ­£åœ¨æœ€åé€šè¿‡ï¼‰çš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§æ›´æœ‰æ•ˆçš„æ–¹å¼æ¥å¸ƒå±€ï¼Œä½¿å„æ¨¡å—å³ä½¿å¤§å°æ˜¯æœªçŸ¥æˆ–è€…åŠ¨æ€çš„ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç©ºé—´ä¸­åˆç†åˆ†é…ä½ç½®ï¼ˆå°±åƒâ€œå¼¹æ€§â€è¿™ä¸ªè¯ä¸€æ ·ï¼‰ã€‚</p>
</blockquote>
<p>é¡¹ç›®å“ªäº›åœ°æ–¹å¯ä»¥ä½¿ç”¨ flexboxï¼Ÿæ¯”å¦‚è¿™äº›</p>
<p><img src="//img.aotu.io/liqinuo/3.png" alt="ç²¾è‡´åŒ–é‡æ„"></p>
<h4 id="åŸºæœ¬è¯­æ³•ï¼š"><a href="#åŸºæœ¬è¯­æ³•ï¼š" class="headerlink" title="åŸºæœ¬è¯­æ³•ï¼š"></a>åŸºæœ¬è¯­æ³•ï¼š</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">ul</span> &#123;</div><div class="line">    <span class="attribute">display</span>: box;</div><div class="line">    <span class="attribute">display</span>: -webkit-box;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">box-flex</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">-webkit-box-flex</span>: <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"><a href="#3-å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="3. å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"></a>3. å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­</h3><p>å®ç°çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä¸‹é¢å‡ ç§æ¯”è¾ƒå¸¸ç”¨ï¼š</p>
<h4 id="1-è¡¨æ ¼æ–¹æ³•ï¼š"><a href="#1-è¡¨æ ¼æ–¹æ³•ï¼š" class="headerlink" title="1. è¡¨æ ¼æ–¹æ³•ï¼š"></a>1. è¡¨æ ¼æ–¹æ³•ï¼š</h4><p>å®ç°æ–¹æ³•ï¼šè¡¨æ ¼å†…å®¹æœ¬æ¥å°±æ˜¯å‚ç›´å±…ä¸­çš„ï¼Œå¯ä»¥é€šè¿‡æ¨¡æ‹Ÿè¡¨æ ¼å¤„ç†ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box_center"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box_center</span> &#123;</div><div class="line">    <span class="attribute">display</span>: table-cell;</div><div class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">text-align</span>: center;</div><div class="line">    <span class="attribute">vertical-align</span>: middle;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box_center</span> <span class="selector-class">.inner</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline-block;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-vertical-align-middle"><a href="#2-vertical-align-middle" class="headerlink" title="2. vertical-align: middle"></a>2. vertical-align: middle</h4><p>å®ç°æ–¹æ³•ï¼šåˆ©ç”¨ç©ºå…ƒç´ å ä½å®ç°<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box_center"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"placeholder"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box_center</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">text-align</span>: center;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box_center</span> <span class="selector-class">.inner</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline-block;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box_center</span> <span class="selector-class">.placeholder</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline-block;</div><div class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">vertical-align</span>: middle;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-ç»å¯¹å®šä½"><a href="#3-ç»å¯¹å®šä½" class="headerlink" title="3. ç»å¯¹å®šä½"></a>3. ç»å¯¹å®šä½</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">%<span class="selector-tag">box_center</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">margin</span>: auto;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4-ä½¿ç”¨-transform-å®ç°"><a href="#4-ä½¿ç”¨-transform-å®ç°" class="headerlink" title="4. ä½¿ç”¨ transform å®ç°"></a>4. ä½¿ç”¨ transform å®ç°</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">%<span class="selector-tag">box_center</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</div><div class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¼å®¹æ€§ï¼šAndroid2.3 ç³»ç»Ÿæµè§ˆå™¨ä¸æ”¯æŒå®¹å™¨ç›´æ¥ä½¿ç”¨ fixed è¿›è¡Œå®šä½ï¼Œå¤–åŠ  fixed å®¹å™¨å¯è§£å†³ã€‚</p>
<h4 id="ç»“è®ºï¼š-1"><a href="#ç»“è®ºï¼š-1" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h4><p>ç»è¿‡å„ç§åœºæ™¯çš„é€‚ç”¨å‹æ¯”è¾ƒï¼Œé¡¹ç›®ä½¿ç”¨  transform å®ç°ï¼Œå…¼å®¹æ€§å¥½ä¸”ä½¿ç”¨æ–¹ä¾¿ã€‚</p>
<h3 id="4-å›¾ç‰‡å ä½"><a href="#4-å›¾ç‰‡å ä½" class="headerlink" title="4. å›¾ç‰‡å ä½"></a>4. å›¾ç‰‡å ä½</h3><p>å›¾ç‰‡æœªåŠ è½½å‡ºæ¥ä¹‹å‰æµè§ˆå™¨æ˜¯æ— æ³•è®¡ç®—å‡ºå›¾ç‰‡å®é™…å°ºå¯¸çš„ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œé¡µé¢åˆšæ‰“å¼€å„ç§å…ƒç´ ä¼šå› ä¸ºå›¾ç‰‡æœªå®Œå…¨åŠ è½½è€Œè·³åŠ¨/é”™ä½ã€‚</p>
<p>è¿™é‡Œæ¨èä¸€ç§å…¼å®¹æ€§å¾ˆå¥½åšæ³•ç®€å•çš„æ–¹æ³•ï¼š</p>
<p><strong>å®ç°åŸç†ï¼š</strong><br>é€šè¿‡å›¾ç‰‡å®½é«˜æ¯”ä¾‹è®¡ç®—å‡ºå›¾ç‰‡æ‰€éœ€å ä½ç©ºé—´ï¼Œèµ‹å€¼äºå¤–å®¹å™¨ï¼Œå›¾ç‰‡å†ç»å¯¹å®šä½åœ¨ç­‰æ¯”ç¼©æ”¾çš„å®¹å™¨å½“ä¸­ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.placeholder</span> &#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">    <span class="attribute">width</span>: <span class="number">100%</span>:</div><div class="line">    height: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding-top</span>: <span class="number">100%</span>:</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.placeholder</span> <span class="selector-tag">img</span> &#123;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">height</span>: auto;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>è®¡ç®—å…¬å¼ï¼š</strong><br>padding-top = å›¾ç‰‡é«˜åº¦(px)/å›¾ç‰‡å®½åº¦(px) * 100%</p>
<p><strong>æ¯”å¦‚ï¼š</strong><br>1:1 æ¯”ä¾‹çš„å›¾ç‰‡ padding-top: 100%;<br>2:1 æ¯”ä¾‹çš„å›¾ç‰‡ padding-top: 50%;</p>
<h2 id="å››-å°½å¯èƒ½å‡å°‘æ ·å¼å›¾ç‰‡"><a href="#å››-å°½å¯èƒ½å‡å°‘æ ·å¼å›¾ç‰‡" class="headerlink" title="å›› å°½å¯èƒ½å‡å°‘æ ·å¼å›¾ç‰‡"></a>å›› å°½å¯èƒ½å‡å°‘æ ·å¼å›¾ç‰‡</h2><p>å¤§å¤šå›¾æ ‡å…ƒç´ éƒ½å¯ä»¥ä½¿ç”¨ CSS æ ·å¼ç»˜åˆ¶ï¼Œå¯ä»¥å¤§å¤§å‡å°‘æ ·å¼å›¾èµ„æºè¯·æ±‚è¿˜æœ‰å¢å¼ºå›¾æ ‡å¯ç»´æŠ¤æ€§ã€‚<br>æ¯”å¦‚ï¼šé“¾æ¥ç®­å¤´ã€åœ†ç‚¹ã€ä¼˜æƒ åˆ¸ç‚¹ç‚¹ã€é€‰æ‹©æ¡†ã€checkboxç­‰ç­‰ã€‚</p>
<p><img src="//img.aotu.io/liqinuo/4.png" alt="ç²¾è‡´åŒ–é‡æ„"></p>
<h2 id="äº”-ä½¿ç”¨-WebP-æ ¼å¼å›¾ç‰‡"><a href="#äº”-ä½¿ç”¨-WebP-æ ¼å¼å›¾ç‰‡" class="headerlink" title="äº” ä½¿ç”¨ WebP æ ¼å¼å›¾ç‰‡"></a>äº” ä½¿ç”¨ WebP æ ¼å¼å›¾ç‰‡</h2><blockquote>
<p>WebP æ ¼å¼ï¼Œç”± google äº 2010 å¹´æ¨å‡ºçš„æ–°ä¸€ä»£å›¾ç‰‡æ ¼å¼ï¼Œåœ¨å‹ç¼©æ–¹é¢æ¯” JPEG æ ¼å¼æ›´ä¼˜è¶Šï¼Œå¹¶èƒ½èŠ‚çœå¤§é‡çš„æœåŠ¡å™¨å¸¦å®½èµ„æºå’Œæ•°æ®ç©ºé—´ã€‚ä¸ JPEG ç›¸åŒï¼ŒWebP ä¹Ÿæ˜¯ä¸€ç§æœ‰æŸå‹ç¼©ï¼Œä¸»è¦ä¼˜åŠ¿åœ¨äºé«˜æ•ˆç‡ã€‚åœ¨è´¨é‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒWebP æ ¼å¼å›¾åƒçš„ä½“ç§¯è¦æ¯” JPEG æ ¼å¼å›¾åƒå° 40%ã€‚</p>
</blockquote>
<p>é¡¹ç›®ä¸­å¤§éƒ¨åˆ†é¡µé¢ç´ æå›¾éƒ½ä½¿ç”¨äº† WebP æ ¼å¼ï¼Œå…¼å®¹æ–¹æ¡ˆï¼š</p>
<ol>
<li><p><strong>æ‰“å¼€åœºæ™¯æ˜¯æµè§ˆå™¨ï¼š</strong>é€šè¿‡ javascript æ£€æµ‹ï¼Œå¯¹æ”¯æŒ WebP çš„ç”¨æˆ·è¾“å‡º WebP æ ¼å¼å›¾ç‰‡ã€‚<br>WebP æ”¯æŒ æ’ä»¶ï¼š<a href="http://webpjs.appspot.com/" target="_blank" rel="external">http://webpjs.appspot.com/</a></p>
</li>
<li><p><strong>æ‰“å¼€åœºæ™¯æ˜¯APPï¼š</strong>æ ¹æ®ä¸åŒç³»ç»Ÿä½¿ç”¨ Android WebP è§£æåº“æˆ–iOS WebP è§£æåº“åšå…¼å®¹è§£æã€‚<br>Android4.0 ä»¥ä¸‹è§£æåº“ï¼š<a href="https://github.com/alexey-pelykh/webp-android-backport" target="_blank" rel="external">https://github.com/alexey-pelykh/webp-android-backport</a><br>iOS è§£æåº“ï¼š<a href="https://github.com/carsonmcdonald/WebP-iOS-example" target="_blank" rel="external">https://github.com/carsonmcdonald/WebP-iOS-example</a></p>
</li>
</ol>
<p>PSï¼šé™¤äº† Android4.0 ä»¥ä¸Šæä¾›åŸç”Ÿæ”¯æŒ</p>
<p>èµ„æ–™å‚è€ƒï¼š<a href="http://isux.tencent.com/introduction-of-webp.html" target="_blank" rel="external">http://isux.tencent.com/introduction-of-webp.html</a></p>
<p><strong>ç»“è®ºï¼š</strong><br>ä¿è¯å›¾ç‰‡é«˜æ¸…è´¨é‡çš„åŒæ—¶ï¼Œå¤§å¤§å‹ç¼©äº†å›¾ç‰‡å¤§å°ï¼ŒèŠ‚çœäº†æœåŠ¡å™¨å¸¦å®½èµ„æºå’Œæ•°æ®ç©ºé—´ã€‚</p>
<h2 id="å…­-APPç¼“å­˜ç­–ç•¥"><a href="#å…­-APPç¼“å­˜ç­–ç•¥" class="headerlink" title="å…­ APPç¼“å­˜ç­–ç•¥"></a>å…­ APPç¼“å­˜ç­–ç•¥</h2><p>æ³¨ï¼š APPç¼“å­˜ç­–ç•¥ç”±å¼€å‘åŒå­¦æä¾›</p>
<h3 id="1-ç¼“å­˜æ–¹å¼"><a href="#1-ç¼“å­˜æ–¹å¼" class="headerlink" title="1. ç¼“å­˜æ–¹å¼"></a>1. ç¼“å­˜æ–¹å¼</h3><ul>
<li><p>æ¨¡å—åŒ–çš„ä½¿ç”¨ APP ç¼“å­˜ï¼Œå†™å…¥ç£ç›˜ï¼ŒåŒ…æ‹¬ HTMLã€JSã€CSSã€‚</p>
</li>
<li><p>å›¾ç‰‡ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œç¨³å®šåçš„èƒŒæ™¯å›¾ä»¥åŠå¸¸ç”¨å›¾ç‰‡ä¹Ÿä½¿ç”¨ APP ç¼“å­˜ã€‚</p>
</li>
</ul>
<h3 id="2-ç¼“å­˜æ›´æ–°"><a href="#2-ç¼“å­˜æ›´æ–°" class="headerlink" title="2. ç¼“å­˜æ›´æ–°"></a>2. ç¼“å­˜æ›´æ–°</h3><ul>
<li><p><strong>ä¸»æ¨¡å—æ›´æ–°ï¼š</strong>APP æ‰“å¼€å°±å‘é€ä¸»æ¨¡å—ç‰ˆæœ¬å·åˆ°æœåŠ¡ç«¯ï¼Œè¿”å›æœ‰æ›´æ–°çš„æ¨¡å—å†…å®¹ä»¥åŠç‰ˆæœ¬å·ï¼Œå¹¶ä¸”è¿”å›æ‰€æœ‰æ¨¡å—ç‰ˆæœ¬ç´¢å¼•ã€‚</p>
</li>
<li><p><strong>å­æ¨¡å—æ›´æ–°ï¼š</strong>è¿›å»ä¸€ä¸ªä¸»æ¨¡å—ï¼Œåœ¨åŠ è½½å®Œæˆåï¼Œä¼šæ£€æŸ¥æ‰€æœ‰å­æ¨¡å—ç‰ˆæœ¬ç´¢å¼•ï¼Œå¹¶è·å–éœ€è¦æ›´æ–°çš„æ¨¡å—å†…å®¹ã€‚</p>
</li>
<li><p><strong>å½“å‰æ¨¡å—æ›´æ–°ï¼š</strong>åœ¨ç›´æ¥æ‰“å¼€æ¨¡å—æ—¶ï¼ˆéé¦–é¡µè¿›å…¥ï¼‰ï¼Œä¼šå» check/æ›´æ–°ä¸€ä¸‹å½“å‰ç‰ˆæœ¬ï¼Œç„¶ååœ¨åŠ è½½ã€‚</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ä¸€-å¸ƒå±€æ–¹å¼&quot;&gt;&lt;a href=&quot;#ä¸€-å¸ƒå±€æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ å¸ƒå±€æ–¹å¼&quot;&gt;&lt;/a&gt;ä¸€ å¸ƒå±€æ–¹å¼&lt;/h2&gt;&lt;p&gt;ä½œä¸ºä¸€ä¸ªæ³¨é‡ç”¨æˆ·ä½“éªŒçš„ H5 é¡µé¢ï¼Œåˆé€‚çš„é¡µé¢å¸ƒå±€æ–¹å¼å¾ˆé‡è¦ã€‚&lt;br&gt;ç§»
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="summary" scheme="https://aotu.io/tags/summary/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ThreeJSåœ¨æµè§ˆå™¨ä¸­å±•ç¤º3Dç‰©ä»¶</title>
    <link href="https://aotu.io/notes/2015/11/24/3D-CleaningCream/"/>
    <id>https://aotu.io/notes/2015/11/24/3D-CleaningCream/</id>
    <published>2015-11-24T05:00:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡ä»‹ç»å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­å±•ç¤º<del style="background-color: #333!important;color: #333 !important;">æ´—é¢å¥¶</del>3Dç‰©ä»¶çš„æ–‡ç« ã€‚<br><a id="more"></a> </p>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è¿™ç¯‡æ–‡ç« ä»…ä»…æ˜¯å‘ä½ ä»‹ç»åº”å¯¹ä¸‹é¢è¿™ç§çš„åœºæ™¯çš„æ–¹æ³•ï¼šå¦‚æœæœ‰äººçªç„¶è·Ÿä½ è¯´ï¼Œä½ çš„çš®è‚¤æŒºä¸é”™çš„è€¶ï¼Œä½ ç”¨çš„ä»€ä¹ˆæ´—é¢å¥¶ï¼Œæˆ‘ä¹Ÿæƒ³ä¹°ä¸€ä¸ªï¼Œä½ ä¼šæ€ä¹ˆå›ç­”å‘¢ï¼Ÿæ‰‹å¤´åˆæ²¡æ³•æ‹¿å‡ºä½ çš„æ´—é¢å¥¶ç»™ä»–çœ‹ï¼Œå…‰å‡­è¨€è¯­æ— æ³•å‡†ç¡®åœ°å½¢å®¹å‡ºä½ çš„æ´—é¢å¥¶åˆ°åº•é•¿ä»€ä¹ˆæ ·ã€‚ä½œä¸ºå‰ç«¯çš„ç¨‹åºçŒ¿ï¼Œæˆ‘ä¼šæƒ³ï¼Œè¿™ç§æ—¶å€™å¦‚æœå¯ä»¥æœ‰ä¸€ä¸ªé“¾æ¥è®©å¯¹æ–¹è‡ªå·±å»çœ‹ä¸€ä¸‹æŠŠç©ä¸€ä¸‹ï¼Œå¯¹æ–¹åŠ¿å¿…ä¼šå¯¹ä½ çš„æ´—é¢å¥¶<del style="background-color: #333!important;color: #333 !important;">é«˜Bigger</del>æœ‰æ›´æ·±åˆ»çš„è®¤è¯†ã€‚æœ¬æ–‡çš„ç›®çš„ï¼Œå°±æ˜¯å‘å±å¹•å¯¹é¢çš„ç¨‹åºçŒ¿ä»‹ç»è¿™ç§é«˜æ•ˆ<del style="background-color: #333!important;color: #333 !important;">æç¬‘</del>çš„æ–¹å¼ã€‚</p>
<h3 id="èµ°è¿›3Dçš„ä¸–ç•Œ"><a href="#èµ°è¿›3Dçš„ä¸–ç•Œ" class="headerlink" title="èµ°è¿›3Dçš„ä¸–ç•Œ"></a>èµ°è¿›3Dçš„ä¸–ç•Œ</h3><p>åœ¨é¡µé¢é‡Œé¢æ”¾å‡ ä¸ªå›¾ç‰‡æ˜¯å®Œå…¨æ— æ³•æ»¡è¶³è®©è§‚çœ‹è€…è‡ªå·±çœ‹è‡ªå·±æŠŠç©çš„è¦æ±‚çš„ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨3Dçš„å½¢å¼æ¥å±•ç°æˆ‘ä»¬çš„æ´—é¢å¥¶ã€‚è€è¯è¯´å¾—å¥½ï¼ŒåŒæ ·æ˜¯å±±ï¼Œå´æœ‰æ¨ªçœ‹æˆå²­ä¾§æˆå³°çš„ä¸åŒã€‚æ¯”èµ·2Dæ¸²æŸ“ï¼Œ3Dæ¸²æŸ“å¤šäº†ä¸€ä¸ªç»´åº¦ï¼Œç”±äºé€è§†æ•ˆæœï¼Œç‰©ä½“é®æŒ¡ã€å…‰ç…§è§’åº¦ã€å…‰çš„åå°„æŠ˜å°„ç­‰çš„å­˜åœ¨ï¼Œè§‚çœ‹è€…åœ¨ä¸åŒçš„è§’åº¦è§‚çœ‹ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚</p>
<p>åœ¨æµè§ˆå™¨é‡Œé¢ï¼ŒCSS3æä¾›äº†3Då˜æ¢çš„ç›¸å…³å±æ€§ï¼Œä½†å¯¹äºå…‰ç…§ç›¸å…³çš„éœ€æ±‚å´æ˜¯æ— èƒ½ä¸ºåŠ›ã€‚è€Œä½¿ç”¨Canvasè¿›è¡Œç»˜åˆ¶çš„è¯ï¼Œå¦‚æœä¸ä¾èµ–å°è£…å¥½çš„å›¾å½¢åº“ï¼Œè¿›è¡Œå›¾å½¢å˜æ¢åˆæ˜¯ç›¸å½“éº»çƒ¦çš„äº‹æƒ…ã€‚å°±ç®—æ˜¯åœ¨CSSä¸­ä¸€ä¸ªç®€å•çš„2Dæ—‹è½¬æˆ–è€…æ˜¯æ”¾å¤§ï¼Œåœ¨Canvasçš„åƒç´ æ“ä½œä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡çŸ©é˜µè®¡ç®—æ‰èƒ½çŸ¥é“å˜æ¢åæ¯ä¸ªåƒç´ çš„ä½ç½®ã€‚æ­£å› å¦‚æ­¤ï¼Œå›¾å½¢åº“å‡ºç°äº†ã€‚</p>
<p>è¯´åˆ°å›¾å½¢åº“ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æåˆ°<a href="http://www.opengl.org" target="_blank" rel="external">OpenGL</a>ã€‚OpenGLæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å›¾å½¢ç¼–ç¨‹è§„èŒƒï¼Œå®šä¹‰äº†2Dä¸3Dç»˜åˆ¶ä¸­æ‰€éœ€è¦å„ç§æ¥å£ï¼Œè¿›è¡Œå›¾å½¢ç»˜åˆ¶ä¸­æ‰€éœ€è¦çš„å˜æ¢ï¼Œçº¹ç†æ˜ å°„ï¼Œå…‰ç…§ç­‰ã€‚OpenGLå®šä¹‰çš„æ¥å£å¾ˆå¤šæ˜¯ä¸ºç¡¬ä»¶åŠ é€Ÿè®¾è®¡çš„ã€‚æœ‰äº†å„å¤§ç¡¬ä»¶å‚å•†çš„æ”¯æŒï¼ŒOpenGLçš„æ¸²æŸ“æ•ˆç‡æ¯”èµ·è½¯ä»¶æ¸²æŸ“é«˜äº†ä¸æ­¢ä¸€ç‚¹ç‚¹ã€‚åŒæ—¶ï¼ŒOpenGLä¸å±€é™äºæŸå¹³å°æˆ–è€…æ˜¯è¯­è¨€ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå…³äºå›¾å½¢æ¸²æŸ“çš„è§„èŒƒï¼Œå¯¹å¤–æä¾›å…³äºå›¾å½¢æ¸²æŸ“çš„å„ç§æ¥å£ï¼Œæ‰€ä»¥æœ‰è®¸å¤šçš„è¯­è¨€ç»‘å®šï¼Œè€Œåœ¨æµè§ˆå™¨ä¸­ç”¨åˆ°çš„æ˜¯Javascriptçš„ç»‘å®šWebGLã€‚</p>
<h3 id="ThreeJS"><a href="#ThreeJS" class="headerlink" title="ThreeJS"></a>ThreeJS</h3><p><a href="http://threejs.org/" target="_blank" rel="external">ThreeJS</a>æ˜¯ä¸€æ¬¾åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œ3Dç»˜åˆ¶çš„Javascriptåº“ï¼Œä¸ºä½¿ç”¨canvasç»˜åˆ¶ï¼ŒWebGLæ¸²æŸ“ç­‰å›¾å½¢æ“ä½œæä¾›äº†ç®€ä¾¿çš„APIã€‚åˆ°åº•æœ‰å¤šç®€ä¾¿ï¼Ÿåœ¨<a href="http://www.pixijs.com" target="_blank" rel="external">PixiJS</a>ç­‰2Dç»˜åˆ¶åº“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœºæ™¯+ç‰©ä»¶+è´´å›¾æ¥æå®šä¸€å¼ å›¾ï¼Œè€Œåœ¨ThreeJSä¸­æˆ‘ä»¬åªéœ€è¦åœ¨è¿™åŸºç¡€ä¸Šé¢å¤–æ·»åŠ é€‚å½“å…‰ç…§ä¸ä¸€å°ç…§ç›¸æœºè€Œå·²ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„Demoï¼Œç»˜åˆ¶äº†ä¸€ä¸ªæ—‹è½¬çš„ç»¿è‰²ç«‹æ–¹ä½“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="comment">/*åˆ›å»ºåœºæ™¯*/</span></div><div class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera( <span class="number">75</span>, <span class="built_in">window</span>.innerWidth/<span class="built_in">window</span>.innerHeight, <span class="number">0.1</span>, <span class="number">1000</span> );</div><div class="line"><span class="comment">/*åˆ›å»ºç…§ç›¸æœº*/</span></div><div class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line"><span class="comment">/*åˆ›å»ºæ¸²æŸ“å™¨*/</span></div><div class="line">renderer.setSize( <span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight );</div><div class="line"><span class="built_in">document</span>.body.appendChild( renderer.domElement );</div><div class="line"></div><div class="line"><span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> );</div><div class="line"><span class="comment">/*åˆ›å»ºå‡ ä½•æ¨¡å‹*/</span></div><div class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial( &#123; <span class="attr">color</span>: <span class="number">0x00ff00</span> &#125; );</div><div class="line"><span class="comment">/*åˆ›å»ºæè´¨*/</span></div><div class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh( geometry, material );</div><div class="line"><span class="comment">/*å‡ ä½•æ¨¡å‹ä¸æè´¨åˆæˆä¸ºç‰©ä»¶*/</span></div><div class="line">scene.add( cube );</div><div class="line"><span class="comment">/*å°†ç‰©ä»¶æ·»åŠ å…¥åœºæ™¯*/</span></div><div class="line"></div><div class="line">camera.position.z = <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> render = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	requestAnimationFrame( render );</div><div class="line">	cube.rotation.x += <span class="number">0.1</span>;</div><div class="line">	cube.rotation.y += <span class="number">0.1</span>;</div><div class="line">	renderer.render(scene, camera);</div><div class="line">	<span class="comment">/*æ¸²æŸ“å‡ºåœ¨ç›¸æœºcameraä¸­çœ‹åˆ°çš„sceneåœºæ™¯*/</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">render();</div></pre></td></tr></table></figure>
<p>ç”»å‡ºæ¥å°±åƒè¿™æ ·å­ï¼š<br><img src="//img.aotu.io/Littly/rollingCube.png" alt="æ—‹è½¬ç«‹æ–¹ä½“"></p>
<p>ThreeJSä¸­æä¾›äº†å°‘é‡åŸºç¡€çš„å‡ ä½•æ¨¡å‹ï¼Œå¦‚é•¿æ–¹ä½“(Box3)ï¼Œçƒä½“(Sphere)ç­‰ï¼Œä½†é¢å¯¹æˆ‘ä»¬è¦å®ç°çš„æ´—é¢å¥¶è¿˜æ˜¯å¤ªå°å„¿ç§‘äº†ã€‚è¿™æ˜¯ä¸æ˜¯è¯´æ˜æˆ‘ä»¬çš„æ´—é¢å¥¶æ²¡åŠæ³•åšäº†ï¼Ÿæ–‡ç« éƒ½å†™åˆ°è¿™é‡Œäº†ï¼ŒåŠæ³•è‚¯å®šæ˜¯æœ‰çš„ã€‚ThreeJSæä¾›äº†åŠ è½½å¤–éƒ¨æ¨¡å‹çš„æ¨¡å—(Loader)ï¼Œå¯ä»¥åŠ è½½å¤–éƒ¨çš„Objï¼Œjsonç­‰æ ¼å¼çš„æ¨¡å‹ã€‚å¦å¤–ï¼ŒThreeJSçš„<a href="https://github.com/mrdoob/three.js/tree/master/utils/exporters" target="_blank" rel="external">Githubä»“åº“</a>ä¸­è¿˜æä¾›äº†åœ¨3ds Maxã€Blenderç­‰3Dç»˜åˆ¶è½¯ä»¶ä¸­å¯¼å‡ºæ¨¡å‹çš„å·¥å…·ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ«çš„3Då»ºæ¨¡è½¯ä»¶å»ºæ¨¡å†å¯¼å‡ºæˆThreeJSæ‰€éœ€è¦çš„æ ¼å¼äº†ã€‚</p>
<h3 id="åŠ¨æ‰‹"><a href="#åŠ¨æ‰‹" class="headerlink" title="åŠ¨æ‰‹"></a>åŠ¨æ‰‹</h3><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯å»ºæ¨¡å·¥å…·æ˜¯Blenderã€‚æˆ‘ä»¬éœ€è¦å…ˆæ‹ä¸‹ç‰©ä½“çš„ä¸‰è§†å›¾ä½œä¸ºå»ºæ¨¡çš„å‚è€ƒã€‚å¯¼å…¥Blenderåï¼Œä¾æ®ä¸‰è§†å›¾ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±å¯ä»¥å»ºå‡ºæ´—é¢å¥¶çš„æ¨¡å‹ã€‚</p>
<p>æ¨¡å‹çš„æ ·å­<br><img src="//img.aotu.io/Littly/modeling.png" alt="å»ºæ¨¡"></p>
<p>åœ¨Blenderä¸­åŠ ä¸ŠThreeJSçš„æ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Blenderçš„æ–‡ä»¶èœå•ä¸­è§åˆ°Export/Three.js(.json)é€‰é¡¹ã€‚ç‚¹å‡»ä¹‹åï¼Œé€‰æ‹©å¯¼å‡ºçš„ç›®å½•ï¼Œç„¶åè®°å¾—åœ¨å·¦ä¸‹è§’å‹¾ä¸Šæˆ‘ä»¬è¦å¯¼å‡ºçš„å…ƒç´ ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å‡ºçš„æ˜¯Sceneï¼Œä¹Ÿå°±æ˜¯åœºæ™¯æœ¬èº«ã€‚<br><img src="//img.aotu.io/Littly/exporting.jpg" alt="å¯¼å‡ºèœå•"></p>
<p>åœ¨ThreeJSä¸­è¿›è¡Œå¯¼å…¥çš„æ“ä½œä¹Ÿååˆ†ç®€å•ã€‚ThreeJSä¸­æä¾›äº†è®¸å¤šç§ç±»çš„Loaderï¼Œåˆ†åˆ«é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨éœ€æ±‚ã€‚æ¯”å¦‚ï¼ŒJSONLoaderé’ˆå¯¹çš„æ˜¯.jsonæ ¼å¼çš„æ¨¡å‹ï¼ŒOBJLoaderé’ˆå¯¹çš„æ˜¯.objæ ¼å¼çš„æ¨¡å‹ç­‰ç­‰ã€‚ç¿»é˜…ç½‘ä¸Šèµ„æ–™çš„æ—¶å€™è¿˜å¯ä»¥çœ‹åˆ°SceneLoaderçš„è¸ªå½±ï¼Œè¿™å°±æ˜¯ç”¨æ¥åŠ è½½æ•´ä¸ªåœºæ™¯çš„.jsonæ ¼å¼æ–‡ä»¶çš„ã€‚å¯æ˜¯åœ¨ThreeJSçš„æ–°ç‰ˆæœ¬ä¸­ï¼ŒSceneLoaderå·²ç»è¢«åºŸå¼ƒï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´ä¸ºç‰›å‰æ›´ä¸ºæ™ºèƒ½çš„ObjectLoaderã€‚ObjectLoaderå¯ä»¥åˆ¤æ–­å¯¼å‡ºçš„æ¨¡å‹åˆ°åº•æ˜¯ä»€ä¹ˆç§ç±»ï¼Œä»è€Œå°†å®ƒä»¬è½¬åŒ–ä¸ºThreeJSä¸­çš„å¯¹åº”å¯¹è±¡ä¾¿äºå¼€å‘è€…ä½¿ç”¨ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¼å‡ºçš„.jsonæ–‡ä»¶ä¸­åŒ…å«çš„æ˜¯åœºæ™¯æœ¬èº«ã€‚æ‰€ä»¥ï¼Œé™¤äº†éœ€è¦æ·»åŠ éƒ¨åˆ†ObjectLoaderçš„ä»£ç ï¼Œå…¶ä½™éƒ¨åˆ†çš„ä»£ç ç”šè‡³æ¯”ä¸Šé¢é‚£ä¸ªä¾‹å­è¿˜è¦ç®€å•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scene,</div><div class="line">	camera,</div><div class="line">	renderer,</div><div class="line">	loader,</div><div class="line">	wid,</div><div class="line">	hei,</div><div class="line">	animate;</div><div class="line">	</div><div class="line">animate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	renderer.render(scene, camera);</div><div class="line">	requestAnimationFrame(animate);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">wid = <span class="built_in">window</span>.innerWidth;</div><div class="line">hei = <span class="built_in">window</span>.innerHeight;</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, wid / hei, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line"><span class="comment">/*åˆ›å»ºç…§ç›¸æœº*/</span></div><div class="line"></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="keyword">new</span> THREE.Vector3(<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>));</div><div class="line"></div><div class="line">renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(wid, hei);</div><div class="line"></div><div class="line">loader = <span class="keyword">new</span> THREE.ObjectLoader();</div><div class="line"><span class="comment">/*åˆ›å»ºObjectLoader*/</span></div><div class="line"></div><div class="line"><span class="built_in">document</span>.body.appendChild(renderer.domElement);</div><div class="line"></div><div class="line">loader.load(<span class="string">'objs/object.json'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">_sce</span>) </span>&#123;</div><div class="line">	scene = _sce;</div><div class="line">	scene.add(camera);</div><div class="line">	animate();</div><div class="line">&#125;);</div><div class="line"><span class="comment">/*åŠ è½½Sceneï¼ŒæˆåŠŸåæ‰§è¡Œå›è°ƒå¼€å§‹åŠ¨ç”»*/</span></div></pre></td></tr></table></figure>
<p>æµè§ˆå™¨ä¸­ä¸€çœ‹ï¼Œå´ä¸å¤ªå¯¹åŠ²ã€‚å½¢çŠ¶å¯¹äº†ï¼Œå¯æ˜¯é¢œè‰²å‘¢ï¼Ÿé«˜ç«¯é»‘çš„æ´—é¢å¥¶æ€ä¹ˆå°±å˜æˆè¿™ä¹ˆå±±å¯¨çš„é¢œè‰²äº†ï¼Œè€Œä¸”æ¯æ¬¡åˆ·æ–°éƒ½å˜é¢œè‰²ã€‚æ´»äº†äºŒåå‡ å¹´ï¼Œå°ä¾¿è¡¨ç¤ºè¿˜çœŸæ²¡è§åˆ°è¿‡è¿™æ ·çš„æ´—é¢å¥¶ã€‚</p>
<p><img src="//img.aotu.io/Littly/neverseen.png" alt="è·‘é©¬ç¯"></p>
<p>å‡ºç°è¿™ç§æƒ…å†µï¼Œæ¯«æ— ç–‘é—®æ˜¯æè´¨çš„é—®é¢˜ã€‚åŸæ¥æˆ‘ä»¬åœ¨å»ºæ¨¡è½¯ä»¶ä¸­è¿˜æ²¡ç»™æ´—é¢å¥¶åŠ è¿‡æè´¨ï¼Œæ‰€ä»¥ThreeJSåŠ è½½å®Œæˆ‘ä»¬çš„.jsonæ–‡ä»¶åï¼Œå‘ç°åªæœ‰æ¨¡å‹å´æ²¡æœ‰æè´¨ï¼Œå°±ç»™æ¨¡å‹åŠ ä¸Šäº†ä¸€ä¸ªéšæœºé¢œè‰²çš„æè´¨ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ThreeJSä¸­æ‰‹åŠ¨è´´ä¸Šè´´å›¾å°±å¥½äº†ã€‚è€Œæ›´ç®€å•ä¸”æœ‰æ•ˆçš„åŠæ³•æ˜¯ï¼Œåœ¨å»ºæ¨¡è½¯ä»¶ä¸­ä¸Šå¥½è´´å›¾å†ä¸€èµ·å¯¼å‡ºã€‚</p>
<p>å›åˆ°Blenderä¸­ï¼Œå°†æ´—é¢å¥¶çš„è¡¨é¢è¿›è¡ŒUVå±•å¼€åå¯¼å‡ºå±•å¼€å›¾åï¼Œæˆ‘ä»¬æ–°å»ºä¸€å¼ å›¾ç‰‡ï¼Œå°†æˆ‘ä»¬è¦è´´çš„å›¾æ”¾åˆ°å±•å¼€å›¾ä¸Šçš„ç›¸åº”ä½ç½®ï¼Œå†å›åˆ°Blenderä¸­å°†è¿™å¼ æ–°çš„å›¾ç‰‡è®¾ä¸ºç“¶èº«çš„æè´¨ã€‚æ¸²æŸ“ä¸€ä¸‹ï¼Œæ£€æŸ¥åˆ°æ•ˆæœæ— è¯¯åï¼Œå°†æ¨¡å‹å¯¼å‡ºã€‚è¿™æ¬¡è¦è®°å¾—å°†å·¦ä¸‹è§’çš„Materialså‹¾ä¸Šï¼Œå¦å¤–è¿˜éœ€è¦å‹¾ä¸Štextureçš„å¤é€‰æ¡†ã€‚</p>
<p>å°†è¿™æ¬¡å¯¼å‡ºçš„æ¨¡å‹æ”¾åˆ°å…ˆå‰çš„ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæµè§ˆå™¨ä¸­å¹¶æ²¡æœ‰å‡ºç°æƒ³è±¡ä¸­çš„åœºæ™¯ã€‚åœ¨æ§åˆ¶å°ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰å°†è´´å›¾ä¸€èµ·æ”¾åˆ°ä¸€ä¸ªç›®å½•ä¸‹ï¼Œè´´å›¾åŠ è½½å¤±è´¥äº†ã€‚æŒ‰ç…§è¦æ±‚æ”¾å¥½åï¼Œæˆ‘ä»¬ä¼šæ›´æƒŠå¥‡åœ°å‘ç°ï¼Œæµè§ˆå™¨ä¸­é™¤äº†ä¸€ç‰‡é»‘ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br><img src="//img.aotu.io/Littly/dark.png" alt="ä¸€ç‰‡é»‘"></p>
<blockquote>
<p>ç¥è¯´è¦æœ‰å…‰ï¼Œæ‰€ä»¥å°±æœ‰äº†å…‰ã€‚</p>
</blockquote>
<p>åœ¨3Dçš„ä¸–ç•Œä¸­ï¼Œå…‰æ˜¯éå¸¸é‡è¦çš„å­˜åœ¨ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½çœ‹è§ç‰©ä½“ï¼Œéƒ½æ˜¯å› ä¸ºæœ‰å…‰è¿›å…¥äº†æˆ‘ä»¬çš„çœ¼çƒã€‚é™¤å»æœ¬èº«ä¼šå‘å…‰çš„ç‰©ä½“ï¼Œæˆ‘ä»¬èƒ½çœ‹è§çš„å…¶ä»–çš„ç‰©ä½“ï¼Œéƒ½æ˜¯å› ä¸ºè¿™äº›ç‰©ä½“å°†å¤–ç•Œçš„å…‰åå°„åè¿›å…¥æˆ‘ä»¬çœ¼çƒäº†ã€‚æ¢å¥è¯è¯´ï¼Œæ²¡æœ‰å…‰çš„è¯æˆ‘ä»¬å°±ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚</p>
<p>åœ¨ThreeJSä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¦‚æœæ²¡æœ‰å…‰ï¼Œæˆ‘ä»¬å°±çœ‹ä¸åˆ°è‡ªå‘å…‰ä»¥å¤–çš„æè´¨ï¼Œè§†é‡ä¸­å°†æ˜¯ä¸€ç‰‡é»‘ã€‚åœ¨ThreeJSä¸­ï¼Œå…‰ç…§ä¹Ÿæœ‰å¾ˆå¤šç§ï¼šå…¨å±€å…‰ç…§(AmbientLight),æœ‰å‘å…‰(DirectionalLight)ï¼Œç‚¹å…‰æº(PointLight)ç­‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†360è§‚çœ‹æ•´ä¸ªç‰©ä½“ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå…¨å±€å…‰ç…§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> THREE.AmbientLight( <span class="number">0xffffff</span> );</div><div class="line">scene.add( light );</div></pre></td></tr></table></figure>
<p>å†åˆ·æ–°ä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹è§æˆ‘ä»¬çš„æ´—é¢å¥¶äº†ã€‚å¤§åŠŸå‘Šæˆ!<br><img src="//img.aotu.io/Littly/completed.png" alt="æˆåŠŸ"></p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>è¿›è¡Œ3Då»ºæ¨¡ï¼Œå°†ç‰©ä½“åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºï¼Œç›®å‰å·²ç»æœ‰äº†ä¸å°‘çš„åº”ç”¨ï¼Œæœ‰çš„å…¬å¸åœ¨å®£ä¼ æ–°äº§å“çš„æ—¶å€™ä¼šä½¿ç”¨ä¸Šè¿™æ ·çš„æŠ€æœ¯ï¼Œè®©æ¶ˆè´¹è€…å¯ä»¥åœ¨æµè§ˆå™¨ä¸­äº²è‡ªæŠŠç©äº§å“ï¼Œè§‚å¯Ÿäº§å“çš„æ¯ä¸ªå°è§’è½ï¼Œèµ·åˆ°äº†ä¸é”™çš„æ•ˆæœã€‚åŒæ ·çš„æŠ€æœ¯å¹¶ä¸åªæ˜¯åœ¨å±•ç¤ºå•†å“çš„æ—¶å€™èƒ½ç”¨ä¸Šã€‚å°†é€‚å½“çš„å…¨æ™¯å›¾è´´åœ¨ç«‹æ–¹ä½“çš„å†…è¡¨é¢ï¼Œç”¨æˆ·è§†è§’ç½®äºç«‹æ–¹ä½“ä¸­å¿ƒç‚¹çš„è¯ï¼Œè¿˜å¯ä»¥è®©ç”¨æˆ·æœ‰ç½®èº«å…¶å¢ƒçš„æ„Ÿè§‰ï¼Œå¯ä»¥ä¸Šä¸‹å·¦å³è½¬åŠ¨è§†è§’è§‚å¯Ÿä¸€ä¸ªåœ°ç‚¹å‘¨å›´çš„æ™¯è±¡ï¼Œåšå‡ºè¡—æ™¯çš„æ•ˆæœã€‚å¯ä»¥è¯´ï¼Œæµè§ˆå™¨ä¸­çš„3DæŠ€æœ¯å°†ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯ä¸€ç¯‡ä»‹ç»å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­å±•ç¤º&lt;del style=&quot;background-color: #333!important;color: #333 !important;&quot;&gt;æ´—é¢å¥¶&lt;/del&gt;3Dç‰©ä»¶çš„æ–‡ç« ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="three.js" scheme="https://aotu.io/tags/three-js/"/>
    
  </entry>
  
  <entry>
    <title>ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰</title>
    <link href="https://aotu.io/notes/2015/11/23/css3-animation-to-movie-part_2/"/>
    <id>https://aotu.io/notes/2015/11/23/css3-animation-to-movie-part_2/</id>
    <published>2015-11-23T09:27:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰"><a href="#ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰" class="headerlink" title="ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰"></a>ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰</h1><hr>
<pre><code>æ³¨ï¼šæ­¤æ–‡éå¹²è´§èšé›†åœ°ï¼Œæ¥æ‰¾å¹²è´§çš„å¯¹ä¸ä½äº†ã€‚
æ³¨æ³¨ï¼šåˆå¤šåˆå¤§çš„å›¾é¢„è­¦ï¼ï¼ï¼
</code></pre><p>ä¸Šå›è¯´åˆ°CSS3åŠ¨ç”»ä¸ä¼ ç»ŸåŠ¨ç”»ä¹‹é—´åƒä¸ä¸‡ç¼•çš„è”ç³»ï¼Œç°åœ¨å°±è®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹ç”¨CSS3åŠ¨ç”»åšä¸€éƒ¨åŠ¨ç”»ç”µå½±éƒ½éœ€è¦äº›ä»€ä¹ˆã€‚</p>
<p>ä¸€ã€</p>
<p><strong>é¦–å…ˆä½ éœ€è¦ä¸€ä¸ªæ•…äº‹ã€‚</strong></p>
<p>å³ä½¿åªæ˜¯ä¸€å †é›ªèŠ±å¾€ä¸‹æ‰ï¼Œä¹Ÿæ˜¯åŒ…å«æ•…äº‹çš„â€”â€”ä¸ºä»€ä¹ˆä¸‹é›ªï¼Ÿæ˜¯å†¬å¤©æ¥äº†ï¼Ÿé‚£æ˜¯å†¬å¤©çš„ç¬¬ä¸€åœºé›ªå—ï¼Ÿç¬¬ä¸€åœºé›ªæœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿå¥½å§ä½œä¸ºä¸€ä¸ªä»æ²¡è§è¿‡é›ªçš„å—æ–¹äººæˆ‘æ‰¿è®¤æˆ‘ç»™è‡ªå·±æŒ–äº†ä¸ªå‘ï¼Œä¸è¿‡å°±æ˜¯ç±»ä¼¼è¿™ç§æ€è·¯ï¼Œè®©æˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªæ•…äº‹ï¼Œæ‰€ä»¥ï¼Œå³ä½¿åªæœ‰ä¸€ç§’é’Ÿçš„åŠ¨ç”»ä¹Ÿæ˜¯æœ‰æ•…äº‹çš„ã€‚Use your imagination.</p>
<p>å°tipï¼šåœ¨åšå½±è§†é¢˜æçš„ä¸“é¢˜é¡µæ—¶ï¼Œæˆ‘ä¼šé¦–å…ˆæ ¹æ®ç›¸å…³å½±è§†çš„é¢„å‘Šç‰‡ç¡®å®šå…¥åœºåŠ¨ç”»çš„é£æ ¼ä¸åŸºè°ƒï¼Œè§‚çœ‹é¢„å‘Šç‰‡ä¸ä»…èƒ½å¤Ÿäº†è§£å½±ç‰‡çš„é£æ ¼ï¼ŒåŒæ—¶è¿˜èƒ½å­¦ä¹ å…¶å­—å¹•å‡ºç°ã€æ¶ˆå¤±ä»¥åŠè½¬åœºçš„æ–¹å¼ï¼Œè·å¾—ä¸€ç§èŠ‚å¥æ„Ÿï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„æ—¶é—´æŒæ§ã€‚åœ¨çœ‹ç”µå½±æ­£ç‰‡æ—¶ä¹Ÿå¯ç•™æ„å½±ç‰‡å¼€å¤´ä¸ç»“å°¾å­—å¹•å‡ºç°çš„å½¢å¼ï¼Œå°¤å…¶æ˜¯ç§‘å¹»ç‰‡ï¼Œç”µå½±å­—å¹•çš„è®¾è®¡ä¸ç”µå½±é£æ ¼ç›¸è¾…ç›¸æˆï¼Œå¸¸å¸¸èƒ½è®©ä½ è„‘æ´å¤§å¼€â€”â€”åŸæ¥è¿˜èƒ½è¿™ä¹ˆç©ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/2-1_preview_of_overheard_3.gif" alt="preview_of_overheard_3"></p>
<ul>
<li><a href="http://movie.douban.com/trailer/156598/#content" target="_blank" rel="external">[çªƒå¬é£äº‘3]é¢„å‘Šç‰‡</a>ä¸­å­—å¹•å‡ºç°çš„æ–¹å¼è¡¨ç°å‡ºä¿¡å·å¹²æ‰°çš„æ•ˆæœï¼Œç”±æ­¤å¯ä»¥å°†å½±ç‰‡ç›¸å…³ä¸“é¢˜ä½œå‡ºè¿™æ ·çš„å¼€åœºåŠ¨ç”»â€”â€”</li>
</ul>
<p><img src="//img.aotu.io/lyxuncle/2-2_animation_design_of_overheard_3_broadcast.gif" alt="animation_design_of_overheard_3_broadcast"></p>
<ul>
<li>è§†è§‰è®¾è®¡ï¼šå´ä¸¹æ«</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">keyframes</span> peoInner&#123;</div><div class="line">	0%, 12<span class="selector-class">.5</span>%, 16<span class="selector-class">.5</span>%, 20<span class="selector-class">.5</span>%&#123;<span class="attribute">background</span>:none;&#125;</div><div class="line">	10%, 12%&#123;<span class="attribute">background</span>:<span class="built_in">url</span>(../img_bg/casts_adv_green_red.jpg) no-repeat <span class="number">0</span> <span class="number">0</span>;&#125;</div><div class="line">	14%, 16%&#123;<span class="attribute">background</span>:<span class="built_in">url</span>(../img_bg/casts_adv_green_red.jpg) no-repeat <span class="number">0</span> -<span class="number">725px</span>;&#125;</div><div class="line">	18%, 20%&#123;<span class="attribute">background</span>:<span class="built_in">url</span>(../img_bg/casts_adv_green_red.jpg) no-repeat <span class="number">0</span> -<span class="number">725px</span>;&#125;</div><div class="line">	13%, 17%, 21%, 100%&#123;<span class="attribute">background</span>:<span class="built_in">url</span>(../img_bg/cast_adv_01.jpg) no-repeat top center;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ç®€å•çš„å‡ ä¸ªä¸åŒè‰²è°ƒçš„å›¾ç‰‡è¿›è¡Œæ›¿æ¢å°±èƒ½åšå‡ºç±»ä¼¼æ•ˆæœã€‚ï¼ˆ<a href="http://labs.qiang.it/labs/EC_demo/Doing_Movie_by_CSS3.html" target="_blank" rel="external">demoåœ°å€</a>ï¼‰</li>
</ul>
<p>äºŒã€</p>
<p>å½“æˆ‘ä»¬åœ¨è„‘å†…å°å‰§åœºæ„æ€å¥½åŠ¨ç”»å°æ•…äº‹ä¹‹åï¼ˆå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†å®ƒå†™ä¸‹æ¥ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ<strong>å…³é”®å¸§ä¸æ—¶é—´è½´çš„è®¾è®¡</strong>äº†ã€‚</p>
<blockquote>
<p>ä»»ä½•äººéƒ½å¯ä»¥ç”¨ç”µè„‘åŠ¨ç”»è½¯ä»¶å°†ä¸€ä¸ªç‰©ä½“ç§»åŠ¨ã€‚ä½†æ˜¯å¦‚ä½•èµ‹äºˆç‰©ä½“é‡é‡ã€å¤§å°ã€è§„æ¨¡ã€ç§»åŠ¨å’Œå¹½é»˜æ„Ÿï¼Œè¿™äº›éƒ½ä¸ä½ å¦‚ä½•ç§»åŠ¨ç‰©ä½“ç›¸å…³ã€‚ç”µè„‘ä¸èƒ½ä¸ºåŠ¨ç”»å¸ˆåˆ›é€ åŠ¨ç”»ï¼ŒåŠ¨ç”»å¸ˆä»ç„¶éœ€è¦äº†è§£æ—¶é—´æŒæ¡çš„åŸåˆ™çŸ¥è¯†ä»¥èµ‹äºˆç”µè„‘åŠ¨ç”»ç”Ÿå‘½åŠ›ã€‚ï¼ˆã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹ï¼‰</p>
</blockquote>
<p>è¿™æ—¶éœ€è¦æ³¨æ„çš„æ˜¯å› æœå…³ç³»å¯¹åŠ¨ç”»çš„å½±å“ï¼Œâ€œä¸€ä¸ªåŠ¨ç”»å¸ˆå¿…é¡»æ‡‚å¾—è‡ªç„¶ç•Œç‰©ä½“è¿åŠ¨çš„åŠ›å­¦çŸ¥è¯†â€ï¼Œè¿™æ ·â€œæ‰èƒ½åˆ›é€ æƒ…ç»ªå’Œè¡¨è¾¾æ­£ç¡®çš„æ„Ÿè§‰ã€‚â€æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºäº†ä½¿åŠ¨ç”»æ›´åŠ æµç•…çœŸå®ï¼Œè¿ªå£«å°¼çˆ·çˆ·æƒ³å‡ºäº†ä»€ä¹ˆåŠæ³•ã€‚ï¼»ç™½é›ªå…¬ä¸»ä¸ä¸ƒä¸ªå°çŸ®äººï¼½ä½œä¸º80ã€90ååŠ¨ç”»ç”µå½±å¯è’™ï¼Œä½¿ç”¨äº†ä¸€é¡¹é©æ–°åŠ¨ç”»åˆ¶ä½œçš„æŠ€æœ¯â€”â€”<a href="http://zh.wikipedia.org/wiki/%E8%BD%AC%E6%8F%8F%E6%9C%BA%E6%8A%80%E6%9C%AF" target="_blank" rel="external">è½¬ææœº</a>ã€‚</p>
<ul>
<li>ï¼ˆè§†é¢‘ <a href="http://player.ku6.com/refer/TH-adgFO0MjSKh3i/v.swf" target="_blank" rel="external">http://player.ku6.com/refer/TH-adgFO0MjSKh3i/v.swf</a> ï¼‰</li>
</ul>
<p><img src="//img.aotu.io/lyxuncle/2-4_sidelights_of_snow_white.gif" alt="sidelights_of_snow_white"></p>
<ul>
<li>è§†é¢‘ï¼š[ç™½é›ªå…¬ä¸»ä¸ä¸ƒä¸ªå°çŸ®äºº]ï¼ˆ1974ï¼‰å¹•åèŠ±çµ®</li>
</ul>
<p>è§†é¢‘ä¸­æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œè¿ªå£«å°¼çˆ·çˆ·è®©åŠ¨ç”»å¸ˆæ³¨æ„é‚£ä½å¤§å”åœ¨è·³è¸¢è¸èˆæ—¶é‡åŠ›å¯¹è£¤è…¿çš„ä½œç”¨ï¼ˆ19åˆ†15ç§’ï¼‰ã€‚æ˜¯çš„ï¼Œè¿ªå£«å°¼çˆ·çˆ·å¼ºè°ƒçš„å°±æ˜¯åŠ¨ç”»ä¸ç‰©ç†å­¦çš„å…³ç³»ã€‚å…¶å®å³ä½¿æ˜¯ç½‘é¡µä¸­çš„åŠ¨ç”»ä¹Ÿèƒ½ç”¨åˆ°ç‰›é¡¿è¿åŠ¨å®šå¾‹ï¼Œå°†ç½‘é¡µå…ƒç´ çœ‹ä½œä¸€ä¸ªæœ‰é‡é‡ã€æœ‰ç»“æ„ã€æœ‰æŸ”éŸ§æ€§çš„ç‰©ä½“è¿›è¡ŒåŠ¨ç”»è®¾è®¡ï¼Œä¼šå¾—åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚äº‹å®ä¸Šå·²ç»æœ‰äººè¿™ä¹ˆåšäº†â€”â€”</p>
<p><img src="//img.aotu.io/lyxuncle/2-5_dribbble_form_animation.gif" alt="dribbble_form_animation"></p>
<ul>
<li>dribbbleâ€™s stripe checkoutï¼ˆå›¾ç‰‡æ¥æºï¼š<a href="http://markgeyer.com/pres/the-art-of-ui-animations/#/2/9" target="_blank" rel="external">The Art of Animation</a>ï¼‰</li>
</ul>
<p>Adds a bit of realism to an otherwise static interface. â€”â€”<a href="http://markgeyer.com/pres/the-art-of-ui-animations/#/2/5" target="_blank" rel="external">The 12 basic principles of animation - The Art of Animation</a></p>
<p><img src="//img.aotu.io/lyxuncle/2-6_bouncejs_example.gif" alt="bouncejs_example"></p>
<ul>
<li>å›¾ç‰‡æ¥æºï¼š<a href="https://medium.com/tictail-makers/giving-animations-life-8b20165224c5" target="_blank" rel="external">Giving Animations Life</a></li>
</ul>
<p>Using Bounce.js and classical animation concepts to bring life to user interfaces. â€”â€”<a href="https://medium.com/tictail-makers/giving-animations-life-8b20165224c5" target="_blank" rel="external">Giving Animations Life</a></p>
<p>ä¸‰ã€</p>
<p><strong>ä¸æ–­çš„ä¿®æ”¹ä¸è°ƒæ•´ã€‚</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªéœ€è¦ç»†è‡´ä¸è€å¿ƒçš„è¿‡ç¨‹ï¼Œä½ å¾—åœ¨ä¸æ–­çš„è°ƒæ•´ä¸­ä¿æŒå¤§å±€è§‚ï¼Œé¿å…é™·å…¥ç»†èŠ‚çš„çº ç»“ï¼ŒåŒæ—¶åˆéœ€è¦æœ‰èƒ½å¤Ÿå°†åˆ«æ‰­çš„ç»†èŠ‚è°ƒæ•´å¥½çš„çµæ„Ÿã€‚è¯´ç™½äº†å°±æ˜¯åŒæ—¶æ‹¥æœ‰æ±‰å­çš„ç²—çŠ·ä¸å¦¹å­çš„ç»†è…»ã€‚èŠ‚å¥æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è¦ç´ ï¼Œä¸é“¶å¹•ä¸Šçš„åŠ¨ç”»ç±»ä¼¼ï¼ŒCSS3åŠ¨ç”»åˆ›ä½œè€…çš„æ„å¿µå¿…é¡»å³æ—¶å¹¶å®Œå…¨äº¤ç»™è§‚ä¼—ã€‚</p>
<blockquote>
<p>æ„å¿µæ¸…æ™°æ˜“æ‡‚é ä¸¤ä¸ªå› ç´ ï¼š1ã€å¥½çš„è¡¨ç°æ‰‹æ³•å’Œè®¾è®¡ï¼Œè¦ä½¿æ¯ä¸ªä¸»è¦åŠ¨ä½œèƒ½ä»¥æœ€æ¸…æ¥šå’Œæœ€æœ‰æ•ˆçš„æ–¹å¼å‘ˆç°åœ¨é“¶å¹•ä¸Šã€‚2ã€å¥½çš„æ—¶é—´æŒæ¡ï¼Œè¦æœ‰è¶³å¤Ÿçš„æ—¶é—´å…ˆä½¿ç”¨æˆ·é¢„æ„Ÿåˆ°å°†æœ‰ä»€ä¹ˆäº‹æƒ…å‘ç”Ÿï¼Œç„¶åç”¨äºè¡¨ç°åŠ¨ä½œæœ¬èº«ï¼Œæœ€åè¦æœ‰å¥½çš„æ”¶å°¾ã€‚è¿™ä¸‰è€…ä¸­ï¼Œä»»ä½•ä¸€é¡¹æ‰€å æ—¶é—´å¤ªå¤šï¼Œä¾¿ä¼šæ„Ÿè§‰èŠ‚å¥å¤ªæ…¢ï¼Œç”¨æˆ·ä¼šæ„Ÿåˆ°ä¸è€çƒ¦ï¼ŒåŠ¨ç”»çš„å‡ºç°ä¾¿å¦‚åŒé¸¡è‚‹ã€‚åä¹‹ï¼Œå¦‚æœæ—¶é—´å¤ªçŸ­ï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨æ³¨æ„åˆ°å®ƒä¹‹å‰ï¼ŒåŠ¨ä½œå·²ç»ç»“æŸï¼Œåˆ›ä½œè€…çš„æ„å¿µæœªèƒ½å……åˆ†è¡¨è¾¾ï¼Œå°±æµªè´¹æ‰äº†ã€‚â€”â€”ã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹</p>
</blockquote>
<p>å››ã€</p>
<p>åˆ«å¿˜äº†è¿›è¡Œ<strong>æ€§èƒ½æµ‹è¯•</strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€æ­¥æœ‰å¯èƒ½æ¨ç¿»å‰é¢ä¸¤æ­¥ç”šè‡³ä¸‰æ­¥çš„ä¸€ä¸ªæ­¥éª¤ã€‚ä½†æ˜¯å³ä¾¿å‘ç”Ÿäº†è¿™æ ·çš„äº‹ï¼Œä¹Ÿä¸è¦æ°”é¦ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¹‹å‰åšçš„å‰åŠŸå°½å¼ƒï¼Œåè€Œæ˜¯ä¸ªå®è´µçš„è´¢å¯Œâ€”â€”å¯¹äºæ€§èƒ½çš„æ„Ÿå—åˆå¤šäº†ä¸€æ¬¡ä½“éªŒï¼Œè€Œå…¶ä¸­çš„ä¸€äº›åŠ¨ç”»å¿ƒå¾—æˆ–è®¸ä¸‹æ¬¡ä¹Ÿèƒ½ç”¨ä¸Šã€‚</p>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œä¸€åˆ‡éƒ½æ˜¾å¾—è¾£ä¹ˆæŠ½è±¡ï¼Œä¸‹é¢å°±ä¸Šæ —å­ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/2-7_animation_of_an_eye.gif" alt="animation_of_an_eye"></p>
<ul>
<li>åŠ¨ç”»æ¥æºï¼š<a href="http://tympanus.net/Development/PseudoElementsAnimationsTransitions/index4.html" target="_blank" rel="external">Pseudo-Elements Animations and Transitions</a></li>
</ul>
<p>è¿™æ˜¯ä¸ªä½¿ç”¨äº†æœ€ç®€å•çš„csså±æ€§â€”â€”paddingã€line-heightã€box-shadowâ€”â€”å®ç°äº†ä»¤äººåƒäº†ä¸€æ–¤æ•ˆæœçš„æ —å­ï¼Œå°±åƒä¸€é“è„‘ç­‹æ€¥è½¬å¼¯ä¸€æ ·è®©å¤§å®¶å¯¹CSS3çš„åŠ¨ç”»çš„ç†è§£ä¸æ­¢äºCSS3çš„æ–°å±æ€§ï¼Œæˆ‘ä»¬æ›¾ç»ç”¨çƒ‚çš„CSS2.0å±æ€§åŒæ ·ä¹Ÿèƒ½å¼€å‡ºèŠ±å„¿ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒCSS3åŠ¨ç”»å¹¶ä¸åªæ˜¯ç”±transformã€opacityç­‰ç­‰ç®€å•ç»„æˆï¼Œå®ƒè¿˜å¯ä»¥åŒ…å«è®¸è®¸å¤šå¤šçš„è®¾è®¡ã€æƒ³æ³•ã€ç”šè‡³æ„Ÿæƒ…ã€‚å°ä¸Šä¸€åˆ†é’Ÿï¼Œå°ä¸‹åå¹´åŠŸåœ¨åŠ¨ç”»ä¸Šä¹Ÿé€‚ç”¨ï¼Œæˆ–è®¸åœ¨æ‰€æœ‰äº‹ç‰©ä¸Šéƒ½é€‚ç”¨ã€‚</p>
<p>ç›®å‰ä¸ºæ­¢ç”¨CSS3åŠ¨ç”»æ‹ç”µå½±åªæ˜¯ä¸ªæ¦‚å¿µï¼Œä½†æƒ³è±¡ä¸€ä¸‹ä½ æ˜¯è¿™éƒ¨ç”µå½±çš„å¯¼æ¼”ï¼Œæ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯è°ƒåº¦çš„åœºæ™¯ä¸è§’è‰²ï¼Œç”¨CSS3åŠ¨ç”»æ‹ç”µå½±æ˜¯ä¸æ˜¯ä¹Ÿæ²¡æœ‰é‚£ä¹ˆé¥è¿œäº†ï¼Ÿ</p>
<p>æœ€åï¼Œæˆ‘æƒ³å°†æˆ‘ä¸€ç›´ä»¥æ¥æ²¡èƒ½æ‰¾åˆ°åˆé€‚å®ç°æ–¹æ³•çš„åŠ¨ç”»æ•ˆæœæ”¾ä¸Šæ¥ï¼Œå¸Œæœ›èƒ½å¤ŸæŠ›ç –å¼•ç‰ã€é›†æ€å¹¿ç›Šï¼š</p>
<p><img src="//img.aotu.io/lyxuncle/2-8_frames_of_flame_1.jpg" alt="frames_of_flame_1"></p>
<p><img src="/img/post/lyxuncle/2-9_frames_of_flame_2.jpg" alt="frames_of_flame_2"></p>
<ul>
<li>A å†·ç©ºæ°”ä»ç«çš„åº•éƒ¨å†²å…¥ï¼Œå—çƒ­åä¸Šå‡ã€‚ B ä¸€å¥—ç«çš„å¾ªç¯â‘ -â‘§ï¼Œæ ‡ä»¥Ã—çš„æ¼©æ¶¡ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å‘ä¸Šå‡èµ·ã€‚å‡å¾—è¶Šé«˜ï¼Œé€Ÿåº¦è¶Šæ…¢ã€‚</li>
</ul>
<blockquote>
<p>ç«ç„°çš„åŠ¨ä½œå—ç«çš„ä¸Šéƒ¨æµåŠ¨ç€çš„ç©ºæ°”çš„æ§åˆ¶ã€‚æœ€çƒ­çš„éƒ¨åˆ†åœ¨ç«çš„ä¸­å¤®ï¼Œåœ¨è¿™ä¹‹ä¸Šçƒ­ç©ºæ°”ä¸Šå‡ï¼Œå½“çƒ­ç©ºæ°”ä¸Šå‡æ—¶ï¼Œæ—è¾¹çš„å†·ç©ºæ°”å†²å…¥å–ä»£çƒ­ç©ºæ°”çš„ä½ç½®ã€‚è¿™éƒ¨åˆ†å†·ç©ºæ°”å˜çƒ­ååˆä¸Šå‡ï¼Œè¿™ä¸ªè¿‡ç¨‹é‡å¤ä¸å·²ã€‚ç©ºæ°”çš„æµé€šå¸¸å¸¸ä½¿ç«ç„°æˆä¸ºç²—ç•¥çš„åœ†é”¥å½¢ï¼Œç”±å†·ç©ºæ°”çš„æ¼©æ¶¡å½¢æˆä¸€è¿ä¸²é”¯é½¿çŠ¶ç«ç„°ï¼Œä»ç«çš„åº•éƒ¨å‘é‡Œå’Œå‘ä¸Šç§»åŠ¨ã€‚ï¼ˆã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹ï¼‰</p>
</blockquote>
<p>é™¤äº†ç©ºæ°”ä¸ç«ç„°çš„å…³ç³»å¤–ï¼Œç«ç„°çš„è¿åŠ¨ç”±äºéšæœºæ€§å¾ˆå¤§ï¼Œå¾ªç¯åŠ¨ç”»éœ€è¦å†™å¾—çœ‹ä¸å‡ºåŠ¨ä½œåœ¨å¾ªç¯ä¹Ÿæ˜¯éš¾ç‚¹ä¹‹ä¸€ã€‚å¦‚ä½•æ‰èƒ½åœ¨ä¿è¯ç»“æ„ã€æ€§èƒ½çš„åŒæ—¶åšå‡ºæœ€ä½³çš„ç«ç„°æ•ˆæœï¼Ÿ</p>
<p>æœ€æœ€åï¼Œæ”¾ä¸Šè¿ªå£«å°¼çˆ·çˆ·çš„ä¸€æ®µè¯ï¼Œåœ¨æˆ‘åšåŠ¨ç”»ç”šè‡³åšä»»ä½•äº‹æ—¶å®ƒå°†ä¸æ–­åœ°åœ¨è„‘æµ·ä¸­å›å“ï¼š</p>
<p>æ›¾ç»æœ‰äººé—®è¿ªå£«å°¼ï¼Œ[ç™½é›ªå…¬ä¸»]å¤§å—æ¬¢è¿çš„ç§˜å¯†æ˜¯ä»€ä¹ˆï¼Ÿä»–å›ç­”è¯´ï¼š</p>
<p>â€œæˆ‘ä»¬åªèƒ½ç¡®å®šä¸€ä»¶äº‹ï¼Œæ¯ä¸€ä¸ªäººéƒ½æœ‰ç«¥å¹´ï¼Œæ¯æ¬¡æ‹ä¸€éƒ¨æ–°ç‰‡ï¼Œæˆ‘ä»¬ä¸æ˜¯ä¸ºå¤§äººè€Œæ‹ï¼Œä¹Ÿä¸åªæ˜¯ä¸ºå°å­©å­æ‹ï¼Œæˆ‘ä»¬æ˜¯ä¸ºäº†å”¤é†’æ¯ä¸ªäººå†…å¿ƒæ·±å¤„é‚£ç§æ—©å°±è¢«é—å¿˜çš„çº¯çœŸä¸–ç•Œã€‚â€</p>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ul>
<li><p><a href="http://www.amazon.cn/%E5%8A%A8%E7%94%BB%E7%9A%84%E6%97%B6%E9%97%B4%E6%8E%8C%E6%8F%A1-%E5%93%88%E7%BD%97%E5%BE%B7%E2%80%A2%E5%A8%81%E7%89%B9%E5%85%8B/dp/B0094N5III/ref=sr_1_1?ie=UTF8&amp;qid=1420369719&amp;sr=8-1&amp;keywords=%E5%8A%A8%E7%94%BB%E7%9A%84%E6%97%B6%E9%97%B4%E6%8E%8C%E6%8F%A1" target="_blank" rel="external">ã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ï¼ˆä¿®è®¢ç‰ˆï¼‰ã€‹</a>[è‹±]å“ˆç½—å¾·â€¢å¨ç‰¹å…‹ï¼›[è‹±]çº¦ç¿°â€¢å“ˆæ‹‰æ–¯ï¼›[ç¾]æ±¤å§†â€¢èµ›å›¾</p>
</li>
<li><p><a href="http://markgeyer.com/pres/the-art-of-ui-animations/#/" target="_blank" rel="external">The Art of UI Animations</a> </p>
</li>
</ul>
<h2 id="æ¨èï¼š"><a href="#æ¨èï¼š" class="headerlink" title="æ¨èï¼š"></a>æ¨èï¼š</h2><ul>
<li><p><a href="ttp://isux.tencent.com/css3/tools.html" target="_blank" rel="external">ISUXåŠ¨ç”»å·¥å…·ã€åŠ¨ç”»æ‰‹å†Œ</a></p>
<blockquote>
<p>äº†è§£æ‰€æœ‰ä¸CSS3åŠ¨ç”»ç›¸å…³çš„å±æ€§ï¼Œä½¿ç”¨åŠ¨ç”»å·¥å…·æ›´ç›´è§‚åœ°è°ƒæ•´å˜å½¢ã€‚</p>
</blockquote>
</li>
<li><p><a href="http://minyos.its.rmit.edu.au/aim/a_notes/anim_principles.html" target="_blank" rel="external">12 Principles of Animation</a></p>
<blockquote>
<p>æœ€è¿‘å­˜åœ¨æ„Ÿæå¼ºçš„åŠ¨ç”»12åŸåˆ™ï¼Œå¦‚æœæƒ³è¦åšå‡ºè‡ªç„¶æµç•…çš„CSS3åŠ¨ç”»ï¼Œè¿™ä¸ªç”±è¿ªå£«å°¼åŠ¨ç”»å·¨å¤´æ‰€æ€»ç»“å‡ºçš„ç»å…¸åŸåˆ™ç»å¯¹æ˜¯å¿…è¯»ä¹‹ç‰©ã€‚è¿™é‡Œé™„ä¸Šè§†é¢‘ç‰ˆï¼š<a href="http://vimeo.com/93206523" target="_blank" rel="external">http://vimeo.com/93206523</a></p>
</blockquote>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰&quot;&gt;&lt;a href=&quot;#ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰&quot;&gt;&lt;/a&gt;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆäºŒï¼‰&lt;/h1&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;æ³¨ï¼šæ­¤æ–‡é
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS3" scheme="https://aotu.io/tags/CSS3/"/>
    
      <category term="Animation" scheme="https://aotu.io/tags/Animation/"/>
    
  </entry>
  
  <entry>
    <title>ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰</title>
    <link href="https://aotu.io/notes/2015/11/23/css3-animation-to-movie-part_1/"/>
    <id>https://aotu.io/notes/2015/11/23/css3-animation-to-movie-part_1/</id>
    <published>2015-11-23T09:27:00.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰"><a href="#ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰" class="headerlink" title="ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰"></a>ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰</h1><hr>
<pre><code>æ³¨ï¼šæ­¤æ–‡éå¹²è´§èšé›†åœ°ï¼Œæ¥æ‰¾å¹²è´§çš„å¯¹ä¸ä½äº†ã€‚    
æ³¨æ³¨ï¼šåˆå¤šåˆå¤§çš„å›¾é¢„è­¦ï¼ï¼ï¼
</code></pre><p><a href="http://isux.tencent.com/css3/index.html" target="_blank" rel="external">CSS3åŠ¨ç”»</a>çš„å˜å½¢åŸºç¡€ï¼ˆtransformï¼‰åŒ…å«4ç§å˜å½¢æ–¹å¼ï¼ˆtranslateã€rotateã€scaleã€skewï¼‰ï¼ŒåŒæ—¶è¿˜å¯è®¾ç½®2Dã€3Dã€å˜å½¢åŸç‚¹ï¼ˆtransform-originï¼‰ã€é€è§†ï¼ˆperspectiveï¼‰ã€é€è§†åŸç‚¹ï¼ˆperspective-originï¼‰ç­‰ç­‰ç‰¹æ€§ï¼›åŠ¨ç”»æ—¶é—´é¢‘ç‡åŒ…å«9ç§åŸºæœ¬æ¨¡å¼ï¼ˆeaseã€linearã€ease-inã€ease-outã€ease-in-outã€step-startã€step-endã€stepsï¼‰ï¼Œç”šè‡³è¿˜å¯ä»¥ä½¿ç”¨cubic-bezierå†™å‡ºä»»ä½•ä½ æƒ³è¦çš„æ¨¡å¼ï¼›å†åŠ ä¸ŠåŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆanimation-durationï¼‰ç­‰è®¾å®šï¼Œå„ç§æ’åˆ—ç»„åˆï¼ŒCSS3åŠ¨ç”»ç®€ç›´æ‹¥æœ‰äº†æ•´ä¸ªä¸–ç•Œï¼</p>
<p><img src="//img.aotu.io/lyxuncle/1-1_trandition_animation.png" alt="trandition_animation"></p>
<ul>
<li>å›¾ç‰‡æ¥æºã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹</li>
</ul>
<p>æ ¹æ®<a href="http://zh.wikipedia.org/wiki/%E5%8A%A8%E7%94%BB" target="_blank" rel="external">ç»´åŸº</a>çš„é‡Šä¹‰ï¼ŒåŠ¨ç”»æ˜¯æŒ‡ç”±è®¸å¤šå¸§é™æ­¢çš„ç”»é¢ï¼Œä»¥ä¸€å®šçš„é€Ÿåº¦ï¼ˆå¦‚æ¯ç§’16å¼ ï¼‰è¿ç»­æ’­æ”¾æ—¶ï¼Œè‚‰çœ¼å› è§†è§‰æ®‹è±¡äº§ç”Ÿé”™è§‰ï¼Œè€Œè¯¯ä»¥ä¸ºç”»é¢æ´»åŠ¨çš„ä½œå“ï¼ˆgifå›¾ç‰‡æ­£æ˜¯è¿ç”¨è¿™ç§åŸç†ï¼‰ã€‚å› æ­¤æœ€åˆçš„åŠ¨ç”»æ˜¯é€šè¿‡å‡ å¼ å¿«é€Ÿç¿»åŠ¨çš„è¿ç»­ç”»é¢åˆ¶ä½œè€Œæˆï¼Œè€Œåç»å†äº†ç”µå½±æ‘„å½±æŠ€æœ¯çš„å‡ºç°ã€ç”µè„‘ç§‘æŠ€çš„è¿›æ­¥ï¼Œé€æ¸è½¬å‘æ•°å­—åŒ–ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/1-2_bouncing_ball.gif" alt="bouncing_ball"><br><img src="//img.aotu.io/lyxuncle/1-3_boucing_ball_frames.png" alt="boucing_ball_frames"></p>
<ul>
<li>å°†gifæ‹–å…¥PSä¹‹åæ‰“å¼€æ—¶é—´è½´çª—å£å³å¯çœ‹åˆ°æ¯ä¸€å¸§çš„ç”»é¢</li>
</ul>
<p>æ— è®ºæ˜¯2Dè¿˜æ˜¯3DåŠ¨ç”»ï¼Œå…³é”®å¸§ï¼Œæ­£å¦‚å…¶åï¼Œæ˜¯åŠ¨ç”»åˆ¶ä½œä¸­æœ€å…³é”®çš„éƒ¨åˆ†ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€éš¾æŠŠæ¡çš„éƒ¨åˆ†ã€‚æ›¾ç»æœ‰ä½è®¾è®¡å¸ˆå‘Šè¯‰æˆ‘ï¼Œåœ¨å¤§å­¦çš„ç¬¬ä¸€èŠ‚flashè¯¾çš„è¯¾åä½œä¸šï¼Œè€å¸ˆè¦æ±‚å¤§å®¶ä¸Šäº¤ä¸€ä»½å°çƒåŠ¨ç”»ï¼ŒåŒ…å«æ°”çƒã€çŸ³å¤´çƒä¸çš®çƒï¼Œå¹¶å‘Šè¯‰å¤§å®¶ï¼Œä»¥ç›¸åŒçš„å¤–è§‚è¡¨ç°å‡ºä¸åŒçš„è´¨æ„Ÿæ˜¯åœ¨è€ƒéªŒä½ å¯¹å…³é”®å¸§çš„æ‚Ÿæ€§ï¼Œè€Œè¿™ä¸€ä¸ªä½œä¸šå°±èƒ½ä½“ç°ä½ æ˜¯å¦é€‚åˆå­¦ä¹ åŠ¨ç”»ã€‚</p>
<p><img src="/img/post/lyxuncle/1-4_quality_of_ball.png" alt="quality_of_ball"></p>
<blockquote>
<p>A éœ€è¦å¾ˆå¤§çš„åŠ›æ‰èƒ½ä½¿ä¸€ä¸ªç‚®å¼¹ç§»åŠ¨ã€‚ä¸€æ—¦å®ƒç§»åŠ¨äº†ï¼ŒåŒæ ·éœ€è¦å¾ˆå¤§çš„åŠ›æ‰èƒ½é˜»æŒ¡å®ƒå‰è¿›ã€‚B ä¸€åªæ±½çƒåªéœ€è¦å¾ˆå°çš„åŠ›å»ç§»åŠ¨å®ƒï¼Œä½†ç©ºæ°”é˜»åŠ›ä½¿å®ƒå¾ˆå¿«åœæ­¢åŠ¨ä½œã€‚è¿™ä¸¤ä¸ªä¾‹å­éƒ½ç”»äº†åŠ¨ä½œåˆ†æ ¼çº¿ï¼Œå¯ä»¥çœ‹å‡ºåœ¨é“¶å¹•ä¸Šè¡¨ç°ç‰©ä½“çš„è½»é‡ï¼Œå–å†³äºå¯¹å®ƒä»¬åŠ¨ä½œçš„æ—¶é—´æŒæ¡ã€‚ï¼ˆå›¾ç‰‡æ¥æºï¼šã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹ï¼‰</p>
</blockquote>
<p>åœ¨<a href="http://cghappening.blogspot.com/2011/02/blog-post_23.html" target="_blank" rel="external">ã€Šå‹•ç•«è£½ä½œæµç¨‹ä»‹ç´¹ã€‹</a>æä¾›çš„è§†é¢‘ä¸­å¯ä»¥çœ‹åˆ°å…³é”®å¸§åœ¨åŠ¨ç”»åˆ¶ä½œä¸­æ‰€èµ·çš„åœ°åŸºèˆ¬çš„ä½œç”¨ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/1-5_story_board_of_Monster_Inc.gif" alt="story_board_of_Monster_Inc"></p>
<ul>
<li>ç”»é¢ä¸Šæ–¹çš„æ‰‹ç»˜å›¾å³ä¸º[æ€ªç‰©å…¬å¸]çš„å…³é”®å¸§</li>
</ul>
<p>ä¸å…³é”®å¸§ç´§å¯†å…³è”çš„å³ä¸ºæ—¶é—´è½´ï¼ˆæˆ–æ‘„åˆ¶è¡¨ï¼‰ï¼Œæ—¶é—´è½´æ˜¯è¡¥é½ä¸­é—´å¸§ä¸å¯æˆ–ç¼ºçš„ä¸€é¡¹ï¼Œåœ¨ä¼ ç»ŸåŠ¨ç”»åˆ¶ä½œä¸­ï¼Œå¯¼æ¼”å°±æ˜¯é€šè¿‡åˆ¶å®šæ—¶é—´è½´æ¥æŒæ§æ•´éƒ¨åŠ¨ç”»çš„èŠ‚å¥ã€‚</p>
<p><img src="//img.aotu.io/lyxuncle/1-6_continuity.jpg" alt="continuity"></p>
<ul>
<li>æ‘„åˆ¶è¡¨ï¼ˆå›¾ç‰‡æ¥æºï¼šã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ã€‹ï¼‰</li>
</ul>
<p>åœ¨CSS3ä¸­ï¼Œ@keyframesæ­£æ˜¯åŠ¨ç”»çš„å…³é”®å¸§å®¹å™¨ã€‚@keyframesä¸­åŒ…å«çš„åŒ…æ‹¬transformåœ¨å†…çš„å…ƒç´ å½¢æ€è®¾å®šæ„æˆäº†å…³é”®å¸§çš„ç”»é¢ã€‚@keyframesä¸­çš„ç™¾åˆ†æ¯”å³ä¸ºæ—¶é—´è½´çš„ä½“ç°ã€‚ä¸­é—´å¸§åˆ™ç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼ˆå°±åƒflashä¸­çš„è¡¥å…¨åŠ¨ç”»ï¼‰ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.people</span>&#123;<span class="attribute">animation</span>:people linear <span class="number">1.5s</span>;&#125;</div><div class="line">@<span class="keyword">keyframes</span> people&#123;</div><div class="line">	0%, 95%&#123;<span class="attribute">opacity</span>:<span class="number">0</span>;&#125;</div><div class="line">	100%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/lyxuncle/1-7_css3_animation_2.png" alt="css3_animation"></p>
<ul>
<li>ä¸€ä¸ªç®€å•çš„åŠ¨ç”»å…³é”®å¸§ç¤ºä¾‹</li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†CSS3åŠ¨ç”»çš„ç»“æ„ä¸ä¼ ç»ŸåŠ¨ç”»ä¹‹é—´çš„å…³ç³»ï¼Œé‡ç‚¹æ¥äº†ï¼Œ CSS3åŠ¨ç”»å¯ä»¥åšå‡ºä¸€éƒ¨åŠ¨ç”»ç”µå½±å—ï¼Ÿæ¬²çŸ¥è¯¦æƒ…ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ul>
<li><a href="http://www.amazon.cn/%E5%8A%A8%E7%94%BB%E7%9A%84%E6%97%B6%E9%97%B4%E6%8E%8C%E6%8F%A1-%E5%93%88%E7%BD%97%E5%BE%B7%E2%80%A2%E5%A8%81%E7%89%B9%E5%85%8B/dp/B0094N5III/ref=sr_1_1?ie=UTF8&amp;qid=1420369719&amp;sr=8-1&amp;keywords=%E5%8A%A8%E7%94%BB%E7%9A%84%E6%97%B6%E9%97%B4%E6%8E%8C%E6%8F%A1" target="_blank" rel="external">ã€ŠåŠ¨ç”»çš„æ—¶é—´æŒæ¡ï¼ˆä¿®è®¢ç‰ˆï¼‰ã€‹</a>[è‹±]å“ˆç½—å¾·â€¢å¨ç‰¹å…‹ï¼›[è‹±]çº¦ç¿°â€¢å“ˆæ‹‰æ–¯ï¼›[ç¾]æ±¤å§†â€¢èµ›å›¾</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰&quot;&gt;&lt;a href=&quot;#ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰&quot;&gt;&lt;/a&gt;ä»¥ç”µå½±ä¹‹çœ¼çœ‹CSS3åŠ¨ç”»ï¼ˆä¸€ï¼‰&lt;/h1&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;æ³¨ï¼šæ­¤æ–‡é
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS3" scheme="https://aotu.io/tags/CSS3/"/>
    
      <category term="Animation" scheme="https://aotu.io/tags/Animation/"/>
    
  </entry>
  
  <entry>
    <title>SVG I Know</title>
    <link href="https://aotu.io/notes/2015/11/20/svg-I-know/"/>
    <id>https://aotu.io/notes/2015/11/20/svg-I-know/</id>
    <published>2015-11-20T03:30:45.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡"><a href="#ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡" class="headerlink" title="ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡"></a>ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡</h2><h3 id="SVGç®€ä»‹"><a href="#SVGç®€ä»‹" class="headerlink" title="SVGç®€ä»‹"></a>SVGç®€ä»‹</h3><p>SVGå³Scalable Vector Graphicså¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼Œä½¿ç”¨XMLæ ¼å¼å®šä¹‰å›¾å½¢ã€‚<br>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>SVGä¸å…¶ä»–å›¾ç‰‡æ ¼å¼ç›¸æ¯”ï¼šä¸»è¦ä¼˜åŠ¿åœ¨äºå¯ç¼©æ”¾çš„åŒæ—¶ä¸ä¼šå½±å“å›¾ç‰‡çš„è´¨é‡ã€‚</li>
<li>ä¸flashç›¸æ¯” ï¼šSVG æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä¸å…¶ä»–æ ‡å‡†ï¼ˆæ¯”å¦‚ XSL å’Œ DOMï¼‰ç›¸å…¼å®¹ã€‚è€Œ Flash åˆ™æ˜¯æœªå¼€æºçš„ç§æœ‰æŠ€æœ¯ã€‚</li>
</ul>
<h3 id="SVG-in-HTMLå¸¸ç”¨æ–¹æ³•"><a href="#SVG-in-HTMLå¸¸ç”¨æ–¹æ³•" class="headerlink" title="SVG in HTMLå¸¸ç”¨æ–¹æ³•"></a>SVG in HTMLå¸¸ç”¨æ–¹æ³•</h3><h4 id="ä½¿ç”¨-lt-img-gt-å…ƒç´ æ¥åµŒå…¥SVGå›¾åƒ"><a href="#ä½¿ç”¨-lt-img-gt-å…ƒç´ æ¥åµŒå…¥SVGå›¾åƒ" class="headerlink" title="ä½¿ç”¨&lt;img&gt;å…ƒç´ æ¥åµŒå…¥SVGå›¾åƒ"></a>ä½¿ç”¨&lt;img&gt;å…ƒç´ æ¥åµŒå…¥SVGå›¾åƒ</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://www.w3school.com.cn/svg/rect1.svg"</span>  <span class="attr">width</span>=<span class="string">"300"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h4 id="å°†SVGå›¾åƒä½œä¸ºèƒŒæ™¯å›¾åƒåµŒå…¥"><a href="#å°†SVGå›¾åƒä½œä¸ºèƒŒæ™¯å›¾åƒåµŒå…¥" class="headerlink" title="å°†SVGå›¾åƒä½œä¸ºèƒŒæ™¯å›¾åƒåµŒå…¥"></a>å°†SVGå›¾åƒä½œä¸ºèƒŒæ™¯å›¾åƒåµŒå…¥</h4><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">background: url('http://www.w3school.com.cn/svg/rect1.svg') no-repeat;</div></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨svgå…ƒç´ ï¼Œé€šè¿‡ä»£ç å°†SVGå›¾åƒåµŒå…¥åˆ°HTMLä»£ç ä¸­"><a href="#ä½¿ç”¨svgå…ƒç´ ï¼Œé€šè¿‡ä»£ç å°†SVGå›¾åƒåµŒå…¥åˆ°HTMLä»£ç ä¸­" class="headerlink" title="ä½¿ç”¨svgå…ƒç´ ï¼Œé€šè¿‡ä»£ç å°†SVGå›¾åƒåµŒå…¥åˆ°HTMLä»£ç ä¸­"></a>ä½¿ç”¨svgå…ƒç´ ï¼Œé€šè¿‡ä»£ç å°†SVGå›¾åƒåµŒå…¥åˆ°HTMLä»£ç ä¸­</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"20"</span> <span class="attr">y</span>=<span class="string">"20"</span> <span class="attr">width</span>=<span class="string">"250"</span> <span class="attr">height</span>=<span class="string">"250"</span></span></div><div class="line"><span class="attr">style</span>=<span class="string">"fill:#fecdddd;"</span>/&gt;</div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="svg-sprites"><a href="#svg-sprites" class="headerlink" title="svg sprites"></a>svg sprites</h3><p>svg spritesç±»ä¼¼äºcss spritesï¼Œå°†å„ä¸ªsvgåˆå¹¶åœ¨ä¸€èµ·ã€‚<br>æœ€ä¸»è¦çš„ä¼˜ç‚¹å°±æ˜¯èƒ½å‡å°‘é¡µé¢çš„åŠ è½½æ—¶é—´ï¼Œä¼˜åŒ–å¼€å‘æµç¨‹ï¼Œä»¥åŠä¿æŒé¡µé¢ä¸­å›¾ç‰‡å…ƒç´ çš„ä¸€è‡´æ€§ã€‚<br>å®è·µä¸­æˆ‘ä»¬å¯ä»¥æŠŠæ•´å—çš„svgæ”¾åœ¨headå¤´éƒ¨ï¼Œ å› æ­¤å¯ä»¥åœ¨ä¸€å¤„åœ°æ–¹æ›´æ–°svgå³å¯ï¼Œè€Œä¸æ˜¯è®©svgçš„ä»£ç å—æ•£è½åœ¨æ–‡æ¡£çš„å„ä¸ªåœ°æ–¹ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>svg<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">svg</span> <span class="attr">version</span>=<span class="string">"1.1"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> <span class="attr">width</span>=<span class="string">"32"</span> <span class="attr">height</span>=<span class="string">"158"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 32 158"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- SVGç­‰çœç•¥  --&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>åœ¨è¿™é‡Œ<a href="https://icomoon.io/app/#/select" target="_blank" rel="external">https://icomoon.io/app/#/select</a>å¯ä»¥è®¾ç½®spritesï¼Œå¯ä»¥è‡ªå·±å¯¼å…¥svgã€‚</p>
<p><img src="//img.aotu.io/Newcandy/svgSprite.jpg" alt="svg sprite"></p>
<h3 id="symbol-use"><a href="#symbol-use" class="headerlink" title="symbol+use"></a>symbol+use</h3><p>åœ¨headå¤´éƒ¨çš„svgä¸­ä½¿ç”¨symbolå…ƒç´ ï¼Œå¹¶ä½¿ç”¨idå±æ€§ã€‚å…¶ä¸­symbolç±»ä¼¼flashä¸­çš„å…ƒä»¶ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"icon-truck"</span> <span class="attr">width</span>=<span class="string">"32"</span> <span class="attr">height</span>=<span class="string">"32"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 32 32"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"126"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">symbol</span> <span class="attr">id</span>=<span class="string">"truck"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#fff"</span> <span class="attr">d</span>=<span class="string">"M24.832 11.445c-0.186-0.278-0.498-0.445-0.832-0.445h-1c-0.553 0-1 0.447-1 1v6c0 0.553 0.447 1 1 1h4c0.553 0 1-0.447 1-1v-1.5c0-0.197-0.059-0.391-0.168-0.555l-3-4.5zM27 18h-4v-6h1l3 4.5v1.5zM31.496 15.336l-4-6c-0.558-0.837-1.492-1.336-2.496-1.336h-4v-2c0-1.654-1.346-3-3-3h-15c-1.654 0-3 1.346-3 3v11c0 1.654 1.346 3 3 3v0 3c0 1.654 1.346 3 3 3h1.142c0.447 1.721 2 3 3.859 3 1.857 0 3.41-1.279 3.857-3h5.282c0.447 1.721 2 3 3.859 3 1.857 0 3.41-1.279 3.857-3h1.144c1.654 0 3-1.346 3-3v-6c0-0.594-0.174-1.17-0.504-1.664zM3 18c-0.552 0-1-0.447-1-1v-11c0-0.553 0.448-1 1-1h15c0.553 0 1 0.447 1 1v11c0 0.553-0.447 1-1 1h-15zM11.001 27c-1.105 0-2-0.896-2-2s0.895-2 2-2c1.104 0 2 0.896 2 2s-0.897 2-2 2zM24 27c-1.105 0-2-0.896-2-2s0.895-2 2-2c1.104 0 2 0.896 2 2s-0.896 2-2 2zM30 23c0 0.553-0.447 1-1 1h-1.143c-0.447-1.721-2-3-3.857-3-1.859 0-3.412 1.279-3.859 3h-5.282c-0.447-1.721-2-3-3.857-3-1.859 0-3.412 1.279-3.859 3h-1.143c-0.552 0-1-0.447-1-1v-3h13c1.654 0 3-1.346 3-3v-7h4c0.334 0 0.646 0.167 0.832 0.445l4 6c0.109 0.164 0.168 0.358 0.168 0.555v6z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨éœ€è¦ç”¨åˆ°è¿™ä¸ªå…ƒä»¶çš„åœ°æ–¹ä½¿ç”¨useå…ƒç´ å¼•ç”¨å…ƒä»¶ã€‚å…¶ä¸­xlink:href=â€#truckâ€ç›¸å½“äºå…ƒä»¶çš„é“¾æ¥ï¼Œé€šè¿‡å¼•ç”¨å…ƒä»¶çš„idæ¥å®ç°ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#truck"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"0"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h3><p><img src="//img.aotu.io/Newcandy/svgImage1.png" alt="svgå…¼å®¹æ€§"></p>
<p>å…¼å®¹æ€§è¯¦ç»†æƒ…å†µè¯·ç‚¹å‡» <a href="http://caniuse.com/#search=svg" target="_blank" rel="external">æ­¤å¤„</a></p>
<h3 id="æ€»ç»“æ€è€ƒ"><a href="#æ€»ç»“æ€è€ƒ" class="headerlink" title="æ€»ç»“æ€è€ƒ"></a>æ€»ç»“æ€è€ƒ</h3><p>ä¸€èˆ¬åœ¨htmlä¸­ä½¿ç”¨SVGæœ‰ä¸‰ç§æ–¹æ³•ï¼šä½¿ç”¨&lt;img&gt;å…ƒç´ æ¥åµŒå…¥SVGå›¾åƒï¼›å°†SVGå›¾åƒä½œä¸ºèƒŒæ™¯å›¾åƒåµŒå…¥ï¼›ä½¿ç”¨&lt;svg&gt;å…ƒç´ ï¼Œé€šè¿‡ä»£ç å°†SVGå›¾åƒåµŒå…¥åˆ°HTMLä»£ç ä¸­ã€‚<br>ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯é€šè¿‡svg spritesæé«˜æ€§èƒ½ï¼Œé€šè¿‡symbolä»¥åŠuseå…ƒç´ æé«˜æ–‡æ¡£çš„å¯ç»´æŠ¤æ€§ç­‰ã€‚</p>
<h2 id="ç¬¬äºŒç« ï¼šSVGå½¢çŠ¶"><a href="#ç¬¬äºŒç« ï¼šSVGå½¢çŠ¶" class="headerlink" title="ç¬¬äºŒç« ï¼šSVGå½¢çŠ¶"></a>ç¬¬äºŒç« ï¼šSVGå½¢çŠ¶</h2><h3 id="çŸ©å½¢-lt-rect-gt"><a href="#çŸ©å½¢-lt-rect-gt" class="headerlink" title="çŸ©å½¢ &lt;rect&gt;"></a>çŸ©å½¢ &lt;rect&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"20"</span> <span class="attr">y</span>=<span class="string">"20"</span> <span class="attr">rx</span>=<span class="string">"20"</span> <span class="attr">ry</span>=<span class="string">"20"</span> <span class="attr">width</span>=<span class="string">"250"</span> <span class="attr">height</span>=<span class="string">"100"</span> <span class="attr">style</span>=<span class="string">"fill:red;stroke:black; stroke-width:5;opacity:0.5"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p>è§£é‡Šï¼šxä¸ºxåæ ‡ï¼Œyä¸ºyåæ ‡ï¼›width å’Œ height åˆ†åˆ«ä¸ºå½¢çŠ¶çš„é«˜åº¦å’Œå®½åº¦ï¼›rx å’Œ ry å±æ€§å¯ä½¿çŸ©å½¢äº§ç”Ÿåœ†è§’ã€‚<br>å¦å¤–ï¼Œä¸‹é¢ä¸‰ä¸ªå±æ€§æ˜¯æ–‡ç« åé¢ä¼šç”¨åˆ°çš„ï¼Œä¹‹åä¸ä¼šè¿‡å¤šè®²è¿°ï¼š</p>
<ul>
<li>fill å±æ€§å®šä¹‰å½¢çŠ¶çš„å¡«å……é¢œè‰²</li>
<li>stroke å±æ€§å®šä¹‰å›¾å½¢è¾¹æ¡†çš„é¢œè‰²</li>
<li>stroke-width å±æ€§å®šä¹‰å½¢çŠ¶è¾¹æ¡†çš„å®½åº¦</li>
</ul>
<h3 id="åœ†å½¢-lt-circle-gt"><a href="#åœ†å½¢-lt-circle-gt" class="headerlink" title="åœ†å½¢ &lt;circle&gt;"></a>åœ†å½¢ &lt;circle&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">"100"</span> <span class="attr">cy</span>=<span class="string">"50"</span> <span class="attr">r</span>=<span class="string">"40"</span> <span class="attr">stroke</span>=<span class="string">"black"</span> <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">fill</span>=<span class="string">"red"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p> è§£é‡Šï¼šcx å’Œ cyåˆ†åˆ«ä¸ºåœ†ç‚¹çš„ x å’Œ y åæ ‡ï¼›rä¸ºåŠå¾„ã€‚</p>
<h3 id="æ¤­åœ†-lt-ellipse-gt"><a href="#æ¤­åœ†-lt-ellipse-gt" class="headerlink" title="æ¤­åœ†&lt;ellipse&gt;"></a>æ¤­åœ†&lt;ellipse&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">"300"</span> <span class="attr">cy</span>=<span class="string">"150"</span> <span class="attr">rx</span>=<span class="string">"200"</span> <span class="attr">ry</span>=<span class="string">"80"</span> <span class="attr">style</span>=<span class="string">"fill:rgb(200,100,50); stroke:rgb(0,0,100);stroke-width:2"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p>è§£é‡Šï¼šcx åœ†ç‚¹çš„ x åæ ‡ï¼Œcy åœ†ç‚¹çš„ y åæ ‡ï¼›rx æ°´å¹³åŠå¾„ï¼Œry å‚ç›´åŠå¾„ã€‚</p>
<h3 id="çº¿-lt-line-gt"><a href="#çº¿-lt-line-gt" class="headerlink" title="çº¿&lt;line&gt;"></a>çº¿&lt;line&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">"0"</span> <span class="attr">y1</span>=<span class="string">"0"</span> <span class="attr">x2</span>=<span class="string">"300"</span> <span class="attr">y2</span>=<span class="string">"300"</span> <span class="attr">style</span>=<span class="string">"stroke:rgb(99,99,99);stroke-width:2"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p> è§£é‡Šï¼š(x1,y1)ä¸ºçº¿æ¡çš„å¼€å§‹åæ ‡ï¼›(x2,y2)ä¸ºçº¿æ¡çš„ç»“æŸåæ ‡ã€‚</p>
<h3 id="æŠ˜çº¿-lt-polyline-gt"><a href="#æŠ˜çº¿-lt-polyline-gt" class="headerlink" title="æŠ˜çº¿&lt;polyline&gt;"></a>æŠ˜çº¿&lt;polyline&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">"0,0 0,20 20,20 20,40 40,40 40,60"</span> <span class="attr">style</span>=<span class="string">"fill:white;stroke:red;stroke-width:2"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p> è§£é‡Šï¼špoints å±æ€§å®šä¹‰å¤šè¾¹å½¢æ¯ä¸ªè§’çš„ x å’Œ y åæ ‡ã€‚ä¸ºäº†å¯è¯»æ€§ï¼Œå»ºè®®xä¸yåæ ‡ç”¨é€—å·åˆ†å¼€ï¼Œæ¯ä¸ªè§’ä¹‹é—´çš„åæ ‡ç”¨ç©ºæ ¼åˆ†å¼€ã€‚</p>
<h3 id="å¤šè¾¹å½¢-lt-polygon-gt"><a href="#å¤šè¾¹å½¢-lt-polygon-gt" class="headerlink" title="å¤šè¾¹å½¢&lt;polygon&gt;"></a>å¤šè¾¹å½¢&lt;polygon&gt;</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">"220,100 300,210 170,250"</span> <span class="attr">style</span>=<span class="string">"fill:#cccccc; stroke:#000000;stroke-width:1"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p> è§£é‡Šï¼špoints å±æ€§å®šä¹‰å¤šè¾¹å½¢æ¯ä¸ªè§’çš„ x å’Œ y åæ ‡ã€‚</p>
<h3 id="è·¯å¾„-lt-path-gt"><a href="#è·¯å¾„-lt-path-gt" class="headerlink" title="è·¯å¾„&lt;path&gt;"></a>è·¯å¾„&lt;path&gt;</h3><p>ç›´çº¿æŒ‡ä»¤ï¼š<br>M = moveto<br>L = lineto<br>H = horizontal lineto<br>V = vertical lineto<br>Z = closepath<br>æ³¨é‡Šï¼šä»¥ä¸Šæ‰€æœ‰å‘½ä»¤å‡å…è®¸å°å†™å­—æ¯ã€‚å¤§å†™è¡¨ç¤ºç»å¯¹å®šä½ï¼Œå°å†™è¡¨ç¤ºç›¸å¯¹å®šä½ã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M250 150 L150 350 L350 350 Z"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>è§£é‡Šï¼šè¯¥è·¯å¾„å¼€å§‹äºä½ç½® 250 150ï¼Œåˆ°è¾¾ä½ç½® 150 350ï¼Œç„¶åä»é‚£é‡Œå¼€å§‹åˆ° 350 350ï¼Œæœ€ååœ¨ 250 150 å…³é—­è·¯å¾„ã€‚<br>ç”±äºç»˜åˆ¶è·¯å¾„çš„å¤æ‚æ€§ï¼Œå»ºè®®ä½¿ç”¨ SVG ç¼–è¾‘å™¨æ¥åˆ›å»ºå¤æ‚çš„å›¾å½¢ã€‚</p>
<h4 id="svgçš„è´å¡å°”æ›²çº¿"><a href="#svgçš„è´å¡å°”æ›²çº¿" class="headerlink" title="svgçš„è´å¡å°”æ›²çº¿"></a>svgçš„è´å¡å°”æ›²çº¿</h4><p>è´å¡å°”æ›²çº¿æŒ‡ä»¤ï¼š<br>C = curveto<br>S = smooth curveto<br>Q = quadratic Belzier curve<br>T = smooth quadratic Belzier curveto<br>è´å¡å°”æ›²çº¿æ§åˆ¶å°å·¥å…·<a href="http://dayu.pw/svgcontrol/" target="_blank" rel="external">http://dayu.pw/svgcontrol/</a>ï¼Œæ“æ§å¤šæ¬¡å¯åŠ æ·±å¯¹è´å¡å°”æ›²çº¿çš„ç†è§£ã€‚</p>
<p><img src="//img.aotu.io/Newcandy/svgImage2.png" alt="ä¸‰æ¬¡è´å¡å°”æ›²çº¿æ§åˆ¶"></p>
<p><img src="//img.aotu.io/Newcandy/svgImage3.png" alt="ä¸‰æ¬¡è´å¡å°”æ›²çº¿æ§åˆ¶"></p>
<p>CSQTæ¯”è¾ƒéš¾è®°ï¼Œè”æƒ³è®°å¿†æ³•â€œå•æ‰€åˆ‡å›¾(CSQT)â€å°±æ¯”è¾ƒå®¹æ˜“è®°ä½äº†ã€‚<br>å•æ‰€æ˜¯3Dç©ºé—´ï¼Œæ‰€ä»¥CSæ˜¯ä¸‰æ¬¡æ›²çº¿å™¢ï¼Œåˆ‡å›¾æ˜¯å¹³é¢å›¾ï¼Œæ‰€ä»¥æ˜¯äºŒæ¬¡æ›²çº¿ï¼Œå¾ˆå¥½è®°ã€‚</p>
<h5 id="Cä¸‰æ¬¡è´å¡å°”æ›²çº¿"><a href="#Cä¸‰æ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="Cä¸‰æ¬¡è´å¡å°”æ›²çº¿"></a>Cä¸‰æ¬¡è´å¡å°”æ›²çº¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)</div></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªåæ ‡(x,y)è¡¨ç¤ºçš„æ˜¯æ›²çº¿çš„ç»ˆç‚¹ï¼Œå¦å¤–ä¸¤ä¸ªåæ ‡æ˜¯æ§åˆ¶ç‚¹ï¼Œ(x1,y1)æ˜¯èµ·ç‚¹çš„æ§åˆ¶ç‚¹ï¼Œ(x2,y2)æ˜¯ç»ˆç‚¹çš„æ§åˆ¶ç‚¹ã€‚å°å†™æŒ‡ä»¤cè¡¨ç¤ºç›¸å¯¹åæ ‡ã€‚</p>
<h5 id="Så…‰æ»‘ä¸‰æ¬¡è´å¡å°”æ›²çº¿"><a href="#Så…‰æ»‘ä¸‰æ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="Så…‰æ»‘ä¸‰æ¬¡è´å¡å°”æ›²çº¿"></a>Så…‰æ»‘ä¸‰æ¬¡è´å¡å°”æ›²çº¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">S x2 y2, x y (or s dx2 dy2, dx dy)</div></pre></td></tr></table></figure>
<p>ä¹‹æ‰€ä»¥Så‘½ä»¤æ²¡æœ‰x1 y1ï¼Œæ˜¯å› ä¸ºSå‘½ä»¤è·Ÿåœ¨Cå‘½ä»¤åï¼Œx1 y1é»˜è®¤æ˜¯Cå‘½ä»¤çš„ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„å¯¹ç§°ç‚¹ï¼Œå¦‚ä¸‹å›¾è“è‰²çº¿æ¡æ‰€ç¤ºã€‚<br><img src="//img.aotu.io/Newcandy/svgImage4.png" alt="å…‰æ»‘ä¸‰æ¬¡è´å¡å°”æ›²çº¿æ§åˆ¶"></p>
<p>å¦‚æœå‰é¢æ²¡æœ‰Cå‘½ä»¤ï¼Œå³Så‘½ä»¤å•ç‹¬ä½¿ç”¨æ—¶ï¼ŒSå‘½ä»¤ç”»å‡ºæ¥çš„æ˜¯äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼Œå› ä¸ºx1 y1å’Œx2 y2é»˜è®¤æ˜¯åŒä¸€ä¸ªæ§åˆ¶ç‚¹äº†ã€‚</p>
<h5 id="QäºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#QäºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="QäºŒæ¬¡è´å¡å°”æ›²çº¿"></a>QäºŒæ¬¡è´å¡å°”æ›²çº¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Q x1 y1, x y (or q dx1 dy1, dx dy)</div></pre></td></tr></table></figure>
<h5 id="Tå…‰æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#Tå…‰æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="Tå…‰æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿"></a>Tå…‰æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">T x y (or t dx dy)</div></pre></td></tr></table></figure>
<p>Tå‘½ä»¤çš„æ§åˆ¶ç‚¹é»˜è®¤æ˜¯å‰é¢Cå‘½ä»¤çš„æ§åˆ¶ç‚¹çš„å¯¹ç§°ç‚¹ã€‚<br><img src="//img.aotu.io/Newcandy/svgImage5.png" alt="å…‰æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿æ§åˆ¶"></p>
<p>å¦‚æœTå‘½ä»¤å‰é¢æ²¡æœ‰Cå‘½ä»¤ï¼Œå³Tå‘½ä»¤å•ç‹¬ä½¿ç”¨æ—¶ï¼ŒTå‘½ä»¤ç”»å‡ºæ¥çš„æ˜¯ç›´çº¿ã€‚</p>
<h3 id="æ€»ç»“æ€è€ƒ-1"><a href="#æ€»ç»“æ€è€ƒ-1" class="headerlink" title="æ€»ç»“æ€è€ƒ"></a>æ€»ç»“æ€è€ƒ</h3><p>è·¯å¾„æ¯”åŸºæœ¬å½¢çŠ¶æ›´å¼ºå¤§ã€æ›´çµæ´»ã€‚ä½¿ç”¨è·¯å¾„ç»˜åˆ¶å¤æ‚å›¾å½¢æ¯”è¾ƒéº»çƒ¦ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬æ¥ç»˜åˆ¶å›¾å½¢çš„æ•ˆæœå¤§å¤šæ•°æ—¶å€™å¾ˆèµï¼Œä¸€èˆ¬å…¶ä»–åŸºæœ¬å›¾å½¢æ˜¯åšä¸æ¥çš„ã€‚</p>
<h2 id="ç¬¬ä¸‰ç« ï¼šSVGåŠ¨ç”»"><a href="#ç¬¬ä¸‰ç« ï¼šSVGåŠ¨ç”»" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šSVGåŠ¨ç”»"></a>ç¬¬ä¸‰ç« ï¼šSVGåŠ¨ç”»</h2><hr>
<h3 id="svgè·¯å¾„åŠ¨ç”»"><a href="#svgè·¯å¾„åŠ¨ç”»" class="headerlink" title="svgè·¯å¾„åŠ¨ç”»"></a>svgè·¯å¾„åŠ¨ç”»</h3><p>DEMO:<br><img src="//img.aotu.io/Newcandy/svgTruck.gif" alt="è·¯å¾„åŠ¨ç”»"></p>
<p>gå…ƒç´ æ˜¯ç”¨äºæŠŠç›¸å…³å…ƒç´ è¿›è¡Œç»„åˆçš„å®¹å™¨å…ƒç´ ã€‚animateMotionä½¿å…ƒç´ æ²¿ç€åŠ¨ä½œè·¯å¾„ç§»åŠ¨ï¼Œä¸”è¯¥è·¯å¾„ä¸å¯è§ï¼Œpathå®šä¹‰çš„æ˜¯å¯è§çš„è·¯å¾„ã€‚rotate=â€autoâ€ä½¿å…ƒç´ ç§»åŠ¨å¾—æ›´åŠ è‡ªç„¶ï¼Œä¼šéšç€è·¯å¾„æ—‹è½¬ä¸€å®šçš„è§’åº¦ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"1500"</span> <span class="attr">height</span>=<span class="string">"150"</span> <span class="attr">class</span>=<span class="string">"truck"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">g</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> <span class="attr">xlink:href</span>=<span class="string">"#truck"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">animateMotion</span> <span class="attr">path</span>=<span class="string">"M0 0 C135.5 68 463.5 -8 700 29 S1000 -20 1940,70"</span> <span class="attr">begin</span>=<span class="string">"-3s"</span> <span class="attr">dur</span>=<span class="string">"10s"</span> <span class="attr">rotate</span>=<span class="string">"auto"</span> <span class="attr">repeatCount</span>=<span class="string">"indefinite"</span>&gt;</span><span class="tag">&lt;/<span class="name">animateMotion</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">g</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">g</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> <span class="attr">xlink:href</span>=<span class="string">"#truck"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">animateMotion</span> <span class="attr">path</span>=<span class="string">"M0 0 C135.5 68 463.5 -8 700 29 S1000 -20 1940,70"</span> <span class="attr">begin</span>=<span class="string">"0s"</span> <span class="attr">dur</span>=<span class="string">"10s"</span> <span class="attr">rotate</span>=<span class="string">"auto"</span> <span class="attr">repeatCount</span>=<span class="string">"indefinite"</span>&gt;</span><span class="tag">&lt;/<span class="name">animateMotion</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">g</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M0 30 C135.5 98 463.5 22 700 59 S1000 10 1940,100"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">x</span>=<span class="string">"-1000"</span> <span class="attr">y</span>=<span class="string">"-1000"</span> <span class="attr">class</span>=<span class="string">"truck_path"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/Newcandy/svg/blob/master/path.html" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç </a></p>
<h3 id="svgè·¯å¾„æè¾¹åŠ¨ç”»"><a href="#svgè·¯å¾„æè¾¹åŠ¨ç”»" class="headerlink" title="svgè·¯å¾„æè¾¹åŠ¨ç”»"></a>svgè·¯å¾„æè¾¹åŠ¨ç”»</h3><p>DEMO:<br><img src="//img.aotu.io/Newcandy/svgPhone.gif" alt="è·¯å¾„åŠ¨ç”»"></p>
<p>åœ¨pathç­‰å…ƒç´ ä¸Šå¿…é¡»ä½¿ç”¨stokeå±æ€§ï¼Œå¦åˆ™åŠ¨ç”»ä¸æ‰§è¡Œã€‚stroke è¡¨ç¤ºæè¾¹é¢œè‰²ï¼›stroke-width è¡¨ç¤ºæè¾¹çš„ç²—ç»†ï¼›<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">symbol</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 1024 1024"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">d</span>=<span class="string">"M768 0h-512c-53.056 0-96 42.976-96 96v832c0 53.056 42.976 96 96 96h512c52.992 0 96-43.008 96-96v-832c0-53.056-43.008-96-96-96zM800 928c0 17.632-14.368 32-32 32h-512c-17.664 0-32-14.304-32-32v-64.128h576v64.128zM800 831.872h-576v-639.872h576v639.872zM800 160h-576v-64c0-17.664 14.336-32 32-32h512c17.632 0 32 14.336 32 32v64zM576 112c0 8.832-7.2 16-16 16h-96c-8.864 0-16-7.168-16-16v0c0-8.864 7.136-16 16-16h96c8.8 0 16 7.136 16 16v0zM544 911.872c0 8.8-7.2 16-16 16h-32c-8.832 0-16-7.2-16-16v0c0-8.864 7.168-16 16-16h32c8.8 0 16 7.136 16 16v0z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨CSS3 animationå®ç°ï¼Œå› ä¸ºå†…è”çš„svgæœ¬èº«å°±æ˜¯Htmlå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡CSS3æ¥æ§åˆ¶é¢œè‰²ç­‰å±æ€§ã€‚<br>stroke-dasharray è¡¨ç¤ºè™šçº¿æè¾¹ï¼›stroke-dashoffset è¡¨ç¤ºè™šçº¿çš„èµ·å§‹åç§»ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.device</span> &#123; <span class="attribute">position</span>: absolute;<span class="attribute">top</span>: <span class="number">43%</span>;<span class="attribute">left</span>: <span class="number">50%</span>;<span class="attribute">margin</span>: -<span class="number">200px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">200px</span>;<span class="attribute">stroke-dasharray</span>: <span class="number">4000</span>;<span class="attribute">stroke-dashoffset</span>: <span class="number">4000</span>;<span class="attribute">-webkit-animation</span>: dash <span class="number">2s</span> infinite;<span class="attribute">animation</span>: dash <span class="number">2s</span> infinite; &#125;</div><div class="line">    @-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> dash &#123;</div><div class="line">      100% &#123; <span class="attribute">stroke-dashoffset</span>: <span class="number">0</span>; &#125;</div><div class="line">    &#125;</div><div class="line">    @<span class="keyword">keyframes</span> dash &#123;</div><div class="line">      100% &#123; <span class="attribute">stroke-dashoffset</span>: <span class="number">0</span>; &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p> <a href="https://github.com/Newcandy/svg/blob/master/stroke.html" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç </a></p>
<h3 id="cssä¸­çš„clip-path"><a href="#cssä¸­çš„clip-path" class="headerlink" title="cssä¸­çš„clip-path"></a>cssä¸­çš„clip-path</h3><p> clip-pathæŒ‰ç…§è·¯å¾„å†…éƒ¨çš„å°ºå¯¸è¿›è¡Œè£å‰ªã€‚åªæœ‰è·¯å¾„å†…çš„å†…å®¹å¯è§ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.element</span> &#123;</div><div class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(...); <span class="comment">/* æˆ–è€…å…¶ä»–çš„å›¾å½¢å‡½æ•° */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- å…¶ä»–å›¾å½¢å‡½æ•°è¯­æ³• --&gt;</span></div><div class="line">circle: circle(radius at x-axis y-axis)</div><div class="line">ellipse: ellipse(x-rad y-rad at x-axis y-axis)</div><div class="line">polygon: polygon(x-axis y-axis, x-axis y-axis, â€¦ )</div><div class="line">inset: inset(top right bottom left round top-radius right-radius bottom-radius left-radius)</div></pre></td></tr></table></figure>
<p>DEMO1:<br><img src="//img.aotu.io/Newcandy/svgBreakup.gif" alt="clippath"></p>
<p>åˆ©ç”¨ä¼ªå…ƒç´ :beforeå’Œ:afterå®ç°ç›¸åŒå¤§å°ç›¸åŒä½ç½®çš„æ–‡å­—ï¼Œä½¿ç”¨clip-pathåˆ†åˆ«è£å‰ªæ–‡å­—ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.txt</span> &#123; <span class="attribute">display</span>: inline-block;<span class="attribute">position</span>: relative;<span class="attribute">font-size</span>: <span class="number">70px</span>;<span class="attribute">text-transform</span>: uppercase;<span class="attribute">color</span>: transparent; &#125;</div><div class="line"><span class="comment">/* æ­¤å¤„çœç•¥ä»£ç  */</span>	</div><div class="line"><span class="selector-class">.txt</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(0 0,100% 0,100% 100%);<span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(0 0,100% 0,100% 100%); &#125;</div><div class="line"><span class="selector-class">.txt</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(0 0,0 100%,100% 100%);<span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(0 0,0 100%,100% 100%); &#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/Newcandy/svg/blob/master/clip-path/text.html" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç </a></p>
<p>DEMO2ï¼š<br><img src="//img.aotu.io/Newcandy/svgLine.gif" alt="clippath"></p>
<p>å¦‚æœç»“åˆclip-pathå’ŒkeyframesåŠ¨ç”»ï¼Œå¯å®ç°ç›¸å…³å…ƒç´ æŒ‰ç…§æˆ‘ä»¬çš„è·¯å¾„é€æ­¥å‡ºç°çš„æ•ˆæœã€‚clip-pathå¯é€šè¿‡æ­¤å·¥å…·<a href="http://www.bennettfeely.com/clippy/å®ç°å¤æ‚çš„è·¯å¾„ã€‚" target="_blank" rel="external">http://www.bennettfeely.com/clippy/å®ç°å¤æ‚çš„è·¯å¾„ã€‚</a><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-class">.line</span> &#123; <span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">0</span>;<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">width</span>: <span class="number">28px</span>;<span class="attribute">height</span>: <span class="number">34px</span>;<span class="attribute">background</span>: <span class="built_in">url</span>(line.png) <span class="number">0</span> <span class="number">0</span> no-repeat;<span class="attribute">-webkit-animation</span>: moveLine .<span class="number">8s</span> ease infinite;<span class="attribute">animation</span>: moveLine .<span class="number">8s</span> ease infinite; &#125;</div><div class="line"></div><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> moveLine &#123;</div><div class="line">  0% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(0 100%, 0 100%, 0 100%);</div><div class="line">  &#125;</div><div class="line">  25% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(0 82%, 100% 81%, 100% 100%, 0 100%);</div><div class="line">  &#125;</div><div class="line">  50% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(20% 0%, 80% 0%, 73% 47%, 74% 64%, 99% 100%, 0 100%, 56% 77%, 64% 58%);</div><div class="line">  &#125;</div><div class="line">  60% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(50% 0%, 72% 48%, 75% 70%, 100% 100%, 0 100%, 55% 78%, 5% 68%);</div><div class="line">  &#125;</div><div class="line">  75% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(28% 0, 100% 34%, 79% 100%, 0 100%, 0 0);</div><div class="line">  &#125;</div><div class="line">  100% &#123;</div><div class="line">    <span class="attribute">-webkit-clip-path</span>: <span class="built_in">polygon</span>(100% 0, 100% 100%, 0 100%, 0 0);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/Newcandy/svg/blob/master/clip-path/line.html" target="_blank" rel="external">ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç </a></p>
<h3 id="æ€»ç»“æ€è€ƒ-2"><a href="#æ€»ç»“æ€è€ƒ-2" class="headerlink" title="æ€»ç»“æ€è€ƒ"></a>æ€»ç»“æ€è€ƒ</h3><p>æœ¬ç« ä¸»è¦ä»‹ç»svgè·¯å¾„åŠ¨ç”»ï¼Œsvgè·¯å¾„æè¾¹åŠ¨ç”»ä»¥åŠcssä¸­çš„clip-pathï¼Œä»ä¸­æˆ‘ä»¬ä¹Ÿå‘ç°äº†è·¯å¾„çš„å¼ºå¤§ä¹‹å¤„ï¼Œå¦‚è‹¥èƒ½åœ¨é¡¹ç›®ä¸­çµæ´»ä½¿ç”¨ï¼Œæ— éç»™åŠ¨ç”»æ·»åŠ æ›´ç”ŸåŠ¨çš„æ•ˆæœã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡&quot;&gt;&lt;/a&gt;ç¬¬ä¸€ç« ï¼šSVGå…¥é—¨ç¯‡&lt;/h2&gt;&lt;h3 id=&quot;SVGç®€ä»‹&quot;&gt;&lt;a href=&quot;#SVGç®€ä»‹&quot; class=&quot;he
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="svg" scheme="https://aotu.io/tags/svg/"/>
    
  </entry>
  
  <entry>
    <title>Gitå¸¸ç”¨æ“ä½œæ€»ç»“</title>
    <link href="https://aotu.io/notes/2015/11/17/Git-Commands/"/>
    <id>https://aotu.io/notes/2015/11/17/Git-Commands/</id>
    <published>2015-11-17T04:44:25.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ç”¨Gitæ¯”è¾ƒä¹…äº†ï¼Œä¹‹å‰ä¸€ç›´åœ¨Winç”¨çš„TortoiseGitï¼Œç°åœ¨å‘½ä»¤è¡Œç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æŠŠä¸€äº›æŒ‡ä»¤æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚<br>ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£Gitçš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚Gitçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£Gitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚</p>
<a id="more"></a>
<h3 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h3><pre><code>$ git config --global user.name &quot;Your Name&quot;
$ git config --global user.email &quot;email@example.com&quot;
</code></pre><h3 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h3><p>git trackedçš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶</p>
<p><img src="//img.aotu.io/mamboer/git-trees.jpg" alt="git-track"></p>
<pre><code>#å°†â€œå½“å‰ä¿®æ”¹â€ç§»åŠ¨åˆ°æš‚å­˜åŒº(stage)
$ git add somfile.txt
#å°†æš‚å­˜åŒºä¿®æ”¹æäº¤
$ git commit -m &quot;Add somfile.txt.&quot;
</code></pre><h3 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h3><pre><code>$ git status
$ git diff
</code></pre><h3 id="å›é€€"><a href="#å›é€€" class="headerlink" title="å›é€€"></a>å›é€€</h3><pre><code># æ”¾å¼ƒå·¥ä½œåŒºä¿®æ”¹
$ git checkout -- file.name
$ git checkout -- .

# å–æ¶ˆcommit(æ¯”å¦‚éœ€è¦é‡å†™commitä¿¡æ¯)
$ git reset --soft HEAD

# å–æ¶ˆcommitã€add(é‡æ–°æäº¤ä»£ç å’Œcommit)
$ git reset HEAD
$ git reset --mixed HEAD

# å–æ¶ˆcommitã€addã€å·¥ä½œåŒºä¿®æ”¹(éœ€è¦å®Œå…¨é‡ç½®)
$ git reset --hard HEAD
</code></pre><h3 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h3><pre><code>$ git reflog
$ git log
</code></pre><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><pre><code>$ rm file.name
$ git rm file.name
$ git commit -m &quot;Del&quot;
</code></pre><h3 id="è¿œç¨‹æ“ä½œ"><a href="#è¿œç¨‹æ“ä½œ" class="headerlink" title="è¿œç¨‹æ“ä½œ"></a>è¿œç¨‹æ“ä½œ</h3><pre><code>$ git remote add origin git@github.com:michaelliao/learngit.git
# ç¬¬ä¸€æ¬¡æ¨é€ï¼Œ-u(--set-upstream)æŒ‡å®šé»˜è®¤ä¸Šæ¸¸
$ git push -u origin master
$ git push origin master
</code></pre><h3 id="å…‹éš†"><a href="#å…‹éš†" class="headerlink" title="å…‹éš†"></a>å…‹éš†</h3><pre><code>$ git clone https://github.com/Yikun/yikun.github.com.git path
$ git clone git@github.com:Yikun/yikun.github.com.git path
</code></pre><h3 id="åˆ†æ”¯æ“ä½œ"><a href="#åˆ†æ”¯æ“ä½œ" class="headerlink" title="åˆ†æ”¯æ“ä½œ"></a>åˆ†æ”¯æ“ä½œ</h3><p><img src="//img.aotu.io/mamboer/git-merge.png" alt="about-merge"></p>
<pre><code># æŸ¥çœ‹å½“å‰åˆ†æ”¯
$ git branch

# åˆ›å»ºåˆ†æ”¯
$ git branch dev
# åˆ‡æ¢åˆ†æ”¯
$ git checkout dev

# åˆ›å»ºå¹¶checkoutåˆ†æ”¯
$ git checkout -b dev

# åˆå¹¶åˆ†æ”¯
$ git merge dev

# åˆ é™¤åˆ†æ”¯
$ git branch -d dev
</code></pre><h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><pre><code>$ git tag 0.1.1
$ git push origin --tags
</code></pre><p>æ³¨æ„ï¼šæœ¬æ–‡Forkè‡ª <a href="http://yikun.github.io/" target="_blank" rel="external">yikun.github.io</a>ï¼Œ<a href="http://aotu.io">å‡¹å‡¸å®éªŒå®¤</a>ä½œè¿›ä¸€æ­¥å®Œå–„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨Gitæ¯”è¾ƒä¹…äº†ï¼Œä¹‹å‰ä¸€ç›´åœ¨Winç”¨çš„TortoiseGitï¼Œç°åœ¨å‘½ä»¤è¡Œç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æŠŠä¸€äº›æŒ‡ä»¤æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚&lt;br&gt;ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£Gitçš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚Gitçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£Gitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Git" scheme="https://aotu.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>101%è¿˜åŸ</title>
    <link href="https://aotu.io/notes/2015/11/16/101-percent/"/>
    <id>https://aotu.io/notes/2015/11/16/101-percent/</id>
    <published>2015-11-16T13:39:14.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p><em>100%è¿˜åŸè®¾è®¡ç¨¿ï¼Œè¿˜åŸè¯¯å·®ä¸è¶…1åƒç´ </em> æ˜¯é‡æ„å·¥ç¨‹å¸ˆå…¥è¡Œçš„æœ€åŸºæœ¬è¦æ±‚ï¼Œè€Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œè¿™100%æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚</p>
<p> è®°å¾—æ›¾ç»å¸¦æˆ‘çš„å¸ˆå‚…è¯´è¿‡ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>é‡æ„å·¥ç¨‹å¸ˆä¸åº”è¯¥æ»¡è¶³100%è¿˜åŸè®¾è®¡ç¨¿ï¼Œæ›´åº”è¯¥å»è¿½æ±‚101%è¿˜åŸåº¦ã€‚</p>
</blockquote>
<p>101%è¿˜åŸæ˜¯é‡æ„å·¥ç¨‹å¸ˆåœ¨è¿˜åŸè®¾è®¡ç¨¿çš„è¿‡ç¨‹ä¸­ï¼Œå‘æŒ¥è‡ªèº«çš„ä¸»è§‚èƒ½åŠ¨æ€§ï¼Œå¯¹è®¾è®¡ç¨¿è¿›è¡Œä¿®æ­£æˆ–å‘äº§å“ã€è§†è§‰ã€äº¤äº’æå‡ºåˆç†çš„å»ºè®®ï¼Œè®©æœ€ç»ˆè¿˜åŸå‡ºæ¥çš„è§†è§‰è®¾è®¡ç¨¿æ›´æ¥è¿‘è®¾è®¡æœ¬æ„ã€‚</p>
<p>101%çš„è¿˜åŸå¯ä»¥å½’ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯<strong>å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£</strong>ï¼Œä¸åŒ…æ‹¬å…·æœ‰ä¿¡æ¯ä¼ è¾¾çš„å†…å®¹ï¼›å¦ä¸€ç±»æ˜¯<strong>å¯¹è§†è§‰ç¨¿æ·±å…¥æ€è€ƒå¹¶æå‡ºåˆç†å»ºè®®</strong>ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå…·æœ‰ä¿¡æ¯ä¼ è¾¾çš„å†…å®¹ã€‚</p>
<h2 id="å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£"><a href="#å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£" class="headerlink" title="å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£"></a>å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£</h2><p>è§†è§‰è®¾è®¡å¸ˆæœ‰æ—¶å€™ä¼šæ¯”è¾ƒå¿™ï¼Œè®¾è®¡ç¨¿ä¸­å¯èƒ½ä¼šå‡ºç°åƒç´ ä¹‹é—´çš„è¯¯å·®è€Œé€ æˆä¸å¯¹é½çš„æƒ…å†µï¼Œå¦‚ä¸‹é¢çš„è®¾è®¡ç¨¿ï¼š</p>
<p><img src="//img.aotu.io/FmcA0J8Dx8dn6xe9xCxoFy8e5kBh" alt="image"></p>
<p><em>ï¼ˆRetina 2Xå›¾ï¼‰</em></p>
<p>å¾ˆæ˜æ˜¾ï¼Œè§†è§‰è®¾è®¡å¸ˆåŸæ„æ˜¯æƒ³è®©å³åˆ™çš„æŒ‰é’®å‚ç›´å±…ä¸­å¯¹é½çš„ï¼Œæˆ‘ä»¬åœ¨è¿˜åŸçš„æ—¶å€™å¯ä»¥å»å¾®è°ƒè¾¹è·è®©ä¹‹å¯¹é½ï¼Œå¾—åˆ°ä¸‹é¢çš„é‡æ„ç¨¿ï¼š</p>
<p><img src="//img.aotu.io/Fox3Ng6hyVh1goheF1dtVvgSRLOY" alt="image"></p>
<p><em>ï¼ˆé‡æ„ç¨¿1Xå›¾ï¼‰</em></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿˜åŸå‡ºæ¥çš„è®¾è®¡ç¨¿è™½ç„¶å’ŒåŸè®¾è®¡ç¨¿å¹¶æ²¡æœ‰100%å»åˆï¼Œä½†æ˜¯å‡ºæ¥çš„æ•ˆæœç¡®å®æ›´ç¬¦åˆå‚ç›´å±…ä¸­å¯¹é½çš„å‡†åˆ™ï¼Œæ›´æ¥è¿‘è®¾è®¡çš„æœ¬æ„ï¼Œè€Œä¸”èŠ‚çœäº†æ²Ÿé€šçš„æˆæœ¬ã€‚</p>
<p>æœ‰äº›åŒå­¦è®¸ä¼šé—®ï¼Œåœ¨æ²¡æœ‰å‘¨çŸ¥è§†è§‰è®¾è®¡å¸ˆçš„æƒ…å†µä¸‹ç§ä¸‹æ”¹åŠ¨è®¾è®¡ç¨¿è²Œä¼¼æœ‰ç‚¹ä¸å¤ªå°Šé‡è§†è§‰è®¾è®¡å¸ˆçš„å·¥ä½œå§?</p>
<p><strong>å¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŸåˆ™ï¼Œå°±æ˜¯åœ¨æ²¡æœ‰ä¿¡å‘ç”Ÿæ¯ä¼ è¾¾çš„æƒ…å†µä¸‹ä¿®æ­£ï¼Œæ‰€ä½œçš„ä¿®æ­£ä¸èƒ½è¿èƒŒè®¾è®¡æœ¬æ„ã€‚</strong>æ‹¿åˆšæ‰çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœæˆ‘ä¸ªäººä¸å–œæ¬¢æŒ‰é’®çš„è¾¹è§’æ˜¯æ–¹è§’çš„ï¼Œå°±ç§ä¸‹æŠŠæ–¹è§’è¿˜åŸæˆåœ†è§’ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="//img.aotu.io/Fv9F9h1E549tv4MyBQylbga_MRes" alt="image"></p>
<p>é‚£å°±äº§ç”Ÿäº†è¿˜åŸç¨¿ä¸è®¾è®¡åŸç¨¿ä¹‹é—´çš„ä¿¡æ¯ä¼ è¾¾å†…å®¹äº†ï¼Œå› ä¸ºæ–¹è§’å’Œåœ†è§’æ˜¯ä¸¤ä¸ªä¸ä¸€æ ·çš„è®¾è®¡é£æ ¼ï¼Œåœ†è§’æŒ‰é’®æ˜æ˜¾ä¸æ˜¯è§†è§‰è®¾è®¡å¸ˆçš„è®¾è®¡æœ¬æ„ï¼Œå¦‚æœåœ†è§’æŒ‰é’®åœ¨è§†è§‰è®¾è®¡å¸ˆå®Œå…¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ä¸Šäº†çº¿ï¼Œé‚£å°±æ˜¯çœŸæ­£çš„ä¸å°Šé‡è§†è§‰è®¾è®¡å¸ˆçš„å·¥ä½œäº†ã€‚</p>
<p>å½“ç„¶è§†è§‰è®¾è®¡å¸ˆéƒ½å¸Œæœ›è‡ªå·±è¾“å‡ºçš„è®¾è®¡ç¨¿å®Œç¾æ— ç¼ºï¼Œä½†ä¸€äº›å®¢è§‚å› ç´ ï¼ˆäº¤æ¥æ¨¡å—ï¼‰æˆ–ä¸»è§‚ä¸Šçš„æ“ä½œï¼ˆå·¥ä½œå¤ªå¿™ï¼Œæ‹–åŠ¨å…ƒç´ æ’ç‰ˆçš„æ—¶å€™æ‰‹æŠ–ï¼‰éš¾å…ä¼šè®©è®¾è®¡ç¨¿å­˜åœ¨ä¸€äº›åƒç´ çº§çš„è¯¯å·®ï¼Œå¯¹è§†è§‰ç¨¿çš„ä¸»åŠ¨ä¿®æ­£ï¼Œæ˜¯å’Œè§†è§‰è®¾è®¡å¸ˆåä½œçš„ä¸€ç§é»˜å¥‘ï¼Œå¦‚æœæ¯ä¸€é¡¹è¿™æ ·çš„ä¿®æ­£éƒ½è¦è®©è§†è§‰è®¾è®¡å¸ˆé‡æ–°å»è°ƒæ•´å†ç”Ÿæˆæ–°çš„PSDæ–‡ä»¶çš„è¯ï¼Œæ²Ÿé€šæˆæœ¬æœªå…è¿‡é«˜</p>
<h2 id="å¯¹è§†è§‰ç¨¿æ·±å…¥æ€è€ƒå¹¶æå‡ºåˆç†å»ºè®®"><a href="#å¯¹è§†è§‰ç¨¿æ·±å…¥æ€è€ƒå¹¶æå‡ºåˆç†å»ºè®®" class="headerlink" title="å¯¹è§†è§‰ç¨¿æ·±å…¥æ€è€ƒå¹¶æå‡ºåˆç†å»ºè®®"></a>å¯¹è§†è§‰ç¨¿æ·±å…¥æ€è€ƒå¹¶æå‡ºåˆç†å»ºè®®</h2><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä¸‹é¢çš„è®¾è®¡ç¨¿ï¼š</p>
<p><img src="//img.aotu.io/Fi_7Vs_dNNOtLFNVTMv4gTWoJdTh" alt="image"></p>
<p>ä»è§†è§‰ç¨¿æ¥çœ‹ï¼Œè§†è§‰è®¾è®¡å¸ˆæŠŠâ€œå…³æ³¨æœ¬åº—â€ã€â€œå…³æ³¨å…¬ä¼—å·â€å’Œâ€œè”ç³»å–å®¶â€è¿™ä¸‰é¡¹çš„æŒ‰é’®æ‰€å çš„åŒºåŸŸä½œäº†ç­‰åˆ†å¤„ç†ï¼ŒæŒ‰é’®é‡Œé¢çš„æ–‡æ¡ˆå’Œiconæ°´å¹³å±…ä¸­</p>
<p>ç­‰åˆ†çš„æ’ç‰ˆï¼Œè™½ç„¶ä¸ªä½“ä¹‹é—´çš„å†…å®¹ä¸ä¸€æ ·ä¼šå‡ºç°å†…å®¹ä¸åˆ†éš”çº¿è¾¹è·ä¸ç›¸ç­‰çš„æƒ…å†µï¼Œä½†æ˜¯åœ¨æŒ‰é’®æ‰€å å±•ç¤ºåŒºåŸŸæ¯”ä¾‹ç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œä¸‰ä¸ªæŒ‰é’®æ•´ä½“çœ‹ä¸Šå»æ˜¯éå¸¸æ•´é½çš„ï¼Œæ’ç‰ˆé€»è¾‘å¾ˆæ¸…æ™°ï¼š</p>
<p><img src="//img.aotu.io/Fs6aDX-Z9HjaJmUikJ6vrtp2bRzv" alt="image"></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œè®©ä¸‰ä¸ªæŒ‰é’®åœ¨é¡µé¢ä¸Šçš„æ’ç‰ˆæ•´ä½“çœ‹èµ·æ¥æ˜¯æ•´é½çš„æ˜¯è®¾è®¡å¸ˆçš„è®¾è®¡æœ¬æ„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š</p>
<p>åœ¨è¿˜åŸè®¾è®¡ç¨¿ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè€ƒè™‘åˆ°å¸ƒå±€çš„æ‰©å±•æ€§ï¼Œä¼šè€ƒè™‘åˆ°ä¸è¶³ä¸‰ä¸ªæŒ‰é’®æˆ–è€…å¤šäºä¸‰ä¸ªæŒ‰é’®çš„æ’ç‰ˆæƒ…å†µï¼Œå¦‚æœæŒ‰ç…§ç­‰åˆ†çš„æ’ç‰ˆå‹å»è¿˜åŸï¼ŒæŒ‰é’®å‡ºç°å¢å‡çš„è¯ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼š</p>
<p><img src="//img.aotu.io/Fm96HxYwoybjV0q5lPTRV1cUBBs5" alt="image"></p>
<p><em>ï¼ˆç­‰åˆ†å››ä¸ªæŒ‰é’®ï¼‰</em></p>
<p><img src="//img.aotu.io/Fl_ia80MoNI-jCnrau95FaL9a7Rx" alt="image"></p>
<p><em>ï¼ˆç­‰åˆ†ï¼šä¸‰ä¸ªæŒ‰é’®ï¼‰</em></p>
<p><img src="//img.aotu.io/FkO4U37QzH-T5D16G2ftwUBlgplx" alt="image"></p>
<p><em>ï¼ˆç­‰åˆ†ï¼šä¸¤ä¸ªæŒ‰é’®ï¼‰</em></p>
<p><img src="//img.aotu.io/Fr0GR0q_7u0tO0wicwgtN1fH-7nL" alt="image"></p>
<p><em>ï¼ˆç­‰åˆ†ï¼šä¸€ä¸ªæŒ‰é’®ï¼‰</em></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¤§äº3ä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œæ–‡æ¡ˆçš„å±•ç¤ºå‡ºç°äº†é—®é¢˜ï¼Œå°äº3ä¸ªæŒ‰é’®çš„æ—¶å€™æŒ‰é’®çš„å¤§å°å’Œæ–‡æ¡ˆä¸åˆ†éš”çº¿çš„é—´è·å°±ç•¥æ˜¾å¤¸å¼ äº†ï¼Œç‰¹åˆ«æ˜¯åªæœ‰ä¸€ä¸ªæŒ‰é’®çš„æƒ…å†µï¼Œå‡ ç§æƒ…å†µçš„æ’ç‰ˆåœ¨è§†è§‰ä¸Šå˜åŒ–éƒ½å¾ˆå¤§ï¼Œè€Œä¸”è§†è§‰ç¨¿é‡Œæ˜¯æ²¡æœ‰ç›¸åº”çš„å±•ç¤ºçš„ï¼Œé‚£ä¹ˆè¿™é‡Œé¢åŒ…å«äº†æ’ç‰ˆä¹‹é—´çš„ä¿¡æ¯ä¼ è¾¾ã€‚</p>
<p><strong>åœ¨è¿˜åŸè¿‡ç¨‹ä¸­ï¼Œå½“å‘ç”Ÿä¿¡æ¯ä¼ è¾¾çš„æ—¶å€™ï¼Œä»»ä½•ç–‘é—®å’Œå»ºè®®éƒ½åº”è¯¥å‘¨çŸ¥ç›¸å…³çš„è´Ÿè´£äººï¼Œè¿™æ˜¯101%è¿˜åŸä¸­çš„åŸºæœ¬åŸåˆ™</strong></p>
<p>æŠŠåˆšæ‰ä¸Šé¢çš„å‡ ç§æƒ…å†µï¼Œå†™å¥½demoå‘äº§å“å’Œè§†è§‰è®¾è®¡å¸ˆå±•ç¤ºï¼Œåé¦ˆå¹¶ç¡®è®¤ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><p>æŒ‰é’®åœ¨ä¸åŒçš„åœºæ™¯ä¸­æœ€å¤šå±•ç¤ºçš„ä¸ªæ•°å’Œæœ€å°‘å±•ç¤ºçš„ä¸ªæ•°</p>
</li>
<li><p>å¦‚æœæŒ‰é’®å±•ç¤ºä¸ªæ•°æœ‰å˜ï¼Œç”¨ç­‰åˆ†è‡ªé€‚åº”æ’ç‰ˆçš„è¯ï¼Œä»¥ä¸Šæƒ…å†µçš„æ’ç‰ˆæ–¹å¼èƒ½å¦æ¥å—</p>
</li>
</ul>
<p>ç„¶åå¾—åˆ°çš„ç­”å¤æ˜¯ï¼š</p>
<p><em>äº§å“ï¼šæœ€å¤šå±•ç¤º3ä¸ªï¼Œæœ€å°‘å±•ç¤º1ä¸ªï¼Œæ’ç‰ˆçœ‹è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„</em></p>
<p><em>è§†è§‰ï¼šæŒ‰é’®ä¸ç”¨ç­‰åˆ†è‡ªé€‚åº”ï¼Œç”¨å®šå®½å±•ç¤ºçš„</em></p>
<p>å¯ä»¥getåˆ°ä¿¡æ¯ï¼š</p>
<p>ç­‰åˆ†è‡ªé€‚åº”çš„æ’ç‰ˆåœ¨è¿™é‡Œä¸é€‚ç”¨ï¼š<em>å¯¹è§†è§‰è®¾è®¡ç¨¿æ’ç‰ˆä¿¡æ¯çš„ç†è§£ä¸è§†è§‰è®¾è®¡å¸ˆçš„åŸæ„æœ‰å‡ºå…¥</em></p>
<p>ä¸äº§å“å’Œè§†è§‰è®¾è®¡å¸ˆå¯¹ç›¸åº”çš„ä¿¡æ¯è¿›è¡Œç¡®è®¤åï¼Œäºæ˜¯ç»™åˆ°äº†å®šå®½çš„æ•ˆæœï¼š</p>
<p><img src="//img.aotu.io/Fl_ia80MoNI-jCnrau95FaL9a7Rx" alt="image"></p>
<p><em>ï¼ˆå®šå®½ï¼šä¸‰ä¸ªæŒ‰é’®ï¼‰</em></p>
<p><img src="//img.aotu.io/FtA07SuVhOsGCibzgRxELOfmtA8q" alt="image"></p>
<p><em>ï¼ˆå®šå®½ï¼šä¸¤ä¸ªæŒ‰é’®ï¼‰</em></p>
<p><img src="//img.aotu.io/FrN9VyDx2S1ON9q0hSEZBv6KplBa" alt="image"></p>
<p><em>ï¼ˆå®šå®½ï¼šä¸€ä¸ªæŒ‰é’®ï¼‰</em></p>
<p>å®šå®½æ’ç‰ˆä¸ç­‰åˆ†æ’ç‰ˆä¸¤ä¸ªæ–¹å¼å¯¹æ¯”æ¥çœ‹ï¼š</p>
<ul>
<li><p>å®šå®½æ’ç‰ˆçš„3ä¸ªæŒ‰é’®ä¸ç­‰åˆ†æ’ç‰ˆçš„æ•ˆæœä¸€æ ·</p>
</li>
<li><p>å®šå®½æ’ç‰ˆçš„2ä¸ªæŒ‰é’®æ¯”ç­‰åˆ†æ’ç‰ˆçš„æ•ˆæœå·®ã€‚</p>
</li>
<li><p>å®šå®½æ’ç‰ˆçš„æ—¶å€™ï¼ŒæŒ‰é’®æ‰€å ç©ºé—´å¹¶æ²¡æœ‰ç­‰åˆ†å±•ç¤ºåŒºåŸŸï¼Œè€Œæ–‡æ¡ˆç¦»åˆ†éš”çº¿çš„é—´è·åˆä¸ç›¸ç­‰ï¼Œæ’ç‰ˆé€»è¾‘ä¸æ¸…æ™°ï¼Œæ˜¾å¾—å¾ˆä¸æ•´é½</p>
</li>
<li><p>å®šå®½æ’ç‰ˆçš„1ä¸ªæŒ‰é’®æ¯”ç­‰åˆ†æ’ç‰ˆçš„æ•ˆæœå¥½ã€‚</p>
</li>
</ul>
<p>ç­‰åˆ†æ’ç‰ˆçš„æ—¶å€™ï¼Œè™½ç„¶æŒ‰é’®åœ¨å±•ç¤ºåŒºåŸŸä¸­æ˜¯å±…ä¸­å¯¹é½äº†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¸Šä¸‹æ–‡çš„å¯¹é½ï¼ŒæŒ‰é’®å¹¶æ²¡æœ‰å’Œæ˜Ÿæ˜Ÿçš„å¯¹é½ï¼Œç›¸åï¼Œç­‰å®½æ’ç‰ˆçš„æ–‡æ¡ˆæ›´æ¥è¿‘ä¸æ˜Ÿæ˜Ÿçš„å·¦å¯¹é½ï¼Œè™½ç„¶å¹¶æ²¡æœ‰ç»å¯¹å¯¹é½ï¼Œåªæ˜¯å±•ç°å‡ºæ¥çš„æ’ç‰ˆæ•ˆæœã€ä¸ä¸Šä¸‹æ–‡çš„æ’ç‰ˆé€»è¾‘æ˜¾å¾—æ›´ä¸¥è°¨ã€‚</p>
<p>å…¶å®ä¸¤ç§æ’ç‰ˆçš„æ–‡æ¡ˆéƒ½æ²¡æœ‰åŠæ³•100%ä¿è¯ä¸æ˜Ÿæ˜Ÿå·¦å¯¹é½çš„ï¼Œå› ä¸ºæ–‡æ¡ˆé•¿åº¦ä¸ä¸€æ ·ï¼Œå±…ä¸­çš„ä½ç½®å°±ä¸ä¸€æ ·ï¼š</p>
<p><img src="//img.aotu.io/FsyT7RZVBU8_-nnRZQoJuVW-zMEV" alt="image"></p>
<p><em>ï¼ˆå®šå®½ã€ç­‰åˆ†çš„å±…ä¸­æ–‡æ¡ˆï¼‰</em></p>
<p>ç»¼åˆä»¥ä¸Šï¼Œå‘äº§å“å’Œè§†è§‰è®¾è®¡å¸ˆæå‡ºå»ºè®®ï¼šæŒ‰é’®çš„æ–‡æ¡ˆä¸åˆ†éš”çº¿é—´è·ç›¸ç­‰ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªæŒ‰é’®çš„æ–‡æ¡ˆä¸æ˜Ÿæ˜Ÿå·¦å¯¹é½ã€‚äºæ˜¯å¾—åˆ°äº†æœ€ç»ˆçš„æ•ˆæœï¼š</p>
<p><img src="//img.aotu.io/FlHkLxnqo4_IOYuV4hK-I2UUTrGz" alt="image"></p>
<p><em>ï¼ˆä¼˜åŒ–åçš„ï¼‰</em></p>
<p><img src="//img.aotu.io/Fkk3b0EBcmlLgf5JOKTeXlVW6pQM" alt="image"></p>
<p><em>ï¼ˆä¼˜åŒ–åçš„ï¼‰</em></p>
<p><img src="//img.aotu.io/FnOjxa7OW08bLDhRTusJ3vH8QD4B" alt="image"></p>
<p><em>ï¼ˆä¼˜åŒ–åçš„ï¼‰</em></p>
<p>è¿™ä¸åŸæœ‰çš„è®¾è®¡ç¨¿ç›¸æ¯”ï¼Œæ‰©å±•æ€§æ›´å¼ºï¼Œæ’ç‰ˆé€»è¾‘æ›´ä¸¥è°¨æ€§ã€æ›´è¶‹å‘è®¾è®¡æœ¬æ„ï¼Œå»ºè®®æ˜¯åˆç†çš„ã€‚</p>
<p>ä¼˜åŒ–çš„åœ°æ–¹è™½ç„¶ä¸å¤§ï¼Œä½†æˆ‘ä»¬éœ€è¦å¯¹è®¾è®¡ç¨¿è¿›è¡Œè®¤çœŸæ·±å…¥çš„åˆ†æï¼Œä»äº§å“å±‚é¢ã€è§†è§‰å±‚é¢ã€å¼€å‘å±‚é¢ç”šè‡³äº¤äº’å±‚é¢å»å°½å¯èƒ½åœ°è§£è¯»è®¾è®¡ç¨¿ï¼Œæ·±å…¥æ€è€ƒæ‰èƒ½å‘ç°é—®é¢˜ï¼Œæå‡ºåˆç†çš„å»ºè®®ï¼Œ101% ä¸­çš„ 1% å¨åŠ›å°±ä¼šæ…¢æ…¢çš„ç¨‹ç°å‡ºæ¥ã€‚</p>
<h3 id="ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­"><a href="#ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­"></a>ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­</h3><p><img src="//img.aotu.io/FqiqU8YWOmhZnNacboRyVQgSzssY" alt="image"></p>
<p>ç”±äºé¡¹ç›®å¿«é€Ÿè¿­ä»£ï¼Œè§†è§‰è®¾è®¡èµ„æºç´§ç¼ºçš„åŸå› ï¼Œäºæ˜¯æœ‰äº†è¿™å¼ æ²¡æœ‰ç»è¿‡è§†è§‰æµç¨‹çš„è®¾è®¡ç¨¿ï¼Œæ˜¯ä¸€ä½äº§å“GGç»™åˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬æ‹¿åˆ°è®¾è®¡ç¨¿ï¼Œä¸åŠ ä»¥æ€è€ƒçš„è¯ï¼Œ100%è¿˜åŸå‡ºæ¥ï¼Œé‚£ä¹ˆ</p>
<p>å¾—åˆ°äº†ç¬¬ä¸€ç¨¿ï¼š</p>
<p><img src="//img.aotu.io/FgUQXhyUGDNT3wxVcII4mqqyP8SC" alt="image"></p>
<p>å…¶å®è®¤çœŸæ€è€ƒä¸€ä¸‹ï¼Œå¯ä¼˜åŒ–çš„åœ°æ–¹è¿˜æ˜¯æœ‰çš„ï¼š</p>
<p><strong>äº¤äº’ä¸Š</strong></p>
<ul>
<li><img src="//img.aotu.io/Fr_B9WGV3jrijHMLCXMyE8n05A8N" alt="image"> å’Œ <img src="//img.aotu.io/FtPzNmUWfQYK3TTNGeZq8yJHt1VK" alt="image"> è¿™ä¸¤ä¸ªå…¶å®åªæ˜¯æ–‡æ¡ˆä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶æ²¡æœ‰ä»»ä½•äº¤äº’ï¼Œè®¾è®¡ç¨¿ä¸Šå´åšæˆäº†å’Œæ–‡æœ¬å½¢æˆå¼ºçƒˆå¯¹æ¯”çš„çœ‹ä¸Šå»å¯ç‚¹å‡»çš„æŒ‰é’®ï¼Œå®¹æ˜“è¯¯å¯¼ç”¨æˆ·å»ç‚¹</li>
</ul>
<p><strong>è§†è§‰ä¸Š</strong></p>
<ul>
<li><p>å¤åˆ¶æŒ‰é’®çš„é…è‰²æ¬ æ°å½“ï¼Œå¤åˆ¶çš„æ“ä½œå¹¶ä¸ä¼šå¼•èµ·ç”¨æˆ·è­¦å‘Šæˆ–é”™è¯¯çš„æç¤ºï¼Œè€Œçº¢è‰²æ°å¥½æœ‰è®©äººè­¦æƒ•çš„æ„å‘³</p>
</li>
<li><p>è¾“å…¥æ¡†å’Œå¤åˆ¶æŒ‰é’®çš„é«˜åº¦ä¸ä¸€æ ·ï¼Œæ˜¾å¾—ä¸å¤Ÿæ•´é½ç¾è§‚</p>
</li>
<li><p>å†…å®¹å’Œé¡¶éƒ¨çš„é—´è·å¤ªå°ï¼Œå†…å®¹è§†è§‰ç„¦ç‚¹æ¬ ä½³</p>
</li>
</ul>
<p>äº¤äº’å’Œè§†è§‰ä¸Šéƒ½æ¶‰åŠåˆ°ä¸åŒçš„ä¿¡æ¯ä¼ è¾¾ï¼Œå› æ­¤ä¸èƒ½ç”¨å¯¹è§†è§‰ç¨¿è¿›è¡Œä¸»åŠ¨ä¿®æ­£ï¼Œå°†ä»¥ä¸Šä¿¡æ¯å’Œäº§å“åé¦ˆ</p>
<p>æœ€ç»ˆå»ºè®®ï¼š</p>
<ul>
<li><p>â€œæ·»åŠ æœ‹å‹â€ å’Œ â€œå…³æ³¨â€ é‡‡ç”¨æ–‡æœ¬åŠ è‰²å¼ºè°ƒå½¢å¼è¡¨ç°</p>
</li>
<li><p>å¤åˆ¶æŒ‰é’®çš„é¢œè‰²é‡‡å–å¸¸ç”¨çš„ç»™äººå‹å¥½æ„Ÿè§‰çš„ç»¿è‰²</p>
</li>
<li><p>è°ƒæ•´å¤åˆ¶æŒ‰é’®çš„è°ƒè¯•ä½¿ä¹‹ä¸è¾“å…¥æ¡†çš„è°ƒè¯•ä¸€æ ·</p>
</li>
<li><p>è°ƒæ•´å†…å®¹ä¸é¡¶éƒ¨çš„é—´è·å¤§å°</p>
</li>
</ul>
<p>å¾—åˆ°äº†ç¬¬äºŒç¨¿ï¼š</p>
<p><img src="//img.aotu.io/FoPU-jpW_FfA4_YK3M8jonZ_Toq0" alt="image"></p>
<p><em>ï¼ˆç¬¬äºŒç¨¿ï¼‰</em></p>
<p>ç¬¬äºŒç¨¿ä¸­â€œæ‚¨å·²æ”¶è—åº—é“ºï¼Œå¯åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹â€çš„æ”¶è—åé¦ˆæç¤ºæ˜¯äº§å“æ–°å¢çš„å†…å®¹ï¼Œä¸€å¼€å§‹è¦æ±‚æ”¾åœ¨ä¸Šå›¾çš„ä½ç½®ï¼Œè™½ç„¶ç¬¬äºŒç¨¿åœ¨äº¤äº’å’Œè§†è§‰ä¸Šå¾—åˆ°äº†ä¸€å®šçš„ä¼˜åŒ–ï¼Œä½†è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œç‰¹åˆ«æ˜¯</p>
<p><strong>äº§å“ä¸Š</strong></p>
<ul>
<li>æ–‡å­—å·¦å¯¹é½å¯æ˜¾é¡µé¢æ’ç‰ˆæ•´é½ï¼Œä½†ä»å†…å®¹çš„äº²å¯†æ€§ä¸Šçœ‹ï¼Œæœ€åº•éƒ¨çš„å·²æ”¶è—æ–‡å­—åé¦ˆæç¤ºå¹¶ä¸å±äºå¼•å¯¼æ“ä½œçš„å†…å®¹</li>
</ul>
<p>æœ€ç»ˆå»ºè®®ï¼š</p>
<ul>
<li><p>è®©åé¦ˆå†…å®¹å±…ä¸­å¯¹é½</p>
</li>
<li><p>å¢åŠ ä¸æ“ä½œå†…å®¹çš„è¾¹è·ï¼Œè®©ç”¨æˆ·å¯ä»¥ä¸€ç›®äº†ç„¶çœ‹åˆ°åé¦ˆå†…å®¹çš„å½’å±</p>
</li>
<li><p>è°ƒæ•´æ–‡æ¡ˆå¼ºè°ƒè‰²çš„è‰²ç³»ï¼Œè®©å…¶ä¸è‡³äºè¿‡é‡è€Œæ˜¾å¾—å¤ªçªçœ¼ã€‚</p>
</li>
</ul>
<p>æœ€ç»ˆå¾—åˆ°101%çš„è¿˜åŸæ•ˆæœï¼š</p>
<p><img src="//img.aotu.io/FklHx4pXnfveGyB2Fy09rx_AFOHr" alt="image"></p>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ€ç»ˆè¿˜åŸå‡ºæ¥çš„æ•ˆæœä¹Ÿè®¸æ²¡æœ‰è§†è§‰è®¾è®¡å¸ˆé‚£ä¹ˆä¸“ä¸šï¼Œä½†è‡³å°‘è¿˜åŸç¨¿ä¸Šå¤šäº†ä¸€ä»½æ€è€ƒï¼Œå¤šäº†ä¸€ä»½å¿ƒæ€ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ä¹Ÿèƒ½è®©å¤§å®¶å»æ¢è®¨ä¸€äº›éè‡ªå·±èŒä½ä¸Šçš„çŸ¥è¯†ï¼Œäº’ç›¸å­¦ä¹ ï¼Œäº’ç›¸æé«˜ã€‚</p>
<p>ä»100%åˆ°101%çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªä¸»åŠ¨æ€è€ƒï¼Œç§¯ææ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªè¿½æ±‚æè‡´çš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªæŠŠäº‹åšå¥½çš„è¿‡ç¨‹ã€‚åœ¨è¿˜åŸè®¾è®¡ç¨¿çš„è¿‡ç¨‹ä¸­ï¼Œ1%åœ¨100%ä¸­å çš„æ¯”ä¾‹ä¸å¤šï¼Œä½†æ˜¯å¦‚æœèƒ½æŠŠè¿™1%å¤„ç†å¾—å¥½ï¼Œè¿˜åŸå‡ºæ¥çš„è®¾è®¡ç¨¿ä¼šæ›´å…·çº§æ•°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;100%è¿˜åŸè®¾è®¡ç¨¿ï¼Œè¿˜åŸè¯¯å·®ä¸è¶…1åƒç´ &lt;/em&gt; æ˜¯é‡æ„å·¥ç¨‹å¸ˆå…¥è¡Œçš„æœ€åŸºæœ¬è¦æ±‚ï¼Œè€Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œè¿™100%æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚&lt;/p&gt;
&lt;p&gt; è®°å¾—æ›¾ç»å¸¦æˆ‘çš„å¸ˆå‚…è¯´è¿‡ä¸€å¥è¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é‡æ„å·¥ç¨‹å¸ˆä¸åº”è¯¥æ»¡è¶³100%è¿˜åŸè®¾è®¡ç¨¿ï¼Œæ›´åº”è¯¥å»è¿½æ±‚10
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="è®¾è®¡ç†å¿µè¿˜åŸ" scheme="https://aotu.io/tags/%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E8%BF%98%E5%8E%9F/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºphantomJsçš„ç½‘ç»œçˆ¬è™«</title>
    <link href="https://aotu.io/notes/2015/11/11/phantomJs-crawler/"/>
    <id>https://aotu.io/notes/2015/11/11/phantomJs-crawler/</id>
    <published>2015-11-11T01:59:33.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºphantomJs2-0çš„ç½‘ç»œçˆ¬è™«"><a href="#åŸºäºphantomJs2-0çš„ç½‘ç»œçˆ¬è™«" class="headerlink" title="åŸºäºphantomJs2.0çš„ç½‘ç»œçˆ¬è™«"></a>åŸºäºphantomJs2.0çš„ç½‘ç»œçˆ¬è™«</h1><p><strong>phantomJs</strong>æ˜¯ä¸€ä¸ªåŸºäºWebKitçš„æœåŠ¡å™¨ç«¯JavaScript APIã€‚å®ƒå…¨é¢æ”¯æŒwebè€Œä¸éœ€æµè§ˆå™¨æ”¯æŒï¼Œå…¶å¿«é€Ÿï¼ŒåŸç”Ÿæ”¯æŒå„ç§Webæ ‡å‡†ï¼š DOM å¤„ç†, CSS é€‰æ‹©å™¨, JSON, Canvas, å’Œ SVGã€‚PhantomJSå¯ä»¥ç”¨äºé¡µé¢è‡ªåŠ¨åŒ–ï¼Œç½‘ç»œç›‘æµ‹ï¼Œç½‘é¡µæˆªå±ï¼Œä»¥åŠæ— ç•Œé¢æµ‹è¯•ç­‰ã€‚</p>
<h3 id="ç”¨é€”æ¦‚è¿°ï¼š"><a href="#ç”¨é€”æ¦‚è¿°ï¼š" class="headerlink" title="ç”¨é€”æ¦‚è¿°ï¼š"></a>ç”¨é€”æ¦‚è¿°ï¼š</h3><ul>
<li><strong>å±å¹•å¿«ç…§</strong> ï¼šå®˜æ–¹æä¾›çš„APIä¸­<a href="http://phantomjs.org/api/webpage/method/render.html" target="_blank" rel="external">page.render</a> æä¾›äº†å¼ºå¤§çš„å±å¹•å¿«ç…§åŠŸèƒ½ï¼›</li>
<li><strong>ç½‘ç»œçˆ¬è™«</strong> ï¼š<a href="http://phantomjs.org/api/webpage/method/evaluate.html" target="_blank" rel="external">page.evaluate</a> æ–¹æ³•æä¾›äº†ä¸€ä¸ªæ²™ç®±æ¥å¸®åŠ©ä½ åƒç”¨jsæ“ä½œdomä¸€æ ·ç®€å•çš„è·å–ä½ æƒ³è¦çš„å†…å®¹ï¼Œé¿å…äº†ä½¿ç”¨å¤æ‚çš„æ­£åˆ™åŒ¹é…å†…å®¹ï¼›</li>
<li><strong>ç½‘ç»œæƒ…å†µç›‘æ§</strong> ï¼šå®šæœŸå¯¹ç½‘ç«™è¿›è¡ŒpageSpeedæ£€æŸ¥ã€å¯ç”¨äºæ‰“å¼€é€Ÿåº¦ç¼“æ…¢çŸ­ä¿¡æŠ¥è­¦ç­‰æœåŠ¡(æœ¬æ–‡æš‚ä¸åšæ·±å…¥ä»‹ç»)ã€‚</li>
<li><strong>é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ</strong> ï¼šphantomJs2.0 æä¾›äº†ä¸°å¯Œçš„APIç”¨äºé¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ</li>
</ul>
<hr>
<h2 id="å…³äºå®‰è£…"><a href="#å…³äºå®‰è£…" class="headerlink" title="å…³äºå®‰è£…"></a>å…³äºå®‰è£…</h2><blockquote>
<p>ç½‘ç»œä¸Šæœ‰å¤§é‡çš„å®‰è£…æ•™ç¨‹ï¼Œå¦‚æœä½ ç”¨çš„osxï¼Œå»ºè®®ç›´æ¥<code>brew update &amp;&amp; brew install phantomjs</code>ã€‚æ­¤å¤„åªå™è¿°ä¸‹åœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ªå‘ã€‚</p>
</blockquote>
<p>åœ¨Mac OS Yosemite  ç‰ˆæœ¬å¯èƒ½éƒ½ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<br>è¿è¡Œ <code>phantomjs hello.js</code> åå¾—åˆ°äº†æŠ¥é”™ä¿¡æ¯ï¼š<code>Killed: 9</code><br>è¿™ä¸ªé—®é¢˜çš„åŸå§‹é“¾æ¥åœ¨è¿™é‡Œ<a href="https://github.com/ariya/phantomjs/issues/12928" target="_blank" rel="external">github:issue/12928</a> è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š<a href="http://stackoverflow.com/questions/28267809/phantomjs-getting-killed-9-for-anything-im-trying" target="_blank" rel="external">stackoverflow</a></p>
<ol>
<li>Install UPX. UPX is an executable packer and unpacker<br> <code>$ brew install upx</code></li>
<li>Unpack the phantomjs executable<br> <code>$ upx -d phantomjs-2.0.0-macosx/bin/phantomjs</code></li>
<li>Run the phantomjs executable<br> <code>$ ./phantomjs-2.0.0-macosx/bin/phantomjs</code></li>
</ol>
<h2 id="å…ˆæ„Ÿå—ä¸‹phantomJsçš„å¼ºå¤§"><a href="#å…ˆæ„Ÿå—ä¸‹phantomJsçš„å¼ºå¤§" class="headerlink" title="å…ˆæ„Ÿå—ä¸‹phantomJsçš„å¼ºå¤§"></a>å…ˆæ„Ÿå—ä¸‹phantomJsçš„å¼ºå¤§</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var page = require(<span class="string">'webpage'</span>).create();</div><div class="line">page.open(<span class="string">'http://jd.com'</span>, <span class="keyword">function</span>() &#123;</div><div class="line">page.render(<span class="string">'jd.png'</span>);</div><div class="line">phantom.<span class="keyword">exit</span>();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ°screen.jsï¼Œåˆ‡åˆ°terminalï¼š<br><code>$ phantomejs screen.js</code></p>
<p><strong>å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ç½‘ç«™æˆªå›¾ï¼š</strong><br><img src="http://ww1.sinaimg.cn/large/80c4aaf9gw1ey49t6wl41j20rb0d1jxj.jpg" alt="Alt text"></p>
<blockquote>
<p>å½“ç„¶è¿˜å¯ä»¥ç»§ç»­<a href="http://phantomjs.org/api/webpage/property/scroll-position.html" target="_blank" rel="external">page.scrollPosition</a>ä»¥åŠJsè„šæœ¬åšå»¶æ—¶æˆªå›¾ï¼Œæ¥é¿å…æˆªå›¾ä¸­å‡ºç°å›¾ç‰‡æœªåŠ è½½å®Œå…¨ç­‰é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ"><a href="#é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ" class="headerlink" title="é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ"></a>é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œ</h2><h3 id="è‡ªåŠ¨ç™»å½•äº¬ä¸œ"><a href="#è‡ªåŠ¨ç™»å½•äº¬ä¸œ" class="headerlink" title="è‡ªåŠ¨ç™»å½•äº¬ä¸œ"></a>è‡ªåŠ¨ç™»å½•äº¬ä¸œ</h3><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> page = <span class="built_in">require</span>(<span class="string">'webpage'</span>).create();</div><div class="line"></div><div class="line">page.onLoadStarted =<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    loadInProgress =<span class="literal">true</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"load started"</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">page.onLoadFinished = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    loadInProgress = <span class="literal">false</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"load finished"</span>);</div><div class="line">&#125;;</div><div class="line">page.onUrlChanged = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"onUrlChanged"</span>);</div><div class="line">&#125;;</div><div class="line"> page.open(<span class="string">'https://passport.jd.com/new/login.aspx'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    page.includeJs(<span class="string">"http://apps.bdimg.com/libs/jquery/1.6.4/jquery.js"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">var</span> <span class="built_in">rect</span> = page.evaluate(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            $(<span class="string">'#loginname'</span>).val(<span class="string">'username'</span>);</div><div class="line">            $(<span class="string">'#nloginpwd'</span>).val(<span class="string">'passwd'</span>);</div><div class="line">            $(<span class="string">'#loginsubmit'</span>)[<span class="number">0</span>].click();</div><div class="line">            <span class="keyword">return</span> <span class="built_in">document</span>.title;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//è‹¥å¼•å…¥jQuery åˆ™ç”¨è¿™ç§æ–¹æ³•æ¥å®ç°click</span></div><div class="line">        page.sendEvent(<span class="string">'click'</span>, <span class="built_in">rect</span>.left + <span class="built_in">rect</span>.width / <span class="number">2</span>, <span class="built_in">rect</span>.top + <span class="built_in">rect</span>.height / <span class="number">2</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">rect</span>);</div><div class="line">        <span class="built_in">var</span> clock =setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            page.render(<span class="string">'jdlogin.png'</span>);</div><div class="line">            phantom.exit();</div><div class="line">        &#125;,<span class="number">2000</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>phantomJs2.0ä¸­clickäº‹ä»¶ä¸æ˜¯æ ‡å‡†äº‹ä»¶<br> è‹¥ <code>page.evaluate</code>ä¸­æ“ä½œdomæ—¶å¹¶æœªå¼•å…¥jQueryï¼Œåˆ™åº”è‡ªå·±å®ç°ä¸€ä¸ªclickäº‹ä»¶å¦‚ä¸‹ï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">click</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> ev = <span class="built_in">document</span>.createEvent(<span class="string">"MouseEvent"</span>);</div><div class="line">    ev.initMouseEvent(</div><div class="line">        <span class="string">"click"</span>,</div><div class="line">        <span class="literal">true</span> <span class="comment">/* bubble */</span>, <span class="literal">true</span> <span class="comment">/* cancelable */</span>,</div><div class="line">        <span class="built_in">window</span>, <span class="literal">null</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="comment">/* coordinates */</span></div><div class="line">        <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="comment">/* modifier keys */</span></div><div class="line">        <span class="number">0</span> <span class="comment">/*left*/</span>, <span class="literal">null</span></div><div class="line">    );</div><div class="line">    el.dispatchEvent(ev);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆæ¥è‡ª<a href="http://stackoverflow.com/questions/15739263/phantomjs-click-an-element" target="_blank" rel="external">stackoverflow:questions/15739263</a></p>
<p><strong>ç™»å½•åæˆªå±</strong><br><img src="http://ww3.sinaimg.cn/large/80c4aaf9gw1ey49s5j9pjj20rd0hiaic.jpg" alt="Alt text"></p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°æ­¤ç™»å½•å¹¶æœªè§¦å‘éªŒè¯ï¼Œè‹¥ç”¨åˆ«çš„ç½‘ç«™è¢«è„±åº“çš„è´¦å·å¯†ç æ¥æ‰¹é‡æŸ¥è¯¢çš„è¯ï¼Œæœ‰å¾ˆå¤§æ¦‚ç‡æ’åº“ã€‚</p>
</blockquote>
<h2 id="ç½‘ç»œçˆ¬è™«"><a href="#ç½‘ç»œçˆ¬è™«" class="headerlink" title="ç½‘ç»œçˆ¬è™«"></a>ç½‘ç»œçˆ¬è™«</h2><h3 id="æ•°æ®æŠ“å–çš„å¿«æ„Ÿ"><a href="#æ•°æ®æŠ“å–çš„å¿«æ„Ÿ" class="headerlink" title="æ•°æ®æŠ“å–çš„å¿«æ„Ÿ"></a>æ•°æ®æŠ“å–çš„å¿«æ„Ÿ</h3><blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥çŸ¥ä¹çš„æœç´¢å¦‚æ­¤ä¹‹çƒ‚ï¼Œåˆšçœ‹è¿‡çš„é—®é¢˜ï¼Œå†æœå°±æœä¸åˆ°äº†ï¼Œé‚£æŠŠçŸ¥ä¹ä¸Šä½ æƒ³è¦çš„åˆ†ç±»çš„é—®é¢˜æŠ“å–ä¸‹æ¥ï¼Œè‡ªå·±æœç´¢å’¯ã€‚ï¼ˆå½“ç„¶æƒ³è¿™ä¹ˆä¸€ä¸ªçƒ‚ç†ç”±æ¥æŠ“äººå®¶çš„æ•°æ®ä¹Ÿæ˜¯é†‰äººï¼‰ã€‚éšä¾¿æŠ“äººå®¶çš„æ•°æ®ä¸å¥½ï¼Œæ­¤å¤„åªåšæŠ€æœ¯åˆ†äº«ï¼Œåˆ‡å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚</p>
</blockquote>
<h5 id="æ‰¹é‡æŠ“å–çŸ¥ä¹æŸä¸ªåˆ†ç±»ä¸‹çš„æ‰€æœ‰é—®é¢˜"><a href="#æ‰¹é‡æŠ“å–çŸ¥ä¹æŸä¸ªåˆ†ç±»ä¸‹çš„æ‰€æœ‰é—®é¢˜" class="headerlink" title="æ‰¹é‡æŠ“å–çŸ¥ä¹æŸä¸ªåˆ†ç±»ä¸‹çš„æ‰€æœ‰é—®é¢˜"></a>æ‰¹é‡æŠ“å–çŸ¥ä¹æŸä¸ªåˆ†ç±»ä¸‹çš„æ‰€æœ‰é—®é¢˜</h5><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> page = <span class="built_in">require</span>(<span class="string">'webpage'</span>).create(),</div><div class="line">    testindex = <span class="number">0</span>,</div><div class="line">    finalAns = [],</div><div class="line">    fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</div><div class="line">page.onLoadStarted =<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    loadInProgress =<span class="literal">true</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"load started"</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">page.onLoadFinished = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    loadInProgress = <span class="literal">false</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"load finished"</span>);</div><div class="line">&#125;;</div><div class="line">page.onUrlChanged = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"onUrlChanged"</span>);</div><div class="line">&#125;;</div><div class="line"><span class="built_in">var</span> circle = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    testindex++;</div><div class="line">    <span class="keyword">if</span>(testindex === <span class="number">51</span>)&#123;</div><div class="line">        clearInterval(circle);</div><div class="line">        phantom.exit();</div><div class="line">    &#125;</div><div class="line">    page.open(<span class="string">'http://www.zhihu.com/topic/19559937?page='</span>+testindex, <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span>(status == <span class="string">'fail'</span>)&#123;</div><div class="line">            testindex--;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">var</span> <span class="built_in">rect</span> = page.evaluate(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">var</span> titleArr = [];</div><div class="line">            <span class="built_in">window</span>.scrollTo(<span class="number">0</span>,<span class="built_in">document</span>.body.scrollHeight);</div><div class="line">                <span class="built_in">var</span> title = $(<span class="string">'.feed-item .question_link'</span>);</div><div class="line">                <span class="keyword">for</span>(<span class="built_in">var</span> j = <span class="number">0</span>; j &lt; title.length; j++)&#123;</div><div class="line">                    titleArr[j] = title[j].text;</div><div class="line">                &#125;</div><div class="line">            <span class="keyword">return</span> titleArr;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">rect</span> == <span class="literal">null</span>)&#123;</div><div class="line">            testindex--;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        file = fs.open(<span class="string">"liuxue.txt"</span>, <span class="string">'a'</span>);</div><div class="line">        <span class="keyword">for</span>(<span class="built_in">var</span> h = <span class="number">0</span>; h &lt; <span class="built_in">rect</span>.length; h++)&#123;</div><div class="line">            file.write(<span class="built_in">rect</span>[h]+<span class="string">'\n'</span>);</div><div class="line">        &#125;</div><div class="line">        file.close();</div><div class="line">    &#125;);</div><div class="line">&#125;,<span class="number">2000</span>);</div></pre></td></tr></table></figure>
<blockquote>
<p>å…¶ä¸­ç”¨åˆ°äº†æ‰¹é‡page.open é¡µé¢æ¥æ§åˆ¶ç¿»é¡µåˆ°æ‰€æœ‰çš„é—®é¢˜ï¼Œç„¶åå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å†™å…¥æ–‡ä»¶ä¸­ï¼Œç”¨åˆ°äº†File System API.</p>
</blockquote>
<h3 id="è¿ç”¨åœºæ™¯ç•…æƒ³"><a href="#è¿ç”¨åœºæ™¯ç•…æƒ³" class="headerlink" title="è¿ç”¨åœºæ™¯ç•…æƒ³"></a>è¿ç”¨åœºæ™¯ç•…æƒ³</h3><ol>
<li>ç½‘ç»œæ€§èƒ½æµ‹è¯•å¯ç”¨äºæ‰¹é‡ã€å®šæœŸå¯¹ç«å“ç½‘ç«™åšæŸ¥è¯¢ï¼Œè¿›è¡Œç«å“åˆ†æå¦‚æ‰“å¼€é€Ÿåº¦ã€æ”¹ç‰ˆé¢‘ç‡ç­‰ç­‰ã€‚</li>
<li>ç½‘ç»œçˆ¬è™«å¯æ‰¹é‡è·å–æ•°æ®è¿›è¡Œç«å“åˆ†æã€è¡Œä¸šæŠ¥å‘Šç­‰ã€‚</li>
<li>é¡µé¢è‡ªåŠ¨åŒ–æ“ä½œå¯ç”¨äºç½‘ç«™è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ã€‚</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸºäºphantomJs2-0çš„ç½‘ç»œçˆ¬è™«&quot;&gt;&lt;a href=&quot;#åŸºäºphantomJs2-0çš„ç½‘ç»œçˆ¬è™«&quot; class=&quot;headerlink&quot; title=&quot;åŸºäºphantomJs2.0çš„ç½‘ç»œçˆ¬è™«&quot;&gt;&lt;/a&gt;åŸºäºphantomJs2.0çš„ç½‘ç»œçˆ¬è™«&lt;/h1&gt;&lt;p&gt;&lt;s
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="PhantomJS" scheme="https://aotu.io/tags/PhantomJS/"/>
    
      <category term="Crawler" scheme="https://aotu.io/tags/Crawler/"/>
    
  </entry>
  
  <entry>
    <title>csså±‚å é¡ºåºæ¢ç©¶</title>
    <link href="https://aotu.io/notes/2015/11/08/css-stack-order/"/>
    <id>https://aotu.io/notes/2015/11/08/css-stack-order/</id>
    <published>2015-11-08T03:44:25.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>å—¯~ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€ä½†å®¹æ˜“æ··ä¹±çš„çŸ¥è¯†ç‚¹~<br>é¦–å…ˆä¸Šä¸€å¤§æ®µæ–‡ç»‰ç»‰çš„w3cè§„èŒƒä»¥è¡¨æ˜è¿™æ˜¯ä¸€ç¯‡ä¸¥è‚ƒçš„å­¦æœ¯æ–‡ç« ï¼ˆè§‰å¾—å¤ªé•¿å¯å…ˆè·³è¿‡~ï¼‰ï¼š</p>
<blockquote>
<p>In CSS 2.1, each box has a position in three dimensions. In addition to their horizontal and vertical positions, boxes lie along a â€œz-axisâ€ and are formatted one on top of the other. Z-axis positions are particularly relevant when boxes overlap visually.<br>The order in which the rendering tree is painted onto the canvas is described in terms of stacking contexts. Stacking contexts can contain further stacking contexts. A stacking context is atomic from the point of view of its parent stacking context; boxes in other stacking contexts may not come between any of its boxes.<br>Each box belongs to one stacking context. Each positioned box in a given stacking context has an integer stack level, which is its position on the z-axis relative other stack levels within the same stacking context. Boxes with greater stack levels are always formatted in front of boxes with lower stack levels. Boxes may have negative stack levels. Boxes with the same stack level in a stacking context are stacked back-to-front according to document tree order.<br>â€”â€”<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index" target="_blank" rel="external">W3C</a></p>
</blockquote>
<p>å…¶å®è¯´äººè¯ï¼Œå¤§è‡´æ„æ€å°±æ˜¯ï¼š<br><strong>æ¯ä¸ªç›’æ¨¡å‹çš„ä½ç½®æ˜¯ä¸‰ç»´çš„ï¼Œé™¤äº†xè½´å’Œyè½´ï¼Œè¿˜æœ‰ä¸€ä¸ªè¡¨ç¤ºå±‚å çš„zè½´ï¼›<br>zè½´ä¸Šçš„ä½ç½®å†³å®šäº†æˆ‘ä»¬çœ‹åˆ°çš„ç›’æ¨¡å‹ä¹‹é—´çš„å±‚å æ•ˆæœï¼ˆè°ç›–ä½è°ï¼‰ã€‚</strong></p>
<p>ä¸Šè¿°è§„èŒƒè¿˜è§£é‡Šäº†å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹ä»¥åŠç›’æ¨¡å‹çš„å±‚å çº§åˆ«ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡æ —å­æ…¢æ…¢æ¢ç©¶ã€‚</p>
<h2 id="1-æµ®åŠ¨ä¸è¡Œå†…"><a href="#1-æµ®åŠ¨ä¸è¡Œå†…" class="headerlink" title="1. æµ®åŠ¨ä¸è¡Œå†…"></a>1. æµ®åŠ¨ä¸è¡Œå†…</h2><p><em>eg.1-1/eg.1-2å…±åŒç»“æ„ä¸æ ·å¼ï¼š</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span>&#123;<span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> dashed;<span class="attribute">height</span>:<span class="number">200px</span>;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">text-align</span>: center;&#125;</div><div class="line"><span class="selector-class">.div1</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FF4363</span>;<span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span>;&#125;</div><div class="line"><span class="selector-class">.div2</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FC9D99</span>;<span class="attribute">margin</span>:-<span class="number">170px</span> <span class="number">20px</span>;&#125;</div><div class="line"><span class="selector-class">.div3</span>&#123;<span class="attribute">background-color</span>: <span class="number">#F9CCAD</span>;<span class="attribute">margin</span>:-<span class="number">160px</span> <span class="number">40px</span>;&#125;</div><div class="line"><span class="selector-class">.div4</span>&#123;<span class="attribute">background-color</span>: <span class="number">#C7C7A8</span>;<span class="attribute">margin</span>:-<span class="number">150px</span> <span class="number">60px</span>;&#125;</div><div class="line"><span class="selector-class">.div5</span>&#123;<span class="attribute">background-color</span>: <span class="number">#84AF9B</span>;<span class="attribute">margin</span>:-<span class="number">140px</span> -<span class="number">10px</span>;&#125;</div></pre></td></tr></table></figure>
<hr>
<p><em>eg.1-1ï¼šå¸¸è§„æµä¸­éå®šä½éè¡Œå†…å…ƒç´ çš„å±‚å æƒ…å†µ</em><br><img src="//img.aotu.io/Yettyzyt/1-1-normal-order.png" alt="å±‚å æƒ…å†µ"></p>
<p><strong>ç»“è®ºï¼š å¸¸è§„æµä¸­éå®šä½éè¡Œå†…çš„å…ƒç´ æ ¹æ®htmlé¡ºåºï¼ŒæŒ‰ç…§â€œåæ¥å±…ä¸Šâ€çš„è§„åˆ™å±‚å ã€‚</strong></p>
<hr>
<p><em>eg.1-2ï¼šå®šä½å…ƒç´ ï¼è¡Œå†…å…ƒç´ ï¼æµ®åŠ¨å…ƒç´ ä¹‹é—´çš„å±‚å å…³ç³»</em><br><img src="//img.aotu.io/Yettyzyt/1-2-change-order.png" alt="zindex"></p>
<p><strong>ç»“è®ºï¼š å±‚å é¡ºåºå¦‚ä¸‹ï¼ˆé«˜â¡ä½ï¼‰ï¼š<br>z-indexä¸ºautoçš„å®šä½å…ƒç´ ï¼›<br>å¸¸è§„æµå†…è¡Œå†…éå®šä½å…ƒç´ ï¼›<br>éå®šä½çš„æµ®åŠ¨å…ƒç´ ï¼›<br>å¸¸è§„æµå†…éè¡Œå†…éå®šä½å…ƒç´ ï¼›<br>z-indexä¸ºè´Ÿçš„å®šä½å…ƒç´ ã€‚</strong></p>
<h2 id="2-ä¸ºå®šä½å…ƒç´ è®¾ç½®z-index"><a href="#2-ä¸ºå®šä½å…ƒç´ è®¾ç½®z-index" class="headerlink" title="2. ä¸ºå®šä½å…ƒç´ è®¾ç½®z-index"></a>2. ä¸ºå®šä½å…ƒç´ è®¾ç½®z-index</h2><p>é¦–å…ˆï¼Œä½ å¿…é¡»äº†è§£ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªå®šä½å…ƒç´ éƒ½æœ‰ä¸€ä¸ªæ•´å‹çš„å±‚å çº§åˆ«ï¼ˆstack levelï¼‰ï¼›</li>
<li>z-indexå±æ€§åªå¯¹å®šä½å…ƒç´ æœ‰æ•ˆã€‚</li>
</ul>
<hr>
<p><em>eg.2-1/eg.2-2å…±åŒç»“æ„ä¸æ ·å¼ï¼š</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div3"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div4"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div5"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span>&#123;<span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> dashed;<span class="attribute">height</span>:<span class="number">200px</span>;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">text-align</span>: center;&#125;</div><div class="line"><span class="selector-class">.div1</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FF4363</span>;<span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span>;&#125;</div><div class="line"><span class="selector-class">.div2</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FC9D99</span>;<span class="attribute">margin</span>:-<span class="number">170px</span> <span class="number">20px</span>;&#125;</div><div class="line"><span class="selector-class">.div3</span>&#123;<span class="attribute">background-color</span>: <span class="number">#F9CCAD</span>;<span class="attribute">margin</span>:-<span class="number">160px</span> <span class="number">40px</span>;&#125;</div><div class="line"><span class="selector-class">.div4</span>&#123;<span class="attribute">background-color</span>: <span class="number">#C7C7A8</span>;<span class="attribute">margin</span>:-<span class="number">150px</span> <span class="number">60px</span>;&#125;</div><div class="line"><span class="selector-class">.div5</span>&#123;<span class="attribute">background-color</span>: <span class="number">#84AF9B</span>;<span class="attribute">margin</span>:-<span class="number">140px</span> -<span class="number">10px</span>;&#125;</div></pre></td></tr></table></figure>
<hr>
<p><em>eg.2-1: 5ä¸ªå®šä½å…ƒç´ åœ¨æœªè®¾ç½®z-indexæ—¶çš„å±‚å æƒ…å†µ</em><br><img src="//img.aotu.io/Yettyzyt/2-1-normal-order.png" alt="z-index"></p>
<p><strong>ç»“è®ºï¼š z-indexä¸ºautoçš„å®šä½å…ƒç´ æ ¹æ®htmlé¡ºåºï¼ŒæŒ‰ç…§â€œåæ¥å±…ä¸Šâ€çš„è§„åˆ™å±‚å ã€‚</strong></p>
<hr>
<p><em>eg.2-2: 5ä¸ªå®šä½å…ƒç´ è®¾ç½®ä¸åŒz-indexæ—¶çš„å±‚å æƒ…å†µ</em><br><img src="//img.aotu.io/Yettyzyt/2-2-change-order.png" alt="z-index"></p>
<p><strong>ç»“è®ºï¼š<br>å®šä½å…ƒç´ çš„å±‚å çº§åˆ«ç”±z-indexçš„å€¼å†³å®šï¼Œz-indexä¸ºautoåˆ™å…¶å±‚å çº§åˆ«ä¸º0ï¼ˆæ³¨æ„ï¼šåªæ˜¯å±‚çº§ä¸º0ï¼Œå…¶z-indexå€¼ä»ä¸ºautoï¼‰ï¼›<br>åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå±‚å çº§åˆ«å¤§çš„å…ƒç´ ä½äºå±‚å çº§åˆ«å°çš„å…ƒç´ ä¹‹ä¸Šï¼›<br>åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå±‚å çº§åˆ«ç›¸åŒçš„å…ƒç´ æ ¹æ®htmlé¡ºåºå†³å®šå…ƒç´ çš„å±‚å å…³ç³»ï¼Œéµå¾ªâ€œåæ¥å±…ä¸Šâ€åŸåˆ™ã€‚</strong></p>
<h2 id="3-å±‚å é¡ºåºï¼ˆstack-orderï¼‰"><a href="#3-å±‚å é¡ºåºï¼ˆstack-orderï¼‰" class="headerlink" title="3. å±‚å é¡ºåºï¼ˆstack orderï¼‰"></a>3. å±‚å é¡ºåºï¼ˆstack orderï¼‰</h2><p>ç»“åˆä¸Šé¢çš„ä¾‹å­è¿›è¡Œæ€»ç»“ï¼Œå¯å¾—æ¯ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡å†…çš„å±‚å é¡ºåºï¼š</p>
<blockquote>
<p>Within each stacking context, the following layers are painted in back-to-front order:</p>
<ol>
<li>the background and borders of the element forming the stacking context.</li>
<li>the child stacking contexts with negative stack levels (most negative first).</li>
<li>the in-flow, non-inline-level, non-positioned descendants.</li>
<li>the non-positioned floats.</li>
<li>the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.</li>
<li>the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.</li>
<li>the child stacking contexts with positive stack levels (least positive first).<br>â€”<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index" target="_blank" rel="external">W3C</a></li>
</ol>
</blockquote>
<p>è§„èŒƒä¸­çš„æè¿°æ¯”è¾ƒä¹å‘³ï¼Œå¯ç»“åˆ<a href="http://www.w3help.org/zh-cn/kb/013" target="_blank" rel="external">w3help</a>ä¸­çš„ä¸€å¼ å›¾ç‰‡è¿›è¡Œç†è§£ï¼š</p>
<blockquote>
<p><img src="//img.aotu.io/Yettyzyt/3-1-summay-order.png" alt="z-index"></p>
</blockquote>
<h2 id="4-å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking-contextï¼‰"><a href="#4-å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking-contextï¼‰" class="headerlink" title="4. å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰"></a>4. å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰</h2><p>çœ‹å®Œä¸Šè¿°çš„ä¾‹å­ï¼Œå¯¹äºå±‚å é¡ºåºåº”è¯¥å¤§è‡´äº†è§£äº†ã€‚ä½†çªç„¶å†’å‡ºä¸€ä¸ªâ€œå±‚å ä¸Šä¸‹æ–‡â€ï¼Œè¿™åˆæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ</p>
<h3 id="4-1-å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹"><a href="#4-1-å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹" class="headerlink" title="4.1 å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹"></a>4.1 å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹</h3><blockquote>
<ol>
<li>stacking contextå¯ä»¥åµŒå¥—</li>
<li>æ¯ä¸ªstacking contextç›¸å¯¹äºå…„å¼Ÿå…ƒç´ æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå…¶å†…éƒ¨è§„åˆ™ä¸ä¼šå½±å“åˆ°å¤–éƒ¨</li>
<li>æ¯ä¸ªstacking contextå…ƒç´ éƒ½ä¼šè¢«çˆ¶stacking contextå½“åšä¸€ä¸ªå…ƒç´ æ–½åŠ stackingè§„åˆ™<br>â€”â€”<a href="http://blog.angular.in/css-stacking-contextli-na-xie-xian-wei-ren-zhi-de-keng/" target="_blank" rel="external">Abruzzi</a></li>
</ol>
</blockquote>
<h3 id="4-2-å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º"><a href="#4-2-å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º" class="headerlink" title="4.2 å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º"></a>4.2 å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º</h3><h4 id="4-2-1-css2"><a href="#4-2-1-css2" class="headerlink" title="4.2.1 css2"></a>4.2.1 css2</h4><blockquote>
<p>The root element forms the root stacking context. Other stacking contexts are generated by any positioned element (including relatively positioned elements) having a computed value of â€˜z-indexâ€™ other than â€˜autoâ€™. Stacking contexts are not necessarily related to containing blocks.<br>â€”â€”<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index" target="_blank" rel="external">W3C</a></p>
</blockquote>
<p><strong>CSS2ä¸­è§„å®šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„ä¸¤ç§æƒ…å†µï¼š<br>æ ¹å…ƒç´ ï¼ˆhtmlï¼‰ï¼›<br>å®šä½å…ƒç´ ï¼ˆabsolute/relativeï¼‰ä¸”z-indexçš„å€¼ä¸ä¸ºautoã€‚</strong></p>
<p>æ³¨ï¼šåœ¨åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œçˆ¶å…ƒç´ ã€å­å…ƒç´ ä¸è‡ªèº«éƒ½è¢«å½“ä½œæ˜¯å¹¶çº§å…³ç³»è¿›è¡Œå±‚å çº§åˆ«çš„æ¯”è¾ƒã€‚ä»–ä»¬ä¹‹é—´å¯èƒ½äº’ç›¸å±‚å ã€‚</p>
<hr>
<p><em>eg.4-1ï¼šz-indexä¸ºautoçš„å®šä½å…ƒç´ æ²¡æœ‰åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1_1"</span> <span class="attr">style</span>=<span class="string">"position:relative;z-index:9"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span> <span class="attr">style</span>=<span class="string">"position:relative"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span>&#123;<span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> dashed;<span class="attribute">height</span>:<span class="number">200px</span>;<span class="attribute">width</span>:<span class="number">400px</span>;<span class="attribute">text-align</span>: center;&#125;</div><div class="line"><span class="selector-class">.div1</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FF4363</span>;&#125;</div><div class="line"><span class="selector-class">.div1_1</span>&#123;<span class="attribute">background-color</span>: <span class="number">#FC9D99</span>;<span class="attribute">margin</span>:<span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">50px</span>;<span class="attribute">width</span>: <span class="number">300px</span>;&#125;</div><div class="line"><span class="selector-class">.div2</span>&#123;<span class="attribute">background-color</span>: <span class="number">#F9CCAD</span>;<span class="attribute">line-height</span>: <span class="number">300px</span>;&#125;</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/Yettyzyt/4-1-normal-order.png" alt="z-index"><br>åˆ†æä¸Šè¿°ä¾‹å­ï¼š</p>
<ul>
<li><strong>å‰æï¼š</strong>div1ã€div1_1ã€div2éƒ½æ˜¯å®šä½å…ƒç´ ï¼›div1ã€div2éƒ½æ²¡æœ‰è®¾ç½®z-indexå€¼ã€‚</li>
<li><strong>å‡è®¾ï¼š</strong>div1ä¸div2åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ã€‚ä¸åŒå±‚å ä¸Šä¸‹æ–‡ä¹‹é—´æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œdiv1_1å±äºdiv1æ‰€åˆ›å»ºçš„å±‚å ä¸Šä¸‹æ–‡ï¼Œä¸div2æ‰€åˆ›å»ºçš„å±‚å ä¸Šä¸‹æ–‡æ— å…³ï¼›æ ¹æ®â€œåæ¥å±…ä¸Šâ€åŸåˆ™ï¼Œåˆ™div2åº”è¯¥åœ¨div1åŠå…¶å­å…ƒç´ div1_1ä¹‹ä¸Šã€‚</li>
<li><strong>ç”±ä¸Šè¿°ä¾‹å­å¯å¾—ï¼š</strong>div1çš„å­å…ƒç´ div1_1åœ¨div2ä¹‹ä¸Šã€‚</li>
<li><strong>å› æ­¤ï¼š</strong>div1ã€div2æ²¡æœ‰åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š z-indexä¸ºautoçš„å®šä½å…ƒç´ ä¸ä¼šåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</strong></p>
<hr>
<p><strong>IEä¸­çš„BUGï¼š</strong><br><em>åœ¨IE6-7æµè§ˆå™¨ä¸­æµ‹è¯•eg.4-1ï¼š</em><br><img src="//img.aotu.io/Yettyzyt/4-2-ie-bug.png" alt="zindex"></p>
<p><strong>ç»“è®ºï¼š ie6-7ä¸­ï¼Œz-indexä¸ºautoçš„å®šä½å…ƒç´ ä¹Ÿä¼šåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</strong></p>
<h4 id="4-2-2-css3"><a href="#4-2-2-css3" class="headerlink" title="4.2.2 css3"></a>4.2.2 css3</h4><blockquote>
<p>A stacking context is formed, anywhere in the document, by any element which is either</p>
<ul>
<li>the root element (HTML),</li>
<li>positioned (absolutely or relatively) with a z-index value other than â€œautoâ€,</li>
<li>a flex item with a z-index value other than â€œautoâ€,that is the parent element display: flex|inline-flex,</li>
<li>elements with an opacity value less than 1. (See the specification for opacity),</li>
<li>elements with a transform value other than â€œnoneâ€,</li>
<li>elements with a mix-blend-mode value other than â€œnormalâ€,</li>
<li>elements with a filter value other than â€œnoneâ€,</li>
<li>elements with isolation set to â€œisolateâ€,</li>
<li>position: fixed</li>
<li>specifying any attribute above in will-change even if you donâ€™t specify values for these attributes directly (See this post)</li>
<li>elements with -webkit-overflow-scrolling set to â€œtouchâ€<br>â€”â€”<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context" target="_blank" rel="external">MDN</a></li>
</ul>
</blockquote>
<p><strong>CSS3ä¸­è§„å®šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„åç§æƒ…å†µï¼š</strong></p>
<ul>
<li><strong>æ ¹å…ƒç´  (HTML)</strong></li>
<li><strong>ç»å¯¹ï¼ˆabsoluteï¼‰å®šä½æˆ–ç›¸å¯¹ï¼ˆrelativeï¼‰å®šä½ä¸” z-index å€¼ä¸ä¸ºâ€autoâ€</strong></li>
<li><strong>ä¸€ä¸ª flex é¡¹ç›®(flex item)ï¼Œä¸” z-index å€¼ä¸ä¸º â€œautoâ€ï¼Œä¹Ÿå°±æ˜¯çˆ¶å…ƒç´  display: flex|inline-flex</strong></li>
<li><strong>å…ƒç´ çš„ opacity å±æ€§å€¼å°äº 1ï¼ˆå‚è€ƒ the specification for opacityï¼‰</strong></li>
<li><strong>å…ƒç´ çš„ transform å±æ€§å€¼ä¸ä¸º â€œnoneâ€</strong></li>
<li><strong>å…ƒç´ çš„ mix-blend-mode å±æ€§å€¼ä¸ä¸º â€œnormalâ€</strong></li>
<li><strong>å…ƒç´ çš„ isolation å±æ€§è¢«è®¾ç½®ä¸º â€œisolateâ€</strong></li>
<li><strong>åœ¨ mobile WebKit å’Œ Chrome 22+ å†…æ ¸çš„æµè§ˆå™¨ä¸­ï¼Œposition: fixed æ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å±‚å ä¸Šä¸‹æ–‡, å³ä½¿ z-index çš„å€¼æ˜¯ â€œautoâ€</strong></li>
<li><strong>åœ¨ will-change ä¸­æŒ‡å®šäº†ä»»æ„ CSS å±æ€§ï¼Œå³ä¾¿ä½ æ²¡æœ‰å®šä¹‰è¯¥å…ƒç´ çš„è¿™äº›å±æ€§</strong></li>
<li><strong>å…ƒç´ çš„ -webkit-overflow-scrolling å±æ€§è¢«è®¾ç½® â€œtouchâ€</strong></li>
</ul>
<hr>
<p><em>eg.4-2ï¼šopacityåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡</em><br><img src="//img.aotu.io/Yettyzyt/4-3-opacity-order.png" alt="z-index"><br>åˆ†æï¼š</p>
<blockquote>
<p>If an element with opacity less than 1 is not positioned, implementations must paint the layer it creates, within its parent stacking context, at the same stacking order that would be used if it were a positioned element with â€˜z-index: 0â€™ and â€˜opacity: 1â€™.<br>If an element with opacity less than 1 is positioned, the â€˜z-indexâ€™ property applies as described in [CSS21], except that â€˜autoâ€™ is treated as â€˜0â€™ since a new stacking context is always created.<br>â€”â€”<a href="http://www.w3.org/TR/css3-color/#transparency" target="_blank" rel="external">W3C</a></p>
</blockquote>
<p><strong>ç»“è®ºï¼š<br>å¦‚æœå…ƒç´ è®¾ç½®opacityå°äº1ä½†æœªå®šä½ï¼Œè§†ä¸ºcss2ä¸­å…ƒç´ å®šä½ï¼z-index:0ä¸”opacity:1çš„æƒ…å†µï¼›<br>å¦‚æœå…ƒç´ è®¾ç½®opacityå°äº1ä¸”å®šä½ï¼Œz-indexä¸ºautoï¼Œè§†ä¸ºcss2ä¸­å…ƒç´ å®šä½ä¸”z-index:0çš„æƒ…å†µï¼›<br>å¦‚æœå…ƒç´ è®¾ç½®opacityå°äº1ä¸”å®šä½ï¼Œz-indexä¸ä¸ºautoï¼Œåˆ™æ ¹æ®css2çš„æè¿°å±‚å ã€‚</strong><br>ï¼ˆå…¶ä»–CSS3åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ æƒ…å†µä¸opacityç›¸åŒï¼Œæ•…ä¸èµ˜è¿°ã€‚ï¼‰</p>
<hr>
<p>è‡³æ­¤ï¼Œåº”è¯¥èƒ½å¤Ÿæ˜ç™½ï¼š</p>
<ul>
<li>æ ¹å…ƒç´ ï¼ˆhtmlï¼‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å±‚å ä¸Šä¸‹æ–‡ï¼›</li>
<li>ä¸Šè¿°CSS2ï¼CSS3ä¸­çš„å…ƒç´ ä¼šåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ï¼›</li>
<li>åœ¨æ¯ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¸­éƒ½éµå¾ªä¸Šæ–‡ä¸­æåˆ°çš„å±‚å é¡ºåºï¼›</li>
<li>æ¯ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼ˆé™¤æ ¹å…ƒç´ ï¼‰åœ¨å®ƒçš„çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­éƒ½ä»¥ä¸€ä¸ªæ™®é€šå…ƒç´ æ¥å¯¹å¾…ï¼Œå…¶å†…éƒ¨çš„å±‚å è§„åˆ™ä¸å½±å“å…¶æœ¬èº«åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡ï¼ˆå³å…¶æ‰€å±å±‚å ä¸Šä¸‹æ–‡ï¼‰ä¸­çš„å±‚å é¡ºåºã€‚</li>
</ul>
<h3 id="4-3-å±‚å ä¸Šä¸‹æ–‡çš„å±‚çº§"><a href="#4-3-å±‚å ä¸Šä¸‹æ–‡çš„å±‚çº§" class="headerlink" title="4.3 å±‚å ä¸Šä¸‹æ–‡çš„å±‚çº§"></a>4.3 å±‚å ä¸Šä¸‹æ–‡çš„å±‚çº§</h3><ul>
<li>z-indexå€¼ä¸ºautoçš„å±‚å ä¸Šä¸‹æ–‡ï¼ˆz-indexæœªè®¾ç½®çš„å®šä½å…ƒç´ ï¼‰å±‚çº§ä¸º0ï¼›</li>
<li>z-indexå€¼ä¸º0ï¼ˆæ ¹å…ƒç´ ï¼z-indexä¸º0çš„å®šä½å…ƒç´ ï¼css3ä¸­æåˆ°çš„é™¤æ ¹å…ƒç´ ä¸å®šä½å…ƒç´ ä¹‹å¤–çš„å…¶ä»–ä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„æœªå®šä½æˆ–å·²å®šä½æ— è®¾ç½®z-indexçš„å…ƒç´ ï¼‰çš„å±‚å ä¸Šä¸‹æ–‡å±‚çº§ä¸º0ï¼›</li>
<li>z-indexå€¼å·²è®¾ç½®ä¸”ä¸ä¸º0çš„å±‚å ä¸Šä¸‹æ–‡å±‚çº§ï¼ˆz-indexå·²è®¾ç½®ä¸”ä¸ä¸º0çš„å®šä½å…ƒç´ ï¼‰ä¸z-indexçš„å€¼ç›¸ç­‰ï¼›</li>
<li>ç›¸åŒå±‚çº§çš„å±‚å ä¸Šä¸‹æ–‡éµå¾ªâ€œåæ¥å±…ä¸Šâ€çš„è§„åˆ™å±‚å ã€‚</li>
</ul>
<h2 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h2><ul>
<li><strong>å±äºåŒä¸€å±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ ï¼ˆæ— è®ºå®ƒä»¬åœ¨ç»“æ„ä¸Šæ˜¯å…„å¼Ÿæˆ–çˆ¶å­ï¼Œç”šè‡³æ˜¯ç¥–å­™ï¼‰ï¼Œéƒ½éµå¾ªä¸Šæ–‡æ‰€è¿°çš„å±‚å é¡ºåºï¼›</strong></li>
<li><strong>ä¸åŒçš„å±‚å ä¸Šä¸‹æ–‡ä¹‹é—´ï¼Œå±‚çº§è¾ƒå¤§çš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ åŠå…¶å†…éƒ¨å…ƒç´ ä½äºå±‚çº§å°çš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ åŠå…¶å†…éƒ¨å…ƒç´ ä¹‹ä¸Šï¼›</strong></li>
<li><strong>ä¸åŒçš„å±‚å ä¸Šä¸‹æ–‡ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼›</strong></li>
<li><strong>å±‚å ä¸Šä¸‹æ–‡å¯åµŒå¥—ï¼Œå†…éƒ¨è§„åˆ™ä¸å½±å“å¤–éƒ¨ã€‚</strong></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å—¯~ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€ä½†å®¹æ˜“æ··ä¹±çš„çŸ¥è¯†ç‚¹~&lt;br&gt;é¦–å…ˆä¸Šä¸€å¤§æ®µæ–‡ç»‰ç»‰çš„w3cè§„èŒƒä»¥è¡¨æ˜è¿™æ˜¯ä¸€ç¯‡ä¸¥è‚ƒçš„å­¦æœ¯æ–‡ç« ï¼ˆè§‰å¾—å¤ªé•¿å¯å…ˆè·³è¿‡~ï¼‰ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In CSS 2.1, each box has a position in three dimensio
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="CSS" scheme="https://aotu.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Service Workersï¼šé‡‡ç”¨WebPåŠ¨æ€å“åº”å›¾ç‰‡</title>
    <link href="https://aotu.io/notes/2015/11/06/webp-responsive-image/"/>
    <id>https://aotu.io/notes/2015/11/06/webp-responsive-image/</id>
    <published>2015-11-06T10:44:25.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¯‘æ–‡åœ°å€ï¼š<a href="http://deanhume.com/Home/BlogPost/service-workers--dynamic-responsive-images-using-webp-images/10132/" target="_blank" rel="external">http://deanhume.com/Home/BlogPost/service-workers--dynamic-responsive-images-using-webp-images/10132/</a></p>
</blockquote>
<p>å›¾ç‰‡åœ¨å¦‚ä»Šçš„ç«™ç‚¹ä¸Šä¸å¯æˆ–ç¼ºã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä»¬ç½‘é¡µä¸Šæ²¡æœ‰å›¾ç‰‡ä¼šæ€æ ·ï¼Ÿé«˜è´¨é‡çš„å›¾ç‰‡èƒ½å¤Ÿä½¿ä½ çš„ç«™ç‚¹æ›´åŠ å‡ºè‰²ï¼Œä½†åŒæ—¶ä¼´éšç€ä¸€å®šçš„æ€§èƒ½æŸè€—ã€‚ç”±äºå›¾ç‰‡æ–‡ä»¶è¾ƒå¤§ï¼Œä¸‹è½½æ—¶é—´ç›¸å¯¹è¾ƒé•¿å¹¶ä¸”ä¼šå‡ç¼“é¡µé¢çš„åŠ è½½ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå¸¦å®½è¾ƒä½çš„ç”¨æˆ·ï¼Œç”¨æˆ·ä½“éªŒå°†ä¼šç‰¹åˆ«å·®ã€‚</p>
<p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé¢ï¼Œè¿™ç§ç°è±¡ä¼šæ›´åŠ æ˜æ˜¾ã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸ŠåŠ è½½å¤§å‹å›¾ç‰‡æ¶ˆè€—æ—¶é—´å–å†³ä½ çš„ç½‘ç»œä»¥åŠè¿æ¥é€Ÿåº¦ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªä¸è€å¿ƒçš„ç”¨æˆ·ï¼Œä½ å°†ä¼šå˜å¾—æ²®ä¸§ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰èƒ½åŠ›å¤„ç† <a href="https://responsiveimages.org/" target="_blank" rel="external">å“åº”å¼å›¾ç‰‡</a> ã€‚é€šè¿‡ä½¿ç”¨ <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element" target="_blank" rel="external">picture</a> æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è®¾å¤‡ä¸ºç”¨æˆ·æä¾›ä¸åŒå¤§å°ã€è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ä»¥åŠæ ¼å¼çš„å›¾ç‰‡ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 1024px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn.jpg, ./images/brooklyn-2x.jpg 2x, ./images/brooklyn-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 320px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn-small.jpg, ./images/brooklyn-small-2x.jpg 2x, ./images/brooklyn-small-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šä¸åŒçš„å›¾åƒå¤§å°åŠå…¶ç›¸åº”çš„è®¾å¤‡åƒç´ æ¯”ç»™ç»™å®šçš„å±å¹•å®½åº¦ã€‚ä½¿ç”¨ <strong>picture</strong> æ ‡ç­¾ï¼Œæµè§ˆå™¨å¯ä»¥åŸºäºè®¾å¤‡å†³å®šæœ€ä½³çš„å†…å®¹ã€‚ä»¥ä¸Šçš„ä»£ç å¯ä»¥å®Œç¾è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼Œä»¥é€‚åº”æ›´å¤šçš„åœºæ™¯ã€‚</p>
<p>ä½ å¯èƒ½å¬è¿‡<strong>WebP</strong>å›¾ç‰‡æ ¼å¼ã€‚ç›¸æ¯”äºPNGå›¾ç‰‡ï¼Œå…¶æ–‡ä»¶å¤§å°èƒ½å¤ŸèŠ‚çœ26ï¼…ï¼›ç›¸æ¯”äºJPEGå›¾ç‰‡ï¼Œèƒ½å¤ŸèŠ‚çœå¤§çº¦25ï¼…-34%ã€‚ç›®å‰ï¼ŒChromeã€Operaä»¥åŠAndroidèƒ½å¤Ÿæ”¯æŒWebPæ ¼å¼ï¼Œä½†Safariå’ŒIEå°šæœªæ”¯æŒã€‚æ—¢ç„¶æˆ‘ä»¬èƒ½å¤Ÿç”¨pictureæ ‡ç­¾æ¥å¤„ç†å“åº”å¼å›¾ç‰‡ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿä½¿ç”¨WebPæ ¼å¼çš„å›¾ç‰‡å¹¶ä¸”å…è®¸æµè§ˆå™¨åœ¨ä¸æ”¯æŒWebPæ—¶è¿›è¡Œå›é€€ã€‚</p>
<p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/WebP/logo-webp.png" alt="webp"></p>
<p>è®©æˆ‘ä»¬åœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ WebPå›¾ç‰‡çš„æ”¯æŒã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¦ç¡®ä¿èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„DPRä½¿ç”¨æœ€ä½³è§†è§‰æ•ˆæœçš„å›¾ç‰‡ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- JPEG Images --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 1024px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn.jpg, ./images/brooklyn-2x.jpg 2x, ./images/brooklyn-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 320px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn-small.jpg, ./images/brooklyn-small-2x.jpg 2x, ./images/brooklyn-small-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line">    <span class="comment">&lt;!-- WebP Images --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 1024px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn.webp, ./images/brooklyn-2x.webp 2x, ./images/brooklyn-3x.webp 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/webp"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 320px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn-small.webp, ./images/brooklyn-small-2x.webp 2x, ./images/brooklyn-small-3x.webp 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/webp"</span>&gt;</div><div class="line">        <span class="comment">&lt;!-- The fallback image --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span></span></div><div class="line">        <span class="attr">src</span>=<span class="string">"./images/brooklyn.jpg"</span> <span class="attr">alt</span>=<span class="string">"Brooklyn Bridge - New York"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†èƒ½å¤ŸåŒæ—¶ä½¿ç”¨JPEGå’ŒWebPå›¾ç‰‡çš„pictureæ ‡ç­¾ã€‚æµè§ˆå™¨å°†æ ¹æ®è®¾å¤‡å†³å®šæœ€ä½³çš„é€‰é¡¹ã€‚ç”±äºWebPå¹¶ä¸æ”¯æŒIEå’ŒSafariï¼Œä½¿ç”¨WebPå›¾ç‰‡æ„å‘³ç€ä½ éœ€è¦åœ¨æœåŠ¡å™¨ä¸ŠåŒæ—¶ä¿å­˜WebPå’ŒJPEGæ ¼å¼çš„å›¾ç‰‡å‰¯æœ¬ã€‚ä¸Šé¢çš„ä»£ç è¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬å½“å‰çš„éœ€æ±‚ï¼Œä½†è¯•æƒ³ä¸€ä¸‹å¦‚æœæ¯å¼ é‡‡ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™ï¼Œä»£ç å°†ä¼šå˜å¾—éå¸¸è‡ƒè‚¿ã€‚å½“ä½ çš„ç«™ç‚¹å¼€å§‹å¢é•¿æ—¶ï¼Œä¸ºæ¯å¼ å›¾ç‰‡ç¼–å†™ä¸Šé¢çš„ä»£ç å°†ä¼šå˜å¾—éå¸¸ä¹å‘³ã€‚è¿™æ—¶å€™ï¼Œä¾¿å¯ä»¥é‡‡ç”¨Service Workersæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="http://a43d55f6a02c4be185ce-9cfa4cf7c673a59966ad8296f4c88804.r44.cf3.rackcdn.com/Service-Workers-WebP/accept-headers-webp.png" alt="webp"></p>
<p>æˆ‘ä»¬é‡‡ç”¨å¼€å‘è€…å·¥å…·è§‚å¯ŸHTTPè¯·æ±‚å¤´éƒ¨ï¼Œå¯ä»¥çœ‹å‡ºå¯ä»¥æ ¹æ®Acceptå¤´éƒ¨æ¥åˆ¤æ–­æˆ‘ä»¬çš„æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebPå›¾ç‰‡ã€‚ä¸ºäº†åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¹¶å¼€å§‹æä¾›WebPå›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ªService Workerã€‚Service Workerçš„ä¸€å¤§ç‰¹æ€§å°±æ˜¯ï¼Œå®ƒä»¬èƒ½å¤Ÿæ‹¦æˆªç½‘ç»œè¯·æ±‚ï¼Œè¿™æ ·å­ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå®Œå…¨æ§åˆ¶å“åº”å†…å®¹ã€‚ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç›‘å¬HTTPå¤´éƒ¨ï¼Œå¹¶å†³å®šå¦‚ä½•åšã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºService Workersçš„å†…å®¹ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="https://github.com/slightlyoff/ServiceWorker" target="_blank" rel="external">Github</a>åº“è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬åœ¨htmlé¡µé¢æ·»åŠ å¦‚ä¸‹ä»£ç ç”¨äºæ³¨å†ŒService Workerã€‚ä»¥ä¸‹çš„ä»£ç å¼•ç”¨service-worker.jsæ–‡ä»¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">// Register the service worker</span></div><div class="line"><span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</div><div class="line">	navigator.serviceWorker.register(<span class="string">'/service-worker.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">registration</span>) </span>&#123;</div><div class="line">    <span class="comment">// Registration was successful</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'ServiceWorker registration successful with scope: '</span>, registration.scope);</div><div class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="comment">// registration failed :(</span></div><div class="line">    	<span class="built_in">console</span>.log(<span class="string">'ServiceWorker registration failed: '</span>, err);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªç®€å•çš„æ£€æŸ¥ï¼Œåˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒService Workerï¼Œå¦‚æœæ”¯æŒï¼Œæ³¨å†Œå¹¶å®‰è£…Service Workerã€‚è¿™æ®µä»£ç ä»£ç æœ€å¥½çš„åœ°æ–¹å°±æ˜¯åšäº†å…¼å®¹å¤„ç†ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒService Workersï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å›é€€å¹¶ä¸”ç”¨æˆ·ä¸ä¼šæ³¨æ„åˆ°å…¶ä¸­å·®åˆ«ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºService Workeræ–‡ä»¶â€˜service-worker.jsâ€˜ï¼Œç”¨äºæ‹¦æˆªæ­£åœ¨ä¼ é€’åˆ°æœåŠ¡å™¨çš„è¯·æ±‚ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="comment">// Listen to fetch events</span></div><div class="line">self.addEventListener(<span class="string">'fetch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// Check if the image is a jpeg</span></div><div class="line">  <span class="keyword">if</span> (<span class="regexp">/\.jpg$|.png$/</span>.test(event.request.url)) &#123;</div><div class="line"></div><div class="line">  <span class="comment">// Inspect the accept header for WebP support</span></div><div class="line">  <span class="keyword">var</span> supportsWebp = <span class="literal">false</span>;</div><div class="line">  <span class="keyword">if</span> (event.request.headers.has(<span class="string">'accept'</span>))&#123;</div><div class="line">	supportsWebp = event.request.headers</div><div class="line">        	                    .get(<span class="string">'accept'</span>)</div><div class="line">                                    .includes(<span class="string">'webp'</span>);</div><div class="line">      	&#125;</div><div class="line"></div><div class="line">  	<span class="comment">// If we support WebP</span></div><div class="line">  	<span class="keyword">if</span> (supportsWebp)</div><div class="line">  	&#123;</div><div class="line">		<span class="comment">// Clone the request</span></div><div class="line">		<span class="keyword">var</span> req = event.request.clone();</div><div class="line"></div><div class="line">	        <span class="comment">// Build the return URL</span></div><div class="line">	    	<span class="keyword">var</span> returnUrl = req.url.substr(<span class="number">0</span>, req.url.lastIndexOf(<span class="string">"."</span>)) + <span class="string">".webp"</span>;</div><div class="line"></div><div class="line">		event.respondWith(</div><div class="line">		  fetch(returnUrl, &#123;</div><div class="line">		     <span class="attr">mode</span>: <span class="string">'no-cors'</span></div><div class="line">		   &#125;)</div><div class="line">		);</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ç¤ºä¾‹ä»£ç åšäº†ä¸€ç³»åˆ—çš„äº‹æƒ…ï¼Œè®©æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥åˆ†è§£ã€‚</p>
<p>åœ¨å‰é¢å‡ è¡Œï¼Œæˆ‘æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨æ¥ç›‘å¬ä»»ä½•ä¸€ä¸ªfetchäº‹ä»¶ã€‚å½“æ¯ä¸ªè¯·æ±‚å‘ç”Ÿæ—¶ï¼Œå…ˆåˆ¤æ–­å½“å‰çš„è¯·æ±‚æ˜¯å¦æ˜¯è·å–JPEGæˆ–è€…PNGæ ¼å¼çš„å›¾ç‰‡ã€‚å¦‚æœå½“å‰çš„è¯·æ±‚æ˜¯è·å–å›¾ç‰‡ï¼Œæˆ‘å°±èƒ½æ ¹æ®HTTPè¯·æ±‚å¤´éƒ¨æ¥å†³å®šæœ€ä½³çš„å“åº”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘é€šè¿‡æ£€æŸ¥Acceptå¤´éƒ¨å¹¶ä¸”æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨â€œimage/webpâ€œ Mimeç±»å‹ã€‚ä¸€æ—¦æŸ¥è¯¢å®Œå¤´éƒ¨çš„å€¼ï¼Œæˆ‘å°±èƒ½ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒWebPå›¾ç‰‡ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒWebPå›¾ç‰‡ï¼Œå°±è¿”å›ç›¸åº”çš„WebPå›¾ç‰‡ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„HTMLçœ‹èµ·æ¥æ¯”è¾ƒæ•´æ´ï¼Œèƒ½å¤Ÿæ”¯æŒWebPå›¾ç‰‡è€Œå¹¶ä¸è‡ƒè‚¿ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 1024px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn.jpg, ./images/brooklyn-2x.jpg 2x, ./images/brooklyn-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">source</span></span></div><div class="line">        <span class="attr">media</span>=<span class="string">"(min-width: 320px)"</span></div><div class="line">        <span class="attr">srcset</span>=<span class="string">"./images/brooklyn-small.jpg, ./images/brooklyn-small-2x.jpg 2x, ./images/brooklyn-small-3x.jpg 3x"</span></div><div class="line">        <span class="attr">type</span>=<span class="string">"image/jpeg"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Service Workersç»™äº†æˆ‘ä»¬æ— é™çš„å¯èƒ½ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•åˆ°åŒ…æ‹¬å…¶ä»–å›¾ç‰‡æ ¼å¼ï¼Œç”šè‡³æ˜¯ç¼“å­˜ã€‚ä½ è¿˜èƒ½è½»æ¾åœ°æ·»åŠ æ”¯æŒIEçš„<a href="http://caniuse.com/#feat=jpegxr" target="_blank" rel="external">JPEGXR</a>ã€‚è¿™æ ·å­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«åœ°ç»™æˆ‘ä»¬çš„ç”¨æˆ·å±•ç¤ºæˆ‘ä»¬çš„é¡µé¢ã€‚</p>
<p>å¦‚æœä½ æƒ³çœ‹çœ‹ç¤ºä¾‹ä»£ç è¿è¡Œçš„æ•ˆæœï¼Œè¯·ç§»æ­¥åˆ°<a href="https://deanhume.github.io/Service-Workers-WebP" target="_blank" rel="external">deanhume.github.io/Service-Workers-WebP</a>ã€‚æ‰“å¼€æ”¯æŒè¿™äº›ç‰¹æ€§çš„æµè§ˆå™¨ï¼Œå¦‚Chromeï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå°±å¯ä»¥çœ‹åˆ°é¡µé¢çš„è¿è¡Œã€‚</p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul>
<li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element" target="_blank" rel="external">https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element</a></li>
<li><a href="http://scottjehl.github.io/picturefill/" target="_blank" rel="external">http://scottjehl.github.io/picturefill/</a></li>
<li><a href="https://developers.google.com/speed/webp/" target="_blank" rel="external">https://developers.google.com/speed/webp/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¯‘æ–‡åœ°å€ï¼š&lt;a href=&quot;http://deanhume.com/Home/BlogPost/service-workers--dynamic-responsive-images-using-webp-images/10132/&quot; target=
    
    </summary>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://aotu.io/cates/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="WebP" scheme="https://aotu.io/tags/WebP/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Adobe FLASH CCåˆ¶ä½œCanvasåŠ¨ç”»</title>
    <link href="https://aotu.io/notes/2015/11/02/flash-canvas/"/>
    <id>https://aotu.io/notes/2015/11/02/flash-canvas/</id>
    <published>2015-11-02T10:44:25.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>flashå¯ä»¥å¯¼å‡ºcanvasåŠ¨ç”»ï¼Œå¤§å¤§ç¼©çŸ­åˆ¶ä½œåŠ¨ç”»æ‰€éœ€è¦çš„æ—¶é—´ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯è§†åŒ–IDEï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å°‘å¾ˆå¤šä»£ç ã€‚åšå‡ºæ¥çš„åŠ¨ç”»ï¼Œå¯ä»¥æ›´åŠ ç²¾ç¡®ã€‚åŒæ—¶ï¼Œå¯ä»¥é€šç”¨ä½¿ç”¨å¸§è„šæœ¬ä¸­çš„ Javascriptï¼Œä¸ºèµ„æºæ·»åŠ äº¤äº’æ€§ã€‚</p>
<a id="more"></a>
<h2 id="æ–°å»ºHTML5-Canvasé¡¹ç›®"><a href="#æ–°å»ºHTML5-Canvasé¡¹ç›®" class="headerlink" title="æ–°å»ºHTML5 Canvasé¡¹ç›®"></a>æ–°å»ºHTML5 Canvasé¡¹ç›®</h2><p><img src="//img.aotu.io/youing/1.png" alt="æ–°å»º"></p>
<h3 id="èˆå°è®¾ç½®"><a href="#èˆå°è®¾ç½®" class="headerlink" title="èˆå°è®¾ç½®"></a>èˆå°è®¾ç½®</h3><p>èˆå°å¤§å°ä¿®æ”¹ä¸ºï¼š600x600 (<em>è¿™é‡Œå¯ä»¥æ ¹æ®è®¾è®¡ç¨¿è°ƒæ•´æ‰€éœ€è¦çš„èˆå°å¤§å°</em>)</p>
<h3 id="å¸§é¢‘"><a href="#å¸§é¢‘" class="headerlink" title="å¸§é¢‘"></a>å¸§é¢‘</h3><p>æ˜¯æŒ‡æ¯ç§’é’Ÿæ”¾æ˜ æˆ–æ˜¾ç¤ºçš„å¸§æˆ–å›¾åƒçš„æ•°é‡ï¼Œè¿™ä¸ªæ•°å€¼è®¾ç½®è¶Šå¤§ï¼ŒåŠ¨ç”»è¶Šå¿«ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æ€§èƒ½æ¶ˆè€—å¤§æˆ·ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸º36</p>
<p><img src="//img.aotu.io/youing/2.png" alt="å¸§é¢‘"></p>
<h2 id="å¯¼å…¥èµ„æº"><a href="#å¯¼å…¥èµ„æº" class="headerlink" title="å¯¼å…¥èµ„æº"></a>å¯¼å…¥èµ„æº</h2><p>æ–‡ä»¶ &gt; å¯¼å…¥ &gt; å¯¼å…¥åˆ°åº“</p>
<h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>å¿«æ·é”®Ctrl + Læˆ–è€…çª—å£èœå•ä¸‹ &gt; åº“</p>
<p>ä»èµ„æºåº“ä¸­æŠŠèµ„æºæ‹–åˆ°èˆå°è¿›å»,é€šè¿‡ç§»åŠ¨æ‹–æ‹½çš„å½¢å¼è¿›è¡Œå¸ƒå±€</p>
<p><img src="//img.aotu.io/youing/3.png" alt="å¸ƒå±€"></p>
<h2 id="å›¾å½¢ä¸å½±ç‰‡å‰ªè¾‘"><a href="#å›¾å½¢ä¸å½±ç‰‡å‰ªè¾‘" class="headerlink" title="å›¾å½¢ä¸å½±ç‰‡å‰ªè¾‘"></a>å›¾å½¢ä¸å½±ç‰‡å‰ªè¾‘</h2><p>æˆ‘ä»¬å¯ä»¥å°†å•ç‹¬çš„åŠ¨ç”»ï¼Œæ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å½±ç‰‡å‰ªè¾‘é‡Œï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„æ§åˆ¶åŠ¨ç”»ã€‚å‡ ä¸ªç‹¬ç«‹çš„å‰ªç‰‡å‰ªè¾‘ï¼Œå¯ä»¥ç»„æˆä¸€ä¸ªå®Œæ•´çš„åŠ¨ç”»ã€‚</p>
<p>å½“æˆ‘ä»¬æŠŠå›¾ç‰‡ä»èµ„æºåº“æ‹–åˆ°èˆå°æ—¶ï¼Œå®ƒè¿™ä¸ªæ—¶å€™ï¼Œåªæ˜¯æ™®é€šçš„ä½å›¾ï¼Œå¹¶ä¸èƒ½åšè¡¥å¸§åŠ¨ç”»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠå®ƒè½¬æ¢æˆå…ƒä»¶ã€‚</p>
<ul>
<li><strong>å›¾å½¢</strong>ç”±çŸ¢é‡å›¾æˆ–è€…æ˜¯ä½å›¾ç»„æˆã€‚</li>
<li><strong>å½±ç‰‡å‰ªè¾‘</strong>åŒ…å«åœ¨åŠ¨ç”»å½±ç‰‡ä¸­çš„å½±ç‰‡ç‰‡æ®µï¼Œæœ‰è‡ªå·±çš„æ—¶é—´è½´å’Œå±æ€§ã€‚å…·æœ‰äº¤äº’æ€§ï¼Œæ˜¯ç”¨é€”æœ€å¹¿ã€åŠŸèƒ½æœ€å¤šçš„éƒ¨åˆ†ã€‚</li>
</ul>
<p>ä¸‹é¢åˆ¶ä½œä»¥é£˜åŠ¨çš„é’±ï¼Œåšä¸ªä¾‹å­è¯´æ˜</p>
<p>é€‰æ‹©ä½å›¾ï¼Œå³é”® &gt; è½¬æ¢ä¸ºå…ƒä»¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¼¹å‡ºä¸€ä¸ªå¯¹è¯çª—å£ï¼Œæˆ‘ä»¬é¦–å…ˆé€‰æ‹©â€œå½±ç‰‡å‰ªè¾‘â€ï¼Œä¿å­˜ã€‚åŒå‡»è¿›å…¥åˆšæ‰åˆ›å§‹çš„å½±ç‰‡å‰ªè¾‘ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”±äºåˆšæ‰æˆ‘ä»¬åªæ˜¯æŠŠä½å›¾è½¬æˆäº†å½±ç‰‡å‰ªè¾‘ï¼Œä½†å®é™…ä¸Šï¼Œå®ƒé‡Œé¢ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªä½å›¾ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½åšåŠ¨ç”»æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å½±ç‰‡å‰ªè¾‘é‡Œï¼ŒæŠŠå›¾ç‰‡è½¬æ¢äº†â€œå›¾å½¢â€ã€‚</p>
<p><img src="//img.aotu.io/youing/4.png" alt="å›¾å½¢ä¸å½±ç‰‡"></p>
<h2 id="æ—¶é—´è½´"><a href="#æ—¶é—´è½´" class="headerlink" title="æ—¶é—´è½´"></a>æ—¶é—´è½´</h2><p>ä¸Šé¢å·²ç»æŠŠå›¾ç‰‡è½¬æˆå›¾å½¢å…ƒä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨éœ€è¦æ—¶é—´è½´æŸä¸ªåœ°æ–¹ä¸­æ’å…¥å…³é”®å¸§ã€‚è¿™é‡Œæˆ‘ä»¬åœ¨30,60å¸§å¤„æ’å…¥å…³é”®å¸§ã€‚ç„¶ååœ¨30å¸§å¤„ï¼Œç§»åŠ¨å…ƒä»¶çš„ä½ç½®ï¼Œç„¶ååœ¨æ¯ä¸ªå…³é”®å¸§çš„ä¸­é—´å³é”®ï¼Œé€‰æ‹©â€œåˆ›å»ºä¼ ç»Ÿè¡¥é—´â€ã€‚é€Ÿåº¦å¯ä»¥é€šè¿‡åˆ é™¤æˆ–è€…å¢åŠ ä¸¤ä¸ªå…³é”®å¸§çš„è¡¥é—´åŠ¨ç”»æ—¶é—´é•¿åº¦æ¥æ§åˆ¶ã€‚</p>
<p><img src="//img.aotu.io/youing/5.png" alt="æ—¶é—´è½´"></p>
<p><img src="//img.aotu.io/youing/6.png" alt="æ—¶é—´è½´"></p>
<h2 id="åŠ¨ä½œæ’­æ”¾æ§åˆ¶"><a href="#åŠ¨ä½œæ’­æ”¾æ§åˆ¶" class="headerlink" title="åŠ¨ä½œæ’­æ”¾æ§åˆ¶"></a>åŠ¨ä½œæ’­æ”¾æ§åˆ¶</h2><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›åŠ¨ç”»å¯ä»¥è¿ç»­ä»å¤´å†æ’­æ”¾ï¼Œå¯ä»¥åœ¨åŠ¨ç”»çš„æœ€åä¸€å¸§æ’å…¥ä¸€ä¸ªç©ºç™½å…³é”®å¸§ï¼Œæ‰“å¼€åŠ¨ä½œé¢æ¿ï¼Œç„¶åå†™ä¸Š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.gotoAndPlay(<span class="number">0</span>)</div></pre></td></tr></table></figure>
<p><img src="//img.aotu.io/youing/7.png" alt="åŠ¨ä½œæ’­æ”¾æ§åˆ¶"></p>
<p>å³å¯å›åˆ°ç¬¬ä¸€å¸§é‡æ–°æ’­æ”¾ï¼Œå¦‚æœå¸Œæœ›åœæ­¢åŠ¨ç”»ï¼Œåˆ™</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.<span class="built_in">stop</span>();</div></pre></td></tr></table></figure>
<p>å¦‚æœå¸Œæœ›è·³åˆ°æŸå¸§å»æ’­æ”¾</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.gotoAndPlay(n)</div></pre></td></tr></table></figure>
<p>å¦‚æœå¸Œæœ›è·³åˆ°æŸå¸§å¹¶åœæ­¢</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.gotoAndStop(n)</div></pre></td></tr></table></figure>
<h2 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h2><p>æ–‡ä»¶ &gt; å‘å¸ƒè®¾ç½®</p>
<h3 id="æ–‡ä»¶è¾“å‡º"><a href="#æ–‡ä»¶è¾“å‡º" class="headerlink" title="æ–‡ä»¶è¾“å‡º"></a>æ–‡ä»¶è¾“å‡º</h3><ul>
<li>å¾ªç¯æ—¶é—´è½´(<em>è¡¨ç¤ºæ˜¯å¦å¾ªç¯æ•´ä¸ªåŠ¨ç”»</em>)</li>
<li>è¦†ç›–HTML(<em>ç¬¬ä¸€æ¬¡å‘å¸ƒæ—¶å¯ä»¥é€‰ä¸Šï¼Œå¦‚æœå¯¹htmlæœ‰ä¿®æ”¹ï¼Œè®°å¾—æŠŠè¿™ä¸ªé€‰é¡¹å»æ‰,å¦åˆ™ä¼šå¯¹æ–‡ä»¶è¿›è¡Œè¦†ç›–æ“ä½œ</em>)</li>
</ul>
<h3 id="èµ„æºå¯¼å‡ºé€‰é¡¹"><a href="#èµ„æºå¯¼å‡ºé€‰é¡¹" class="headerlink" title="èµ„æºå¯¼å‡ºé€‰é¡¹"></a>èµ„æºå¯¼å‡ºé€‰é¡¹</h3><ul>
<li>å›¾åƒ(<em>æ˜¯å¦å¯¼å‡ºé›ªç¢§å›¾</em>)</li>
<li>javascriptå‘½åç©ºé—´(<em>åŸºæœ¬ä¸Šä¸éœ€è¦ä¿®æ”¹</em>)ï¼Œè¿™å‡ ä¸ªå±äºå…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨å‘å¸ƒåçš„jsæ–‡ä»¶ä¸­å†ä¿®æ”¹ã€‚</li>
</ul>
<p><img src="//img.aotu.io/youing/8.png" alt="èµ„æºå¯¼å‡º"></p>
<h2 id="ç”Ÿæˆhtml"><a href="#ç”Ÿæˆhtml" class="headerlink" title="ç”Ÿæˆhtml"></a>ç”Ÿæˆhtml</h2><p>æœ€ç»ˆä¼šç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶å’Œä¸€ä¸ªjsæ–‡ä»¶</p>
<h3 id="ç”Ÿæˆçš„htmlæ–‡ä»¶"><a href="#ç”Ÿæˆçš„htmlæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆçš„htmlæ–‡ä»¶"></a>ç”Ÿæˆçš„htmlæ–‡ä»¶</h3><ul>
<li>æ¡†æ¶è‡ªå¸¦çš„preloadjs,å¯ä»¥è½»æ¾ç®¡ç†èµ„æºé¢„åŠ è½½ï¼Œå®ƒæä¾›äº†ç›¸å…³apiå¯ä»¥è¿›è¡Œloadingç­‰æ“ä½œã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>people<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://code.createjs.com/easeljs-0.8.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://code.createjs.com/tweenjs-0.6.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://code.createjs.com/movieclip-0.8.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://code.createjs.com/preloadjs-0.6.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"people.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> canvas, stage, exportRoot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">	images = images||&#123;&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> loader = <span class="keyword">new</span> createjs.LoadQueue(<span class="literal">false</span>);</div><div class="line">	loader.addEventListener(<span class="string">"fileload"</span>, handleFileLoad);</div><div class="line">	loader.addEventListener(<span class="string">"complete"</span>, handleComplete);</div><div class="line">	loader.loadManifest(lib.properties.manifest);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleFileLoad</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (evt.item.type == <span class="string">"image"</span>) &#123; images[evt.item.id] = evt.result; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleComplete</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">	exportRoot = <span class="keyword">new</span> lib.people();</div><div class="line"></div><div class="line">	stage = <span class="keyword">new</span> createjs.Stage(canvas);</div><div class="line">	stage.addChild(exportRoot);</div><div class="line">	stage.update();</div><div class="line"></div><div class="line">	createjs.Ticker.setFPS(lib.properties.fps);</div><div class="line">	createjs.Ticker.addEventListener(<span class="string">"tick"</span>, stage);</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"init();"</span> <span class="attr">style</span>=<span class="string">"background-color:#D4D4D4"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"620"</span> <span class="attr">style</span>=<span class="string">"background-color:#FFFFFF"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆçš„jsæ–‡ä»¶"><a href="#ç”Ÿæˆçš„jsæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆçš„jsæ–‡ä»¶"></a>ç”Ÿæˆçš„jsæ–‡ä»¶</h3><ul>
<li>ç”Ÿæˆçš„åŠ¨ç”»é…ç½®åŠè„šæœ¬éƒ½åœ¨è¿™ä¸ªjsæ–‡ä»¶é‡Œé¢ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ç›¸å…³æ•°æ®ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">lib, img, cjs, ss</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p; <span class="comment">// shortcut to reference prototypes</span></div><div class="line"></div><div class="line"><span class="comment">// library properties:</span></div><div class="line">lib.properties = &#123;</div><div class="line">	<span class="attr">width</span>: <span class="number">600</span>,</div><div class="line">	<span class="attr">height</span>: <span class="number">620</span>,</div><div class="line">	<span class="attr">fps</span>: <span class="number">36</span>,</div><div class="line">	<span class="attr">color</span>: <span class="string">"#FFFFFF"</span>,</div><div class="line">	<span class="attr">manifest</span>: [</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/bigband.png"</span>, <span class="attr">id</span>:<span class="string">"bigband"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/Bitmap1.png"</span>, <span class="attr">id</span>:<span class="string">"Bitmap1"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/body.png"</span>, <span class="attr">id</span>:<span class="string">"body"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/eye1.png"</span>, <span class="attr">id</span>:<span class="string">"eye1"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/eye2.png"</span>, <span class="attr">id</span>:<span class="string">"eye2"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/face1.png"</span>, <span class="attr">id</span>:<span class="string">"face1"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/face2.png"</span>, <span class="attr">id</span>:<span class="string">"face2"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/face3.png"</span>, <span class="attr">id</span>:<span class="string">"face3"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/hair.png"</span>, <span class="attr">id</span>:<span class="string">"hair"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/hand2.png"</span>, <span class="attr">id</span>:<span class="string">"hand2"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/hand3.png"</span>, <span class="attr">id</span>:<span class="string">"hand3"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/hand4.png"</span>, <span class="attr">id</span>:<span class="string">"hand4"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/index30.png"</span>, <span class="attr">id</span>:<span class="string">"index30"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/index302.png"</span>, <span class="attr">id</span>:<span class="string">"index302"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/index40.png"</span>, <span class="attr">id</span>:<span class="string">"index40"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/index5.png"</span>, <span class="attr">id</span>:<span class="string">"index5"</span>&#125;,</div><div class="line">		&#123;<span class="attr">src</span>:<span class="string">"images/shadow.png"</span>, <span class="attr">id</span>:<span class="string">"shadow"</span>&#125;</div><div class="line">	]</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// symbols:</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">(lib.bigband = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.bigband);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">295</span>,<span class="number">538</span>);</div><div class="line"></div><div class="line"></div><div class="line">(lib.Bitmap1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.Bitmap1);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">543</span>,<span class="number">577</span>);</div><div class="line"></div><div class="line"></div><div class="line">(lib.body = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.body);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">521</span>,<span class="number">242</span>);</div><div class="line"></div><div class="line"></div><div class="line">(lib.eye1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.eye1);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">73</span>,<span class="number">58</span>);</div><div class="line"></div><div class="line"></div><div class="line">(lib.eye2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.eye2);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">72</span>,<span class="number">35</span>);</div><div class="line"></div><div class="line"></div><div class="line">(lib.face1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize(img.face1);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Bitmap();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">0</span>,<span class="number">0</span>,<span class="number">297</span>,<span class="number">368</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// stage content:</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">(lib.people = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.initialize();</div><div class="line"></div><div class="line">	<span class="comment">// people</span></div><div class="line">	<span class="keyword">this</span>.instance = <span class="keyword">new</span> lib.peoplemc();</div><div class="line">	<span class="keyword">this</span>.instance.setTransform(<span class="number">295</span>,<span class="number">312.5</span>);</div><div class="line"></div><div class="line">	<span class="comment">// qpmask (mask)</span></div><div class="line">	<span class="keyword">var</span> mask = <span class="keyword">new</span> cjs.Shape();</div><div class="line">	mask._off = <span class="literal">true</span>;</div><div class="line">	mask.graphics.p(<span class="string">"EgpUgqAMBU1AAAMAAABaIMhU1AAAg"</span>);</div><div class="line">	mask.setTransform(<span class="number">278.5</span>,<span class="number">308.1</span>);</div><div class="line"></div><div class="line">	<span class="comment">// qp</span></div><div class="line">	<span class="keyword">this</span>.instance_1 = <span class="keyword">new</span> lib.qpmc();</div><div class="line">	<span class="keyword">this</span>.instance_1.setTransform(<span class="number">291.5</span>,<span class="number">263.5</span>);</div><div class="line"></div><div class="line">	<span class="keyword">this</span>.instance_1.mask = mask;</div><div class="line"></div><div class="line">	<span class="keyword">this</span>.addChild(<span class="keyword">this</span>.instance_1,<span class="keyword">this</span>.instance);</div><div class="line">&#125;).prototype = p = <span class="keyword">new</span> cjs.Container();</div><div class="line">p.nominalBounds = <span class="keyword">new</span> cjs.Rectangle(<span class="number">263</span>,<span class="number">31.5</span>,<span class="number">617</span>,<span class="number">905.5</span>);</div><div class="line"></div><div class="line">&#125;)(lib = lib||&#123;&#125;, images = images||&#123;&#125;, createjs = createjs||&#123;&#125;, ss = ss||&#123;&#125;);</div><div class="line"><span class="keyword">var</span> lib, images, createjs, ss;</div></pre></td></tr></table></figure>
<h2 id="é™„ä¸Šæœ€ç»ˆæ•ˆæœ"><a href="#é™„ä¸Šæœ€ç»ˆæ•ˆæœ" class="headerlink" title="é™„ä¸Šæœ€ç»ˆæ•ˆæœ"></a>é™„ä¸Šæœ€ç»ˆæ•ˆæœ</h2><p><a href="http://b.gengshu.net/doc/flash/people.html" target="_blank" rel="external">ç‚¹æˆ‘çœ‹æ•ˆæœ</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;flashå¯ä»¥å¯¼å‡ºcanvasåŠ¨ç”»ï¼Œå¤§å¤§ç¼©çŸ­åˆ¶ä½œåŠ¨ç”»æ‰€éœ€è¦çš„æ—¶é—´ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯è§†åŒ–IDEï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å°‘å¾ˆå¤šä»£ç ã€‚åšå‡ºæ¥çš„åŠ¨ç”»ï¼Œå¯ä»¥æ›´åŠ ç²¾ç¡®ã€‚åŒæ—¶ï¼Œå¯ä»¥é€šç”¨ä½¿ç”¨å¸§è„šæœ¬ä¸­çš„ Javascriptï¼Œä¸ºèµ„æºæ·»åŠ äº¤äº’æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Flash" scheme="https://aotu.io/tags/Flash/"/>
    
      <category term="Canvas" scheme="https://aotu.io/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>å‰æ–¹æœ‰å‘ï¼Œè¯·ç»•é“â€”â€”Zepto ä¸­ä½¿ç”¨ CORS</title>
    <link href="https://aotu.io/notes/2015/10/26/zepto-cors/"/>
    <id>https://aotu.io/notes/2015/10/26/zepto-cors/</id>
    <published>2015-10-26T04:24:22.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œç°åœ¨ç§»åŠ¨ Web å¼€å‘ä¸­ï¼Œ<code>Zepto.js</code> æ˜¯ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„åº“ä¹‹ä¸€ã€‚ç”±äºå®ƒçš„ä½“ç§¯å°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œæœ‰ç€å’Œ <code>jquery</code> ç±»ä¼¼çš„ APIï¼Œè€Œå¤‡å—å¼€å‘è€…å–œçˆ±ã€‚å¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸å°‘ <code>Zepto</code> çš„å‘ï¼Œè€Œä¸”æ–‡ä»¶ä½“ç§¯çš„å¤§å°è·Ÿä»£ç çš„æ‰§è¡Œæ•ˆç‡å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæœ€åæˆ‘ä»¬å‘ç° <code>Zepto</code> å¹¶æ²¡æœ‰å¤ªå¤§çš„åµç”¨ã€‚</p>
<p>jsperf ä¸Šæœ‰ä¸ª <code>zepto</code> å’Œ <code>jquery</code> DOM æ“ä½œçš„å¯¹æ¯”æµ‹è¯•ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸€ä¸‹ï¼š<a href="http://jsperf.com/zepto-vs-jquery-2013/25" target="_blank" rel="external">zepto vs jquery - selectors</a></p>
<blockquote>
<p>å¼€æºé¡¹ç›®å¥½åçš„ä¸€ä¸ªè¯„åˆ¤æ ‡å‡†ä¹‹ä¸€ï¼šæ˜¯å¦æœ‰ä¸€ä¸ªå¼ºå¤§çš„ç¤¾åŒºå’Œä¸€æ‰¹ç§¯æçš„è´¡çŒ®è€…</p>
</blockquote>
<p>æˆ‘ä»¬ç®€å•çš„çœ‹ä¸€ä¸ªå¯¹æ¯”ï¼š<br><img src="http://jdc.jd.com/fd/blog_image/cors_pic_01.jpg" alt="zepto github"><br><img src="http://jdc.jd.com/fd/blog_image/cors_pic_02.jpg" alt="jquery github"></p>
<p>å¾ˆæ˜æ˜¾ï¼Œ<code>Zepto</code> çš„æ´»è·ƒåº¦è¿œè¿œæ²¡æœ‰ <code>jquery</code> é«˜ã€‚ä¸è¿‡è¨€å½’æ­£ä¼ ï¼Œè¿˜æ˜¯å›åˆ° <code>Zepto</code> çš„è¯é¢˜ä¸Šã€‚</p>
<hr>
<p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä»¬åœ¨ç§»åŠ¨ç«¯ä¸Šé¢ä½¿ç”¨ <code>zepto</code>å¹¶æ²¡æœ‰å‡ºç°å¤ªå¤§çš„é—®é¢˜ã€‚ç›´è‡³æˆ‘ä»¬å°† Ajax è·¨åŸŸè¯·æ±‚ä» iframe çš„æ–¹å¼åˆ‡æ¢æˆ <code>CORS</code> ä¹‹åï¼Œä¸€ä¸ªæ¯”è¾ƒéšè”½çš„ Bug å‡ºç°äº†ã€‚</p>
<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><ol>
<li>é¡µé¢åœ¨Webviewä¸­ï¼Œç‚¹å‡»æŒ‰é’®æ— æ•ˆ</li>
<li>é¡µé¢åœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­ï¼Œæ— æ³•æ‹‰å–åˆ°ç”¨æˆ·çš„ä¿¡æ¯</li>
</ol>
<h3 id="é—®é¢˜å®šä½"><a href="#é—®é¢˜å®šä½" class="headerlink" title="é—®é¢˜å®šä½"></a>é—®é¢˜å®šä½</h3><p>æˆ‘é€šè¿‡ <code>Fiddler</code> æˆ– <code>Charles</code> æŠ“åŒ…å‘ç°ï¼Œåœ¨ webview ä¸­ï¼Œç‚¹å‡»æŒ‰é’®ä¹‹åçš„ Ajax è¯·æ±‚å¹¶æœªå‘å‡ºï¼Œä½†æ˜¯é¡µé¢åœ¨æ‰‹æœºQQæµè§ˆå™¨å’Œ PC ä¸Šè¡¨ç°éƒ½æ˜¯æ­£å¸¸çš„ã€‚å› ä¸ºæ˜¯åœ¨åˆ‡æ¢ CORS ä¹‹åï¼Œé¡µé¢æ‰å‡ºç°å¼‚å¸¸çš„ï¼Œåœ¨æ­¤ä¹‹å‰å¹¶æ²¡æœ‰ç‰ˆæœ¬è¿­ä»£ã€‚æ‰€ä»¥ CORS ä»£ç é¦–å½“å…¶å†²è¦è¿›è¡Œæ·±å±‚æ¬¡çš„ code-reviewï¼Œäºæ˜¯æˆ‘ç›´æ¥åœ¨ <code>CORS</code> çš„ä»£ç å—ä¸Šè¿›è¡Œ <code>try-catch</code>ï¼Œç»“æœæ•è·åˆ°å¼‚å¸¸ï¼š</p>
<p><code>INVALID_STATE_ERR: DOM Exception 11</code></p>
<h3 id="é—®é¢˜æ·±å…¥å‰–æ"><a href="#é—®é¢˜æ·±å…¥å‰–æ" class="headerlink" title="é—®é¢˜æ·±å…¥å‰–æ"></a>é—®é¢˜æ·±å…¥å‰–æ</h3><p>å…ˆæ¥çœ‹çœ‹æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (options.withCredentials) &#123;</div><div class="line">    options = $.extend(options, &#123;</div><div class="line">        <span class="attr">xhr</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="built_in">window</span>.XMLHttpRequest()</div><div class="line">         xhr.withCredentails = <span class="literal">true</span></div><div class="line">         <span class="keyword">return</span> xhr</div><div class="line">     &#125;</div><div class="line">&#125;&#125;</div><div class="line"><span class="keyword">delete</span> options.withCredentails</div><div class="line"></div><div class="line">$.ajax(options)</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­éƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯åœ¨ Android çš„ webview å’Œä¸€äº›æ—§ç‰ˆæœ¬çš„æ‰‹æœºæµè§ˆå™¨ä¸­ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<p>ä»¥ä¸Šä»£ç å’Œæ™®é€šçš„ Ajax è¯·æ±‚ä¸åŒçš„åœ°æ–¹åœ¨äºè®¾ç½®äº† <code>CORS</code> çš„ <code>withCredentials</code> å±æ€§ã€‚ï¼ˆ<code>CORS</code> è¯·æ±‚é»˜è®¤æ˜¯ä¸ä¼šå¸¦ä¸Š <code>cookies</code> ç­‰èº«ä»½ä¿¡æ¯çš„ï¼Œå¦‚æœéœ€è¦åœ¨è¯·æ±‚ä¸­å¸¦ä¸Š <code>cookies</code>ï¼Œåˆ™éœ€è¦è®¾ç½® <code>XMLHttpRequest</code> çš„ <code>withCredentials</code> å±æ€§å€¼ä¸º trueï¼‰</p>
<p>ä¸‹é¢é€šè¿‡ä¸¤ä¸ªä¾‹å­æ¥åˆ†æä¸€ä¸‹ï¼š</p>
<p>ä¾‹ä¸€ï¼š</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var xhr = <span class="built_in">new</span> XMLHttpRequest()</div><div class="line">xhr.withCrendentials = <span class="literal">true</span></div><div class="line">xhr.<span class="built_in">open</span>(<span class="string">'POST'</span>, <span class="string">'url'</span>, <span class="literal">true</span>)</div><div class="line">xhr.<span class="built_in">send</span>()</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­ä¾æ—§ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š<code>INVALID_STATE_ERR: DOM Exception 11</code></p>
<p>ä¾‹äºŒï¼š</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var xhr = <span class="built_in">new</span> XMLHttpRequest()</div><div class="line">xhr.<span class="built_in">open</span>(<span class="string">'POST'</span>, <span class="string">'url'</span>, <span class="literal">true</span>)</div><div class="line">xhr.withCredentials = <span class="literal">true</span></div><div class="line">xhr.<span class="built_in">send</span>()</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå¹¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸<br>ä¸ºä»€ä¹ˆ <code>xhr.withCredentials</code> èµ‹å€¼åœ¨ <code>xhr.open()</code> æ–¹æ³•ä¹‹å‰å°±ä¼šå‡ºé”™å‘¢ï¼Ÿ</p>
<p>ç§‰ç€ç§‘(xian)å­¦(de)ä¸¥(dan)è°¨(teng)çš„æ€åº¦ï¼Œç¿»çœ‹äº† W3C åœ¨ 2011 å¹´å’Œ 2012 å¹´å…³äº <code>XMLHttpRequest</code> çš„è§„èŒƒæ–‡æ¡£ï¼Œå‘ç°ä½¿ç”¨ <code>withCredentials</code> å±æ€§çš„è§„èŒƒå‘ç”Ÿäº†æ”¹å˜ã€‚</p>
<p>2011 å¹´çš„è§„èŒƒï¼š<br><img src="http://jdc.jd.com/fd/blog_image/cors_pic_03.png" alt="2011 CORS"></p>
<p>2012 å¹´çš„è§„èŒƒï¼š<br><img src="http://jdc.jd.com/fd/blog_image/cors_pic_04.png" alt="2012 CORS"></p>
<p>å¯¹æ¯”ä¸¤ä»½æ–‡æ¡£ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ step 1ï¼š<br>2011 å¹´çš„è§„èŒƒä¸­è§„å®šå½“ <code>XMLHttpRequest</code> çš„ <code>readyState</code> çŠ¶æ€ä¸æ˜¯ <code>OPENED</code> æ—¶ï¼Œä¼šæŠ¥é”™ï¼›<br>2012 å¹´çš„è§„èŒƒä¸­è§„å®šå½“ <code>XMLHttpRequest</code> çš„ <code>readyState</code> çŠ¶æ€ä¸æ˜¯ <code>UNSENT</code> æˆ– <code>OPENDED</code> æ—¶ï¼Œä¼šæŠ¥é”™ï¼›</p>
<p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ <code>XMLHttpRequest</code> çš„ <code>readyState</code> å€¼ï¼š</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>State</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>UNSENT</td>
<td>open() has not been called yet.</td>
</tr>
<tr>
<td>1</td>
<td>OPENED</td>
<td>send() has not been called yet.</td>
</tr>
<tr>
<td>2</td>
<td>HEADERS_RECEIVED</td>
<td>send() has been called,and headers and status are available.</td>
</tr>
<tr>
<td>3</td>
<td>LOADING</td>
<td>Downloading;responseText holds partial data</td>
</tr>
<tr>
<td>4</td>
<td>DONE</td>
<td>The operation is complete</td>
</tr>
</tbody>
</table>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œå½“ä¸€ä¸ª <code>XMLHttpRequest</code> å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œé»˜è®¤çš„ <code>readyState</code> çŠ¶æ€ä¸º <code>UNSENT</code>ï¼Œåªæœ‰æ‰§è¡Œäº† open() æ–¹æ³•å¹¶ä¸”è¿˜æ²¡æœ‰æ‰§è¡Œ send() æ–¹æ³•æ—¶ï¼Œ<code>readyState</code> çš„çŠ¶æ€æ‰ä¸º <code>OPENED</code>ã€‚</p>
<p>ç”±äºä¸€äº›è€ç‰ˆæœ¬çš„æµè§ˆå™¨æ˜¯æŒ‰ç…§ 2012 å¹´ä¹‹å‰çš„è§„èŒƒæ¥å®ç°çš„ï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†æµè§ˆå™¨ä¸­ï¼Œopen() æ–¹æ³•è¦åœ¨è®¾ç½® <code>withCredentials</code> å±æ€§ä¹‹å‰è°ƒç”¨ã€‚å› æ­¤ä¸ºäº†å…¼å®¹ï¼Œæ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯åœ¨ open() æ–¹æ³•ä¹‹åå†è®¾ç½® <code>withCredentials</code> å±æ€§ã€‚</p>
<p>ä¸‹é¢æ¥çœ‹çœ‹ zepto.js v1.1.3 çš„æºç ï¼š<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (settings.xhrFields) <span class="keyword">for</span> (name <span class="keyword">in</span> settings.xhrFields) xhr[name] = settings.xhrFields[name]</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="keyword">async</span> = <span class="string">'async'</span> <span class="keyword">in</span> settings ? settings.<span class="keyword">async</span> : <span class="literal">true</span></div><div class="line"></div><div class="line">xhr.open(settings.type, settings.url, <span class="keyword">async</span>, settings.username, settings.password)</div></pre></td></tr></table></figure></p>
<p><code>zepto</code> æ˜¯åœ¨ open() æ–¹æ³•ä¹‹å‰è®¾ç½® <code>XMLHttpRequest</code> çš„å±æ€§å€¼çš„ï¼Œæ‰€ä»¥è¿™ä¼šå¯¼è‡´åœ¨ä½¿ç”¨ <code>CORS</code> å¹¶ä¸”è®¾ç½® <code>withCredentials</code> çš„æ—¶å€™ï¼Œä»£ç åœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­æŠ¥é”™ã€‚Android webview ä¸­é‡ç°çš„å‡ ç‡å¾ˆå¤§ã€‚</p>
<hr>
<p>æ€»ç»“ï¼šåœ¨ä½¿ç”¨ <code>CORS</code> æ—¶ï¼Œå¦‚æœè¦ç»™ <code>withCredentials</code> èµ‹å€¼ï¼Œè¯·åŠ¡å¿…è¦åœ¨ open() æ–¹æ³•ä¹‹åï¼Œå¦åˆ™æ— æ³•å‘åå…¼å®¹ã€‚</p>
<p>å¯¹äº zepto.js çš„é—®é¢˜ï¼Œå·²ç»æœ‰ç”¨æˆ·å‘ä½œè€…æäº¤äº† PRï¼Œä½œè€…ä¹Ÿè¡¨ç¤ºä¼šåœ¨ä¸‹ä¸ªç‰ˆæœ¬ä¸­ä¿®å¤ï¼ˆå¯æ˜¯ç›´åˆ°ä»Šå¤©ï¼Œéƒ½æ›´æ–°åˆ° v1.1.6 ç‰ˆæœ¬äº†ï¼Œè¿˜æ˜¯æ²¡æœ‰ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œæ›´æ”¹ä¸€ä¸‹ä»£ç é¡ºåºå°±é‚£ä¹ˆéš¾å—ï¼Ÿï¼éš¾æ€ªé˜¿é‡Œä¹Ÿå«Œ zepto æ›´æ–°é€Ÿåº¦å¤ªæ…¢ï¼Œé—®é¢˜å¤šï¼Œæ‰€ä»¥è‡ªå·± fork ä»£ç è¿›è¡Œäº†å®šåˆ¶åŒ–ï¼‰ã€‚</p>
<p>æ‰€ä»¥ç›®å‰å¦‚æœè¦ç”¨ <code>zepto</code> æ¥è¿›è¡Œ <code>CORS</code> çš„è¯ï¼Œè¿˜æ˜¯éœ€è¦è‡ªå·±æ›´æ”¹ <code>zepto</code> çš„ ajax æ¨¡å—ä»£ç ï¼Œç„¶åæ‰‹åŠ¨æ„å»ºã€‚</p>
<hr>
<h3 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h3><p><a href="http://www.w3.org/TR/2011/WD-XMLHttpRequest2-20110816/#the-withcredentials-attribute" target="_blank" rel="external">XMLHttpRequest Level 2 2011</a><br><a href="http://www.w3.org/TR/XMLHttpRequest/" target="_blank" rel="external">XMLHttpRequest Level 1 2014</a><br><a href="http://www.w3.org/TR/XMLHttpRequest2/" target="_blank" rel="external">XMLHttpRequest Level 2 2014</a><br><a href="https://github.com/madrobby/zepto/issues/921" target="_blank" rel="external">Zepto issues</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œç°åœ¨ç§»åŠ¨ Web å¼€å‘ä¸­ï¼Œ&lt;code&gt;Zepto.js&lt;/code&gt; æ˜¯ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„åº“ä¹‹ä¸€ã€‚ç”±äºå®ƒçš„ä½“ç§¯å°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œæœ‰ç€å’Œ &lt;code&gt;jquery&lt;/code&gt; ç±»ä¼¼çš„ APIï¼Œè€Œå¤‡å—å¼€å‘è€…å–œçˆ±ã€‚å¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸å°‘ &lt;code&gt;Zepto&lt;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Zepto" scheme="https://aotu.io/tags/Zepto/"/>
    
      <category term="CORS" scheme="https://aotu.io/tags/CORS/"/>
    
  </entry>
  
  <entry>
    <title>æ¢ç©¶transformåŠ¨ç”»å…ƒç´ çš„z-index</title>
    <link href="https://aotu.io/notes/2015/10/21/z-index-and-translate3d/"/>
    <id>https://aotu.io/notes/2015/10/21/z-index-and-translate3d/</id>
    <published>2015-10-21T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="z-index-å’Œ-translate3d"><a href="#z-index-å’Œ-translate3d" class="headerlink" title="z-index å’Œ translate3d"></a>z-index å’Œ translate3d</h2><p>åœ¨ä¸€æ¬¡éœ€æ±‚ä¸­ï¼Œéœ€è¦åšå‡ºä¸‰å¼ å¡ç‰Œèµ°é©¬ç¯å¼æ»šåŠ¨çš„æ•ˆæœï¼Œç”±äºåœ¨å‰é¢çš„ä¸€å¼ å¡ç‰Œéœ€è¦æŒ¡ä½åé¢çš„å¡ç‰Œï¼Œè‡ªç„¶è€Œç„¶åœ°å°±ç”¨ z-index ä½¿å‰é¢çš„å¡ç‰Œæ˜¾ç¤ºåœ¨æœ€ä¸Šé¢ï¼Œé…ä»¥ transform åŠ¨ç”»è®©â€œèµ°é©¬ç¯â€æ»šèµ·æ¥ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåœ¨ PC ä¾§ Chrome ä¸­è¡¨ç°è‰¯å¥½ï¼Œåœ¨æœ¬äººæ‰‹æœºæµè§ˆå™¨ä¸­ä¹Ÿè¡¨ç°è‰¯å¥½ï¼Œæœ€åæµ‹è¯•æ—¶å´å‘ç°ï¼Œåœ¨å¾®ä¿¡å®¢æˆ·ç«¯æˆ– QQ å®¢æˆ·ç«¯ä¸­æ‰“å¼€é¡µé¢å‡ºç°é—®é¢˜ï¼Œâ€œèµ°é©¬ç¯â€æ»šåŠ¨æ—¶ï¼Œå¡ç‰Œå…ˆé€šè¿‡ transform å°±ä½åï¼Œæ‰æŠŠ z-index è®¾ç½®è¾ƒå¤§çš„å¡ç‰Œç½®äºä¸Šé¢ï¼Œæ„Ÿè§‰ä¸Šéå¸¸çš„ä¸æµç•…ã€‚</p>
<p><img src="//img.aotu.io/Manjiz/2015/151116_card.png" alt=""></p>
<p>ç©¶å…¶åŸå› ï¼Œå‘ç°è¿™æ˜¯æŸäº›æµè§ˆå™¨çš„æ¸²æŸ“è§„åˆ™ï¼Œæ¶‰åŠåˆ° <code>stacking context</code> çš„æ¦‚å¿µï¼Œtransform çš„å…ƒç´ ä¼šåˆ›å»ºæ–°çš„ DOMï¼Œå±‚çº§ä¼šåœ¨æ™®é€šå…ƒç´ çš„ä¸Šé¢ï¼Œé™¤äº† transform ,è¿˜æœ‰å“ªäº›æƒ…å†µä¼šåˆ›å»ºæ–° <code>stacking context</code>å‘¢ï¼Ÿ</p>
<p>MDN ä¸Šæœ‰ç›¸å…³ä»‹ç»ï¼š</p>
<blockquote>
<ul>
<li>the root element (HTML),</li>
<li><strong>positioned (absolutely or relatively) with a z-index value other than â€œautoâ€,</strong></li>
<li><strong>a flex item with a z-index value other than â€œautoâ€,</strong></li>
<li><strong>elements with an opacity value less than 1,</strong></li>
<li><strong>elements with a transform value other than â€œnoneâ€,</strong></li>
<li>elements with a mix-blend-mode value other than â€œnormalâ€,</li>
<li>elements with isolation set to â€œisolateâ€, on mobile WebKit and Chrome 22+, position: fixed always creates a new stacking context, even when z-index is â€œautoâ€,</li>
<li>specifing any attribute above in will-change even you donâ€™t write themselves directly</li>
</ul>
</blockquote>
<p>ä¸‹å›¾æ˜¯å¯¹ transform å’Œ opacity çš„æµ‹è¯•ç»“æœï¼š</p>
<p><img src="//img.aotu.io/Manjiz/2015/151117_twotest.png" alt=""></p>
<p>å¾ˆæ˜æ˜¾ï¼Œçº¢è‰² div éƒ½åœ¨ç»¿è‰² div ä¸Šé¢äº†ï¼Œè¯´æ˜çœŸçš„æœ‰åˆ›å»ºäº†ä¸ªæ›´é«˜å±‚çº§çš„ <code>stacking context</code>ã€‚å†åšè¿›ä¸€æ­¥æµ‹è¯•ï¼Œæˆ‘ç»™ä¸¤ç»„çš„ div éƒ½åŠ äº† <code>position:relative;z-index:1;</code>ï¼Œç»“æœç»¿è‰²çš„éƒ½åœ¨ä¸Šé¢äº†ï¼Œæ‰‹æœºå¾®ä¿¡ä¸Šä¹Ÿä¸€æ ·ï¼Œè¿™èƒ½ä¸èƒ½è¯´æ˜ z-index å¯¹å±‚çº§çš„å½±å“å¤§äº transform å’Œ opacity å‘¢ã€‚</p>
<p>è‡³äº transform å˜æ¢çš„æ—¶å€™ä¼šè®© z-index â€œä¸´æ—¶å¤±æ•ˆâ€ï¼Œå…¶å®å¹¶é z-index å¤±æ•ˆäº†ï¼Œåªæ˜¯ z-index è¢«ç”¨åœ¨ä¸åŒçš„ <code>stacking context</code> ä¸Šï¼Œè€Œéåœ¨é»˜è®¤çš„ context ä¸ŠåŒç­‰åœ°æ¯”è¾ƒå±‚çº§äº†ã€‚æ‰€ä»¥ DOM åœ¨ transform çš„å·¥ç¨‹ä¸­ï¼ŒDOM å¤„äºä¸€ä¸ªæ–°çš„ <code>stacking context</code> é‡Œï¼Œz-index ä¹Ÿæ˜¯ç›¸å¯¹äºè¿™ä¸ª <code>stacking context</code> çš„ï¼Œæ‰€ä»¥è¡¨ç°å‡ºæ¥çš„å®é™…æ˜¯ <code>stacking context</code> çš„å±‚æ¬¡ï¼ŒåŠ¨ç”»ä¸€ç»“æŸï¼ŒDOM åˆå›åˆ°é»˜è®¤çš„ context é‡Œï¼Œè¿™æ—¶çš„ z-index æ‰æ˜¯åœ¨åŒä¸€ä¸ª context ä¸Šçš„æ¯”è¾ƒã€‚</p>
<p>é‚£è¯¥ç”¨ä»€ä¹ˆæ–¹æ³•æ¥æ§åˆ¶å¡ç‰Œçš„å±‚çº§ï¼Œåˆèƒ½è®©åŠ¨ç”»æµç•…åœ°è¡¨ç°å‘¢ï¼Œå½“ç„¶æ˜¯ translate3d ä¸­çš„ z-axisï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“å®ƒæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Œå¹³å¸¸ç”¨å¾—æœ€å¤šçš„åªæ˜¯å®ƒçš„ x-axis å’Œ y-axisï¼Œä¸å¦¨å…ˆçœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code>.box1 {width:100px;height:100px;background:red;transform:perspective(100px) translate3d(0, 0, 100px);}
.box2 {width:100px;height:100px;background:blue;transform:perspective(100px) translate3d(0, 0, 200px);}
</code></pre><p>å®é™…æ•ˆæœæ˜¯ï¼Œçœ‹ä¸åˆ°å®ƒä»¬ï¼Œç„¶åæˆ‘ä»¬å†è®¾ç½® perspective ä¸º 201pxï¼Œè¿™æ—¶å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°ï¼Œbox2 å æ®äº†æ•´ä¸ªå±å¹•ï¼Œè€Œ box1 å®½é«˜çº¦ä¸º 200pxï¼Œå”¯æœ‰è®¾ç½® translate3d(0,0,0) æ—¶ï¼Œå®½é«˜æ‰ä¸º 100pxã€‚</p>
<p>ç°åœ¨å¯ä»¥æ¥ç†è§£ä¸‹ perspective å’Œ translate3d çš„å…³ç³»ï¼Œperspective å¯ä»¥æ¯”ä½œé•œå¤´å’Œ DOM çš„è·ç¦»ï¼Œå®é™…ä¸Šè®¾ç½®å¤šå°‘éƒ½æ²¡å½±å“ï¼Œå› ä¸ºå®ƒé€šè¿‡è·Ÿ z-axis ä¸Šçš„æ•°å€¼æ¯”ä¾‹æ¥å½±å“æ ·å¼ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªåˆ»åº¦ï¼Œè€Œ translate3d çš„ z-axis åˆ™è¡¨ç¤ºäº† DOM å’Œå±å¹•çš„è·ç¦»ã€‚å‡å®šé•œå¤´è·Ÿå±å¹•çš„è·ç¦»å›ºå®šäº†ï¼Œz-axis è¶Šå¤§ï¼ŒDOM é€æ¸è¿œç¦»å±å¹•ï¼Œé è¿‘é•œå¤´ï¼Œè¿™æ—¶ DOM çœ‹èµ·æ¥ä¹Ÿå°±è¶Šå¤§ï¼Œå½“ z-axis å¤§äºæˆ–ç­‰äº perspective æ—¶ï¼ŒDOMå…ƒç´ å·²ç»åœ¨æˆ‘ä»¬é•œå¤´çš„åé¢äº†ï¼Œæ‰€ä»¥ä¹Ÿå°±çœ‹ä¸åˆ°å®ƒäº†ã€‚</p>
<p><img src="//img.aotu.io/Manjiz/2015/151116_perspective.png" alt=""></p>
<p>ç°åœ¨ä¹Ÿå°±å¥½ç†è§£ä¸ºä»€ä¹ˆ perspective å’Œ translate3d èƒ½å¤Ÿå½±å“ DOM çš„å±‚çº§äº†ï¼Œå®ƒä»¬åœ¨å±å¹•å’Œé•œå¤´ä¹‹é—´çš„è·ç¦»ä¸åŒï¼Œæ‰€ä»¥å°±æœ‰äº†å±‚æ¬¡ï¼Œç§»åŠ¨ç«¯è®¾å¤‡å¾ˆå¥½åœ°è¡¨ç°äº†è¿™ä¸ªç»“è®ºï¼Œä½†åœ¨ PC çš„ Chrome ä¸Šæµ‹è¯•åˆ™ä¸ç„¶ï¼Œæˆ‘ä»¬ä»éœ€è¦ z-index æ‰ä¼šè¡¨ç°å‡ºæˆ‘ä»¬éœ€è¦çš„ å±‚æ¬¡å…³ç³»ã€‚</p>
<p><strong>å‚è€ƒ</strong></p>
<ul>
<li><a href="http://segmentfault.com/q/1010000002480824" target="_blank" rel="external">http://segmentfault.com/q/1010000002480824</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;z-index-å’Œ-translate3d&quot;&gt;&lt;a href=&quot;#z-index-å’Œ-translate3d&quot; class=&quot;headerlink&quot; title=&quot;z-index å’Œ translate3d&quot;&gt;&lt;/a&gt;z-index å’Œ translate3d&lt;/
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="translate3d" scheme="https://aotu.io/tags/translate3d/"/>
    
      <category term="zindex" scheme="https://aotu.io/tags/zindex/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„vimäºŒä¸‰äº‹</title>
    <link href="https://aotu.io/notes/2015/10/16/vim-list/"/>
    <id>https://aotu.io/notes/2015/10/16/vim-list/</id>
    <published>2015-10-16T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„â€“åˆ—å¤«Â·æ‰˜å°”æ–¯æ³°</p>
</blockquote>
<h3 id="ä¸æ˜¯ç†ç”±çš„ç†ç”±"><a href="#ä¸æ˜¯ç†ç”±çš„ç†ç”±" class="headerlink" title="ä¸æ˜¯ç†ç”±çš„ç†ç”±"></a>ä¸æ˜¯ç†ç”±çš„ç†ç”±</h3><p>ç”¨äº†å‡ å¹´Vimï¼Œæˆ‘å‘ç°æˆ‘è¶Šæ¥è¶Šå–œæ¬¢å®ƒäº†ï¼Œå’Œå¥½å¤šäººä¸€æ ·å–œæ¬¢å®ƒï¼Œä¹Ÿè®¸å–œæ¬¢çš„ç†ç”±å„ä¸ç›¸åŒï¼Œä½†å¤§æŠµæœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li>å³ä½¿ä½ ç”¨äº†å‡ å¹´äº†ï¼Œä½ è¿˜æ˜¯ä¼šåœ¨æŸå¤©æƒŠå‘¼åŸæ¥è¿˜å¯ä»¥è¿™ä¹ˆæ“ä½œï¼Œ<strong>å®ƒæ€»ä¼šç»™ä½ å¸¦æ¥æƒŠå–œ</strong>ã€‚</li>
<li>å½“ä½ è¦æ“ä½œçš„æ—¶å€™ä½ æ ¹æœ¬ä¸ç”¨å»æƒ³é‚£äº›å¿«æ·é”®(ä¹Ÿè®¸ä¸èƒ½å«å¿«æ·é”®ï¼Œå®ƒæ˜¯è°“è¯­{operator}å’Œå®¾è¯­{text-objects}ï¼Œç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸åŒæŒ‡ä»¤,å¥½åƒè‡ªç„¶è¯­è¨€)ï¼Œå®ƒä»¬å°±åœ¨ä½ æ„è¯†é‡Œã€‚ä¹Ÿè®¸å¼€å§‹çš„æ—¶å€™ä½ éœ€è¦å»è®°ä¸€äº›å¿«æ·é”®ï¼ˆåˆ«çš„ç¼–è¾‘å™¨ä¸ç”¨å—ï¼Ÿï¼‰ï¼Œä½†è®°ä½ä»¥åä½ ç†Ÿç»ƒäº†ï¼Œå°±åƒæ˜¯éª‘è‡ªè¡Œè½¦ï¼Œä½ å°±å¿˜è®°å®ƒçš„å­˜åœ¨ï¼Œä½ åªç”¨è¾“å‡ºä½ çš„æ€æƒ³ï¼Œ<strong>å®ƒè®©ä½ æ›´ä¸“æ³¨ä½ è¦åšçš„äº‹æƒ…æœ¬èº«</strong>ã€‚</li>
<li>è™½ç„¶ä¼šæœ‰å¾ˆå¤šçš„å¿«æ·é”®ä»¥ä¾¿è®©ä¸åŒçš„äººæ‰¾åˆ°ä»–ä»¬æœ€ä½³çš„æ“ä½œæ–¹å¼ï¼Œä½†æ˜¯<strong>æ¯ä¸ªäººå¸¸ç”¨çš„ä¸å¤–ä¹ç‰¹å®šçš„åå‡ ä¸ªå¿«æ·é”®</strong>ï¼Œè€Œè¿™äº›å¿«æ·é”®éƒ½æ˜¯æœ‰å†…åœ¨é€»è¾‘è®©ä½ è®°ä½çš„ï¼Œæ¯”å¦‚ï¼šd(elete)åˆ é™¤,D(elete)åˆ é™¤åˆ°è¡Œå°¾,d(elete)<br>a w(ord) åˆ é™¤ä¸€ä¸ªè¯ã€‚</li>
<li>å¦‚æœæ‡’ï¼Œé‚£ä¹ˆä½ å­¦Vimæ˜¯æ²¡é”™çš„ï¼Œå®ƒæ˜¯<strong>å˜åŒ–ä¸­çš„æ°¸æ’</strong>ï¼Œé‚£ä¹ˆå¤šçš„ç¼–è¾‘å™¨æ›´æ–°è¿­ä»£ï¼Œå®ƒä»¬éƒ½æœ‰viæ¨¡å¼æˆ–viæ’ä»¶ï¼Œä½ å¯ä»¥ç”¨ä½ æ‰€å­¦ï¼Œä¸€å¦‚æ—¢å¾€ã€‚</li>
<li>å®ƒæœ‰<strong>éå¸¸å¤šçš„æ’ä»¶</strong>ï¼Œä½ å¯ä»¥å®šåˆ¶ä¸€äº›è‡ªå·±å–œæ¬¢çš„å¼ºå¤§åŠŸèƒ½ã€‚ï¼ˆè¿™å…¶å®ä¹Ÿæ˜¯ä¸ªç¼ºç‚¹çš„å§ï¼Œæ¯•ç«Ÿè‡ªå·±é…ç½®å¤šè´¹æ—¶é—´å‘€ï¼Œä¸è¿‡å¥½äº›äººä¸€ä¸ªé…ç½®ç”¨äº†åå¤šå¹´ï¼‰ã€‚<a href="http://www.zhihu.com/question/20151659" target="_blank" rel="external">åˆ°åº•æœ‰å¤šå¼ºå¤§å‘¢ï¼Œçœ‹çœ‹çŸ¥ä¹ä¸Šè¿™ç¯‡æ–‡ç« ã€‚</a></li>
</ul>
<p>æˆ‘çŸ¥é“ä¸Šé¢è¿™äº›è¯´å¾—å¤ªæŠ½è±¡äº†ï¼Œä¹Ÿè®¸æˆ‘ä»¬åº”è¯¥æ¥ç‚¹å…·ä½“çš„ï¼Œä½ å¯ä»¥è¾¹çœ‹è¾¹å¯¹æ¯”ä¸€ä¸‹ä½ ä½¿ç”¨çš„ç¼–è¾‘å™¨çš„æ“ä½œï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">ç¼–è¾‘</th>
<th style="text-align:left">ç”¨ Vim</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å¦‚ä½•å‘ä¸‹ç§»åŠ¨7è¡Œ</td>
<td style="text-align:left">7j</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ä½•åˆ é™¤ä¸€ä¸ªè¯ï¼ˆwordï¼‰</td>
<td style="text-align:left">dw</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ä½•åˆ é™¤ä¸€è¡Œ</td>
<td style="text-align:left">dd</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ä½•åˆ é™¤ï½›ï½é‡Œçš„å†…å®¹</td>
<td style="text-align:left">di{</td>
</tr>
<tr>
<td style="text-align:left">å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬80è¡Œ</td>
<td style="text-align:left">80G</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ä½•åœ¨å½“å‰æ–‡ä»¶é‡Œæœç´¢å…‰æ ‡æ‰€åœ¨ä½ç½®çš„è¯</td>
<td style="text-align:left">*(#)</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ä½•åœ¨50è¡Œåˆ°100è¡Œä¹‹é—´æŸ¥æ‰¾å¹¶æ›¿æ¢</td>
<td style="text-align:left">:50,100/old/new/g</td>
</tr>
<tr>
<td style="text-align:left">å¦‚æœä½ æƒ³åœ¨åŒä¸€æ–‡ä»¶ä¸­å¯¹æ¯”ä¸¤ä¸ªä¸åŒçš„å—æ—¶æ€ä¹ˆåš</td>
<td style="text-align:left">:sp (to â€˜splitâ€™ the view)</td>
</tr>
<tr>
<td style="text-align:left">å¦‚æœä½ æƒ³è¦æ‰“å¼€å…‰æ ‡æ‰€åœ¨æ–‡ä»¶åçš„æ–‡ä»¶</td>
<td style="text-align:left">gf (which means â€˜gâ€™o to this â€˜fâ€™ile)</td>
</tr>
<tr>
<td style="text-align:left">å¦‚æœä½ æƒ³è¦å¾—åˆ°æ¯è¡Œå‰10ä¸ªå­—æ¯è€Œå®ƒåé¢çš„æ•°æ®ä¸æ˜¯ä½ æƒ³è¦çš„</td>
<td style="text-align:left">ctrl-v (win ä¸‹æ˜¯ctrl-q)</td>
</tr>
<tr>
<td style="text-align:left">å¦‚æœä½ æƒ³è¦è½¬æ¢åˆ«äººç»™åˆ°ä½ çš„æ··åˆå¤§å°çš„æ–‡ä»¶å˜æˆå°å†™</td>
<td style="text-align:left">1GVG u</td>
</tr>
<tr>
<td style="text-align:left">å½•åˆ¶ä¸€ç³»åˆ—å‘½ä»¤ç„¶åæ‰§è¡Œ</td>
<td style="text-align:left">ç”¨å®</td>
</tr>
<tr>
<td style="text-align:left">åœ¨width:16pxçš„æ•°å­—16ä¸ŠåŠ 20</td>
<td style="text-align:left">20 ctrl+a</td>
</tr>
<tr>
<td style="text-align:left">è¾“å…¥23+45+119çš„ç»“æœ</td>
<td style="text-align:left">ctrl+r=23+45+119</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸Šçš„è¿™äº›æ“ä½œéƒ½æ˜¯ç›´æ¥åœ¨é”®ç›˜ä¸Šæ“ä½œçš„ï¼Œæ²¡æœ‰ç”¨é¼ æ ‡ã€‚</p>
<p>å–œæ¬¢ä¸€ä¸ªäººçš„æ—¶å€™æ€»èƒ½è¯´å‡ºå¥½å¤šçš„ç†ç”±ï¼Œè€Œä¸å–œæ¬¢å´åªéœ€è¦ä¸€ä¸ªç†ç”±ã€‚æ­¤æ—¶æˆ‘èµç¾æˆ‘çš„å¥³ç¥ä½ ä¹Ÿåœ¨å¿ƒé‡Œåˆ—ä¸¾äº†ä½ å¿ƒä¸­å¥³ç¥çš„è¯¸å¤šå¯çˆ±ç¾ä¸½ç‰¹ç‚¹ã€‚æ‰€ä»¥å¯ä»¥æƒ³è±¡å„ç§å…³äºç¼–è¾‘å™¨æ–‡ç« ä¸‹çš„å„ç§äº’å–·åæ§½ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªç¼–è¾‘å™¨çš„æ–‡ç« ä¸‹ä¹Ÿä¸å…ç›¸äº’åæ§½ï¼Œæ¯•ç«Ÿä¸åŒäººç†å¿µä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<h3 id="æœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸º"><a href="#æœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸º" class="headerlink" title="æœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸º"></a>æœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸º</h3><p>vimæ˜¯ä¸ªé«˜æ•ˆçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨æ–‡æœ¬ç¼–è¾‘è¿™ä¸€é¢†åŸŸå¯è°“æ˜¯ç‹¬æ­¥å¤©ä¸‹ï¼Œé«˜æ‰‹<a href="http://zhuanlan.zhihu.com/vim-non-programming/19918627" target="_blank" rel="external">ä½¿ç”¨vimå¤„ç†SRTå­—å¹•å†…å®¹</a>ï¼Œç—´è¿·è€…é™¤äº†ä½¿ç”¨vimå†™ä»£ç ã€<a href="http://www.vimer.cn?p=1222" target="_blank" rel="external">å‘é‚®ä»¶</a>ã€<a href="http://bluegene8210.is-programmer.com/posts/67910.html" target="_blank" rel="external">çœ‹è‚¡ç¥¨</a>ã€å†™åšå®¢ã€å†™markdown(è¿™ç¯‡æ–‡ç« å°±æ˜¯vimå†™çš„markdown)è¿˜<a href="http://www.iplaysoft.com/vimium-and-vimperator.html" target="_blank" rel="external">ä½¿ç”¨vimæµè§ˆç½‘é¡µ</a>ï¼Œæ™®é€šäººå¯ä»¥æŠŠå®ƒä½œä¸º<a href="http://blog.sina.com.cn/s/blog_45dac66f010005kw.html" target="_blank" rel="external">æ™®é€šäººçš„ç¼–è¾‘åˆ©å™¨</a>ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘é¢†åŸŸï¼Œåæ¥è€…åªæœ‰æ¨¡ä»¿è€Œæ— æ³•è¶…è¶Švimã€‚å°æé£åˆ€ç‹¬æ­¥å¤©ä¸‹å´ä¹Ÿç ä¸äº†éª¨å¤´ï¼Œåœ¨ä»£ç ç¼–ç¨‹é¢†åŸŸï¼Œå…¬è®¤çš„æœ€é€‚åˆçš„åœºæ™¯æ˜¯åšUnix/LinuxæœåŠ¡å™¨ç¼–ç¨‹,ä¸ç”¨ä¸‹è½½æœåŠ¡å™¨ç«¯çš„æ–‡ä»¶è€Œç›´æ¥ä¿®æ”¹ï¼›å…¶æ¬¡æ˜¯ç¼–å†™html/css/javascript/shell/python/cç­‰ï¼›æœ€ååœ¨macã€linuxä¸‹è¦æ”¹æ–‡ä»¶ç”¨ç³»ç»Ÿå¸¦çš„viméšæ‰‹æ”¹æ”¹ã€‚è€Œç¼–å†™Java<br>EEã€Objective-Cç­‰è¿˜æ˜¯ç”¨Eclipseã€XCodeç­‰IDEçš„æ¯”è¾ƒå¥½ã€‚</p>
<h3 id="å›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿ"><a href="#å›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿ" class="headerlink" title="å›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿ"></a>å›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿ</h3><p>vimåªæ˜¯ä¸€ä¸ªå·¥å…·è€Œå·²ï¼Œå®ƒå¹¶ä¸èƒ½è®©ä½ ç ä»£ç çš„èƒ½åŠ›æå‡ï¼Œåªèƒ½å¸®ä½ æ›´å¿«é€Ÿåœ°è¾“å‡ºä½ çš„æ€ç»´ã€‚æ¯ä¸€ä¸ªå·¥å…·éƒ½æœ‰å®ƒç‰¹å®šçš„åœºæ™¯ï¼Œèªæ˜çš„äººæ€»ä¼šåœ¨é€‚å½“çš„åœºæ™¯åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚å¥½å¤šäººéƒ½è¯´å­¦ä¹ èµ·æ¥å¥½éš¾çš„å‘€ï¼ŒæŠ•å…¥çš„æˆæœ¬æ¢æ¥çš„æ”¶ç›Šæ˜¯ä¸æ˜¯æˆæ­£æ¯”çš„å‘¢ï¼Ÿæˆ‘è§‰å¾—è¿˜æ˜¯å€¼å¾—çš„ï¼Œä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œå®ƒæ˜¯ä¸‡å˜ä¸­çš„ä¸å˜ï¼ŒåŒæ—¶å®ƒçœŸçš„æ˜¯ä¸ªé«˜æ•ˆçš„å·¥å…·ï¼Œå¦å¤–ä¹Ÿè®¸æœ€åå‡ºæ¥çš„é«˜æ•ˆçš„ç¼–è¾‘å¤–è¿˜å¸¦ç»™ä½ ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚å¥½å¥‡å‘ç°å¸¦æ¥çš„æƒŠå–œï¼Œåˆå¦‚ä½ å‘ç°ä½ ç”¨äº†å‡ å¹´è¿˜æœ‰å¥½å¤šä¸ä¼šçš„è°¦è™šï¼Œè¿˜æœ‰ç”¨å®è§£å†³äº†ä¸€ä¸ªæ£˜æ‰‹é—®é¢˜çš„å–œæ‚¦ã€‚æœ€åå®ƒåªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ˜¯é›•åˆ»æ—è¯—éŸ³æ¾æœ¨äººåƒçš„å°åˆ€ï¼Œæˆ–æ˜¯å† ç»æ­¦æ—çš„å°æé£åˆ€ï¼Œå…³é”®åœ¨äººã€‚</p>
<h3 id="ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ"><a href="#ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ" class="headerlink" title="ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ"></a>ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ</h3><p>ä½›æ¸¡æœ‰ç¼˜äººï¼Œç»†æƒ³è¿™ä¸ªâ€˜æœ‰ç¼˜äººâ€™è¿˜æŒºæœ‰æ„æ€çš„ï¼Œå…¶å®å°±æ˜¯ä¿¡çš„äººï¼Œä¸ä¿¡çš„è¯´å†å¤šä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ã€‚å¦‚æœæƒ³å­¦ï¼Œä¸å¿…å¸è½½ä½ çš„æ˜¯ç¼–è¾‘å™¨ï¼Œåšå‡ºç ´é‡œæ²‰èˆŸä¹‹åŠ¿ï¼Œä¸‡ä¸€ç”¨äº†ä¸¤å¤©è§‰å¾—ä¸æ–¹ä¾¿æˆ–æ˜¯æœ‰ç´§æ€¥çš„è¦ä¿®æ”¹çš„å†…å®¹ï¼Œè¦æ¢å›æ¥ç”¨ç†Ÿæ‚‰çš„ç¼–è¾‘å™¨ã€‚å¦å¤–ä¹Ÿä¸è¦è§‰å¾—ä¸€æ—¶å­¦ä¸ä¼šå°±æ„Ÿè§‰æŒ«æŠ˜ï¼Œæ¯•ç«Ÿå¾ˆå¤šä¸œè¥¿éƒ½ä¸å¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦ä¸€ç‚¹ç§¯ç´¯ï¼Œæ‰€ä»¥æ…¢æ…¢æ¥çš„ã€‚é‚£äº›ã€Š7å¤©XXã€‹ã€Š21ç²¾é€šXXã€‹çœŸçš„å®³äº†å¥½å¤šäººï¼Œæ…¢æ…¢æ¥ï¼Œå®åœ¨ä¸è¡Œè®¤ä¸ºè‡ªå·±ç¬¨äº†ï¼Œä¸è¿˜æœ‰å‹¤èƒ½è¡¥æ‹™å—ï¼Ÿå¥½å¤šçš„ç¼–è¾‘å™¨éƒ½æœ‰viæ’ä»¶æˆ–æ¨¡å¼ï¼Œä½ å¯ä»¥æ‰¾ä¸€æ‰¾ç„¶åè£…ä¸Šè¯•è¯•çš„ï¼Œç­‰ç†Ÿæ‚‰äº†è§‰å¾—ä¸æ»¡è¶³äº†å†æ¢æˆvimï¼Œè¦æ˜¯è§‰å¾—ä¸€ç›´ç”¨viæ’ä»¶ä¹Ÿä¸é”™çš„å°±ä¸€ç›´ç”¨ç€ï¼Œèƒ½è§£å†³é—®é¢˜çš„é¡ºæ‰‹çš„æ‰æ˜¯æœ€é«˜æ•ˆçš„ã€‚</p>
<h3 id="é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„"><a href="#é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„" class="headerlink" title="é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„"></a>é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„</h3><p>æˆ‘åœ¨å°å­¦çš„æ—¶å€™æäº†ä¸ªå°éœ¸ç‹è¯´è¦å­¦ä¹ äº”ç¬”ï¼Œç„¶åå­—æ ¹æ²¡æœ‰èƒŒå®Œå°±å¿˜è®°äº†ï¼Œå¤§å­¦æ—¶å€™å†ä¸€ä¸ªæƒ³èµ·è¿™ä¸ªäº‹å†³å®šå†å­¦äº”ç¬”ï¼Œç„¶åæ²¡æœ‰å‡ å¤©åˆæ”¾å¼ƒäº†ï¼Œæ¯•ä¸šä¸¤å¹´åæƒ³èµ·å­¦äº”ç¬”è¿™ä¸ªäº‹ï¼Œå¿ƒé‡Œæœ‰ä¸ªç»“ï¼Œäºæ˜¯åˆå­¦èµ·æ¥äº†ï¼Œç„¶åä¸€ç›´åœ¨ç”¨ï¼Œè™½ç„¶æ˜¯äº”ç¬”æ··åˆæ¨¡å¼ï¼Œå¶å°”ä¹Ÿç”¨çº¯äº”ç¬”æ¨¡å¼ã€‚vimå°±æ˜¯åœ¨æˆ‘å¯ä»¥ç”¨äº”ç¬”çš„æ—¶å€™å¼€å§‹å­¦çš„ï¼Œå½“æ—¶æ‹¿åŒäº‹çš„vimrcæ¥ç›´æ¥å°±ç”¨äº†ï¼Œç°åœ¨ä¹Ÿåœ¨ç”¨çš„ï¼Œåªæ˜¯æ”¹äº†å°‘è®¸çš„åœ°æ–¹ï¼Œä¸€ç›´åœ¨å¤Ÿç”¨å°±å¥½çš„çŠ¶æ€ï¼Œç„¶ååœ¨ç”¨çš„æ—¶å€™è§‰å¾—æœ‰ä»€ä¹ˆä¸è‡ªç„¶çš„åœ°æ–¹å°±æ‰¾ä¸€ä¸‹ç­”æ¡ˆçš„ï¼Œæ…¢æ…¢åœ°è¶Šæ¥è¶Šé¡ºæ‰‹äº†ã€‚ç»†æƒ³æˆ‘è¿™ä¸ªæ…¢æ–¹æ³•è¿˜æ˜¯å¯å–çš„ï¼Œé‚£ä¹ˆå¤šæˆ‘çš„å‘½ä»¤æˆ‘åªä¼šæˆ‘å¸¸ç”¨çš„åå‡ ä¸ªï¼Œä½†é‚£ä¹Ÿæ˜¯å¤Ÿç”¨çš„äº†ï¼Œå¹¶ä¸”æ˜¯è¶Šæ¥è¶Šå–œæ¬¢ï¼Œçœ‹ç€åˆ«äººç”¨çš„ä¹Ÿè¿˜å¸¸å‘ç°è¿˜æœ‰å¾ˆå¤šä¸ä¼šçš„ä¸œè¥¿ã€‚</p>
<p>å†å›é¦–ï¼Œä¸€åˆ‡æ˜¯é‚£æ ·è‡ªç„¶ï¼Œä¸€å¦‚vimçš„ç†å¿µkeep it simpleï¼Œæˆ‘ä¹Ÿåªè£…äº†å¹³æ—¶å¸¸ç”¨çš„å‡ ä¸ªæ’ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ¯”è¾ƒå¼ºå¤§çš„æ’ä»¶ä¹Ÿæ²¡æœ‰ç”¨å¾—ç€ï¼Œæ‰€ä»¥æ²¡æœ‰è£…ä¸Šã€‚æœ€è¿‘ä¸ºäº†ç»™åŒäº‹ä»¬è®²ä¸€ä¸‹vim,æ‰æ„è¯†åˆ°è™½ç„¶å¹³æ—¶è¯´vimæœ‰å‡ ä¸ªæ¨¡å¼ï¼Œä½†æ˜¯ç”¨çš„æ—¶å€™è‡ªå·±ä¹Ÿæ²¡æœ‰åŒºåˆ†å¾—å¾ˆæ¸…æ¥šï¼Œè§‰å¾—å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œåº”è¯¥é‚£æ ·ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯ä¸ºäº†åŒºåˆ†å’Œè®¤è¯†ä¸€ä¸ªä¸œè¥¿æ‰æŠŠå®ƒè§£æ„äº†ï¼Œå°±åƒä¸€é¦–å¥½çš„æ­Œæ›²ï¼Œæˆ‘ä»¬åªç”¨è§‰å¾—å¥½å¬ï¼Œé‚£äº›ä¹è¯„äººè¯´çš„ä¸ºä»€ä¹ˆå¥½æ„Ÿè§‰éƒ½å¾ˆæœ‰é“ç†ã€‚vimå‘½ä»¤æœ‰å¤šéš¾è®°ä¹Ÿè¿˜æ˜¯æœ‰é€»è¾‘çš„ï¼›vimé‡Œå¯ä»¥å¿«é€Ÿç²¾ç¡®çš„æŸ¥æ‰¾å®šä½ï¼›vimçœŸçš„å¥½åƒä¸€åˆ‡æ–‡æœ¬çš†å¯¹è±¡ï¼Œæ“ä½œé’ˆå¯¹å­—ç¬¦ï¼Œè¯ï¼Œè¡Œï¼Œå—ï¼Œæ–‡ä»¶è¿™äº›å¯¹è±¡ï¼›vimçš„è®¾è®¡å“²å­¦æ˜¯å¦‚æœä½ çš„å·¥ä½œåªéœ€è¦åšä¸€æ¬¡ï¼Œé‚£æ²¡é—®é¢˜ï¼Œæ€ä¹ˆæéƒ½è¡Œï¼Œå¦‚æœä½ çš„å·¥ä½œæ˜¯è¦é‡å¤åœ°å®ŒæˆæŸäº›å·¥ä½œï¼Œåˆ™vimæ€»å¯ä»¥å¸®ä½ æ‰¾åˆ°æ›´å°‘çš„æŒ‰é”®æ–¹å¼æ¥å®ç°ç›¸åŒçš„ç›®æ ‡ã€‚å¦‚<a href="http://vimgolf.com/" target="_blank" rel="external">VimGolf</a>æ‰€è¯´Real Vim ninjas count every keystroke - do you?  </p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;é€‰æ‹©ä½ æ‰€å–œæ¬¢çš„ï¼Œçˆ±ä½ æ‰€é€‰æ‹©çš„â€“åˆ—å¤«Â·æ‰˜å°”æ–¯æ³°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ä¸æ˜¯ç†ç”±çš„ç†ç”±&quot;
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/tags/Web%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>PostCSSå¿«é€Ÿå…¥é—¨ä½¿ç”¨</title>
    <link href="https://aotu.io/notes/2015/10/13/start-postcss/"/>
    <id>https://aotu.io/notes/2015/10/13/start-postcss/</id>
    <published>2015-10-13T01:34:25.000Z</published>
    <updated>2016-11-03T03:32:54.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆè¯†PostCSS"><a href="#åˆè¯†PostCSS" class="headerlink" title="åˆè¯†PostCSS"></a>åˆè¯†PostCSS</h2><p>å¦‚æœä½ ç¬¬ä¸€æ¬¡å¬è¯´<code>PostCSS</code>è¿™ä¸ªä¸œè¥¿ï¼Œé‚£ä¹ˆè¯·çœ‹ä¸‹é¢æ‘˜è‡ªå®˜æ–¹<code>Github</code>çš„ä»‹ç»ï¼š</p>
<blockquote>
<p>PostCSS is a tool for transforming CSS with JS Plugins. These plugins can support variables and mixins, transpile future CSS syntax, inline images, and more</p>
</blockquote>
<p>ç¿»è¯‘æˆä¸­æ–‡çš„æ„æ€å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>PostCSS æ˜¯ä¸€å¥—åˆ©ç”¨JSæ’ä»¶å®ç°çš„ç”¨æ¥æ”¹å˜CSSçš„å·¥å…·.è¿™äº›æ’ä»¶èƒ½å¤Ÿæ”¯æŒå˜é‡å’Œæ··åˆè¯­æ³•ï¼Œè½¬æ¢æœªæ¥CSSè¯­æ³•ï¼Œå†…è”å›¾ç‰‡ï¼Œè¿˜æœ‰æ›´å¤š</p>
</blockquote>
<p>æˆ‘ä»¬ç”¨è¿‡<code>Less</code>ã€<code>SASS</code>ç­‰å·¥å…·æ¥å¯¹CSSåš<code>é¢„å¤„ç†</code>æ“ä½œï¼ŒæŒ‰ç…§å®ƒä»¬çº¦å®šçš„è¯­æ³•æ¥ä¹¦å†™å¹¶ä¸”æœ€ç»ˆè½¬æ¢æˆå¯ç”¨çš„æ ·å¼ï¼Œè¿™ä»˜å‡ºçš„ä»£ä»·æ˜¯<strong>å¿…é¡»å…ˆç†Ÿæ‚‰è¿™ä¸ªå·¥å…·çš„ä¹¦å†™è¯­æ³•</strong>ã€‚ </p>
<p>éšç€è¿‘å‡ å¹´ <a href="http://gruntjs.cn/" target="_blank" rel="external">Grunt</a>ã€<a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a>ã€<a href="http://webpack.github.io/docs/" target="_blank" rel="external">Webpack</a> ç­‰è‡ªåŠ¨åŒ–å·¥å…·çš„å…´èµ·ï¼Œ<code>ç»„åˆå¼åº”ç”¨</code>å˜å¾—éå¸¸çš„çƒ­é—¨ï¼Œé‚£<code>PostCSS</code>å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<strong>CSSç”Ÿæ€ç³»ç»Ÿ</strong></p>
<p><code>PostCSS</code>æ‹¥æœ‰éå¸¸å¤šçš„æ’ä»¶ï¼Œè¯¸å¦‚è‡ªåŠ¨ä¸ºCSSæ·»åŠ æµè§ˆå™¨å‰ç¼€çš„æ’ä»¶<code>autoprefixer</code>ã€å½“å‰ç§»åŠ¨ç«¯æœ€å¸¸ç”¨çš„<code>px</code>è½¬<code>rem</code>æ’ä»¶<code>px2rem</code>ï¼Œè¿˜æœ‰æ”¯æŒå°šæœªæˆä¸ºCSSæ ‡å‡†ä½†ç‰¹å®šå¯ç”¨çš„æ’ä»¶<code>cssnext</code>ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šã€‚å°±è¿è‘—åçš„<code>Bootstrap</code>åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬<code>Bootstrap 5</code>ä¹Ÿå°†ä½¿ç”¨<code>PostCSS</code>ä½œä¸ºæ ·å¼çš„åŸºç¡€ã€‚</p>
<p>ä¸€å¥è¯æ¥æ¦‚æ‹¬PostCSSï¼š<strong>CSSç¼–è¯‘å™¨èƒ½å¤Ÿåšåˆ°çš„äº‹æƒ…ï¼Œå®ƒä¹Ÿå¯ä»¥åšåˆ°ï¼Œè€Œä¸”èƒ½å¤Ÿåšå¾—æ›´å¥½</strong></p>
<h2 id="å¿«é€Ÿä½¿ç”¨PostCSS"><a href="#å¿«é€Ÿä½¿ç”¨PostCSS" class="headerlink" title="å¿«é€Ÿä½¿ç”¨PostCSS"></a>å¿«é€Ÿä½¿ç”¨PostCSS</h2><p>ä¸Šé¢å¤§è‡´ä»‹ç»äº†<code>PostCSS</code>ï¼Œä¹Ÿè®¸æˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨å¤´è„‘é‡Œå½¢æˆå¯¹å®ƒçš„è®¤çŸ¥ï¼Œé‚£ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªç®€å•åœ°å®ä¾‹æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<code>PostCSS</code>ã€‚</p>
<p><code>PostCSS</code>å¾—ç›Šäºæ’ä»¶ï¼Œæ”¯æŒGrunt,Gulp,webpack,Broccoli,Brunchè¿˜æœ‰ENBï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä»¥<code>Gulp</code>ä½œä¸ºå®ä¾‹æ¥è®²ã€‚</p>
<h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><p>åˆ›å»ºå¹¶è¿›å…¥æˆ‘ä»¬çš„å®ä¾‹ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir postcss-demo &amp;&amp; <span class="built_in">cd</span> postcss-demo</div></pre></td></tr></table></figure>
<p>ç„¶åå¿«é€Ÿç”Ÿæˆ<code>package.json</code>æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># --yes å‚æ•°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆé»˜è®¤çš„package.json</span></div><div class="line">npm init --yes</div></pre></td></tr></table></figure>
<p>å°†ä¸Šé¢åˆ›å»ºçš„<code>package.json</code>æ–‡ä»¶çš„<code>main</code>å‚æ•°æ”¹ä¸º<code>gulpfile.js</code>ï¼Œç„¶åå®‰è£…æˆ‘ä»¬æ‰€éœ€çš„ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># gulpè·Ÿgulp-postcssæ˜¯å¿…é¡»çš„ï¼Œåé¢ä¸¤ä¸ªæ’ä»¶ä¸ºäº†æ¼”ç¤ºç”¨é€”</span></div><div class="line">npm i gulp gulp-postcss autoprefixer autoprefixer-core cssnext --save-dev <span class="_">-d</span></div></pre></td></tr></table></figure>
<p>åˆ›å»º<code>gulpfile.js</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># è¿™é‡Œç”¨å‘½ä»¤è¡Œè¿›è¡Œåˆ›å»ºï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ–°å»º</span></div><div class="line">touch gulpfile.js</div></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹gulpfile-js"><a href="#ä¿®æ”¹gulpfile-js" class="headerlink" title="ä¿®æ”¹gulpfile.js"></a>ä¿®æ”¹gulpfile.js</h3><p>å°†ä¸‹é¢ä»£ç è´´è¿›<code>gulpfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'gulp-postcss'</span>);</div><div class="line"><span class="keyword">var</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>);</div><div class="line"><span class="keyword">var</span> cssnext = <span class="built_in">require</span>(<span class="string">'cssnext'</span>);</div><div class="line"></div><div class="line"><span class="comment">//å®šä¹‰cssä»»åŠ¡</span></div><div class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">//å®šä¹‰postcssä»»åŠ¡æµæ•°ç»„</span></div><div class="line">  <span class="keyword">var</span> processors = [</div><div class="line">    autoprefixer(&#123;</div><div class="line">      <span class="attr">browsers</span>:[<span class="string">'last 3 version'</span>],</div><div class="line">      <span class="attr">cascade</span>: <span class="literal">false</span>,</div><div class="line">      <span class="attr">remove</span>: <span class="literal">false</span></div><div class="line">    &#125;),</div><div class="line">    cssnext()</div><div class="line">  ];</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./src/css/*.css'</span>)</div><div class="line">             .pipe(postcss(processors))</div><div class="line">             .pipe(gulp.dest(<span class="string">'./dist'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºç¤ºä¾‹æ ·å¼"><a href="#åˆ›å»ºç¤ºä¾‹æ ·å¼" class="headerlink" title="åˆ›å»ºç¤ºä¾‹æ ·å¼"></a>åˆ›å»ºç¤ºä¾‹æ ·å¼</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºsrcç›®å½•ï¼Œå†åœ¨srcç›®å½•ä¸‹é¢åˆ›å»ºcssç›®å½•ï¼Œç„¶ååˆ›å»ºstyle.cssæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># è¿™é‡Œç”¨å‘½ä»¤åˆ›å»ºï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»º</span></div><div class="line">mkdir -p src/css &amp;&amp; touch style.css</div></pre></td></tr></table></figure>
<p>ç¼–è¾‘æ ·å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">h1</span>&#123;</div><div class="line">  <span class="attribute">display</span>:flex;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-pseudo">:root</span> &#123;</div><div class="line"><span class="attribute">--fontSize</span>: <span class="number">1rem</span>;</div><div class="line"><span class="attribute">--mainColor</span>: <span class="number">#12345678</span>;</div><div class="line"><span class="attribute">--highlightColor</span>: <span class="built_in">hwb</span>(190, 35%, 20%);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line"><span class="attribute">color</span>: <span class="built_in">var</span>(--mainColor);</div><div class="line"></div><div class="line"><span class="attribute">font-size</span>: <span class="built_in">var</span>(--fontSize);</div><div class="line"><span class="attribute">line-height</span>: <span class="built_in">calc</span>(var(--fontSize) * <span class="number">1.5</span>);</div><div class="line"><span class="attribute">padding</span>: <span class="built_in">calc</span>((var(--fontSize) / <span class="number">2</span>) + <span class="number">1px</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå®ä¾‹"><a href="#è¿è¡Œå®ä¾‹" class="headerlink" title="è¿è¡Œå®ä¾‹"></a>è¿è¡Œå®ä¾‹</h3><p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªä¹‹åå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œåˆšæ‰æˆ‘ä»¬å®šä¹‰çš„ä»»åŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp css</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸å‡ºä»€ä¹ˆæ„å¤–çš„è¯å°±ä¼šåœ¨æ ¹ç›®å½•ä¸‹é¢ç”Ÿæˆä¸€ä¸ª<code>dist</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ ·å¼æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">  <span class="attribute">display</span>:-webkit-flex;</div><div class="line">  <span class="attribute">display</span>:-ms-flexbox;</div><div class="line">  <span class="attribute">display</span>:-webkit-box;</div><div class="line">  <span class="attribute">display</span>:flex;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line"><span class="attribute">color</span>:<span class="number">#123456</span>;</div><div class="line"><span class="attribute">color</span>:<span class="built_in">rgba</span>(18, 52, 86, 0.47059);</div><div class="line"></div><div class="line"><span class="attribute">font-size</span>:<span class="number">16px</span>;</div><div class="line"><span class="attribute">font-size</span>:<span class="number">1rem</span>;</div><div class="line"><span class="attribute">line-height</span>:<span class="number">24px</span>;</div><div class="line"><span class="attribute">line-height</span>:<span class="number">1.5rem</span>;</div><div class="line"><span class="attribute">padding</span>:<span class="built_in">calc</span>(0.5rem + 1px);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å†™çš„æ ·å¼è‡ªåŠ¨æ·»åŠ äº†æµè§ˆå™¨å‰ç¼€ï¼Œå¹¶ä¸”ä¸€äº›æœªæ¥CSSè¯­æ³•ä¹Ÿè¢«è½¬æ¢äº†ã€‚</p>
<h2 id="äº†è§£PostCSS"><a href="#äº†è§£PostCSS" class="headerlink" title="äº†è§£PostCSS"></a>äº†è§£PostCSS</h2><p>é€šè¿‡ä¸Šé¢çš„å®ä¾‹æˆ‘ä»¬åº”è¯¥çŸ¥é“<code>PostCSS</code>çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ­¤æ—¶è®©æˆ‘ä»¬å…ˆå›æƒ³ä¸€ä¸‹<code>CSSé¢„å¤„ç†å™¨</code>çš„ä½¿ç”¨å†ç¨‹ï¼š</p>
<ol>
<li>å­¦ä¹ è¯¥CSSé¢„å¤„ç†å™¨çš„è¯­æ³•ç‰¹æ€§ï¼Œè¯¸å¦‚ï¼šå˜é‡å®šä¹‰ã€åµŒå¥—ã€ç»§æ‰¿</li>
<li>åœ¨ç‰¹å®šåç¼€å(.less/.scssç­‰)çš„æ–‡ä»¶æŒ‰ç…§ä¸Šé¢çš„è¯­æ³•è¿›è¡Œç¼–å†™</li>
<li>é€šè¿‡Gulp/Grunt/Webpackç­‰è‡ªåŠ¨åŒ–å·¥å…·æˆ–è€…æ‰‹åŠ¨ç¼–è¯‘æˆCSSæ ·å¼</li>
</ol>
<p>è€Œ<code>PostCSS</code>çš„ä½¿ç”¨å†ç¨‹ï¼š</p>
<ol>
<li>ç›´æ¥æŒ‰ç…§CSSæ ‡å‡†è¯­æ³•æ¥ä¹¦å†™CSSæ ·å¼æ–‡ä»¶</li>
<li>é€šè¿‡Gulp/Grunt/Webpackç­‰è‡ªåŠ¨åŒ–å·¥å…·åŠ è½½PostCSSæ’ä»¶è½¬æ¢è¾“å‡º</li>
</ol>
<p>é€šè¿‡å¯¹æ¯”æˆ‘ä»¬ç±»æ¯”ä¸€ä¸ªç»“è®ºï¼š<em>CSSé¢„å¤„ç†å™¨å¥½æ¯”ç»™ä½ ä¸€ä¸ªå·¥å…·ç®±ï¼Œå·¥å…·ç®±é‡Œé¢æœ‰ä»€ä¹ˆä¸œè¥¿è¯¥æ€ä¹ˆæ‹¿å·²ç»è·Ÿä½ çº¦å®šå¥½ï¼Œä½ å¿…é¡»æŒ‰ç…§è¿™ä¸ªè§„åˆ™æ¥æ‹¿ï¼›è€ŒPostCSSå¥½æ¯”ç»™ä½ ä¸€ä¸ªç›’å­ï¼Œä½ å¯ä»¥ä»æ—è¾¹é€‰æ‹©è‡ªå·±éœ€è¦çš„å·¥å…·æ”¾è¿›ç›’å­æ‰“åŒ…æ‹¿èµ°ï¼Œå¦‚æœè¿˜ä¸å¤Ÿç”¨ä½ å¯ä»¥è‡ªå·±é€ ä¸€ä¸ªå·¥å…·</em></p>
<h2 id="æ·±å…¥PostCSS"><a href="#æ·±å…¥PostCSS" class="headerlink" title="æ·±å…¥PostCSS"></a>æ·±å…¥PostCSS</h2><p><code>PostCSS</code>è‡ªèº«åªåŒ…æ‹¬äº†<code>CSSåˆ†æå™¨</code>ï¼Œ<code>CSSèŠ‚ç‚¹æ ‘API</code>ï¼Œ<code>source mapç”Ÿæˆå™¨</code>ï¼Œ<code>CSSèŠ‚ç‚¹æ‹¼æ¥å™¨</code>ï¼Œè€ŒåŸºäº<code>PostCSS</code>çš„æ’ä»¶éƒ½æ˜¯ä½¿ç”¨äº†<code>CSSèŠ‚ç‚¹æ ‘API</code>æ¥å®ç°çš„ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“CSSçš„ç»„æˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">element &#123;</div><div class="line">  prop1 : rule1 rule2 ...;</div><div class="line">  prop2 : rule1 rule2 ...;</div><div class="line">  prop2 : rule1 rule2 ...;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯ä¸€æ¡ä¸€æ¡çš„æ ·å¼è§„åˆ™ç»„æˆï¼Œæ¯ä¸€æ¡æ ·å¼è§„åˆ™åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§è·Ÿå€¼ã€‚æ‰€ä»¥<code>PostCSS</code>çš„æ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>Parser<br> åˆ©ç”¨<code>CSSåˆ†æå™¨</code>è¯»å–CSSå­—ç¬¦å†…å®¹ï¼Œå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„<code>èŠ‚ç‚¹æ ‘</code></p>
</li>
<li><p>Plugin<br> å¯¹ä¸Šé¢æ‹¿åˆ°çš„<code>èŠ‚ç‚¹æ ‘</code>åˆ©ç”¨<code>CSSèŠ‚ç‚¹æ ‘API</code>è¿›è¡Œä¸€ç³»åˆ—çš„è½¬æ¢æ“ä½œ</p>
</li>
<li><p>Plugin<br> åˆ©ç”¨<code>CSSèŠ‚ç‚¹æ‹¼æ¥å™¨</code>å°†ä¸Šé¢è½¬æ¢ä¹‹åçš„èŠ‚ç‚¹æ ‘é‡æ–°ç»„æˆCSSå­—ç¬¦</p>
</li>
<li><p>Stringifier<br> åœ¨ä¸Šé¢è½¬æ¢æœŸé—´å¯åˆ©ç”¨<code>source mapç”Ÿæˆå™¨</code>è¡¨æ˜è½¬æ¢å‰åå­—ç¬¦çš„å¯¹åº”å…³ç³»</p>
</li>
</ol>
<h3 id="PostCSSæ€§èƒ½"><a href="#PostCSSæ€§èƒ½" class="headerlink" title="PostCSSæ€§èƒ½"></a>PostCSSæ€§èƒ½</h3><p>åœ¨PostCSSå®˜æ–¹æ¨ç‰¹ä¸Šçœ‹åˆ°ï¼Œç”±JavaScriptç¼–å†™çš„PostCSSæ¯”C++ç¼–å†™çš„libsassè¿˜è¦å¿«3å€ï¼Œä¸‹é¢æ¥è‡ªå®˜æ–¹æ¨ç‰¹çš„æˆªå›¾:</p>
<p><img src="//img.aotu.io/cnt1992/postcss.png" alt="PostCss"></p>
<p>å¦‚æœä½ å¯¹ä¸Šé¢çš„æ€§èƒ½æˆªå›¾æœ‰ç–‘é—®ï¼Œå¯ä»¥äº²è‡ªæ¥<a href="https://github.com/postcss/benchmark" target="_blank" rel="external">è¿™é‡Œ</a>æµ‹è¯•çœ‹çœ‹ã€‚</p>
<h3 id="å¼€å§‹ç¼–å†™è‡ªå·±çš„PostCSSæ’ä»¶"><a href="#å¼€å§‹ç¼–å†™è‡ªå·±çš„PostCSSæ’ä»¶" class="headerlink" title="å¼€å§‹ç¼–å†™è‡ªå·±çš„PostCSSæ’ä»¶"></a>å¼€å§‹ç¼–å†™è‡ªå·±çš„PostCSSæ’ä»¶</h3><p><code>PostCSS</code>åœ¨è‡ªå·±çš„<a href="https://github.com/postcss/postcss#plugins" target="_blank" rel="external">Github</a>ä¸Šæ”¾äº†ä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼Œæ›´å¤šçš„æ’ä»¶å¯ä»¥åœ¨<a href="http://postcss.parts/" target="_blank" rel="external">postcss.parts</a>è¿›è¡Œæœç´¢ã€‚</p>
<p>ä½†æœ‰æ—¶å€™å·²æœ‰çš„æ’ä»¶ä¸æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç¼–å†™è‡ªå·±çš„PostCSSæ’ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä¸€æ­¥æ­¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶åŠŸèƒ½éå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line">  æ–‡ä»¶ä½ç½®ï¼šsrc/css/style.css</div><div class="line"> */</div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">font-family</span>: <span class="string">"\5FAE\8F6F\96C5\9ED1"</span>,<span class="built_in">fontstack</span>(<span class="string">'Arial'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“è¾“å…¥ä¸Šé¢çš„æ ·å¼æ—¶ï¼Œä¼šç”Ÿæˆä¸‹é¢çš„æ ·å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">  æ–‡ä»¶ä½ç½®ï¼šdist/style.css</div><div class="line"> */</div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">font-family</span>: <span class="string">"\5FAE\8F6F\96C5\9ED1"</span>,tahoma,arial;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç¯å¢ƒå‡†å¤‡-1"><a href="#ç¯å¢ƒå‡†å¤‡-1" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><p>æˆ‘ä»¬å°†ä»¥<code>Gulp</code>ä½œä¸ºåŸºç¡€æ¥å®ç°æˆ‘ä»¬çš„æ’ä»¶ï¼Œé¦–å…ˆåˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir postcss-plugin &amp;&amp; <span class="built_in">cd</span> postcss-plugin</div></pre></td></tr></table></figure>
<p>ç„¶åå¿«é€Ÿåˆ›å»º<code>package.json</code>æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init --yes</div></pre></td></tr></table></figure>
<p>ç´§æ¥ç€å…ˆå®‰è£…å¿…å¤‡çš„åŒ…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i gulp postcss gulp-postcss --save-dev <span class="_">-d</span></div></pre></td></tr></table></figure>
<p>å†åˆ›å»º<code>gulpfile.js</code>å¹¶ä¸”è¾“å…¥ä¸‹é¢å†…å®¹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'gulp-postcss'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> processors = [</div><div class="line">  ];</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./src/css/*.css'</span>)</div><div class="line">             .pipe(postcss(processors))</div><div class="line">             .pipe(gulp.dest(<span class="string">'./dist'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹"></a>åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹</h3><p>æˆ‘ä»¬åœ¨æ‰§è¡Œ<code>npm install</code>å®‰è£…çš„åŒ…éƒ½æ”¾ç½®åœ¨<code>node_modules</code>æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºPostCSSçš„æ’ä»¶æ–‡ä»¶å¤¹ï¼Œæ³¨æ„ï¼š<strong>PostCSSçš„æ’ä»¶å‘½åæ ¼å¼ä¸ºï¼špostcss-æ’ä»¶åå­—</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># è¿™é‡Œé‡‡ç”¨å‘½ä»¤æ–°å»ºæ–‡ä»¶å¤¹ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»º</span></div><div class="line">mkdir node_modules/postcss-fontstack</div></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ’ä»¶å…¥å£æ–‡ä»¶"><a href="#åˆ›å»ºæ’ä»¶å…¥å£æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ’ä»¶å…¥å£æ–‡ä»¶"></a>åˆ›å»ºæ’ä»¶å…¥å£æ–‡ä»¶</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨<code>postcss-fontstack</code>æ–‡ä»¶å¤¹åˆ›å»ºå…¥å£æ–‡ä»¶<code>index.js</code>ï¼Œ<code>PostCSS</code>åˆ›å»ºæ’ä»¶çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'postcss'</span>);</div><div class="line"><span class="built_in">module</span>.exports = postcss.plugin(<span class="string">'æ’ä»¶åå­—'</span>, <span class="function"><span class="keyword">function</span> æ’ä»¶åå­—(<span class="params">é€‰é¡¹</span>)</span>&#123;</div><div class="line">  <span class="comment">//è¿™é‡Œå†™æ’ä»¶ä»£ç </span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>é‚£æˆ‘ä»¬å¯ä»¥åœ¨<code>index.js</code>é‡Œé¢è´´å…¥ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'postcss'</span>);</div><div class="line"></div><div class="line">modules.exports = postcss.plugin(<span class="string">'fontstack'</span>, <span class="function"><span class="keyword">function</span> <span class="title">fontstack</span>(<span class="params"> options </span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> css </span>)</span>&#123;</div><div class="line">    options = options || &#123;&#125;;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> fontstack_config = &#123;</div><div class="line">      <span class="string">'Arial'</span>: <span class="string">'tahoma,arial'</span>,</div><div class="line">      <span class="string">'Times New Roman'</span>: <span class="string">'TimesNewRoman, "Times New Roman", Times, Baskerville, Georgia, serif'</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">toTitleCase</span>(<span class="params"> str </span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> str.replace(<span class="regexp">/\w\S*/g</span>,<span class="function"><span class="keyword">function</span>(<span class="params"> txt </span>)</span>&#123;</div><div class="line">          <span class="keyword">return</span> txt.charAt(<span class="number">0</span>).toUpperCase() + txt.substr(<span class="number">1</span>).toLowerCase();</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// css.walkRulesæ–¹æ³•ç”¨æ¥éå†æ¯ä¸€æ¡cssè§„åˆ™</span></div><div class="line">    css.walkRules( <span class="function"><span class="keyword">function</span>(<span class="params"> rule </span>)</span>&#123;</div><div class="line">        <span class="comment">// walkDeclsæ–¹æ³•ç”¨æ¥è§£æå±æ€§è·Ÿå€¼</span></div><div class="line">        rule.walkDecls( <span class="function"><span class="keyword">function</span>(<span class="params"> decl, i </span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> value = decl.value;</div><div class="line">            <span class="keyword">if</span>( value.indexOf( <span class="string">'fontstack('</span> ) !== <span class="number">-1</span> )&#123;</div><div class="line">                <span class="keyword">var</span> fontstack_requested = value.match(<span class="regexp">/\(([^)]+)\)/</span>)[<span class="number">1</span>].replace(<span class="regexp">/["']/g</span>,<span class="string">""</span>);</div><div class="line">                fontstack_requested = toTitleCase( fontstack_requested );</div><div class="line"></div><div class="line">                <span class="keyword">var</span> fontstack = fontstack_config[ fontstack_requested ];</div><div class="line"></div><div class="line">                <span class="keyword">var</span> firstFont = value.substr( <span class="number">0</span>, value.indexOf(<span class="string">'fontstack('</span>) );</div><div class="line"></div><div class="line">                <span class="keyword">var</span> newValue = firstFont + fontstack;</div><div class="line"></div><div class="line">                decl.value = newValue;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åœ¨<code>gulpfile.js</code>å¼•å…¥ä¸Šé¢çš„æ’ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">'gulp-postcss'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> processors = [</div><div class="line">  ];</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./src/css/*.css'</span>)</div><div class="line">             .pipe(postcss(processors))</div><div class="line">             .pipe(gulp.dest(<span class="string">'./dist'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå®ä¾‹-1"><a href="#è¿è¡Œå®ä¾‹-1" class="headerlink" title="è¿è¡Œå®ä¾‹"></a>è¿è¡Œå®ä¾‹</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œå®ä¾‹ï¼Œæœ€ç»ˆå®ç°æˆ‘ä»¬çš„æ•ˆæœ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp css</div></pre></td></tr></table></figure>
<h2 id="å†è°ˆPostCSS"><a href="#å†è°ˆPostCSS" class="headerlink" title="å†è°ˆPostCSS"></a>å†è°ˆPostCSS</h2><p>åŸºäº<code>PostCSS</code>èƒ½å¤Ÿåšåˆ°å¾ˆå¤š<code>CSSé¢„å¤„ç†å™¨</code>åšä¸åˆ°çš„äº‹æƒ…ï¼Œæœªæ¥å‘å±•å‰æ™¯è¿˜æ˜¯æŒºä¸é”™çš„ï¼Œè€Œä¸”æœ€æ–°çš„<code>Atom</code>ç¼–è¾‘å™¨ä¹Ÿå¯ä»¥ä¸‹è½½æ’ä»¶æ¥æ”¯æŒ<code>PostCSS</code>è¿™ç§è¯­æ³•ã€‚</p>
<p>ä½†è¿™å°±æ„å‘³ç€<code>CSSé¢„å¤„ç†å™¨</code>è¿‡æ—¶äº†ä¹ˆï¼Ÿä¸ä¼šã€‚<code>PostCSS</code>çš„å‡ºç°å¹¶ä¸æ˜¯ä¸ºäº†æ›¿æ¢æ‰ä¹‹å‰çš„æŠ€æœ¯ï¼Œåªæ˜¯æä¾›å¤šä¸€ç§æ€è·¯è®©æˆ‘ä»¬å»è€ƒè™‘ï¼Œå°±æ¯”å¦‚Sassç¼–è¯‘åå†åŠ <code>autoprefixer</code>è‡ªåŠ¨è¡¥é½æµè§ˆå™¨å‰ç¼€è¿™ç§åšæ³•å½“å‰è¿˜æ˜¯æ¯”è¾ƒæµè¡Œçš„ã€‚</p>
<p>å†å›åˆ°æ–‡ç« æœ€å¼€å§‹è¯´çš„ï¼Œ<code>PostCSS</code>å…¶å®æ˜¯åœ¨æ‰“é€ ä¸€ä¸ªæ”¹å˜CSSå¼€å‘æ–¹å¼çš„ç”Ÿæ€ç³»ç»Ÿã€‚ä¹Ÿè®¸æš‚æ—¶æˆ‘ä»¬è¿˜æ˜¯ä¿æŒä¼ ç»Ÿçš„å¼€å‘æ–¹å¼ï¼Œä½†æœªæ¥å¯¹äº<code>PostCSS</code>æˆ‘è¿˜æ˜¯ä¿æŒå…³æ³¨ï¼Œå®ƒæ˜¯å€¼å¾—æœŸå¾…çš„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åˆè¯†PostCSS&quot;&gt;&lt;a href=&quot;#åˆè¯†PostCSS&quot; class=&quot;headerlink&quot; title=&quot;åˆè¯†PostCSS&quot;&gt;&lt;/a&gt;åˆè¯†PostCSS&lt;/h2&gt;&lt;p&gt;å¦‚æœä½ ç¬¬ä¸€æ¬¡å¬è¯´&lt;code&gt;PostCSS&lt;/code&gt;è¿™ä¸ªä¸œè¥¿ï¼Œé‚£ä¹ˆè¯·çœ‹ä¸‹é¢æ‘˜è‡ªå®˜
    
    </summary>
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/cates/Web%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="Webå¼€å‘" scheme="https://aotu.io/tags/Web%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å‡¹å‡¸å®éªŒå®¤åšå®¢V1.0.0å‘å¸ƒ</title>
    <link href="https://aotu.io/notes/2015/10/08/aotu-blog-v1/"/>
    <id>https://aotu.io/notes/2015/10/08/aotu-blog-v1/</id>
    <published>2015-10-08T02:24:35.000Z</published>
    <updated>2016-11-03T03:32:54.961Z</updated>
    
    <content type="html"><![CDATA[<p>ç­¹å¤‡äº†ä¸¤å‘¨å¤šï¼Œå‡¹å‡¸å®éªŒå®¤åšå®¢ V1.0.0 æ­£å¼å‘å¸ƒå•¦ï¼Œæ¬¢è¿åŒå­¦ä»¬ä½“éªŒå¹¶æä¾›å»ºè®®ã€‚<br>å®ƒæ˜¯ä¸€ä¸ªæ‰˜ç®¡äºGithubçš„é™æ€åšå®¢ï¼ŒåŸºäºHEXOæ­å»ºï¼Œä¸»é¢˜çš„å®šåšå‚è€ƒè‡ª<a href="http://html5up.net/future-imperfect" target="_blank" rel="external">future-imperfect</a>çš„æ‰å¹³ç®€çº¦ï¼Œæš‚ä¸”å‘½åä¸º<code>o2</code>ã€‚ä¸»é¢˜å•ç‹¬å¼€æºäº <a href="o2team/hexo-theme-o2">hexo-theme-o2</a>ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªç”±ä¸‹è½½ä½¿ç”¨ã€‚</p>
<a id="more"></a>
<h2 id="åšå®¢çš„ä¸€äº›ç‰¹æ€§"><a href="#åšå®¢çš„ä¸€äº›ç‰¹æ€§" class="headerlink" title="åšå®¢çš„ä¸€äº›ç‰¹æ€§"></a>åšå®¢çš„ä¸€äº›ç‰¹æ€§</h2><ol>
<li><p>ä½¿ç”¨githubå¤´åƒ</p>
<p>è®°å¾—å°†ä½ ä»¬åœ¨githubçš„å¤´åƒæ›´æ–°åˆ°æœ€å¸…ï¼Œå°†ä½ githubçš„ç”¨æˆ·ååœ¨æ–‡ç« å†…å¤´éƒ¨å¡«å¥½å³å¯ï¼</p>
</li>
<li><p><a href="https://npmjs.org/package/hexo-wordcount" target="_blank" rel="external">hexo-wordcount</a> æ˜¾ç¤ºåšæ–‡å­—æ•°</p>
</li>
<li><a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">ä¸è’œå­</a> ç»Ÿè®¡åšæ–‡çš„pv</li>
<li>æ¯æ—¥ä¸€å¥è‹±æ–‡è­¦å¥</li>
<li><a href="http://duoshuo.com" target="_blank" rel="external">å¤šè¯´</a>è¯„è®º</li>
</ol>
<h2 id="ä½¿ç”¨æŒ‡å¼•"><a href="#ä½¿ç”¨æŒ‡å¼•" class="headerlink" title="ä½¿ç”¨æŒ‡å¼•"></a>ä½¿ç”¨æŒ‡å¼•</h2><ol>
<li><p>å®‰è£…hexo</p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="selector-tag">i</span> hexo-cli -g</div></pre></td></tr></table></figure>
</li>
<li><p>å°†o2team.github.ioçš„æºç æ‹‰åˆ°æœ¬åœ°</p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git@github<span class="selector-class">.com</span>:o2team/o2team<span class="selector-class">.github</span><span class="selector-class">.io</span><span class="selector-class">.git</span> o2team</div></pre></td></tr></table></figure>
</li>
<li><p>åˆå§‹åŒ–å­æ¨¡å—(submodules)</p>
 <figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> o2team</div><div class="line">git submodule init</div><div class="line">git submodule <span class="keyword">update</span></div><div class="line"></div><div class="line"><span class="comment"># åˆ‡æ¢è‡³themes/o2ç›®å½•ï¼Œç­¾å‡ºmasteråˆ†æ”¯</span></div><div class="line"><span class="keyword">cd</span> ../themes/o2</div><div class="line">git checkout master</div></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…nodejsåŒ…</p>
 <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åˆ‡æ¢å›æ ¹ç›®å½•ä¸‹</span></div><div class="line">cd ..<span class="regexp">/../</span></div><div class="line"><span class="built_in">npm</span> install</div></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œ<code>hexo s --watch</code></p>
<p> è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼Œæµè§ˆå™¨æ‰“å¼€ <a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a> å³å¯æœ¬åœ°è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™</p>
</li>
</ol>
<h2 id="åˆ›å»ºæ–‡ç« "><a href="#åˆ›å»ºæ–‡ç« " class="headerlink" title="åˆ›å»ºæ–‡ç« "></a>åˆ›å»ºæ–‡ç« </h2><p>æœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºæ–‡ç« ï¼Œå¯ä»»é€‰å…¶ä¸€ï¼š</p>
<blockquote>
<p>æ³¨æ„ï¼šæ–‡ä»¶åä¸è¦å‡ºç°ä¸­æ–‡!!!</p>
</blockquote>
<ol>
<li><p>ä½¿ç”¨<code>hexo new</code> å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
</li>
<li><p>æ‹·è´ç°æœ‰çš„æ–‡ç« è¿›è¡Œä¿®æ”¹</p>
<p>hexoä½¿ç”¨markdownæ¥ç¼–è¾‘æ–‡ç« ï¼Œåœ¨sourceç›®å½•ä¸‹ï¼Œæ‹·è´ä»»æ„mdæ–‡ä»¶è¿›è¡Œåˆ›å»ºæ–°çš„æ–‡ç« ã€‚å…·ä½“å¯å‚è€ƒä¸‹hexoçš„å®˜æ–¹è¯´æ˜</p>
</li>
</ol>
<h2 id="æ–‡ç« è§„èŒƒ"><a href="#æ–‡ç« è§„èŒƒ" class="headerlink" title="æ–‡ç« è§„èŒƒ"></a>æ–‡ç« è§„èŒƒ</h2><ol>
<li>ä½¿ç”¨markdownå†™åšæ–‡ </li>
<li><p>åšæ–‡å›¾ç‰‡ç»Ÿä¸€ä½ç½®ï¼š<code>source/img/post/</code><br> åœ¨åšå®¢å†…å®¹ä¸­å¯ä»¥ä½¿ç”¨ <code>pimg</code> è‡ªå®šä¹‰æ ‡ç­¾æ¥å¼•ç”¨å›¾ç‰‡ã€‚æ³¨æ„åˆ«è¦†ç›–äº†åˆ«äººçš„å›¾ç‰‡!!!<br> å…¶è¯­æ³•æ ¼å¼ä¸ºï¼š<br> <code>{% pimg imageName [alt text] [JSONImageAttibutes] %}</code><br> ä¾‹å¦‚ï¼š<br> <code>{% pimg post-aotu.jpg "ç©ºæ ¼è¯·ç”¨%20æ¥åŒºåˆ†" '{"title":"hello","class":"test_img"}' %}</code><br> éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<code>pimg</code> åˆ©ç”¨ç©ºæ ¼æ¥åˆ’åˆ†å­—æ®µå±æ€§ï¼Œå¦‚æœä¸€ä¸ªå±æ€§çš„å€¼éœ€è¦ç©ºæ ¼ï¼Œè¯·å°†ç©ºæ ¼ç”¨<code>%20</code>ä»£æ›¿!!!    </p>
</li>
<li><p>ä¸ºäº†ä¿è¯åšå®¢æ•´ä½“ç¾è§‚ï¼Œæ¯ä¸ªæ–‡ç« éœ€è¦ä¸€å¼ é…å›¾(å¤§å°ï¼š840x340)</p>
</li>
<li><p>æŒ‡æ˜æ–‡ç« çš„å‰¯æ ‡é¢˜ã€ä½œè€…ä¿¡æ¯ã€å°é¢å›¾ç‰‡åœ°å€</p>
 <figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">subtitle: "å‡¹å‡¸å®éªŒå®¤åšå®¢æ˜¯ä¸€ä¸ªæ‰˜ç®¡äºGithubçš„é™æ€åšå®¢ï¼ŒåŸºäºHEXOæ­å»º..."</div><div class="line">date: 2015<span class="string">-11</span><span class="string">-20</span> 00:24:35</div><div class="line">cover: "å°é¢å›¾ç‰‡åœ°å€"</div><div class="line"><span class="keyword">tags:</span></div><div class="line">- Hexo</div><div class="line">author:</div><div class="line">    nick: LVä¸»å”±å¤§äºº</div><div class="line">    github_name: mamboer</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨<code>&lt;!-- more --&gt;</code>è®¾ç½®æ–‡ç« çš„æ‘˜è¦</p>
<p> ç¤ºä¾‹ï¼š</p>
 <figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="xml">title: æ–‡ç« æ ‡é¢˜</span></div><div class="line">---</div><div class="line">è¿™éƒ¨åˆ†æ˜¯æ–‡ç« æ‘˜è¦ï¼Œè¿™éƒ¨åˆ†æ˜¯æ–‡ç« æ‘˜è¦ã€‚åœ¨hexoæ¨¡ç‰ˆé‡Œå¯é€šè¿‡ <span class="template-tag">&#123;% <span class="name">raw</span> %&#125;</span><span class="xml"></span><span class="template-variable">&#123;&#123; post.excerpt &#125;&#125;</span><span class="xml"></span><span class="template-tag">&#123;% <span class="name">endraw</span> %&#125;</span><span class="xml"> æ¥å¼•ç”¨ã€‚</span></div><div class="line"><span class="comment">&lt;!-- more --&gt;</span> </div><div class="line">è¿™é‡Œæ˜¯æ–‡ç« çš„å‰©ä½™éƒ¨åˆ†ã€‚åœ¨hexoæ¨¡ç‰ˆé‡Œå¯é€šè¿‡<span class="template-tag">&#123;% <span class="name">raw</span> %&#125;</span><span class="xml"></span><span class="template-variable">&#123;&#123; post.more &#125;&#125;</span><span class="xml"></span><span class="template-tag">&#123;% <span class="name">endraw</span> %&#125;</span><span class="xml"> æ¥å¼•ç”¨ã€‚</span></div></pre></td></tr></table></figure>
<p> å®é™…ä½¿ç”¨è¯·å‚è€ƒ<a href="!--ï¿¼9--">æœ¬æ–‡</a>ã€‚</p>
</li>
</ol>
<h2 id="å…³äºåšå®¢çš„å‘å¸ƒ"><a href="#å…³äºåšå®¢çš„å‘å¸ƒ" class="headerlink" title="å…³äºåšå®¢çš„å‘å¸ƒ"></a>å…³äºåšå®¢çš„å‘å¸ƒ</h2><p>ä¸ºäº†ä¾¿äºç»Ÿä¸€ç»´æŠ¤ï¼Œåšå®¢çš„å‘å¸ƒç”±<code>LV</code>è´Ÿè´£ã€‚åŒå­¦ä»¬å†™å¥½åšæ–‡å¹¶åœ¨æœ¬åœ°é¢„è§ˆOKåç›´æ¥æäº¤Githubå³å¯ã€‚  </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç­¹å¤‡äº†ä¸¤å‘¨å¤šï¼Œå‡¹å‡¸å®éªŒå®¤åšå®¢ V1.0.0 æ­£å¼å‘å¸ƒå•¦ï¼Œæ¬¢è¿åŒå­¦ä»¬ä½“éªŒå¹¶æä¾›å»ºè®®ã€‚&lt;br&gt;å®ƒæ˜¯ä¸€ä¸ªæ‰˜ç®¡äºGithubçš„é™æ€åšå®¢ï¼ŒåŸºäºHEXOæ­å»ºï¼Œä¸»é¢˜çš„å®šåšå‚è€ƒè‡ª&lt;a href=&quot;http://html5up.net/future-imperfect&quot;&gt;future-imperfect&lt;/a&gt;çš„æ‰å¹³ç®€çº¦ï¼Œæš‚ä¸”å‘½åä¸º&lt;code&gt;o2&lt;/code&gt;ã€‚ä¸»é¢˜å•ç‹¬å¼€æºäº &lt;a href=&quot;o2team/hexo-theme-o2&quot;&gt;hexo-theme-o2&lt;/a&gt;ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªç”±ä¸‹è½½ä½¿ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/cates/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Hexo" scheme="https://aotu.io/tags/Hexo/"/>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://aotu.io/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
</feed>
